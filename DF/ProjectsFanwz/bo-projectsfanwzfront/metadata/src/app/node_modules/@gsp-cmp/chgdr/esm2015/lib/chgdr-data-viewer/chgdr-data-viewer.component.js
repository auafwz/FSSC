/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector, Input, ViewChild } from '@angular/core';
import { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';
import { ChangeDataHeader } from '../model/change-data-header';
import { ChgdrDataBuilder } from './chgdr-data-builder';
import { ChgdrTreeBuilder } from './chgdr-tree-builder';
import { TreeTableComponent } from '@farris/ui-treetable';
import { ChgdrMetadataService } from '../service/chgdr-metadata.service';
import { ChgdrConfigService } from '../service/chgdr-config.service';
import { ChgdrInnerService } from '../service/chgdr-inner.service';
export class ChgdrDataViewerComponent {
    /**
     * @param {?} metadataService
     * @param {?} injector
     * @param {?} chgdrMetadataService
     * @param {?} chgdrConfigService
     * @param {?} chgdrInnerService
     */
    constructor(metadataService, injector, chgdrMetadataService, chgdrConfigService, chgdrInnerService) {
        this.metadataService = metadataService;
        this.injector = injector;
        this.chgdrMetadataService = chgdrMetadataService;
        this.chgdrConfigService = chgdrConfigService;
        this.chgdrInnerService = chgdrInnerService;
        this.showDataId = false;
        this.treeConfig = {
            idField: 'id',
            columns: [
                { field: 'name', title: 'Name', width: 200 }
            ],
            /**
             * 叶子节点图标
             */
            leafIcon: 'f-icon f-icon-page-title-type text-info mr-2',
            /**
             * 节点展开图标
             */
            expandIcon: 'f-icon f-icon-file-folder-open text-info mr-2',
            /**
             * 节点折叠图标
             */
            collapseIcon: 'f-icon f-icon-file-folder-close text-info mr-2',
            showLevel: -1,
            disabled: false,
            init: false,
            selectValues: []
        };
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (!!this.data) {
            /** @type {?} */
            let beId = this.data.entityId;
            this.chgdrInnerService.getChgdrConfigHandler(beId).subscribe((/**
             * @param {?} handler
             * @return {?}
             */
            handler => {
                this.chgdrData = new ChgdrDataBuilder().buildChgdrData(this.data, handler);
                this.treeData = new ChgdrTreeBuilder().build(this.chgdrData);
                if (this.treeTableComponent) {
                    //移除已选中项。
                    //避免更换数据源后，treeGrid找不到之前的选中数据，导致控制台告警
                    this.treeTableComponent.clearSelections();
                }
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.treeTableComponent.selectNode(this.treeData[0].id);
                }), 0);
            }));
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    handleTreeSelection($event) {
        /** @type {?} */
        const node = $event.node;
        if (this.currentNode != null && this.currentNode.id == node.id) {
            //如果选中相同节点，直接返回
            return;
        }
        this.currentNode = node;
    }
}
ChgdrDataViewerComponent.decorators = [
    { type: Component, args: [{
                selector: 'chgdr-data-viewer',
                template: "<farris-splitter *ngIf=\"!!chgdrData\" class=\"row flex-fill farris-split-section\" style=\"margin: 0px;\">\r\n  <farris-splitter-pane [ngResizable]=true [rzMinWidth]=\"250\" [rzHandles]=\"'e'\" style=\"padding:0.3rem 0 0.3rem 0.3rem;\"\r\n    class=\"d-flex flex-column farris-lsection f-col-w4\">\r\n    <farris-treetable #treeTable class=\"f-utils-fill\" style=\"overflow-y: auto;\" [columns]=\"treeConfig.columns\" [showBorder]=\"false\" [showHeader]=\"false\"\r\n      [data]=\"treeData\" [idField]=\"treeConfig.idField\" [singleSelect]=\"true\" [showCheckbox]=\"false\"\r\n      [showIcon]=\"true\" [disabled]=\"treeConfig.disabled\" [checkOnSelect]=\"true\"\r\n      (nodeSelected)=\"handleTreeSelection($event)\" [leafIcon]=\"treeConfig.leafIcon\"\r\n      [expandIcon]=\"treeConfig.expandIcon\" [collapseIcon]=\"treeConfig.collapseIcon\"\r\n      [selectValues]=\"treeConfig.selectValues\">\r\n    </farris-treetable>\r\n  </farris-splitter-pane>\r\n  <farris-splitter-pane class=\"farris-rsection farris-overflow-y-auto f-utils-fill-flex-column\" style=\"padding:0 0 0 0.3rem\">\r\n    <farris-section mainTitle=\"\u57FA\u672C\u4FE1\u606F\" [enableMaximize]=\"false\" [enableAccordion]=\"'default'\">\r\n      <lib-chgdr-row-baseinfo-form [chgdrTreeNode]=\"currentNode\" [showDataId]=\"showDataId\"></lib-chgdr-row-baseinfo-form>\r\n    </farris-section>\r\n    <farris-section mainTitle=\"\u53D8\u66F4\u8BE6\u60C5\" [enableMaximize]=\"false\" [fill]=\"true\" class=\"pt-0\">\r\n      <lib-chgdr-row-grid *ngIf=\"!!currentNode && currentNode.chgdrRow.changes.length>0\" [chgdrTreeNode]=\"currentNode\" class=\"f-utils-fill\"></lib-chgdr-row-grid>\r\n      <div class=\"f-datagrid-norecords\" *ngIf=\"!currentNode || currentNode.chgdrRow.changes.length==0\" style=\"height: 250px;\">\r\n        <div class=\"f-datagrid-norecords-content\" style=\"width: 100%;\">\r\n            \u65E0\u6570\u636E\r\n        </div>\r\n      </div>\r\n    </farris-section>\r\n  </farris-splitter-pane>\r\n</farris-splitter>",
                styles: [":host{display:-webkit-box;display:flex;height:100%}"]
            }] }
];
/** @nocollapse */
ChgdrDataViewerComponent.ctorParameters = () => [
    { type: GSPMetadataRTService },
    { type: Injector },
    { type: ChgdrMetadataService },
    { type: ChgdrConfigService },
    { type: ChgdrInnerService }
];
ChgdrDataViewerComponent.propDecorators = {
    data: [{ type: Input }],
    showDataId: [{ type: Input }],
    treeTableComponent: [{ type: ViewChild, args: ["treeTable",] }]
};
if (false) {
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.data;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.showDataId;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.treeTableComponent;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.treeConfig;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.chgdrData;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.treeData;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.currentNode;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.metadataService;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.chgdrMetadataService;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.chgdrConfigService;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.chgdrInnerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hnZHItZGF0YS12aWV3ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvY2hnZHIvIiwic291cmNlcyI6WyJsaWIvY2hnZHItZGF0YS12aWV3ZXIvY2hnZHItZGF0YS12aWV3ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQW9DLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN4RyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUVwRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUkvRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQWlCLE1BQU0sc0JBQXNCLENBQUM7QUFDdkUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDekUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFHckUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFPbkUsTUFBTSxPQUFPLHdCQUF3Qjs7Ozs7Ozs7SUE0Qm5DLFlBQW9CLGVBQXFDLEVBQy9DLFFBQWtCLEVBQ2xCLG9CQUEwQyxFQUMxQyxrQkFBc0MsRUFDdEMsaUJBQW9DO1FBSjFCLG9CQUFlLEdBQWYsZUFBZSxDQUFzQjtRQUMvQyxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDMUMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFvQjtRQUN0QyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBN0JyQyxlQUFVLEdBQVksS0FBSyxDQUFDO1FBSXJDLGVBQVUsR0FBUTtZQUNoQixPQUFPLEVBQUUsSUFBSTtZQUNiLE9BQU8sRUFBRTtnQkFDUCxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFO2FBQzdDOzs7O1lBRUQsUUFBUSxFQUFFLDhDQUE4Qzs7OztZQUV4RCxVQUFVLEVBQUUsK0NBQStDOzs7O1lBRTNELFlBQVksRUFBRSxnREFBZ0Q7WUFDOUQsU0FBUyxFQUFFLENBQUMsQ0FBQztZQUNiLFFBQVEsRUFBRSxLQUFLO1lBQ2YsSUFBSSxFQUFFLEtBQUs7WUFDWCxZQUFZLEVBQUUsRUFBRTtTQUNqQixDQUFDO0lBVWdELENBQUM7Ozs7SUFFbkQsUUFBUTtJQUNSLENBQUM7Ozs7O0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7O2dCQUNYLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7WUFDN0IsSUFBSSxDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVM7Ozs7WUFBQyxPQUFPLENBQUEsRUFBRTtnQkFDcEUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzNFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQzdELElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO29CQUMzQixTQUFTO29CQUNULHFDQUFxQztvQkFDckMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsRUFBRSxDQUFDO2lCQUMzQztnQkFDRCxVQUFVOzs7Z0JBQUMsR0FBRyxFQUFFO29CQUNkLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDMUQsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ1IsQ0FBQyxFQUFDLENBQUE7U0FDSDtJQUNILENBQUM7Ozs7O0lBRU0sbUJBQW1CLENBQUMsTUFBTTs7Y0FDekIsSUFBSSxHQUFrQixNQUFNLENBQUMsSUFBSTtRQUN2QyxJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDOUQsZUFBZTtZQUNmLE9BQU87U0FDUjtRQUNELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0lBQzFCLENBQUM7OztZQW5FRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLG1CQUFtQjtnQkFDN0IsMitEQUFpRDs7YUFFbEQ7Ozs7WUFuQlEsb0JBQW9CO1lBRFQsUUFBUTtZQVVuQixvQkFBb0I7WUFDcEIsa0JBQWtCO1lBR2xCLGlCQUFpQjs7O21CQVF2QixLQUFLO3lCQUVMLEtBQUs7aUNBQ0wsU0FBUyxTQUFDLFdBQVc7Ozs7SUFIdEIsd0NBQ3VCOztJQUN2Qiw4Q0FBcUM7Ozs7O0lBQ3JDLHNEQUM4Qzs7SUFFOUMsOENBZUU7O0lBRUYsNkNBQXFCOztJQUNyQiw0Q0FBMEI7O0lBQzFCLCtDQUEyQjs7Ozs7SUFFZixtREFBNkM7Ozs7O0lBQ3ZELDRDQUEwQjs7Ozs7SUFDMUIsd0RBQWtEOzs7OztJQUNsRCxzREFBOEM7Ozs7O0lBQzlDLHFEQUE0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0b3IsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEdTUE1ldGFkYXRhUlRTZXJ2aWNlIH0gZnJvbSAnQGdzcC1sY20vbWV0YWRhdGFydC1zZWxlY3Rvcic7XHJcbmltcG9ydCB7IEdTUEJ1c2luZXNzRW50aXR5IH0gZnJvbSAnQGdzcC1iZWYvZ3NwLWJlLW1ldGFkYXRhJztcclxuaW1wb3J0IHsgQ2hhbmdlRGF0YUhlYWRlciB9IGZyb20gJy4uL21vZGVsL2NoYW5nZS1kYXRhLWhlYWRlcic7XHJcbmltcG9ydCB7IENoYW5nZUNvbHVtbkl0ZW0sIENoZ2RyRGF0YSwgQ2hnZHJEYXRhRW50aXR5Tm9kZSwgQ2hnZHJEYXRhUm93Tm9kZSB9IGZyb20gJy4vY2hnZHItZGF0YSc7XHJcbmltcG9ydCB7IEdTUEFzc29jaWF0aW9uLCBHU1BDb21tb25FbGVtZW50LCBHU1BDb21tb25PYmplY3QsIElHU1BDb21tb25FbGVtZW50LCBJR1NQQ29tbW9uT2JqZWN0IH0gZnJvbSAnQGdzcC1iZWYvZ3NwLWNtLW1ldGFkYXRhJztcclxuaW1wb3J0IHsgQ2hhbmdlRGF0YVJvdyB9IGZyb20gJy4uL21vZGVsL2NoYW5nZS1kYXRhLXJvdyc7XHJcbmltcG9ydCB7IENoZ2RyRGF0YUJ1aWxkZXIgfSBmcm9tICcuL2NoZ2RyLWRhdGEtYnVpbGRlcic7XHJcbmltcG9ydCB7IENoZ2RyVHJlZUJ1aWxkZXIsIENoZ2RyVHJlZU5vZGUgfSBmcm9tICcuL2NoZ2RyLXRyZWUtYnVpbGRlcic7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdHJlZXRhYmxlJztcclxuaW1wb3J0IHsgQ2hnZHJNZXRhZGF0YVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL2NoZ2RyLW1ldGFkYXRhLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDaGdkckNvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL2NoZ2RyLWNvbmZpZy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgZm9ya0pvaW4gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgQ2hnTG9nQ29uZmlnRW50aXR5IH0gZnJvbSAnLi4vbW9kZWwvY2hnZHItY29uZmlnLWVudGl0eSc7XHJcbmltcG9ydCB7IENoZ2RySW5uZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZS9jaGdkci1pbm5lci5zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnY2hnZHItZGF0YS12aWV3ZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9jaGdkci1kYXRhLXZpZXdlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vY2hnZHItZGF0YS12aWV3ZXIuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDaGdkckRhdGFWaWV3ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgQElucHV0KClcclxuICBkYXRhOiBDaGFuZ2VEYXRhSGVhZGVyO1xyXG4gIEBJbnB1dCgpIHNob3dEYXRhSWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBAVmlld0NoaWxkKFwidHJlZVRhYmxlXCIpXHJcbiAgcHJpdmF0ZSB0cmVlVGFibGVDb21wb25lbnQ6IFRyZWVUYWJsZUNvbXBvbmVudFxyXG5cclxuICB0cmVlQ29uZmlnOiBhbnkgPSB7XHJcbiAgICBpZEZpZWxkOiAnaWQnLFxyXG4gICAgY29sdW1uczogW1xyXG4gICAgICB7IGZpZWxkOiAnbmFtZScsIHRpdGxlOiAnTmFtZScsIHdpZHRoOiAyMDAgfVxyXG4gICAgXSxcclxuICAgIC8qKiDlj7blrZDoioLngrnlm77moIcgKi9cclxuICAgIGxlYWZJY29uOiAnZi1pY29uIGYtaWNvbi1wYWdlLXRpdGxlLXR5cGUgdGV4dC1pbmZvIG1yLTInLFxyXG4gICAgLyoqIOiKgueCueWxleW8gOWbvuaghyAqL1xyXG4gICAgZXhwYW5kSWNvbjogJ2YtaWNvbsKgZi1pY29uLWZpbGUtZm9sZGVyLW9wZW4gdGV4dC1pbmZvIG1yLTInLFxyXG4gICAgLyoqIOiKgueCueaKmOWPoOWbvuaghyAqL1xyXG4gICAgY29sbGFwc2VJY29uOiAnZi1pY29uwqBmLWljb24tZmlsZS1mb2xkZXItY2xvc2UgdGV4dC1pbmZvIG1yLTInLFxyXG4gICAgc2hvd0xldmVsOiAtMSxcclxuICAgIGRpc2FibGVkOiBmYWxzZSxcclxuICAgIGluaXQ6IGZhbHNlLFxyXG4gICAgc2VsZWN0VmFsdWVzOiBbXVxyXG4gIH07XHJcblxyXG4gIGNoZ2RyRGF0YTogQ2hnZHJEYXRhO1xyXG4gIHRyZWVEYXRhOiBDaGdkclRyZWVOb2RlW107XHJcbiAgY3VycmVudE5vZGU6IENoZ2RyVHJlZU5vZGU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbWV0YWRhdGFTZXJ2aWNlOiBHU1BNZXRhZGF0YVJUU2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBjaGdkck1ldGFkYXRhU2VydmljZTogQ2hnZHJNZXRhZGF0YVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGNoZ2RyQ29uZmlnU2VydmljZTogQ2hnZHJDb25maWdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjaGdkcklubmVyU2VydmljZTogQ2hnZHJJbm5lclNlcnZpY2UpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGlmICghIXRoaXMuZGF0YSkge1xyXG4gICAgICBsZXQgYmVJZCA9IHRoaXMuZGF0YS5lbnRpdHlJZDtcclxuICAgICAgdGhpcy5jaGdkcklubmVyU2VydmljZS5nZXRDaGdkckNvbmZpZ0hhbmRsZXIoYmVJZCkuc3Vic2NyaWJlKGhhbmRsZXI9PntcclxuICAgICAgICB0aGlzLmNoZ2RyRGF0YSA9IG5ldyBDaGdkckRhdGFCdWlsZGVyKCkuYnVpbGRDaGdkckRhdGEodGhpcy5kYXRhLCBoYW5kbGVyKTtcclxuICAgICAgICB0aGlzLnRyZWVEYXRhID0gbmV3IENoZ2RyVHJlZUJ1aWxkZXIoKS5idWlsZCh0aGlzLmNoZ2RyRGF0YSk7XHJcbiAgICAgICAgaWYgKHRoaXMudHJlZVRhYmxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAvL+enu+mZpOW3sumAieS4remhueOAglxyXG4gICAgICAgICAgLy/pgb/lhY3mm7TmjaLmlbDmja7mupDlkI7vvIx0cmVlR3JpZOaJvuS4jeWIsOS5i+WJjeeahOmAieS4reaVsOaNru+8jOWvvOiHtOaOp+WItuWPsOWRiuitplxyXG4gICAgICAgICAgdGhpcy50cmVlVGFibGVDb21wb25lbnQuY2xlYXJTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy50cmVlVGFibGVDb21wb25lbnQuc2VsZWN0Tm9kZSh0aGlzLnRyZWVEYXRhWzBdLmlkKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBoYW5kbGVUcmVlU2VsZWN0aW9uKCRldmVudCk6IHZvaWQge1xyXG4gICAgY29uc3Qgbm9kZTogQ2hnZHJUcmVlTm9kZSA9ICRldmVudC5ub2RlO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudE5vZGUgIT0gbnVsbCAmJiB0aGlzLmN1cnJlbnROb2RlLmlkID09IG5vZGUuaWQpIHtcclxuICAgICAgLy/lpoLmnpzpgInkuK3nm7jlkIzoioLngrnvvIznm7TmjqXov5Tlm55cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5vZGU7XHJcbiAgfVxyXG59XHJcbiJdfQ==