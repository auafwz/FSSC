/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/bill-tracker-graph/bill-tracker-graph.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild, ElementRef, Output, EventEmitter, Inject, LOCALE_ID, Input, ViewContainerRef, Injector, ComponentFactoryResolver, ChangeDetectorRef } from '@angular/core';
import { Graph } from '../../mxgraph-ext/Graph';
import { mxEvent, mxGraphHandler, mxEventObject, mxGraphSelectionModel, mxConstants, mxImage, mxClient, mxGuide, mxPolyline, mxLayoutManager, mxConnectionHandler, mxEllipse, mxHandle, mxVertexHandler, mxPoint, mxPrintPreview } from "../../../ref/mxgraph";
import { BillTrackerArgs } from '../../config/bill-tracker-args';
import { BillTrackerDataService } from '../../services/bill-tracker-data.service';
import { BillTrackerDirection } from '../../config/bill-tracker-direction';
import { BillTrackerLocalePipe } from '../../pipe/bill-tracker-locale.pipe';
import { MessagerService } from '@farris/ui-messager';
import { LoadingService } from '@farris/ui-loading';
import { BsModalService } from '@farris/ui-modal';
import { BillTrackerConstant } from '../../config/bill-tracker-constant';
import { RevertCompactTreeLayout } from '../../mxgraph-ext/RevertCompactTreeLayout';
import { CompactTreeLayout } from '../../mxgraph-ext/CompactTreeLayout';
import { EntryCellData } from '../../../entity/tracking/cell-data/EntryCellData';
import { UpCellData } from '../../../entity/tracking/cell-data/UpCellData';
import { DownCellData } from '../../../entity/tracking/cell-data/DownCellData';
import { BillTrackingSettings } from '@edp-bif/common-api';
import { NotifyService } from '@farris/ui-notify';
import { BillTrackerDataInfoService } from '../../services/bill-tracker-data-info.service';
import { CellOverlay } from '../../mxgraph-ext/CellOverlay';
import { CellOverlayState } from '../../mxgraph-ext/CellOverlayState';
import { Events } from '../../mxgraph-ext/Events';
import { billTrackerCellCss } from '../../config/bill-tracker-cell-css';
import { addCustomCSS } from '../../utils/addCustomCSS';
import { Outline } from '../../mxgraph-ext/Outline';
// 在head中添加节点样式
addCustomCSS(billTrackerCellCss);
var BillTrackerGraphComponent = /** @class */ (function () {
    function BillTrackerGraphComponent(args, localeId, dataService, notify, messager, loading, modal, vcr, inj, cfr, cdr) {
        this.dataService = dataService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.vcr = vcr;
        this.inj = inj;
        this.cfr = cfr;
        this.cdr = cdr;
        this.selectEventEmitter = new EventEmitter();
        this.stateChangeEventEmitter = new EventEmitter();
        this.hspace = 80;
        this.vspace = 28;
        this.defaultWidth = 250;
        this.defaultHeight = 138;
        this.nodeWidth = this.defaultWidth;
        this.nodeHeight = this.defaultHeight;
        this.defaultNonEntryImage = (!mxClient.IS_SVG) ? BillTrackerConstant.IMAGE_PATH + '/non-entry-bill.png' : BillTrackerConstant.IMAGE_PATH + '/non-entry-bill.svg';
        this.defaultEntryImage = (!mxClient.IS_SVG) ? BillTrackerConstant.IMAGE_PATH + '/entry-bill.png' : BillTrackerConstant.IMAGE_PATH + '/entry-bill.svg';
        this.defaultOverlayWidth = 26;
        this.defaultOverlayHeight = 26;
        this.overlayWidth = this.defaultOverlayWidth;
        this.overlayHeight = this.defaultOverlayHeight;
        this.defaultUpSearchImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-plus.svg', this.overlayWidth, this.overlayHeight);
        this.defaultDownSearchImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-plus.svg', this.overlayWidth, this.overlayHeight);
        this.defaultUpFolderImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-minus.svg', this.overlayWidth, this.overlayHeight);
        this.defaultDownFolderImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-minus.svg', this.overlayWidth, this.overlayHeight);
        this.upSearchImage = this.defaultUpSearchImage;
        this.downSearchImage = this.defaultDownSearchImage;
        this.upFolderImage = this.defaultUpFolderImage;
        this.downFolderImage = this.defaultDownFolderImage;
        this.upSearchOffset = new mxPoint(-50, 0);
        this.downSearchOffset = new mxPoint(50, 0);
        /**
         * 正在加载中的单据节点请求数
         */
        this.numCellsAddingReq = 0;
        this.localePipe = new BillTrackerLocalePipe(localeId);
        this.dataInfoService = new BillTrackerDataInfoService();
        this.billTrackerArgs = args;
        /** @type {?} */
        var graphOptions = this.billTrackerArgs.graphOptions;
        this.graphOptions = graphOptions;
        /** @type {?} */
        var gridOptions = this.billTrackerArgs.gridOptions;
        this.gridOptions = gridOptions;
        this.upSearchImage = graphOptions && graphOptions.upSearchImage ? new mxImage(graphOptions.upSearchImage, this.overlayWidth, this.overlayHeight) : this.upSearchImage;
        this.downSearchImage = graphOptions && graphOptions.downSearchImage ? new mxImage(graphOptions.downSearchImage, this.overlayWidth, this.overlayHeight) : this.downSearchImage;
        this.upFolderImage = graphOptions && graphOptions.upFolderImage ? new mxImage(graphOptions.upFolderImage, this.overlayWidth, this.overlayHeight) : this.upFolderImage;
        this.downFolderImage = graphOptions && graphOptions.downFolderImage ? new mxImage(graphOptions.downFolderImage, this.overlayWidth, this.overlayHeight) : this.downFolderImage;
    }
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.graph = this.createGraph();
        this.createLayout(this.graph);
        this.layoutManager = new mxLayoutManager(this.graph);
        this.outline = new Outline(this.graph, this.mxOutlineContainer.nativeElement);
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?=} sizeDidChange
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.refresh = /**
     * @param {?=} sizeDidChange
     * @return {?}
     */
    function (sizeDidChange) {
        if (sizeDidChange === void 0) { sizeDidChange = true; }
        if (sizeDidChange && this.graph != null) {
            this.graph.sizeDidChange();
        }
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.paint = /**
     * @return {?}
     */
    function () {
        this.paintGraph(this.graph);
    };
    /**
     * @param {?} modalRef
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.setModalRef = /**
     * @param {?} modalRef
     * @return {?}
     */
    function (modalRef) {
        var _this = this;
        this.modalRef = modalRef;
        if (this.modalRef != null) {
            this.modalRef.dialog.instance.closed.subscribe((/**
             * @param {?} evt
             * @return {?}
             */
            function (evt) {
                _this.graph && _this.graph.destroy();
            }));
            // todo: 临时解决弹窗模式下先刷新出入口节点问题
            /** @type {?} */
            var flag_1 = 0;
            this.modalRef.dialog.instance.resized.subscribe((/**
             * @param {?} evt
             * @return {?}
             */
            function (evt) {
                if (flag_1 >= 2) {
                    _this.refresh();
                }
                flag_1++;
            }));
        }
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.createGraph = /**
     * @return {?}
     */
    function () {
        //启用mxGuide
        mxGraphHandler.prototype.guidesEnabled = true;
        //禁用mxgraph容器内上下文菜单
        mxEvent.disableContextMenu(this.mxContainerER.nativeElement);
        mxGraphHandler.prototype.scrollOnMove = false;
        mxGraphHandler.prototype.scaleGrid = true;
        //修改节点选中后处理器图片及填充色
        mxConstants.HANDLE_FILLCOLOR = '#29b6f2';
        mxHandle.prototype.createShape = (/**
         * @param {?} html
         * @return {?}
         */
        function (html) {
            /** @type {?} */
            var bounds = new mxEllipse(0, 0, mxConstants.HANDLE_SIZE, mxConstants.HANDLE_SIZE);
            return new mxEllipse(bounds, mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);
        });
        mxVertexHandler.prototype.handleImage = (!mxClient.IS_SVG) ? new mxImage(BillTrackerConstant.IMAGE_PATH + '/handle-main.png', mxConstants.HANDLE_SIZE, mxConstants.HANDLE_SIZE) : Graph.createSvgImage(18, 18, '<circle cx="9" cy="9" r="3" stroke="#fff" fill="' + Graph.handleFill + '" stroke-width="1"/>');
        mxConstants.DEFAULT_VALID_COLOR = '#FFFFFF';
        mxConstants.HIGHLIGHT_STROKEWIDTH = 1;
        //修改mxGuide默认配置
        mxConstants.GUIDE_COLOR = '#0088cf';
        mxGuide.prototype.createGuideShape = (/**
         * @param {?} horizontal
         * @return {?}
         */
        function (horizontal) { return new mxPolyline([], mxConstants.GUIDE_COLOR, mxConstants.GUIDE_STROKEWIDTH); });
        //设置节点选中线框宽度
        mxConstants.VERTEX_SELECTION_STROKEWIDTH = 1;
        mxConstants.VERTEX_SELECTION_COLOR = '#3E8DFF';
        mxConstants.VERTEX_SELECTION_DASHED = false;
        //修改线宽
        mxConnectionHandler.prototype.getEdgeWidth = (/**
         * @param {?} valid
         * @return {?}
         */
        function (valid) { return 1; });
        mxConstants.VALID_COLOR = '#00CD66';
        //创建mxGraph
        /** @type {?} */
        var graph = new Graph(this.mxContainerER.nativeElement, undefined, undefined, undefined);
        graph.graphOptions = this.graphOptions;
        graph.gridOptions = this.gridOptions;
        //添加自定义监听器
        this.addListener(graph);
        return graph;
    };
    /**
     * @param {?} graph
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.createLayout = /**
     * @param {?} graph
     * @return {?}
     */
    function (graph) {
        /** @type {?} */
        var upLayout = new RevertCompactTreeLayout(graph, true);
        upLayout.levelDistance = this.hspace;
        upLayout.edgeRouting = false;
        upLayout.resetEdges = false;
        this.upLayout = upLayout;
        /** @type {?} */
        var downLayout = new CompactTreeLayout(graph, true);
        downLayout.levelDistance = this.hspace;
        downLayout.edgeRouting = false;
        downLayout.resetEdges = true;
        this.downLayout = downLayout;
    };
    /**
     * @param {?} graph
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.addListener = /**
     * @param {?} graph
     * @return {?}
     */
    function (graph) {
        var _this = this;
        /** @type {?} */
        var autoAdjustHandler = (/**
         * @return {?}
         */
        function () {
            window.setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.graph != null) {
                    _this.refresh();
                }
            }), 0);
        });
        mxEvent.addListener(window, 'resize', autoAdjustHandler);
        /** @type {?} */
        var wheelResizeHandler = (/**
         * @param {?} evt
         * @param {?} up
         * @return {?}
         */
        function (evt, up) {
            // window下Ctrl按下，Mac下Command按下
            if (mxEvent.isControlDown(evt) || (mxClient.IS_MAC && evt.metaKey)) {
                if (up) {
                    _this.zoomIn();
                }
                else {
                    _this.zoomOut();
                }
                mxEvent.consume(evt);
                return false;
            }
        });
        mxEvent.addMouseWheelListener(wheelResizeHandler, this.mxContainerER.nativeElement);
        graph.getSelectionModel().addListener(mxEvent.CHANGE, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            if (!(sender instanceof mxGraphSelectionModel)) {
                return;
            }
            /** @type {?} */
            var selectionModel = sender;
            //若未选中节点或者选中节点数不为1
            if (selectionModel.cells == null || selectionModel.cells.length != 1) {
                _this.selectEventEmitter.emit(null);
                return;
            }
            /** @type {?} */
            var selectedCell = selectionModel.cells[0];
            //选中的是边
            if (selectedCell.edge || !selectedCell.vertex) {
                return;
            }
            _this.selectEventEmitter.emit(selectedCell);
        }));
        graph.addListener(Events.CLICK_FIRST_SUMMARY, (/**
         * @param {?} serder
         * @param {?} evt
         * @return {?}
         */
        function (serder, evt) {
            /** @type {?} */
            var cell = evt.getProperty("cell");
            _this.stateChangeEventEmitter.emit({
                type: Events.CLICK_FIRST_SUMMARY,
                data: cell
            });
        }));
    };
    /**
     * @param {?} graph
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.paintGraph = /**
     * @param {?} graph
     * @return {?}
     */
    function (graph) {
        graph.getModel().beginUpdate();
        this.entry = this.paintEntry(graph);
        this.afterPaintGraph(this.graph, this.entry);
        graph.getModel().endUpdate();
    };
    /**
     * @param {?} graph
     * @param {?} entry
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.afterPaintGraph = /**
     * @param {?} graph
     * @param {?} entry
     * @return {?}
     */
    function (graph, entry) {
        if (entry == null) {
            return;
        }
        // 默认选中入口节点
        this.billTrackerArgs.gridOptions.showEntryData && graph.setSelectionCell(this.entry);
        // 默认展示一层？
        /** @type {?} */
        var canTrackingResult = this.billTrackerArgs.canTrackingResult;
        if (this.billTrackerArgs.graphOptions.showDownBills == true) {
            canTrackingResult.canDownTracking && this.entry.downCellOverlay && this.entry.downCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
        }
        if (this.billTrackerArgs.graphOptions.showUpBills == true) {
            canTrackingResult.canUpTracking && this.entry.upCellOverlay && this.entry.upCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
        }
    };
    /**
     * @param {?} graph
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.paintEntry = /**
     * @param {?} graph
     * @return {?}
     */
    function (graph) {
        /** @type {?} */
        var entry = null;
        if (this.billTrackerArgs == null || this.billTrackerArgs.canTrackingResult == null) {
            return entry;
        }
        /** @type {?} */
        var canTrackingResult = this.billTrackerArgs.canTrackingResult;
        /** @type {?} */
        var info = this.dataService.buildEntryBillInfo(canTrackingResult);
        /** @type {?} */
        var dataInfo = info.billDataInfos[0];
        /** @type {?} */
        var bts = new BillTrackingSettings();
        bts.LoadFromJson(canTrackingResult.billTrackingSettings);
        /** @type {?} */
        var parent = graph.getDefaultParent();
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            var x0 = 0;
            /** @type {?} */
            var y0 = 0;
            /** @type {?} */
            var bts_1 = new BillTrackingSettings();
            if (info && info.billTrackingSettings) {
                bts_1.LoadFromJson(info.billTrackingSettings);
            }
            /** @type {?} */
            var customStyle = "";
            entry = graph.insertBillCell(parent, null, dataInfo, info, true, x0, y0, this.nodeWidth, this.nodeHeight, "billNode;billNodeEntry;" + customStyle);
            /** @type {?} */
            var geometry = graph.getModel().getGeometry(entry);
            /** @type {?} */
            var size = graph.getPreferredSizeForCell(entry);
            this.entryCellData = new EntryCellData();
            this.setCellData(this.entryCellData, entry);
            this.entryCellData.canTrackingResult = canTrackingResult;
            entry.data = this.entryCellData;
            // 添加上查下查按钮
            if (canTrackingResult.canDownTracking) {
                /** @type {?} */
                var overlay = this.addDownOverlay(graph, entry, true);
                entry.downCellOverlay = overlay;
            }
            if (canTrackingResult.canUpTracking) {
                /** @type {?} */
                var overlay = this.addUpOverlay(graph, entry, true);
                entry.upCellOverlay = overlay;
            }
            this.upParent = parent.clone();
            this.downParent = parent.clone();
            graph.addCells([this.upParent, this.downParent], parent);
        }
        finally {
            graph.getModel().endUpdate();
        }
        return entry;
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.addUpOverlay = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    function (graph, cell, resetView) {
        var _this = this;
        if (resetView === void 0) { resetView = false; }
        /** @type {?} */
        var upSearch = new CellOverlay(this.upSearchImage, this.localePipe.transform("upSearch"), mxConstants.ALIGN_LEFT, mxConstants.ALIGN_MIDDLE, this.upSearchOffset, "hand");
        upSearch.state = CellOverlayState.Search;
        /** @type {?} */
        var upSearchHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            graph.getModel().beginUpdate();
            _this.addUpAssoCell(graph, cell, resetView);
            upSearch.removeListener(upSearchHandler);
            upSearch.tooltip = _this.localePipe.transform("folder");
            upSearch.image = _this.upFolderImage;
            upSearch.state = CellOverlayState.Fold;
            upSearch.addListener(mxEvent.CLICK, upFolderHandler);
            graph.removeCellOverlay(cell, upSearch);
            graph.addCellOverlay(cell, upSearch);
            graph.getModel().endUpdate();
        });
        /** @type {?} */
        var upFolderHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            graph.getModel().beginUpdate();
            _this.removeAssoCell(graph, cell, BillTrackerDirection.Up);
            upSearch.removeListener(upFolderHandler);
            upSearch.tooltip = _this.localePipe.transform("upSearch");
            upSearch.image = _this.upSearchImage;
            upSearch.state = CellOverlayState.Search;
            upSearch.addListener(mxEvent.CLICK, upSearchHandler);
            graph.removeCellOverlay(cell, upSearch);
            graph.addCellOverlay(cell, upSearch);
            graph.model.endUpdate();
        });
        upSearch.addListener(mxEvent.CLICK, upSearchHandler);
        graph.removeCellOverlay(cell, upSearch);
        graph.addCellOverlay(cell, upSearch);
        return upSearch;
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.addDownOverlay = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    function (graph, cell, resetView) {
        var _this = this;
        if (resetView === void 0) { resetView = false; }
        /** @type {?} */
        var downSearch = new CellOverlay(this.downSearchImage, this.localePipe.transform("downSearch"), mxConstants.ALIGN_RIGHT, mxConstants.ALIGN_MIDDLE, this.downSearchOffset, "hand");
        downSearch.state = CellOverlayState.Search;
        /** @type {?} */
        var downSearchHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            graph.getModel().beginUpdate();
            _this.addDownAssoCell(graph, cell, resetView);
            downSearch.image = _this.downFolderImage;
            downSearch.tooltip = _this.localePipe.transform("folder");
            downSearch.state = CellOverlayState.Fold;
            downSearch.removeListener(downSearchHandler);
            downSearch.addListener(mxEvent.CLICK, downFolderHandler);
            graph.removeCellOverlay(cell, downSearch);
            graph.addCellOverlay(cell, downSearch);
            // graph.refresh(cell);
            graph.getModel().endUpdate();
        });
        /** @type {?} */
        var downFolderHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            graph.getModel().beginUpdate();
            _this.removeAssoCell(graph, cell, BillTrackerDirection.Down);
            downSearch.image = _this.downSearchImage;
            downSearch.tooltip = _this.localePipe.transform("downSearch");
            downSearch.state = CellOverlayState.Search;
            downSearch.removeListener(downFolderHandler);
            downSearch.addListener(mxEvent.CLICK, downSearchHandler);
            graph.removeCellOverlay(cell, downSearch);
            graph.addCellOverlay(cell, downSearch);
            // graph.refresh(cell);
            graph.getModel().endUpdate();
        });
        downSearch.addListener(mxEvent.CLICK, downSearchHandler);
        graph.removeCellOverlay(cell, downSearch);
        graph.addCellOverlay(cell, downSearch);
        return downSearch;
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.addUpAssoCell = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    function (graph, cell, resetView) {
        var _this = this;
        if (resetView === void 0) { resetView = false; }
        graph.getModel().beginUpdate();
        /** @type {?} */
        var args = this.dataService.buildGetUpBillsInfoArgs(cell);
        this.loading.show({ message: this.localePipe.transform("loading") });
        this.numCellsAddingReq++;
        this.dataService.getUpBillsInfo(args).subscribe((/**
         * @param {?} infos
         * @return {?}
         */
        function (infos) {
            var e_1, _a, e_2, _b, e_3, _c, e_4, _d;
            /** @type {?} */
            var parent = graph.getDefaultParent();
            /** @type {?} */
            var newCells = [];
            // graph.getModel().beginUpdate();
            try {
                try {
                    for (var infos_1 = tslib_1.__values(infos), infos_1_1 = infos_1.next(); !infos_1_1.done; infos_1_1 = infos_1.next()) {
                        var info = infos_1_1.value;
                        try {
                            for (var _e = tslib_1.__values(info.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                var dataInfo = _f.value;
                                /** @type {?} */
                                var billCell = null;
                                /** @type {?} */
                                var bts = new BillTrackingSettings();
                                if (info && info.billTrackingSettings) {
                                    bts.LoadFromJson(info.billTrackingSettings);
                                }
                                /** @type {?} */
                                var customStyle = "";
                                billCell = graph.insertBillCell(_this.upParent, null, dataInfo, info, false, cell.geometry.x - _this.hspace, cell.geometry.y, _this.nodeWidth, _this.nodeHeight, "billNode;" + customStyle);
                                newCells.push(billCell);
                            }
                        }
                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                        finally {
                            try {
                                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                            }
                            finally { if (e_2) throw e_2.error; }
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (infos_1_1 && !infos_1_1.done && (_a = infos_1.return)) _a.call(infos_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                _this.calCellsPosition(graph, cell, newCells, BillTrackerDirection.Up);
                try {
                    for (var newCells_1 = tslib_1.__values(newCells), newCells_1_1 = newCells_1.next(); !newCells_1_1.done; newCells_1_1 = newCells_1.next()) {
                        var nc = newCells_1_1.value;
                        if (nc.billDataInfo.canContinueTracking) {
                            /** @type {?} */
                            var ol = _this.addUpOverlay(graph, nc);
                            nc.upCellOverlay = ol;
                        }
                        graph.insertEdge(parent, null, '', nc, cell, "billAssociation;");
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (newCells_1_1 && !newCells_1_1.done && (_c = newCells_1.return)) _c.call(newCells_1);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
                /** @type {?} */
                var oldGeo = _this.entry.getGeometry().clone();
                _this.upLayout.execute(_this.upParent, _this.entry);
                /** @type {?} */
                var newGeo = _this.entry.getGeometry().clone();
                /** @type {?} */
                var dx = oldGeo.x - newGeo.x;
                /** @type {?} */
                var dy = oldGeo.y - newGeo.y;
                _this.restoreEntryPosition(graph, _this.entry, dx, dy);
                /** @type {?} */
                var cellData = (/** @type {?} */ (cell.data));
                cellData.ups.length = 0;
                try {
                    for (var newCells_2 = tslib_1.__values(newCells), newCells_2_1 = newCells_2.next(); !newCells_2_1.done; newCells_2_1 = newCells_2.next()) {
                        var nc = newCells_2_1.value;
                        /** @type {?} */
                        var cd = new UpCellData();
                        _this.setCellData(cd, nc);
                        nc.data = cd;
                        cd.down = cellData;
                        cellData.ups.push(cd);
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (newCells_2_1 && !newCells_2_1.done && (_d = newCells_2.return)) _d.call(newCells_2);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            }
            finally {
                graph.getModel().endUpdate();
            }
            // 重绘画布大小
            resetView && graph.fireEvent(new mxEventObject(Events.RESET_GRAPH_VIEW));
            _this.numCellsAddingReq--;
            // 自定义单据节点插入并移位后事件
            _this.graph.fireEvent(new mxEventObject(Events.BILL_CELLS_ADDED_AND_MOVED, 'cells', newCells, 'parent', _this.upParent));
            _this.loading.close();
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            _this.numCellsAddingReq--;
            _this.loading.close();
            _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            throw err;
        }));
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.addDownAssoCell = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @return {?}
     */
    function (graph, cell, resetView) {
        var _this = this;
        if (resetView === void 0) { resetView = false; }
        graph.getModel().beginUpdate();
        /** @type {?} */
        var args = this.dataService.buildGetDownBillsInfoArgs(cell);
        this.loading.show({ message: this.localePipe.transform("loading") });
        this.numCellsAddingReq++;
        this.dataService.getDownBillsInfo(args).subscribe((/**
         * @param {?} infos
         * @return {?}
         */
        function (infos) {
            var e_5, _a, e_6, _b, e_7, _c, e_8, _d;
            /** @type {?} */
            var model = graph.getModel();
            /** @type {?} */
            var parent = graph.getDefaultParent();
            /** @type {?} */
            var newCells = [];
            // graph.getModel().beginUpdate();
            try {
                try {
                    for (var infos_2 = tslib_1.__values(infos), infos_2_1 = infos_2.next(); !infos_2_1.done; infos_2_1 = infos_2.next()) {
                        var info = infos_2_1.value;
                        try {
                            for (var _e = tslib_1.__values(info.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                var dataInfo = _f.value;
                                /** @type {?} */
                                var billCell = null;
                                /** @type {?} */
                                var bts = new BillTrackingSettings();
                                if (info && info.billTrackingSettings) {
                                    bts.LoadFromJson(info.billTrackingSettings);
                                }
                                /** @type {?} */
                                var customStyle = "";
                                billCell = graph.insertBillCell(_this.downParent, null, dataInfo, info, false, cell.geometry.x + _this.hspace, cell.geometry.y, _this.nodeWidth, _this.nodeHeight, "billNode;" + customStyle);
                                newCells.push(billCell);
                            }
                        }
                        catch (e_6_1) { e_6 = { error: e_6_1 }; }
                        finally {
                            try {
                                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                            }
                            finally { if (e_6) throw e_6.error; }
                        }
                    }
                }
                catch (e_5_1) { e_5 = { error: e_5_1 }; }
                finally {
                    try {
                        if (infos_2_1 && !infos_2_1.done && (_a = infos_2.return)) _a.call(infos_2);
                    }
                    finally { if (e_5) throw e_5.error; }
                }
                _this.calCellsPosition(graph, cell, newCells, BillTrackerDirection.Down);
                try {
                    for (var newCells_3 = tslib_1.__values(newCells), newCells_3_1 = newCells_3.next(); !newCells_3_1.done; newCells_3_1 = newCells_3.next()) {
                        var nc = newCells_3_1.value;
                        if (nc.billDataInfo.canContinueTracking) {
                            /** @type {?} */
                            var ol = _this.addDownOverlay(graph, nc);
                            nc.downCellOverlay = ol;
                        }
                        graph.insertEdge(parent, null, '', cell, nc, "billAssociation;");
                    }
                }
                catch (e_7_1) { e_7 = { error: e_7_1 }; }
                finally {
                    try {
                        if (newCells_3_1 && !newCells_3_1.done && (_c = newCells_3.return)) _c.call(newCells_3);
                    }
                    finally { if (e_7) throw e_7.error; }
                }
                /** @type {?} */
                var oldGeo = _this.entry.getGeometry().clone();
                _this.downLayout.execute(_this.downParent, _this.entry);
                /** @type {?} */
                var newGeo = _this.entry.getGeometry().clone();
                /** @type {?} */
                var dx = oldGeo.x - newGeo.x;
                /** @type {?} */
                var dy = oldGeo.y - newGeo.y;
                _this.restoreEntryPosition(graph, _this.entry, dx, dy);
                /** @type {?} */
                var cellData = (/** @type {?} */ (cell.data));
                cellData.downs.length = 0;
                try {
                    for (var newCells_4 = tslib_1.__values(newCells), newCells_4_1 = newCells_4.next(); !newCells_4_1.done; newCells_4_1 = newCells_4.next()) {
                        var nc = newCells_4_1.value;
                        /** @type {?} */
                        var cd = new DownCellData();
                        _this.setCellData(cd, nc);
                        nc.data = cd;
                        cd.up = cellData;
                        cellData.downs.push(cd);
                    }
                }
                catch (e_8_1) { e_8 = { error: e_8_1 }; }
                finally {
                    try {
                        if (newCells_4_1 && !newCells_4_1.done && (_d = newCells_4.return)) _d.call(newCells_4);
                    }
                    finally { if (e_8) throw e_8.error; }
                }
            }
            finally {
                graph.getModel().endUpdate();
            }
            // 重绘画布大小
            resetView && graph.fireEvent(new mxEventObject(Events.RESET_GRAPH_VIEW));
            _this.numCellsAddingReq--;
            // 自定义单据节点插入并移位后事件
            _this.graph.fireEvent(new mxEventObject(Events.BILL_CELLS_ADDED_AND_MOVED, 'cells', newCells, 'parent', _this.downParent));
            _this.loading.close();
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            _this.numCellsAddingReq--;
            _this.loading.close();
            _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            throw err;
        }));
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} dir
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.removeAssoCell = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} dir
     * @return {?}
     */
    function (graph, cell, dir) {
        /** @type {?} */
        var model = graph.getModel();
        /** @type {?} */
        var parent = graph.getDefaultParent();
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            var assoCells = [];
            if (dir == BillTrackerDirection.Down) {
                /** @type {?} */
                var edges = model.getOutgoingEdges(cell);
                /** @type {?} */
                var i = 0;
                while (edges && edges.length > 0 && i < edges.length) {
                    if (edges[i].target && edges[i].target != this.entry) {
                        assoCells.push((/** @type {?} */ (edges[i].target)));
                        edges.push.apply(edges, tslib_1.__spread(model.getOutgoingEdges(edges[i].target)));
                    }
                    i++;
                }
            }
            else if (dir == BillTrackerDirection.Up) {
                /** @type {?} */
                var edges = model.getIncomingEdges(cell);
                /** @type {?} */
                var i = 0;
                while (edges && edges.length > 0 && i < edges.length) {
                    if (edges[i].source && edges[i].source != this.entry) {
                        assoCells.push((/** @type {?} */ (edges[i].source)));
                        edges.push.apply(edges, tslib_1.__spread(model.getIncomingEdges(edges[i].source)));
                    }
                    i++;
                }
            }
            if (dir == BillTrackerDirection.Down) {
                ((/** @type {?} */ (cell.data))).downs.length = 0;
            }
            else if (dir == BillTrackerDirection.Up) {
                ((/** @type {?} */ (cell.data))).ups.length = 0;
            }
            graph.removeCells(assoCells);
            /** @type {?} */
            var oldGeo = this.entry.getGeometry().clone();
            this.upLayout.execute(this.upParent, this.entry);
            /** @type {?} */
            var newGeo = this.entry.getGeometry().clone();
            /** @type {?} */
            var dx = oldGeo.x - newGeo.x;
            /** @type {?} */
            var dy = oldGeo.y - newGeo.y;
            this.restoreEntryPosition(graph, this.entry, dx, dy);
            /** @type {?} */
            var oldGeo2 = this.entry.getGeometry().clone();
            this.downLayout.execute(this.downParent, this.entry);
            /** @type {?} */
            var newGeo2 = this.entry.getGeometry().clone();
            /** @type {?} */
            var dx2 = oldGeo2.x - newGeo2.x;
            /** @type {?} */
            var dy2 = oldGeo2.y - newGeo2.y;
            this.restoreEntryPosition(graph, this.entry, dx2, dy2);
        }
        finally {
            graph.getModel().endUpdate();
        }
    };
    /**
     * @param {?} graph
     * @param {?} entry
     * @param {?} dx
     * @param {?} dy
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.restoreEntryPosition = /**
     * @param {?} graph
     * @param {?} entry
     * @param {?} dx
     * @param {?} dy
     * @return {?}
     */
    function (graph, entry, dx, dy) {
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            var vertices = null;
            vertices = tslib_1.__spread([entry], graph.getChildCells(this.upParent, true, false), graph.getChildCells(this.downParent, true, false));
            graph.moveCells(vertices, dx, dy);
        }
        finally {
            graph.getModel().endUpdate();
        }
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @param {?} dir
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.calCellsPosition = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @param {?} dir
     * @return {?}
     */
    function (graph, cell, newCells, dir) {
        if (dir == BillTrackerDirection.Down) {
            this.resetDownCellsPosition(graph, cell, newCells);
        }
        else if (dir == BillTrackerDirection.Up) {
            this.resetUpCellsPosition(graph, cell, newCells);
        }
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.resetDownCellsPosition = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @return {?}
     */
    function (graph, cell, newCells) {
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            var targets = graph.getOutgoingEdges(cell).map((/**
             * @param {?} edge
             * @return {?}
             */
            function (edge) { return edge.target; }));
            /** @type {?} */
            var deals = targets;
            //按纵坐标从大到小排序
            /** @type {?} */
            var temp = deals.sort((/**
             * @param {?} c1
             * @param {?} c2
             * @return {?}
             */
            function (c1, c2) { return c1.geometry && c2.geometry ? c2.geometry.y - c1.geometry.y : Number.MIN_VALUE; }));
            //最小纵坐标
            /** @type {?} */
            var minY = temp.length > 0 ? temp[temp.length - 1].geometry.y : cell.geometry.y;
            //最大纵坐标
            /** @type {?} */
            var maxY = temp.length > 0 ? temp[0].geometry.y : cell.geometry.y;
            //依次修改新插入节点的纵坐标
            for (var i = 0; i < newCells.length; i++) {
                maxY = deals.length > 0 ? maxY + this.vspace : maxY;
                graph.translateCell(newCells[i], 0, maxY - newCells[i].geometry.y);
                deals.push(newCells[i]);
            }
            /** @type {?} */
            var midY = (maxY + minY) / 2;
            /** @type {?} */
            var diffY_1 = cell.geometry.y - midY;
            //依次修改所有点纵坐标
            deals.forEach((/**
             * @param {?} c
             * @return {?}
             */
            function (c) {
                graph.translateCell(c, 0, diffY_1);
            }));
            minY += diffY_1;
            maxY += diffY_1;
            midY += diffY_1;
            // 将<=midY的节点全部上移至minY-diffY,>=midY下移至maxY + diffY
            for (var key in graph.model.cells) {
                if (graph.model.cells[key] == graph.model.root || graph.model.cells[key].geometry == null || graph.model.cells[key].edge == true) {
                    continue;
                }
                if (graph.model.cells[key] == cell || newCells.indexOf((/** @type {?} */ (graph.model.cells[key]))) != -1) {
                    continue;
                }
                if (graph.model.cells[key] == this.entry) {
                    continue;
                }
                if (graph.model.cells[key].geometry.x < this.entry.geometry.x) {
                    continue;
                }
                /** @type {?} */
                var c = graph.model.cells[key];
                /** @type {?} */
                var geo = c.geometry;
                graph.translateCell(c, 0, geo.y <= cell.geometry.y ? minY - (cell.geometry.y - geo.y) - geo.y : maxY + (geo.y - cell.geometry.y) - geo.y);
            }
        }
        finally {
            graph.getModel().endUpdate();
        }
    };
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.resetUpCellsPosition = /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @return {?}
     */
    function (graph, cell, newCells) {
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            var sources = graph.getIncomingEdges(cell).map((/**
             * @param {?} edge
             * @return {?}
             */
            function (edge) { return edge.source; }));
            /** @type {?} */
            var deals = sources;
            //按纵坐标从大到小排序
            /** @type {?} */
            var temp = deals.sort((/**
             * @param {?} c1
             * @param {?} c2
             * @return {?}
             */
            function (c1, c2) { return c1.geometry && c2.geometry ? c2.geometry.y - c1.geometry.y : Number.MIN_VALUE; }));
            //最小纵坐标
            /** @type {?} */
            var minY = temp.length > 0 ? temp[temp.length - 1].geometry.y : cell.geometry.y;
            //最大纵坐标
            /** @type {?} */
            var maxY = temp.length > 0 ? temp[0].geometry.y : cell.geometry.y;
            //依次修改新插入节点的纵坐标
            for (var i = 0; i < newCells.length; i++) {
                maxY = deals.length > 0 ? maxY + this.vspace : maxY;
                graph.translateCell(newCells[i], 0, maxY - newCells[i].geometry.y);
                deals.push(newCells[i]);
            }
            /** @type {?} */
            var midY = (maxY + minY) / 2;
            /** @type {?} */
            var diffY_2 = cell.geometry.y - midY;
            //依次修改所有点纵坐标
            deals.forEach((/**
             * @param {?} c
             * @return {?}
             */
            function (c) {
                graph.translateCell(c, 0, diffY_2);
            }));
            minY += diffY_2;
            maxY += diffY_2;
            midY += diffY_2;
            // 将<=midY的节点全部上移至minY-diffY,>=midY下移至maxY + diffY
            for (var key in graph.model.cells) {
                if (graph.model.cells[key] == graph.model.root || graph.model.cells[key].geometry == null || graph.model.cells[key].edge == true) {
                    continue;
                }
                if (graph.model.cells[key] == cell || newCells.indexOf((/** @type {?} */ (graph.model.cells[key]))) != -1) {
                    continue;
                }
                if (graph.model.cells[key] == this.entry) {
                    continue;
                }
                if (graph.model.cells[key].geometry.x > this.entry.geometry.x) {
                    continue;
                }
                /** @type {?} */
                var c = graph.model.cells[key];
                /** @type {?} */
                var geo = c.geometry;
                graph.translateCell(c, 0, geo.y <= cell.geometry.y ? minY - (cell.geometry.y - geo.y) - geo.y : maxY + (geo.y - cell.geometry.y) - geo.y);
            }
        }
        finally {
            graph.getModel().endUpdate();
        }
    };
    /**
     * @param {?} cellData
     * @param {?} cell
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.setCellData = /**
     * @param {?} cellData
     * @param {?} cell
     * @return {?}
     */
    function (cellData, cell) {
        cellData.billInfo = cell.billInfo;
        cellData.billDataInfo = cell.billDataInfo;
        cellData.visible = true;
        cellData.diagramInfo.x = cell.geometry.x;
        cellData.diagramInfo.y = cell.geometry.y;
        cellData.diagramInfo.width = cell.geometry.width;
        cellData.diagramInfo.height = cell.geometry.height;
        cellData.diagramInfo.extProps = {
            style: cell.style
        };
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.zoomOut = /**
     * @return {?}
     */
    function () {
        this.graph.zoomOut();
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.zoomIn = /**
     * @return {?}
     */
    function () {
        this.graph.zoomIn();
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.zoomActual = /**
     * @return {?}
     */
    function () {
        this.graph.zoomActual();
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.getZoomScale = /**
     * @return {?}
     */
    function () {
        return Math.round(this.graph.view.scale * 100);
    };
    /**
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.print = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var preview = new mxPrintPreview(this.graph, 1);
        preview.printOverlays = true;
        preview.printControls = true;
        preview.printBackgroundImage = true;
        preview.open(billTrackerCellCss);
    };
    /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.expand = /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    function (direction, all) {
        if (all === void 0) { all = false; }
        if (all) {
            this.expandAll(direction);
            return;
        }
        if (direction == BillTrackerDirection.Up) {
            /** @type {?} */
            var cells = [this.entry];
            this.upParent.children && cells.push.apply(cells, tslib_1.__spread(this.upParent.children));
            cells.forEach((/**
             * @param {?} cell
             * @return {?}
             */
            function (cell) {
                if (cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search) {
                    cell.upCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
                }
            }));
        }
        else if (direction == BillTrackerDirection.Down) {
            /** @type {?} */
            var cells = [this.entry];
            this.downParent.children && cells.push.apply(cells, tslib_1.__spread(this.downParent.children));
            cells.forEach((/**
             * @param {?} cell
             * @return {?}
             */
            function (cell) {
                if (cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search) {
                    cell.downCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
                }
            }));
        }
    };
    /**
     * @param {?} direction
     * @return {?}
     */
    BillTrackerGraphComponent.prototype.expandAll = /**
     * @param {?} direction
     * @return {?}
     */
    function (direction) {
        var _this = this;
        if (direction != BillTrackerDirection.Up && direction != BillTrackerDirection.Down) {
            return;
        }
        // 单据节点添加并移位后事件监听器
        /** @type {?} */
        var afterBillCellsAddedAndMoved = null;
        if (direction == BillTrackerDirection.Up) {
            afterBillCellsAddedAndMoved = (/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var cells = [_this.entry];
                _this.upParent.children && cells.push.apply(cells, tslib_1.__spread(_this.upParent.children));
                /** @type {?} */
                var canTrackUpCells = cells.filter((/**
                 * @param {?} cell
                 * @return {?}
                 */
                function (cell) {
                    return cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search;
                }));
                // 没有可上查节点且没有正在执行的上查请求时删除监听器
                if (canTrackUpCells == null || canTrackUpCells.length == 0) {
                    if (_this.numCellsAddingReq === 0) {
                        // console.log("移除监听器");
                        _this.graph.removeListener(afterBillCellsAddedAndMoved);
                        console.timeEnd("ExpandAll");
                    }
                }
                else {
                    canTrackUpCells.forEach((/**
                     * @param {?} cell
                     * @return {?}
                     */
                    function (cell) {
                        if (cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search) {
                            cell.upCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
                        }
                    }));
                }
            });
        }
        else if (direction == BillTrackerDirection.Down) {
            afterBillCellsAddedAndMoved = (/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var cells = [_this.entry];
                _this.downParent.children && cells.push.apply(cells, tslib_1.__spread(_this.downParent.children));
                /** @type {?} */
                var canTrackDownCells = cells.filter((/**
                 * @param {?} cell
                 * @return {?}
                 */
                function (cell) {
                    return cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search;
                }));
                // 没有可下查节点且没有正在执行的下查请求时删除监听器
                if (canTrackDownCells == null || canTrackDownCells.length == 0) {
                    if (_this.numCellsAddingReq === 0) {
                        // console.log("移除监听器");
                        _this.graph.removeListener(afterBillCellsAddedAndMoved);
                        console.timeEnd("ExpandAll");
                    }
                }
                else {
                    canTrackDownCells.forEach((/**
                     * @param {?} cell
                     * @return {?}
                     */
                    function (cell) {
                        if (cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search) {
                            cell.downCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
                        }
                    }));
                }
            });
        }
        console.time("ExpandAll");
        // 添加监听器
        // console.log("添加监听器");
        this.graph.addListener("billCellsAddedAndMoved", afterBillCellsAddedAndMoved);
        // 直接触发一次展开事件
        afterBillCellsAddedAndMoved();
    };
    BillTrackerGraphComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-bill-tracker-graph',
                    template: "<div #mxContainer id=\"mx-container\" class=\"mx-container-ng\">\r\n\r\n</div>\r\n\r\n<div #mxOutlineContainer id=\"mx-outline-container\" class=\"mx-outline-container\" [style.top]=\"modalRef?'50px':null\">\r\n\r\n</div>",
                    styles: [".mx-container-ng{position:absolute;top:0;left:0;bottom:0;right:0;cursor:default;overflow:auto;padding-right:16px;padding-bottom:16px;margin:4px}.mx-outline-container{z-index:1;position:absolute;overflow:hidden;top:20px;right:20px;width:160px;height:120px;background:#fff;border:1px solid #d3d3d3}"]
                }] }
    ];
    /** @nocollapse */
    BillTrackerGraphComponent.ctorParameters = function () { return [
        { type: BillTrackerArgs },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: BillTrackerDataService },
        { type: NotifyService },
        { type: MessagerService },
        { type: LoadingService },
        { type: BsModalService },
        { type: ViewContainerRef },
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ChangeDetectorRef }
    ]; };
    BillTrackerGraphComponent.propDecorators = {
        mxContainerER: [{ type: ViewChild, args: ["mxContainer",] }],
        mxOutlineContainer: [{ type: ViewChild, args: ["mxOutlineContainer",] }],
        selectEventEmitter: [{ type: Output, args: ["select",] }],
        stateChangeEventEmitter: [{ type: Output, args: ["stateChange",] }],
        billTrackerArgs: [{ type: Input, args: ["billTrackerArgs",] }]
    };
    return BillTrackerGraphComponent;
}());
export { BillTrackerGraphComponent };
if (false) {
    /** @type {?} */
    BillTrackerGraphComponent.prototype.localePipe;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.mxContainerER;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.mxOutlineContainer;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.selectEventEmitter;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.stateChangeEventEmitter;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.billTrackerArgs;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.graphOptions;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.gridOptions;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.modalRef;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.graph;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.hspace;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.vspace;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upLayout;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downLayout;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.outline;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.entryCellData;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.layoutManager;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.entry;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upParent;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downParent;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.nodeWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.nodeHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultNonEntryImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultEntryImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultOverlayWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultOverlayHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.overlayWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.overlayHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultUpSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultDownSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultUpFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultDownFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upSearchOffset;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downSearchOffset;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.dataInfoService;
    /**
     * 正在加载中的单据节点请求数
     * @type {?}
     */
    BillTrackerGraphComponent.prototype.numCellsAddingReq;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.dataService;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.notify;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.messager;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.loading;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.modal;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.vcr;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.inj;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.cfr;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.cdr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLWdyYXBoLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9jb21wb25lbnRzL2JpbGwtdHJhY2tlci1ncmFwaC9iaWxsLXRyYWNrZXItZ3JhcGguY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQWlCLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsd0JBQXdCLEVBQUUsaUJBQWlCLEVBQVksTUFBTSxlQUFlLENBQUM7QUFDM04sT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2hELE9BQU8sRUFBRSxPQUFPLEVBQWdCLGNBQWMsRUFBRSxhQUFhLEVBQUUscUJBQXFCLEVBQUUsV0FBVyxFQUFpQixPQUFPLEVBQXVCLFFBQVEsRUFBYSxPQUFPLEVBQUUsVUFBVSxFQUFxQixlQUFlLEVBQUUsbUJBQW1CLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFrSixjQUFjLEVBQXNCLE1BQU0sc0JBQXNCLENBQUM7QUFDbmYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBSTVFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3pFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrREFBa0QsQ0FBQztBQUVqRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDM0UsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQy9FLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRTNELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUMzRixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDNUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDdEUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7O0FBSXBELFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBRWpDO0lBNkVFLG1DQUNFLElBQXFCLEVBQ0YsUUFBZ0IsRUFDNUIsV0FBbUMsRUFDbkMsTUFBcUIsRUFDckIsUUFBeUIsRUFDekIsT0FBdUIsRUFDdkIsS0FBcUIsRUFDckIsR0FBcUIsRUFDckIsR0FBYSxFQUNiLEdBQTZCLEVBQzdCLEdBQXNCO1FBUnRCLGdCQUFXLEdBQVgsV0FBVyxDQUF3QjtRQUNuQyxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQ3JCLGFBQVEsR0FBUixRQUFRLENBQWlCO1FBQ3pCLFlBQU8sR0FBUCxPQUFPLENBQWdCO1FBQ3ZCLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBQ3JCLFFBQUcsR0FBSCxHQUFHLENBQWtCO1FBQ3JCLFFBQUcsR0FBSCxHQUFHLENBQVU7UUFDYixRQUFHLEdBQUgsR0FBRyxDQUEwQjtRQUM3QixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQXpFL0IsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUc3Qyw0QkFBdUIsR0FBRyxJQUFJLFlBQVksRUFHdEMsQ0FBQztRQVdMLFdBQU0sR0FBRyxFQUFFLENBQUM7UUFDWixXQUFNLEdBQUcsRUFBRSxDQUFDO1FBWVosaUJBQVksR0FBRyxHQUFHLENBQUM7UUFDbkIsa0JBQWEsR0FBRyxHQUFHLENBQUM7UUFDcEIsY0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDOUIsZUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDaEMseUJBQW9CLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsVUFBVSxHQUFHLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEdBQUcscUJBQXFCLENBQUM7UUFDNUosc0JBQWlCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsVUFBVSxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEdBQUcsaUJBQWlCLENBQUM7UUFFakosd0JBQW1CLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLHlCQUFvQixHQUFHLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztRQUNoRCxrQkFBYSxHQUFXLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztRQUVsRCx5QkFBb0IsR0FBRyxJQUFJLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEdBQUcsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDaEksMkJBQXNCLEdBQUcsSUFBSSxPQUFPLENBQUMsbUJBQW1CLENBQUMsVUFBVSxHQUFHLG1CQUFtQixFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2xJLHlCQUFvQixHQUFHLElBQUksT0FBTyxDQUFDLG1CQUFtQixDQUFDLFVBQVUsR0FBRyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNqSSwyQkFBc0IsR0FBRyxJQUFJLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEdBQUcsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFbkksa0JBQWEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7UUFDMUMsb0JBQWUsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUM7UUFDOUMsa0JBQWEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7UUFDMUMsb0JBQWUsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUM7UUFFOUMsbUJBQWMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyQyxxQkFBZ0IsR0FBRyxJQUFJLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7Ozs7UUFPdEMsc0JBQWlCLEdBQUcsQ0FBQyxDQUFDO1FBZXBCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksMEJBQTBCLEVBQUUsQ0FBQztRQUV4RCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQzs7WUFDdEIsWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWTtRQUN0RCxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQzs7WUFDM0IsV0FBVyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVztRQUNwRCxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUUvQixJQUFJLENBQUMsYUFBYSxHQUFHLFlBQVksSUFBSSxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ3RLLElBQUksQ0FBQyxlQUFlLEdBQUcsWUFBWSxJQUFJLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7UUFDOUssSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLElBQUksWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxPQUFPLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUN0SyxJQUFJLENBQUMsZUFBZSxHQUFHLFlBQVksSUFBSSxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxZQUFZLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO0lBQ2hMLENBQUM7Ozs7SUFFRCw0Q0FBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2hGLENBQUM7Ozs7SUFFRCxtREFBZTs7O0lBQWY7SUFFQSxDQUFDOzs7OztJQUVELDJDQUFPOzs7O0lBQVAsVUFBUSxhQUE2QjtRQUE3Qiw4QkFBQSxFQUFBLG9CQUE2QjtRQUNuQyxJQUFJLGFBQWEsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtZQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQzVCO0lBQ0gsQ0FBQzs7OztJQUVNLHlDQUFLOzs7SUFBWjtRQUNFLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7Ozs7O0lBRU0sK0NBQVc7Ozs7SUFBbEIsVUFBbUIsUUFBb0I7UUFBdkMsaUJBZ0JDO1FBZkMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFFekIsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksRUFBRTtZQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFDLEdBQUc7Z0JBQ2pELEtBQUksQ0FBQyxLQUFLLElBQUksS0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNyQyxDQUFDLEVBQUMsQ0FBQzs7O2dCQUVDLE1BQUksR0FBRyxDQUFDO1lBQ1osSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQyxHQUFHO2dCQUNsRCxJQUFJLE1BQUksSUFBSSxDQUFDLEVBQUU7b0JBQ2IsS0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO2lCQUNoQjtnQkFDRCxNQUFJLEVBQUUsQ0FBQztZQUNULENBQUMsRUFBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDOzs7O0lBRU0sK0NBQVc7OztJQUFsQjtRQUNFLFdBQVc7UUFDWCxjQUFjLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7UUFDOUMsbUJBQW1CO1FBQ25CLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRTdELGNBQWMsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUM5QyxjQUFjLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFFMUMsa0JBQWtCO1FBQ2xCLFdBQVcsQ0FBQyxnQkFBZ0IsR0FBRyxTQUFTLENBQUM7UUFDekMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxXQUFXOzs7O1FBQUcsVUFBVSxJQUFJOztnQkFDdkMsTUFBTSxHQUFHLElBQUksU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsV0FBVyxDQUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDO1lBRXBGLE9BQU8sSUFBSSxTQUFTLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUM3RixDQUFDLENBQUEsQ0FBQztRQUNGLGVBQWUsQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLG1CQUFtQixDQUFDLFVBQVUsR0FBRyxrQkFBa0IsRUFBRSxXQUFXLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLGtEQUFrRCxHQUFHLEtBQUssQ0FBQyxVQUFVLEdBQUcsc0JBQXNCLENBQUMsQ0FBQztRQUUvUyxXQUFXLENBQUMsbUJBQW1CLEdBQUcsU0FBUyxDQUFDO1FBQzVDLFdBQVcsQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLENBQUM7UUFFdEMsZUFBZTtRQUNmLFdBQVcsQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1FBQ3BDLE9BQU8sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCOzs7O1FBQUcsVUFBQyxVQUFVLElBQUssT0FBQSxJQUFJLFVBQVUsQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsaUJBQWlCLENBQUMsRUFBMUUsQ0FBMEUsQ0FBQSxDQUFDO1FBRWhJLFlBQVk7UUFDWixXQUFXLENBQUMsNEJBQTRCLEdBQUcsQ0FBQyxDQUFDO1FBQzdDLFdBQVcsQ0FBQyxzQkFBc0IsR0FBRyxTQUFTLENBQUM7UUFDL0MsV0FBVyxDQUFDLHVCQUF1QixHQUFHLEtBQUssQ0FBQztRQUU1QyxNQUFNO1FBQ04sbUJBQW1CLENBQUMsU0FBUyxDQUFDLFlBQVk7Ozs7UUFBRyxVQUFDLEtBQVUsSUFBSyxPQUFBLENBQUMsRUFBRCxDQUFDLENBQUEsQ0FBQztRQUMvRCxXQUFXLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQzs7O1lBRzlCLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztRQUMxRixLQUFLLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDdkMsS0FBSyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3JDLFVBQVU7UUFDVixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQzs7Ozs7SUFFTSxnREFBWTs7OztJQUFuQixVQUFvQixLQUFZOztZQUN4QixRQUFRLEdBQUcsSUFBSSx1QkFBdUIsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO1FBQ3pELFFBQVEsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNyQyxRQUFRLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUM3QixRQUFRLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUU1QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQzs7WUFFbkIsVUFBVSxHQUFHLElBQUksaUJBQWlCLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztRQUNyRCxVQUFVLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDdkMsVUFBVSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDL0IsVUFBVSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFFN0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDL0IsQ0FBQzs7Ozs7SUFFTSwrQ0FBVzs7OztJQUFsQixVQUFtQixLQUFVO1FBQTdCLGlCQW1EQzs7WUFsRE8saUJBQWlCOzs7UUFBRztZQUN4QixNQUFNLENBQUMsVUFBVTs7O1lBQUM7Z0JBQ2hCLElBQUksS0FBSSxDQUFDLEtBQUssSUFBSSxJQUFJLEVBQUU7b0JBQ3RCLEtBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztpQkFDaEI7WUFDSCxDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUM7UUFDUixDQUFDLENBQUE7UUFDRCxPQUFPLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsaUJBQWlCLENBQUMsQ0FBQzs7WUFFbkQsa0JBQWtCOzs7OztRQUFHLFVBQUMsR0FBZSxFQUFFLEVBQVc7WUFDdEQsOEJBQThCO1lBQzlCLElBQUksT0FBTyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNsRSxJQUFJLEVBQUUsRUFBRTtvQkFDTixLQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7aUJBQ2Y7cUJBQU07b0JBQ0wsS0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO2lCQUNoQjtnQkFDRCxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNyQixPQUFPLEtBQUssQ0FBQzthQUNkO1FBQ0gsQ0FBQyxDQUFBO1FBRUQsT0FBTyxDQUFDLHFCQUFxQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFcEYsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNOzs7OztRQUFFLFVBQUMsTUFBTSxFQUFFLEdBQUc7WUFDaEUsSUFBSSxDQUFDLENBQUMsTUFBTSxZQUFZLHFCQUFxQixDQUFDLEVBQUU7Z0JBQzlDLE9BQU87YUFDUjs7Z0JBQ0csY0FBYyxHQUFHLE1BQU07WUFDM0Isa0JBQWtCO1lBQ2xCLElBQUksY0FBYyxDQUFDLEtBQUssSUFBSSxJQUFJLElBQUksY0FBYyxDQUFDLEtBQUssQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO2dCQUNwRSxLQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNuQyxPQUFPO2FBQ1I7O2dCQUNHLFlBQVksR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUMxQyxPQUFPO1lBQ1AsSUFBSSxZQUFZLENBQUMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRTtnQkFDN0MsT0FBTzthQUNSO1lBRUQsS0FBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUM3QyxDQUFDLEVBQUMsQ0FBQztRQUVILEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLG1CQUFtQjs7Ozs7UUFBRSxVQUFDLE1BQU0sRUFBRSxHQUE0Qjs7Z0JBQzNFLElBQUksR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQztZQUNwQyxLQUFJLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDO2dCQUNoQyxJQUFJLEVBQUUsTUFBTSxDQUFDLG1CQUFtQjtnQkFDaEMsSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDLENBQUM7UUFDTCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7O0lBRU0sOENBQVU7Ozs7SUFBakIsVUFBa0IsS0FBWTtRQUM1QixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0MsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQy9CLENBQUM7Ozs7OztJQUVNLG1EQUFlOzs7OztJQUF0QixVQUF1QixLQUFZLEVBQUUsS0FBZTtRQUNsRCxJQUFJLEtBQUssSUFBSSxJQUFJLEVBQUU7WUFDakIsT0FBTztTQUNSO1FBRUQsV0FBVztRQUNYLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLGFBQWEsSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDOzs7WUFHL0UsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUI7UUFDaEUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxhQUFhLElBQUksSUFBSSxFQUFFO1lBQzNELGlCQUFpQixDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsSUFBSSxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7U0FDM0k7UUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLFdBQVcsSUFBSSxJQUFJLEVBQUU7WUFDekQsaUJBQWlCLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUNySTtJQUNILENBQUM7Ozs7O0lBRU0sOENBQVU7Ozs7SUFBakIsVUFBa0IsS0FBWTs7WUFDeEIsS0FBSyxHQUFhLElBQUk7UUFFMUIsSUFBSSxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixJQUFJLElBQUksRUFBRTtZQUNsRixPQUFPLEtBQUssQ0FBQztTQUNkOztZQUVLLGlCQUFpQixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCOztZQUMxRCxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsQ0FBQzs7WUFDN0QsUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDOztZQUNsQyxHQUFHLEdBQXlCLElBQUksb0JBQW9CLEVBQUU7UUFDMUQsR0FBRyxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDOztZQUVuRCxNQUFNLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixFQUFFO1FBRXZDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMvQixJQUFJOztnQkFDRSxFQUFFLEdBQUcsQ0FBQzs7Z0JBQ04sRUFBRSxHQUFHLENBQUM7O2dCQUVOLEtBQUcsR0FBeUIsSUFBSSxvQkFBb0IsRUFBRTtZQUMxRCxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7Z0JBQ3JDLEtBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7YUFDN0M7O2dCQUNHLFdBQVcsR0FBRyxFQUFFO1lBQ3BCLEtBQUssR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsNEJBQTBCLFdBQWEsQ0FBQyxDQUFDOztnQkFFL0ksUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDOztnQkFDOUMsSUFBSSxHQUFHLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLENBQUM7WUFFL0MsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLGFBQWEsRUFBRSxDQUFDO1lBQ3pDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUM1QyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO1lBQ3pELEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztZQUVoQyxXQUFXO1lBQ1gsSUFBSSxpQkFBaUIsQ0FBQyxlQUFlLEVBQUU7O29CQUMvQixPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQztnQkFDdkQsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7YUFDakM7WUFDRCxJQUFJLGlCQUFpQixDQUFDLGFBQWEsRUFBRTs7b0JBQzdCLE9BQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDO2dCQUNyRCxLQUFLLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQzthQUMvQjtZQUVELElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQy9CLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2pDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztTQUMxRDtnQkFDTztZQUNOLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUM5QjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQzs7Ozs7OztJQUVNLGdEQUFZOzs7Ozs7SUFBbkIsVUFBb0IsS0FBWSxFQUFFLElBQWMsRUFBRSxTQUEwQjtRQUE1RSxpQkFpQ0M7UUFqQ2lELDBCQUFBLEVBQUEsaUJBQTBCOztZQUN0RSxRQUFRLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxXQUFXLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxNQUFNLENBQUM7UUFDeEssUUFBUSxDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUM7O1lBQ25DLGVBQWU7Ozs7O1FBQUcsVUFBQyxNQUFNLEVBQUUsR0FBRztZQUNsQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDL0IsS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQzNDLFFBQVEsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDekMsUUFBUSxDQUFDLE9BQU8sR0FBRyxLQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2RCxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUksQ0FBQyxhQUFhLENBQUM7WUFDcEMsUUFBUSxDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUM7WUFDdkMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQ3JELEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDeEMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDckMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQy9CLENBQUMsQ0FBQTs7WUFDSyxlQUFlOzs7OztRQUFHLFVBQUMsTUFBTSxFQUFFLEdBQUc7WUFDbEMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQy9CLEtBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxvQkFBb0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMxRCxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3pDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDekQsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFJLENBQUMsYUFBYSxDQUFDO1lBQ3BDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDO1lBQ3pDLFFBQVEsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxlQUFlLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ3hDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ3JDLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDMUIsQ0FBQyxDQUFBO1FBRUQsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBQ3JELEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDeEMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFFckMsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQzs7Ozs7OztJQUVNLGtEQUFjOzs7Ozs7SUFBckIsVUFBc0IsS0FBWSxFQUFFLElBQWMsRUFBRSxTQUEwQjtRQUE5RSxpQkFvQ0M7UUFwQ21ELDBCQUFBLEVBQUEsaUJBQTBCOztZQUN4RSxVQUFVLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsRUFBRSxXQUFXLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLE1BQU0sQ0FBQztRQUNqTCxVQUFVLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQzs7WUFDckMsaUJBQWlCOzs7OztRQUFHLFVBQUMsTUFBTSxFQUFFLEdBQUc7WUFDcEMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQy9CLEtBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztZQUM3QyxVQUFVLENBQUMsS0FBSyxHQUFHLEtBQUksQ0FBQyxlQUFlLENBQUM7WUFDeEMsVUFBVSxDQUFDLE9BQU8sR0FBRyxLQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6RCxVQUFVLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLElBQUksQ0FBQztZQUN6QyxVQUFVLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDN0MsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLENBQUM7WUFDekQsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMxQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUN2Qyx1QkFBdUI7WUFDdkIsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQy9CLENBQUMsQ0FBQTs7WUFFSyxpQkFBaUI7Ozs7O1FBQUcsVUFBQyxNQUFNLEVBQUUsR0FBRztZQUNwQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDL0IsS0FBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVELFVBQVUsQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLGVBQWUsQ0FBQztZQUN4QyxVQUFVLENBQUMsT0FBTyxHQUFHLEtBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzdELFVBQVUsQ0FBQyxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDO1lBQzNDLFVBQVUsQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUM3QyxVQUFVLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztZQUN6RCxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzFDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZDLHVCQUF1QjtZQUN2QixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDL0IsQ0FBQyxDQUFBO1FBRUQsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLENBQUM7UUFDekQsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztRQUMxQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztRQUV2QyxPQUFPLFVBQVUsQ0FBQztJQUNwQixDQUFDOzs7Ozs7O0lBRU0saURBQWE7Ozs7OztJQUFwQixVQUFxQixLQUFZLEVBQUUsSUFBYyxFQUFFLFNBQTBCO1FBQTdFLGlCQTBFQztRQTFFa0QsMEJBQUEsRUFBQSxpQkFBMEI7UUFDM0UsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDOztZQUN6QixJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUM7UUFFM0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3JFLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVM7Ozs7UUFDN0MsVUFBQyxLQUF5Qjs7O2dCQUNwQixNQUFNLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixFQUFFOztnQkFFakMsUUFBUSxHQUFHLEVBQUU7WUFDakIsa0NBQWtDO1lBQ2xDLElBQUk7O29CQUNGLEtBQWlCLElBQUEsVUFBQSxpQkFBQSxLQUFLLENBQUEsNEJBQUEsK0NBQUU7d0JBQW5CLElBQUksSUFBSSxrQkFBQTs7NEJBQ1gsS0FBcUIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxhQUFhLENBQUEsZ0JBQUEsNEJBQUU7Z0NBQXBDLElBQUksUUFBUSxXQUFBOztvQ0FDWCxRQUFRLEdBQUcsSUFBSTs7b0NBQ2YsR0FBRyxHQUF5QixJQUFJLG9CQUFvQixFQUFFO2dDQUMxRCxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7b0NBQ3JDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7aUNBQzdDOztvQ0FFRyxXQUFXLEdBQUcsRUFBRTtnQ0FDcEIsUUFBUSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsS0FBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsS0FBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxLQUFJLENBQUMsU0FBUyxFQUFFLEtBQUksQ0FBQyxVQUFVLEVBQUUsY0FBWSxXQUFhLENBQUMsQ0FBQztnQ0FFeEwsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzs2QkFDekI7Ozs7Ozs7OztxQkFDRjs7Ozs7Ozs7O2dCQUVELEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxvQkFBb0IsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7b0JBRXRFLEtBQWUsSUFBQSxhQUFBLGlCQUFBLFFBQVEsQ0FBQSxrQ0FBQSx3REFBRTt3QkFBcEIsSUFBSSxFQUFFLHFCQUFBO3dCQUNULElBQUksRUFBRSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsRUFBRTs7Z0NBQ2pDLEVBQUUsR0FBRyxLQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUM7NEJBQ3ZDLEVBQUUsQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO3lCQUN2Qjt3QkFDRCxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztxQkFDbEU7Ozs7Ozs7Ozs7b0JBRUssTUFBTSxHQUFHLEtBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFO2dCQUMvQyxLQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFJLENBQUMsUUFBUSxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzs7b0JBQzNDLE1BQU0sR0FBRyxLQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLEtBQUssRUFBRTs7b0JBQ3pDLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDOztvQkFDeEIsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUM7Z0JBRTlCLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsS0FBSSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7O29CQUUvQyxRQUFRLEdBQUcsbUJBQUEsSUFBSSxDQUFDLElBQUksRUFBYztnQkFDeEMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDOztvQkFDeEIsS0FBZSxJQUFBLGFBQUEsaUJBQUEsUUFBUSxDQUFBLGtDQUFBLHdEQUFFO3dCQUFwQixJQUFJLEVBQUUscUJBQUE7OzRCQUNILEVBQUUsR0FBRyxJQUFJLFVBQVUsRUFBRTt3QkFDM0IsS0FBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7d0JBQ3pCLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO3dCQUViLEVBQUUsQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO3dCQUNuQixRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztxQkFDdkI7Ozs7Ozs7OzthQUNGO29CQUNPO2dCQUNOLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQzthQUM5QjtZQUNELFNBQVM7WUFDVCxTQUFTLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3pFLEtBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ3pCLGtCQUFrQjtZQUNsQixLQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDdkgsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2QixDQUFDOzs7O1FBQ0QsVUFBQyxHQUFHO1lBQ0YsS0FBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDekIsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNyQixLQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUMvRyxNQUFNLEdBQUcsQ0FBQztRQUNaLENBQUMsRUFDRixDQUFDO0lBQ0osQ0FBQzs7Ozs7OztJQUVNLG1EQUFlOzs7Ozs7SUFBdEIsVUFBdUIsS0FBWSxFQUFFLElBQWMsRUFBRSxTQUEwQjtRQUEvRSxpQkEwRUM7UUExRW9ELDBCQUFBLEVBQUEsaUJBQTBCO1FBQzdFLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQzs7WUFDekIsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDO1FBRTdELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVM7Ozs7UUFDL0MsVUFBQyxLQUEyQjs7O2dCQUN0QixLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRTs7Z0JBQ3hCLE1BQU0sR0FBRyxLQUFLLENBQUMsZ0JBQWdCLEVBQUU7O2dCQUVqQyxRQUFRLEdBQUcsRUFBRTtZQUNqQixrQ0FBa0M7WUFDbEMsSUFBSTs7b0JBQ0YsS0FBaUIsSUFBQSxVQUFBLGlCQUFBLEtBQUssQ0FBQSw0QkFBQSwrQ0FBRTt3QkFBbkIsSUFBSSxJQUFJLGtCQUFBOzs0QkFDWCxLQUFxQixJQUFBLEtBQUEsaUJBQUEsSUFBSSxDQUFDLGFBQWEsQ0FBQSxnQkFBQSw0QkFBRTtnQ0FBcEMsSUFBSSxRQUFRLFdBQUE7O29DQUNYLFFBQVEsR0FBRyxJQUFJOztvQ0FDZixHQUFHLEdBQXlCLElBQUksb0JBQW9CLEVBQUU7Z0NBQzFELElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtvQ0FDckMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztpQ0FDN0M7O29DQUVHLFdBQVcsR0FBRyxFQUFFO2dDQUNwQixRQUFRLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFJLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxLQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEtBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSSxDQUFDLFVBQVUsRUFBRSxjQUFZLFdBQWEsQ0FBQyxDQUFDO2dDQUUxTCxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDOzZCQUN6Qjs7Ozs7Ozs7O3FCQUNGOzs7Ozs7Ozs7Z0JBQ0QsS0FBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDOztvQkFFeEUsS0FBZSxJQUFBLGFBQUEsaUJBQUEsUUFBUSxDQUFBLGtDQUFBLHdEQUFFO3dCQUFwQixJQUFJLEVBQUUscUJBQUE7d0JBQ1QsSUFBSSxFQUFFLENBQUMsWUFBWSxDQUFDLG1CQUFtQixFQUFFOztnQ0FDakMsRUFBRSxHQUFHLEtBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQzs0QkFDekMsRUFBRSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7eUJBQ3pCO3dCQUNELEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO3FCQUNsRTs7Ozs7Ozs7OztvQkFFSyxNQUFNLEdBQUcsS0FBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLEVBQUU7Z0JBQy9DLEtBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDOztvQkFDL0MsTUFBTSxHQUFHLEtBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFOztvQkFDekMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUM7O29CQUN4QixFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztnQkFFOUIsS0FBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQzs7b0JBRS9DLFFBQVEsR0FBRyxtQkFBQSxJQUFJLENBQUMsSUFBSSxFQUFnQjtnQkFDMUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDOztvQkFDMUIsS0FBZSxJQUFBLGFBQUEsaUJBQUEsUUFBUSxDQUFBLGtDQUFBLHdEQUFFO3dCQUFwQixJQUFJLEVBQUUscUJBQUE7OzRCQUNILEVBQUUsR0FBRyxJQUFJLFlBQVksRUFBRTt3QkFDN0IsS0FBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7d0JBQ3pCLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO3dCQUViLEVBQUUsQ0FBQyxFQUFFLEdBQUcsUUFBUSxDQUFDO3dCQUNqQixRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztxQkFDekI7Ozs7Ozs7OzthQUNGO29CQUNPO2dCQUNOLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQzthQUM5QjtZQUNELFNBQVM7WUFDVCxTQUFTLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3pFLEtBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ3pCLGtCQUFrQjtZQUNsQixLQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsMEJBQTBCLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDekgsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2QixDQUFDOzs7O1FBQ0QsVUFBQyxHQUFHO1lBQ0YsS0FBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDekIsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNyQixLQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUMvRyxNQUFNLEdBQUcsQ0FBQztRQUNaLENBQUMsRUFDRixDQUFDO0lBQ0osQ0FBQzs7Ozs7OztJQUVNLGtEQUFjOzs7Ozs7SUFBckIsVUFBc0IsS0FBWSxFQUFFLElBQWMsRUFBRSxHQUF5Qjs7WUFDckUsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUU7O1lBQ3hCLE1BQU0sR0FBRyxLQUFLLENBQUMsZ0JBQWdCLEVBQUU7UUFDdkMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQy9CLElBQUk7O2dCQUNFLFNBQVMsR0FBZSxFQUFFO1lBQzlCLElBQUksR0FBRyxJQUFJLG9CQUFvQixDQUFDLElBQUksRUFBRTs7b0JBQ2hDLEtBQUssR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDOztvQkFDcEMsQ0FBQyxHQUFHLENBQUM7Z0JBQ1QsT0FBTyxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUU7b0JBQ3BELElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7d0JBQ3BELFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBWSxDQUFDLENBQUM7d0JBQzVDLEtBQUssQ0FBQyxJQUFJLE9BQVYsS0FBSyxtQkFBUyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFFO3FCQUN4RDtvQkFDRCxDQUFDLEVBQUUsQ0FBQztpQkFDTDthQUNGO2lCQUFNLElBQUksR0FBRyxJQUFJLG9CQUFvQixDQUFDLEVBQUUsRUFBRTs7b0JBQ3JDLEtBQUssR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDOztvQkFDcEMsQ0FBQyxHQUFHLENBQUM7Z0JBQ1QsT0FBTyxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUU7b0JBQ3BELElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7d0JBQ3BELFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBWSxDQUFDLENBQUM7d0JBQzVDLEtBQUssQ0FBQyxJQUFJLE9BQVYsS0FBSyxtQkFBUyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFFO3FCQUN4RDtvQkFDRCxDQUFDLEVBQUUsQ0FBQztpQkFDTDthQUNGO1lBQ0QsSUFBSSxHQUFHLElBQUksb0JBQW9CLENBQUMsSUFBSSxFQUFFO2dCQUNwQyxDQUFDLG1CQUFBLElBQUksQ0FBQyxJQUFJLEVBQWdCLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQzthQUM5QztpQkFBTSxJQUFJLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3pDLENBQUMsbUJBQUEsSUFBSSxDQUFDLElBQUksRUFBYyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7YUFDMUM7WUFDRCxLQUFLLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztnQkFFdkIsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFO1lBQy9DLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDOztnQkFDM0MsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFOztnQkFDekMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUM7O2dCQUN4QixFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDOztnQkFFL0MsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFO1lBQ2hELElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDOztnQkFDL0MsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFOztnQkFDMUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUM7O2dCQUMzQixHQUFHLEdBQUcsT0FBTyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3hEO2dCQUFTO1lBQ1IsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO1NBQzlCO0lBQ0gsQ0FBQzs7Ozs7Ozs7SUFFTSx3REFBb0I7Ozs7Ozs7SUFBM0IsVUFBNEIsS0FBWSxFQUFFLEtBQWUsRUFBRSxFQUFVLEVBQUUsRUFBVTtRQUMvRSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDL0IsSUFBSTs7Z0JBQ0UsUUFBUSxHQUF1QixJQUFJO1lBQ3ZDLFFBQVEscUJBQUksS0FBSyxHQUFLLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUssS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQzdILEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztTQUNuQztnQkFBUztZQUNSLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUM5QjtJQUNILENBQUM7Ozs7Ozs7O0lBRU0sb0RBQWdCOzs7Ozs7O0lBQXZCLFVBQXdCLEtBQVksRUFBRSxJQUFjLEVBQUUsUUFBb0IsRUFBRSxHQUF5QjtRQUNuRyxJQUFJLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUU7WUFDcEMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDcEQ7YUFBTSxJQUFJLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxFQUFFLEVBQUU7WUFDekMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDbEQ7SUFDSCxDQUFDOzs7Ozs7O0lBRU0sMERBQXNCOzs7Ozs7SUFBN0IsVUFBOEIsS0FBWSxFQUFFLElBQWMsRUFBRSxRQUFvQjtRQUM5RSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDL0IsSUFBSTs7Z0JBQ0UsT0FBTyxHQUFHLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHOzs7O1lBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsTUFBTSxFQUFYLENBQVcsRUFBQzs7Z0JBRS9ELEtBQUssR0FBRyxPQUFPOzs7Z0JBR2YsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJOzs7OztZQUFDLFVBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSyxPQUFBLEVBQUUsQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQTdFLENBQTZFLEVBQUM7OztnQkFFNUcsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7OztnQkFFM0UsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2pFLGVBQWU7WUFDZixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDeEMsSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUNwRCxLQUFLLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25FLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDekI7O2dCQUNHLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDOztnQkFDeEIsT0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUk7WUFDbEMsWUFBWTtZQUNaLEtBQUssQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxDQUFDO2dCQUNiLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFLLENBQUMsQ0FBQztZQUNuQyxDQUFDLEVBQUMsQ0FBQztZQUNILElBQUksSUFBSSxPQUFLLENBQUM7WUFDZCxJQUFJLElBQUksT0FBSyxDQUFDO1lBRWQsSUFBSSxJQUFJLE9BQUssQ0FBQztZQUNkLGtEQUFrRDtZQUNsRCxLQUFLLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO2dCQUNqQyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRTtvQkFDaEksU0FBUztpQkFDVjtnQkFDRCxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLG1CQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtvQkFDM0YsU0FBUztpQkFDVjtnQkFDRCxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7b0JBQ3hDLFNBQVM7aUJBQ1Y7Z0JBQ0QsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRTtvQkFDN0QsU0FBUztpQkFDVjs7b0JBQ0ssQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7b0JBQzVCLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUTtnQkFDcEIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzNJO1NBQ0Y7Z0JBQVM7WUFDUixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDOUI7SUFDSCxDQUFDOzs7Ozs7O0lBRU0sd0RBQW9COzs7Ozs7SUFBM0IsVUFBNEIsS0FBWSxFQUFFLElBQWMsRUFBRSxRQUFvQjtRQUM1RSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDL0IsSUFBSTs7Z0JBQ0UsT0FBTyxHQUFHLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHOzs7O1lBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsTUFBTSxFQUFYLENBQVcsRUFBQzs7Z0JBQy9ELEtBQUssR0FBRyxPQUFPOzs7Z0JBR2YsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJOzs7OztZQUFDLFVBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSyxPQUFBLEVBQUUsQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQTdFLENBQTZFLEVBQUM7OztnQkFFNUcsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7OztnQkFFM0UsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2pFLGVBQWU7WUFDZixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDeEMsSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUNwRCxLQUFLLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25FLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDekI7O2dCQUNHLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDOztnQkFDeEIsT0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUk7WUFDbEMsWUFBWTtZQUNaLEtBQUssQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxDQUFDO2dCQUNiLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFLLENBQUMsQ0FBQztZQUNuQyxDQUFDLEVBQUMsQ0FBQztZQUNILElBQUksSUFBSSxPQUFLLENBQUM7WUFDZCxJQUFJLElBQUksT0FBSyxDQUFDO1lBRWQsSUFBSSxJQUFJLE9BQUssQ0FBQztZQUNkLGtEQUFrRDtZQUNsRCxLQUFLLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO2dCQUNqQyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRTtvQkFDaEksU0FBUztpQkFDVjtnQkFDRCxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLG1CQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtvQkFDM0YsU0FBUztpQkFDVjtnQkFDRCxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7b0JBQ3hDLFNBQVM7aUJBQ1Y7Z0JBQ0QsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRTtvQkFDN0QsU0FBUztpQkFDVjs7b0JBQ0ssQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7b0JBQzVCLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUTtnQkFFcEIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzNJO1NBQ0Y7Z0JBQVM7WUFDUixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDOUI7SUFDSCxDQUFDOzs7Ozs7SUFFTSwrQ0FBVzs7Ozs7SUFBbEIsVUFBbUIsUUFBa0IsRUFBRSxJQUFjO1FBQ25ELFFBQVEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUNsQyxRQUFRLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDMUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDeEIsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDekMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDekMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDakQsUUFBUSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDbkQsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEdBQUc7WUFDOUIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO1NBQ2xCLENBQUM7SUFDSixDQUFDOzs7O0lBRUQsMkNBQU87OztJQUFQO1FBQ0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN2QixDQUFDOzs7O0lBRUQsMENBQU07OztJQUFOO1FBQ0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUN0QixDQUFDOzs7O0lBRUQsOENBQVU7OztJQUFWO1FBQ0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUMxQixDQUFDOzs7O0lBRUQsZ0RBQVk7OztJQUFaO1FBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztJQUNqRCxDQUFDOzs7O0lBRUQseUNBQUs7OztJQUFMOztZQUNRLE9BQU8sR0FBRyxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUNqRCxPQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUM3QixPQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUM3QixPQUFPLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO1FBRXBDLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNuQyxDQUFDOzs7Ozs7SUFFRCwwQ0FBTTs7Ozs7SUFBTixVQUFPLFNBQStCLEVBQUUsR0FBb0I7UUFBcEIsb0JBQUEsRUFBQSxXQUFvQjtRQUMxRCxJQUFJLEdBQUcsRUFBRTtZQUNQLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDMUIsT0FBTztTQUNSO1FBQ0QsSUFBSSxTQUFTLElBQUksb0JBQW9CLENBQUMsRUFBRSxFQUFFOztnQkFDbEMsS0FBSyxHQUF1QixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDOUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDLElBQUksT0FBVixLQUFLLG1CQUFTLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFDLENBQUM7WUFDaEUsS0FBSyxDQUFDLE9BQU87Ozs7WUFBQyxVQUFDLElBQWM7Z0JBQzNCLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7b0JBQzdFLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLElBQUksYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2lCQUNoRTtZQUNILENBQUMsRUFBQyxDQUFDO1NBQ0o7YUFBTSxJQUFJLFNBQVMsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUU7O2dCQUMzQyxLQUFLLEdBQXVCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUM5QyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsSUFBSSxPQUFWLEtBQUssbUJBQVMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUMsQ0FBQztZQUNwRSxLQUFLLENBQUMsT0FBTzs7OztZQUFDLFVBQUMsSUFBYztnQkFDM0IsSUFBSSxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxJQUFJLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtvQkFDakYsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsSUFBSSxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7aUJBQ2xFO1lBQ0gsQ0FBQyxFQUFDLENBQUM7U0FDSjtJQUNILENBQUM7Ozs7O0lBRUQsNkNBQVM7Ozs7SUFBVCxVQUFVLFNBQStCO1FBQXpDLGlCQWdFQztRQS9EQyxJQUFJLFNBQVMsSUFBSSxvQkFBb0IsQ0FBQyxFQUFFLElBQUksU0FBUyxJQUFJLG9CQUFvQixDQUFDLElBQUksRUFBRTtZQUNsRixPQUFPO1NBQ1I7OztZQUdHLDJCQUEyQixHQUFHLElBQUk7UUFDdEMsSUFBSSxTQUFTLElBQUksb0JBQW9CLENBQUMsRUFBRSxFQUFFO1lBQ3hDLDJCQUEyQjs7O1lBQUc7O29CQUN0QixLQUFLLEdBQXVCLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQztnQkFDOUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDLElBQUksT0FBVixLQUFLLG1CQUFTLEtBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFDLENBQUM7O29CQUUxRCxlQUFlLEdBQUcsS0FBSyxDQUFDLE1BQU07Ozs7Z0JBQUMsVUFBQyxJQUFjO29CQUNsRCxPQUFPLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLElBQUksZ0JBQWdCLENBQUMsTUFBTSxDQUFDO2dCQUNuRixDQUFDLEVBQUM7Z0JBRUYsNEJBQTRCO2dCQUM1QixJQUFJLGVBQWUsSUFBSSxJQUFJLElBQUksZUFBZSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7b0JBQzFELElBQUksS0FBSSxDQUFDLGlCQUFpQixLQUFLLENBQUMsRUFBRTt3QkFDaEMsd0JBQXdCO3dCQUN4QixLQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO3dCQUN2RCxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO3FCQUM5QjtpQkFDRjtxQkFBTTtvQkFDTCxlQUFlLENBQUMsT0FBTzs7OztvQkFBQyxVQUFDLElBQWM7d0JBQ3JDLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7NEJBQzdFLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLElBQUksYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO3lCQUNoRTtvQkFDSCxDQUFDLEVBQUMsQ0FBQztpQkFDSjtZQUNILENBQUMsQ0FBQSxDQUFDO1NBQ0g7YUFBTSxJQUFJLFNBQVMsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUU7WUFDakQsMkJBQTJCOzs7WUFBRzs7b0JBQ3RCLEtBQUssR0FBdUIsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDO2dCQUM5QyxLQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsSUFBSSxPQUFWLEtBQUssbUJBQVMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUMsQ0FBQzs7b0JBRTlELGlCQUFpQixHQUFHLEtBQUssQ0FBQyxNQUFNOzs7O2dCQUFDLFVBQUMsSUFBYztvQkFDcEQsT0FBTyxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxJQUFJLGdCQUFnQixDQUFDLE1BQU0sQ0FBQztnQkFDdkYsQ0FBQyxFQUFDO2dCQUVGLDRCQUE0QjtnQkFDNUIsSUFBSSxpQkFBaUIsSUFBSSxJQUFJLElBQUksaUJBQWlCLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtvQkFDOUQsSUFBSSxLQUFJLENBQUMsaUJBQWlCLEtBQUssQ0FBQyxFQUFFO3dCQUNoQyx3QkFBd0I7d0JBQ3hCLEtBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLDJCQUEyQixDQUFDLENBQUM7d0JBQ3ZELE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7cUJBQzlCO2lCQUNGO3FCQUFNO29CQUNMLGlCQUFpQixDQUFDLE9BQU87Ozs7b0JBQUMsVUFBQyxJQUFjO3dCQUN2QyxJQUFJLElBQUksQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLElBQUksZ0JBQWdCLENBQUMsTUFBTSxFQUFFOzRCQUNqRixJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzt5QkFDbEU7b0JBQ0gsQ0FBQyxFQUFDLENBQUM7aUJBQ0o7WUFDSCxDQUFDLENBQUEsQ0FBQztTQUNIO1FBRUQsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMxQixRQUFRO1FBQ1Isd0JBQXdCO1FBQ3hCLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLHdCQUF3QixFQUFFLDJCQUEyQixDQUFDLENBQUM7UUFFOUUsYUFBYTtRQUNiLDJCQUEyQixFQUFFLENBQUM7SUFDaEMsQ0FBQzs7Z0JBLzFCRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLHdCQUF3QjtvQkFDbEMseU9BQWtEOztpQkFFbkQ7Ozs7Z0JBcENRLGVBQWU7NkNBK0duQixNQUFNLFNBQUMsU0FBUztnQkE5R1osc0JBQXNCO2dCQWtCdEIsYUFBYTtnQkFaYixlQUFlO2dCQUNmLGNBQWM7Z0JBQ0YsY0FBYztnQkFaK0UsZ0JBQWdCO2dCQUFFLFFBQVE7Z0JBQUUsd0JBQXdCO2dCQUFFLGlCQUFpQjs7O2dDQTJDdEwsU0FBUyxTQUFDLGFBQWE7cUNBR3ZCLFNBQVMsU0FBQyxvQkFBb0I7cUNBRzlCLE1BQU0sU0FBQyxRQUFROzBDQUdmLE1BQU0sU0FBQyxhQUFhO2tDQU1wQixLQUFLLFNBQUMsaUJBQWlCOztJQXkwQjFCLGdDQUFDO0NBQUEsQUFoMkJELElBZzJCQztTQTMxQlkseUJBQXlCOzs7SUFDcEMsK0NBQWtDOztJQUVsQyxrREFDMEM7O0lBRTFDLHVEQUMrQzs7SUFFL0MsdURBQzZDOztJQUU3Qyw0REFJSzs7SUFFTCxvREFDaUM7O0lBRWpDLGlEQUFzQzs7SUFDdEMsZ0RBQW9DOztJQUVwQyw2Q0FBcUI7O0lBRXJCLDBDQUFhOztJQUNiLDJDQUFZOztJQUNaLDJDQUFZOztJQUNaLDZDQUFrQzs7SUFDbEMsK0NBQThCOztJQUM5Qiw0Q0FBaUI7O0lBRWpCLGtEQUE2Qjs7SUFFN0Isa0RBQXlDOztJQUN6QywwQ0FBZ0I7O0lBQ2hCLDZDQUEyQjs7SUFDM0IsK0NBQTZCOztJQUU3QixpREFBbUI7O0lBQ25CLGtEQUFvQjs7SUFDcEIsOENBQThCOztJQUM5QiwrQ0FBZ0M7O0lBQ2hDLHlEQUE0Sjs7SUFDNUosc0RBQWlKOztJQUVqSix3REFBeUI7O0lBQ3pCLHlEQUEwQjs7SUFDMUIsaURBQWdEOztJQUNoRCxrREFBa0Q7O0lBRWxELHlEQUFnSTs7SUFDaEksMkRBQWtJOztJQUNsSSx5REFBaUk7O0lBQ2pJLDJEQUFtSTs7SUFFbkksa0RBQTBDOztJQUMxQyxvREFBOEM7O0lBQzlDLGtEQUEwQzs7SUFDMUMsb0RBQThDOztJQUU5QyxtREFBcUM7O0lBQ3JDLHFEQUFzQzs7SUFFdEMsb0RBQTRDOzs7OztJQUs1QyxzREFBc0I7O0lBS3BCLGdEQUEwQzs7SUFDMUMsMkNBQTRCOztJQUM1Qiw2Q0FBZ0M7O0lBQ2hDLDRDQUE4Qjs7SUFDOUIsMENBQTRCOztJQUM1Qix3Q0FBNEI7O0lBQzVCLHdDQUFvQjs7SUFDcEIsd0NBQW9DOztJQUNwQyx3Q0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBMT0NBTEVfSUQsIEFmdGVyVmlld0luaXQsIElucHV0LCBWaWV3Q29udGFpbmVyUmVmLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDaGFuZ2VEZXRlY3RvclJlZiwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgR3JhcGggfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9HcmFwaCc7XHJcbmltcG9ydCB7IG14RXZlbnQsIG14UnViYmVyYmFuZCwgbXhHcmFwaEhhbmRsZXIsIG14RXZlbnRPYmplY3QsIG14R3JhcGhTZWxlY3Rpb25Nb2RlbCwgbXhDb25zdGFudHMsIG14Q2VsbE92ZXJsYXksIG14SW1hZ2UsIG14Q29tcGFjdFRyZWVMYXlvdXQsIG14Q2xpZW50LCBNeEdyYXBoTlMsIG14R3VpZGUsIG14UG9seWxpbmUsIG14U3dpbWxhbmVNYW5hZ2VyLCBteExheW91dE1hbmFnZXIsIG14Q29ubmVjdGlvbkhhbmRsZXIsIG14RWxsaXBzZSwgbXhIYW5kbGUsIG14VmVydGV4SGFuZGxlciwgbXhQb2ludCwgbXhTd2ltbGFuZUxheW91dCwgbXhIaWVyYXJjaGljYWxMYXlvdXQsIG14TW9ycGhpbmcsIG14UmVjdGFuZ2xlU2hhcGUsIG14Q29ubmVjdGlvbkNvbnN0cmFpbnQsIG14RWRnZUhhbmRsZXIsIG14U2hhcGUsIG14Q2VsbFN0YXRlLCBteFJlY3RhbmdsZSwgbXhQcmludFByZXZpZXcsIG14VXRpbHMsIG14T3V0bGluZSB9IGZyb20gXCIuLi8uLi8uLi9yZWYvbXhncmFwaFwiO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckFyZ3MgfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWFyZ3MnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGlyZWN0aW9uIH0gZnJvbSAnLi4vLi4vY29uZmlnL2JpbGwtdHJhY2tlci1kaXJlY3Rpb24nO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi9waXBlL2JpbGwtdHJhY2tlci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IEJpbGxDZWxsIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvQmlsbENlbGwnO1xyXG5pbXBvcnQgeyBEb3duQmlsbEluZm9SZXN1bHQgfSBmcm9tICcuLi8uLi9hcmdzL0Rvd25CaWxsSW5mb1Jlc3VsdCc7XHJcbmltcG9ydCB7IFVwQmlsbEluZm9SZXN1bHQgfSBmcm9tICcuLi8uLi9hcmdzL1VwQmlsbEluZm9SZXN1bHQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmLCBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckNvbnN0YW50IH0gZnJvbSAnLi4vLi4vY29uZmlnL2JpbGwtdHJhY2tlci1jb25zdGFudCc7XHJcbmltcG9ydCB7IFJldmVydENvbXBhY3RUcmVlTGF5b3V0IH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvUmV2ZXJ0Q29tcGFjdFRyZWVMYXlvdXQnO1xyXG5pbXBvcnQgeyBDb21wYWN0VHJlZUxheW91dCB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L0NvbXBhY3RUcmVlTGF5b3V0JztcclxuaW1wb3J0IHsgRW50cnlDZWxsRGF0YSB9IGZyb20gJy4uLy4uLy4uL2VudGl0eS90cmFja2luZy9jZWxsLWRhdGEvRW50cnlDZWxsRGF0YSc7XHJcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL2NlbGwtZGF0YS9DZWxsRGF0YSc7XHJcbmltcG9ydCB7IFVwQ2VsbERhdGEgfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvY2VsbC1kYXRhL1VwQ2VsbERhdGEnO1xyXG5pbXBvcnQgeyBEb3duQ2VsbERhdGEgfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvY2VsbC1kYXRhL0Rvd25DZWxsRGF0YSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2luZ1NldHRpbmdzIH0gZnJvbSAnQGVkcC1iaWYvY29tbW9uLWFwaSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyR3JhcGhPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29uZmlnL2JpbGwtdHJhY2tlci1ncmFwaC1vcHRpb25zJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEYXRhSW5mb1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItZGF0YS1pbmZvLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDZWxsT3ZlcmxheSB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L0NlbGxPdmVybGF5JztcclxuaW1wb3J0IHsgQ2VsbE92ZXJsYXlTdGF0ZSB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L0NlbGxPdmVybGF5U3RhdGUnO1xyXG5pbXBvcnQgeyBFdmVudHMgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9FdmVudHMnO1xyXG5pbXBvcnQgeyBiaWxsVHJhY2tlckNlbGxDc3MgfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWNlbGwtY3NzJztcclxuaW1wb3J0IHsgYWRkQ3VzdG9tQ1NTIH0gZnJvbSAnLi4vLi4vdXRpbHMvYWRkQ3VzdG9tQ1NTJztcclxuaW1wb3J0IHsgT3V0bGluZSB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L091dGxpbmUnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckdyaWRPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29uZmlnL2JpbGwtdHJhY2tlci1ncmlkLW9wdGlvbnMnO1xyXG5cclxuLy8g5ZyoaGVhZOS4rea3u+WKoOiKgueCueagt+W8j1xyXG5hZGRDdXN0b21DU1MoYmlsbFRyYWNrZXJDZWxsQ3NzKTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLWJpbGwtdHJhY2tlci1ncmFwaCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2JpbGwtdHJhY2tlci1ncmFwaC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYmlsbC10cmFja2VyLWdyYXBoLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmlsbFRyYWNrZXJHcmFwaENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgbG9jYWxlUGlwZTogQmlsbFRyYWNrZXJMb2NhbGVQaXBlO1xyXG5cclxuICBAVmlld0NoaWxkKFwibXhDb250YWluZXJcIilcclxuICBteENvbnRhaW5lckVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcIm14T3V0bGluZUNvbnRhaW5lclwiKVxyXG4gIG14T3V0bGluZUNvbnRhaW5lcjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIEBPdXRwdXQoXCJzZWxlY3RcIilcclxuICBzZWxlY3RFdmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQE91dHB1dChcInN0YXRlQ2hhbmdlXCIpXHJcbiAgc3RhdGVDaGFuZ2VFdmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHtcclxuICAgIHR5cGU6IGFueSxcclxuICAgIGRhdGE/OiBhbnlcclxuICB9PigpO1xyXG5cclxuICBASW5wdXQoXCJiaWxsVHJhY2tlckFyZ3NcIilcclxuICBiaWxsVHJhY2tlckFyZ3M6IEJpbGxUcmFja2VyQXJncztcclxuXHJcbiAgZ3JhcGhPcHRpb25zOiBCaWxsVHJhY2tlckdyYXBoT3B0aW9ucztcclxuICBncmlkT3B0aW9uczogQmlsbFRyYWNrZXJHcmlkT3B0aW9ucztcclxuXHJcbiAgbW9kYWxSZWY6IEJzTW9kYWxSZWY7XHJcblxyXG4gIGdyYXBoOiBHcmFwaDtcclxuICBoc3BhY2UgPSA4MDtcclxuICB2c3BhY2UgPSAyODtcclxuICB1cExheW91dDogUmV2ZXJ0Q29tcGFjdFRyZWVMYXlvdXQ7XHJcbiAgZG93bkxheW91dDogQ29tcGFjdFRyZWVMYXlvdXQ7XHJcbiAgb3V0bGluZTogT3V0bGluZTtcclxuXHJcbiAgZW50cnlDZWxsRGF0YTogRW50cnlDZWxsRGF0YTtcclxuXHJcbiAgbGF5b3V0TWFuYWdlcjogTXhHcmFwaE5TLm14TGF5b3V0TWFuYWdlcjtcclxuICBlbnRyeTogQmlsbENlbGw7XHJcbiAgdXBQYXJlbnQ6IE14R3JhcGhOUy5teENlbGw7XHJcbiAgZG93blBhcmVudDogTXhHcmFwaE5TLm14Q2VsbDtcclxuXHJcbiAgZGVmYXVsdFdpZHRoID0gMjUwO1xyXG4gIGRlZmF1bHRIZWlnaHQgPSAxMzg7XHJcbiAgbm9kZVdpZHRoID0gdGhpcy5kZWZhdWx0V2lkdGg7XHJcbiAgbm9kZUhlaWdodCA9IHRoaXMuZGVmYXVsdEhlaWdodDtcclxuICBkZWZhdWx0Tm9uRW50cnlJbWFnZSA9ICghbXhDbGllbnQuSVNfU1ZHKSA/IEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvbm9uLWVudHJ5LWJpbGwucG5nJyA6IEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvbm9uLWVudHJ5LWJpbGwuc3ZnJztcclxuICBkZWZhdWx0RW50cnlJbWFnZSA9ICghbXhDbGllbnQuSVNfU1ZHKSA/IEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvZW50cnktYmlsbC5wbmcnIDogQmlsbFRyYWNrZXJDb25zdGFudC5JTUFHRV9QQVRIICsgJy9lbnRyeS1iaWxsLnN2Zyc7XHJcblxyXG4gIGRlZmF1bHRPdmVybGF5V2lkdGggPSAyNjtcclxuICBkZWZhdWx0T3ZlcmxheUhlaWdodCA9IDI2O1xyXG4gIG92ZXJsYXlXaWR0aDogbnVtYmVyID0gdGhpcy5kZWZhdWx0T3ZlcmxheVdpZHRoO1xyXG4gIG92ZXJsYXlIZWlnaHQ6IG51bWJlciA9IHRoaXMuZGVmYXVsdE92ZXJsYXlIZWlnaHQ7XHJcblxyXG4gIGRlZmF1bHRVcFNlYXJjaEltYWdlID0gbmV3IG14SW1hZ2UoQmlsbFRyYWNrZXJDb25zdGFudC5JTUFHRV9QQVRIICsgJy90cmFja2VyLXBsdXMuc3ZnJywgdGhpcy5vdmVybGF5V2lkdGgsIHRoaXMub3ZlcmxheUhlaWdodCk7XHJcbiAgZGVmYXVsdERvd25TZWFyY2hJbWFnZSA9IG5ldyBteEltYWdlKEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvdHJhY2tlci1wbHVzLnN2ZycsIHRoaXMub3ZlcmxheVdpZHRoLCB0aGlzLm92ZXJsYXlIZWlnaHQpO1xyXG4gIGRlZmF1bHRVcEZvbGRlckltYWdlID0gbmV3IG14SW1hZ2UoQmlsbFRyYWNrZXJDb25zdGFudC5JTUFHRV9QQVRIICsgJy90cmFja2VyLW1pbnVzLnN2ZycsIHRoaXMub3ZlcmxheVdpZHRoLCB0aGlzLm92ZXJsYXlIZWlnaHQpO1xyXG4gIGRlZmF1bHREb3duRm9sZGVySW1hZ2UgPSBuZXcgbXhJbWFnZShCaWxsVHJhY2tlckNvbnN0YW50LklNQUdFX1BBVEggKyAnL3RyYWNrZXItbWludXMuc3ZnJywgdGhpcy5vdmVybGF5V2lkdGgsIHRoaXMub3ZlcmxheUhlaWdodCk7XHJcblxyXG4gIHVwU2VhcmNoSW1hZ2UgPSB0aGlzLmRlZmF1bHRVcFNlYXJjaEltYWdlO1xyXG4gIGRvd25TZWFyY2hJbWFnZSA9IHRoaXMuZGVmYXVsdERvd25TZWFyY2hJbWFnZTtcclxuICB1cEZvbGRlckltYWdlID0gdGhpcy5kZWZhdWx0VXBGb2xkZXJJbWFnZTtcclxuICBkb3duRm9sZGVySW1hZ2UgPSB0aGlzLmRlZmF1bHREb3duRm9sZGVySW1hZ2U7XHJcblxyXG4gIHVwU2VhcmNoT2Zmc2V0ID0gbmV3IG14UG9pbnQoLTUwLCAwKTtcclxuICBkb3duU2VhcmNoT2Zmc2V0ID0gbmV3IG14UG9pbnQoNTAsIDApO1xyXG5cclxuICBkYXRhSW5mb1NlcnZpY2U6IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlO1xyXG5cclxuICAvKipcclxuICAgKiDmraPlnKjliqDovb3kuK3nmoTljZXmja7oioLngrnor7fmsYLmlbBcclxuICAgKi9cclxuICBudW1DZWxsc0FkZGluZ1JlcSA9IDA7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgYXJnczogQmlsbFRyYWNrZXJBcmdzLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGF0YVNlcnZpY2U6IEJpbGxUcmFja2VyRGF0YVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1lc3NhZ2VyOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbG9hZGluZzogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICBwdWJsaWMgbW9kYWw6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHVibGljIHZjcjogVmlld0NvbnRhaW5lclJlZixcclxuICAgIHB1YmxpYyBpbmo6IEluamVjdG9yLFxyXG4gICAgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHVibGljIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSBuZXcgQmlsbFRyYWNrZXJMb2NhbGVQaXBlKGxvY2FsZUlkKTtcclxuICAgIHRoaXMuZGF0YUluZm9TZXJ2aWNlID0gbmV3IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlKCk7XHJcblxyXG4gICAgdGhpcy5iaWxsVHJhY2tlckFyZ3MgPSBhcmdzO1xyXG4gICAgY29uc3QgZ3JhcGhPcHRpb25zID0gdGhpcy5iaWxsVHJhY2tlckFyZ3MuZ3JhcGhPcHRpb25zO1xyXG4gICAgdGhpcy5ncmFwaE9wdGlvbnMgPSBncmFwaE9wdGlvbnM7XHJcbiAgICBjb25zdCBncmlkT3B0aW9ucyA9IHRoaXMuYmlsbFRyYWNrZXJBcmdzLmdyaWRPcHRpb25zO1xyXG4gICAgdGhpcy5ncmlkT3B0aW9ucyA9IGdyaWRPcHRpb25zO1xyXG5cclxuICAgIHRoaXMudXBTZWFyY2hJbWFnZSA9IGdyYXBoT3B0aW9ucyAmJiBncmFwaE9wdGlvbnMudXBTZWFyY2hJbWFnZSA/IG5ldyBteEltYWdlKGdyYXBoT3B0aW9ucy51cFNlYXJjaEltYWdlLCB0aGlzLm92ZXJsYXlXaWR0aCwgdGhpcy5vdmVybGF5SGVpZ2h0KSA6IHRoaXMudXBTZWFyY2hJbWFnZTtcclxuICAgIHRoaXMuZG93blNlYXJjaEltYWdlID0gZ3JhcGhPcHRpb25zICYmIGdyYXBoT3B0aW9ucy5kb3duU2VhcmNoSW1hZ2UgPyBuZXcgbXhJbWFnZShncmFwaE9wdGlvbnMuZG93blNlYXJjaEltYWdlLCB0aGlzLm92ZXJsYXlXaWR0aCwgdGhpcy5vdmVybGF5SGVpZ2h0KSA6IHRoaXMuZG93blNlYXJjaEltYWdlO1xyXG4gICAgdGhpcy51cEZvbGRlckltYWdlID0gZ3JhcGhPcHRpb25zICYmIGdyYXBoT3B0aW9ucy51cEZvbGRlckltYWdlID8gbmV3IG14SW1hZ2UoZ3JhcGhPcHRpb25zLnVwRm9sZGVySW1hZ2UsIHRoaXMub3ZlcmxheVdpZHRoLCB0aGlzLm92ZXJsYXlIZWlnaHQpIDogdGhpcy51cEZvbGRlckltYWdlO1xyXG4gICAgdGhpcy5kb3duRm9sZGVySW1hZ2UgPSBncmFwaE9wdGlvbnMgJiYgZ3JhcGhPcHRpb25zLmRvd25Gb2xkZXJJbWFnZSA/IG5ldyBteEltYWdlKGdyYXBoT3B0aW9ucy5kb3duRm9sZGVySW1hZ2UsIHRoaXMub3ZlcmxheVdpZHRoLCB0aGlzLm92ZXJsYXlIZWlnaHQpIDogdGhpcy5kb3duRm9sZGVySW1hZ2U7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuZ3JhcGggPSB0aGlzLmNyZWF0ZUdyYXBoKCk7XHJcbiAgICB0aGlzLmNyZWF0ZUxheW91dCh0aGlzLmdyYXBoKTtcclxuICAgIHRoaXMubGF5b3V0TWFuYWdlciA9IG5ldyBteExheW91dE1hbmFnZXIodGhpcy5ncmFwaCk7XHJcbiAgICB0aGlzLm91dGxpbmUgPSBuZXcgT3V0bGluZSh0aGlzLmdyYXBoLCB0aGlzLm14T3V0bGluZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICByZWZyZXNoKHNpemVEaWRDaGFuZ2U6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICBpZiAoc2l6ZURpZENoYW5nZSAmJiB0aGlzLmdyYXBoICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5ncmFwaC5zaXplRGlkQ2hhbmdlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGFpbnQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnBhaW50R3JhcGgodGhpcy5ncmFwaCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0TW9kYWxSZWYobW9kYWxSZWY6IEJzTW9kYWxSZWYpIHtcclxuICAgIHRoaXMubW9kYWxSZWYgPSBtb2RhbFJlZjtcclxuXHJcbiAgICBpZiAodGhpcy5tb2RhbFJlZiAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMubW9kYWxSZWYuZGlhbG9nLmluc3RhbmNlLmNsb3NlZC5zdWJzY3JpYmUoKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZ3JhcGggJiYgdGhpcy5ncmFwaC5kZXN0cm95KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyB0b2RvOiDkuLTml7bop6PlhrPlvLnnqpfmqKHlvI/kuIvlhYjliLfmlrDlh7rlhaXlj6PoioLngrnpl67pophcclxuICAgICAgbGV0IGZsYWcgPSAwO1xyXG4gICAgICB0aGlzLm1vZGFsUmVmLmRpYWxvZy5pbnN0YW5jZS5yZXNpemVkLnN1YnNjcmliZSgoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGZsYWcgPj0gMikge1xyXG4gICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZsYWcrKztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlR3JhcGgoKSB7XHJcbiAgICAvL+WQr+eUqG14R3VpZGVcclxuICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5ndWlkZXNFbmFibGVkID0gdHJ1ZTtcclxuICAgIC8v56aB55SobXhncmFwaOWuueWZqOWGheS4iuS4i+aWh+iPnOWNlVxyXG4gICAgbXhFdmVudC5kaXNhYmxlQ29udGV4dE1lbnUodGhpcy5teENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5zY3JvbGxPbk1vdmUgPSBmYWxzZTtcclxuICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5zY2FsZUdyaWQgPSB0cnVlO1xyXG5cclxuICAgIC8v5L+u5pS56IqC54K56YCJ5Lit5ZCO5aSE55CG5Zmo5Zu+54mH5Y+K5aGr5YWF6ImyXHJcbiAgICBteENvbnN0YW50cy5IQU5ETEVfRklMTENPTE9SID0gJyMyOWI2ZjInO1xyXG4gICAgbXhIYW5kbGUucHJvdG90eXBlLmNyZWF0ZVNoYXBlID0gZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgY29uc3QgYm91bmRzID0gbmV3IG14RWxsaXBzZSgwLCAwLCBteENvbnN0YW50cy5IQU5ETEVfU0laRSwgbXhDb25zdGFudHMuSEFORExFX1NJWkUpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBteEVsbGlwc2UoYm91bmRzLCBteENvbnN0YW50cy5IQU5ETEVfRklMTENPTE9SLCBteENvbnN0YW50cy5IQU5ETEVfU1RST0tFQ09MT1IpO1xyXG4gICAgfTtcclxuICAgIG14VmVydGV4SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2UgPSAoIW14Q2xpZW50LklTX1NWRykgPyBuZXcgbXhJbWFnZShCaWxsVHJhY2tlckNvbnN0YW50LklNQUdFX1BBVEggKyAnL2hhbmRsZS1tYWluLnBuZycsIG14Q29uc3RhbnRzLkhBTkRMRV9TSVpFLCBteENvbnN0YW50cy5IQU5ETEVfU0laRSkgOiBHcmFwaC5jcmVhdGVTdmdJbWFnZSgxOCwgMTgsICc8Y2lyY2xlIGN4PVwiOVwiIGN5PVwiOVwiIHI9XCIzXCIgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCInICsgR3JhcGguaGFuZGxlRmlsbCArICdcIiBzdHJva2Utd2lkdGg9XCIxXCIvPicpO1xyXG5cclxuICAgIG14Q29uc3RhbnRzLkRFRkFVTFRfVkFMSURfQ09MT1IgPSAnI0ZGRkZGRic7XHJcbiAgICBteENvbnN0YW50cy5ISUdITElHSFRfU1RST0tFV0lEVEggPSAxO1xyXG5cclxuICAgIC8v5L+u5pS5bXhHdWlkZem7mOiupOmFjee9rlxyXG4gICAgbXhDb25zdGFudHMuR1VJREVfQ09MT1IgPSAnIzAwODhjZic7XHJcbiAgICBteEd1aWRlLnByb3RvdHlwZS5jcmVhdGVHdWlkZVNoYXBlID0gKGhvcml6b250YWwpID0+IG5ldyBteFBvbHlsaW5lKFtdLCBteENvbnN0YW50cy5HVUlERV9DT0xPUiwgbXhDb25zdGFudHMuR1VJREVfU1RST0tFV0lEVEgpO1xyXG5cclxuICAgIC8v6K6+572u6IqC54K56YCJ5Lit57q/5qGG5a695bqmXHJcbiAgICBteENvbnN0YW50cy5WRVJURVhfU0VMRUNUSU9OX1NUUk9LRVdJRFRIID0gMTtcclxuICAgIG14Q29uc3RhbnRzLlZFUlRFWF9TRUxFQ1RJT05fQ09MT1IgPSAnIzNFOERGRic7XHJcbiAgICBteENvbnN0YW50cy5WRVJURVhfU0VMRUNUSU9OX0RBU0hFRCA9IGZhbHNlO1xyXG5cclxuICAgIC8v5L+u5pS557q/5a69XHJcbiAgICBteENvbm5lY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5nZXRFZGdlV2lkdGggPSAodmFsaWQ6IGFueSkgPT4gMTtcclxuICAgIG14Q29uc3RhbnRzLlZBTElEX0NPTE9SID0gJyMwMENENjYnO1xyXG5cclxuICAgIC8v5Yib5bu6bXhHcmFwaFxyXG4gICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgodGhpcy5teENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgZ3JhcGguZ3JhcGhPcHRpb25zID0gdGhpcy5ncmFwaE9wdGlvbnM7XHJcbiAgICBncmFwaC5ncmlkT3B0aW9ucyA9IHRoaXMuZ3JpZE9wdGlvbnM7XHJcbiAgICAvL+a3u+WKoOiHquWumuS5ieebkeWQrOWZqFxyXG4gICAgdGhpcy5hZGRMaXN0ZW5lcihncmFwaCk7XHJcbiAgICByZXR1cm4gZ3JhcGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlTGF5b3V0KGdyYXBoOiBHcmFwaCkge1xyXG4gICAgY29uc3QgdXBMYXlvdXQgPSBuZXcgUmV2ZXJ0Q29tcGFjdFRyZWVMYXlvdXQoZ3JhcGgsIHRydWUpO1xyXG4gICAgdXBMYXlvdXQubGV2ZWxEaXN0YW5jZSA9IHRoaXMuaHNwYWNlO1xyXG4gICAgdXBMYXlvdXQuZWRnZVJvdXRpbmcgPSBmYWxzZTtcclxuICAgIHVwTGF5b3V0LnJlc2V0RWRnZXMgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLnVwTGF5b3V0ID0gdXBMYXlvdXQ7XHJcblxyXG4gICAgY29uc3QgZG93bkxheW91dCA9IG5ldyBDb21wYWN0VHJlZUxheW91dChncmFwaCwgdHJ1ZSk7XHJcbiAgICBkb3duTGF5b3V0LmxldmVsRGlzdGFuY2UgPSB0aGlzLmhzcGFjZTtcclxuICAgIGRvd25MYXlvdXQuZWRnZVJvdXRpbmcgPSBmYWxzZTtcclxuICAgIGRvd25MYXlvdXQucmVzZXRFZGdlcyA9IHRydWU7XHJcblxyXG4gICAgdGhpcy5kb3duTGF5b3V0ID0gZG93bkxheW91dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRMaXN0ZW5lcihncmFwaDogYW55KSB7XHJcbiAgICBjb25zdCBhdXRvQWRqdXN0SGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmdyYXBoICE9IG51bGwpIHtcclxuICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMCk7XHJcbiAgICB9O1xyXG4gICAgbXhFdmVudC5hZGRMaXN0ZW5lcih3aW5kb3csICdyZXNpemUnLCBhdXRvQWRqdXN0SGFuZGxlcik7XHJcblxyXG4gICAgY29uc3Qgd2hlZWxSZXNpemVIYW5kbGVyID0gKGV2dDogV2hlZWxFdmVudCwgdXA6IGJvb2xlYW4pID0+IHtcclxuICAgICAgLy8gd2luZG935LiLQ3RybOaMieS4i++8jE1hY+S4i0NvbW1hbmTmjInkuItcclxuICAgICAgaWYgKG14RXZlbnQuaXNDb250cm9sRG93bihldnQpIHx8IChteENsaWVudC5JU19NQUMgJiYgZXZ0Lm1ldGFLZXkpKSB7XHJcbiAgICAgICAgaWYgKHVwKSB7XHJcbiAgICAgICAgICB0aGlzLnpvb21JbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnpvb21PdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbXhFdmVudC5jb25zdW1lKGV2dCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIG14RXZlbnQuYWRkTW91c2VXaGVlbExpc3RlbmVyKHdoZWVsUmVzaXplSGFuZGxlciwgdGhpcy5teENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgIGdyYXBoLmdldFNlbGVjdGlvbk1vZGVsKCkuYWRkTGlzdGVuZXIobXhFdmVudC5DSEFOR0UsIChzZW5kZXIsIGV2dCkgPT4ge1xyXG4gICAgICBpZiAoIShzZW5kZXIgaW5zdGFuY2VvZiBteEdyYXBoU2VsZWN0aW9uTW9kZWwpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBzZWxlY3Rpb25Nb2RlbCA9IHNlbmRlcjtcclxuICAgICAgLy/oi6XmnKrpgInkuK3oioLngrnmiJbogIXpgInkuK3oioLngrnmlbDkuI3kuLoxXHJcbiAgICAgIGlmIChzZWxlY3Rpb25Nb2RlbC5jZWxscyA9PSBudWxsIHx8IHNlbGVjdGlvbk1vZGVsLmNlbGxzLmxlbmd0aCAhPSAxKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RFdmVudEVtaXR0ZXIuZW1pdChudWxsKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHNlbGVjdGVkQ2VsbCA9IHNlbGVjdGlvbk1vZGVsLmNlbGxzWzBdO1xyXG4gICAgICAvL+mAieS4reeahOaYr+i+uVxyXG4gICAgICBpZiAoc2VsZWN0ZWRDZWxsLmVkZ2UgfHwgIXNlbGVjdGVkQ2VsbC52ZXJ0ZXgpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc2VsZWN0RXZlbnRFbWl0dGVyLmVtaXQoc2VsZWN0ZWRDZWxsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGdyYXBoLmFkZExpc3RlbmVyKEV2ZW50cy5DTElDS19GSVJTVF9TVU1NQVJZLCAoc2VyZGVyLCBldnQ6IE14R3JhcGhOUy5teEV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGNlbGwgPSBldnQuZ2V0UHJvcGVydHkoXCJjZWxsXCIpO1xyXG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlRXZlbnRFbWl0dGVyLmVtaXQoe1xyXG4gICAgICAgIHR5cGU6IEV2ZW50cy5DTElDS19GSVJTVF9TVU1NQVJZLFxyXG4gICAgICAgIGRhdGE6IGNlbGxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYWludEdyYXBoKGdyYXBoOiBHcmFwaCkge1xyXG4gICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgdGhpcy5lbnRyeSA9IHRoaXMucGFpbnRFbnRyeShncmFwaCk7XHJcbiAgICB0aGlzLmFmdGVyUGFpbnRHcmFwaCh0aGlzLmdyYXBoLCB0aGlzLmVudHJ5KTtcclxuICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWZ0ZXJQYWludEdyYXBoKGdyYXBoOiBHcmFwaCwgZW50cnk6IEJpbGxDZWxsKSB7XHJcbiAgICBpZiAoZW50cnkgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6buY6K6k6YCJ5Lit5YWl5Y+j6IqC54K5XHJcbiAgICB0aGlzLmJpbGxUcmFja2VyQXJncy5ncmlkT3B0aW9ucy5zaG93RW50cnlEYXRhICYmIGdyYXBoLnNldFNlbGVjdGlvbkNlbGwodGhpcy5lbnRyeSk7XHJcblxyXG4gICAgLy8g6buY6K6k5bGV56S65LiA5bGC77yfXHJcbiAgICBjb25zdCBjYW5UcmFja2luZ1Jlc3VsdCA9IHRoaXMuYmlsbFRyYWNrZXJBcmdzLmNhblRyYWNraW5nUmVzdWx0O1xyXG4gICAgaWYgKHRoaXMuYmlsbFRyYWNrZXJBcmdzLmdyYXBoT3B0aW9ucy5zaG93RG93bkJpbGxzID09IHRydWUpIHtcclxuICAgICAgY2FuVHJhY2tpbmdSZXN1bHQuY2FuRG93blRyYWNraW5nICYmIHRoaXMuZW50cnkuZG93bkNlbGxPdmVybGF5ICYmIHRoaXMuZW50cnkuZG93bkNlbGxPdmVybGF5LmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChteEV2ZW50LkNMSUNLKSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5iaWxsVHJhY2tlckFyZ3MuZ3JhcGhPcHRpb25zLnNob3dVcEJpbGxzID09IHRydWUpIHtcclxuICAgICAgY2FuVHJhY2tpbmdSZXN1bHQuY2FuVXBUcmFja2luZyAmJiB0aGlzLmVudHJ5LnVwQ2VsbE92ZXJsYXkgJiYgdGhpcy5lbnRyeS51cENlbGxPdmVybGF5LmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChteEV2ZW50LkNMSUNLKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGFpbnRFbnRyeShncmFwaDogR3JhcGgpIHtcclxuICAgIGxldCBlbnRyeTogQmlsbENlbGwgPSBudWxsO1xyXG5cclxuICAgIGlmICh0aGlzLmJpbGxUcmFja2VyQXJncyA9PSBudWxsIHx8IHRoaXMuYmlsbFRyYWNrZXJBcmdzLmNhblRyYWNraW5nUmVzdWx0ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIGVudHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhblRyYWNraW5nUmVzdWx0ID0gdGhpcy5iaWxsVHJhY2tlckFyZ3MuY2FuVHJhY2tpbmdSZXN1bHQ7XHJcbiAgICBjb25zdCBpbmZvID0gdGhpcy5kYXRhU2VydmljZS5idWlsZEVudHJ5QmlsbEluZm8oY2FuVHJhY2tpbmdSZXN1bHQpO1xyXG4gICAgY29uc3QgZGF0YUluZm8gPSBpbmZvLmJpbGxEYXRhSW5mb3NbMF07XHJcbiAgICBsZXQgYnRzOiBCaWxsVHJhY2tpbmdTZXR0aW5ncyA9IG5ldyBCaWxsVHJhY2tpbmdTZXR0aW5ncygpO1xyXG4gICAgYnRzLkxvYWRGcm9tSnNvbihjYW5UcmFja2luZ1Jlc3VsdC5iaWxsVHJhY2tpbmdTZXR0aW5ncyk7XHJcblxyXG4gICAgY29uc3QgcGFyZW50ID0gZ3JhcGguZ2V0RGVmYXVsdFBhcmVudCgpO1xyXG5cclxuICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCB4MCA9IDA7XHJcbiAgICAgIGxldCB5MCA9IDA7XHJcblxyXG4gICAgICBsZXQgYnRzOiBCaWxsVHJhY2tpbmdTZXR0aW5ncyA9IG5ldyBCaWxsVHJhY2tpbmdTZXR0aW5ncygpO1xyXG4gICAgICBpZiAoaW5mbyAmJiBpbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKSB7XHJcbiAgICAgICAgYnRzLkxvYWRGcm9tSnNvbihpbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgY3VzdG9tU3R5bGUgPSBcIlwiO1xyXG4gICAgICBlbnRyeSA9IGdyYXBoLmluc2VydEJpbGxDZWxsKHBhcmVudCwgbnVsbCwgZGF0YUluZm8sIGluZm8sIHRydWUsIHgwLCB5MCwgdGhpcy5ub2RlV2lkdGgsIHRoaXMubm9kZUhlaWdodCwgYGJpbGxOb2RlO2JpbGxOb2RlRW50cnk7JHtjdXN0b21TdHlsZX1gKTtcclxuXHJcbiAgICAgIGxldCBnZW9tZXRyeSA9IGdyYXBoLmdldE1vZGVsKCkuZ2V0R2VvbWV0cnkoZW50cnkpO1xyXG4gICAgICBsZXQgc2l6ZSA9IGdyYXBoLmdldFByZWZlcnJlZFNpemVGb3JDZWxsKGVudHJ5KTtcclxuXHJcbiAgICAgIHRoaXMuZW50cnlDZWxsRGF0YSA9IG5ldyBFbnRyeUNlbGxEYXRhKCk7XHJcbiAgICAgIHRoaXMuc2V0Q2VsbERhdGEodGhpcy5lbnRyeUNlbGxEYXRhLCBlbnRyeSk7XHJcbiAgICAgIHRoaXMuZW50cnlDZWxsRGF0YS5jYW5UcmFja2luZ1Jlc3VsdCA9IGNhblRyYWNraW5nUmVzdWx0O1xyXG4gICAgICBlbnRyeS5kYXRhID0gdGhpcy5lbnRyeUNlbGxEYXRhO1xyXG5cclxuICAgICAgLy8g5re75Yqg5LiK5p+l5LiL5p+l5oyJ6ZKuXHJcbiAgICAgIGlmIChjYW5UcmFja2luZ1Jlc3VsdC5jYW5Eb3duVHJhY2tpbmcpIHtcclxuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5hZGREb3duT3ZlcmxheShncmFwaCwgZW50cnksIHRydWUpO1xyXG4gICAgICAgIGVudHJ5LmRvd25DZWxsT3ZlcmxheSA9IG92ZXJsYXk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNhblRyYWNraW5nUmVzdWx0LmNhblVwVHJhY2tpbmcpIHtcclxuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5hZGRVcE92ZXJsYXkoZ3JhcGgsIGVudHJ5LCB0cnVlKTtcclxuICAgICAgICBlbnRyeS51cENlbGxPdmVybGF5ID0gb3ZlcmxheTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy51cFBhcmVudCA9IHBhcmVudC5jbG9uZSgpO1xyXG4gICAgICB0aGlzLmRvd25QYXJlbnQgPSBwYXJlbnQuY2xvbmUoKTtcclxuICAgICAgZ3JhcGguYWRkQ2VsbHMoW3RoaXMudXBQYXJlbnQsIHRoaXMuZG93blBhcmVudF0sIHBhcmVudCk7XHJcbiAgICB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZW50cnk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkVXBPdmVybGF5KGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIHJlc2V0VmlldzogYm9vbGVhbiA9IGZhbHNlKTogYW55IHtcclxuICAgIGxldCB1cFNlYXJjaCA9IG5ldyBDZWxsT3ZlcmxheSh0aGlzLnVwU2VhcmNoSW1hZ2UsIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJ1cFNlYXJjaFwiKSwgbXhDb25zdGFudHMuQUxJR05fTEVGVCwgbXhDb25zdGFudHMuQUxJR05fTUlERExFLCB0aGlzLnVwU2VhcmNoT2Zmc2V0LCBcImhhbmRcIik7XHJcbiAgICB1cFNlYXJjaC5zdGF0ZSA9IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoO1xyXG4gICAgY29uc3QgdXBTZWFyY2hIYW5kbGVyID0gKHNlbmRlciwgZXZ0KSA9PiB7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgICAgdGhpcy5hZGRVcEFzc29DZWxsKGdyYXBoLCBjZWxsLCByZXNldFZpZXcpO1xyXG4gICAgICB1cFNlYXJjaC5yZW1vdmVMaXN0ZW5lcih1cFNlYXJjaEhhbmRsZXIpO1xyXG4gICAgICB1cFNlYXJjaC50b29sdGlwID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImZvbGRlclwiKTtcclxuICAgICAgdXBTZWFyY2guaW1hZ2UgPSB0aGlzLnVwRm9sZGVySW1hZ2U7XHJcbiAgICAgIHVwU2VhcmNoLnN0YXRlID0gQ2VsbE92ZXJsYXlTdGF0ZS5Gb2xkO1xyXG4gICAgICB1cFNlYXJjaC5hZGRMaXN0ZW5lcihteEV2ZW50LkNMSUNLLCB1cEZvbGRlckhhbmRsZXIpO1xyXG4gICAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcbiAgICAgIGdyYXBoLmFkZENlbGxPdmVybGF5KGNlbGwsIHVwU2VhcmNoKTtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICAgIH07XHJcbiAgICBjb25zdCB1cEZvbGRlckhhbmRsZXIgPSAoc2VuZGVyLCBldnQpID0+IHtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgICB0aGlzLnJlbW92ZUFzc29DZWxsKGdyYXBoLCBjZWxsLCBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCk7XHJcbiAgICAgIHVwU2VhcmNoLnJlbW92ZUxpc3RlbmVyKHVwRm9sZGVySGFuZGxlcik7XHJcbiAgICAgIHVwU2VhcmNoLnRvb2x0aXAgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwidXBTZWFyY2hcIik7XHJcbiAgICAgIHVwU2VhcmNoLmltYWdlID0gdGhpcy51cFNlYXJjaEltYWdlO1xyXG4gICAgICB1cFNlYXJjaC5zdGF0ZSA9IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoO1xyXG4gICAgICB1cFNlYXJjaC5hZGRMaXN0ZW5lcihteEV2ZW50LkNMSUNLLCB1cFNlYXJjaEhhbmRsZXIpO1xyXG4gICAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcbiAgICAgIGdyYXBoLmFkZENlbGxPdmVybGF5KGNlbGwsIHVwU2VhcmNoKTtcclxuICAgICAgZ3JhcGgubW9kZWwuZW5kVXBkYXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHVwU2VhcmNoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0xJQ0ssIHVwU2VhcmNoSGFuZGxlcik7XHJcbiAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcbiAgICBncmFwaC5hZGRDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcblxyXG4gICAgcmV0dXJuIHVwU2VhcmNoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZERvd25PdmVybGF5KGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIHJlc2V0VmlldzogYm9vbGVhbiA9IGZhbHNlKTogYW55IHtcclxuICAgIGxldCBkb3duU2VhcmNoID0gbmV3IENlbGxPdmVybGF5KHRoaXMuZG93blNlYXJjaEltYWdlLCB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiZG93blNlYXJjaFwiKSwgbXhDb25zdGFudHMuQUxJR05fUklHSFQsIG14Q29uc3RhbnRzLkFMSUdOX01JRERMRSwgdGhpcy5kb3duU2VhcmNoT2Zmc2V0LCBcImhhbmRcIik7XHJcbiAgICBkb3duU2VhcmNoLnN0YXRlID0gQ2VsbE92ZXJsYXlTdGF0ZS5TZWFyY2g7XHJcbiAgICBjb25zdCBkb3duU2VhcmNoSGFuZGxlciA9IChzZW5kZXIsIGV2dCkgPT4ge1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICAgIHRoaXMuYWRkRG93bkFzc29DZWxsKGdyYXBoLCBjZWxsLCByZXNldFZpZXcpO1xyXG4gICAgICBkb3duU2VhcmNoLmltYWdlID0gdGhpcy5kb3duRm9sZGVySW1hZ2U7XHJcbiAgICAgIGRvd25TZWFyY2gudG9vbHRpcCA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJmb2xkZXJcIik7XHJcbiAgICAgIGRvd25TZWFyY2guc3RhdGUgPSBDZWxsT3ZlcmxheVN0YXRlLkZvbGQ7XHJcbiAgICAgIGRvd25TZWFyY2gucmVtb3ZlTGlzdGVuZXIoZG93blNlYXJjaEhhbmRsZXIpO1xyXG4gICAgICBkb3duU2VhcmNoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0xJQ0ssIGRvd25Gb2xkZXJIYW5kbGVyKTtcclxuICAgICAgZ3JhcGgucmVtb3ZlQ2VsbE92ZXJsYXkoY2VsbCwgZG93blNlYXJjaCk7XHJcbiAgICAgIGdyYXBoLmFkZENlbGxPdmVybGF5KGNlbGwsIGRvd25TZWFyY2gpO1xyXG4gICAgICAvLyBncmFwaC5yZWZyZXNoKGNlbGwpO1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBkb3duRm9sZGVySGFuZGxlciA9IChzZW5kZXIsIGV2dCkgPT4ge1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICAgIHRoaXMucmVtb3ZlQXNzb0NlbGwoZ3JhcGgsIGNlbGwsIEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24pO1xyXG4gICAgICBkb3duU2VhcmNoLmltYWdlID0gdGhpcy5kb3duU2VhcmNoSW1hZ2U7XHJcbiAgICAgIGRvd25TZWFyY2gudG9vbHRpcCA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJkb3duU2VhcmNoXCIpO1xyXG4gICAgICBkb3duU2VhcmNoLnN0YXRlID0gQ2VsbE92ZXJsYXlTdGF0ZS5TZWFyY2g7XHJcbiAgICAgIGRvd25TZWFyY2gucmVtb3ZlTGlzdGVuZXIoZG93bkZvbGRlckhhbmRsZXIpO1xyXG4gICAgICBkb3duU2VhcmNoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0xJQ0ssIGRvd25TZWFyY2hIYW5kbGVyKTtcclxuICAgICAgZ3JhcGgucmVtb3ZlQ2VsbE92ZXJsYXkoY2VsbCwgZG93blNlYXJjaCk7XHJcbiAgICAgIGdyYXBoLmFkZENlbGxPdmVybGF5KGNlbGwsIGRvd25TZWFyY2gpO1xyXG4gICAgICAvLyBncmFwaC5yZWZyZXNoKGNlbGwpO1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBkb3duU2VhcmNoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0xJQ0ssIGRvd25TZWFyY2hIYW5kbGVyKTtcclxuICAgIGdyYXBoLnJlbW92ZUNlbGxPdmVybGF5KGNlbGwsIGRvd25TZWFyY2gpO1xyXG4gICAgZ3JhcGguYWRkQ2VsbE92ZXJsYXkoY2VsbCwgZG93blNlYXJjaCk7XHJcblxyXG4gICAgcmV0dXJuIGRvd25TZWFyY2g7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkVXBBc3NvQ2VsbChncmFwaDogR3JhcGgsIGNlbGw6IEJpbGxDZWxsLCByZXNldFZpZXc6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgY29uc3QgYXJncyA9IHRoaXMuZGF0YVNlcnZpY2UuYnVpbGRHZXRVcEJpbGxzSW5mb0FyZ3MoY2VsbCk7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nLnNob3coeyBtZXNzYWdlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwibG9hZGluZ1wiKSB9KTtcclxuICAgIHRoaXMubnVtQ2VsbHNBZGRpbmdSZXErKztcclxuICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0VXBCaWxsc0luZm8oYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAoaW5mb3M6IFVwQmlsbEluZm9SZXN1bHRbXSkgPT4ge1xyXG4gICAgICAgIGxldCBwYXJlbnQgPSBncmFwaC5nZXREZWZhdWx0UGFyZW50KCk7XHJcblxyXG4gICAgICAgIGxldCBuZXdDZWxscyA9IFtdO1xyXG4gICAgICAgIC8vIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZm9yIChsZXQgaW5mbyBvZiBpbmZvcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBkYXRhSW5mbyBvZiBpbmZvLmJpbGxEYXRhSW5mb3MpIHtcclxuICAgICAgICAgICAgICBsZXQgYmlsbENlbGwgPSBudWxsO1xyXG4gICAgICAgICAgICAgIGxldCBidHM6IEJpbGxUcmFja2luZ1NldHRpbmdzID0gbmV3IEJpbGxUcmFja2luZ1NldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgaWYgKGluZm8gJiYgaW5mby5iaWxsVHJhY2tpbmdTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgYnRzLkxvYWRGcm9tSnNvbihpbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGxldCBjdXN0b21TdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgYmlsbENlbGwgPSBncmFwaC5pbnNlcnRCaWxsQ2VsbCh0aGlzLnVwUGFyZW50LCBudWxsLCBkYXRhSW5mbywgaW5mbywgZmFsc2UsIGNlbGwuZ2VvbWV0cnkueCAtIHRoaXMuaHNwYWNlLCBjZWxsLmdlb21ldHJ5LnksIHRoaXMubm9kZVdpZHRoLCB0aGlzLm5vZGVIZWlnaHQsIGBiaWxsTm9kZTske2N1c3RvbVN0eWxlfWApO1xyXG5cclxuICAgICAgICAgICAgICBuZXdDZWxscy5wdXNoKGJpbGxDZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMuY2FsQ2VsbHNQb3NpdGlvbihncmFwaCwgY2VsbCwgbmV3Q2VsbHMsIEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwKTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBuYyBvZiBuZXdDZWxscykge1xyXG4gICAgICAgICAgICBpZiAobmMuYmlsbERhdGFJbmZvLmNhbkNvbnRpbnVlVHJhY2tpbmcpIHtcclxuICAgICAgICAgICAgICBjb25zdCBvbCA9IHRoaXMuYWRkVXBPdmVybGF5KGdyYXBoLCBuYyk7XHJcbiAgICAgICAgICAgICAgbmMudXBDZWxsT3ZlcmxheSA9IG9sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdyYXBoLmluc2VydEVkZ2UocGFyZW50LCBudWxsLCAnJywgbmMsIGNlbGwsIFwiYmlsbEFzc29jaWF0aW9uO1wiKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCBvbGRHZW8gPSB0aGlzLmVudHJ5LmdldEdlb21ldHJ5KCkuY2xvbmUoKTtcclxuICAgICAgICAgIHRoaXMudXBMYXlvdXQuZXhlY3V0ZSh0aGlzLnVwUGFyZW50LCB0aGlzLmVudHJ5KTtcclxuICAgICAgICAgIGNvbnN0IG5ld0dlbyA9IHRoaXMuZW50cnkuZ2V0R2VvbWV0cnkoKS5jbG9uZSgpO1xyXG4gICAgICAgICAgY29uc3QgZHggPSBvbGRHZW8ueCAtIG5ld0dlby54O1xyXG4gICAgICAgICAgY29uc3QgZHkgPSBvbGRHZW8ueSAtIG5ld0dlby55O1xyXG5cclxuICAgICAgICAgIHRoaXMucmVzdG9yZUVudHJ5UG9zaXRpb24oZ3JhcGgsIHRoaXMuZW50cnksIGR4LCBkeSk7XHJcblxyXG4gICAgICAgICAgY29uc3QgY2VsbERhdGEgPSBjZWxsLmRhdGEgYXMgVXBDZWxsRGF0YTtcclxuICAgICAgICAgIGNlbGxEYXRhLnVwcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgZm9yIChsZXQgbmMgb2YgbmV3Q2VsbHMpIHtcclxuICAgICAgICAgICAgY29uc3QgY2QgPSBuZXcgVXBDZWxsRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxEYXRhKGNkLCBuYyk7XHJcbiAgICAgICAgICAgIG5jLmRhdGEgPSBjZDtcclxuXHJcbiAgICAgICAgICAgIGNkLmRvd24gPSBjZWxsRGF0YTtcclxuICAgICAgICAgICAgY2VsbERhdGEudXBzLnB1c2goY2QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOmHjee7mOeUu+W4g+Wkp+Wwj1xyXG4gICAgICAgIHJlc2V0VmlldyAmJiBncmFwaC5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QoRXZlbnRzLlJFU0VUX0dSQVBIX1ZJRVcpKTtcclxuICAgICAgICB0aGlzLm51bUNlbGxzQWRkaW5nUmVxLS07XHJcbiAgICAgICAgLy8g6Ieq5a6a5LmJ5Y2V5o2u6IqC54K55o+S5YWl5bm256e75L2N5ZCO5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5ncmFwaC5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QoRXZlbnRzLkJJTExfQ0VMTFNfQURERURfQU5EX01PVkVELCAnY2VsbHMnLCBuZXdDZWxscywgJ3BhcmVudCcsIHRoaXMudXBQYXJlbnQpKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgfSxcclxuICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMubnVtQ2VsbHNBZGRpbmdSZXEtLTtcclxuICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkRG93bkFzc29DZWxsKGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIHJlc2V0VmlldzogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICBjb25zdCBhcmdzID0gdGhpcy5kYXRhU2VydmljZS5idWlsZEdldERvd25CaWxsc0luZm9BcmdzKGNlbGwpO1xyXG5cclxuICAgIHRoaXMubG9hZGluZy5zaG93KHsgbWVzc2FnZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImxvYWRpbmdcIikgfSk7XHJcbiAgICB0aGlzLm51bUNlbGxzQWRkaW5nUmVxKys7XHJcbiAgICB0aGlzLmRhdGFTZXJ2aWNlLmdldERvd25CaWxsc0luZm8oYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAoaW5mb3M6IERvd25CaWxsSW5mb1Jlc3VsdFtdKSA9PiB7XHJcbiAgICAgICAgbGV0IG1vZGVsID0gZ3JhcGguZ2V0TW9kZWwoKTtcclxuICAgICAgICBsZXQgcGFyZW50ID0gZ3JhcGguZ2V0RGVmYXVsdFBhcmVudCgpO1xyXG5cclxuICAgICAgICBsZXQgbmV3Q2VsbHMgPSBbXTtcclxuICAgICAgICAvLyBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGZvciAobGV0IGluZm8gb2YgaW5mb3MpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgZGF0YUluZm8gb2YgaW5mby5iaWxsRGF0YUluZm9zKSB7XHJcbiAgICAgICAgICAgICAgbGV0IGJpbGxDZWxsID0gbnVsbDtcclxuICAgICAgICAgICAgICBsZXQgYnRzOiBCaWxsVHJhY2tpbmdTZXR0aW5ncyA9IG5ldyBCaWxsVHJhY2tpbmdTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgIGlmIChpbmZvICYmIGluZm8uYmlsbFRyYWNraW5nU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGJ0cy5Mb2FkRnJvbUpzb24oaW5mby5iaWxsVHJhY2tpbmdTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBsZXQgY3VzdG9tU3R5bGUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgIGJpbGxDZWxsID0gZ3JhcGguaW5zZXJ0QmlsbENlbGwodGhpcy5kb3duUGFyZW50LCBudWxsLCBkYXRhSW5mbywgaW5mbywgZmFsc2UsIGNlbGwuZ2VvbWV0cnkueCArIHRoaXMuaHNwYWNlLCBjZWxsLmdlb21ldHJ5LnksIHRoaXMubm9kZVdpZHRoLCB0aGlzLm5vZGVIZWlnaHQsIGBiaWxsTm9kZTske2N1c3RvbVN0eWxlfWApO1xyXG5cclxuICAgICAgICAgICAgICBuZXdDZWxscy5wdXNoKGJpbGxDZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5jYWxDZWxsc1Bvc2l0aW9uKGdyYXBoLCBjZWxsLCBuZXdDZWxscywgQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93bik7XHJcblxyXG4gICAgICAgICAgZm9yIChsZXQgbmMgb2YgbmV3Q2VsbHMpIHtcclxuICAgICAgICAgICAgaWYgKG5jLmJpbGxEYXRhSW5mby5jYW5Db250aW51ZVRyYWNraW5nKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgb2wgPSB0aGlzLmFkZERvd25PdmVybGF5KGdyYXBoLCBuYyk7XHJcbiAgICAgICAgICAgICAgbmMuZG93bkNlbGxPdmVybGF5ID0gb2w7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3JhcGguaW5zZXJ0RWRnZShwYXJlbnQsIG51bGwsICcnLCBjZWxsLCBuYywgXCJiaWxsQXNzb2NpYXRpb247XCIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IG9sZEdlbyA9IHRoaXMuZW50cnkuZ2V0R2VvbWV0cnkoKS5jbG9uZSgpO1xyXG4gICAgICAgICAgdGhpcy5kb3duTGF5b3V0LmV4ZWN1dGUodGhpcy5kb3duUGFyZW50LCB0aGlzLmVudHJ5KTtcclxuICAgICAgICAgIGNvbnN0IG5ld0dlbyA9IHRoaXMuZW50cnkuZ2V0R2VvbWV0cnkoKS5jbG9uZSgpO1xyXG4gICAgICAgICAgY29uc3QgZHggPSBvbGRHZW8ueCAtIG5ld0dlby54O1xyXG4gICAgICAgICAgY29uc3QgZHkgPSBvbGRHZW8ueSAtIG5ld0dlby55O1xyXG5cclxuICAgICAgICAgIHRoaXMucmVzdG9yZUVudHJ5UG9zaXRpb24oZ3JhcGgsIHRoaXMuZW50cnksIGR4LCBkeSk7XHJcblxyXG4gICAgICAgICAgY29uc3QgY2VsbERhdGEgPSBjZWxsLmRhdGEgYXMgRG93bkNlbGxEYXRhO1xyXG4gICAgICAgICAgY2VsbERhdGEuZG93bnMubGVuZ3RoID0gMDtcclxuICAgICAgICAgIGZvciAobGV0IG5jIG9mIG5ld0NlbGxzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNkID0gbmV3IERvd25DZWxsRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxEYXRhKGNkLCBuYyk7XHJcbiAgICAgICAgICAgIG5jLmRhdGEgPSBjZDtcclxuXHJcbiAgICAgICAgICAgIGNkLnVwID0gY2VsbERhdGE7XHJcbiAgICAgICAgICAgIGNlbGxEYXRhLmRvd25zLnB1c2goY2QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOmHjee7mOeUu+W4g+Wkp+Wwj1xyXG4gICAgICAgIHJlc2V0VmlldyAmJiBncmFwaC5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QoRXZlbnRzLlJFU0VUX0dSQVBIX1ZJRVcpKTtcclxuICAgICAgICB0aGlzLm51bUNlbGxzQWRkaW5nUmVxLS07XHJcbiAgICAgICAgLy8g6Ieq5a6a5LmJ5Y2V5o2u6IqC54K55o+S5YWl5bm256e75L2N5ZCO5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5ncmFwaC5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QoRXZlbnRzLkJJTExfQ0VMTFNfQURERURfQU5EX01PVkVELCAnY2VsbHMnLCBuZXdDZWxscywgJ3BhcmVudCcsIHRoaXMuZG93blBhcmVudCkpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpO1xyXG4gICAgICB9LFxyXG4gICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5udW1DZWxsc0FkZGluZ1JlcS0tO1xyXG4gICAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXIuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW1vdmVBc3NvQ2VsbChncmFwaDogR3JhcGgsIGNlbGw6IEJpbGxDZWxsLCBkaXI6IEJpbGxUcmFja2VyRGlyZWN0aW9uKSB7XHJcbiAgICBjb25zdCBtb2RlbCA9IGdyYXBoLmdldE1vZGVsKCk7XHJcbiAgICBjb25zdCBwYXJlbnQgPSBncmFwaC5nZXREZWZhdWx0UGFyZW50KCk7XHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgYXNzb0NlbGxzOiBCaWxsQ2VsbFtdID0gW107XHJcbiAgICAgIGlmIChkaXIgPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93bikge1xyXG4gICAgICAgIGxldCBlZGdlcyA9IG1vZGVsLmdldE91dGdvaW5nRWRnZXMoY2VsbCk7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIHdoaWxlIChlZGdlcyAmJiBlZGdlcy5sZW5ndGggPiAwICYmIGkgPCBlZGdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmIChlZGdlc1tpXS50YXJnZXQgJiYgZWRnZXNbaV0udGFyZ2V0ICE9IHRoaXMuZW50cnkpIHtcclxuICAgICAgICAgICAgYXNzb0NlbGxzLnB1c2goZWRnZXNbaV0udGFyZ2V0IGFzIEJpbGxDZWxsKTtcclxuICAgICAgICAgICAgZWRnZXMucHVzaCguLi5tb2RlbC5nZXRPdXRnb2luZ0VkZ2VzKGVkZ2VzW2ldLnRhcmdldCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChkaXIgPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXApIHtcclxuICAgICAgICBsZXQgZWRnZXMgPSBtb2RlbC5nZXRJbmNvbWluZ0VkZ2VzKGNlbGwpO1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICB3aGlsZSAoZWRnZXMgJiYgZWRnZXMubGVuZ3RoID4gMCAmJiBpIDwgZWRnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoZWRnZXNbaV0uc291cmNlICYmIGVkZ2VzW2ldLnNvdXJjZSAhPSB0aGlzLmVudHJ5KSB7XHJcbiAgICAgICAgICAgIGFzc29DZWxscy5wdXNoKGVkZ2VzW2ldLnNvdXJjZSBhcyBCaWxsQ2VsbCk7XHJcbiAgICAgICAgICAgIGVkZ2VzLnB1c2goLi4ubW9kZWwuZ2V0SW5jb21pbmdFZGdlcyhlZGdlc1tpXS5zb3VyY2UpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRpciA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duKSB7XHJcbiAgICAgICAgKGNlbGwuZGF0YSBhcyBEb3duQ2VsbERhdGEpLmRvd25zLmxlbmd0aCA9IDA7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGlyID09IEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwKSB7XHJcbiAgICAgICAgKGNlbGwuZGF0YSBhcyBVcENlbGxEYXRhKS51cHMubGVuZ3RoID0gMDtcclxuICAgICAgfVxyXG4gICAgICBncmFwaC5yZW1vdmVDZWxscyhhc3NvQ2VsbHMpO1xyXG5cclxuICAgICAgY29uc3Qgb2xkR2VvID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgIHRoaXMudXBMYXlvdXQuZXhlY3V0ZSh0aGlzLnVwUGFyZW50LCB0aGlzLmVudHJ5KTtcclxuICAgICAgY29uc3QgbmV3R2VvID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgIGNvbnN0IGR4ID0gb2xkR2VvLnggLSBuZXdHZW8ueDtcclxuICAgICAgY29uc3QgZHkgPSBvbGRHZW8ueSAtIG5ld0dlby55O1xyXG4gICAgICB0aGlzLnJlc3RvcmVFbnRyeVBvc2l0aW9uKGdyYXBoLCB0aGlzLmVudHJ5LCBkeCwgZHkpO1xyXG5cclxuICAgICAgY29uc3Qgb2xkR2VvMiA9IHRoaXMuZW50cnkuZ2V0R2VvbWV0cnkoKS5jbG9uZSgpO1xyXG4gICAgICB0aGlzLmRvd25MYXlvdXQuZXhlY3V0ZSh0aGlzLmRvd25QYXJlbnQsIHRoaXMuZW50cnkpO1xyXG4gICAgICBjb25zdCBuZXdHZW8yID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgIGNvbnN0IGR4MiA9IG9sZEdlbzIueCAtIG5ld0dlbzIueDtcclxuICAgICAgY29uc3QgZHkyID0gb2xkR2VvMi55IC0gbmV3R2VvMi55O1xyXG4gICAgICB0aGlzLnJlc3RvcmVFbnRyeVBvc2l0aW9uKGdyYXBoLCB0aGlzLmVudHJ5LCBkeDIsIGR5Mik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc3RvcmVFbnRyeVBvc2l0aW9uKGdyYXBoOiBHcmFwaCwgZW50cnk6IEJpbGxDZWxsLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKSB7XHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgdmVydGljZXM6IE14R3JhcGhOUy5teENlbGxbXSA9IG51bGw7XHJcbiAgICAgIHZlcnRpY2VzID0gW2VudHJ5LCAuLi5ncmFwaC5nZXRDaGlsZENlbGxzKHRoaXMudXBQYXJlbnQsIHRydWUsIGZhbHNlKSwgLi4uZ3JhcGguZ2V0Q2hpbGRDZWxscyh0aGlzLmRvd25QYXJlbnQsIHRydWUsIGZhbHNlKV07XHJcbiAgICAgIGdyYXBoLm1vdmVDZWxscyh2ZXJ0aWNlcywgZHgsIGR5KTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2FsQ2VsbHNQb3NpdGlvbihncmFwaDogR3JhcGgsIGNlbGw6IEJpbGxDZWxsLCBuZXdDZWxsczogQmlsbENlbGxbXSwgZGlyOiBCaWxsVHJhY2tlckRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpciA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duKSB7XHJcbiAgICAgIHRoaXMucmVzZXREb3duQ2VsbHNQb3NpdGlvbihncmFwaCwgY2VsbCwgbmV3Q2VsbHMpO1xyXG4gICAgfSBlbHNlIGlmIChkaXIgPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXApIHtcclxuICAgICAgdGhpcy5yZXNldFVwQ2VsbHNQb3NpdGlvbihncmFwaCwgY2VsbCwgbmV3Q2VsbHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0RG93bkNlbGxzUG9zaXRpb24oZ3JhcGg6IEdyYXBoLCBjZWxsOiBCaWxsQ2VsbCwgbmV3Q2VsbHM6IEJpbGxDZWxsW10pIHtcclxuICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCB0YXJnZXRzID0gZ3JhcGguZ2V0T3V0Z29pbmdFZGdlcyhjZWxsKS5tYXAoZWRnZSA9PiBlZGdlLnRhcmdldCk7XHJcblxyXG4gICAgICBsZXQgZGVhbHMgPSB0YXJnZXRzO1xyXG5cclxuICAgICAgLy/mjInnurXlnZDmoIfku47lpKfliLDlsI/mjpLluo9cclxuICAgICAgbGV0IHRlbXAgPSBkZWFscy5zb3J0KChjMSwgYzIpID0+IGMxLmdlb21ldHJ5ICYmIGMyLmdlb21ldHJ5ID8gYzIuZ2VvbWV0cnkueSAtIGMxLmdlb21ldHJ5LnkgOiBOdW1iZXIuTUlOX1ZBTFVFKTtcclxuICAgICAgLy/mnIDlsI/nurXlnZDmoIdcclxuICAgICAgbGV0IG1pblkgPSB0ZW1wLmxlbmd0aCA+IDAgPyB0ZW1wW3RlbXAubGVuZ3RoIC0gMV0uZ2VvbWV0cnkueSA6IGNlbGwuZ2VvbWV0cnkueTtcclxuICAgICAgLy/mnIDlpKfnurXlnZDmoIdcclxuICAgICAgbGV0IG1heFkgPSB0ZW1wLmxlbmd0aCA+IDAgPyB0ZW1wWzBdLmdlb21ldHJ5LnkgOiBjZWxsLmdlb21ldHJ5Lnk7XHJcbiAgICAgIC8v5L6d5qyh5L+u5pS55paw5o+S5YWl6IqC54K555qE57q15Z2Q5qCHXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Q2VsbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBtYXhZID0gZGVhbHMubGVuZ3RoID4gMCA/IG1heFkgKyB0aGlzLnZzcGFjZSA6IG1heFk7XHJcbiAgICAgICAgZ3JhcGgudHJhbnNsYXRlQ2VsbChuZXdDZWxsc1tpXSwgMCwgbWF4WSAtIG5ld0NlbGxzW2ldLmdlb21ldHJ5LnkpO1xyXG4gICAgICAgIGRlYWxzLnB1c2gobmV3Q2VsbHNbaV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBtaWRZID0gKG1heFkgKyBtaW5ZKSAvIDI7XHJcbiAgICAgIGxldCBkaWZmWSA9IGNlbGwuZ2VvbWV0cnkueSAtIG1pZFk7XHJcbiAgICAgIC8v5L6d5qyh5L+u5pS55omA5pyJ54K557q15Z2Q5qCHXHJcbiAgICAgIGRlYWxzLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgZ3JhcGgudHJhbnNsYXRlQ2VsbChjLCAwLCBkaWZmWSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBtaW5ZICs9IGRpZmZZO1xyXG4gICAgICBtYXhZICs9IGRpZmZZO1xyXG5cclxuICAgICAgbWlkWSArPSBkaWZmWTtcclxuICAgICAgLy8g5bCGPD1taWRZ55qE6IqC54K55YWo6YOo5LiK56e76IezbWluWS1kaWZmWSw+PW1pZFnkuIvnp7voh7NtYXhZICsgZGlmZllcclxuICAgICAgZm9yIChsZXQga2V5IGluIGdyYXBoLm1vZGVsLmNlbGxzKSB7XHJcbiAgICAgICAgaWYgKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0gPT0gZ3JhcGgubW9kZWwucm9vdCB8fCBncmFwaC5tb2RlbC5jZWxsc1trZXldLmdlb21ldHJ5ID09IG51bGwgfHwgZ3JhcGgubW9kZWwuY2VsbHNba2V5XS5lZGdlID09IHRydWUpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ3JhcGgubW9kZWwuY2VsbHNba2V5XSA9PSBjZWxsIHx8IG5ld0NlbGxzLmluZGV4T2YoZ3JhcGgubW9kZWwuY2VsbHNba2V5XSBhcyBhbnkpICE9IC0xKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0gPT0gdGhpcy5lbnRyeSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChncmFwaC5tb2RlbC5jZWxsc1trZXldLmdlb21ldHJ5LnggPCB0aGlzLmVudHJ5Lmdlb21ldHJ5LngpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjID0gZ3JhcGgubW9kZWwuY2VsbHNba2V5XTtcclxuICAgICAgICBsZXQgZ2VvID0gYy5nZW9tZXRyeTtcclxuICAgICAgICBncmFwaC50cmFuc2xhdGVDZWxsKGMsIDAsIGdlby55IDw9IGNlbGwuZ2VvbWV0cnkueSA/IG1pblkgLSAoY2VsbC5nZW9tZXRyeS55IC0gZ2VvLnkpIC0gZ2VvLnkgOiBtYXhZICsgKGdlby55IC0gY2VsbC5nZW9tZXRyeS55KSAtIGdlby55KTtcclxuICAgICAgfVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXNldFVwQ2VsbHNQb3NpdGlvbihncmFwaDogR3JhcGgsIGNlbGw6IEJpbGxDZWxsLCBuZXdDZWxsczogQmlsbENlbGxbXSkge1xyXG4gICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IHNvdXJjZXMgPSBncmFwaC5nZXRJbmNvbWluZ0VkZ2VzKGNlbGwpLm1hcChlZGdlID0+IGVkZ2Uuc291cmNlKTtcclxuICAgICAgbGV0IGRlYWxzID0gc291cmNlcztcclxuXHJcbiAgICAgIC8v5oyJ57q15Z2Q5qCH5LuO5aSn5Yiw5bCP5o6S5bqPXHJcbiAgICAgIGxldCB0ZW1wID0gZGVhbHMuc29ydCgoYzEsIGMyKSA9PiBjMS5nZW9tZXRyeSAmJiBjMi5nZW9tZXRyeSA/IGMyLmdlb21ldHJ5LnkgLSBjMS5nZW9tZXRyeS55IDogTnVtYmVyLk1JTl9WQUxVRSk7XHJcbiAgICAgIC8v5pyA5bCP57q15Z2Q5qCHXHJcbiAgICAgIGxldCBtaW5ZID0gdGVtcC5sZW5ndGggPiAwID8gdGVtcFt0ZW1wLmxlbmd0aCAtIDFdLmdlb21ldHJ5LnkgOiBjZWxsLmdlb21ldHJ5Lnk7XHJcbiAgICAgIC8v5pyA5aSn57q15Z2Q5qCHXHJcbiAgICAgIGxldCBtYXhZID0gdGVtcC5sZW5ndGggPiAwID8gdGVtcFswXS5nZW9tZXRyeS55IDogY2VsbC5nZW9tZXRyeS55O1xyXG4gICAgICAvL+S+neasoeS/ruaUueaWsOaPkuWFpeiKgueCueeahOe6teWdkOagh1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0NlbGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbWF4WSA9IGRlYWxzLmxlbmd0aCA+IDAgPyBtYXhZICsgdGhpcy52c3BhY2UgOiBtYXhZO1xyXG4gICAgICAgIGdyYXBoLnRyYW5zbGF0ZUNlbGwobmV3Q2VsbHNbaV0sIDAsIG1heFkgLSBuZXdDZWxsc1tpXS5nZW9tZXRyeS55KTtcclxuICAgICAgICBkZWFscy5wdXNoKG5ld0NlbGxzW2ldKTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgbWlkWSA9IChtYXhZICsgbWluWSkgLyAyO1xyXG4gICAgICBsZXQgZGlmZlkgPSBjZWxsLmdlb21ldHJ5LnkgLSBtaWRZO1xyXG4gICAgICAvL+S+neasoeS/ruaUueaJgOacieeCuee6teWdkOagh1xyXG4gICAgICBkZWFscy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgIGdyYXBoLnRyYW5zbGF0ZUNlbGwoYywgMCwgZGlmZlkpO1xyXG4gICAgICB9KTtcclxuICAgICAgbWluWSArPSBkaWZmWTtcclxuICAgICAgbWF4WSArPSBkaWZmWTtcclxuXHJcbiAgICAgIG1pZFkgKz0gZGlmZlk7XHJcbiAgICAgIC8vIOWwhjw9bWlkWeeahOiKgueCueWFqOmDqOS4iuenu+iHs21pblktZGlmZlksPj1taWRZ5LiL56e76IezbWF4WSArIGRpZmZZXHJcbiAgICAgIGZvciAobGV0IGtleSBpbiBncmFwaC5tb2RlbC5jZWxscykge1xyXG4gICAgICAgIGlmIChncmFwaC5tb2RlbC5jZWxsc1trZXldID09IGdyYXBoLm1vZGVsLnJvb3QgfHwgZ3JhcGgubW9kZWwuY2VsbHNba2V5XS5nZW9tZXRyeSA9PSBudWxsIHx8IGdyYXBoLm1vZGVsLmNlbGxzW2tleV0uZWRnZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0gPT0gY2VsbCB8fCBuZXdDZWxscy5pbmRleE9mKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0gYXMgYW55KSAhPSAtMSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChncmFwaC5tb2RlbC5jZWxsc1trZXldID09IHRoaXMuZW50cnkpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ3JhcGgubW9kZWwuY2VsbHNba2V5XS5nZW9tZXRyeS54ID4gdGhpcy5lbnRyeS5nZW9tZXRyeS54KSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYyA9IGdyYXBoLm1vZGVsLmNlbGxzW2tleV07XHJcbiAgICAgICAgbGV0IGdlbyA9IGMuZ2VvbWV0cnk7XHJcblxyXG4gICAgICAgIGdyYXBoLnRyYW5zbGF0ZUNlbGwoYywgMCwgZ2VvLnkgPD0gY2VsbC5nZW9tZXRyeS55ID8gbWluWSAtIChjZWxsLmdlb21ldHJ5LnkgLSBnZW8ueSkgLSBnZW8ueSA6IG1heFkgKyAoZ2VvLnkgLSBjZWxsLmdlb21ldHJ5LnkpIC0gZ2VvLnkpO1xyXG4gICAgICB9XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldENlbGxEYXRhKGNlbGxEYXRhOiBDZWxsRGF0YSwgY2VsbDogQmlsbENlbGwpIHtcclxuICAgIGNlbGxEYXRhLmJpbGxJbmZvID0gY2VsbC5iaWxsSW5mbztcclxuICAgIGNlbGxEYXRhLmJpbGxEYXRhSW5mbyA9IGNlbGwuYmlsbERhdGFJbmZvO1xyXG4gICAgY2VsbERhdGEudmlzaWJsZSA9IHRydWU7XHJcbiAgICBjZWxsRGF0YS5kaWFncmFtSW5mby54ID0gY2VsbC5nZW9tZXRyeS54O1xyXG4gICAgY2VsbERhdGEuZGlhZ3JhbUluZm8ueSA9IGNlbGwuZ2VvbWV0cnkueTtcclxuICAgIGNlbGxEYXRhLmRpYWdyYW1JbmZvLndpZHRoID0gY2VsbC5nZW9tZXRyeS53aWR0aDtcclxuICAgIGNlbGxEYXRhLmRpYWdyYW1JbmZvLmhlaWdodCA9IGNlbGwuZ2VvbWV0cnkuaGVpZ2h0O1xyXG4gICAgY2VsbERhdGEuZGlhZ3JhbUluZm8uZXh0UHJvcHMgPSB7XHJcbiAgICAgIHN0eWxlOiBjZWxsLnN0eWxlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgem9vbU91dCgpIHtcclxuICAgIHRoaXMuZ3JhcGguem9vbU91dCgpO1xyXG4gIH1cclxuXHJcbiAgem9vbUluKCkge1xyXG4gICAgdGhpcy5ncmFwaC56b29tSW4oKTtcclxuICB9XHJcblxyXG4gIHpvb21BY3R1YWwoKSB7XHJcbiAgICB0aGlzLmdyYXBoLnpvb21BY3R1YWwoKTtcclxuICB9XHJcblxyXG4gIGdldFpvb21TY2FsZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5ncmFwaC52aWV3LnNjYWxlICogMTAwKTtcclxuICB9XHJcblxyXG4gIHByaW50KCkge1xyXG4gICAgY29uc3QgcHJldmlldyA9IG5ldyBteFByaW50UHJldmlldyh0aGlzLmdyYXBoLCAxKTtcclxuICAgIHByZXZpZXcucHJpbnRPdmVybGF5cyA9IHRydWU7XHJcbiAgICBwcmV2aWV3LnByaW50Q29udHJvbHMgPSB0cnVlO1xyXG4gICAgcHJldmlldy5wcmludEJhY2tncm91bmRJbWFnZSA9IHRydWU7XHJcblxyXG4gICAgcHJldmlldy5vcGVuKGJpbGxUcmFja2VyQ2VsbENzcyk7XHJcbiAgfVxyXG5cclxuICBleHBhbmQoZGlyZWN0aW9uOiBCaWxsVHJhY2tlckRpcmVjdGlvbiwgYWxsOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIGlmIChhbGwpIHtcclxuICAgICAgdGhpcy5leHBhbmRBbGwoZGlyZWN0aW9uKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCkge1xyXG4gICAgICBjb25zdCBjZWxsczogTXhHcmFwaE5TLm14Q2VsbFtdID0gW3RoaXMuZW50cnldO1xyXG4gICAgICB0aGlzLnVwUGFyZW50LmNoaWxkcmVuICYmIGNlbGxzLnB1c2goLi4udGhpcy51cFBhcmVudC5jaGlsZHJlbik7XHJcbiAgICAgIGNlbGxzLmZvckVhY2goKGNlbGw6IEJpbGxDZWxsKSA9PiB7XHJcbiAgICAgICAgaWYgKGNlbGwudXBDZWxsT3ZlcmxheSAmJiBjZWxsLnVwQ2VsbE92ZXJsYXkuc3RhdGUgPT0gQ2VsbE92ZXJsYXlTdGF0ZS5TZWFyY2gpIHtcclxuICAgICAgICAgIGNlbGwudXBDZWxsT3ZlcmxheS5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QobXhFdmVudC5DTElDSykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duKSB7XHJcbiAgICAgIGNvbnN0IGNlbGxzOiBNeEdyYXBoTlMubXhDZWxsW10gPSBbdGhpcy5lbnRyeV07XHJcbiAgICAgIHRoaXMuZG93blBhcmVudC5jaGlsZHJlbiAmJiBjZWxscy5wdXNoKC4uLnRoaXMuZG93blBhcmVudC5jaGlsZHJlbik7XHJcbiAgICAgIGNlbGxzLmZvckVhY2goKGNlbGw6IEJpbGxDZWxsKSA9PiB7XHJcbiAgICAgICAgaWYgKGNlbGwuZG93bkNlbGxPdmVybGF5ICYmIGNlbGwuZG93bkNlbGxPdmVybGF5LnN0YXRlID09IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICBjZWxsLmRvd25DZWxsT3ZlcmxheS5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QobXhFdmVudC5DTElDSykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBleHBhbmRBbGwoZGlyZWN0aW9uOiBCaWxsVHJhY2tlckRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpcmVjdGlvbiAhPSBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCAmJiBkaXJlY3Rpb24gIT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93bikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Y2V5o2u6IqC54K55re75Yqg5bm256e75L2N5ZCO5LqL5Lu255uR5ZCs5ZmoXHJcbiAgICBsZXQgYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkID0gbnVsbDtcclxuICAgIGlmIChkaXJlY3Rpb24gPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXApIHtcclxuICAgICAgYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNlbGxzOiBNeEdyYXBoTlMubXhDZWxsW10gPSBbdGhpcy5lbnRyeV07XHJcbiAgICAgICAgdGhpcy51cFBhcmVudC5jaGlsZHJlbiAmJiBjZWxscy5wdXNoKC4uLnRoaXMudXBQYXJlbnQuY2hpbGRyZW4pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5UcmFja1VwQ2VsbHMgPSBjZWxscy5maWx0ZXIoKGNlbGw6IEJpbGxDZWxsKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gY2VsbC51cENlbGxPdmVybGF5ICYmIGNlbGwudXBDZWxsT3ZlcmxheS5zdGF0ZSA9PSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g5rKh5pyJ5Y+v5LiK5p+l6IqC54K55LiU5rKh5pyJ5q2j5Zyo5omn6KGM55qE5LiK5p+l6K+35rGC5pe25Yig6Zmk55uR5ZCs5ZmoXHJcbiAgICAgICAgaWYgKGNhblRyYWNrVXBDZWxscyA9PSBudWxsIHx8IGNhblRyYWNrVXBDZWxscy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMubnVtQ2VsbHNBZGRpbmdSZXEgPT09IDApIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCLnp7vpmaTnm5HlkKzlmahcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JhcGgucmVtb3ZlTGlzdGVuZXIoYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkKTtcclxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKFwiRXhwYW5kQWxsXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjYW5UcmFja1VwQ2VsbHMuZm9yRWFjaCgoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNlbGwudXBDZWxsT3ZlcmxheSAmJiBjZWxsLnVwQ2VsbE92ZXJsYXkuc3RhdGUgPT0gQ2VsbE92ZXJsYXlTdGF0ZS5TZWFyY2gpIHtcclxuICAgICAgICAgICAgICBjZWxsLnVwQ2VsbE92ZXJsYXkuZmlyZUV2ZW50KG5ldyBteEV2ZW50T2JqZWN0KG14RXZlbnQuQ0xJQ0spKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93bikge1xyXG4gICAgICBhZnRlckJpbGxDZWxsc0FkZGVkQW5kTW92ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2VsbHM6IE14R3JhcGhOUy5teENlbGxbXSA9IFt0aGlzLmVudHJ5XTtcclxuICAgICAgICB0aGlzLmRvd25QYXJlbnQuY2hpbGRyZW4gJiYgY2VsbHMucHVzaCguLi50aGlzLmRvd25QYXJlbnQuY2hpbGRyZW4pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5UcmFja0Rvd25DZWxscyA9IGNlbGxzLmZpbHRlcigoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICAgIHJldHVybiBjZWxsLmRvd25DZWxsT3ZlcmxheSAmJiBjZWxsLmRvd25DZWxsT3ZlcmxheS5zdGF0ZSA9PSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g5rKh5pyJ5Y+v5LiL5p+l6IqC54K55LiU5rKh5pyJ5q2j5Zyo5omn6KGM55qE5LiL5p+l6K+35rGC5pe25Yig6Zmk55uR5ZCs5ZmoXHJcbiAgICAgICAgaWYgKGNhblRyYWNrRG93bkNlbGxzID09IG51bGwgfHwgY2FuVHJhY2tEb3duQ2VsbHMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIGlmICh0aGlzLm51bUNlbGxzQWRkaW5nUmVxID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwi56e76Zmk55uR5ZCs5ZmoXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmdyYXBoLnJlbW92ZUxpc3RlbmVyKGFmdGVyQmlsbENlbGxzQWRkZWRBbmRNb3ZlZCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZChcIkV4cGFuZEFsbFwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2FuVHJhY2tEb3duQ2VsbHMuZm9yRWFjaCgoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNlbGwuZG93bkNlbGxPdmVybGF5ICYmIGNlbGwuZG93bkNlbGxPdmVybGF5LnN0YXRlID09IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgY2VsbC5kb3duQ2VsbE92ZXJsYXkuZmlyZUV2ZW50KG5ldyBteEV2ZW50T2JqZWN0KG14RXZlbnQuQ0xJQ0spKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUudGltZShcIkV4cGFuZEFsbFwiKTtcclxuICAgIC8vIOa3u+WKoOebkeWQrOWZqFxyXG4gICAgLy8gY29uc29sZS5sb2coXCLmt7vliqDnm5HlkKzlmahcIik7XHJcbiAgICB0aGlzLmdyYXBoLmFkZExpc3RlbmVyKFwiYmlsbENlbGxzQWRkZWRBbmRNb3ZlZFwiLCBhZnRlckJpbGxDZWxsc0FkZGVkQW5kTW92ZWQpO1xyXG5cclxuICAgIC8vIOebtOaOpeinpuWPkeS4gOasoeWxleW8gOS6i+S7tlxyXG4gICAgYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkKCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==