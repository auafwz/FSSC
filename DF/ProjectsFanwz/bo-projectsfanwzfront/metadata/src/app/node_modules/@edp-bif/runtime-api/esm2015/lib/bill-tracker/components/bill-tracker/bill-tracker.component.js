/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/bill-tracker/bill-tracker.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Inject, LOCALE_ID, Input, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef, Optional, ApplicationRef, Injector, ComponentFactoryResolver, ReflectiveInjector } from '@angular/core';
import { BillTrackerGraphComponent } from '../bill-tracker-graph/bill-tracker-graph.component';
import { BillTrackerDataService } from '../../services/bill-tracker-data.service';
import { BillTrackerArgs } from '../../config/bill-tracker-args';
import { BillTrackerDataComponent } from '../bill-tracker-data/bill-tracker-data.component';
import { BsModalService } from '@farris/ui-modal';
import { LoadingService } from "@farris/ui-loading";
import { MessagerService } from "@farris/ui-messager";
import { NotifyService } from "@farris/ui-notify";
import { BillTrackerDataInfoService } from '../../services/bill-tracker-data-info.service';
import { BillTrackerDirection } from '../../config/bill-tracker-direction';
import { Events } from '../../mxgraph-ext/Events';
import { BillTrackerInternalUiService } from '../../services/bill-tracker-internal-ui.service';
import { mxEvent } from '../../../ref/mxgraph';
export class BillTrackerComponent {
    /**
     * @param {?} args
     * @param {?} localeId
     * @param {?} dataService
     * @param {?} notify
     * @param {?} messager
     * @param {?} loading
     * @param {?} modal
     * @param {?} cdf
     * @param {?} vcr
     * @param {?} appr
     * @param {?} inj
     * @param {?} cfr
     */
    constructor(args, localeId, dataService, notify, messager, loading, modal, cdf, vcr, appr, inj, cfr) {
        this.localeId = localeId;
        this.dataService = dataService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.cdf = cdf;
        this.vcr = vcr;
        this.appr = appr;
        this.inj = inj;
        this.cfr = cfr;
        this.defaultDataWrapperHeight = 180;
        this.showData = false;
        this.dataFullScreen = false;
        this.billTrackerArgs = args;
        this.dataInfoService = new BillTrackerDataInfoService();
        this.newBTS = this.dataInfoService.isNewBTS(this.billTrackerArgs.canTrackingResult.billTrackingSettings);
        /** @type {?} */
        const inject = ReflectiveInjector.resolveAndCreate([
            BillTrackerInternalUiService
        ], this.inj);
        this.internalUiService = inject.get(BillTrackerInternalUiService, null);
        this.defaultDataWrapperHeight = args && args.gridOptions && args.gridOptions.defaultHeight ? args.gridOptions.defaultHeight : this.defaultDataWrapperHeight;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.paintGraph();
        }), 0);
    }
    /**
     * @return {?}
     */
    paintGraph() {
        this.billGraph.paint();
        this.graphZoomScale = this.billGraph.getZoomScale();
        this.billGraph.graph.view.addListener(mxEvent.SCALE, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            // console.log(sender, evt);
            this.graphZoomScale = this.billGraph.getZoomScale();
        }));
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    selectHandler(cell) {
        if (cell) {
            /** @type {?} */
            const billInfo = cell.billInfo;
            /** @type {?} */
            const billDataInfo = cell.billDataInfo;
            if (billInfo == this.lastBillInfo && billDataInfo == this.lastBillDataInfo && this.showData == true) {
                return;
            }
            /** @type {?} */
            const args = this.dataService.buildGetMainEntityDataArgs(billInfo, billDataInfo);
            this.billData.showDataGrid(args, billInfo, billDataInfo, null);
            this.showData = true;
            this.lastBillInfo = billInfo;
            this.lastBillDataInfo = billDataInfo;
        }
        else {
            this.billData.clearDataRegion();
            this.showData = false;
        }
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    stateChangeHandler(evt) {
        if (evt.type == Events.CLICK_FIRST_SUMMARY) {
            this.openBillDetail(evt.data);
        }
    }
    /**
     * @param {?} modalRef
     * @return {?}
     */
    setModalRef(modalRef) {
        this.modalRef = modalRef;
        if (this.billGraph != null) {
            this.billGraph.setModalRef(modalRef);
        }
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    resetGraphHeight(evt) {
        ((/** @type {?} */ (evt.host))).style.top = '';
        ((/** @type {?} */ (evt.host))).style.left = '';
        this.graphContainerER.nativeElement.style.height = `${this.mainContainerER.nativeElement.clientHeight - evt.size.height}px`;
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.billGraph.refresh();
        }));
    }
    /**
     * @return {?}
     */
    expandDataRegion() {
        this.dataFullScreen = true;
        this.divDataWrapperER.nativeElement.style.height = '100%';
        this.divDataWrapperER.nativeElement.style.top = '0';
    }
    /**
     * @return {?}
     */
    collapseDataRegion() {
        this.dataFullScreen = false;
        this.divDataWrapperER.nativeElement.style.height = this.defaultDataWrapperHeight + "px";
        this.divDataWrapperER.nativeElement.style.top = null;
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    onRzResized(evt) {
    }
    /**
     * @return {?}
     */
    graphZoomIn() {
        this.billGraph.zoomIn();
    }
    /**
     * @return {?}
     */
    graphZoomOut() {
        this.billGraph.zoomOut();
    }
    /**
     * @return {?}
     */
    graphZoomActual() {
        this.billGraph.zoomActual();
    }
    /**
     * @return {?}
     */
    graphPrint() {
        this.billGraph.print();
    }
    /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    graphExpand(direction, all = false) {
        this.billGraph.expand(direction, all);
    }
    /**
     * @return {?}
     */
    graphExpandUpAll() {
        this.graphExpand(BillTrackerDirection.Up, true);
    }
    /**
     * @return {?}
     */
    graphExpandUp() {
        this.graphExpand(BillTrackerDirection.Up, false);
    }
    /**
     * @return {?}
     */
    graphExpandDown() {
        this.graphExpand(BillTrackerDirection.Down, false);
    }
    /**
     * @return {?}
     */
    graphExpandDownAll() {
        this.graphExpand(BillTrackerDirection.Down, true);
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    openBillDetail(cell) {
        this.internalUiService.openBillDetail(cell.billInfo, cell.billDataInfo);
    }
}
BillTrackerComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-bill-tracker',
                template: "<div class=\"g-main\" style=\"height: 100%; background-color: #ffffff;\" #mainContainer>\r\n    <div class=\"bill-tracker-toolbar-wrapper\" *ngIf=\"modalRef!=null\">\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUpAll()\">\r\n            {{'expandUpAll'|billTrackerLocale}}\r\n        </button>\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUp()\">\r\n            {{'expandUp'|billTrackerLocale}}\r\n        </button>\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDown()\">\r\n            {{'expandDown'|billTrackerLocale}}\r\n        </button>\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDownAll()\">\r\n            {{'expandDownAll'|billTrackerLocale}}\r\n        </button>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomOut()\">\r\n            <i class=\"f-icon f-icon-minus\" title=\"{{'zoomOut' | billTrackerLocale}}\"></i>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-input\">\r\n            <input *ngIf=\"false\" type=\"text\" style=\"border: 0; width: 30px; text-align: right;\" readonly\r\n                [(ngModel)]=\"graphZoomScale\">\r\n            <span style=\"border: 0; width: 30px; text-align: right;\">{{graphZoomScale}}</span>\r\n            <span>%</span>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomIn()\">\r\n            <i class=\"f-icon f-icon-add\" title=\"{{'zoomIn' | billTrackerLocale}}\"></i>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomActual()\">\r\n            <i class=\"f-icon f-icon-reset\" title=\"{{'zoomReset' | billTrackerLocale}}\"></i>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphPrint()\" *ngIf=\"false\">\r\n            <i class=\"f-icon f-icon-print\" title=\"{{'print' | billTrackerLocale}}\"></i>\r\n        </div>\r\n    </div>\r\n    <div class=\"bill-tracker-graph-wrapper\" #graphContainer>\r\n        <lib-bill-tracker-graph #billGraph [billTrackerArgs]=\"billTrackerArgs\" (select)=\"selectHandler($event)\"\r\n            (stateChange)=\"stateChangeHandler($event)\">\r\n        </lib-bill-tracker-graph>\r\n    </div>\r\n</div>\r\n<!-- todo: \u5206\u5272\u6761\u6682\u672A\u52A0\u6700\u5927\u9AD8\u5EA6\u9650\u5236 -->\r\n<div #divDataWrapper class=\"bill-tracker-data-wrapper\" [style.height]=\"defaultDataWrapperHeight + 'px'\"\r\n    [style.display]=\"showData ? null : 'none'\" ngResizable rzAspectRatio=\"false\" [rzHandles]=\"'n'\" [rzMinHeight]=\"40\"\r\n    (rzStop)=\"onRzResized($event)\">\r\n    <div class=\"bill-tracker-divider-wrapper\">\r\n        <div class=\"bill-tracker-divider bill-tracker-divider-transparent bill-tracker-divider-img\">\r\n        </div>\r\n    </div>\r\n    <div class=\"bill-tracker-fold-wrapper\">\r\n        <div class=\"bill-tracker-fold-icon\">\r\n            <i class=\"f-icon f-icon-arrow-seek-up\" *ngIf=\"dataFullScreen==false\" (click)=\"expandDataRegion()\"></i>\r\n            <i class=\"f-icon f-icon-arrow-seek-down\" *ngIf=\"dataFullScreen==true\" (click)=\"collapseDataRegion()\"></i>\r\n        </div>\r\n    </div>\r\n    <div #divDataTable class=\"bill-tracker-data-table-wrapper\">\r\n        <lib-bill-tracker-data #billData></lib-bill-tracker-data>\r\n    </div>\r\n</div>",
                providers: [
                    BillTrackerDataService
                ],
                changeDetection: ChangeDetectionStrategy.Default,
                styles: [".bill-tracker-divider{position:relative;height:1px}.bill-tracker-divider-transparent:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:1px;background-color:#e9ecf3}.bill-tracker-divider-transparent:hover:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:1px;background-color:#3f65ff}.bill-tracker-divider-img:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator.svg);background-repeat:no-repeat}.bill-tracker-divider-img:hover:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator-hover.svg);background-repeat:no-repeat}.bill-tracker-graph-wrapper{height:100%;position:relative}.bill-tracker-data-wrapper{z-index:2;overflow-y:auto;position:absolute;left:0;width:100%;bottom:0;height:200px;background-color:#fff;border-top:1px solid #e9ecf3}.bill-tracker-data-table-wrapper{position:relative;width:100%;padding-top:6px}.bill-tracker-fold-wrapper{z-index:1;position:absolute;right:0;top:0;width:2rem;height:2rem}.bill-tracker-fold-icon{display:inline-flex;width:1.5em;height:1.5em;line-height:1.5em;text-align:center;color:#848c9a;background:#fff;border-radius:1.5em;border:1px solid #e9ecf3;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden;margin:.5em .5em 0 0}.bill-tracker-fold-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-wrapper{z-index:1;position:absolute;right:0;top:0;display:flex;margin-right:14px;margin-top:14px;background-color:#fff}.bill-tracker-toolbar-icon{background:#fff;width:22px;height:22px;line-height:22px;text-align:center;color:#595d63;border:1px solid #e8ebf2;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);border-radius:22px;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden}.bill-tracker-toolbar-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-btn:hover{background-color:#fff}"]
            }] }
];
/** @nocollapse */
BillTrackerComponent.ctorParameters = () => [
    { type: BillTrackerArgs },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: BillTrackerDataService },
    { type: NotifyService },
    { type: MessagerService },
    { type: LoadingService },
    { type: BsModalService },
    { type: ChangeDetectorRef },
    { type: ViewContainerRef },
    { type: ApplicationRef },
    { type: Injector, decorators: [{ type: Optional }] },
    { type: ComponentFactoryResolver, decorators: [{ type: Optional }] }
];
BillTrackerComponent.propDecorators = {
    billGraph: [{ type: ViewChild, args: ["billGraph",] }],
    billGraphVCR: [{ type: ViewChild, args: ["billGraph", { read: ViewContainerRef },] }],
    mainContainerER: [{ type: ViewChild, args: ["mainContainer",] }],
    graphContainerER: [{ type: ViewChild, args: ["graphContainer",] }],
    billData: [{ type: ViewChild, args: ["billData",] }],
    billDataVCR: [{ type: ViewChild, args: ["billData", { read: ViewContainerRef },] }],
    divDataTableER: [{ type: ViewChild, args: ["divDataTable",] }],
    divDataWrapperER: [{ type: ViewChild, args: ["divDataWrapper",] }],
    billTrackerArgs: [{ type: Input, args: ["billTrackerArgs",] }]
};
if (false) {
    /** @type {?} */
    BillTrackerComponent.prototype.billGraph;
    /** @type {?} */
    BillTrackerComponent.prototype.billGraphVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.mainContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.graphContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.billData;
    /** @type {?} */
    BillTrackerComponent.prototype.billDataVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataTableER;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataWrapperER;
    /** @type {?} */
    BillTrackerComponent.prototype.modalRef;
    /** @type {?} */
    BillTrackerComponent.prototype.billTrackerArgs;
    /** @type {?} */
    BillTrackerComponent.prototype.defaultDataWrapperHeight;
    /** @type {?} */
    BillTrackerComponent.prototype.showData;
    /** @type {?} */
    BillTrackerComponent.prototype.dataFullScreen;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillDataInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.graphZoomScale;
    /** @type {?} */
    BillTrackerComponent.prototype.newBTS;
    /** @type {?} */
    BillTrackerComponent.prototype.dataInfoService;
    /** @type {?} */
    BillTrackerComponent.prototype.internalUiService;
    /** @type {?} */
    BillTrackerComponent.prototype.localeId;
    /** @type {?} */
    BillTrackerComponent.prototype.dataService;
    /** @type {?} */
    BillTrackerComponent.prototype.notify;
    /** @type {?} */
    BillTrackerComponent.prototype.messager;
    /** @type {?} */
    BillTrackerComponent.prototype.loading;
    /** @type {?} */
    BillTrackerComponent.prototype.modal;
    /** @type {?} */
    BillTrackerComponent.prototype.cdf;
    /** @type {?} */
    BillTrackerComponent.prototype.vcr;
    /** @type {?} */
    BillTrackerComponent.prototype.appr;
    /** @type {?} */
    BillTrackerComponent.prototype.inj;
    /** @type {?} */
    BillTrackerComponent.prototype.cfr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9jb21wb25lbnRzL2JpbGwtdHJhY2tlci9iaWxsLXRyYWNrZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBaUIsS0FBSyxFQUFFLFVBQVUsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsUSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxvREFBb0QsQ0FBQztBQUMvRixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDakUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFHNUYsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQzNGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxpREFB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QUF3Qix1QkFpRmpOLFFBQVE7Ozt3QkFwRFYsU0FBUyxTQUFDLFdBQVc7MkJBR3JCLFNBQVMsU0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUU7OEJBR2pELFNBQVMsU0FBQyxlQUFlOytCQUd6QixTQUFTLFNBQUMsZ0JBQWdCO3VCQUcxQixTQUFTLFNBQUMsVUFBVTswQkFHcEIsU0FBUyxTQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRTs2QkFHaEQsU0FBUyxTQUFDLGNBQWM7K0JBR3hCLFNBQVMsU0FBQyxnQkFBZ0I7OEJBSzFCLEtBQUssU0FBQyxpQkFBaUI7Ozs7SUExQnhCLHlDQUNxQzs7SUFFckMsNENBQytCOztJQUUvQiwrQ0FDNEM7O0lBRTVDLGdEQUM2Qzs7SUFFN0Msd0NBQ21DOztJQUVuQywyQ0FDOEI7O0lBRTlCLDhDQUMyQzs7SUFFM0MsZ0RBQzZDOztJQUU3Qyx3Q0FBcUI7O0lBRXJCLCtDQUNpQzs7SUFFakMsd0RBQWdEOztJQUNoRCx3Q0FBMEI7O0lBQzFCLDhDQUFnQzs7SUFDaEMsNENBQXVCOztJQUN2QixnREFBK0I7O0lBQy9CLDhDQUF1Qjs7SUFFdkIsc0NBQWdCOztJQUNoQiwrQ0FBNEM7O0lBQzVDLGlEQUFnRDs7SUFJOUMsd0NBQTBDOztJQUMxQywyQ0FBMEM7O0lBQzFDLHNDQUE0Qjs7SUFDNUIsd0NBQWdDOztJQUNoQyx1Q0FBOEI7O0lBQzlCLHFDQUE0Qjs7SUFDNUIsbUNBQTZCOztJQUM3QixtQ0FBNEI7O0lBQzVCLG9DQUEyQjs7SUFDM0IsbUNBQWdDOztJQUNoQyxtQ0FBZ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkLCBJbmplY3QsIExPQ0FMRV9JRCwgQWZ0ZXJWaWV3SW5pdCwgSW5wdXQsIEVsZW1lbnRSZWYsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgVmlld0NvbnRhaW5lclJlZiwgT3B0aW9uYWwsIEFwcGxpY2F0aW9uUmVmLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBSZWZsZWN0aXZlSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJHcmFwaENvbXBvbmVudCB9IGZyb20gJy4uL2JpbGwtdHJhY2tlci1ncmFwaC9iaWxsLXRyYWNrZXItZ3JhcGguY29tcG9uZW50JztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEYXRhU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2JpbGwtdHJhY2tlci1kYXRhLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckFyZ3MgfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWFyZ3MnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRhdGFDb21wb25lbnQgfSBmcm9tICcuLi9iaWxsLXRyYWNrZXItZGF0YS9iaWxsLXRyYWNrZXItZGF0YS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBCaWxsRGF0YUluZm8gfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbERhdGFJbmZvJztcclxuaW1wb3J0IHsgQmlsbEluZm8gfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbEluZm8nO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmLCBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWxvYWRpbmdcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbWVzc2FnZXJcIjtcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLW5vdGlmeVwiO1xyXG5pbXBvcnQgeyBJUmVzaXplRXZlbnQgfSBmcm9tICdAZmFycmlzL3VpLWRyYWdnYWJsZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWRhdGEtaW5mby5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEaXJlY3Rpb24gfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWRpcmVjdGlvbic7XHJcbmltcG9ydCB7IEV2ZW50cyB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L0V2ZW50cyc7XHJcbmltcG9ydCB7IEJpbGxDZWxsIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvQmlsbENlbGwnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWludGVybmFsLXVpLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBteEV2ZW50IH0gZnJvbSAnLi4vLi4vLi4vcmVmL214Z3JhcGgnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItYmlsbC10cmFja2VyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYmlsbC10cmFja2VyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9iaWxsLXRyYWNrZXIuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQmlsbFRyYWNrZXJEYXRhU2VydmljZVxyXG4gIF0sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5EZWZhdWx0XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBCaWxsVHJhY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgQFZpZXdDaGlsZChcImJpbGxHcmFwaFwiKVxyXG4gIGJpbGxHcmFwaDogQmlsbFRyYWNrZXJHcmFwaENvbXBvbmVudDtcclxuXHJcbiAgQFZpZXdDaGlsZChcImJpbGxHcmFwaFwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICBiaWxsR3JhcGhWQ1I6IFZpZXdDb250YWluZXJSZWY7XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJtYWluQ29udGFpbmVyXCIpXHJcbiAgbWFpbkNvbnRhaW5lckVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImdyYXBoQ29udGFpbmVyXCIpXHJcbiAgZ3JhcGhDb250YWluZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJiaWxsRGF0YVwiKVxyXG4gIGJpbGxEYXRhOiBCaWxsVHJhY2tlckRhdGFDb21wb25lbnQ7XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJiaWxsRGF0YVwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICBiaWxsRGF0YVZDUjogVmlld0NvbnRhaW5lclJlZjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImRpdkRhdGFUYWJsZVwiKVxyXG4gIGRpdkRhdGFUYWJsZUVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImRpdkRhdGFXcmFwcGVyXCIpXHJcbiAgZGl2RGF0YVdyYXBwZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIG1vZGFsUmVmOiBCc01vZGFsUmVmO1xyXG5cclxuICBASW5wdXQoXCJiaWxsVHJhY2tlckFyZ3NcIilcclxuICBiaWxsVHJhY2tlckFyZ3M6IEJpbGxUcmFja2VyQXJncztcclxuXHJcbiAgZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0OiBudW1iZXIgfCBzdHJpbmcgPSAxODA7XHJcbiAgc2hvd0RhdGE6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBkYXRhRnVsbFNjcmVlbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGxhc3RCaWxsSW5mbzogQmlsbEluZm87XHJcbiAgbGFzdEJpbGxEYXRhSW5mbzogQmlsbERhdGFJbmZvO1xyXG4gIGdyYXBoWm9vbVNjYWxlOiBudW1iZXI7XHJcblxyXG4gIG5ld0JUUzogYm9vbGVhbjtcclxuICBkYXRhSW5mb1NlcnZpY2U6IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlO1xyXG4gIGludGVybmFsVWlTZXJ2aWNlOiBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGFyZ3M6IEJpbGxUcmFja2VyQXJncyxcclxuICAgIEBJbmplY3QoTE9DQUxFX0lEKSBwdWJsaWMgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIHB1YmxpYyBkYXRhU2VydmljZTogQmlsbFRyYWNrZXJEYXRhU2VydmljZSxcclxuICAgIHB1YmxpYyBub3RpZnk6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbWVzc2FnZXI6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHB1YmxpYyBsb2FkaW5nOiBMb2FkaW5nU2VydmljZSxcclxuICAgIHB1YmxpYyBtb2RhbDogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwdWJsaWMgY2RmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHB1YmxpYyB2Y3I6IFZpZXdDb250YWluZXJSZWYsXHJcbiAgICBwdWJsaWMgYXBwcjogQXBwbGljYXRpb25SZWYsXHJcbiAgICBAT3B0aW9uYWwoKSBwdWJsaWMgaW5qOiBJbmplY3RvcixcclxuICAgIEBPcHRpb25hbCgpIHB1YmxpYyBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICApIHtcclxuXHJcbiAgICB0aGlzLmJpbGxUcmFja2VyQXJncyA9IGFyZ3M7XHJcbiAgICB0aGlzLmRhdGFJbmZvU2VydmljZSA9IG5ldyBCaWxsVHJhY2tlckRhdGFJbmZvU2VydmljZSgpO1xyXG4gICAgdGhpcy5uZXdCVFMgPSB0aGlzLmRhdGFJbmZvU2VydmljZS5pc05ld0JUUyh0aGlzLmJpbGxUcmFja2VyQXJncy5jYW5UcmFja2luZ1Jlc3VsdC5iaWxsVHJhY2tpbmdTZXR0aW5ncyk7XHJcblxyXG4gICAgY29uc3QgaW5qZWN0ID0gUmVmbGVjdGl2ZUluamVjdG9yLnJlc29sdmVBbmRDcmVhdGUoW1xyXG4gICAgICBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlXHJcbiAgICBdLCB0aGlzLmluaik7XHJcbiAgICB0aGlzLmludGVybmFsVWlTZXJ2aWNlID0gaW5qZWN0LmdldChCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlLCBudWxsKTtcclxuXHJcbiAgICB0aGlzLmRlZmF1bHREYXRhV3JhcHBlckhlaWdodCA9IGFyZ3MgJiYgYXJncy5ncmlkT3B0aW9ucyAmJiBhcmdzLmdyaWRPcHRpb25zLmRlZmF1bHRIZWlnaHQgPyBhcmdzLmdyaWRPcHRpb25zLmRlZmF1bHRIZWlnaHQgOiB0aGlzLmRlZmF1bHREYXRhV3JhcHBlckhlaWdodDtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG5cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnBhaW50R3JhcGgoKTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgcGFpbnRHcmFwaCgpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnBhaW50KCk7XHJcbiAgICB0aGlzLmdyYXBoWm9vbVNjYWxlID0gdGhpcy5iaWxsR3JhcGguZ2V0Wm9vbVNjYWxlKCk7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC5ncmFwaC52aWV3LmFkZExpc3RlbmVyKG14RXZlbnQuU0NBTEUsIChzZW5kZXIsIGV2dCkgPT4ge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhzZW5kZXIsIGV2dCk7XHJcbiAgICAgIHRoaXMuZ3JhcGhab29tU2NhbGUgPSB0aGlzLmJpbGxHcmFwaC5nZXRab29tU2NhbGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0SGFuZGxlcihjZWxsKSB7XHJcbiAgICBpZiAoY2VsbCkge1xyXG4gICAgICBjb25zdCBiaWxsSW5mbzogQmlsbEluZm8gPSBjZWxsLmJpbGxJbmZvO1xyXG4gICAgICBjb25zdCBiaWxsRGF0YUluZm86IEJpbGxEYXRhSW5mbyA9IGNlbGwuYmlsbERhdGFJbmZvO1xyXG5cclxuICAgICAgaWYgKGJpbGxJbmZvID09IHRoaXMubGFzdEJpbGxJbmZvICYmIGJpbGxEYXRhSW5mbyA9PSB0aGlzLmxhc3RCaWxsRGF0YUluZm8gJiYgdGhpcy5zaG93RGF0YSA9PSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhcmdzID0gdGhpcy5kYXRhU2VydmljZS5idWlsZEdldE1haW5FbnRpdHlEYXRhQXJncyhiaWxsSW5mbywgYmlsbERhdGFJbmZvKTtcclxuICAgICAgdGhpcy5iaWxsRGF0YS5zaG93RGF0YUdyaWQoYXJncywgYmlsbEluZm8sIGJpbGxEYXRhSW5mbywgbnVsbCk7XHJcblxyXG4gICAgICB0aGlzLnNob3dEYXRhID0gdHJ1ZTtcclxuICAgICAgdGhpcy5sYXN0QmlsbEluZm8gPSBiaWxsSW5mbztcclxuICAgICAgdGhpcy5sYXN0QmlsbERhdGFJbmZvID0gYmlsbERhdGFJbmZvO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5iaWxsRGF0YS5jbGVhckRhdGFSZWdpb24oKTtcclxuICAgICAgdGhpcy5zaG93RGF0YSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGVDaGFuZ2VIYW5kbGVyKGV2dDoge1xyXG4gICAgdHlwZTogYW55LFxyXG4gICAgZGF0YT86IGFueVxyXG4gIH0pIHtcclxuICAgIGlmIChldnQudHlwZSA9PSBFdmVudHMuQ0xJQ0tfRklSU1RfU1VNTUFSWSkge1xyXG4gICAgICB0aGlzLm9wZW5CaWxsRGV0YWlsKGV2dC5kYXRhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1vZGFsUmVmKG1vZGFsUmVmOiBCc01vZGFsUmVmKSB7XHJcbiAgICB0aGlzLm1vZGFsUmVmID0gbW9kYWxSZWY7XHJcblxyXG4gICAgaWYgKHRoaXMuYmlsbEdyYXBoICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5iaWxsR3JhcGguc2V0TW9kYWxSZWYobW9kYWxSZWYpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRHcmFwaEhlaWdodChldnQ6IElSZXNpemVFdmVudCkge1xyXG4gICAgKGV2dC5ob3N0IGFzIEhUTUxFbGVtZW50KS5zdHlsZS50b3AgPSAnJztcclxuICAgIChldnQuaG9zdCBhcyBIVE1MRWxlbWVudCkuc3R5bGUubGVmdCA9ICcnO1xyXG4gICAgdGhpcy5ncmFwaENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5tYWluQ29udGFpbmVyRVIubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgLSBldnQuc2l6ZS5oZWlnaHR9cHhgO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuYmlsbEdyYXBoLnJlZnJlc2goKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZXhwYW5kRGF0YVJlZ2lvbigpIHtcclxuICAgIHRoaXMuZGF0YUZ1bGxTY3JlZW4gPSB0cnVlO1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gJzAnO1xyXG4gIH1cclxuXHJcbiAgY29sbGFwc2VEYXRhUmVnaW9uKCkge1xyXG4gICAgdGhpcy5kYXRhRnVsbFNjcmVlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQgKyBcInB4XCI7XHJcbiAgICB0aGlzLmRpdkRhdGFXcmFwcGVyRVIubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgb25SelJlc2l6ZWQoZXZ0OiBJUmVzaXplRXZlbnQpIHtcclxuXHJcbiAgfVxyXG5cclxuICBncmFwaFpvb21JbigpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnpvb21JbigpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhab29tT3V0KCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguem9vbU91dCgpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhab29tQWN0dWFsKCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguem9vbUFjdHVhbCgpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhQcmludCgpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnByaW50KCk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZChkaXJlY3Rpb246IEJpbGxUcmFja2VyRGlyZWN0aW9uLCBhbGw6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguZXhwYW5kKGRpcmVjdGlvbiwgYWxsKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kVXBBbGwoKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kVXAoKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZERvd24oKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24sIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kRG93bkFsbCgpIHtcclxuICAgIHRoaXMuZ3JhcGhFeHBhbmQoQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93biwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBvcGVuQmlsbERldGFpbChjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgdGhpcy5pbnRlcm5hbFVpU2VydmljZS5vcGVuQmlsbERldGFpbChjZWxsLmJpbGxJbmZvLCBjZWxsLmJpbGxEYXRhSW5mbyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==