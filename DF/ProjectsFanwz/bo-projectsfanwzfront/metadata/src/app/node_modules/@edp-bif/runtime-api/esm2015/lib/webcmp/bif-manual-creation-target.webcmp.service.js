/**
 * @fileoverview added by tsickle
 * Generated from: lib/webcmp/bif-manual-creation-target.webcmp.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Optional } from '@angular/core';
import { MessagerService } from '@farris/ui-messager';
import { BindingData, ViewModel, FrameContext } from '@farris/devkit';
import { StateMachineService, CardDataService } from '@farris/command-services';
import { FormCreateArgs, FormUpdateArgs } from '../ref';
import { BifTargetUiService } from '../bif-manual-creation/service/bif-target-ui.service';
import { BifDataService } from '../bif-manual-creation/service/bif-data.service';
import { FormBillCreationProcessExecutorArgs } from '../entity/form-rest/FormBillCreationProcessExecutorArgs';
/**
 * 手工生单目标端服务类
 */
export class BifManualCreationTargetWebCmpService {
    /**
     * @param {?} dataService
     * @param {?} targetUiService
     * @param {?} stateMachineService
     * @param {?} bindingData
     * @param {?} messagerService
     * @param {?} cardDataService
     * @param {?} viewModel
     * @param {?} frameContext
     */
    constructor(dataService, targetUiService, stateMachineService, bindingData, messagerService, cardDataService, viewModel, frameContext) {
        this.dataService = dataService;
        this.targetUiService = targetUiService;
        this.stateMachineService = stateMachineService;
        this.bindingData = bindingData;
        this.messagerService = messagerService;
        this.cardDataService = cardDataService;
        this.viewModel = viewModel;
        this.frameContext = frameContext;
    }
    /**
     * 加载单据流生单流程执行后数据
     * @param {?} formVoId 表单绑定视图对象 Id
     * @return {?}
     */
    bifLoad(formVoId) {
        /** @type {?} */
        const args = new FormCreateArgs();
        args.formVoId = formVoId;
        //获取生单流程执行结果
        /** @type {?} */
        const res = this.targetUiService.getFormBillCreationProcessExecutorResult();
        args.rpcCreationRuleExecutorResult = res.creationRuleExecutorResult.ConvertToJson();
        //创建实体数据
        this.dataService.createEntityDatas(args).subscribe((/**
         * @param {?} result
         * @return {?}
         */
        (result) => {
            //切换状态机至 “新增”
            this.stateMachineService.transit("Create");
        }));
    }
    /**
     * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    referByTargetVoId(targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions1 = (/** @type {?} */ (modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        modalOptions2 = (/** @type {?} */ (modalOptions2)) === "" || modalOptions2 == null ? {
            title: "来源单据选择器",
            width: 1100,
            height: 550,
        } : modalOptions2;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = (/** @type {?} */ (extParams2)) === "" || extParams2 == null ? undefined : extParams2;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        () => {
            //打开生单流程选择器
            this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            (cp) => {
                //获取表单配置
                this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                (formSettings) => {
                    //打开来源单据选择器模态框
                    this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    (entities) => {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        const args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = entities.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => JSON.stringify(item.toJSON(false, true))));
                        args.targetVoDataIds = targetDataIds;
                        //执行生单流程
                        this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        (result) => {
                            /** @type {?} */
                            const args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    (res) => {
                                        //重新加载表单数据
                                        this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }));
                                }
                                else {
                                    this.messagerService.error("生单结果为空");
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                this.messagerService.error(result.conditionResult.message || "生单流程执行出错");
                            }
                        }));
                    }));
                }));
            }));
        }));
    }
    /**
     * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} sourceVoId 单据流来源视图对象 Id
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    referBySourceVoIdAndTargetVoId(sourceVoId, targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions1 = (/** @type {?} */ (modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        modalOptions2 = (/** @type {?} */ (modalOptions2)) === "" || modalOptions2 == null ? {
            title: "来源单据选择器",
            width: 1100,
            height: 550,
        } : modalOptions2;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = (/** @type {?} */ (extParams2)) === "" || extParams2 == null ? undefined : extParams2;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        () => {
            //打开生单流程选择器
            this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            (cp) => {
                //获取表单配置
                this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                (formSettings) => {
                    //打开来源单据选择器模态框
                    this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    (entities) => {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        const args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = entities.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => JSON.stringify(item.toJSON(false, true))));
                        args.targetVoDataIds = targetDataIds;
                        //执行生单流程
                        this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        (result) => {
                            /** @type {?} */
                            const args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    (res) => {
                                        //重新加载表单数据
                                        this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }));
                                }
                                else {
                                    this.messagerService.error("生单结果为空");
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                this.messagerService.error(result.conditionResult.message || "生单流程执行出错");
                            }
                        }));
                    }));
                }));
            }));
        }));
    }
    /**
     * 特定参照，根据生单流程ID执行选中的生单流程
     *
     * @param {?} processId 单据流生单流程 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} modalOptions 来源单据选择器模态框配置
     * @param {?=} extParams 打开来源单据选择器扩展参数
     * @return {?}
     */
    referByCreationProcessId(processId, targetDataIds, modalOptions, extParams) {
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? {
            title: "来源单据选择器",
            width: 1100,
            height: 550,
        } : modalOptions;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        () => {
            //打开生单流程选择器
            this.dataService.getSlimBillCreationProcessEntityExById(processId).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            (cp) => {
                //获取表单配置
                this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                (formSettings) => {
                    //打开来源单据选择器模态框
                    this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    (entities) => {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        const args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = entities.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => JSON.stringify(item.toJSON(false, true))));
                        args.targetVoDataIds = targetDataIds;
                        //执行生单流程
                        this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        (result) => {
                            /** @type {?} */
                            const args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    (res) => {
                                        //重新加载表单数据
                                        this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }));
                                }
                                else {
                                    this.messagerService.error("生单结果为空");
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                this.messagerService.error(result.conditionResult.message || "生单流程执行出错");
                            }
                        }));
                    }));
                }));
            }));
        }));
    }
    /**
     * 获取来源界面传入的生单流程执行结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    getFormBillCreationProcessExecutorResult() {
        return this.targetUiService.getFormBillCreationProcessExecutorResult();
    }
    /**
     * 根据目标VO Id打开生单流程选择器查找生单流程
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = extParams === "" || extParams == null ? undefined : extParams;
        //打开生单流程选择器
        return this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    }
    /**
     * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
     * @param {?} sourceVoId 来源VO Id
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        return this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    }
    /**
     * 打开来源单据选择器选择数据
     * @param {?} formSettings 表单配置
     * @param {?=} modalOptions 模态框配置
     * @param {?=} extParams 扩展参数
     * @return {?} entities 数据列表 \@type { Observable<Entity[]> }
     */
    openSourceDataSelector4Pull(formSettings, modalOptions, extParams) {
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? {
            title: "来源单据选择器",
            width: 1100,
            height: 550,
        } : modalOptions;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        //打开来源单据选择器模态框
        return this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams);
    }
}
BifManualCreationTargetWebCmpService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
BifManualCreationTargetWebCmpService.ctorParameters = () => [
    { type: BifDataService },
    { type: BifTargetUiService },
    { type: StateMachineService },
    { type: BindingData },
    { type: MessagerService },
    { type: CardDataService },
    { type: ViewModel, decorators: [{ type: Optional }] },
    { type: FrameContext, decorators: [{ type: Optional }] }
];
if (false) {
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.dataService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.targetUiService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.stateMachineService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.bindingData;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.messagerService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.cardDataService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.viewModel;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.frameContext;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlmLW1hbnVhbC1jcmVhdGlvbi10YXJnZXQud2ViY21wLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi93ZWJjbXAvYmlmLW1hbnVhbC1jcmVhdGlvbi10YXJnZXQud2ViY21wLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsT0FBTyxFQUFFLFdBQVcsRUFBVSxTQUFTLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBSWhGLE9BQU8sRUFBRSxjQUFjLEVBQW9CLGNBQWMsRUFBb0IsTUFBTSxRQUFRLENBQUM7QUFDNUYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDMUYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxtQ0FBbUMsRUFBRSxNQUFNLHlEQUF5RCxDQUFDOzs7O0FBUTlHLE1BQU0sT0FBTyxvQ0FBb0M7Ozs7Ozs7Ozs7O0lBQzdDLFlBQ1csV0FBMkIsRUFDM0IsZUFBbUMsRUFDbkMsbUJBQXdDLEVBQ3hDLFdBQXdCLEVBQ3hCLGVBQWdDLEVBQ2hDLGVBQWdDLEVBQ3BCLFNBQW9CLEVBQ3BCLFlBQTBCO1FBUHRDLGdCQUFXLEdBQVgsV0FBVyxDQUFnQjtRQUMzQixvQkFBZSxHQUFmLGVBQWUsQ0FBb0I7UUFDbkMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUN4QyxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFDaEMsb0JBQWUsR0FB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QTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBNb2RhbE9wdGlvbnMgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgQmluZGluZ0RhdGEsIEVudGl0eSwgVmlld01vZGVsLCBGcmFtZUNvbnRleHQgfSBmcm9tICdAZmFycmlzL2RldmtpdCc7XHJcbmltcG9ydCB7IFN0YXRlTWFjaGluZVNlcnZpY2UsIENhcmREYXRhU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcyc7XHJcblxyXG5pbXBvcnQgeyBGb3JtU2V0dGluZ3MgfSBmcm9tICdAZWRwLWFpZi9jb21tb24tYXBpJztcclxuaW1wb3J0IHsgSVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeCB9IGZyb20gXCJAZWRwLWJpZi9jb21tb24tYXBpXCI7XHJcbmltcG9ydCB7IEZvcm1DcmVhdGVBcmdzLCBGb3JtQ3JlYXRlUmVzdWx0LCBGb3JtVXBkYXRlQXJncywgRm9ybVVwZGF0ZVJlc3VsdCB9IGZyb20gJy4uL3JlZic7XHJcbmltcG9ydCB7IEJpZlRhcmdldFVpU2VydmljZSB9IGZyb20gJy4uL2JpZi1tYW51YWwtY3JlYXRpb24vc2VydmljZS9iaWYtdGFyZ2V0LXVpLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBCaWZEYXRhU2VydmljZSB9IGZyb20gJy4uL2JpZi1tYW51YWwtY3JlYXRpb24vc2VydmljZS9iaWYtZGF0YS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3MgfSBmcm9tICcuLi9lbnRpdHkvZm9ybS1yZXN0L0Zvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzJztcclxuaW1wb3J0IHsgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCB9IGZyb20gJy4uL2VudGl0eS9mb3JtLXJlc3QvRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuXHJcbi8qKlxyXG4gKiDmiYvlt6XnlJ/ljZXnm67moIfnq6/mnI3liqHnsbtcclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEJpZk1hbnVhbENyZWF0aW9uVGFyZ2V0V2ViQ21wU2VydmljZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgZGF0YVNlcnZpY2U6IEJpZkRhdGFTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyB0YXJnZXRVaVNlcnZpY2U6IEJpZlRhcmdldFVpU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgc3RhdGVNYWNoaW5lU2VydmljZTogU3RhdGVNYWNoaW5lU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgYmluZGluZ0RhdGE6IEJpbmRpbmdEYXRhLFxyXG4gICAgICAgIHB1YmxpYyBtZXNzYWdlclNlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgY2FyZERhdGFTZXJ2aWNlOiBDYXJkRGF0YVNlcnZpY2UsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHVibGljIHZpZXdNb2RlbDogVmlld01vZGVsLFxyXG4gICAgICAgIEBPcHRpb25hbCgpIHB1YmxpYyBmcmFtZUNvbnRleHQ6IEZyYW1lQ29udGV4dCxcclxuICAgICkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9veWNleaNrua1geeUn+WNlea1geeoi+aJp+ihjOWQjuaVsOaNrlxyXG4gICAgICogQHBhcmFtIGZvcm1Wb0lkIOihqOWNlee7keWumuinhuWbvuWvueixoSBJZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYmlmTG9hZChmb3JtVm9JZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQ3JlYXRlQXJncygpO1xyXG4gICAgICAgIGFyZ3MuZm9ybVZvSWQgPSBmb3JtVm9JZDtcclxuICAgICAgICAvL+iOt+WPlueUn+WNlea1geeoi+aJp+ihjOe7k+aenFxyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudGFyZ2V0VWlTZXJ2aWNlLmdldEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQoKTtcclxuICAgICAgICBhcmdzLnJwY0NyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzLmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0LkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICAvL+WIm+W7uuWunuS9k+aVsOaNrlxyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuY3JlYXRlRW50aXR5RGF0YXMoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAocmVzdWx0OiBGb3JtQ3JlYXRlUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+WIh+aNoueKtuaAgeacuuiHsyDigJzmlrDlop7igJ1cclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNYWNoaW5lU2VydmljZS50cmFuc2l0KFwiQ3JlYXRlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWPgueFp++8jOagueaNruebruagh1ZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5bm25omn6KGM6YCJ5Lit55qE55Sf5Y2V5rWB56iLXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB0YXJnZXRWb0lkIOWNleaNrua1geebruagh+inhuWbvuWvueixoSBJZFxyXG4gICAgICogQHBhcmFtIHRhcmdldERhdGFJZHMg55uu5qCH5Y2V5o2u5Li76KGoSWTliJfooahcclxuICAgICAqIEBwYXJhbSBiaXpGbG93Y2hhcnRJZCDkuJrliqHlnLrmma/lm75JZFxyXG4gICAgICogQHBhcmFtIG1vZGFsT3B0aW9uczEg55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5qih5oCB5qGG6YWN572uXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwg55Sf5Y2V5rWB56iL6YCJ5oup5Zmo6Ieq5a6a5LmJ6YCJ5oup5ZmodXJsXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zMiDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYbphY3nva5cclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMxIOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOW8ueeql+aJqeWxleWPguaVsFxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtczIg5omT5byA5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo5omp5bGV5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWZlckJ5VGFyZ2V0Vm9JZCh0YXJnZXRWb0lkOiBzdHJpbmcsIHRhcmdldERhdGFJZHM/OiBzdHJpbmdbXSwgYml6Rmxvd2NoYXJ0SWQ/OiBzdHJpbmcsIG1vZGFsT3B0aW9uczE/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBtb2RhbE9wdGlvbnMyPzogTW9kYWxPcHRpb25zLCBleHRQYXJhbXMxPzoge30sIGV4dFBhcmFtczI/OiB7IFtrZXk6IHN0cmluZ106IGFueTsgYm9vdHN0cmFwQ29tcG9uZW50U2VsZWN0b3I/OiBzdHJpbmc7IH0pIHtcclxuICAgICAgICBiaXpGbG93Y2hhcnRJZCA9IGJpekZsb3djaGFydElkID09PSBcIlwiIHx8IGJpekZsb3djaGFydElkID09IG51bGwgPyB1bmRlZmluZWQgOiBiaXpGbG93Y2hhcnRJZDtcclxuICAgICAgICB0YXJnZXREYXRhSWRzID0gdGFyZ2V0RGF0YUlkcyBhcyBhbnkgPT09IFwiXCIgfHwgdGFyZ2V0RGF0YUlkcyA9PSBudWxsID8gW3RoaXMuYmluZGluZ0RhdGEuZ2V0T2JqZWN0KCkuaWRdIDogdGFyZ2V0RGF0YUlkcztcclxuICAgICAgICBtb2RhbE9wdGlvbnMxID0gbW9kYWxPcHRpb25zMSBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zMSA9PSBudWxsID8gdW5kZWZpbmVkIDogbW9kYWxPcHRpb25zMTtcclxuICAgICAgICBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09PSBcIlwiIHx8IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09IG51bGwgPyB1bmRlZmluZWQgOiBjdXN0b21TZWxlY3Rvck1vZHVsZVVybDtcclxuICAgICAgICBtb2RhbE9wdGlvbnMyID0gbW9kYWxPcHRpb25zMiBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zMiA9PSBudWxsID8ge1xyXG4gICAgICAgICAgICB0aXRsZTogXCLmnaXmupDljZXmja7pgInmi6nlmahcIixcclxuICAgICAgICAgICAgd2lkdGg6IDExMDAsXHJcbiAgICAgICAgICAgIGhlaWdodDogNTUwLFxyXG4gICAgICAgIH0gOiBtb2RhbE9wdGlvbnMyO1xyXG4gICAgICAgIGV4dFBhcmFtczEgPSBleHRQYXJhbXMxID09PSBcIlwiIHx8IGV4dFBhcmFtczEgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczE7XHJcbiAgICAgICAgZXh0UGFyYW1zMiA9IGV4dFBhcmFtczIgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtczIgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczI7XHJcblxyXG4gICAgICAgIC8v5pu05paw6KGo5Y2V546w5pyJ5Y+Y5pu06ZuGXHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UudXBkYXRlKCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+aJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqFxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRQdWxsKHRhcmdldFZvSWQsIGJpekZsb3djaGFydElkLCBtb2RhbE9wdGlvbnMxLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCwgZXh0UGFyYW1zMSkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgIChjcDogSVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+iOt+WPluihqOWNlemFjee9rlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmdldEZvcm1TZXR0aW5nc0J5SWQoY3AuZm9ybVNldHRpbmdzSWQpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmb3JtU2V0dGluZ3M6IEZvcm1TZXR0aW5ncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omT5byA5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo5qih5oCB5qGGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zMiwgZXh0UGFyYW1zMikuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZW50aXRpZXM6IEVudGl0eVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aehOmAoOeUn+WNlea1geeoi+aJp+ihjOWPguaVsOWunuS9k1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5iaWxsQ3JlYXRpb25Qcm9jZXNzSWQgPSBjcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY3JlYXRpb25SdWxlSWQgPSBjcC5jcmVhdGlvblJ1bGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3PnmoRzb3VyY2VWb0VudGl0eURhdGFz5bGe5oCn5Li65YmN56uv5a6e5L2T5bqP5YiX5YyW5ZCO55qE5a2X56ym5Liy5YiX6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NvdXJjZVZvRW50aXR5RGF0YXPliJfooajkuK3nmoTmr4/kuKrlrZfnrKbkuLLvvIzlnKjnu5PmnoTkuIrlupTkuI7ljZXmja7mtYHlrprkuYnkuK3miYDpgInkuK3nmoTkuIrmuLjop4blm77lr7nosaHkuIDoh7TjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3Muc291cmNlVm9FbnRpdHlEYXRhcyA9IGVudGl0aWVzLm1hcChpdGVtID0+IEpTT04uc3RyaW5naWZ5KGl0ZW0udG9KU09OKGZhbHNlLCB0cnVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy50YXJnZXRWb0RhdGFJZHMgPSB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miafooYznlJ/ljZXmtYHnqItcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZXhlY3V0ZUJpbGxDcmVhdGlvblByb2Nlc3MoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQ6IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtVXBkYXRlQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hcHBpbmfmiafooYzmnaHku7bliKTmlq3nu5PmnpzkuLp0cnVl5pe25omN5Lya5omn6KGM55Sf5Y2V5rWB56iL5b6X5Yiw55Sf5Y2V57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29uZGl0aW9uUmVzdWx0LmNvbmRpdGlvbkV4ZWN1dGlvblJlc3VsdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eUn+WNlee7k+aenOS4jeS4uuepulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCAmJiByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQubWFwcGluZ1Jlc3VsdHMgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnJwY0NyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0LkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+abtOaWsOihqOWNleaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudXBkYXRlRW50aXR5RGF0YXMoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzOiBGb3JtVXBkYXRlUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mHjeaWsOWKoOi9veihqOWNleaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UubG9hZCh0YXJnZXREYXRhSWRzWzBdKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKFwi55Sf5Y2V57uT5p6c5Li656m6XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuLpmYWxzZeaXtuWPr+W+l+WIsOmFjee9rueahOmUmeivr+aPkOekuuS/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IFwi55Sf5Y2V5rWB56iL5omn6KGM5Ye66ZSZXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnibnlrprlj4LnhafvvIzmoLnmja7mnaXmupBWTyBJZOWSjOebruagh1ZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5bm25omn6KGM6YCJ5Lit55qE55Sf5Y2V5rWB56iLXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBzb3VyY2VWb0lkIOWNleaNrua1geadpea6kOinhuWbvuWvueixoSBJZFxyXG4gICAgICogQHBhcmFtIHRhcmdldFZvSWQg5Y2V5o2u5rWB55uu5qCH6KeG5Zu+5a+56LGhIElkXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0RGF0YUlkcyDnm67moIfljZXmja7kuLvooahJZOWIl+ihqFxyXG4gICAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zMSDnlJ/ljZXmtYHnqIvpgInmi6nlmajmqKHmgIHmoYbphY3nva5cclxuICAgICAqIEBwYXJhbSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCDnlJ/ljZXmtYHnqIvpgInmi6nlmajoh6rlrprkuYnpgInmi6nlmah1cmxcclxuICAgICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMyIOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtczEg5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5by556qX5omp5bGV5Y+C5pWwXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zMiDmiZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmianlsZXlj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlZmVyQnlTb3VyY2VWb0lkQW5kVGFyZ2V0Vm9JZChzb3VyY2VWb0lkOiBzdHJpbmcsIHRhcmdldFZvSWQ6IHN0cmluZywgdGFyZ2V0RGF0YUlkcz86IHN0cmluZ1tdLCBiaXpGbG93Y2hhcnRJZD86IHN0cmluZywgbW9kYWxPcHRpb25zMT86IE1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw/OiBzdHJpbmcsIG1vZGFsT3B0aW9uczI/OiBNb2RhbE9wdGlvbnMsIGV4dFBhcmFtczE/OiB7fSwgZXh0UGFyYW1zMj86IHsgW2tleTogc3RyaW5nXTogYW55OyBib290c3RyYXBDb21wb25lbnRTZWxlY3Rvcj86IHN0cmluZzsgfSkge1xyXG4gICAgICAgIGJpekZsb3djaGFydElkID0gYml6Rmxvd2NoYXJ0SWQgPT09IFwiXCIgfHwgYml6Rmxvd2NoYXJ0SWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJpekZsb3djaGFydElkO1xyXG4gICAgICAgIHRhcmdldERhdGFJZHMgPSB0YXJnZXREYXRhSWRzIGFzIGFueSA9PT0gXCJcIiB8fCB0YXJnZXREYXRhSWRzID09IG51bGwgPyBbdGhpcy5iaW5kaW5nRGF0YS5nZXRPYmplY3QoKS5pZF0gOiB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgIG1vZGFsT3B0aW9uczEgPSBtb2RhbE9wdGlvbnMxIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMxID09IG51bGwgPyB1bmRlZmluZWQgOiBtb2RhbE9wdGlvbnMxO1xyXG4gICAgICAgIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT09IFwiXCIgfHwgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsO1xyXG4gICAgICAgIG1vZGFsT3B0aW9uczIgPSBtb2RhbE9wdGlvbnMyIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMyID09IG51bGwgPyB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIuadpea6kOWNleaNrumAieaLqeWZqFwiLFxyXG4gICAgICAgICAgICB3aWR0aDogMTEwMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA1NTAsXHJcbiAgICAgICAgfSA6IG1vZGFsT3B0aW9uczI7XHJcbiAgICAgICAgZXh0UGFyYW1zMSA9IGV4dFBhcmFtczEgPT09IFwiXCIgfHwgZXh0UGFyYW1zMSA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zMTtcclxuICAgICAgICBleHRQYXJhbXMyID0gZXh0UGFyYW1zMiBhcyBhbnkgPT09IFwiXCIgfHwgZXh0UGFyYW1zMiA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zMjtcclxuXHJcbiAgICAgICAgLy/mm7TmlrDooajljZXnjrDmnInlj5jmm7Tpm4ZcclxuICAgICAgICB0aGlzLmNhcmREYXRhU2VydmljZS51cGRhdGUoKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8v5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5ZmoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFNwZWNpZmljUHVsbChzb3VyY2VWb0lkLCB0YXJnZXRWb0lkLCBiaXpGbG93Y2hhcnRJZCwgbW9kYWxPcHRpb25zMSwgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwsIGV4dFBhcmFtczEpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAoY3A6IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflj5booajljZXphY3nva5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRGb3JtU2V0dGluZ3NCeUlkKGNwLmZvcm1TZXR0aW5nc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZm9ybVNldHRpbmdzOiBGb3JtU2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLm9wZW5Tb3VyY2VEYXRhU2VsZWN0b3I0UHVsbChmb3JtU2V0dGluZ3MsIG1vZGFsT3B0aW9uczIsIGV4dFBhcmFtczIpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVudGl0aWVzOiBFbnRpdHlbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnoTpgKDnlJ/ljZXmtYHnqIvmiafooYzlj4LmlbDlrp7kvZNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuYmlsbENyZWF0aW9uUHJvY2Vzc0lkID0gY3AuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmNyZWF0aW9uUnVsZUlkID0gY3AuY3JlYXRpb25SdWxlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0Zvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdz55qEc291cmNlVm9FbnRpdHlEYXRhc+WxnuaAp+S4uuWJjeerr+WunuS9k+W6j+WIl+WMluWQjueahOWtl+espuS4suWIl+ihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zb3VyY2VWb0VudGl0eURhdGFz5YiX6KGo5Lit55qE5q+P5Liq5a2X56ym5Liy77yM5Zyo57uT5p6E5LiK5bqU5LiO5Y2V5o2u5rWB5a6a5LmJ5Lit5omA6YCJ5Lit55qE5LiK5ri46KeG5Zu+5a+56LGh5LiA6Ie044CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YXMgPSBlbnRpdGllcy5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtLnRvSlNPTihmYWxzZSwgdHJ1ZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MudGFyZ2V0Vm9EYXRhSWRzID0gdGFyZ2V0RGF0YUlkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omn6KGM55Sf5Y2V5rWB56iLXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmV4ZWN1dGVCaWxsQ3JlYXRpb25Qcm9jZXNzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0OiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybVVwZGF0ZUFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXBwaW5n5omn6KGM5p2h5Lu25Yik5pat57uT5p6c5Li6dHJ1ZeaXtuaJjeS8muaJp+ihjOeUn+WNlea1geeoi+W+l+WIsOeUn+WNlee7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5jb25kaXRpb25FeGVjdXRpb25SZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/ljZXnu5PmnpzkuI3kuLrnqbpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5ycGNDcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCA9IHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mm7TmlrDooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnVwZGF0ZUVudGl0eURhdGFzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlczogRm9ybVVwZGF0ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ph43mlrDliqDovb3ooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLmxvYWQodGFyZ2V0RGF0YUlkc1swXSkuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihcIueUn+WNlee7k+aenOS4uuepulwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHJlc3VsdC5jb25kaXRpb25SZXN1bHQubWVzc2FnZSB8fCBcIueUn+WNlea1geeoi+aJp+ihjOWHuumUmVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog54m55a6a5Y+C54Wn77yM5qC55o2u55Sf5Y2V5rWB56iLSUTmiafooYzpgInkuK3nmoTnlJ/ljZXmtYHnqItcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHByb2Nlc3NJZCDljZXmja7mtYHnlJ/ljZXmtYHnqIsgSWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXREYXRhSWRzIOebruagh+WNleaNruS4u+ihqElk5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtcyDmiZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmianlsZXlj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlZmVyQnlDcmVhdGlvblByb2Nlc3NJZChwcm9jZXNzSWQ6IHN0cmluZywgdGFyZ2V0RGF0YUlkcz86IHN0cmluZ1tdLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGV4dFBhcmFtcz86IHsgW2tleTogc3RyaW5nXTogYW55OyBib290c3RyYXBDb21wb25lbnRTZWxlY3Rvcj86IHN0cmluZzsgfSkge1xyXG4gICAgICAgIHRhcmdldERhdGFJZHMgPSB0YXJnZXREYXRhSWRzIGFzIGFueSA9PT0gXCJcIiB8fCB0YXJnZXREYXRhSWRzID09IG51bGwgPyBbdGhpcy5iaW5kaW5nRGF0YS5nZXRPYmplY3QoKS5pZF0gOiB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgIG1vZGFsT3B0aW9ucyA9IG1vZGFsT3B0aW9ucyBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zID09IG51bGwgPyB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIuadpea6kOWNleaNrumAieaLqeWZqFwiLFxyXG4gICAgICAgICAgICB3aWR0aDogMTEwMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA1NTAsXHJcbiAgICAgICAgfSA6IG1vZGFsT3B0aW9ucztcclxuICAgICAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG5cclxuICAgICAgICAvL+abtOaWsOihqOWNleeOsOacieWPmOabtOmbhlxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLnVwZGF0ZSgpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy/miZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmahcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeEJ5SWQocHJvY2Vzc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgKGNwOiBJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W6KGo5Y2V6YWN572uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0Rm9ybVNldHRpbmdzQnlJZChjcC5mb3JtU2V0dGluZ3NJZCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuU291cmNlRGF0YVNlbGVjdG9yNFB1bGwoZm9ybVNldHRpbmdzLCBtb2RhbE9wdGlvbnMsIGV4dFBhcmFtcykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZW50aXRpZXM6IEVudGl0eVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aehOmAoOeUn+WNlea1geeoi+aJp+ihjOWPguaVsOWunuS9k1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5iaWxsQ3JlYXRpb25Qcm9jZXNzSWQgPSBjcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuY3JlYXRpb25SdWxlSWQgPSBjcC5jcmVhdGlvblJ1bGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3PnmoRzb3VyY2VWb0VudGl0eURhdGFz5bGe5oCn5Li65YmN56uv5a6e5L2T5bqP5YiX5YyW5ZCO55qE5a2X56ym5Liy5YiX6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NvdXJjZVZvRW50aXR5RGF0YXPliJfooajkuK3nmoTmr4/kuKrlrZfnrKbkuLLvvIzlnKjnu5PmnoTkuIrlupTkuI7ljZXmja7mtYHlrprkuYnkuK3miYDpgInkuK3nmoTkuIrmuLjop4blm77lr7nosaHkuIDoh7TjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3Muc291cmNlVm9FbnRpdHlEYXRhcyA9IGVudGl0aWVzLm1hcChpdGVtID0+IEpTT04uc3RyaW5naWZ5KGl0ZW0udG9KU09OKGZhbHNlLCB0cnVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy50YXJnZXRWb0RhdGFJZHMgPSB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miafooYznlJ/ljZXmtYHnqItcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZXhlY3V0ZUJpbGxDcmVhdGlvblByb2Nlc3MoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQ6IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtVXBkYXRlQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hcHBpbmfmiafooYzmnaHku7bliKTmlq3nu5PmnpzkuLp0cnVl5pe25omN5Lya5omn6KGM55Sf5Y2V5rWB56iL5b6X5Yiw55Sf5Y2V57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29uZGl0aW9uUmVzdWx0LmNvbmRpdGlvbkV4ZWN1dGlvblJlc3VsdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eUn+WNlee7k+aenOS4jeS4uuepulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCAmJiByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQubWFwcGluZ1Jlc3VsdHMgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnJwY0NyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0LkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+abtOaWsOihqOWNleaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudXBkYXRlRW50aXR5RGF0YXMoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzOiBGb3JtVXBkYXRlUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mHjeaWsOWKoOi9veihqOWNleaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UubG9hZCh0YXJnZXREYXRhSWRzWzBdKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKFwi55Sf5Y2V57uT5p6c5Li656m6XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuLpmYWxzZeaXtuWPr+W+l+WIsOmFjee9rueahOmUmeivr+aPkOekuuS/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IFwi55Sf5Y2V5rWB56iL5omn6KGM5Ye66ZSZXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bmnaXmupDnlYzpnaLkvKDlhaXnmoTnlJ/ljZXmtYHnqIvmiafooYznu5PmnpxcclxuICAgICAqIEByZXR1cm5zIGNyZWF0aW9uUmVzdWx0IOeUn+WNlea1geeoi+aJp+ihjOe7k+aenCBAdHlwZSB7IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQgfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Rm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCgpOiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRVaVNlcnZpY2UuZ2V0Rm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u55uu5qCHVk8gSWTmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajmn6Xmib7nlJ/ljZXmtYHnqItcclxuICAgICAqIEBwYXJhbSB0YXJnZXRWb0lkIOebruagh1ZPIElkXHJcbiAgICAgKiBAcGFyYW0gYml6Rmxvd2NoYXJ0SWQg5Lia5Yqh5Zy65pmv5Zu+SWRcclxuICAgICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMg5qih5oCB5qGG6YWN572uXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwg6Ieq5a6a5LmJ6YCJ5oup5ZmoVXJsIFxyXG4gICAgICogQHBhcmFtIGV4dFBhcmFtcyDmianlsZXlj4LmlbBcclxuICAgICAqIEByZXR1cm5zIGNyZWF0aW9uUHJvY2VzcyDnlJ/ljZXmtYHnqIsgQHR5cGUgeyBPYnNlcnZhYmxlPElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXg+IH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wZW5CaWxsQ3JlYXRpb25Qcm9jZXNzU2VsZWN0b3I0UHVsbCh0YXJnZXRWb0lkOiBzdHJpbmcsIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBleHRQYXJhbXM/OiB7fSk6IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4ge1xyXG4gICAgICAgIGJpekZsb3djaGFydElkID0gYml6Rmxvd2NoYXJ0SWQgPT09IFwiXCIgfHwgYml6Rmxvd2NoYXJ0SWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJpekZsb3djaGFydElkO1xyXG4gICAgICAgIG1vZGFsT3B0aW9ucyA9IG1vZGFsT3B0aW9ucyBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zID09IG51bGwgPyB1bmRlZmluZWQgOiBtb2RhbE9wdGlvbnM7XHJcbiAgICAgICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICAgICAgZXh0UGFyYW1zID0gZXh0UGFyYW1zID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG4gICAgICAgIC8v5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5ZmoXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLm9wZW5CaWxsQ3JlYXRpb25Qcm9jZXNzU2VsZWN0b3I0UHVsbCh0YXJnZXRWb0lkLCBiaXpGbG93Y2hhcnRJZCwgbW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCwgZXh0UGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruadpea6kFZPIElk5ZKM55uu5qCHVk8gSWTmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajmn6Xmib7nlJ/ljZXmtYHnqItcclxuICAgICAqIEBwYXJhbSBzb3VyY2VWb0lkIOadpea6kFZPIElkXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Vm9JZCDnm67moIdWTyBJZFxyXG4gICAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOaooeaAgeahhumFjee9rlxyXG4gICAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOiHquWumuS5iemAieaLqeWZqFVybCBcclxuICAgICAqIEBwYXJhbSBleHRQYXJhbXMg5omp5bGV5Y+C5pWwXHJcbiAgICAgKiBAcmV0dXJucyBjcmVhdGlvblByb2Nlc3Mg55Sf5Y2V5rWB56iLIEB0eXBlIHsgT2JzZXJ2YWJsZTxJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4PiB9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFNwZWNpZmljUHVsbChzb3VyY2VWb0lkOiBzdHJpbmcsIHRhcmdldFZvSWQ6IHN0cmluZywgYml6Rmxvd2NoYXJ0SWQ/OiBzdHJpbmcsIG1vZGFsT3B0aW9ucz86IE1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw/OiBzdHJpbmcsIGV4dFBhcmFtcz86IHt9KTogT2JzZXJ2YWJsZTxJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4PiB7XHJcbiAgICAgICAgYml6Rmxvd2NoYXJ0SWQgPSBiaXpGbG93Y2hhcnRJZCA9PT0gXCJcIiB8fCBiaXpGbG93Y2hhcnRJZCA9PSBudWxsID8gdW5kZWZpbmVkIDogYml6Rmxvd2NoYXJ0SWQ7XHJcbiAgICAgICAgbW9kYWxPcHRpb25zID0gbW9kYWxPcHRpb25zIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1vZGFsT3B0aW9ucztcclxuICAgICAgICBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09PSBcIlwiIHx8IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09IG51bGwgPyB1bmRlZmluZWQgOiBjdXN0b21TZWxlY3Rvck1vZHVsZVVybDtcclxuICAgICAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFNwZWNpZmljUHVsbChzb3VyY2VWb0lkLCB0YXJnZXRWb0lkLCBiaXpGbG93Y2hhcnRJZCwgbW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCwgZXh0UGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOmAieaLqeaVsOaNrlxyXG4gICAgICogQHBhcmFtIGZvcm1TZXR0aW5ncyDooajljZXphY3nva5cclxuICAgICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMg5qih5oCB5qGG6YWN572uXHJcbiAgICAgKiBAcGFyYW0gZXh0UGFyYW1zIOaJqeWxleWPguaVsFxyXG4gICAgICogQHJldHVybnMgZW50aXRpZXMg5pWw5o2u5YiX6KGoIEB0eXBlIHsgT2JzZXJ2YWJsZTxFbnRpdHlbXT4gfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGV4dFBhcmFtcz86IHsgW2tleTogc3RyaW5nXTogYW55OyBib290c3RyYXBDb21wb25lbnRTZWxlY3Rvcj86IHN0cmluZzsgfSk6IE9ic2VydmFibGU8RW50aXR5W10+IHtcclxuICAgICAgICBtb2RhbE9wdGlvbnMgPSBtb2RhbE9wdGlvbnMgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9ucyA9PSBudWxsID8ge1xyXG4gICAgICAgICAgICB0aXRsZTogXCLmnaXmupDljZXmja7pgInmi6nlmahcIixcclxuICAgICAgICAgICAgd2lkdGg6IDExMDAsXHJcbiAgICAgICAgICAgIGhlaWdodDogNTUwLFxyXG4gICAgICAgIH0gOiBtb2RhbE9wdGlvbnM7XHJcbiAgICAgICAgZXh0UGFyYW1zID0gZXh0UGFyYW1zIGFzIGFueSA9PT0gXCJcIiB8fCBleHRQYXJhbXMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtcztcclxuXHJcbiAgICAgICAgLy/miZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYZcclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zLCBleHRQYXJhbXMpO1xyXG4gICAgfVxyXG59Il19