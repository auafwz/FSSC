/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { switchMap } from 'rxjs/operators';
/*
* @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-12-18 18:44:13
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-29 08:41:39
 * @Company: Inspur
 * @Version: v0.0.1
 */
import { Component, Input, TemplateRef, Directive, ContentChildren, QueryList, HostListener, Output, EventEmitter, ElementRef, Injector, ViewChild, Optional, Self, NgZone, Renderer2, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisTemplateDirective, CommonUtils, IdService, FarrisComponentInstanceService } from '@farris/ui-common';
import { ResizeService } from '@farris/ui-common/events';
import { ColumnFormatService } from '@farris/ui-common/column';
import { InputGroupComponent } from '@farris/ui-input-group';
import { LocaleService } from '@farris/ui-locale';
import { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';
import { of, BehaviorSubject } from 'rxjs';
import { map } from 'rxjs/operators';
import { extend, remove } from 'lodash-es';
import ResizeObserver from 'resize-observer-polyfill';
import { VirtualizedLoaderService } from './virtualized-loader.service';
import { TreetableService } from './treetable.service';
import { SearchHandle } from './search.handle';
import { TTHotkeys } from './hotkeys';
/**
 * 单元格点事件参数
 * @record
 */
export function CellClickParam() { }
if (false) {
    /** @type {?} */
    CellClickParam.prototype.event;
    /** @type {?} */
    CellClickParam.prototype.col;
    /** @type {?} */
    CellClickParam.prototype.node;
}
/**
 * 节点钩选事件
 * @record
 */
export function NodeCheckedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.originalEvent;
    /** @type {?} */
    NodeCheckedParam.prototype.node;
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.nodes;
    /** @type {?} */
    NodeCheckedParam.prototype.instance;
}
/**
 * @record
 */
export function NodeSelectedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.originalEvent;
    /** @type {?} */
    NodeSelectedParam.prototype.node;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.type;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.index;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.parents;
    /** @type {?} */
    NodeSelectedParam.prototype.instance;
}
var TreeTableColumnDirective = /** @class */ (function () {
    function TreeTableColumnDirective() {
    }
    TreeTableColumnDirective.decorators = [
        { type: Directive, args: [{
                    selector: 'tt-column, [tt-column]'
                },] }
    ];
    TreeTableColumnDirective.propDecorators = {
        field: [{ type: Input }],
        title: [{ type: Input }],
        width: [{ type: Input }],
        hAlign: [{ type: Input }],
        align: [{ type: Input }],
        formatter: [{ type: Input }]
    };
    return TreeTableColumnDirective;
}());
export { TreeTableColumnDirective };
if (false) {
    /** @type {?} */
    TreeTableColumnDirective.prototype.field;
    /** @type {?} */
    TreeTableColumnDirective.prototype.title;
    /** @type {?} */
    TreeTableColumnDirective.prototype.width;
    /** @type {?} */
    TreeTableColumnDirective.prototype.hAlign;
    /** @type {?} */
    TreeTableColumnDirective.prototype.align;
    /** @type {?} */
    TreeTableColumnDirective.prototype.formatter;
}
var TreeTableComponent = /** @class */ (function () {
    function TreeTableComponent(ttService, el, resizeSer, renderer, utils, colFormatSer, shortcuts, cdRef, ngZone, injector) {
        var _this = this;
        this.ttService = ttService;
        this.el = el;
        this.resizeSer = resizeSer;
        this.renderer = renderer;
        this.utils = utils;
        this.colFormatSer = colFormatSer;
        this.shortcuts = shortcuts;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.injector = injector;
        this.id = '';
        /**
         * 宽度
         */
        this.width = 500;
        /**
         * 高度
         */
        this.height = 400;
        this.showFilterBar = false;
        this.headerHeight = 35;
        /**
         * 表头折行
         */
        this.headerWrap = false;
        /**
         * 行高
         */
        this.rowHeight = 29;
        /**
         * 列信息
         */
        this.columns = [];
        this._groupColumns = [];
        /**
         * 启用多表头
         */
        this.useGroupHeader = false;
        this.fitColumns = true;
        this.allColumnsTitle = '所有列';
        /**
         * 显示连接线，默认为 false
         */
        this.showLines = false;
        this.showLinesOnHover = false;
        /**
         * 是否启用多选。 默认为单选
         */
        this.multiSelect = false;
        this.singleSelect = true;
        /**
         * 启用多选后，是否显示checkbox
         */
        this.showCheckbox = false;
        /**
         * 显示边框线
         */
        this.showBorder = true;
        this.showCheckAll = true;
        this.showHeader = true;
        /**
         * 启用斑马线
         */
        this.striped = false;
        /**
         * 启用鼠标划过效果
         */
        this.hovered = true;
        /**
         * 禁用。 禁用时不允许选中行
         */
        this.disabled = false;
        /**
         * 数据加载方式; 默认值 为 all
         * - all: 全部加载
         * - async: 分层加载
         */
        this.loadDataType = 'all';
        /**
         * 固定表头
         */
        this.fixedHeader = false;
        /**
         * 当多选时，选中当前行并钩选
         */
        this.checkOnSelect = false;
        /**
         * 当多选时，钩选并选中当前行
         */
        this.selectOnCheck = false;
        /**
         * 启用多选时，此属性为true 时，仅当前行选中
         */
        this.onlySelectSelf = false;
        /**
         * 启用列宽调整
         */
        this.resizableColumns = true;
        /**
         * 设置为true时自适应父容的尺寸
         */
        this.fit = false;
        /**
         * 启用级联选中功能
         */
        this.cascadeCheck = true;
        /**
         * 向下级联选中
         */
        this.cascadeDown = true;
        /**
         * 向上级联选中
         */
        this.cascadeUp = true;
        /**
         * 空数据时，显示的提示文本
         */
        this.emptyMessage = '暂无数据';
        /**
         * 缩进间距，默认为 16px
         */
        this.indentSpacing = 16;
        /**
         * 单击行选中后，在次点击不会被取消选中状态;
         */
        this.keepSelect = true;
        /**
         * 虚拟加载
         */
        this.virtualized = false;
        /**
         * 仅允许选择叶子节点
         * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
         * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
         * - no: 允许选择所有节点；服务器端设置失效
         */
        this.onlySelectLeaf = 'default';
        /**
         * 显示图标
         */
        this.showIcon = false;
        /**
         * 叶子节点图标
         */
        this.leafIcon = 'file';
        /**
         * 节点展开图标
         */
        this.expandIcon = 'folder-open';
        /**
         * 节点折叠图标
         */
        this.collapseIcon = 'folder';
        this.foldIcon = 'treetable-toggler';
        this.unfoldIcon = 'extanded treetable-toggler';
        /**
         * 启用节点图标从数据中获取。 默认为 false
         */
        this.useIconFromData = false;
        /**
         * 当数据源中icon未设置时使用内置ICON. 默认为 true
         */
        this.whenDataIconEmptyUseDefault = true;
        /**
         * 从数据源字段中获取图标
         */
        this.iconField = '';
        /**
         * 启用远端排序
         */
        this.remoteSort = true;
        /**
         * 启用前端文本查找
         */
        this.enableFindText = false;
        // 树列表默认展开层级。 -1： 不展开； 0： 全部展开； >0:  展开到指定级数；
        this.expandLevel = -1;
        this.selectValue = '';
        this.selectValueChange = new EventEmitter();
        /**
         * 启用双击展开节点
         */
        this.dblClickExpand = true;
        /**
         * 选中节点ID数组
         */
        this.selectValues = [];
        this.selectValuesChange = new EventEmitter();
        /**
         * 是否禁止折行，默认不折行
         */
        this.nowrap = true;
        this.checkValues = [];
        this.checkValuesChange = new EventEmitter();
        /**
         * 分页信息
         */
        this.pagination = false;
        /**
         * 分页加载子节点数据
         */
        this.paginationForChildren = false;
        /**
         * 分页条显示模式， default, simple
         */
        this.pagerViewMode = 'default';
        /**
         * 启用服务器端分页
         */
        this.pagerOnServer = true;
        /**
         * 每页记录数
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 分页区高度
         */
        this.pagerHeight = 56;
        /**
         * 显示每页记录数
         */
        this.showPageList = false;
        /**
         * 显示分页信息
         */
        this.showPageInfo = true;
        /**
         * 显示页码
         */
        this.showPageNumber = true;
        /**
         * 显示页码最大数量
         */
        this.pagerLabelSize = 7;
        /**
         * 总记录数
         */
        this.total = 0;
        this.enableContextMenu = false;
        this.contextMenuItems = [];
        this.pageSizeChanged = new EventEmitter();
        this.pageChanged = new EventEmitter();
        /**
         * 排序后
         */
        this.columnSorted = new EventEmitter();
        /**
         * 选中事件
         */
        this.nodeSelected = new EventEmitter();
        /**
         * 取消选中事件
         */
        this.nodeUnSelect = new EventEmitter();
        /**
         * 钩选
         */
        this.nodeChecked = new EventEmitter();
        /**
         * 取消钩选
         */
        this.nodeUnChecked = new EventEmitter();
        /**
         * 全选事件
         */
        this.checkAll = new EventEmitter();
        /**
         * 取消全选
         */
        this.unCheckAll = new EventEmitter();
        /**
         * 查询
         */
        this.search = new EventEmitter();
        this.dblClick = new EventEmitter();
        this.loadedData = new EventEmitter();
        this.expand = new EventEmitter();
        this.collapse = new EventEmitter();
        this.expandAllNodes = new EventEmitter();
        this.collapseAllNodes = new EventEmitter();
        this.appendNew = new EventEmitter();
        this.removed = new EventEmitter();
        this.updated = new EventEmitter();
        this.clearSearchValue = new EventEmitter();
        this.cellClick = new EventEmitter();
        this.childsPageChanged = new EventEmitter();
        this._data = [];
        /**
         * 根据内容自动宽度，默认 false;
         * 此属性开启后，自动列宽失效
         */
        this.autoWidth = false;
        /**
         * 选中项集合
         */
        this._selections = [];
        /**
         * 选中项索引
         */
        this.selectRowIndex = -1;
        /**
         * 选中当前行
         */
        this._selectedRow = null;
        /**
         * 钩选的记录集合
         */
        this._checkeds = [];
        this.searchData = { field: '*', value: '' };
        this.searchButtonText = '<i class="f-icon f-icon-search"></i>';
        /**
         * 显示查询工具条
         */
        this.showFindInput = false;
        this.isDataChanged = false;
        this.topHideHeight = 0;
        this.bottomHideHeight = 0;
        this.state = {
            rowNodes: [],
            scrollY: 0,
            scrollX: 0
        };
        /**
         * 待查询的文本
         */
        this.findValue = '';
        /**
         * 结果总数
         */
        this.findCount = 0;
        /**
         * 当前索引
         */
        this.findCurrent = 0;
        /**
         * 存储文本查询结果
         */
        this.findResult = [];
        this.ro = null;
        this.findKeysHandler = null;
        this._hotKeys = null;
        this.styleSheetId = 'treetable-style-';
        this.paginationOptions = {
            id: 'Farris-TreeTable-Pagination_',
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.selectNodeChangedSubject = new BehaviorSubject(null);
        this._UUID = '';
        // 是否有固定列
        this.fixedColumns = false;
        this.farrisInstances = null;
        this.difference = (/**
         * @param {?} first
         * @param {?} second
         * @return {?}
         */
        function (first, second) { return first.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return !second.some((/**
         * @param {?} secondItem
         * @return {?}
         */
        function (secondItem) { return secondItem == item; })); })); });
        this.onBeforeShowContextMenu = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            // row_1_fixedleft  row_1  row_1_fixedright
            var contextMenuDom = e.contextMenuDom, event = e.event;
            /** @type {?} */
            var rowID = event.target.id;
            if (contextMenuDom) {
                rowID = _this.trId2DataId(contextMenuDom);
                /** @type {?} */
                var rowNode_1 = _this.findRowNode(rowID);
                /** @type {?} */
                var go$ = of({ show: true });
                if (_this.beforeShowContextMenu) {
                    go$ = _this.beforeShowContextMenu({ data: rowNode_1, tree: _this });
                }
                return go$.pipe(switchMap((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    if (r.show) {
                        if (r.menus) {
                            _this.contextMenuItems = r.menus;
                            _this.detectChanges();
                        }
                        /** @type {?} */
                        var viewportW = contextMenuDom.closest('.farris-treetable').offsetWidth;
                        /** @type {?} */
                        var targetW = contextMenuDom.offsetWidth;
                        /** @type {?} */
                        var focusTargetWidth = viewportW > targetW ? targetW : viewportW;
                        return of({ show: true, data: { data: rowNode_1, tree: _this }, focusTargetWidth: focusTargetWidth });
                    }
                    else {
                        return of({ show: false });
                    }
                })));
            }
            return of({ show: false });
        });
        this.searchHandle = new SearchHandle(this);
        this.scrollLoader = new VirtualizedLoaderService(this);
        if (this.injector) {
            this._hotKeys = this.injector.get(TTHotkeys, null);
            this.localeService = this.injector.get(LocaleService, null);
            this.idService = this.injector.get(IdService, null);
        }
        if (this.idService) {
            this._UUID = this.idService.uuid();
            this.styleSheetId += this.idService.uuid();
        }
        else {
            this._UUID = ('' + Math.random()).slice(2);
            this.styleSheetId += ('' + Math.random()).slice(2);
        }
        this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
    }
    Object.defineProperty(TreeTableComponent.prototype, "groupColumns", {
        get: /**
         * @return {?}
         */
        function () {
            return this._groupColumns;
        },
        set: /**
         * @param {?} cols
         * @return {?}
         */
        function (cols) {
            this._groupColumns = cols || [];
            this.columns = this.ttService.checkColumnsForGroupHeader(cols.map((/**
             * @param {?} cs
             * @return {?}
             */
            function (cs) { return tslib_1.__spread(cs); })), this).columns;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "data", {
        get: /**
         * @return {?}
         */
        function () {
            return this._data;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._data = val;
            this.updateSerializedValue();
            this.initNodeStatus();
            // autowidth 时，表头宽度依据内容宽度作同步处理
            this.setNewColumnsWidth();
            this.loadedData.emit();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "allCheckbox", {
        set: /**
         * @param {?} content
         * @return {?}
         */
        function (content) {
            this.headerCheckboxCmp = content;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selections;
        },
        set: /**
         * @param {?} vals
         * @return {?}
         */
        function (vals) {
            var _this = this;
            if (vals && vals.length) {
                // 过滤掉数据源中不存在节点
                this._selections = vals.filter((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn && _this.findRowNode(tn.id); }));
                /** @type {?} */
                var ids_1 = this._selections.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                if (ids_1.length !== this.selectValues.length ||
                    (ids_1.length === this.selectValues.length && this.difference(ids_1, this.selectValues).length)) {
                    this.selectValues = ids_1;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.selectValuesChange.emit(ids_1);
                    }));
                }
            }
            else {
                this._selections = [];
                this.selectValues = [];
                this.selectValuesChange.emit([]);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "selectedRow", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedRow;
        },
        set: /**
         * @param {?} treeNode
         * @return {?}
         */
        function (treeNode) {
            this._selectedRow = treeNode;
            if (treeNode) {
                if (this.selectValue !== treeNode.id) {
                    this.selectValue = treeNode.id;
                    this.selectValueChange.emit(treeNode.id);
                }
            }
            else {
                this.selectValue = null;
                this.selectValueChange.emit(null);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "checkeds", {
        get: /**
         * @return {?}
         */
        function () {
            return this._checkeds;
        },
        set: /**
         * @param {?} treeNodes
         * @return {?}
         */
        function (treeNodes) {
            var _this = this;
            if (treeNodes && treeNodes.length) {
                this._checkeds = treeNodes.filter((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return _this.findRowNode(tn.id); }));
                /** @type {?} */
                var ids_2 = this._checkeds.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                if (ids_2.length !== this.checkValues.length ||
                    (ids_2.length === this.checkValues.length && this.difference(ids_2, this.checkValues).length)) {
                    this.checkValues = ids_2;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.checkValuesChange.emit(ids_2);
                    }));
                }
            }
            else {
                this._checkeds = [];
                this.checkValues = [];
                this.checkValuesChange.emit([]);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkOptons = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 启用数据折行后，虚拟渲染功能失效
        if (!this.nowrap) {
            this.virtualized = false;
        }
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.reSetSize();
            _this.setScorllBodyHeight();
        }));
        if (this.multiSelect) {
            this.singleSelect = false;
        }
        if (this.singleSelect && this.showCheckbox) {
            this.checkOnSelect = true;
            this.selectOnCheck = true;
        }
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (this.fit) {
            this.renderer.addClass(this.el.nativeElement, 'f-utils-fill-flex-column');
            /** @type {?} */
            var parentEl = this.el.nativeElement.parentElement || this.el.nativeElement.parentNode;
            if (parentEl) {
                // this.renderer.addClass(parentEl, 'f-utils-fill');
                this.renderer.setStyle(parentEl, 'overflow', 'hidden');
            }
        }
        if (!this.beforeClickNode) {
            this.beforeClickNode = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeCheckAll) {
            this.beforeCheckAll = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeUnCheckAll) {
            this.beforeUnCheckAll = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (this.autoWidth) {
            this.fitColumns = false;
            this.resizableColumns = false;
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.id = 'Treetable-' + this._UUID;
        // 创建 stylesheet
        this.styleElement = this.utils.createStyleSheet(this.styleSheetId);
        this.checkColumnOption();
        this.checkOptons();
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                if (_this.el.nativeElement.parentElement) {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} entries
                     * @param {?} observer
                     * @return {?}
                     */
                    function (entries, observer) {
                        var _a = entries[0].contentRect, width = _a.width, height = _a.height;
                        if (_this.fit) {
                            _this.resize({ width: width, height: height });
                            // if (Math.abs(height - this.height) > 10) {
                            // }
                        }
                    }));
                    _this.ro.observe(_this.el.nativeElement.parentElement);
                }
            }));
        }
        this.paginationOptions = this.initPaginationOptions();
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.ro) {
            if (this.el.nativeElement.parentElement) {
                this.ro.unobserve(this.el.nativeElement.parentElement);
            }
            this.ro = null;
        }
        if (this.findKeysHandler) {
            this.findKeysHandler.unsubscribe();
        }
        this.utils.removeStyleSheet(this.styleSheetId);
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.isDataChanged = changes.data.currentValue !== changes.data.previousValue;
        }
        if (changes.multiSelect && !changes.multiSelect.isFirstChange()) {
            this.singleSelect = !changes.multiSelect.currentValue;
            if (this.singleSelect && this.showCheckbox) {
                this.selectOnCheck = true;
                this.checkOnSelect = true;
            }
        }
        if (changes.disabled && !changes.disabled.isFirstChange()) {
            this.hovered = !changes.disabled.currentValue;
        }
        if (changes.enableFindText && !changes.enableFindText.isFirstChange()) {
            this.setFindText(changes.enableFindText.currentValue);
        }
        if (changes.selectValue && !changes.selectValue.isFirstChange()) {
            this.selectNode(changes.selectValue.currentValue);
        }
        if (changes.selectValues && !changes.selectValues.isFirstChange()) {
            this.selectNodes(changes.selectValues.currentValue);
        }
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            this.checkedNodes(changes.checkValues.currentValue);
        }
        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                currentPage: this.pageIndex
            });
        }
        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                itemsPerPage: this.pageSize
            });
        }
        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                pageList: this.pageList
            });
        }
        if (changes.total !== undefined && !changes.total.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                totalItems: this.total
            });
        }
        if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {
            this.setTableWidth(this.allColumnsWidth());
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        // if (this.isDataChanged) {
        //     this.loadedData.emit();
        //     this.isDataChanged = false;
        // } else {
        //     this.ngZone.runOutsideAngular(() => {
        //         if (this.psRef) {
        //             this.psRef.directiveRef.update();
        //         }
        //     });
        // }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.templates.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            switch (item.getType()) {
                case 'header':
                    _this.headerTemplate = item.template;
                    break;
                case 'body':
                    _this.bodyTemplate = item.template;
                    break;
            }
        }));
        if (this.columnsRef.length) {
            this.columns = this.ttc2columns(this.columnsRef);
            this.columnsRef.changes.subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.columns = _this.ttc2columns(d);
            }));
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.containerElement = this.el.nativeElement.querySelector('.farris-treetable');
        this.loadedData.emit();
        this.registerShortcuts();
        // autowidth 时，表头宽度依据内容宽度作同步处理
        this.setNewColumnsWidth();
        this.setRightFixedColumnShadow();
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setNewColumnsWidth = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.autoWidth) {
            return;
        }
        /** @type {?} */
        var newColWidth = {};
        /** @type {?} */
        var headerCells = [];
        /** @type {?} */
        var firstRowCells = [];
        if (this.showHeader && this.headerTable) {
            headerCells = Array.from(this.headerTable.nativeElement.querySelectorAll('th'));
        }
        if (this.serializedValue && this.serializedValue.length && this.bodyTable) {
            firstRowCells = Array.from(this.bodyTable.nativeElement.querySelector('tr').querySelectorAll('td'));
        }
        firstRowCells.forEach((/**
         * @param {?} td
         * @param {?} index
         * @return {?}
         */
        function (td, index) {
            // console.log(td);
            /** @type {?} */
            var fieldName = td.getAttribute('field');
            /** @type {?} */
            var colWidth = td.getBoundingClientRect().width.toFixed(2);
            newColWidth[fieldName] = colWidth;
            /** @type {?} */
            var col = _this.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.field === fieldName; }));
            if (col && col.width !== undefined) {
                colWidth = colWidth > col.width ? colWidth : col.width;
                td.style.minWidth = colWidth + 'px';
            }
            headerCells[index].style.width = colWidth + 'px';
        }));
    };
    /**
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.columnIsVisible = /**
     * @param {?} col
     * @return {?}
     */
    function (col) {
        return this.ttService.columnIsVisible(col, this);
    };
    /**
     * @private
     * @param {?} n
     * @return {?}
     */
    TreeTableComponent.prototype.columnCssName = /**
     * @private
     * @param {?} n
     * @return {?}
     */
    function (n) {
        return "#" + this.id + " .treetable-cell[field=\"" + n.field + "\"], #" + this.id + " .treetable-header-cell[field=\"" + n.field + "\"]:not(.group-header-cell)";
    };
    // 按固定列的顺序排序
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    TreeTableComponent.prototype.sortColumnsByFixed = 
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    function (updateColumns) {
        if (updateColumns === void 0) { updateColumns = true; }
        /** @type {?} */
        var fixedLeft = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        /** @type {?} */
        var fixedCenter = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return !n.fixed || n.fixed === 'center'; }));
        /** @type {?} */
        var fixedRight = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        if (fixedLeft && fixedLeft.length) {
            fixedLeft.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            function (n, index) {
                n.left = index ? fixedLeft[index - 1].width : 0;
            }));
        }
        if (fixedRight && fixedRight.length) {
            /** @type {?} */
            var rightWidthTotal_1 = fixedRight.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            function (r, c) {
                return r + c.width;
            }), 0);
            fixedRight.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            function (n, index) {
                rightWidthTotal_1 -= n.width;
                n.right = rightWidthTotal_1;
            }));
        }
        if (updateColumns) {
            this.columns = fixedLeft.concat(fixedCenter).concat(fixedRight);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkColumnOption = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var cssRules = [];
        if (!this.fitColumns) {
            this.sortColumnsByFixed();
        }
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        function (n, i) {
            if (n.visible === undefined) {
                n.visible = true;
            }
            if (n['halign']) {
                n.hAlign = n['halign'];
            }
            if (n.width === undefined) {
                n.width = 100;
            }
            if (!n.id) {
                n.id = 'treetable-header-' + (n.field || i);
            }
        }));
        /** @type {?} */
        var colWidthTotal = this.allColumnsWidth();
        /** @type {?} */
        var fixedCols = 0;
        /** @type {?} */
        var fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightColumns[0]['rightShadowCol'] = true;
            fixedRightColumns[fixedRightColumns.length - 1]['lastColumn'] = true;
        }
        else {
            if (this.columns && this.columns.length) {
                this.columns[this.columns.length - 1]['lastColumn'] = true;
            }
        }
        /** @type {?} */
        var fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        if (fixedLeftColumns && fixedLeftColumns.length) {
            fixedLeftColumns[fixedLeftColumns.length - 1]['leftShadowCol'] = true;
        }
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} index
         * @return {?}
         */
        function (n, index) {
            /** @type {?} */
            var isVisible = _this.columnIsVisible(n);
            /** @type {?} */
            var ruleName = _this.columnCssName(n);
            /** @type {?} */
            var cssRule = _this.utils.getCssRule(ruleName, _this.styleElement.sheet);
            if (!cssRule) {
                /** @type {?} */
                var stylecss = ruleName + ' { ';
                stylecss += isVisible ? '' : 'display: none;';
                if (_this.fitColumns) {
                    stylecss += "width: " + (n.width / colWidthTotal * 100).toFixed(2) + "%;";
                }
                else {
                    stylecss += "width: " + n.width + "px;";
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            stylecss += "left: " + n.left + "px";
                            fixedCols++;
                        }
                        if (n.fixed === 'right') {
                            stylecss += "right: " + n.right + "px";
                            fixedCols++;
                        }
                    }
                }
                stylecss += '}';
                cssRules.push(stylecss);
            }
            else {
                cssRule.style.display = isVisible ? '' : 'none';
            }
        }));
        if (cssRules.length) {
            this.utils.appendCssRules(cssRules, this.styleElement.sheet);
        }
        this.setTableWidth(colWidthTotal);
        // 启用分页加载子节点
        if (this.paginationForChildren) {
            this.columns.push({
                field: '__nodespagerbar__',
                width: 100,
                title: '',
                align: 'center',
                template: this.nodesPagerBar
            });
        }
        this.fixedColumns = !!fixedCols;
    };
    /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    TreeTableComponent.prototype.setTableWidth = /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    function (colWidthTotal) {
        if (this.headerTable && this.bodyTable) {
            if (!this.fitColumns) {
                this.headerTable.nativeElement.style.width = colWidthTotal + "px";
                this.bodyTable.nativeElement.style.width = colWidthTotal + "px";
            }
            else {
                this.headerTable.nativeElement.style.width = '100%';
                this.bodyTable.nativeElement.style.width = '100%';
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.allColumnsWidth = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        return this.columns.reduce((/**
         * @param {?} r
         * @param {?} c
         * @return {?}
         */
        function (r, c) {
            if (_this.columnIsVisible(c)) {
                return r + c.width;
            }
            else {
                return r;
            }
        }), 0);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onPageChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.pageChanged.emit($event);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onPageSizeChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.pageSizeChanged.emit($event);
    };
    /**
     * @param {?} pageInfo
     * @return {?}
     */
    TreeTableComponent.prototype.updatePageInfo = /**
     * @param {?} pageInfo
     * @return {?}
     */
    function (pageInfo) {
        if (pageInfo && Object.keys(pageInfo).length) {
            /** @type {?} */
            var obj = {};
            if (pageInfo.total !== undefined) {
                obj.totalItems = pageInfo.total;
            }
            if (pageInfo.pageIndex !== undefined) {
                obj.currentPage = pageInfo.pageIndex;
            }
            if (pageInfo.pageSize !== undefined) {
                obj.itemsPerPage = pageInfo.pageSize;
            }
            if (pageInfo.pageList !== undefined) {
                obj.pageList = pageInfo.pageList;
            }
            this.paginationOptions = Object.assign(this.paginationOptions, obj);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.initPaginationOptions = /**
     * @private
     * @return {?}
     */
    function () {
        return {
            id: 'Farris-TreeTable-Pagination_' + this._UUID,
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
    };
    /**
     * @param {?} col
     * @param {?} rowdata
     * @return {?}
     */
    TreeTableComponent.prototype.getNodeText = /**
     * @param {?} col
     * @param {?} rowdata
     * @return {?}
     */
    function (col, rowdata) {
        if (col.isMultilingualField) {
            /** @type {?} */
            var val = this.utils.getValue(col.field, rowdata);
            if (this.localeService) {
                /** @type {?} */
                var localeId = this.localeService.localeId || 'zh-CHS';
                if (val && typeof val === 'object' && Object.keys(val).length > 0) {
                    return val[localeId];
                }
                else {
                    return val;
                }
            }
        }
        else {
            return this.utils.getValue(col.field, rowdata, true);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.initNodeStatus = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.singleSelect) {
            if (this.checkValues && this.checkValues.length) {
                this.checkedNodes(this.checkValues, false, false);
            }
            if (this.selectValues && this.selectValues.length && !this.onlySelectSelf) {
                this.selectNodes(this.selectValues, false, false);
            }
        }
        else {
            if (this.selectValue) {
                this.selectNode(this.selectValue, false);
            }
        }
    };
    /** 注册快捷键 */
    /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.registerShortcuts = /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.showFilterBar && this._hotKeys) {
            this._hotKeys.addShortcut({ keys: 'enter', element: this.inputGroup.textbox.nativeElement }).subscribe((/**
             * @return {?}
             */
            function () {
                _this.onSearch();
            }));
        }
        this.setFindText(this.enableFindText);
    };
    /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    TreeTableComponent.prototype.setFindText = /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    function (enable) {
        var _this = this;
        if (enable === void 0) { enable = true; }
        this.enableFindText = enable;
        if (this.enableFindText && this._hotKeys) {
            // 查询工具条
            this.findKeysHandler = this._hotKeys.addShortcut({ keys: 'control.shift.f' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (_this.enableFindText) {
                    _this.showFindInput = true;
                    _this.detectChanges();
                }
            }));
        }
        else {
            if (this.showFindInput) {
                this.showFindInput = false;
                this.cdRef.detectChanges();
            }
            if (this.findKeysHandler) {
                this.findKeysHandler.unsubscribe();
                this.findKeysHandler = null;
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    TreeTableComponent.prototype.getCustomCls = /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    function (rowNode, field, clsType) {
        if (field === void 0) { field = ''; }
        if (clsType === void 0) { clsType = 'row'; }
        /** @type {?} */
        var cls = {};
        /** @type {?} */
        var fn = this.rowStyler;
        if (clsType === 'cell') {
            fn = this.cellStyler;
        }
        if (fn) {
            /** @type {?} */
            var rowCls = fn(rowNode.node, field);
            if (rowCls) {
                /** @type {?} */
                var arrcls = [];
                if (typeof rowCls === 'string') {
                    arrcls = [rowCls];
                }
                else {
                    if (Array.isArray(rowCls)) {
                        arrcls = rowCls;
                    }
                }
                if (arrcls.length) {
                    /** @type {?} */
                    var rowClsObj_1 = {};
                    arrcls.forEach((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) {
                        rowClsObj_1['' + c] = true;
                    }));
                    /** @type {?} */
                    var _cls = tslib_1.__assign({}, rowClsObj_1, cls);
                    return _cls;
                }
                else {
                    return rowCls;
                }
            }
            else {
                return cls;
            }
        }
        else {
            return cls;
        }
    };
    /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    TreeTableComponent.prototype.getRowCls = /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    function (rowNode, field) {
        return this.getCustomCls(rowNode, 'row');
    };
    /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.getCellCls = /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    function (rowNode, field) {
        return this.getCustomCls(rowNode, field, 'cell');
    };
    /**
     * @param {?} currentCol
     * @return {?}
     */
    TreeTableComponent.prototype.getRealColWidth = /**
     * @param {?} currentCol
     * @return {?}
     */
    function (currentCol) {
        var _this = this;
        if (this.columns && this.columns.length && this.fitColumns) {
            /** @type {?} */
            var colWidthTotal = this.columns.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            function (r, c) {
                return r + (_this.columnIsVisible(c) ? c.width : 0);
            }), 0);
            if (this.columnIsVisible(currentCol)) {
                return (currentCol.width / colWidthTotal * 100).toFixed(2) + '%';
            }
            else {
                return 0;
            }
        }
        return currentCol.width + 'px';
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onResized = /**
     * @return {?}
     */
    function () {
        this.resizeSer.windowResized();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setRightFixedColumnShadow = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.psRef && this.psRef.directiveRef) {
            /** @type {?} */
            var ps = ((/** @type {?} */ (this.psRef.directiveRef))).instance;
            if (!ps) {
                return;
            }
            var containerWidth = ps.containerWidth, scrollbarXLeft = ps.scrollbarXLeft, contentWidth = ps.contentWidth;
            if (containerWidth + scrollbarXLeft < contentWidth) {
                /** @type {?} */
                var fixedRightColumns = this.columns.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.fixed === 'right'; }));
                /** @type {?} */
                var ruleName = "#" + this.id + ".f-treetable--fixed-columns";
                if (fixedRightColumns && fixedRightColumns.length) {
                    /** @type {?} */
                    var fixedRightCssRuleKey = ruleName + " [r-tt-shadow-col]::before";
                    /** @type {?} */
                    var rightCSSRule = fixedRightCssRuleKey + "{\n                        box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\n                    }";
                    this.utils.appendCssRules([rightCSSRule], this.styleElement.sheet);
                }
            }
        }
    };
    /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.setFixedColumnShadow = /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    function (x, e) {
        /** @type {?} */
        var fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        /** @type {?} */
        var fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        /** @type {?} */
        var ruleName = "#" + this.id + ".f-treetable--fixed-columns";
        /** @type {?} */
        var fixedLeftCssRuleKey = '';
        /** @type {?} */
        var fixedRightCssRuleKey = '';
        /** @type {?} */
        var leftCSSRule = '';
        /** @type {?} */
        var rightCSSRule = '';
        if (fixedLeftColumns && fixedLeftColumns.length) {
            /** @type {?} */
            var lastFixedLeftColumn = fixedLeftColumns[fixedLeftColumns.length - 1];
            fixedLeftCssRuleKey = ruleName + " [field=\"" + lastFixedLeftColumn.field + "\"]::after";
            leftCSSRule = fixedLeftCssRuleKey + "{\n                box-shadow:#d9d9d9 12px 0px 8px -12px inset;\n            }";
        }
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightCssRuleKey = ruleName + " [r-tt-shadow-col]::before";
            rightCSSRule = fixedRightCssRuleKey + "{\n                box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\n            }";
        }
        if (x === 0) {
            // 移除左侧固定列阴影样式
            if (fixedLeftCssRuleKey) {
                this.utils.removeCssRule(fixedLeftCssRuleKey, this.styleElement.sheet);
            }
        }
        else if ((x + e.srcElement.offsetWidth).toFixed() == e.srcElement.scrollWidth) {
            // 移除右则固定列阴影样式
            if (fixedRightCssRuleKey) {
                this.utils.removeCssRule(fixedRightCssRuleKey, this.styleElement.sheet);
            }
        }
        else {
            // 添加左右固定列样式
            /** @type {?} */
            var arr = [];
            if (leftCSSRule) {
                arr.push(leftCSSRule);
            }
            if (rightCSSRule) {
                arr.push(rightCSSRule);
            }
            this.utils.appendCssRules(arr, this.styleElement.sheet);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.onScrollX = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.showHeader && this.headerBox) {
            /** @type {?} */
            var x = e.srcElement.scrollLeft;
            this.state.scrollX = x;
            // this.renderer.setStyle(this.headerBox.nativeElement.querySelector('table'), 'transform', `translate3d(-${x}px, 0px, 0px)`);
            this.headerBox.nativeElement.scrollLeft = x;
            this.setFixedColumnShadow(x, e);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.onScrollY = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.virtualized) {
            /** @type {?} */
            var scrollTop = e.target.scrollTop;
            var _a = this.scrollLoader.getRowNodes(scrollTop), data = _a.data, topHideHeight = _a.topHideHeight, bottomHideHeight = _a.bottomHideHeight;
            this.state.scrollY = scrollTop;
            this.serializedValue = data;
            this.topHideHeight = topHideHeight;
            this.bottomHideHeight = bottomHideHeight;
            this.detectChanges();
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onSearchValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (!$event) {
            this.onClearSearchValue();
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onClearSearchValue = /**
     * @return {?}
     */
    function () {
        this.searchData.value = '';
        this.clearSearchValue.emit();
    };
    /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    TreeTableComponent.prototype.onCellClick = /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    function (event, col, node) {
        this.cellClick.emit({ event: event, col: col, node: node });
    };
    /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.trackByFn = /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    function (index, rowNode) {
        return rowNode.id;
    };
    /**
     * 格式化数据
     */
    /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    TreeTableComponent.prototype.formatData = /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    function (col, data, formatter) {
        // const val = this.utils.getValue(field, data, true );
        /** @type {?} */
        var val = this.getNodeText(col, data);
        return this.colFormatSer.format(val, data, formatter);
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.columnsChanged = /**
     * @return {?}
     */
    function () {
        this.checkColumnOption();
        this.detectChanges();
    };
    /**
     * @private
     * @param {?} list
     * @return {?}
     */
    TreeTableComponent.prototype.ttc2columns = /**
     * @private
     * @param {?} list
     * @return {?}
     */
    function (list) {
        return list.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return {
                field: n.field,
                title: n.title,
                align: n.align,
                hAlign: n.hAlign,
                width: n.width,
                formatter: n.formatter
            };
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.reSetSize = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.fit) {
            /** @type {?} */
            var parentEl = this.el.nativeElement.parentNode;
            this.width = parentEl.offsetWidth;
            this.height = parentEl.offsetHeight;
        }
    };
    /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    TreeTableComponent.prototype.renderVirtualRowNodes = /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    function (nodePosY) {
        var _this = this;
        if (nodePosY === void 0) { nodePosY = null; }
        if (this.virtualized) {
            /** @type {?} */
            var scrollY_1 = nodePosY || this.state.scrollY;
            /** @type {?} */
            var _rownodes = this.scrollLoader.getRowNodes(scrollY_1);
            this.serializedValue = _rownodes.data;
            this.topHideHeight = _rownodes.topHideHeight;
            this.bottomHideHeight = _rownodes.bottomHideHeight;
            this.detectChanges();
            if (nodePosY) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.psRef.directiveRef.elementRef.nativeElement.scrollTop = nodePosY;
                    }), 20);
                }));
            }
        }
    };
    /**
     * @param {?=} nodePosY
     * @return {?}
     */
    TreeTableComponent.prototype.updateSerializedValue = /**
     * @param {?=} nodePosY
     * @return {?}
     */
    function (nodePosY) {
        if (nodePosY === void 0) { nodePosY = null; }
        this.serializedValue = [];
        this.searchHandle.allNodes = [];
        this.state.rowNodes = [];
        this.serializeNodes(null, this.data, 0, true);
        if (this.virtualized && this.fixedHeader) {
            this.renderVirtualRowNodes(nodePosY);
        }
        else {
            this.serializedValue = this.state.rowNodes;
            this.detectChanges();
            // if (emitChanges) {
            // }
        }
    };
    /**
     * 将树节点数据序列化为RowNode
     * @param parent 父级节点
     * @param nodes 树节点集合
     * @param level 级别
     * @param visible 是否可见
     */
    /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    TreeTableComponent.prototype.serializeNodes = /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    function (parent, nodes, level, visible, parentIds) {
        var _this = this;
        if (nodes && nodes.length) {
            nodes.forEach((/**
             * @param {?} node
             * @param {?} index
             * @return {?}
             */
            function (node, index) {
                node.parent = parent;
                if (!node.hasOwnProperty('selectable')) {
                    node.selectable = true;
                }
                if (!node.hasOwnProperty('showIcon')) {
                    node.showIcon = true;
                }
                if (_this.onlySelectLeaf === 'yes' && node.selectable) {
                    node.selectable = !!node.leaf;
                }
                /** @type {?} */
                var keyid = node.data[_this.idField];
                node.id = keyid;
                /** @type {?} */
                var isSelected = _this.findIndexInSelection(node) > -1;
                /** @type {?} */
                var isChecked = _this.findIndexInCheckeds(node) > -1;
                /** @type {?} */
                var isLast = index === nodes.length - 1;
                /** @type {?} */
                var isFirst = index === 0;
                /** @type {?} */
                var parents = [];
                /** @type {?} */
                var parentRn = null;
                if (parent) {
                    /** @type {?} */
                    var parentID = parent.data[_this.idField];
                    /** @type {?} */
                    var _parents = parentIds || [];
                    parents = parents.concat(_parents.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n; })));
                    parents.push(parentID);
                    parentRn = _this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.id === parent.id; }));
                }
                /** @type {?} */
                var rowNode = {
                    id: keyid,
                    node: node,
                    parent: parent,
                    level: level,
                    visible: visible && (parent ? parent.expanded : true),
                    isSelected: isSelected,
                    isChecked: isChecked,
                    parents: parents,
                    parentRowNode: parentRn,
                    index: _this.state.rowNodes.length,
                    last: isLast,
                    first: isFirst
                };
                // this.serializedValue.push(rowNode);
                _this.state.rowNodes.push(rowNode);
                _this.serializeNodes(node, node.children, level + 1, rowNode.visible, parents);
            }));
        }
    };
    /**
     * 判断指定的节点是否被选中
     * @param node 树节点
     */
    /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.isSelected = /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        var _this = this;
        if (this.singleSelect) {
            if (node && this.selectedRow) {
                return node.data[this.idField] === this.selectedRow.data[this.idField];
            }
            return false;
        }
        else {
            if (this.selections && this.selections.length) {
                return this.selections.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data[_this.idField] === node.data[_this.idField]; })) > -1;
            }
            return false;
        }
    };
    /** 判断当前节点的钩选状态 */
    /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    TreeTableComponent.prototype.isChecked = /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    function (node) {
        var _this = this;
        if (node && this.checkeds) {
            if (this.checkeds instanceof Array) {
                return this.checkeds.findIndex((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) {
                    return v.data[_this.idField] === node.data[_this.idField];
                })) > -1;
            }
            return false;
        }
        return false;
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectedCurrentRowEmit = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var currSelected = this.selectedRow;
        if (currSelected) {
            this.nodeUnSelect.emit({ node: currSelected, type: 'row', instance: this });
        }
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype._singleSelectNode = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.clearSelections();
        this.selectedRow = e.rowNode.node;
        this.selectRowIndex = e.rowIndex;
        this.selections = [e.rowNode.node];
        e.rowNode.isSelected = true;
        if (this.showCheckbox) {
            e.rowNode.isChecked = true;
            this.clearCheckeds();
            this.setCheckeds(e.rowNode);
        }
        /** @type {?} */
        var sp = {
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row',
            index: e.rowIndex,
            parents: e.rowNode.parents,
            instance: this
        };
        this.nodeSelected.emit(sp);
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype._singleUnSelectNode = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.selectedRow = null;
        this.selectRowIndex = -1;
        e.rowNode.isSelected = false;
        e.rowNode.isChecked = false;
        this.selections = [];
        this.nodeUnSelect.emit({
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row', parents: e.rowNode.parents,
            instance: this
        });
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    TreeTableComponent.prototype.__singleSelectNode = /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    function (event, selected) {
        if (selected === void 0) { selected = false; }
        if (!selected) {
            this.unSelectedCurrentRowEmit();
            this._singleSelectNode(event);
        }
        else {
            if (!this.keepSelect) {
                this._singleUnSelectNode(event);
            }
        }
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    TreeTableComponent.prototype.__multiSelectNode = /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    function (event, selected) {
        if (selected === void 0) { selected = false; }
        /** @type {?} */
        var rowNode = event.rowNode;
        if (!selected) {
            this.unSelectedCurrentRowEmit();
            this.singleSelectWhenMultiSelect(rowNode, true);
            this.nodeSelected.emit({
                originalEvent: event.originalEvent, node: rowNode.node,
                type: 'row', index: event.rowIndex, parents: rowNode.parents,
                instance: this
            });
        }
        else {
            if (!this.keepSelect) {
                this.singleSelectWhenMultiSelect(rowNode, false);
                this.nodeUnSelect.emit({
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                });
            }
        }
    };
    /**
     * 行单击事件
     */
    /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.handleRowClick = /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var rowNode = event.rowNode;
        rowNode.node['elementRef'] = event.originalEvent.target;
        /** @type {?} */
        var selected = this.isSelected(rowNode.node);
        if (this.singleSelect) {
            this.__singleSelectNode(event, selected);
        }
        else {
            rowNode.indeterminate = false;
            if (this.onlySelectSelf) {
                this.__multiSelectNode(event, selected);
            }
            else {
                rowNode.isSelected = !selected;
                this.setSelections(rowNode);
                if (this.checkOnSelect) {
                    rowNode.isChecked = !selected;
                    this.setCheckeds(rowNode);
                    this.ttService.onChangeCheckboxStatus(rowNode);
                    /** @type {?} */
                    var nodes = this.cascadeNodes(rowNode, rowNode.isChecked);
                    if (rowNode.isChecked) {
                        this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: nodes, instance: this });
                    }
                    else {
                        this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: nodes, instance: this });
                    }
                }
            }
        }
        this.detectChanges();
    };
    /**
     * 带有checkbox 的单选
     * @param rowNode 当前节点
     */
    /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    TreeTableComponent.prototype.singleSelectWhenMultiSelect = /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    function (rowNode, flag) {
        if (this.checkOnSelect) {
            rowNode.isChecked = flag;
            this.setCheckeds(rowNode);
            this.cascadeNodes(rowNode, rowNode.isChecked);
            if (rowNode.isChecked) {
                this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
            else {
                this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
        }
        this.clearSelections();
        if (this.onlySelectSelf) {
            this.selectedRow = rowNode.node;
        }
        rowNode.isSelected = flag;
        this.setSelections(rowNode);
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.selectWhenChecked = /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    function (rowNode, flag, event) {
        rowNode.isChecked = flag;
        this.setCheckeds(rowNode);
        if (this.selectOnCheck) {
            if (this.onlySelectSelf) {
                this.clearSelections();
            }
            if (this.singleSelect && this.showCheckbox) {
                this.clearCheckeds();
            }
            rowNode.isSelected = flag;
            this.setSelections(rowNode);
            if (rowNode.isSelected) {
                this.nodeSelected.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
            else {
                this.nodeUnSelect.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    TreeTableComponent.prototype.isInArray = /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    function (rowNode, items) {
        var _this = this;
        if (items && items.length === 0) {
            return false;
        }
        return items.findIndex((/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return i.data[_this.idField] === rowNode.id; })) > -1;
    };
    /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.setSelections = /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        if (rowNode.isSelected) {
            if (!this.selections) {
                this.selections = [];
            }
            if (!this.isInArray(rowNode, this.selections)) {
                // this.selections = [...this.selections, rowNode.node];
                this.selections.push(rowNode.node);
            }
        }
        else {
            if (this.selections) {
                /** @type {?} */
                var i = this.selections.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.data[_this.idField] === rowNode.node.data[_this.idField]; }));
                if (i !== -1) {
                    this.selections.splice(i, 1);
                }
                // this.selections = this.selections.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.setCheckeds = /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        if (rowNode.isChecked) {
            if (!this.checkeds) {
                this.checkeds = [];
            }
            if (!this.isInArray(rowNode, this.checkeds)) {
                // this.checkeds = [ ...this.checkeds, rowNode.node];
                this.checkeds.push(rowNode.node);
            }
        }
        else {
            if (this.checkeds) {
                /** @type {?} */
                var i = this.checkeds.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.data[_this.idField] === rowNode.node.data[_this.idField]; }));
                if (i !== -1) {
                    this.checkeds.splice(i, 1);
                }
                // this.checkeds = this.checkeds.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.getDiffrentData = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (data.length) {
            /** @type {?} */
            var _nodes_1 = [];
            data.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (_nodes_1.findIndex((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) { return t.data[_this.idField] === n.data[_this.idField]; })) === -1) {
                    _nodes_1.push(n);
                }
            }));
            return _nodes_1;
        }
        return data;
    };
    /**
     * 级联选择节点
     * @param rowNode 当前节点
     * @param checked 是否钩选
     */
    /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    TreeTableComponent.prototype.cascadeNodes = /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    function (rowNode, checked) {
        /** @type {?} */
        var checkedNodes = this.propagateSelectionDown(rowNode, checked);
        checkedNodes = checkedNodes.concat(this.propagateSelectionUp(rowNode, checked));
        this.updateAllCheckboxStatus();
        return this.getDiffrentData(checkedNodes);
    };
    /**
     * 行Checkbox 选中变化事件
     * @param event 鼠标点击事件对象
     * @param rowNode 当前树节点
     */
    /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.toggleNodeWithCheckbox = /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    function (event, rowNode, checked) {
        rowNode.indeterminate = false;
        this.ttService.onChangeCheckboxStatus(rowNode);
        // let checkedNodes = this.propagateSelectionDown(rowNode, checked);
        // checkedNodes = checkedNodes.concat(this.propagateSelectionUp(rowNode, checked));
        // const data = this.getDiffrentData(checkedNodes);
        /** @type {?} */
        var data = this.cascadeNodes(rowNode, checked);
        if (checked) {
            this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        else {
            this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        this.selectWhenChecked(rowNode, checked, event);
        this.checkeds = tslib_1.__spread(this.checkeds);
        this.detectChanges();
        event.stopPropagation();
    };
    /**
     * 全选
     * @param event 鼠标事件对象
     * @param checked 是否选中
     */
    /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    TreeTableComponent.prototype.toggleNodesWithCheckbox = /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    function (event, checked) {
        if (checked) {
            if (this.data && this.data.length) {
                this.checkAllNodes({ originalEvent: event, checked: checked, instance: this });
            }
        }
        else {
            this.selections = null;
            this.unCheckAllNodes({ originalEvent: event, checked: checked, instance: this });
        }
        this.detectChanges();
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.cascadeCheckedNode = /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    function (rowNode, checked) {
        /** @type {?} */
        var nodes = [];
        if (rowNode.node.selectable || rowNode.node.selectable === undefined) {
            rowNode.isChecked = checked;
            this.setCheckeds(rowNode);
            if (this.selectOnCheck) {
                rowNode.isSelected = checked;
                this.setSelections(rowNode);
            }
            if (!this.isInArray(rowNode, nodes)) {
                nodes.push(rowNode.node);
            }
        }
        return nodes;
    };
    /**
     * 向下级联选中
     * @param node 当前节点
     * @param checked 选中状态
     * 返回受影响的行
     */
    /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    TreeTableComponent.prototype.propagateSelectionDown = /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    function (rowNode, checked) {
        var _this = this;
        /** @type {?} */
        var nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeDown && rowNode.node.children && rowNode.node.children.length) {
            rowNode.node.children.forEach((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                /** @type {?} */
                var rn = _this.state.rowNodes.find((/**
                 * @param {?} row
                 * @return {?}
                 */
                function (row) { return row.id === v.data[_this.idField]; }));
                if (rn && rn.node.selectable) {
                    rn.indeterminate = false;
                    rn.isChecked = checked;
                    _this.ttService.onChangeCheckboxStatus(rn);
                    nodes = nodes.concat(_this.propagateSelectionDown(rn, checked));
                }
            }));
        }
        return nodes;
    };
    /**
     * 向上级联选中
     */
    /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.propagateSelectionUp = /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    function (rowNode, checked) {
        var _this = this;
        /** @type {?} */
        var nodes = this.cascadeCheckedNode(rowNode, checked);
        // console.log(rowNode.parents);
        if (this.cascadeCheck && this.cascadeUp && rowNode.node.parent) {
            if (rowNode.parents && rowNode.parents.length) {
                /** @type {?} */
                var rns_1 = [];
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @param {?} i
                 * @return {?}
                 */
                function (n, i) {
                    /** @type {?} */
                    var rn = _this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        // rn.isChecked = checked;
                        /** @type {?} */
                        var checkedNodes = _this.cascadeCheckedNode(rn, checked);
                        if (checkedNodes.length) {
                            nodes.push(checkedNodes[0]);
                        }
                        rns_1.push(rn);
                    }
                }));
                rns_1.reverse().forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    _this.updateCheckboxStatus(rn);
                }));
            }
        }
        return nodes;
    };
    /** 更新全选checkbox 的状态 */
    /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.updateAllCheckboxStatus = /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var status = this.isIndeterminate();
        if (this.showCheckAll && !this.singleSelect && this.showCheckbox) {
            if (status !== undefined) {
                if (this.headerCheckboxCmp) {
                    this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = status === 2;
                    this.headerCheckboxCmp.checked = status === 1;
                }
            }
        }
    };
    /** 更新父节点checkbox 选中状态 */
    /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.updateParentCheckboxStatus = /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        /** @type {?} */
        var pNodes = [];
        rowNode.parents.forEach((/**
         * @param {?} rnid
         * @return {?}
         */
        function (rnid) {
            /** @type {?} */
            var rn = _this.findRowNode(rnid);
            if (rn) {
                pNodes.push(rn);
            }
        }));
        pNodes.reverse().forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            _this.updateCheckboxStatus(rn);
        }));
    };
    /** 更新N个父节点复选框中的选中状态 */
    /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    TreeTableComponent.prototype.updateParentsCheckStatus = /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    function (parentIds) {
        var _this = this;
        /** @type {?} */
        var pids = [];
        parentIds.forEach((/**
         * @param {?} ids
         * @return {?}
         */
        function (ids) {
            pids = tslib_1.__spread(pids, ids);
        }));
        pids = Array.from(new Set(pids));
        /** @type {?} */
        var pRowNodes = this.findRowNodes(pids);
        pRowNodes.sort((/**
         * @param {?} r
         * @param {?} n
         * @return {?}
         */
        function (r, n) {
            return n.level - r.level;
        })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            _this.updateCheckboxStatus(rn);
        }));
        // console.log(pRowNodes);
    };
    /** 更新节点中checkbox的状态 */
    /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.updateCheckboxStatus = /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        /** @type {?} */
        var status = this.isIndeterminate(rowNode);
        if (status !== undefined && rowNode.node.selectable) {
            rowNode.indeterminate = status === 2;
            this.ttService.onChangeCheckboxStatus(rowNode);
        }
    };
    /** 判断指定节点checkbox 的状态 */
    /**
     * 判断指定节点checkbox 的状态
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.isIndeterminate = /**
     * 判断指定节点checkbox 的状态
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    function (rowNode) {
        /** @type {?} */
        var status = this.getCheckboxStatus(rowNode);
        if (status !== undefined) {
            /** @type {?} */
            var checked = false;
            if (status === 2) {
                checked = false;
            }
            else {
                checked = !!status;
            }
            if (rowNode && rowNode.node.selectable) {
                rowNode.isChecked = checked;
                this.setCheckeds(rowNode);
            }
        }
        return status;
    };
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @param rowNode 父级节点；为空时返回全选checkbox 的状态
     */
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    TreeTableComponent.prototype.getCheckboxStatus = /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        /** @type {?} */
        var uncheckedLength = 0;
        /** @type {?} */
        var checkedLength = 0;
        /** @type {?} */
        var len = 0;
        /** @type {?} */
        var childNodes = [];
        if (rowNode) {
            childNodes = rowNode.node.children || [];
        }
        else {
            childNodes = this.state.rowNodes.filter((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) { return rn.level === 0; }));
        }
        len = childNodes.length;
        childNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            /** @type {?} */
            var rn = n;
            if (rowNode) {
                rn = _this.findRowNode(n.data[_this.idField]);
            }
            if (rn && !rn.indeterminate) {
                if (rn.isChecked) {
                    checkedLength++;
                }
                else {
                    uncheckedLength++;
                }
            }
        }));
        if (len === 0) {
            return undefined;
        }
        /** @type {?} */
        var flag = 0;
        if (uncheckedLength === len) {
            flag = 0;
        }
        else {
            if (checkedLength === len) {
                flag = 1;
            }
            else {
                flag = 2;
            }
        }
        return flag;
    };
    /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexIn = /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    function (node, treeNodes) {
        var _this = this;
        /** @type {?} */
        var index = -1;
        if (treeNodes && treeNodes.length) {
            index = treeNodes.findIndex((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                return _this.equals(v, node);
            }));
        }
        return index;
    };
    /**
     * 在选中的集合中查找指定节点的索引
     * @param node 树节点
     */
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexInCheckeds = /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        return this.findIndexIn(node, this.checkeds);
    };
    /**
     * 在选中的集合中查找指定节点的索引
     * @param node 树节点
     */
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexInSelection = /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        return this.findIndexIn(node, this.selections);
    };
    /** 对比两个节点是否同一个节点 */
    /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    TreeTableComponent.prototype.equals = /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    function (target, source) {
        return target.data[this.idField] === source.data[this.idField];
    };
    /**
     * 展开所有节点
     * @param rowNode 展开此节点下的所有节点；如果为空，则展开所有节点
     * @param deep 设置为true 时，当前节点下的所有子节点全部展开
     */
    /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开
     * @return {?}
     */
    TreeTableComponent.prototype.toggleExpand = /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开
     * @return {?}
     */
    function (treeNode, deep) {
        var _this = this;
        if (deep === void 0) { deep = false; }
        if (treeNode) {
            treeNode.expanded = !treeNode.expanded;
            this.toggleVisible(treeNode);
            if (this.virtualized) {
                if (treeNode.children && treeNode.children.length) {
                    this.renderVirtualRowNodes();
                }
            }
            if (treeNode.expanded) {
                this.expand.emit(treeNode);
            }
            else {
                this.collapse.emit(treeNode);
            }
            if (deep) {
                if (treeNode.children && treeNode.children.length) {
                    treeNode.children.forEach((/**
                     * @param {?} row
                     * @param {?} i
                     * @return {?}
                     */
                    function (row, i) {
                        _this.toggleExpand(row, deep);
                    }));
                }
            }
        }
        else {
            if (this.data && this.data.length) {
                this.data.forEach((/**
                 * @param {?} row
                 * @return {?}
                 */
                function (row) {
                    _this.toggleExpand(row);
                }));
            }
        }
        this.setNewColumnsWidth();
    };
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableComponent.prototype.toggleVisible = /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        var _this = this;
        /** @type {?} */
        var rowNode = this.findRowNode(treeNode.data[this.idField]);
        if (rowNode) {
            /** @type {?} */
            var rid_1 = rowNode.id;
            this.state.rowNodes.filter((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) { return rn.parents.indexOf(rid_1) > -1; })).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                /** @type {?} */
                var rnParent = _this.findRowNode(rn.parent.data[_this.idField]);
                if (rnParent) {
                    rn.visible = rnParent.visible && rn.parent.expanded;
                }
                else {
                    rn.visible = treeNode.expanded;
                }
            }));
        }
    };
    /** 展开指定节点 */
    /**
     * 展开指定节点
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.expandNode = /**
     * 展开指定节点
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    function (id, emit) {
        if (emit === void 0) { emit = true; }
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = true;
                this.toggleVisible(rowNode.node);
                if (this.virtualized) {
                    if (rowNode.node.children && rowNode.node.children.length) {
                        this.renderVirtualRowNodes();
                    }
                }
                else {
                    this.detectChanges();
                }
                if (emit) {
                    this.expand.emit(rowNode.node);
                }
                this.setNewColumnsWidth();
            }
            else {
                console.error('Con\'t find tree node widh id:' + id);
            }
        }
        else {
            console.error('PARAM id is null');
        }
    };
    /** 展开所有节点 */
    /**
     * 展开所有节点
     * @return {?}
     */
    TreeTableComponent.prototype.expandAll = /**
     * 展开所有节点
     * @return {?}
     */
    function () {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.node.expanded = true;
            row.visible = true;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.setNewColumnsWidth();
        this.expandAllNodes.emit();
        this.detectChanges();
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.expandNodes = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        // const rowNode = this.findRowNode(id);
        // const rootNode = this.getRoot(id);
        // if (rowNode) {
        //     const treeNode = rowNode.node;
        //     treeNode.expanded = true;
        //     rowNode.visible = true;
        //     const parents = rowNode.parents;
        //     this.state.rowNodes.filter(n => n.parents.indexOf(rootNode.id) > -1).forEach(r => {
        //         if (parents.indexOf(r.id) > -1) {
        //             r.visible = true;
        //             r.node.expanded = true;
        //         }
        //     });
        //     this.detectChanges();
        // }
    };
    /** 展开指定节点下的所有节点 */
    /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.expandAllNodesBy = /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        if (rowNode) {
            /** @type {?} */
            var treeNode = rowNode.node;
            treeNode.expanded = true;
            rowNode.visible = true;
            this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.parents.indexOf(rowNode.id) > -1; })).forEach((/**
             * @param {?} r
             * @return {?}
             */
            function (r) {
                r.visible = true;
                r.node.expanded = true;
            }));
            this.detectChanges();
            this.setNewColumnsWidth();
        }
    };
    /** 折叠指定节点 */
    /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.collapseNode = /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = false;
                this.toggleVisible(rowNode.node);
                this.detectChanges();
                this.setNewColumnsWidth();
                this.collapse.emit(rowNode.node);
            }
            else {
                console.error('Con\'t find tree node widh id:' + id);
            }
        }
        else {
            console.error('PARAM id is null');
        }
    };
    /** 折叠所有节点 */
    /**
     * 折叠所有节点
     * @return {?}
     */
    TreeTableComponent.prototype.collapseAll = /**
     * 折叠所有节点
     * @return {?}
     */
    function () {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.node.expanded = false;
            row.visible = !row.parent;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.collapseAllNodes.emit();
        this.detectChanges();
        this.setNewColumnsWidth();
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.getContainerOffset = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rect = this.containerElement.getBoundingClientRect();
        return {
            left: rect.left + document.body.scrollLeft,
            top: rect.top + document.body.scrollTop
        };
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResizeBegin = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var containerLeft = Math.round(this.getContainerOffset().left);
        this.lastResizerHelperX = (event.pageX - containerLeft + this.containerElement.scrollLeft);
        event.preventDefault();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResize = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.resizableColumns) {
            /** @type {?} */
            var containerLeft = this.getContainerOffset().left;
            this.renderer.addClass(this.containerElement, 'ui-unselectable-text');
            this.resizerHelperVC.nativeElement.style.height = this.containerElement.offsetHeight + 'px';
            this.resizerHelperVC.nativeElement.style.top = 0 + 'px';
            this.resizerHelperVC.nativeElement.style.left = (event.pageX - containerLeft) + 'px';
            this.resizerHelperVC.nativeElement.style.display = 'block';
        }
    };
    /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResizeEnd = /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    function (event, column) {
        // 偏移量
        /** @type {?} */
        var delta = this.resizerHelperVC.nativeElement.offsetLeft - this.lastResizerHelperX;
        // 列宽
        /** @type {?} */
        var columnWidth = column.offsetWidth;
        // 新宽度
        /** @type {?} */
        var newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        var minWidth = column.style.minWidth || 15;
        /** @type {?} */
        var resizeColumnIndex = this.columns.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === column.id; }));
        if (!this.fitColumns) {
            this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            if (this.columns[resizeColumnIndex]) {
                this.columns[resizeColumnIndex].width = newColumnWidth;
            }
            this.sortColumnsByFixed(false);
            this.setTableWidth(this.allColumnsWidth());
            // update css.
            /** @type {?} */
            var _colInfo = this.columns[resizeColumnIndex];
            if (_colInfo) {
                /** @type {?} */
                var ruleName = this.columnCssName(_colInfo);
                /** @type {?} */
                var stylecss = ruleName + '{width:' + newColumnWidth + 'px}';
                this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            }
            /** @type {?} */
            var nextColumn = this.columns[resizeColumnIndex + 1];
            if (nextColumn && nextColumn.fixed) {
                /** @type {?} */
                var ruleName = this.columnCssName(nextColumn);
                /** @type {?} */
                var stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';
                this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            }
        }
        else {
            if (newColumnWidth > minWidth) {
                /** @type {?} */
                var nextColumn = column.nextElementSibling;
                while (!nextColumn.offsetParent) {
                    nextColumn = nextColumn.nextElementSibling;
                }
                if (nextColumn) {
                    /** @type {?} */
                    var nextColumnWidth = nextColumn.offsetWidth - delta;
                    /** @type {?} */
                    var nextColumnMinWidth = nextColumn.style.minWidth || 15;
                    if (newColumnWidth > 15 && nextColumnWidth > nextColumnMinWidth) {
                        this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                        this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                    }
                }
            }
        }
        this.resizerHelperVC.nativeElement.style.display = 'none';
        this.renderer.removeClass(this.containerElement, 'ui-unselectable-text');
        this.psRef.directiveRef.update();
    };
    /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    TreeTableComponent.prototype.resizeColGroup = /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    function (table, resizeColumnIndex, newColumnWidth, nextColumnWidth) {
        if (table) {
            /** @type {?} */
            var colGroup = table.children[0].nodeName === 'COLGROUP' ? table.children[0] : null;
            if (colGroup) {
                /** @type {?} */
                var col = colGroup.children[resizeColumnIndex];
                /** @type {?} */
                var nextCol = col.nextElementSibling;
                col.style.width = newColumnWidth + 'px';
                if (nextCol) {
                    if (nextColumnWidth && this.fitColumns) {
                        nextCol.style.width = nextColumnWidth + 'px';
                    }
                }
            }
            else {
                throw new Error('Scrollable tables require a colgroup to support resizable columns');
            }
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onSearch = /**
     * @return {?}
     */
    function () {
        this.search.emit(this.searchData);
    };
    /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    TreeTableComponent.prototype.insert = /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    function (node, parent) {
        if (parent) {
            if (!parent.children) {
                parent.children = [];
            }
            parent.children.push(node);
            this.expandNode(parent.data[this.idField]);
            this.appendNew.emit({ parent: parent });
        }
        else {
            this.data.push(node);
        }
        this.updateSerializedValue();
    };
    /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    TreeTableComponent.prototype.append = /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    function (data, parent) {
        if (data && data[this.idField]) {
            this.insert({ data: data, id: data[this.idField] }, parent);
        }
        else {
            console.warn('Please set id value.');
        }
    };
    /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    TreeTableComponent.prototype.emitAppendNew = /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    function (parent) {
        if (this.virtualized) {
            /** @type {?} */
            var nodePosY = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
            this.updateSerializedValue(nodePosY);
        }
        else {
            this.updateSerializedValue();
        }
    };
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.appendChildren = /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    function (nodes, parent, emit) {
        if (emit === void 0) { emit = true; }
        var _a;
        if (nodes && nodes.length) {
            if (parent) {
                (_a = parent.children).push.apply(_a, tslib_1.__spread(nodes));
                this.emitAppendNew(parent);
                if (emit) {
                    this.appendNew.emit({ parent: parent });
                }
            }
            else {
                throw new Error('未找到父级节点');
            }
        }
        else {
            this.updateSerializedValue();
            console.warn('添加子节点的数据为空');
        }
    };
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.loadChildren = /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    function (nodes, parent, emit) {
        if (emit === void 0) { emit = true; }
        if (parent) {
            parent.children = nodes || [];
            this.emitAppendNew(parent);
            if (emit) {
                this.appendNew.emit({ parent: parent });
            }
        }
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    TreeTableComponent.prototype.remove = /**
     * @param {?} nodeId
     * @return {?}
     */
    function (nodeId) {
        var _this = this;
        if (nodeId) {
            /** @type {?} */
            var rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                // remove(this.state.rowNodes, (n) => {
                //     return n.id === nodeId;
                // });
                if (this.selectValue === nodeId) {
                    this.selectedRow = null;
                    this.selectValue = null;
                }
                if (rowNode.parent) {
                    remove(rowNode.parent.children, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n.data[_this.idField] === nodeId;
                    }));
                }
                else {
                    remove(this.state.rowNodes, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n.id === nodeId;
                    }));
                    this.data = this.data.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.data[_this.idField] !== nodeId; }));
                }
                this.updateSerializedValue();
                this.detectChanges();
                this.ttService.onRemove(rowNode);
                this.removed.emit(rowNode);
            }
        }
    };
    /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.update = /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    function (nodeId, data) {
        if (nodeId && data) {
            /** @type {?} */
            var rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                rowNode.node.data = extend(rowNode.node.data, data);
                this.detectChanges();
                this.ttService.onUpdate(rowNode);
                this.updated.emit(rowNode);
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setScorllBodyHeight = /**
     * @private
     * @return {?}
     */
    function () {
        this.scorllBodyHeight = this.height;
        if (this.showFilterBar) {
            this.scorllBodyHeight = this.scorllBodyHeight - 46;
        }
        if (this.fixedHeader && this.showHeader) {
            if (this.headerBox && (this.headerWrap || this.useGroupHeader)) {
                /** @type {?} */
                var hh = this.headerBox.nativeElement.clientHeight;
                this.scorllBodyHeight = this.scorllBodyHeight - hh;
            }
            else {
                this.scorllBodyHeight = this.scorllBodyHeight - this.headerHeight;
            }
        }
        if (this.pagination) {
            this.scorllBodyHeight = this.scorllBodyHeight - this.pagerHeight;
        }
        this.detectChanges();
    };
    /**
     * @param {?=} size
     * @return {?}
     */
    TreeTableComponent.prototype.resize = /**
     * @param {?=} size
     * @return {?}
     */
    function (size) {
        if (size) {
            this.width = size.width;
            this.height = size.height;
        }
        this.setScorllBodyHeight();
        if (this.data && this.data.length) {
            this.renderVirtualRowNodes();
        }
        // setTimeout(() => {
        //     if (this.psRef) {
        //         this.psRef.directiveRef.update();
        //     }
        // }, 100);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.loadData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.data = data;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.empty = /**
     * @return {?}
     */
    function () {
        this.data = [];
    };
    /**
     * @param {?=} detectChanges
     * @return {?}
     */
    TreeTableComponent.prototype.clearAll = /**
     * @param {?=} detectChanges
     * @return {?}
     */
    function (detectChanges) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) { return rn.indeterminate; })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            rn.indeterminate = false;
            _this.ttService.onChangeCheckboxStatus(rn);
        }));
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.isChecked = false;
            row.isSelected = false;
            row.indeterminate = false;
            return row;
        }));
        // if (this.virtualized && this.fixedHeader) {
        //     this.serializedValue = this.serializedValue.map((row: RowNode) => {
        //         row.isChecked = false;
        //         row.isSelected = false;
        //         row.indeterminate = false;
        //         return row;
        //     });
        // } else {
        //     this.serializedValue = this.state.rowNodes;
        // }
        this.checkeds = [];
        this.selections = [];
        this.selectedRow = undefined;
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        if (detectChanges) {
            this.detectChanges();
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.detectChanges = /**
     * @return {?}
     */
    function () {
        this.cdRef.markForCheck();
        // tslint:disable-next-line:no-string-literal
        if (!this.cdRef['destroyed']) {
            this.cdRef.detectChanges();
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clearCheckeds = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.checkeds && this.checkeds.length) {
            this.findRowNodes(this.checkeds.map((/**
             * @param {?} tn
             * @return {?}
             */
            function (tn) { return tn.data[_this.idField]; }))).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isChecked = false;
            }));
        }
        this.checkeds = [];
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clearSelections = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.selections && this.selections.length) {
            /** @type {?} */
            var nodeIds = this.selections.map((/**
             * @param {?} tn
             * @return {?}
             */
            function (tn) { return tn.data[_this.idField]; }));
            this.serializedValue.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                n.isSelected = false;
            }));
            this.findRowNodes(nodeIds).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isSelected = false;
                if (_this.singleSelect) {
                    rn.isChecked = false;
                }
            }));
        }
        this.selections = undefined;
        this.selectedRow = undefined;
        return this;
    };
    /** 选中第1个可以选中的节点 */
    /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    TreeTableComponent.prototype.selectFirstNode = /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    function () {
        if (this.state.rowNodes && this.state.rowNodes.length) {
            /** @type {?} */
            var firstCanSelectNode = this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.node.selectable; }));
            if (firstCanSelectNode) {
                this.selectNode(firstCanSelectNode.id);
            }
        }
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToCurrentRow = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var trId = 'rownode-' + id;
        // const trEle =    document.getElementById(trId);
        /** @type {?} */
        var trEle = this.el.nativeElement.querySelector('#' + trId) || document.getElementById(trId);
        if (trEle) {
            if (!this.isElementInViewport(trEle)) {
                trEle.scrollIntoView({ block: 'nearest', inline: 'nearest' });
            }
            return true;
        }
        return false;
    };
    /**
     * @private
     * @param {?} el
     * @return {?}
     */
    TreeTableComponent.prototype.isElementInViewport = /**
     * @private
     * @param {?} el
     * @return {?}
     */
    function (el) {
        /** @type {?} */
        var containerEl = this.el.nativeElement.querySelector('.farris-treetable-body');
        if (!containerEl) {
            return false;
        }
        /** @type {?} */
        var container = containerEl.getBoundingClientRect();
        /** @type {?} */
        var viewPortHeight = container.height;
        /** @type {?} */
        var offsetTop = el.offsetTop;
        /** @type {?} */
        var scrollTop = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
        /** @type {?} */
        var top = offsetTop - scrollTop;
        return top >= 0 && top <= viewPortHeight;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToCurrentNode = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.selectedRow) {
            /** @type {?} */
            var id_1 = this.selectedRow.id;
            /** @type {?} */
            var result = this.scrollToCurrentRow(id_1);
            if (!result) {
                /** @type {?} */
                var rowNode = this.findRowNode(id_1);
                if (rowNode.parents && rowNode.parents.length) {
                    rowNode.parents.forEach((/**
                     * @param {?} pid
                     * @return {?}
                     */
                    function (pid) {
                        /** @type {?} */
                        var top = _this.state.rowNodes.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n.visible; })).findIndex((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n.id === pid; })) * 30;
                        _this.scrollToY(top);
                        _this.expandNode(pid, false);
                    }));
                }
                else {
                    /** @type {?} */
                    var top_1 = this.state.rowNodes.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.visible; })).findIndex((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.id === id_1; })) * 30;
                    this.scrollToY(top_1 - 30);
                }
            }
        }
    };
    /** 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     */
    /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    TreeTableComponent.prototype.selectNode = /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    function (id, detectChanges, gotocurrent) {
        if (detectChanges === void 0) { detectChanges = true; }
        if (gotocurrent === void 0) { gotocurrent = true; }
        if (!id) {
            return this;
        }
        /** @type {?} */
        var node = this.findRowNode(id);
        /** @type {?} */
        var emit = !this.selectedRow || (this.selectedRow && id !== this.selectedRow.id);
        if (node && emit) {
            if (this.singleSelect || this.onlySelectSelf) {
                this.clearSelections();
                this.selections = [node.node];
                node.isSelected = true;
                if (this.checkOnSelect && this.showCheckbox) {
                    this.clearCheckeds();
                    node.isChecked = true;
                    this.checkeds = [node.node];
                }
            }
            else {
                this.setSelections(node);
            }
            this.selectedRow = node.node;
            this.selectNodeChangedSubject.next(id);
            this.nodeSelected.emit({ node: node.node, instance: this });
            if (detectChanges) {
                this.detectChanges();
            }
            if (gotocurrent && this.fixedHeader) {
                this.scrollToCurrentNode();
            }
        }
        else {
            if (!node) {
                this.selectedRow = null;
                console.warn("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
            }
        }
        return this;
    };
    /** 取消选中 */
    /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectNode = /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    function (id, detectChanges) {
        if (detectChanges === void 0) { detectChanges = true; }
        /** @type {?} */
        var rowNode = this.findRowNode(id);
        if (rowNode) {
            rowNode.isSelected = false;
            if (this.singleSelect) {
                this.clearSelections();
                this.selectedRow = null;
                rowNode.isChecked = false;
                this.selections = [];
            }
            else {
                if (this.onlySelectSelf) {
                    this.selections = [];
                }
                else {
                    this.setSelections(rowNode);
                }
            }
            if (detectChanges) {
                this.detectChanges();
            }
            this.nodeUnSelect.emit({ node: rowNode.node, instance: this });
        }
        else {
            console.warn("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
        }
    };
    /** 选中多行数据 */
    /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    TreeTableComponent.prototype.selectNodes = /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    function (ids, detectChanges, emitNodeSelected) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        if (emitNodeSelected === void 0) { emitNodeSelected = false; }
        if (ids && ids.length) {
            /** @type {?} */
            var nodes = this.findRowNodes(ids).map((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isSelected = true;
                _this.setSelections(rn);
                return rn.node;
            }));
            this.selections = tslib_1.__spread(this.selections);
            if (detectChanges) {
                this.detectChanges();
            }
            this.selectNodeChangedSubject.next(ids.join(','));
            if (emitNodeSelected) {
                this.nodeSelected.emit({ node: nodes, instance: this });
            }
        }
        return this;
    };
    /** 取消选中 */
    /**
     * 取消选中
     * @param {?=} ids
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectNodes = /**
     * 取消选中
     * @param {?=} ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        if (ids && ids.length) {
            /** @type {?} */
            var rownodes = this.findRowNodes(ids);
            if (rownodes && rownodes.length) {
                rownodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    rn.isSelected = false;
                    _this.setSelections(rn);
                }));
                this.selections = tslib_1.__spread(this.selections);
                this.detectChanges();
                this.nodeUnSelect.emit({ node: rownodes.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) { return r.node; })), instance: this });
            }
        }
        else {
            this.clearSelections();
            this.detectChanges();
        }
    };
    /**
     * 钩选指定的节点
     * @param updateParentCheckboxStatus: 是否更新父级节点checkbox 状态, 默认为 true
     * @param detectChanges 触发变更检测。默认为 true
     */
    /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    TreeTableComponent.prototype.checkedNode = /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    function (id, updateParentCheckboxStatus, detectChanges) {
        if (updateParentCheckboxStatus === void 0) { updateParentCheckboxStatus = true; }
        if (detectChanges === void 0) { detectChanges = true; }
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            var node = this.findRowNode(id);
            if (node) {
                node.isChecked = true;
                if (!this.isChecked(node.node)) {
                    // this.checkeds = [...this.checkeds || [], node.node];
                    this.setCheckeds(node);
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
                if (detectChanges) {
                    this.detectChanges();
                }
                this.nodeChecked.emit({ originalEvent: null, node: node.node, instance: this });
            }
            else {
                console.warn("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\u3002");
            }
        }
    };
    /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedNode = /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    function (id, updateParentCheckboxStatus) {
        if (updateParentCheckboxStatus === void 0) { updateParentCheckboxStatus = true; }
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            var rownode = this.findRowNode(id);
            if (rownode) {
                rownode.isChecked = false;
                this.setCheckeds(rownode);
                if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                    this.updateParentCheckboxStatus(rownode);
                }
                this.detectChanges();
                this.nodeUnChecked.emit({ node: rownode, instance: this });
            }
            else {
                console.warn("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\u3002");
            }
        }
    };
    /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype._checkedNodes = /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    function (ids, checked) {
        var _this = this;
        /** @type {?} */
        var parentIDS = [];
        /** @type {?} */
        var nodes = this.findRowNodes(ids).map((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            parentIDS.push(rn.parents);
            rn.isChecked = checked;
            _this.setCheckeds(rn);
            return rn.node;
        }));
        this.checkeds = tslib_1.__spread(this.checkeds);
        if (this.cascadeCheck && this.cascadeUp) {
            // 更新父节点复框的选中状态
            this.updateParentsCheckStatus(parentIDS);
        }
        return nodes;
    };
    /** 批量选中节点
     * @param ids: id 集合
     * @param detectChanges: boolean  默认为 true ,是否触发变更检测
     * closeCascade:  执行取消钩选时是否关闭级联功能。默认为 false
     *      设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     */
    /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    TreeTableComponent.prototype.checkedNodes = /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    function (ids, detectChanges, emit, closeCascade) {
        if (detectChanges === void 0) { detectChanges = true; }
        if (emit === void 0) { emit = true; }
        if (this.isEnableMultiSelect()) {
            if (ids && ids.length) {
                /** @type {?} */
                var _cascade = this.cascadeCheck;
                if (closeCascade && _cascade) {
                    this.cascadeCheck = false;
                }
                /** @type {?} */
                var nodes = this._checkedNodes(ids, true);
                if (closeCascade && _cascade) {
                    // 恢复级联
                    this.cascadeCheck = true;
                }
                this.updateAllCheckboxStatus();
                // this.checkeds = nodes;
                if (detectChanges) {
                    this.detectChanges();
                }
                if (emit) {
                    this.nodeChecked.emit({ originalEvent: null, node: nodes, nodes: nodes, instance: this });
                }
            }
        }
    };
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     */
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedNodes = /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    function (ids, closeCascade, emit) {
        if (emit === void 0) { emit = true; }
        if (ids && ids.length) {
            /** @type {?} */
            var _cascade = this.cascadeCheck;
            if (closeCascade && _cascade) {
                this.cascadeCheck = false;
            }
            /** @type {?} */
            var nodes = this._checkedNodes(ids, false);
            if (closeCascade && _cascade) {
                this.cascadeCheck = true;
            }
            this.detectChanges();
            // this.checkeds = nodes;
            if (emit) {
                this.nodeUnChecked.emit({ originalEvent: null, node: nodes, nodes: nodes, instance: this });
            }
        }
        else {
            this.clearCheckeds();
            this.detectChanges();
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.findRowNode = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            if (this.state.rowNodes) {
                return this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === id; }));
            }
        }
        return undefined;
    };
    /** 将在 v0.2.x 废弃；请使用 findRowNode 方法 */
    /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.findNode = /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    function (id) {
        return this.findRowNode(id);
    };
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param id 当前节点ID
     * @returns 返回顶级节点
     */
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    TreeTableComponent.prototype.getRoot = /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    function (id) {
        /** @type {?} */
        var rowNode = this.findRowNode(id);
        if (rowNode) {
            if (rowNode.parents && rowNode.parents.length) {
                return this.findRowNode(rowNode.parents[0]);
            }
            return rowNode;
        }
        return null;
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    TreeTableComponent.prototype.findRowNodes = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        return this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) { return ids.indexOf(rn.id) > -1; }));
    };
    /**
     * @param {?=} args
     * @return {?}
     */
    TreeTableComponent.prototype.checkAllNodes = /**
     * @param {?=} args
     * @return {?}
     */
    function (args) {
        var _this = this;
        /** @type {?} */
        var rowNodes = this.state.rowNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return (n.node.selectable || n.node.selectable === undefined); }));
        this.checkeds = rowNodes.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            n.indeterminate = false;
            _this.ttService.onChangeCheckboxStatus(n);
            if (n.node.selectable || n.node.selectable === undefined) {
                n.isChecked = true;
            }
            return n.node;
        }));
        if (this.selectOnCheck) {
            this.selections = rowNodes.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n.node.selectable || n.node.selectable === undefined) {
                    n.isSelected = true;
                }
                return n.node;
            }));
        }
        this.checkAll.emit(args);
        this.detectChanges();
    };
    /**
     * @param {?=} args
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckAllNodes = /**
     * @param {?=} args
     * @return {?}
     */
    function (args) {
        this.clearAll();
        this.unCheckAll.emit(args);
        this.detectChanges();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.isEnableMultiSelect = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.singleSelect) {
            if (!this.showCheckbox) {
                console.warn('未启用多选！');
                return false;
            }
            return true;
        }
        return true;
    };
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    TreeTableComponent.prototype.getNodeIconFromData = 
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    function (tn) {
        /** @type {?} */
        var leaf = null;
        /** @type {?} */
        var expand = null;
        /** @type {?} */
        var collapse = null;
        if (this.useIconFromData) {
            if (this.iconField) {
                /** @type {?} */
                var _iconField = '';
                if (typeof this.iconField === 'string') {
                    _iconField = this.iconField;
                    if (tn[_iconField]) {
                        leaf = tn[_iconField];
                    }
                    else {
                        leaf = this.utils.getValue(_iconField, tn.data);
                    }
                    expand = collapse = leaf;
                }
                else {
                    if (this.iconField.leaf) {
                        leaf = this.utils.getValue(this.iconField.leaf, tn.data);
                    }
                    if (this.iconField.expand) {
                        expand = this.utils.getValue(this.iconField.expand, tn.data);
                    }
                    if (this.iconField.collapse) {
                        collapse = this.utils.getValue(this.iconField.collapse, tn.data);
                    }
                    if (expand && !collapse) {
                        collapse = expand;
                    }
                    if (!expand && collapse) {
                        expand = collapse;
                    }
                }
            }
        }
        return {
            leaf: leaf, expand: expand, collapse: collapse
        };
    };
    /**
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableComponent.prototype.getTreeIcon = /**
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        var _a;
        /** @type {?} */
        var tn = treeNode;
        /** @type {?} */
        var leafIcon = this.leafIcon || 'file';
        /** @type {?} */
        var expandIcon = this.expandIcon || 'folder-open';
        /** @type {?} */
        var collapseIcon = this.collapseIcon || 'folder';
        /** @type {?} */
        var loading = 'treenode-loading';
        if (tn['showLoading']) {
            return _a = {}, _a[loading] = true, _a;
        }
        if (tn.icon) {
            leafIcon = tn.icon;
        }
        if (tn.expandedIcon) {
            expandIcon = tn.expandedIcon;
        }
        if (tn.collapsedIcon) {
            collapseIcon = tn.collapsedIcon;
        }
        if (this.useIconFromData) {
            var _b = this.getNodeIconFromData(treeNode), leaf = _b.leaf, expand = _b.expand, collapse = _b.collapse;
            if (this.whenDataIconEmptyUseDefault) {
                if (leaf) {
                    leafIcon = leaf;
                }
                if (expand) {
                    expandIcon = expand;
                }
                if (collapse) {
                    collapseIcon = collapse;
                }
            }
            else {
                leafIcon = leaf || '';
                expandIcon = expand || '';
                collapseIcon = collapse || '';
            }
        }
        /** @type {?} */
        var collapsedExpression = (!tn.leaf || !!(tn.children && tn.children.length)) && !tn.expanded;
        /** @type {?} */
        var expandedExpression = !!tn.expanded;
        /** @type {?} */
        var leafExpression = tn.leaf === undefined ? (!tn.children || !tn.children.length) : tn.leaf;
        /** @type {?} */
        var icons = {};
        if (leafExpression && leafIcon) {
            icons[leafIcon] = leafExpression;
        }
        else {
            if (tn.expanded && expandIcon) {
                icons[expandIcon] = expandedExpression;
            }
            else {
                if (collapseIcon) {
                    icons[collapseIcon] = collapsedExpression;
                }
            }
        }
        if (this.iconCls) {
            icons[this.iconCls] = true;
        }
        return icons;
    };
    /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    TreeTableComponent.prototype.compare = /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    function (a, b) {
        if (typeof a === 'string') {
            return a.localeCompare(b);
        }
        else {
            return a === b ? 0 : (a > b ? 1 : -1);
        }
    };
    /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    TreeTableComponent.prototype._sort = /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    function (r1, r2) {
        /** @type {?} */
        var r = 0;
        /** @type {?} */
        var sortFields = this.sortName.split(',');
        /** @type {?} */
        var orders = this.sortOrder.split(',');
        if (!this.sortName) {
            return r;
        }
        var _loop_1 = function (i) {
            /** @type {?} */
            var sn = sortFields[i];
            /** @type {?} */
            var so = orders[i];
            /** @type {?} */
            var col = this_1.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.field === sn; }));
            /** @type {?} */
            var orderby = col.sorter || this_1.compare;
            /** @type {?} */
            var v1 = this_1.utils.getValue(sn, r1.data);
            if (v1 === null || v1 === undefined) {
                v1 = '';
            }
            /** @type {?} */
            var v2 = this_1.utils.getValue(sn, r2.data);
            if (v2 === null || v2 === undefined) {
                v2 = '';
            }
            r = orderby(v1, v2);
            if (r !== 0) {
                return { value: r * (so === 'asc' ? 1 : -1) };
            }
        };
        var this_1 = this;
        for (var i = 0; i < sortFields.length; i++) {
            var state_1 = _loop_1(i);
            if (typeof state_1 === "object")
                return state_1.value;
        }
        return r;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clientSort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var sortedData = this.data.sort(this._sort.bind(this));
        /** @type {?} */
        var sortChildNodes = (/**
         * @param {?} childNodes
         * @return {?}
         */
        function (childNodes) {
            childNodes = childNodes.sort(_this._sort.bind(_this));
            childNodes.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n.children && n.children.length) {
                    n.children = n.children.sort(_this._sort.bind(_this));
                    sortChildNodes(n.children);
                }
            }));
            return childNodes;
        });
        sortedData.forEach((/**
         * @param {?} c
         * @return {?}
         */
        function (c) {
            c.children = sortChildNodes(c.children);
        }));
        this.loadData(sortedData);
    };
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.onSortColumnClick = /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    function ($event, col) {
        var _this = this;
        if (!col.sortable) {
            return;
        }
        /** @type {?} */
        var sortName = this.sortName;
        /** @type {?} */
        var sortOrder = this.sortOrder;
        /** @type {?} */
        var sortFields = [];
        /** @type {?} */
        var sortOrders = [];
        if (sortName) {
            sortFields = sortName.split(',');
            sortOrders = sortOrder.split(',');
        }
        /** @type {?} */
        var colOrder = col.order || 'asc';
        /** @type {?} */
        var newOrder = colOrder;
        /** @type {?} */
        var i = sortFields.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n === col.field; }));
        if (i >= 0) {
            /** @type {?} */
            var _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';
            newOrder = _order;
            if (this.multiSort && newOrder === 'asc') {
                newOrder = undefined;
                sortFields.splice(i, 1);
                sortOrders.splice(i, 1);
            }
            else {
                sortOrders[i] = _order;
            }
        }
        else {
            if (this.multiSort) {
                sortFields.push(col.field);
                sortOrders.push(colOrder);
            }
            else {
                sortFields = [col.field];
                sortOrders = [colOrder];
            }
        }
        col.order = newOrder;
        this.sortName = sortFields.join(',');
        this.sortOrder = sortOrders.join(',');
        if (!this.multiSort) {
            /** @type {?} */
            var updateFieldOrder = (/**
             * @param {?} cols
             * @return {?}
             */
            function (cols) {
                if (!cols || !cols.length) {
                    return;
                }
                cols.forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) {
                    c.order = undefined;
                    /** @type {?} */
                    var k = sortFields.findIndex((/**
                     * @param {?} f
                     * @return {?}
                     */
                    function (f) { return f === c.field; }));
                    if (k >= 0) {
                        c.order = sortOrders[k];
                    }
                }));
            });
            updateFieldOrder(this.columns);
            this.cdRef.detectChanges();
        }
        this.beforeSortColumn(this.sortName, this.sortOrder).subscribe((/**
         * @return {?}
         */
        function () {
            if (_this.remoteSort) {
                // this.reload();
            }
            else {
                _this.clientSort();
            }
            _this.columnSorted.emit({ sortName: _this.sortName, sortOrder: _this.sortOrder });
        }));
    };
    /** 查询工具条前端字符查询 */
    /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.findKeyWords = /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        /** @type {?} */
        var searchValue = $event.value;
        /** @type {?} */
        var field = $event.field;
        this.findField = field;
        if (searchValue && searchValue.length >= 2) {
            this.findValue = searchValue;
            if (!field) {
                console.warn('Please set a field for the FindField property.');
                return;
            }
            /** @type {?} */
            var result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
            if (result && result.length) {
                this.findResult = result.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                function (a, b) { return a.index === b.index ? 0 : (a.index > b.index ? 1 : -1); }));
                /** @type {?} */
                var firstRowIndex_1 = result[0].index;
                this.findCount = result.length;
                /** @type {?} */
                var parents = this.searchHandle.findParents(result, this.state.rowNodes);
                this.findCurrent = 1;
                tslib_1.__spread(parents, result).forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.expandNode(r.id);
                }));
                /** @type {?} */
                var y_1 = 0;
                this.state.rowNodes.forEach((/**
                 * @param {?} row
                 * @param {?} index
                 * @return {?}
                 */
                function (row, index) {
                    if (row.visible && firstRowIndex_1 > index) {
                        y_1 += _this.rowHeight;
                    }
                }));
                if (this.psRef && this.psRef.directiveRef) {
                    this.psRef.directiveRef.scrollToY(y_1 - 30);
                }
                this.highLightKeywords();
            }
            else {
                this.findResult = [];
                this.findCurrent = 0;
                this.findCount = 0;
            }
        }
        else {
            this.resetFindText();
            this.cdRef.detectChanges();
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.closeFindPanel = /**
     * @return {?}
     */
    function () {
        this.showFindInput = false;
        this.resetFindText();
        this.cdRef.detectChanges();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.highLightKeywords = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var allHighLights = _this.el.nativeElement.querySelectorAll('.search-highlight');
                if (!allHighLights.length) {
                    return;
                }
                // this.findResult = this.findResult.concat(Array.from(allHighLights));
                // this.findResult = Array.from(new Set(this.findResult));
                // this.findCount = allHighLights.length;
                _this.cdRef.detectChanges();
                _this.renderer.addClass(allHighLights[0], 'active');
            }), 100);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.resetFindText = /**
     * @private
     * @return {?}
     */
    function () {
        this.findValue = '';
        this.findCurrent = 0;
        this.findCount = 0;
        this.findResult = [];
    };
    /**
     * @param {?} step
     * @return {?}
     */
    TreeTableComponent.prototype.nextFindValue = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        var _this = this;
        if (!this.findResult || !this.findResult.length) {
            return;
        }
        /** @type {?} */
        var allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
        if (this.findCurrent === this.findResult.length) {
            this.findCurrent = 1;
        }
        else {
            if (step) {
                this.findCurrent = this.findCurrent + step;
                if (step === -1) {
                    if (this.findCurrent <= 0) {
                        this.findCurrent = 1;
                    }
                }
            }
            else {
                this.findCurrent++;
            }
        }
        /** @type {?} */
        var active = this.el.nativeElement.querySelector('.search-highlight.active');
        /** @type {?} */
        var _index = allHighLights.indexOf(active);
        if (active) {
            this.renderer.removeClass(active, 'active');
        }
        if (this.virtualized) {
            _index += !step ? 1 : step;
            if (allHighLights[_index]) {
                this.renderer.addClass(allHighLights[_index], 'active');
            }
            else {
                // 先滚动指定位置
                /** @type {?} */
                var nextRow_1 = this.findResult[this.findCurrent - 1];
                /** @type {?} */
                var y_2 = 0;
                this.state.rowNodes.forEach((/**
                 * @param {?} row
                 * @param {?} index
                 * @return {?}
                 */
                function (row, index) {
                    if (row.visible && nextRow_1.index > index) {
                        y_2 += _this.rowHeight;
                    }
                }));
                if (this.psRef && this.psRef.directiveRef) {
                    this.psRef.directiveRef.scrollToY(y_2 - 30, 200);
                }
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        /** @type {?} */
                        var keyWords = _this.el.nativeElement.querySelectorAll('.search-highlight');
                        _this.renderer.addClass(keyWords[0], 'active');
                    }), 100);
                }));
            }
        }
        else {
            /** @type {?} */
            var currentEl = allHighLights[this.findCurrent - 1];
            if (currentEl) {
                this.renderer.addClass(currentEl, 'active');
                if (this.psRef && this.psRef.directiveRef) {
                    /** @type {?} */
                    var sTop = currentEl.closest('td').offsetTop - 30;
                    this.psRef.directiveRef.scrollToY(sTop, 200);
                }
            }
        }
        this.cdRef.detectChanges();
    };
    /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToY = /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    function (y, animations) {
        if (animations === void 0) { animations = 200; }
        this.state.scrollY = y || 0;
        this.psRef.directiveRef.scrollToY(y, animations);
    };
    /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    TreeTableComponent.prototype.showOrHideColumn = /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    function (field, isHide) {
        if (Array.isArray(field)) {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (field.indexOf(n.field) > -1) {
                    n.visible = !isHide;
                }
            }));
        }
        else {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (field === n.field) {
                    n.visible = !isHide;
                }
            }));
        }
        this.columnsChanged();
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.showColumn = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.showOrHideColumn(field, false);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.hideColumn = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.showOrHideColumn(field, true);
    };
    /**
     * @param {?} parentNode
     * @return {?}
     */
    TreeTableComponent.prototype.showChildsLoading = /**
     * @param {?} parentNode
     * @return {?}
     */
    function (parentNode) {
        var _a;
        /** @type {?} */
        var colspan = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.visible !== false; })).length;
        /** @type {?} */
        var data = (_a = {}, _a[this.idField] = '正在加载中....', _a.__colspan__ = colspan, _a);
        this.loadChildren([{ data: data, __childs_loading__: true }], parentNode, false);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onChildsPageChanged = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        // console.log($event);
        this.childsPageChanged.emit($event);
    };
    /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    TreeTableComponent.prototype.trId2DataId = /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    function (tr) {
        return tr.id.replace('rownode-', '');
    };
    // 快捷键
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onKeydownEvent = 
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if (!$event || !this.singleSelect || !this.data || !this.data.length) {
            return;
        }
        /** @type {?} */
        var keys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
        if (!keys.includes($event.key) || $event.target.nodeName === 'INPUT') {
            return;
        }
        $event.stopPropagation();
        $event.preventDefault();
        this.inputGroup.textbox.nativeElement.blur();
        /** @type {?} */
        var newIdx;
        /** @type {?} */
        var trs = Array.from(this.bodyTable.nativeElement.querySelectorAll('tr'));
        /** @type {?} */
        var trCount = trs.length;
        /** @type {?} */
        var selectedTrIndex = -1;
        if (this.selectedRow) {
            selectedTrIndex = trs.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return _this.trId2DataId(n) === _this.selectedRow.id; }));
        }
        if ($event.code === 'ArrowDown') {
            newIdx = selectedTrIndex + 1;
        }
        else if ($event.code === 'ArrowUp') {
            if (selectedTrIndex !== -1) {
                newIdx = selectedTrIndex - 1;
            }
        }
        else {
            if (this.selectedRow && ($event.code === 'ArrowRight' || $event.code === 'ArrowLeft')) {
                this.toggleExpand(this.selectedRow);
            }
            return;
        }
        if (newIdx >= 0 && newIdx < trCount) {
            /** @type {?} */
            var _tr = (/** @type {?} */ (trs[newIdx]));
            if (_tr) {
                /** @type {?} */
                var id = this.trId2DataId(_tr);
                this.selectNode(id);
                _tr.scrollIntoView({ block: 'nearest' });
            }
        }
    };
    TreeTableComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-treetable',
                    template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-03 20:00:11\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-28 14:23:52\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n<div class=\"filter-row\" style=\"width: 100%;\" *ngIf=\"showFilterBar\">\r\n    <form style=\"display: flex; width: 100%;\">\r\n        <div class=\"search-fields\" style=\"padding-left:0;\">\r\n            <select class=\"custom-select\" [(ngModel)]=\"searchData.field\" name=\"field\">\r\n                <option value=\"*\">{{allColumnsTitle}}</option>\r\n                <option *ngFor=\"let col of searchFields\" value=\"{{col.value}}\">{{ col.label }}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"search-text flex-fill\" style=\"padding-right: 0px;\">\r\n            <input-group #inputGroup [groupText]=\"searchButtonText\" name=\"searchValue\" [(ngModel)]=\"searchData.value\"\r\n                (clear)=\"onClearSearchValue()\" (valueChange)=\"onSearchValueChange($event)\" (clickHandle)=\"onSearch()\"\r\n                (keydownHandle)=\"onKeydownEvent($event)\"></input-group>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<ng-content select=\"tt-column\"></ng-content>\r\n\r\n<ng-template #tdcell let-col let-serializedNode=\"rowNode\" let-left=\"left\">\r\n\r\n    <ng-container *ngIf=\"enableFindText\">\r\n        <span *ngIf=\"!col.formatter\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data) | highlight: findValue: col.field :findField\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"!enableFindText\">\r\n        <span *ngIf=\"!col.formatter\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data)\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<ng-template #tbodyrows>\r\n    <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForTrackBy]=\"trackByFn\" [ngForOf]=\"pagination ? (serializedValue | paginate: paginationOptions) : serializedValue\">\r\n        <tr *ngIf=\"serializedNode.visible\" #row=\"row\" \r\n            [attr.id]=\" 'rownode-' + serializedNode.id\" class=\"f-treetable-row\"\r\n            [selectRow]=\"serializedNode\" [rowIndex]=\"rowIndex\" [dblclick]=\"true\" [dblclickNode]=\"serializedNode\"\r\n            [selectRowDisabled]=\"!serializedNode.node.selectable\"\r\n            [customRowStyle]=\"serializedNode\"\r\n            [class.f-treetable-disable-row]=\"row.selectRowDisabled\"\r\n            [class.farris-table-selectedrow]=\"serializedNode.isSelected\">\r\n\r\n            <td *ngIf=\"serializedNode.node.data['__colspan__']\"  [attr.colspan]=\" serializedNode.node.data['__colspan__'] || 0\">\r\n                <childs-loading></childs-loading>\r\n            </td>\r\n\r\n            <ng-container *ngIf=\"!serializedNode.node.data['__colspan__']\">\r\n                <td *ngFor=\"let col of columns; let i = index;\"\r\n                    [customCellStyle]=\"col\" [rowNode]=\"serializedNode\" [rowIndex]=\"rowIndex\"\r\n                    [style.textAlign]=\"col!.align || 'left'\" \r\n                    (click)=\"onCellClick($event, col, serializedNode.node)\"\r\n                    class=\"treetable-cell\" [attr.field]=\"col.field\"\r\n                    [attr.colspan]=\" serializedNode.node.data['__cellspan__'] || 0\"\r\n                    [attr.title]=\"col | tipmsg: serializedNode.node\"\r\n                    [class.f-treetable--fixed-left]=\"fixedHeader && col.fixed && col.fixed === 'left'\"\r\n                    [class.f-treetable--fixed-right]=\"fixedHeader && col.fixed && col.fixed === 'right'\"\r\n                    [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n                    [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n                >\r\n\r\n                    <div class=\"treetable-cell-content d-flex\">\r\n                        <farris-treeTableToggler style=\"float: left\"\r\n                            [showLines]=\"showLines\"\r\n                            [indentSpacing]=\"indentSpacing\"\r\n                            [disabled]=\"!serializedNode.node.selectable || disabled\"\r\n                            [rowNode]=\"serializedNode\" *ngIf=\"i == 0\"></farris-treeTableToggler>\r\n                        \r\n                        <div class=\"flex-grow-1 text\">\r\n                            <ng-container *ngIf=\"!col.template\">\r\n                                <ng-container *ngTemplateOutlet=\"tdcell; context: {$implicit: col, node: serializedNode.node, rowNode: serializedNode, rowData: serializedNode.node.data  }\" ></ng-container>\r\n                            </ng-container>\r\n            \r\n                            <ng-container *ngIf=\"col.template\"\r\n                                [ngTemplateOutlet]=\"col.template\"\r\n                                [ngTemplateOutletContext]=\"{$implicit: { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }}\">\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n            </ng-container>\r\n        </tr>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<ng-template #tbody>\r\n    <tbody class=\"farris-treetable-tbody\"\r\n        [farris-context-menus]=\"contextMenuItems\" [disabled]=\"!enableContextMenu\" \r\n        [activeDomName]=\"'tr'\" [beforeShowContextMenu]=\"onBeforeShowContextMenu\"\r\n        [menuClass]=\"'f-treetable-context-menu'\">\r\n        <ng-container *ngTemplateOutlet=\"tbodyrows\"></ng-container>\r\n    </tbody>\r\n</ng-template>\r\n\r\n<!--\u5355\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #headerCells let-cols>\r\n    <ng-template ngFor let-col [ngForOf]=\"cols\" let-i=\"index\" let-first=\"first\" let-last=\"last\">\r\n        <th [resizable-column]=\"!col.lastColumn && (!col.colspan || col.colspan == 1)\" [style.textAlign]=\"col!.hAlign || 'left'\" #th \r\n            class=\"treetable-header-cell\"\r\n            [class.f-treetable--fixed-left]=\"col.fixed && col.fixed === 'left'\"\r\n            [class.f-treetable--fixed-right]=\"col.fixed && col.fixed === 'right'\"\r\n            [attr.field]=\"col.field || ''\"\r\n            [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n            [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n            [attr.colspan]=\"col.colspan\" \r\n            [attr.rowspan]=\"col.rowspan\"\r\n            [class.group-header-cell]=\"col.colspan && col.colspan > 1\"\r\n            [attr.id]=\"col.id\"\r\n            >\r\n      \r\n            <div class=\"d-flex\" style=\"line-height: 1.25em;\" [style.padding-right.px]=\"col.sortable ? 10: 0\">\r\n                <ng-container *ngIf=\"!singleSelect && showCheckAll && first && showCheckbox && !last\">\r\n                    <tt-header-checkbox #allCheckbox></tt-header-checkbox>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"col.headTemplate\"\r\n                    [ngTemplateOutlet]=\"col.headTemplate\"\r\n                    [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!col.headTemplate\">\r\n                    <span style=\"overflow: hidden;width: 100%;\" *ngIf=\"!headerWrap\">{{ col.title }}</span>\r\n                    <span style=\"white-space: pre-wrap;width: 100%;\"  *ngIf=\"headerWrap\">{{ col.title }}</span>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"col.sortable\">\r\n                    <span class=\"f-treetable-sort\"\r\n                        [class.f-treetable-sort-asc]=\"col.order === 'asc'\"\r\n                        [class.f-treetable-sort-desc]=\"col.order === 'desc'\"\r\n                        (click)=\"onSortColumnClick($event, col)\" *ngIf=\"col.order\"></span>\r\n                    <span class=\"f-treetable-sort\" (click)=\"onSortColumnClick($event, col)\" *ngIf=\"!col.order\"></span>\r\n                </ng-container>\r\n\r\n            </div>\r\n        </th>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<!--\u591A\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #groupHeader>\r\n    <tr *ngFor=\"let cols of groupColumns\">\r\n        <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: cols}\"></ng-container>\r\n    </tr>\r\n</ng-template>\r\n\r\n\r\n<ng-template #scorllview>\r\n    <div class=\"farris-treetable fixed\" [attr.id]=\"id\" [class.f-treetable--fixed-columns]=\"fixedColumns\"\r\n        [class.farris-treetable-nowrap]=\"!nowrap\" [class.table-bordered]=\"showBorder\"\r\n        [ngClass]=\"{'farris-treetable-disabled': disabled, 'flex-fill': fit}\"\r\n        [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" [style.width]=\"fit ? '100%' : width + 'px'\"\r\n        >\r\n        <div #headerBox class=\"farris-treetable-header\" *ngIf=\"showHeader && columns\" style=\"overflow: hidden; background-color: #f7f8fb\">\r\n            <table #headerTable class=\"table\" >\r\n                <colgroup *ngIf=\"!autoWidth\">\r\n                    <ng-container *ngFor=\"let col of columns\">\r\n                        <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                    </ng-container>\r\n                </colgroup>\r\n                <thead class=\"farris-treetable-thead\" [class.header-wrap]=\"headerWrap\">\r\n                    <ng-container *ngIf=\"!headerTemplate\">\r\n                        <tr *ngIf=\"!useGroupHeader; else groupHeader\">\r\n                            <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: columns}\"></ng-container>\r\n                        </tr>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"headerTemplate\">\r\n                        <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n                    </ng-container>\r\n                </thead>\r\n            </table>\r\n            <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n            <find-input *ngIf=\"showFindInput\" [columns]=\"columns\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n                (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\" (enterHandler)=\"nextFindValue($event)\">\r\n            </find-input>\r\n\r\n        </div>\r\n\r\n        <div class=\"farris-treetable-body\">\r\n            <perfect-scrollbar #perfectScrollbar [config]=\"{minScrollbarLength: 15}\" (psScrollX)=\"onScrollX($event)\"\r\n                (psScrollY)=\"onScrollY($event)\" [style.height]=\"scorllBodyHeight + 'px'\">\r\n                <div *ngIf=\"topHideHeight && virtualized\" [style.height]=\"topHideHeight + 'px'\"> </div>\r\n                <table #bodyTable class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n                    [ngClass]=\"{'table-striped': striped, 'table-hover': hovered, 'f-table-norecords': (!serializedValue || !serializedValue.length) }\">\r\n                    <colgroup>\r\n                        <ng-container *ngFor=\"let col of columns\">\r\n                            <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                        </ng-container>\r\n                    </colgroup>\r\n\r\n                    <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n                        <tbody class=\"farris-treetable-tbody\">\r\n                            <tr class=\"f-table-norecords-row\">\r\n                                <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                                    <div class=\"f-table-norecords-content\" >\r\n                                        {{ 'treetable.emptyMessage' | locale }}\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n                        <ng-container *ngIf=\"bodyTemplate\">\r\n                            <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\"></tbody>\r\n                        </ng-container>\r\n\r\n                        <ng-container #defaultBodyTemplate *ngIf=\"!bodyTemplate\">\r\n                            <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </table>\r\n                <div *ngIf=\"bottomHideHeight && virtualized\" [style.height]=\"bottomHideHeight + 'px'\"> </div>\r\n            </perfect-scrollbar>\r\n        </div>\r\n\r\n        <!-- \u5206\u9875\u6761 -->\r\n        <div *ngIf=\"pagination\" #tablePager class=\"farris-table-pager\">\r\n            <pagination-controls #pager [id]=\"paginationOptions?.id\"\r\n                [maxSize]=\"pagerLabelSize\" [directionLinks]=\"true\"\r\n                [autoHide]=\"false\" [responsive]=\"true\"\r\n                [previousLabel]=\"' '\" [nextLabel]=\"' '\"\r\n                [showPageInfo]=\"showPageInfo\" [showPageNumber]=\"showPageNumber\" [showPageList]=\"showPageList\"\r\n                (pageChange)=\"onPageChange($event)\"\r\n                (pageSizeChange)=\"onPageSizeChange($event)\"\r\n                >\r\n            </pagination-controls>\r\n        </div>\r\n\r\n        <div #resizerHelper class=\"column-resizer-helper\" *ngIf=\"resizableColumns\"></div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #nodespagerbar let-ctx>\r\n    <nodes-pager [context]=\"ctx\" (pageChange)=\"onChildsPageChanged($event)\"></nodes-pager>\r\n</ng-template>\r\n\r\n\r\n\r\n<div class=\"farris-treetable\" [class.table-bordered]=\"showBorder\" [attr.id]=\"id\"\r\n    [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" \r\n    [class.farris-treetable-nowrap]=\"!nowrap\"  *ngIf=\"!fixedHeader; else scorllview\">\r\n    <table class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n        [ngClass]=\"{'table-striped': striped, 'table-hover': hovered, 'f-table-norecords': (!serializedValue || !serializedValue.length) }\">\r\n        <thead class=\"farris-treetable-thead\" *ngIf=\"showHeader\" [class.header-wrap]=\"headerWrap\">\r\n            <ng-container *ngIf=\"!headerTemplate && columns\">\r\n                <th *ngFor=\"let col of columns;let isFirst=first\" [style.textAlign]=\"col!.hAlign || 'left'\" class=\"treetable-header-cell\" [attr.field]=\"col.field\">\r\n                    <div class=\"d-flex\">\r\n                        <ng-container *ngIf=\"!singleSelect && showCheckAll && isFirst && showCheckbox\">\r\n                            <tt-header-checkbox #allCheckbox class=\"f-cmp-treetable-toggler\"></tt-header-checkbox>\r\n                        </ng-container>\r\n\r\n                        <ng-container *ngIf=\"!col.headTemplate\">\r\n                            <div class=\"flex-grow-1 text\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\">{{col.title}}</div>\r\n                        </ng-container>\r\n        \r\n                        <ng-container *ngIf=\"col.headTemplate\"\r\n                            [ngTemplateOutlet]=\"col.headTemplate\"\r\n                            [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                        </ng-container>\r\n                        \r\n                    </div>\r\n                </th>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"headerTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n            </ng-container>\r\n        </thead>\r\n        <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n             <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n             <find-input *ngIf=\"showFindInput\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n             (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\"  [columns]=\"columns\"\r\n             (enterHandler)=\"nextFindValue($event)\"></find-input>\r\n            <ng-container *ngIf=\"bodyTemplate\">\r\n                <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\">\r\n                </tbody>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!bodyTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n            <tbody class=\"farris-treetable-tbody\">\r\n                <tr class=\"f-table-norecords-row\" style=\"height: 200px\">\r\n                    <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                        <div class=\"f-table-norecords-content\" >\r\n                            {{ 'treetable.emptyMessage' | locale }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </ng-container>\r\n    </table>\r\n</div>\r\n\r\n",
                    exportAs: 'treeTable',
                    encapsulation: ViewEncapsulation.None,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["\n        .farris-treetable {\n            position: relative;\n        }\n        .resizable-column {\n            background-clip: padding-box;\n            position: relative;\n        }\n        .column-resizer {\n            display: block;\n            position: absolute!important;\n            top: 0;\n            right: 0;\n            margin: 0;\n            width: .5em;\n            height: 100%;\n            padding: 0;\n            cursor: col-resize;\n            border: 1px solid transparent;\n        }\n        .column-resizer-helper {\n            width: 1px;\n            position: absolute;\n            z-index: 10;\n            display: none;\n            border-right: 1px dashed #1890ff;\n        }\n\n        .farris-treetable-disabled .farris-treetable-body .table tr{\n            opacity: 0.4;\n            cursor: not-allowed;\n        }\n        .farris-treetable-disabled .table tr.farris-table-selectedrow{\n            opacity: 1;\n            cursor: default;\n        }\n\n        .custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after {\n            background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e\");\n            background-color: #1890ff;\n        }\n        .unselectable-text {\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -o-user-select: none;\n            -ms-user-select: none;\n            user-select: none\n        }\n        .search-highlight {\n            background-color: #FFFF1F;\n        }\n        .search-highlight.active{\n            background-color: #FF901C;\n        }\n\n    "]
                }] }
    ];
    /** @nocollapse */
    TreeTableComponent.ctorParameters = function () { return [
        { type: TreetableService },
        { type: ElementRef },
        { type: ResizeService },
        { type: Renderer2 },
        { type: CommonUtils },
        { type: ColumnFormatService },
        { type: TTHotkeys },
        { type: ChangeDetectorRef },
        { type: NgZone },
        { type: Injector }
    ]; };
    TreeTableComponent.propDecorators = {
        width: [{ type: Input }],
        height: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        headerHeight: [{ type: Input }],
        headerWrap: [{ type: Input }],
        rowHeight: [{ type: Input }],
        columns: [{ type: Input }],
        groupColumns: [{ type: Input }],
        useGroupHeader: [{ type: Input }],
        fitColumns: [{ type: Input }],
        searchFields: [{ type: Input }],
        allColumnsTitle: [{ type: Input }],
        showLines: [{ type: Input }],
        showLinesOnHover: [{ type: Input }],
        multiSelect: [{ type: Input }],
        singleSelect: [{ type: Input }],
        showCheckbox: [{ type: Input }],
        idField: [{ type: Input }],
        showBorder: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        showHeader: [{ type: Input }],
        striped: [{ type: Input }],
        hovered: [{ type: Input }],
        disabled: [{ type: Input }],
        loadDataType: [{ type: Input }],
        fixedHeader: [{ type: Input }],
        checkOnSelect: [{ type: Input }],
        selectOnCheck: [{ type: Input }],
        onlySelectSelf: [{ type: Input }],
        resizableColumns: [{ type: Input }],
        fit: [{ type: Input }],
        cascadeCheck: [{ type: Input }],
        cascadeDown: [{ type: Input }],
        cascadeUp: [{ type: Input }],
        emptyMessage: [{ type: Input }],
        indentSpacing: [{ type: Input }],
        keepSelect: [{ type: Input }],
        virtualized: [{ type: Input }],
        onlySelectLeaf: [{ type: Input }],
        showIcon: [{ type: Input }],
        leafIcon: [{ type: Input }],
        expandIcon: [{ type: Input }],
        collapseIcon: [{ type: Input }],
        foldIcon: [{ type: Input }],
        unfoldIcon: [{ type: Input }],
        useIconFromData: [{ type: Input }],
        whenDataIconEmptyUseDefault: [{ type: Input }],
        iconField: [{ type: Input }],
        iconCls: [{ type: Input }],
        remoteSort: [{ type: Input }],
        sortName: [{ type: Input }],
        sortOrder: [{ type: Input }],
        multiSort: [{ type: Input }],
        beforeSortColumn: [{ type: Input }],
        rowStyler: [{ type: Input }],
        cellStyler: [{ type: Input }],
        enableFindText: [{ type: Input }],
        findField: [{ type: Input }],
        expandLevel: [{ type: Input }],
        selectValue: [{ type: Input }],
        selectValueChange: [{ type: Output }],
        dblClickExpand: [{ type: Input }],
        selectValues: [{ type: Input }],
        selectValuesChange: [{ type: Output }],
        nowrap: [{ type: Input }],
        checkValues: [{ type: Input }],
        checkValuesChange: [{ type: Output }],
        beforeNodeSelected: [{ type: Input }],
        beforeNodeUnSelected: [{ type: Input }],
        beforeNodeChecked: [{ type: Input }],
        beforeNodeUnChecked: [{ type: Input }],
        beforeCheckAll: [{ type: Input }],
        beforeUnCheckAll: [{ type: Input }],
        beforeClickNode: [{ type: Input }],
        pagination: [{ type: Input }],
        paginationForChildren: [{ type: Input }],
        pagerViewMode: [{ type: Input }],
        pagerOnServer: [{ type: Input }],
        pageList: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pagerHeight: [{ type: Input }],
        showPageList: [{ type: Input }],
        showPageInfo: [{ type: Input }],
        showPageNumber: [{ type: Input }],
        pagerLabelSize: [{ type: Input }],
        total: [{ type: Input }],
        enableContextMenu: [{ type: Input }],
        contextMenuItems: [{ type: Input }],
        beforeShowContextMenu: [{ type: Input }],
        pageSizeChanged: [{ type: Output }],
        pageChanged: [{ type: Output }],
        columnSorted: [{ type: Output }],
        nodeSelected: [{ type: Output }],
        nodeUnSelect: [{ type: Output }],
        nodeChecked: [{ type: Output }],
        nodeUnChecked: [{ type: Output }],
        checkAll: [{ type: Output }],
        unCheckAll: [{ type: Output }],
        search: [{ type: Output }],
        dblClick: [{ type: Output }],
        loadedData: [{ type: Output }],
        expand: [{ type: Output }],
        collapse: [{ type: Output }],
        expandAllNodes: [{ type: Output }],
        collapseAllNodes: [{ type: Output }],
        appendNew: [{ type: Output }],
        removed: [{ type: Output }],
        updated: [{ type: Output }],
        clearSearchValue: [{ type: Output }],
        cellClick: [{ type: Output }],
        childsPageChanged: [{ type: Output }],
        data: [{ type: Input }],
        autoWidth: [{ type: Input }],
        templates: [{ type: ContentChildren, args: [FarrisTemplateDirective,] }],
        columnsRef: [{ type: ContentChildren, args: [TreeTableColumnDirective,] }],
        headerBox: [{ type: ViewChild, args: ['headerBox',] }],
        resizerHelperVC: [{ type: ViewChild, args: ['resizerHelper',] }],
        headerTable: [{ type: ViewChild, args: ['headerTable',] }],
        bodyTable: [{ type: ViewChild, args: ['bodyTable',] }],
        inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
        psRef: [{ type: ViewChild, args: [PerfectScrollbarComponent,] }],
        allCheckbox: [{ type: ViewChild, args: ['allCheckbox',] }],
        nodesPagerBar: [{ type: ViewChild, args: ['nodespagerbar',] }],
        onResized: [{ type: HostListener, args: ['window:resize',] }]
    };
    return TreeTableComponent;
}());
export { TreeTableComponent };
if (false) {
    /** @type {?} */
    TreeTableComponent.prototype.id;
    /**
     * 宽度
     * @type {?}
     */
    TreeTableComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    TreeTableComponent.prototype.height;
    /** @type {?} */
    TreeTableComponent.prototype.showFilterBar;
    /** @type {?} */
    TreeTableComponent.prototype.headerHeight;
    /**
     * 表头折行
     * @type {?}
     */
    TreeTableComponent.prototype.headerWrap;
    /**
     * 行高
     * @type {?}
     */
    TreeTableComponent.prototype.rowHeight;
    /**
     * 列信息
     * @type {?}
     */
    TreeTableComponent.prototype.columns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._groupColumns;
    /**
     * 启用多表头
     * @type {?}
     */
    TreeTableComponent.prototype.useGroupHeader;
    /** @type {?} */
    TreeTableComponent.prototype.fitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.searchFields;
    /** @type {?} */
    TreeTableComponent.prototype.allColumnsTitle;
    /**
     * 显示连接线，默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.showLines;
    /** @type {?} */
    TreeTableComponent.prototype.showLinesOnHover;
    /**
     * 是否启用多选。 默认为单选
     * @type {?}
     */
    TreeTableComponent.prototype.multiSelect;
    /** @type {?} */
    TreeTableComponent.prototype.singleSelect;
    /**
     * 启用多选后，是否显示checkbox
     * @type {?}
     */
    TreeTableComponent.prototype.showCheckbox;
    /**
     * 主键字段
     * @type {?}
     */
    TreeTableComponent.prototype.idField;
    /**
     * 显示边框线
     * @type {?}
     */
    TreeTableComponent.prototype.showBorder;
    /** @type {?} */
    TreeTableComponent.prototype.showCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.showHeader;
    /**
     * 启用斑马线
     * @type {?}
     */
    TreeTableComponent.prototype.striped;
    /**
     * 启用鼠标划过效果
     * @type {?}
     */
    TreeTableComponent.prototype.hovered;
    /**
     * 禁用。 禁用时不允许选中行
     * @type {?}
     */
    TreeTableComponent.prototype.disabled;
    /**
     * 数据加载方式; 默认值 为 all
     * - all: 全部加载
     * - async: 分层加载
     * @type {?}
     */
    TreeTableComponent.prototype.loadDataType;
    /**
     * 固定表头
     * @type {?}
     */
    TreeTableComponent.prototype.fixedHeader;
    /**
     * 当多选时，选中当前行并钩选
     * @type {?}
     */
    TreeTableComponent.prototype.checkOnSelect;
    /**
     * 当多选时，钩选并选中当前行
     * @type {?}
     */
    TreeTableComponent.prototype.selectOnCheck;
    /**
     * 启用多选时，此属性为true 时，仅当前行选中
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectSelf;
    /**
     * 启用列宽调整
     * @type {?}
     */
    TreeTableComponent.prototype.resizableColumns;
    /**
     * 设置为true时自适应父容的尺寸
     * @type {?}
     */
    TreeTableComponent.prototype.fit;
    /**
     * 启用级联选中功能
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeCheck;
    /**
     * 向下级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeDown;
    /**
     * 向上级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeUp;
    /**
     * 空数据时，显示的提示文本
     * @type {?}
     */
    TreeTableComponent.prototype.emptyMessage;
    /**
     * 缩进间距，默认为 16px
     * @type {?}
     */
    TreeTableComponent.prototype.indentSpacing;
    /**
     * 单击行选中后，在次点击不会被取消选中状态;
     * @type {?}
     */
    TreeTableComponent.prototype.keepSelect;
    /**
     * 虚拟加载
     * @type {?}
     */
    TreeTableComponent.prototype.virtualized;
    /**
     * 仅允许选择叶子节点
     * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
     * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
     * - no: 允许选择所有节点；服务器端设置失效
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectLeaf;
    /**
     * 显示图标
     * @type {?}
     */
    TreeTableComponent.prototype.showIcon;
    /**
     * 叶子节点图标
     * @type {?}
     */
    TreeTableComponent.prototype.leafIcon;
    /**
     * 节点展开图标
     * @type {?}
     */
    TreeTableComponent.prototype.expandIcon;
    /**
     * 节点折叠图标
     * @type {?}
     */
    TreeTableComponent.prototype.collapseIcon;
    /** @type {?} */
    TreeTableComponent.prototype.foldIcon;
    /** @type {?} */
    TreeTableComponent.prototype.unfoldIcon;
    /**
     * 启用节点图标从数据中获取。 默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.useIconFromData;
    /**
     * 当数据源中icon未设置时使用内置ICON. 默认为 true
     * @type {?}
     */
    TreeTableComponent.prototype.whenDataIconEmptyUseDefault;
    /**
     * 从数据源字段中获取图标
     * @type {?}
     */
    TreeTableComponent.prototype.iconField;
    /**
     * 图标自定义样式
     * @type {?}
     */
    TreeTableComponent.prototype.iconCls;
    /**
     * 启用远端排序
     * @type {?}
     */
    TreeTableComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    TreeTableComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    TreeTableComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    TreeTableComponent.prototype.multiSort;
    /** @type {?} */
    TreeTableComponent.prototype.beforeSortColumn;
    /** @type {?} */
    TreeTableComponent.prototype.rowStyler;
    /** @type {?} */
    TreeTableComponent.prototype.cellStyler;
    /**
     * 启用前端文本查找
     * @type {?}
     */
    TreeTableComponent.prototype.enableFindText;
    /**
     * 文本查询字段, 弃用
     * @type {?}
     */
    TreeTableComponent.prototype.findField;
    /** @type {?} */
    TreeTableComponent.prototype.expandLevel;
    /** @type {?} */
    TreeTableComponent.prototype.selectValue;
    /** @type {?} */
    TreeTableComponent.prototype.selectValueChange;
    /**
     * 启用双击展开节点
     * @type {?}
     */
    TreeTableComponent.prototype.dblClickExpand;
    /**
     * 选中节点ID数组
     * @type {?}
     */
    TreeTableComponent.prototype.selectValues;
    /** @type {?} */
    TreeTableComponent.prototype.selectValuesChange;
    /**
     * 是否禁止折行，默认不折行
     * @type {?}
     */
    TreeTableComponent.prototype.nowrap;
    /** @type {?} */
    TreeTableComponent.prototype.checkValues;
    /** @type {?} */
    TreeTableComponent.prototype.checkValuesChange;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeUnCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeClickNode;
    /**
     * 分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.pagination;
    /**
     * 分页加载子节点数据
     * @type {?}
     */
    TreeTableComponent.prototype.paginationForChildren;
    /**
     * 分页条显示模式， default, simple
     * @type {?}
     */
    TreeTableComponent.prototype.pagerViewMode;
    /**
     * 启用服务器端分页
     * @type {?}
     */
    TreeTableComponent.prototype.pagerOnServer;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageList;
    /**
     * 当前页码
     * @type {?}
     */
    TreeTableComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageSize;
    /**
     * 分页区高度
     * @type {?}
     */
    TreeTableComponent.prototype.pagerHeight;
    /**
     * 显示每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.showPageList;
    /**
     * 显示分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.showPageInfo;
    /**
     * 显示页码
     * @type {?}
     */
    TreeTableComponent.prototype.showPageNumber;
    /**
     * 显示页码最大数量
     * @type {?}
     */
    TreeTableComponent.prototype.pagerLabelSize;
    /**
     * 总记录数
     * @type {?}
     */
    TreeTableComponent.prototype.total;
    /** @type {?} */
    TreeTableComponent.prototype.enableContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.contextMenuItems;
    /** @type {?} */
    TreeTableComponent.prototype.beforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.pageSizeChanged;
    /** @type {?} */
    TreeTableComponent.prototype.pageChanged;
    /**
     * 排序后
     * @type {?}
     */
    TreeTableComponent.prototype.columnSorted;
    /**
     * 选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeSelected;
    /**
     * 取消选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnSelect;
    /**
     * 钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeChecked;
    /**
     * 取消钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnChecked;
    /**
     * 全选事件
     * @type {?}
     */
    TreeTableComponent.prototype.checkAll;
    /**
     * 取消全选
     * @type {?}
     */
    TreeTableComponent.prototype.unCheckAll;
    /**
     * 查询
     * @type {?}
     */
    TreeTableComponent.prototype.search;
    /** @type {?} */
    TreeTableComponent.prototype.dblClick;
    /** @type {?} */
    TreeTableComponent.prototype.loadedData;
    /** @type {?} */
    TreeTableComponent.prototype.expand;
    /** @type {?} */
    TreeTableComponent.prototype.collapse;
    /** @type {?} */
    TreeTableComponent.prototype.expandAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.collapseAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.appendNew;
    /** @type {?} */
    TreeTableComponent.prototype.removed;
    /** @type {?} */
    TreeTableComponent.prototype.updated;
    /** @type {?} */
    TreeTableComponent.prototype.clearSearchValue;
    /** @type {?} */
    TreeTableComponent.prototype.cellClick;
    /** @type {?} */
    TreeTableComponent.prototype.childsPageChanged;
    /** @type {?} */
    TreeTableComponent.prototype.serializedValue;
    /** @type {?} */
    TreeTableComponent.prototype._data;
    /**
     * 根据内容自动宽度，默认 false;
     * 此属性开启后，自动列宽失效
     * @type {?}
     */
    TreeTableComponent.prototype.autoWidth;
    /** @type {?} */
    TreeTableComponent.prototype.templates;
    /** @type {?} */
    TreeTableComponent.prototype.columnsRef;
    /** @type {?} */
    TreeTableComponent.prototype.headerBox;
    /** @type {?} */
    TreeTableComponent.prototype.resizerHelperVC;
    /** @type {?} */
    TreeTableComponent.prototype.headerTable;
    /** @type {?} */
    TreeTableComponent.prototype.bodyTable;
    /** @type {?} */
    TreeTableComponent.prototype.inputGroup;
    /** @type {?} */
    TreeTableComponent.prototype.psRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.headerCheckboxCmp;
    /** @type {?} */
    TreeTableComponent.prototype.nodesPagerBar;
    /**
     * 表头模板
     * @type {?}
     */
    TreeTableComponent.prototype.headerTemplate;
    /**
     * 表体模板
     * @type {?}
     */
    TreeTableComponent.prototype.bodyTemplate;
    /**
     * 选中项集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selections;
    /**
     * 选中项索引
     * @type {?}
     */
    TreeTableComponent.prototype.selectRowIndex;
    /**
     * 选中当前行
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selectedRow;
    /**
     * 钩选的记录集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._checkeds;
    /** @type {?} */
    TreeTableComponent.prototype.containerElement;
    /** @type {?} */
    TreeTableComponent.prototype.lastResizerHelperX;
    /** @type {?} */
    TreeTableComponent.prototype.searchData;
    /** @type {?} */
    TreeTableComponent.prototype.scorllBodyHeight;
    /** @type {?} */
    TreeTableComponent.prototype.searchHandle;
    /** @type {?} */
    TreeTableComponent.prototype.searchButtonText;
    /**
     * 显示查询工具条
     * @type {?}
     */
    TreeTableComponent.prototype.showFindInput;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.isDataChanged;
    /** @type {?} */
    TreeTableComponent.prototype.scrollLoader;
    /** @type {?} */
    TreeTableComponent.prototype.topHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.bottomHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.state;
    /**
     * 待查询的文本
     * @type {?}
     */
    TreeTableComponent.prototype.findValue;
    /**
     * 结果总数
     * @type {?}
     */
    TreeTableComponent.prototype.findCount;
    /**
     * 当前索引
     * @type {?}
     */
    TreeTableComponent.prototype.findCurrent;
    /**
     * 存储文本查询结果
     * @type {?}
     */
    TreeTableComponent.prototype.findResult;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.findKeysHandler;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._hotKeys;
    /** @type {?} */
    TreeTableComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleSheetId;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleElement;
    /** @type {?} */
    TreeTableComponent.prototype.paginationOptions;
    /** @type {?} */
    TreeTableComponent.prototype.selectNodeChangedSubject;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._UUID;
    /** @type {?} */
    TreeTableComponent.prototype.fixedColumns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.farrisInstances;
    /** @type {?} */
    TreeTableComponent.prototype.difference;
    /** @type {?} */
    TreeTableComponent.prototype.onBeforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.ttService;
    /** @type {?} */
    TreeTableComponent.prototype.el;
    /** @type {?} */
    TreeTableComponent.prototype.resizeSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.renderer;
    /** @type {?} */
    TreeTableComponent.prototype.utils;
    /** @type {?} */
    TreeTableComponent.prototype.colFormatSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.shortcuts;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.injector;
}
var TTBodyComponent = /** @class */ (function () {
    function TTBodyComponent(tt) {
        this.tt = tt;
    }
    TTBodyComponent.decorators = [
        { type: Component, args: [{
                    selector: '[treeTableBody]',
                    template: "\n        <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForOf]=\"tt.serializedValue\">\n            <ng-container *ngIf=\"serializedNode.visible\">\n                <ng-container\n                    *ngTemplateOutlet=\"template;\n                        context: {$implicit: serializedNode, node: serializedNode.node,\n                        rowData: serializedNode.node.data, rowIndex: rowIndex, columns: columns}\">\n                </ng-container>\n            </ng-container>\n        </ng-template>\n    "
                }] }
    ];
    /** @nocollapse */
    TTBodyComponent.ctorParameters = function () { return [
        { type: TreeTableComponent }
    ]; };
    TTBodyComponent.propDecorators = {
        columns: [{ type: Input }],
        template: [{ type: Input }]
    };
    return TTBodyComponent;
}());
export { TTBodyComponent };
if (false) {
    /**
     * 列集合
     * @type {?}
     */
    TTBodyComponent.prototype.columns;
    /**
     * 表体模板
     * @type {?}
     */
    TTBodyComponent.prototype.template;
    /** @type {?} */
    TTBodyComponent.prototype.tt;
}
// [style.marginLeft]="rowNode.level * 16 + 'px'"
/**
 * 树节点展开折叠
 */
var TreeTableTogglerComponent = /** @class */ (function () {
    function TreeTableTogglerComponent(tt, ngzone, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.render = render;
        this.cls = true;
        this.showLines = false;
        this.indentSpacing = 16;
        this.treeNodeIcon = {};
        this.isShowTriangle = false;
        this.noChilds = false;
        this.subscriptions = [];
    }
    Object.defineProperty(TreeTableTogglerComponent.prototype, "offsetWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this.togglerEl.nativeElement.parentElement.offsetWidth;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.treeNodeIcon = this.tt.getTreeIcon(this.rowNode.node);
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        /** @type {?} */
        var expandSub = this.tt.expand.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (_this.rowNode.id === node.data[_this.tt.idField]) {
                // this.updateIcon(node);
                _this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        var collapseSub = this.tt.collapse.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (_this.rowNode.id === node.data[_this.tt.idField]) {
                // this.updateIcon(node);
                _this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        var addNewSub = this.tt.appendNew.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (e.parent) {
                if (_this.rowNode.id === e.parent.data[_this.tt.idField]) {
                    if (_this.rowNode.node.leaf || _this.rowNode.node.leaf === undefined) {
                        _this.rowNode.node.leaf = false;
                        _this.registerClickEvent();
                    }
                }
            }
        }));
        this.subscriptions = [expandSub, collapseSub, addNewSub];
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.showLines && !changes.showLines.isFirstChange()) {
            if (this.showLines) {
                this.render.setStyle(this.togglerEl.nativeElement, 'display', this.isShowTriangle ? '' : 'none');
            }
            else {
                this.render.removeStyle(this.togglerEl.nativeElement, 'display');
            }
            this.reSetLines();
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.registerClickEvent();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.reSetLines();
        }));
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        if (this.tt && this.tt.data) {
            this.isShowTriangle = this.showTriangle();
            this.noChilds = this.hasChildren();
            this.treeNodeIcon = this.tt.getTreeIcon(this.rowNode.node);
        }
        // if (!this.tt.bodyTemplate) {
        //     this.reSetLines();
        // }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        if (this.tt && this.tt.data) {
            this.reSetLines();
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.unAllSubscriptions();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.unAllSubscriptions = /**
     * @private
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} s
         * @return {?}
         */
        function (s) {
            s.unsubscribe();
        }));
        this.subscriptions = [];
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.hasChildren = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tn = this.rowNode.node;
        return tn.leaf === false || this.rowNode.level !== 0 || (tn.children && tn.children.length > 0);
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.showTriangle = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tn = this.rowNode.node;
        if (this.tt.loadDataType === 'all') {
            return tn.leaf === false || (tn.children && tn.children.length > 0);
        }
        else {
            return tn.leaf === false;
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.reSetLines = /**
     * @return {?}
     */
    function () {
        if (this.togglerEl && this.tt.showLines) {
            /** @type {?} */
            var parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
            if (parentEl) {
                /** @type {?} */
                var lineEls = parentEl.querySelectorAll('.treetable-lines');
                for (var k = 0; k < lineEls.length; k++) {
                    lineEls[k].remove();
                }
            }
        }
        this._renderLines();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype._renderLines = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tt.bodyTemplate) {
            if (this.showLines) {
                this.renderLines();
            }
            else {
                this.noLineStyle();
            }
        }
        else {
            if (this.togglerEl) {
                this.noLineStyle();
                /** @type {?} */
                var tds = this.togglerEl.nativeElement.closest('tr').querySelectorAll('td');
                Array.from(tds).forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    _this.render.setStyle(n, 'padding', '0.25rem 0.75rem');
                }));
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.noLineStyle = /**
     * @private
     * @return {?}
     */
    function () {
        // this.cls = false;
        if (this.togglerEl) {
            this.render.setStyle(this.togglerEl.nativeElement, 'margin-left', this.rowNode.level * this.indentSpacing + "px");
            this.render.setStyle(this.togglerEl.nativeElement, 'visibility', this.isShowTriangle ? 'visible' : 'hidden');
            this.render.removeStyle(this.togglerEl.nativeElement, 'display');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.renderLines = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var len = this.rowNode.level;
        /** @type {?} */
        var parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
        if (!parentEl) {
            return;
        }
        /** @type {?} */
        var referEl = this.togglerEl.nativeElement.parentElement;
        if (len === 0 && !this.showTriangle()) {
            this.createLeafNodeLines(referEl, parentEl, true);
        }
        for (var i = 0; i < len; i++) {
            parentEl.insertBefore(this.newLineElement(), referEl);
            /** @type {?} */
            var nearLine = this.newLineElement(false);
            parentEl.insertBefore(nearLine, referEl);
            /** @type {?} */
            var isLeaf = !this.showTriangle();
            if (isLeaf && i === len - 1) {
                this.createLeafNodeLines(referEl, parentEl);
            }
        }
    };
    /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.newLineElement = /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    function (border) {
        if (border === void 0) { border = true; }
        /** @type {?} */
        var newLineEl = this.render.createElement('div');
        this.render.addClass(newLineEl, 'treetable-lines');
        if (this.showLines) {
            if (border) {
                this.render.addClass(newLineEl, 'treetable-lines-border-color');
            }
        }
        return newLineEl;
    };
    /**
     * 构造 ∟ or ├
     */
    /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.createLeafNodeLines = /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    function (containerEl, parentEl, isTopNode) {
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        if (isTopNode === void 0) { isTopNode = false; }
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        // ∟
        // <div class="treetable-lines" style="border-color: transparent"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div style="corner"></div>
        // </div>
        /** @type {?} */
        var l1 = this.newLineElement();
        /** @type {?} */
        var l2 = this.newLineElement(false);
        this.render.addClass(l2, 'treetable-lines-leaf');
        /** @type {?} */
        var dessert = this.render.createElement('div');
        if (this.showLines) {
            /** @type {?} */
            var cls = 'normal';
            if (this.rowNode.last) {
                cls = 'corner';
                this.render.removeClass(l1, 'treetable-lines-border-color');
            }
            l2.appendChild(dessert);
            this.render.addClass(dessert, cls);
            this.render.addClass(dessert, 'treetable-lines-border-color');
        }
        parentEl.insertBefore(l1, containerEl);
        parentEl.insertBefore(l2, containerEl);
        if (isTopNode) {
            this.render.setStyle(l2, 'marginRight', '3px');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.registerClickEvent = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.togglerEl) {
            this.render.listen(this.togglerEl.nativeElement, 'click', this.onClick.bind(this));
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.onClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        event.preventDefault();
        if (!this.tt.disabled) {
            this.tt.toggleExpand(this.rowNode.node);
        }
        return false;
    };
    TreeTableTogglerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-treeTableToggler',
                    template: "\n    <a href=\"javascript:void(0)\" #toggler\n            class=\"treenode-fold\"\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\n            [style.display]=\"isShowTriangle ? '' : 'none'\"></a>\n    <span class=\"tree-icon-line\" [style.display]=\"isShowTriangle && showLines? '' : 'none'\"></span>\n    <span [style.display]=\"(tt.showIcon && rowNode.node.showIcon) ? 'inline-block': 'none'\"\n                                    class=\"treenode-icon\" [ngClass]=\"treeNodeIcon\"></span>\n    <tt-checkbox  [rowNode]=\"rowNode\" *ngIf=\"tt.showCheckbox\" [disabled]=\"disabled\" [checked]=\"rowNode.isChecked\" ></tt-checkbox>\n    ",
                    encapsulation: ViewEncapsulation.None,
                    exportAs: 'ttToggler'
                }] }
    ];
    /** @nocollapse */
    TreeTableTogglerComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    TreeTableTogglerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class.f-cmp-treetable-toggler',] }],
        rowNode: [{ type: Input }],
        disabled: [{ type: Input }],
        showLines: [{ type: Input }],
        indentSpacing: [{ type: Input }],
        togglerEl: [{ type: ViewChild, args: ['toggler',] }]
    };
    return TreeTableTogglerComponent;
}());
export { TreeTableTogglerComponent };
if (false) {
    /** @type {?} */
    TreeTableTogglerComponent.prototype.cls;
    /**
     * 树节点
     * @type {?}
     */
    TreeTableTogglerComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.disabled;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.showLines;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.indentSpacing;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.treeNodeIcon;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.isShowTriangle;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.noChilds;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.subscriptions;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.togglerEl;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.ngzone;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.render;
}
/**
 * 选中行组件
 */
var TreeTableSelectRowDirective = /** @class */ (function () {
    function TreeTableSelectRowDirective(tt, el, render, ngZone) {
        var _this = this;
        this.tt = tt;
        this.el = el;
        this.render = render;
        this.ngZone = ngZone;
        this.prevent = false;
        this.delay = 0;
        this.subscription = this.tt.selectNodeChangedSubject.subscribe((/**
         * @param {?} ids
         * @return {?}
         */
        function (ids) {
            if (ids && _this.rowNode) {
                /** @type {?} */
                var idArr = ids.split(',');
                if (idArr.indexOf(_this.rowNode.id) > -1) {
                    _this.toggleClass();
                    _this.rowNode.node['elementRef'] = _this.el;
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // this.rowNode.node.selectable = !this.selectRowDisabled;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // if (changes.selectRowDisabled && !changes.selectRowDisabled.isFirstChange()) {
        //     this.rowNode.node.selectable = !changes.selectRowDisabled.currentValue;
        // }
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        if (this.tt.bodyTemplate) {
            if (!this.tt.isSelected(this.rowNode.node)) {
                this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.onclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (this.isEnabled()) {
            // this.rowClick(event);
            if (this.delay !== 0) {
                if (!this.prevent) {
                    this.prevent = true;
                    this.timer = setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.rowClick(event);
                        _this.prevent = false;
                    }), this.delay);
                }
            }
            else {
                this.rowClick(event);
            }
        }
        // event.stopPropagation();
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.isEnabled = /**
     * @return {?}
     */
    function () {
        return !this.tt.disabled && this.selectRowDisabled !== true;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.rowClick = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        event.stopPropagation();
        this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event: event, type: 'row' }).subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (!e) {
                return;
            }
            _this.tt.handleRowClick({
                originalEvent: event,
                rowNode: _this.rowNode,
                rowIndex: _this.rowIndex
            });
            _this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.toggleClass();
            }));
        }));
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.toggleClass = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tt.bodyTemplate) {
            if (this.tt.isSelected(this.rowNode.node)) {
                if (this.tt.singleSelect) {
                    this.tt.el.nativeElement.querySelectorAll('.farris-treetable-tbody>tr.farris-table-selectedrow').forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        _this.render.removeClass(n, 'farris-table-selectedrow');
                    }));
                }
                this.render.addClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
            else {
                if (!this.tt.keepSelect) {
                    this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
                }
            }
        }
    };
    TreeTableSelectRowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[selectRow]',
                    exportAs: 'row'
                },] }
    ];
    /** @nocollapse */
    TreeTableSelectRowDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: ElementRef },
        { type: Renderer2 },
        { type: NgZone }
    ]; };
    TreeTableSelectRowDirective.propDecorators = {
        rowNode: [{ type: Input, args: ['selectRow',] }],
        rowIndex: [{ type: Input }],
        selectRowDisabled: [{ type: Input }],
        delay: [{ type: Input }],
        onclick: [{ type: HostListener, args: ['click', ['$event'],] }]
    };
    return TreeTableSelectRowDirective;
}());
export { TreeTableSelectRowDirective };
if (false) {
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowNode;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowIndex;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.selectRowDisabled;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.subscription;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.prevent;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.timer;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.delay;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.render;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.ngZone;
}
/**
 * 表头全选组件
 */
var TreeTableHeaderCheckboxComponent = /** @class */ (function () {
    function TreeTableHeaderCheckboxComponent(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.checkedChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    TreeTableHeaderCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableHeaderCheckboxComponent.prototype.handleClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (!this.disabled && !this.tt.disabled) {
            /** @type {?} */
            var beforeEvent = !this.checked ? this.tt.beforeCheckAll : this.tt.beforeUnCheckAll;
            beforeEvent({ instance: this.tt, checked: !this.checked }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                // 全选功能
                _this.chkAll.nativeElement.indeterminate = false;
                _this.checked = !_this.checked;
                _this.tt.toggleNodesWithCheckbox(event, _this.checked);
            }));
        }
        event.stopPropagation();
        return false;
    };
    TreeTableHeaderCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tt-header-checkbox',
                    template: "\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\">\n        <input type=\"checkbox\" #chkAll class=\"custom-control-input\"  [checked]=\"checked\">\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\n    </div>\n    ",
                    styles: ["\n        :host {\n            vertical-align: middle;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    TreeTableHeaderCheckboxComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: TreetableService }
    ]; };
    TreeTableHeaderCheckboxComponent.propDecorators = {
        checked: [{ type: Input }],
        disabled: [{ type: Input }],
        checkedChange: [{ type: Output }],
        chkAll: [{ type: ViewChild, args: ['chkAll',] }]
    };
    return TreeTableHeaderCheckboxComponent;
}());
export { TreeTableHeaderCheckboxComponent };
if (false) {
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.chkAll;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.ttService;
}
/**
 * 表体checkbox 组件
 */
var TreeTableCheckboxComponent = /** @class */ (function () {
    function TreeTableCheckboxComponent(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.cls1 = true;
        this.checkedChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.chk.nativeElement.indeterminate = this.rowNode.indeterminate || false;
        this.ttService.changeCheckboxStatus$.pipe(map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n.id === _this.rowNode.id) {
                return n;
            }
            return null;
        }))).subscribe((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n) {
                _this.chk.nativeElement.indeterminate = _this.rowNode.indeterminate;
                _this.checked = _this.rowNode.isChecked;
                _this.chk.nativeElement.checked = _this.checked;
            }
        }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.handleClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (!this.disabled) {
            this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event: event, type: 'checkbox' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!e) {
                    return;
                }
                _this.checked = !_this.checked;
                if (_this.tt.singleSelect) {
                    _this.tt.clearAll();
                    if (_this.checked) {
                        _this.tt.selectNode(_this.rowNode.id, true);
                    }
                    else {
                        _this.tt.unSelectNode(_this.rowNode.id, true);
                    }
                }
                else {
                    _this.tt.toggleNodeWithCheckbox(event, _this.rowNode, _this.checked);
                }
            }));
        }
        event.stopPropagation();
        return false;
    };
    TreeTableCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tt-checkbox',
                    template: "\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\">\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\n    </div>\n    ",
                    styles: ["\n        :host {\n            vertical-align: middle;\n        }\n        :host .custom-checkbox {\n            opacity: 1;\n            float: none;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    TreeTableCheckboxComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: TreetableService }
    ]; };
    TreeTableCheckboxComponent.propDecorators = {
        cls1: [{ type: HostBinding, args: ['class.tree-toggler-checkbox',] }],
        checked: [{ type: Input }],
        disabled: [{ type: Input }],
        rowNode: [{ type: Input }],
        checkedChange: [{ type: Output }],
        chk: [{ type: ViewChild, args: ['chk',] }]
    };
    return TreeTableCheckboxComponent;
}());
export { TreeTableCheckboxComponent };
if (false) {
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.cls1;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.chk;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.ttService;
}
var DblClickRowDirective = /** @class */ (function () {
    function DblClickRowDirective(tt, el, ttService, selectRowDir) {
        this.tt = tt;
        this.el = el;
        this.ttService = ttService;
        this.selectRowDir = selectRowDir;
        this.enableDblClick = false;
    }
    /**
     * @return {?}
     */
    DblClickRowDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.enableDblClick) {
            this.selectRowDir.delay = 0;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DblClickRowDirective.prototype.ondblclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.tt.disabled) {
            return false;
        }
        if (this.tt.multiSelect && this.dblclickNode) {
            if (this.dblclickNode.node.leaf) {
                return false;
            }
        }
        /** @type {?} */
        var clsName = event.target['className'];
        /** @type {?} */
        var togglerTag = null;
        if (clsName.indexOf('f-cmp-treetable-toggler') > -1) {
            togglerTag = event.target['querySelector']('.treenode-fold');
        }
        else {
            if (event.target['className'].indexOf('treenode-fold') > -1) {
                togglerTag = (/** @type {?} */ (event.target));
            }
        }
        if (togglerTag && togglerTag.style.visibility === 'visible') {
            return false;
        }
        if (this.selectRowDir) {
            this.selectRowDir.prevent = false;
            clearTimeout(this.selectRowDir.timer);
            if (this.selectRowDir.rowNode && this.enableDblClick) {
                /** @type {?} */
                var rn = this.selectRowDir.rowNode;
                if (this.tt.loadDataType === 'all' && !rn.node.leaf && this.tt.dblClickExpand) {
                    this.tt.toggleExpand(rn.node);
                }
                this.tt.dblClick.emit(rn.node);
            }
        }
        // event.stopPropagation();
    };
    DblClickRowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[dblclick]'
                },] }
    ];
    /** @nocollapse */
    DblClickRowDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: ElementRef },
        { type: TreetableService },
        { type: TreeTableSelectRowDirective, decorators: [{ type: Optional }, { type: Self }] }
    ]; };
    DblClickRowDirective.propDecorators = {
        enableDblClick: [{ type: Input, args: ['dblclick',] }],
        dblclickNode: [{ type: Input }],
        ondblclick: [{ type: HostListener, args: ['dblclick', ['$event'],] }]
    };
    return DblClickRowDirective;
}());
export { DblClickRowDirective };
if (false) {
    /** @type {?} */
    DblClickRowDirective.prototype.enableDblClick;
    /** @type {?} */
    DblClickRowDirective.prototype.dblclickNode;
    /** @type {?} */
    DblClickRowDirective.prototype.tt;
    /** @type {?} */
    DblClickRowDirective.prototype.el;
    /** @type {?} */
    DblClickRowDirective.prototype.ttService;
    /** @type {?} */
    DblClickRowDirective.prototype.selectRowDir;
}
var CustomRowStyleDirective = /** @class */ (function () {
    function CustomRowStyleDirective(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    CustomRowStyleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.setRowStyle();
    };
    /**
     * @private
     * @return {?}
     */
    CustomRowStyleDirective.prototype.setRowStyle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var fn = this.tt.rowStyler;
        if (fn) {
            /** @type {?} */
            var sty_1 = fn(this.rowNode.node);
            if (sty_1) {
                if (typeof sty_1 === 'object' && (sty_1.style || sty_1.cls)) {
                    if (sty_1.style) {
                        Object.keys(sty_1.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, sty_1.style[s]);
                        }));
                    }
                    if (sty_1.cls) {
                        sty_1.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            _this.render.addClass(_this.el.nativeElement, c);
                        }));
                    }
                }
                else {
                    if (Array.isArray(sty_1) || typeof sty_1 === 'string') {
                        /** @type {?} */
                        var cls_1 = this.tt.getRowCls(this.rowNode);
                        if (cls_1 && Object.keys(cls_1).length) {
                            Object.keys(cls_1).forEach((/**
                             * @param {?} c
                             * @return {?}
                             */
                            function (c) {
                                if (cls_1[c]) {
                                    _this.render.addClass(_this.el.nativeElement, c);
                                }
                            }));
                        }
                    }
                    else {
                        Object.keys(sty_1).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, sty_1[s]);
                        }));
                    }
                }
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    CustomRowStyleDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setRowStyle();
        }
    };
    CustomRowStyleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[customRowStyle]'
                },] }
    ];
    /** @nocollapse */
    CustomRowStyleDirective.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: ElementRef },
        { type: TreeTableComponent },
        { type: CommonUtils },
        { type: Renderer2 }
    ]; };
    CustomRowStyleDirective.propDecorators = {
        rowNode: [{ type: Input, args: ['customRowStyle',] }]
    };
    return CustomRowStyleDirective;
}());
export { CustomRowStyleDirective };
if (false) {
    /** @type {?} */
    CustomRowStyleDirective.prototype.rowNode;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.tt;
    /** @type {?} */
    CustomRowStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.render;
}
var TTCustomCellStyleDirective = /** @class */ (function () {
    function TTCustomCellStyleDirective(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.tt && this.tt.getCellCls) {
            this.setCellStyle();
        }
        if (!this.tt.showBorder && this.tt.columns.length === 1) {
            this.render.setStyle(this.el.nativeElement, 'border-width', '0px');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.setCellStyle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var cellCls = this.tt.getCellCls(this.rowNode, this.column.field);
        if (this.column && this.column.styler) {
            if (cellCls && Object.keys(cellCls).length) {
                Object.keys(cellCls).forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) {
                    if (cellCls[c]) {
                        _this.render.addClass(_this.el.nativeElement, c);
                    }
                }));
            }
            /** @type {?} */
            var rowData = this.rowNode.node.data;
            /** @type {?} */
            var ccs_1 = this.column.styler(this.utils.getValue(this.column.field, rowData), rowData, this.rowIndex, this.rowNode);
            if (ccs_1) {
                if (ccs_1.style || ccs_1.cls) {
                    if (ccs_1.style) {
                        Object.keys(ccs_1.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, ccs_1.style[s]);
                        }));
                    }
                    if (ccs_1.cls) {
                        ccs_1.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            _this.render.addClass(_this.el.nativeElement, c);
                        }));
                    }
                }
            }
        }
        else {
            Object.keys(cellCls).forEach((/**
             * @param {?} s
             * @return {?}
             */
            function (s) {
                _this.render.setStyle(_this.el.nativeElement, s, cellCls[s]);
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setCellStyle();
        }
    };
    TTCustomCellStyleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[customCellStyle]'
                },] }
    ];
    /** @nocollapse */
    TTCustomCellStyleDirective.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: ElementRef },
        { type: TreeTableComponent },
        { type: CommonUtils },
        { type: Renderer2 }
    ]; };
    TTCustomCellStyleDirective.propDecorators = {
        column: [{ type: Input, args: ['customCellStyle',] }],
        rowNode: [{ type: Input }],
        rowIndex: [{ type: Input }]
    };
    return TTCustomCellStyleDirective;
}());
export { TTCustomCellStyleDirective };
if (false) {
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.column;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowNode;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowIndex;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.tt;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.render;
}
var TTResizableColumnDirective = /** @class */ (function () {
    function TTResizableColumnDirective(tt, ngzone, el, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.el = el;
        this.render = render;
        this.enableResize = true;
    }
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.isEnable()) {
            this.render.addClass(this.el.nativeElement, 'resizable-column');
            this.resizer = document.createElement('span');
            this.resizer.className = 'column-resizer';
            this.el.nativeElement.appendChild(this.resizer);
            this.ngzone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.resizerMouseDownListener = _this.onMouseDown.bind(_this);
                _this.resizer.addEventListener('mousedown', _this.resizerMouseDownListener);
                _this.el.nativeElement.addEventListener('mouseenter', _this.onMouseEnter.bind(_this));
            }));
        }
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.isEnable = /**
     * @return {?}
     */
    function () {
        return this.tt.resizableColumns && !this.tt.autoWidth && this.enableResize;
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.bindDocumentEvents = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngzone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.documentMouseMoveListener = _this.onMouseMove.bind(_this);
            document.addEventListener('mousemove', _this.documentMouseMoveListener);
            _this.documentMouseUpListener = _this.onMouseUp.bind(_this);
            document.addEventListener('mouseup', _this.documentMouseUpListener);
        }));
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.unbindDocumentEvents = /**
     * @return {?}
     */
    function () {
        if (this.documentMouseMoveListener) {
            document.removeEventListener('mousemove', this.documentMouseMoveListener);
            this.documentMouseMoveListener = null;
        }
        if (this.documentMouseUpListener) {
            document.removeEventListener('mouseup', this.documentMouseUpListener);
            this.documentMouseUpListener = null;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseDown = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResizeBegin(event);
        this.bindDocumentEvents();
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseEnter = /**
     * @return {?}
     */
    function () {
        // console.log(this.el);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseMove = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResize(event);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseUp = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResizeEnd(event, this.el.nativeElement);
        this.unbindDocumentEvents();
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.resizerMouseDownListener) {
            this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);
        }
        this.unbindDocumentEvents();
    };
    TTResizableColumnDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[resizable-column]'
                },] }
    ];
    /** @nocollapse */
    TTResizableColumnDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: NgZone },
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    TTResizableColumnDirective.propDecorators = {
        enableResize: [{ type: Input, args: ['resizable-column',] }]
    };
    return TTResizableColumnDirective;
}());
export { TTResizableColumnDirective };
if (false) {
    /** @type {?} */
    TTResizableColumnDirective.prototype.enableResize;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizer;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizerMouseDownListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseMoveListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseUpListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.tt;
    /** @type {?} */
    TTResizableColumnDirective.prototype.ngzone;
    /** @type {?} */
    TTResizableColumnDirective.prototype.el;
    /** @type {?} */
    TTResizableColumnDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdHJlZXRhYmxlLyIsInNvdXJjZXMiOlsibGliL3RyZWV0YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7OztBQVUzQyxPQUFPLEVBQ0gsU0FBUyxFQUFVLEtBQUssRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUNoRCxlQUFlLEVBQUUsU0FBUyxFQUMxQixZQUFZLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUN4RCxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBaUIsTUFBTSxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFDbEMsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQVcsV0FBVyxFQUMvRyxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSw4QkFBOEIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BILE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsbUJBQW1CLEVBQW1CLE1BQU0sMEJBQTBCLENBQUM7QUFDaEYsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXpFLE9BQU8sRUFBNEIsRUFBRSxFQUFFLGVBQWUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNyRSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUFhLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDdEQs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QVc7Ozs7SUFBWCxVQUFZLEtBQVk7UUFDcEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEMsQ0FBQzs7Ozs7SUFFRCw4Q0FBUzs7OztJQUFULFVBQVUsS0FBWTtRQUNsQixJQUFJLENBQUMsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0lBQ2hDLENBQUM7Ozs7SUFFRCxnREFBVzs7O0lBQVg7UUFDSSxJQUFJLElBQUksQ0FBQyx3QkFBd0IsRUFBRTtZQUMvQixJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUNoRjtRQUVELElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0lBQ2hDLENBQUM7O2dCQXBGSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLG9CQUFvQjtpQkFDakM7Ozs7Z0JBU2tCLGtCQUFrQjtnQkFqaUlTLE1BQU07Z0JBRFosVUFBVTtnQkFDSSxTQUFTOzs7K0JBMGhJMUQsS0FBSyxTQUFDLGtCQUFrQjs7SUFrRjdCLGlDQUFDO0NBQUEsQUF0RkQsSUFzRkM7U0FuRlksMEJBQTBCOzs7SUFDbkMsa0RBQStDOztJQUMvQyw2Q0FBeUI7O0lBQ3pCLDhEQUE4Qjs7SUFDOUIsK0RBQStCOztJQUMvQiw2REFBNkI7O0lBR3pCLHdDQUE2Qjs7SUFBRSw0Q0FBcUI7O0lBQ3BELHdDQUFxQjs7SUFBRSw0Q0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzd2l0Y2hNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbi8qXHJcbiogQEF1dGhvcjog55av54uC56eA5omNKGx1Y2FzIGh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOC0xMi0xOCAxODo0NDoxM1xyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0xMS0yOSAwODo0MTozOVxyXG4gKiBAQ29tcGFueTogSW5zcHVyXHJcbiAqIEBWZXJzaW9uOiB2MC4wLjFcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBUZW1wbGF0ZVJlZiwgRGlyZWN0aXZlLFxyXG4gICAgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIEFmdGVyQ29udGVudEluaXQsIE9uRGVzdHJveSxcclxuICAgIEhvc3RMaXN0ZW5lciwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEVsZW1lbnRSZWYsIEluamVjdG9yLFxyXG4gICAgVmlld0NoaWxkLCBPcHRpb25hbCwgU2VsZiwgQWZ0ZXJWaWV3SW5pdCwgTmdab25lLCBSZW5kZXJlcjIsIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG4gICAgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBBZnRlclZpZXdDaGVja2VkLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIERvQ2hlY2ssIEhvc3RCaW5kaW5nXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBGYXJyaXNUZW1wbGF0ZURpcmVjdGl2ZSwgQ29tbW9uVXRpbHMsIElkU2VydmljZSwgRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBSZXNpemVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZXZlbnRzJztcclxuaW1wb3J0IHsgQ29sdW1uRm9ybWF0U2VydmljZSwgQ29sdW1uRm9ybWF0dGVyIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vY29sdW1uJztcclxuaW1wb3J0IHsgSW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktaW5wdXQtZ3JvdXAnO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1wZXJmZWN0LXNjcm9sbGJhcic7XHJcblxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIE9ic2VydmFibGUsIG9mLCBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBjbG9uZURlZXAsIGV4dGVuZCwgcmVtb3ZlIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XHJcblxyXG5pbXBvcnQgeyBUcmVlVGFibGVDb2x1bW4gfSBmcm9tICcuL3R5cGVzL3RyZWV0YWJsZS1jb2x1bW4nO1xyXG5pbXBvcnQgeyBWaXJ0dWFsaXplZExvYWRlclNlcnZpY2UgfSBmcm9tICcuL3ZpcnR1YWxpemVkLWxvYWRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVHJlZU5vZGUsIFJvd05vZGUsIFNlbGVjdEV2ZW50QXJncyB9IGZyb20gJy4vdHlwZXMvdHJlZW5vZGUnO1xyXG5pbXBvcnQgeyBUcmVldGFibGVTZXJ2aWNlIH0gZnJvbSAnLi90cmVldGFibGUuc2VydmljZSc7XHJcbmltcG9ydCB7IFNlYXJjaEhhbmRsZSB9IGZyb20gJy4vc2VhcmNoLmhhbmRsZSc7XHJcbmltcG9ydCB7IFRUSG90a2V5cyB9IGZyb20gJy4vaG90a2V5cyc7XHJcbmltcG9ydCB7IFBhZ2luYXRpb25JbnN0YW5jZSB9IGZyb20gJ0BmYXJyaXMvdWktcGFnaW5hdGlvbic7XHJcblxyXG5cclxuLyoqIOWNleWFg+agvOeCueS6i+S7tuWPguaVsCAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENlbGxDbGlja1BhcmFtIHtcclxuICAgIGV2ZW50OiBFdmVudDtcclxuICAgIGNvbDogVHJlZVRhYmxlQ29sdW1uO1xyXG4gICAgbm9kZTogVHJlZU5vZGU7XHJcbn1cclxuLyoqIOiKgueCuemSqemAieS6i+S7tiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVDaGVja2VkUGFyYW0ge1xyXG4gICAgb3JpZ2luYWxFdmVudD86IGFueTtcclxuICAgIG5vZGU6IFRyZWVOb2RlIHwgVHJlZU5vZGVbXTtcclxuICAgIG5vZGVzPzogYW55W107XHJcbiAgICBpbnN0YW5jZTogVHJlZVRhYmxlQ29tcG9uZW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVTZWxlY3RlZFBhcmFtIHtcclxuICAgIG9yaWdpbmFsRXZlbnQ/OiBFdmVudDtcclxuICAgIG5vZGU6IFRyZWVOb2RlIHwgVHJlZU5vZGVbXTtcclxuICAgIHR5cGU/OiAncm93JyB8ICdjaGVja2JveCc7XHJcbiAgICBpbmRleD86IG51bWJlcjtcclxuICAgIHBhcmVudHM/OiBhbnlbXTtcclxuICAgIGluc3RhbmNlOiBUcmVlVGFibGVDb21wb25lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEljb25GaWVsZFR5cGUgPSB7XHJcbiAgICBsZWFmPzogc3RyaW5nLFxyXG4gICAgZXhwYW5kPzogc3RyaW5nLFxyXG4gICAgY29sbGFwc2U/OiBzdHJpbmdcclxufSB8IHN0cmluZztcclxuXHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAndHQtY29sdW1uLCBbdHQtY29sdW1uXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZUNvbHVtbkRpcmVjdGl2ZSB7XHJcbiAgICBASW5wdXQoKSBmaWVsZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHdpZHRoPzogbnVtYmVyO1xyXG4gICAgQElucHV0KCkgaEFsaWduPzogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgYWxpZ24/OiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBmb3JtYXR0ZXI/OiAoKSA9PiBhbnkgfCBDb2x1bW5Gb3JtYXR0ZXI7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdHJlZXRhYmxlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAndHJlZXRhYmxlLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlczogW2BcclxuICAgICAgICAuZmFycmlzLXRyZWV0YWJsZSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnJlc2l6YWJsZS1jb2x1bW4ge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94O1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jb2x1bW4tcmVzaXplciB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgIHdpZHRoOiAuNWVtO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICAgIGN1cnNvcjogY29sLXJlc2l6ZTtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jb2x1bW4tcmVzaXplci1oZWxwZXIge1xyXG4gICAgICAgICAgICB3aWR0aDogMXB4O1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDEwO1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBkYXNoZWQgIzE4OTBmZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mYXJyaXMtdHJlZXRhYmxlLWRpc2FibGVkIC5mYXJyaXMtdHJlZXRhYmxlLWJvZHkgLnRhYmxlIHRye1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjQ7XHJcbiAgICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mYXJyaXMtdHJlZXRhYmxlLWRpc2FibGVkIC50YWJsZSB0ci5mYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3d7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1jb250cm9sLWlucHV0OmluZGV0ZXJtaW5hdGV+LmN1c3RvbS1jb250cm9sLWxhYmVsOjphZnRlciB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNCA0JyUzZSUzY3BhdGggc3Ryb2tlPSclMjNmZmYnIGQ9J00wIDJoNCcvJTNlJTNjL3N2ZyUzZVwiKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzE4OTBmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnVuc2VsZWN0YWJsZS10ZXh0IHtcclxuICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgLW8tdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmVcclxuICAgICAgICB9XHJcbiAgICAgICAgLnNlYXJjaC1oaWdobGlnaHQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRjFGO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuc2VhcmNoLWhpZ2hsaWdodC5hY3RpdmV7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRjkwMUM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIGBdLFxyXG4gICAgZXhwb3J0QXM6ICd0cmVlVGFibGUnLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcclxuICAgIGlkID0gJyc7XHJcbiAgICAvKiog5a695bqmICovXHJcbiAgICBASW5wdXQoKSB3aWR0aCA9IDUwMDtcclxuICAgIC8qKiDpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGhlaWdodCA9IDQwMDtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93RmlsdGVyQmFyID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBoZWFkZXJIZWlnaHQgPSAzNTtcclxuICAgIC8qKiDooajlpLTmipjooYwgKi9cclxuICAgIEBJbnB1dCgpIGhlYWRlcldyYXAgPSBmYWxzZTtcclxuICAgIC8qKiDooYzpq5ggKi9cclxuICAgIEBJbnB1dCgpIHJvd0hlaWdodCA9IDI5O1xyXG4gICAgLyoqXHJcbiAgICAgKiDliJfkv6Hmga9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY29sdW1ucyA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfZ3JvdXBDb2x1bW5zID0gW107XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JvdXBDb2x1bW5zKGNvbHMpIHtcclxuICAgICAgICB0aGlzLl9ncm91cENvbHVtbnMgPSBjb2xzIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMudHRTZXJ2aWNlLmNoZWNrQ29sdW1uc0Zvckdyb3VwSGVhZGVyKGNvbHMubWFwKGNzID0+IFsuLi5jc10pLCB0aGlzKS5jb2x1bW5zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGdyb3VwQ29sdW1ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JvdXBDb2x1bW5zO1xyXG4gICAgfVxyXG4gICAgLyoqIOWQr+eUqOWkmuihqOWktCAqL1xyXG4gICAgQElucHV0KCkgdXNlR3JvdXBIZWFkZXIgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBmaXRDb2x1bW5zID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzZWFyY2hGaWVsZHM6IHsgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W107XHJcblxyXG4gICAgQElucHV0KCkgYWxsQ29sdW1uc1RpdGxlID0gJ+aJgOacieWIlyc7XHJcblxyXG4gICAgLyoqIOaYvuekuui/nuaOpee6v++8jOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgc2hvd0xpbmVzID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzaG93TGluZXNPbkhvdmVyID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpuWQr+eUqOWkmumAieOAgiDpu5jorqTkuLrljZXpgIlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog5ZCv55So5aSa6YCJ5ZCO77yM5piv5ZCm5pi+56S6Y2hlY2tib3ggKi9cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja2JveCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkuLvplK7lrZfmrrVcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaWRGaWVsZDogc3RyaW5nO1xyXG5cclxuICAgIC8qKiDmmL7npLrovrnmoYbnur8gKi9cclxuICAgIEBJbnB1dCgpIHNob3dCb3JkZXIgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja0FsbCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0hlYWRlciA9IHRydWU7XHJcbiAgICAvKiog5ZCv55So5paR6ams57q/ICovXHJcbiAgICBASW5wdXQoKSBzdHJpcGVkID0gZmFsc2U7XHJcbiAgICAvKiog5ZCv55So6byg5qCH5YiS6L+H5pWI5p6cICovXHJcbiAgICBASW5wdXQoKSBob3ZlcmVkID0gdHJ1ZTtcclxuICAgIC8qKiDnpoHnlKjjgIIg56aB55So5pe25LiN5YWB6K646YCJ5Lit6KGMICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqIOaVsOaNruWKoOi9veaWueW8jzsg6buY6K6k5YC8IOS4uiBhbGxcclxuICAgICAqIC0gYWxsOiDlhajpg6jliqDovb1cclxuICAgICAqIC0gYXN5bmM6IOWIhuWxguWKoOi9vVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBsb2FkRGF0YVR5cGU6ICdhbGwnIHwgJ2FzeW5jJyA9ICdhbGwnO1xyXG4gICAgLyoqIOWbuuWumuihqOWktCAqL1xyXG4gICAgQElucHV0KCkgZml4ZWRIZWFkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5b2T5aSa6YCJ5pe277yM6YCJ5Lit5b2T5YmN6KGM5bm26ZKp6YCJICovXHJcbiAgICBASW5wdXQoKSBjaGVja09uU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5aSa6YCJ5pe277yM6ZKp6YCJ5bm26YCJ5Lit5b2T5YmN6KGMICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RPbkNoZWNrID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOWQr+eUqOWkmumAieaXtu+8jOatpOWxnuaAp+S4unRydWUg5pe277yM5LuF5b2T5YmN6KGM6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG9ubHlTZWxlY3RTZWxmID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOWIl+Wuveiwg+aVtCAqL1xyXG4gICAgQElucHV0KCkgcmVzaXphYmxlQ29sdW1ucyA9IHRydWU7XHJcbiAgICAvKiog6K6+572u5Li6dHJ1ZeaXtuiHqumAguW6lOeItuWuueeahOWwuuWvuCAqL1xyXG4gICAgQElucHV0KCkgZml0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOe6p+iBlOmAieS4reWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgY2FzY2FkZUNoZWNrID0gdHJ1ZTtcclxuICAgIC8qKiDlkJHkuIvnuqfogZTpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVEb3duID0gdHJ1ZTtcclxuICAgIC8qKiDlkJHkuIrnuqfogZTpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVVcCA9IHRydWU7XHJcbiAgICAvKiog56m65pWw5o2u5pe277yM5pi+56S655qE5o+Q56S65paH5pysICovXHJcbiAgICBASW5wdXQoKSBlbXB0eU1lc3NhZ2UgPSAn5pqC5peg5pWw5o2uJztcclxuICAgIC8qKiDnvKnov5vpl7Tot53vvIzpu5jorqTkuLogMTZweCAqL1xyXG4gICAgQElucHV0KCkgaW5kZW50U3BhY2luZyA9IDE2O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V5Ye76KGM6YCJ5Lit5ZCO77yM5Zyo5qyh54K55Ye75LiN5Lya6KKr5Y+W5raI6YCJ5Lit54q25oCBO1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBrZWVwU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDomZrmi5/liqDovb0gKi9cclxuICAgIEBJbnB1dCgpIHZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOS7heWFgeiuuOmAieaLqeWPtuWtkOiKgueCuVxyXG4gICAgICogLSBkZWZhdWx0OiDlupTnlKjmnI3liqHlmajnq6/kvKDlm57nmoTorr7nva7vvIzlpoLmnpzmnI3liqHlmajnq6/msqHmnInorr7nva7vvIzliJnkuI4gbm8g5L+d5oyB5LiA6Iez77ybXHJcbiAgICAgKiAtIHllczog5aaC5p6c5a6i5oi356uv6K6+572u5Li6IGB5ZXNgLCDmnI3liqHlmajnq6/nmoTorr7nva7lpLHmlYjvvJtcclxuICAgICAqIC0gbm86IOWFgeiuuOmAieaLqeaJgOacieiKgueCue+8m+acjeWKoeWZqOerr+iuvue9ruWkseaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBvbmx5U2VsZWN0TGVhZjogYm9vbGVhbiB8ICdkZWZhdWx0JyB8ICd5ZXMnIHwgJ25vJyA9ICdkZWZhdWx0JztcclxuXHJcbiAgICAvKiog5pi+56S65Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBzaG93SWNvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWPtuWtkOiKgueCueWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgbGVhZkljb24gPSAnZmlsZSc7XHJcbiAgICAvKiog6IqC54K55bGV5byA5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBleHBhbmRJY29uID0gJ2ZvbGRlci1vcGVuJztcclxuICAgIC8qKiDoioLngrnmipjlj6Dlm77moIcgKi9cclxuICAgIEBJbnB1dCgpIGNvbGxhcHNlSWNvbiA9ICdmb2xkZXInO1xyXG5cclxuICAgIEBJbnB1dCgpIGZvbGRJY29uID0gJ3RyZWV0YWJsZS10b2dnbGVyJztcclxuICAgIEBJbnB1dCgpIHVuZm9sZEljb24gPSAnZXh0YW5kZWQgdHJlZXRhYmxlLXRvZ2dsZXInO1xyXG5cclxuICAgIC8qKiDlkK/nlKjoioLngrnlm77moIfku47mlbDmja7kuK3ojrflj5bjgIIg6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSB1c2VJY29uRnJvbURhdGEgPSBmYWxzZTtcclxuICAgIC8qKiDlvZPmlbDmja7mupDkuK1pY29u5pyq6K6+572u5pe25L2/55So5YaF572uSUNPTi4g6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIHdoZW5EYXRhSWNvbkVtcHR5VXNlRGVmYXVsdCA9IHRydWU7XHJcbiAgICAvKiog5LuO5pWw5o2u5rqQ5a2X5q615Lit6I635Y+W5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBpY29uRmllbGQ6IEljb25GaWVsZFR5cGUgPSAnJztcclxuICAgIC8qKiDlm77moIfoh6rlrprkuYnmoLflvI8gKi9cclxuICAgIEBJbnB1dCgpIGljb25DbHM6IHN0cmluZztcclxuXHJcbiAgICAvKiog5ZCv55So6L+c56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuICAgIC8qKiDmjpLluo/lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNvcnROYW1lOiBzdHJpbmc7XHJcbiAgICAvKiog5o6S5bqP5pa55byPIGFzYyB8IGRlc2MgKi9cclxuICAgIEBJbnB1dCgpIHNvcnRPcmRlcjogc3RyaW5nO1xyXG4gICAgLyoqIOWFgeiuuOWkmuWIl+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTb3J0OiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNvcnRDb2x1bW46IChmaWVsZDogc3RyaW5nLCBvcmRlcjogc3RyaW5nKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIHJvd1N0eWxlcjogKHRyZWVOb2RlOiBUcmVlTm9kZSwgZmllbGQ/OiBzdHJpbmcpID0+IGFueTtcclxuICAgIEBJbnB1dCgpIGNlbGxTdHlsZXI6ICh0cmVlTm9kZTogVHJlZU5vZGUsIGZpZWxkOiBzdHJpbmcpID0+IGFueTtcclxuXHJcbiAgICAvKiog5ZCv55So5YmN56uv5paH5pys5p+l5om+ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaW5kVGV4dCA9IGZhbHNlO1xyXG4gICAgLyoqIOaWh+acrOafpeivouWtl+autSwg5byD55SoICovXHJcbiAgICBASW5wdXQoKSBmaW5kRmllbGQ6IHN0cmluZztcclxuICAgIC8vIOagkeWIl+ihqOm7mOiupOWxleW8gOWxgue6p+OAgiAtMe+8miDkuI3lsZXlvIDvvJsgMO+8miDlhajpg6jlsZXlvIDvvJsgPjA6ICDlsZXlvIDliLDmjIflrprnuqfmlbDvvJtcclxuICAgIEBJbnB1dCgpIGV4cGFuZExldmVsID0gLTE7XHJcblxyXG4gICAgQElucHV0KCkgc2VsZWN0VmFsdWUgPSAnJztcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlkK/nlKjlj4zlh7vlsZXlvIDoioLngrkgKi9cclxuICAgIEBJbnB1dCgpIGRibENsaWNrRXhwYW5kID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog6YCJ5Lit6IqC54K5SUTmlbDnu4QgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdFZhbHVlcyA9IFtdO1xyXG4gICAgQE91dHB1dCgpIHNlbGVjdFZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDmmK/lkKbnpoHmraLmipjooYzvvIzpu5jorqTkuI3mipjooYwgKi9cclxuICAgIEBJbnB1dCgpIG5vd3JhcCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgIEBPdXRwdXQoKSBjaGVja1ZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVNlbGVjdGVkOiAoZTogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVVuU2VsZWN0ZWQ6ICgpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZUNoZWNrZWQ6ICgpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVOb2RlVW5DaGVja2VkOiAoKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNoZWNrQWxsOiAoZT86IGFueSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZVVuQ2hlY2tBbGw6IChlPzogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNsaWNrTm9kZTogKGU/OiBhbnkpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgLyoqIOWIhumhteS/oeaBryAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWIhumhteWKoOi9veWtkOiKgueCueaVsOaNriAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbkZvckNoaWxkcmVuID0gZmFsc2U7XHJcbiAgICAvKiog5YiG6aG15p2h5pi+56S65qih5byP77yMIGRlZmF1bHQsIHNpbXBsZSAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJWaWV3TW9kZSA9ICdkZWZhdWx0JztcclxuICAgIC8qKiDlkK/nlKjmnI3liqHlmajnq6/liIbpobUgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VyT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5b2T5YmN6aG156CBICovXHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZVNpemUgPSAyMDtcclxuICAgIC8qKiDliIbpobXljLrpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VySGVpZ2h0ID0gNTY7XHJcbiAgICAvKiog5pi+56S65q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrliIbpobXkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIHNob3dQYWdlSW5mbyA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CBICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZU51bWJlciA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CB5pyA5aSn5pWw6YePICovXHJcbiAgICBASW5wdXQoKSBwYWdlckxhYmVsU2l6ZSA9IDc7XHJcbiAgICAvKiog5oC76K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcblxyXG5cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNvbnRleHRNZW51ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBjb250ZXh0TWVudUl0ZW1zID0gW107XHJcbiAgICBASW5wdXQoKSBiZWZvcmVTaG93Q29udGV4dE1lbnU6IChlOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSA9PiBPYnNlcnZhYmxlPHsgc2hvdzogYm9vbGVhbiwgbWVudXM6IEFycmF5PGFueT59PjtcclxuXHJcbiAgICBAT3V0cHV0KCkgcGFnZVNpemVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHBhZ2VDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDmjpLluo/lkI4gKi9cclxuICAgIEBPdXRwdXQoKSBjb2x1bW5Tb3J0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog6YCJ5Lit5LqL5Lu2ICovXHJcbiAgICBAT3V0cHV0KCkgbm9kZVNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8Tm9kZVNlbGVjdGVkUGFyYW0+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWPlua2iOmAieS4reS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIG5vZGVVblNlbGVjdDogRXZlbnRFbWl0dGVyPE5vZGVTZWxlY3RlZFBhcmFtPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog6ZKp6YCJICovXHJcbiAgICBAT3V0cHV0KCkgbm9kZUNoZWNrZWQ6IEV2ZW50RW1pdHRlcjxOb2RlQ2hlY2tlZFBhcmFtPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlj5bmtojpkqnpgIkgKi9cclxuICAgIEBPdXRwdXQoKSBub2RlVW5DaGVja2VkOiBFdmVudEVtaXR0ZXI8Tm9kZUNoZWNrZWRQYXJhbT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOWFqOmAieS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGNoZWNrQWxsOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlj5bmtojlhajpgIkgKi9cclxuICAgIEBPdXRwdXQoKSB1bkNoZWNrQWxsOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDmn6Xor6IgKi9cclxuICAgIEBPdXRwdXQoKSBzZWFyY2g6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBkYmxDbGljazogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGxvYWRlZERhdGE6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBleHBhbmQ6IEV2ZW50RW1pdHRlcjxUcmVlTm9kZT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY29sbGFwc2U6IEV2ZW50RW1pdHRlcjxUcmVlTm9kZT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGV4cGFuZEFsbE5vZGVzOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjb2xsYXBzZUFsbE5vZGVzOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgYXBwZW5kTmV3OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByZW1vdmVkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSB1cGRhdGVkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2xlYXJTZWFyY2hWYWx1ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjZWxsQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPENlbGxDbGlja1BhcmFtPigpO1xyXG4gICAgQE91dHB1dCgpIGNoaWxkc1BhZ2VDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuXHJcbiAgICBzZXJpYWxpemVkVmFsdWU6IFJvd05vZGVbXTtcclxuXHJcbiAgICBfZGF0YTogVHJlZU5vZGVbXSA9IFtdO1xyXG4gICAgZ2V0IGRhdGEoKTogYW55W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGRhdGEodmFsOiBhbnlbXSkge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSB2YWw7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICB0aGlzLmluaXROb2RlU3RhdHVzKCk7XHJcbiAgICAgICAgLy8gYXV0b3dpZHRoIOaXtu+8jOihqOWktOWuveW6puS+neaNruWGheWuueWuveW6puS9nOWQjOatpeWkhOeQhlxyXG4gICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkZWREYXRhLmVtaXQoKTtcclxuICAgIH1cclxuICAgIC8qKiDmoLnmja7lhoXlrrnoh6rliqjlrr3luqbvvIzpu5jorqQgZmFsc2U7XHJcbiAgICAgKiDmraTlsZ7mgKflvIDlkK/lkI7vvIzoh6rliqjliJflrr3lpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYXV0b1dpZHRoID0gZmFsc2U7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihGYXJyaXNUZW1wbGF0ZURpcmVjdGl2ZSkgdGVtcGxhdGVzOiBRdWVyeUxpc3Q8RmFycmlzVGVtcGxhdGVEaXJlY3RpdmU+O1xyXG4gICAgQENvbnRlbnRDaGlsZHJlbihUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmUpIGNvbHVtbnNSZWY6IFF1ZXJ5TGlzdDxUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmU+O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2hlYWRlckJveCcpIGhlYWRlckJveDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3Jlc2l6ZXJIZWxwZXInKSByZXNpemVySGVscGVyVkM6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdoZWFkZXJUYWJsZScpIGhlYWRlclRhYmxlOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnYm9keVRhYmxlJykgYm9keVRhYmxlOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0R3JvdXAnKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50KSBwc1JlZj86IFBlcmZlY3RTY3JvbGxiYXJDb21wb25lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBoZWFkZXJDaGVja2JveENtcDogVHJlZVRhYmxlSGVhZGVyQ2hlY2tib3hDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdhbGxDaGVja2JveCcpIHNldCBhbGxDaGVja2JveChjb250ZW50OiBUcmVlVGFibGVIZWFkZXJDaGVja2JveENvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAgPSBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ25vZGVzcGFnZXJiYXInKSBub2Rlc1BhZ2VyQmFyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog6KGo5aS05qih5p2/XHJcbiAgICAgKi9cclxuICAgIGhlYWRlclRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog6KGo5L2T5qih5p2/XHJcbiAgICAgKi9cclxuICAgIGJvZHlUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICAvKiog6YCJ5Lit6aG56ZuG5ZCIICovXHJcbiAgICBwcml2YXRlIF9zZWxlY3Rpb25zID0gW107XHJcbiAgICBnZXQgc2VsZWN0aW9ucygpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0aW9ucztcclxuICAgIH1cclxuICAgIHNldCBzZWxlY3Rpb25zKHZhbHM6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAodmFscyAmJiB2YWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyDov4fmu6TmjonmlbDmja7mupDkuK3kuI3lrZjlnKjoioLngrlcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0aW9ucyA9IHZhbHMuZmlsdGVyKHRuID0+IHRuICYmIHRoaXMuZmluZFJvd05vZGUodG4uaWQpKTtcclxuICAgICAgICAgICAgY29uc3QgaWRzID0gdGhpcy5fc2VsZWN0aW9ucy5tYXAodG4gPT4gdG4uaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlkcy5sZW5ndGggIT09IHRoaXMuc2VsZWN0VmFsdWVzLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgKGlkcy5sZW5ndGggPT09IHRoaXMuc2VsZWN0VmFsdWVzLmxlbmd0aCAmJiB0aGlzLmRpZmZlcmVuY2UoaWRzLCB0aGlzLnNlbGVjdFZhbHVlcykubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZXMgPSBpZHM7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlc0NoYW5nZS5lbWl0KGlkcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZXNDaGFuZ2UuZW1pdChbXSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCJ5Lit6aG557Si5byVXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFJvd0luZGV4ID0gLTE7XHJcblxyXG4gICAgLyoqIOmAieS4reW9k+WJjeihjCAqL1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgZ2V0IHNlbGVjdGVkUm93KCk6IFRyZWVOb2RlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRSb3c7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNlbGVjdGVkUm93KHRyZWVOb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkUm93ID0gdHJlZU5vZGU7XHJcbiAgICAgICAgaWYgKHRyZWVOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlICE9PSB0cmVlTm9kZS5pZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IHRyZWVOb2RlLmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZUNoYW5nZS5lbWl0KHRyZWVOb2RlLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlQ2hhbmdlLmVtaXQobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKiog6ZKp6YCJ55qE6K6w5b2V6ZuG5ZCIICovXHJcbiAgICBwcml2YXRlIF9jaGVja2VkcyA9IFtdO1xyXG4gICAgZ2V0IGNoZWNrZWRzKCk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja2VkcztcclxuICAgIH1cclxuICAgIHNldCBjaGVja2Vkcyh0cmVlTm9kZXM6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAodHJlZU5vZGVzICYmIHRyZWVOb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tlZHMgPSB0cmVlTm9kZXMuZmlsdGVyKHRuID0+IHRoaXMuZmluZFJvd05vZGUodG4uaWQpKTtcclxuICAgICAgICAgICAgY29uc3QgaWRzID0gdGhpcy5fY2hlY2tlZHMubWFwKHRuID0+IHRuLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoICE9PSB0aGlzLmNoZWNrVmFsdWVzLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgKGlkcy5sZW5ndGggPT09IHRoaXMuY2hlY2tWYWx1ZXMubGVuZ3RoICYmIHRoaXMuZGlmZmVyZW5jZShpZHMsIHRoaXMuY2hlY2tWYWx1ZXMpLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBpZHM7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQoaWRzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tlZHMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQoW10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmnIDlpJblsYJESVZcclxuICAgIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgIC8vIOiusOW9leWIl+aLluWKqOWJjeeahOS9jee9rlxyXG4gICAgbGFzdFJlc2l6ZXJIZWxwZXJYOiBudW1iZXI7XHJcblxyXG4gICAgc2VhcmNoRGF0YSA9IHsgZmllbGQ6ICcqJywgdmFsdWU6ICcnIH07XHJcblxyXG4gICAgc2NvcmxsQm9keUhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIHNlYXJjaEhhbmRsZTogU2VhcmNoSGFuZGxlO1xyXG4gICAgc2VhcmNoQnV0dG9uVGV4dCA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tc2VhcmNoXCI+PC9pPic7XHJcbiAgICAvKiog5pi+56S65p+l6K+i5bel5YW35p2hICovXHJcbiAgICBzaG93RmluZElucHV0ID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBpc0RhdGFDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgc2Nyb2xsTG9hZGVyOiBWaXJ0dWFsaXplZExvYWRlclNlcnZpY2U7XHJcbiAgICB0b3BIaWRlSGVpZ2h0ID0gMDtcclxuICAgIGJvdHRvbUhpZGVIZWlnaHQgPSAwO1xyXG4gICAgc3RhdGUgPSB7XHJcbiAgICAgICAgcm93Tm9kZXM6IFtdLFxyXG4gICAgICAgIHNjcm9sbFk6IDAsXHJcbiAgICAgICAgc2Nyb2xsWDogMFxyXG4gICAgfTtcclxuXHJcbiAgICAvKiog5b6F5p+l6K+i55qE5paH5pysICovXHJcbiAgICBmaW5kVmFsdWUgPSAnJztcclxuICAgIC8qKiDnu5PmnpzmgLvmlbAgKi9cclxuICAgIGZpbmRDb3VudCA9IDA7XHJcbiAgICAvKiog5b2T5YmN57Si5byVICovXHJcbiAgICBmaW5kQ3VycmVudCA9IDA7XHJcbiAgICAvKiog5a2Y5YKo5paH5pys5p+l6K+i57uT5p6cICovXHJcbiAgICBmaW5kUmVzdWx0ID0gW107XHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBmaW5kS2V5c0hhbmRsZXIgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfaG90S2V5czogVFRIb3RrZXlzID0gbnVsbDtcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGlkU2VydmljZTogSWRTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBzdHlsZVNoZWV0SWQgPSAndHJlZXRhYmxlLXN0eWxlLSc7XHJcbiAgICBwcml2YXRlIHN0eWxlRWxlbWVudDtcclxuICAgIHBhZ2luYXRpb25PcHRpb25zOiBQYWdpbmF0aW9uSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgaWQ6ICdGYXJyaXMtVHJlZVRhYmxlLVBhZ2luYXRpb25fJyxcclxuICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWwsXHJcbiAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgIH07XHJcblxyXG4gICAgc2VsZWN0Tm9kZUNoYW5nZWRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcclxuICAgIHByaXZhdGUgX1VVSUQgPSAnJztcclxuICAgIC8vIOaYr+WQpuacieWbuuWumuWIl1xyXG4gICAgZml4ZWRDb2x1bW5zID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGZhcnJpc0luc3RhbmNlczogRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlID0gbnVsbDtcclxuICAgIGRpZmZlcmVuY2UgPSAoZmlyc3Q6IGFueVtdLCBzZWNvbmQ6IGFueVtdKSA9PiBmaXJzdC5maWx0ZXIoaXRlbSA9PiAhc2Vjb25kLnNvbWUoc2Vjb25kSXRlbSA9PiBzZWNvbmRJdGVtID09IGl0ZW0pKTtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyB0dFNlcnZpY2U6IFRyZWV0YWJsZVNlcnZpY2UsIHB1YmxpYyBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwdWJsaWMgcmVzaXplU2VyOiBSZXNpemVTZXJ2aWNlLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscywgcHVibGljIGNvbEZvcm1hdFNlcjogQ29sdW1uRm9ybWF0U2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHNob3J0Y3V0czogVFRIb3RrZXlzLCBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLCBwcml2YXRlIGluamVjdG9yOiBJbmplY3Rvcikge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSGFuZGxlID0gbmV3IFNlYXJjaEhhbmRsZSh0aGlzKTtcclxuICAgICAgICB0aGlzLnNjcm9sbExvYWRlciA9IG5ldyBWaXJ0dWFsaXplZExvYWRlclNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5qZWN0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy5faG90S2V5cyA9IHRoaXMuaW5qZWN0b3IuZ2V0KFRUSG90a2V5cywgbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmlkU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KElkU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlkU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9VVUlEID0gdGhpcy5pZFNlcnZpY2UudXVpZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlU2hlZXRJZCArPSB0aGlzLmlkU2VydmljZS51dWlkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fVVVJRCA9ICgnJyArIE1hdGgucmFuZG9tKCkpLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlU2hlZXRJZCArPSAoJycgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzID0gdGhpcy5pbmplY3Rvci5nZXQoRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrT3B0b25zKCkge1xyXG4gICAgICAgIC8vIOWQr+eUqOaVsOaNruaKmOihjOWQju+8jOiZmuaLn+a4suafk+WKn+iDveWkseaViFxyXG4gICAgICAgIGlmICghdGhpcy5ub3dyYXApIHtcclxuICAgICAgICAgICAgdGhpcy52aXJ0dWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVTZXRTaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2NvcmxsQm9keUhlaWdodCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tPblNlbGVjdCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T25DaGVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlU29ydENvbHVtbikge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVNvcnRDb2x1bW4gPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpdCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2YtdXRpbHMtZmlsbC1mbGV4LWNvbHVtbicpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50IHx8IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50RWwpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MocGFyZW50RWwsICdmLXV0aWxzLWZpbGwnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUocGFyZW50RWwsICdvdmVyZmxvdycsICdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUNsaWNrTm9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZUNsaWNrTm9kZSA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUNoZWNrQWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlQ2hlY2tBbGwgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVVbkNoZWNrQWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlVW5DaGVja0FsbCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZml0Q29sdW1ucyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6YWJsZUNvbHVtbnMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9ICdUcmVldGFibGUtJyArIHRoaXMuX1VVSUQ7XHJcbiAgICAgICAgLy8g5Yib5bu6IHN0eWxlc2hlZXRcclxuICAgICAgICB0aGlzLnN0eWxlRWxlbWVudCA9IHRoaXMudXRpbHMuY3JlYXRlU3R5bGVTaGVldCh0aGlzLnN0eWxlU2hlZXRJZCk7XHJcbiAgICAgICAgdGhpcy5jaGVja0NvbHVtbk9wdGlvbigpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrT3B0b25zKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5nWm9uZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGVudHJpZXNbMF0uY29udGVudFJlY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKHsgd2lkdGgsIGhlaWdodCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChNYXRoLmFicyhoZWlnaHQgLSB0aGlzLmhlaWdodCkgPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gdGhpcy5pbml0UGFnaW5hdGlvbk9wdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm8udW5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpbmRLZXlzSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRLZXlzSGFuZGxlci51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51dGlscy5yZW1vdmVTdHlsZVNoZWV0KHRoaXMuc3R5bGVTaGVldElkKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSAmJiAhY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzRGF0YUNoYW5nZWQgPSBjaGFuZ2VzLmRhdGEuY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLmRhdGEucHJldmlvdXNWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm11bHRpU2VsZWN0ICYmICFjaGFuZ2VzLm11bHRpU2VsZWN0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlbGVjdCA9ICFjaGFuZ2VzLm11bHRpU2VsZWN0LmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE9uQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja09uU2VsZWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGlzYWJsZWQgJiYgIWNoYW5nZXMuZGlzYWJsZWQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXJlZCA9ICFjaGFuZ2VzLmRpc2FibGVkLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmVuYWJsZUZpbmRUZXh0ICYmICFjaGFuZ2VzLmVuYWJsZUZpbmRUZXh0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEZpbmRUZXh0KGNoYW5nZXMuZW5hYmxlRmluZFRleHQuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNlbGVjdFZhbHVlICYmICFjaGFuZ2VzLnNlbGVjdFZhbHVlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoY2hhbmdlcy5zZWxlY3RWYWx1ZS5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RWYWx1ZXMgJiYgIWNoYW5nZXMuc2VsZWN0VmFsdWVzLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGVzKGNoYW5nZXMuc2VsZWN0VmFsdWVzLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNoZWNrVmFsdWVzICYmICFjaGFuZ2VzLmNoZWNrVmFsdWVzLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrZWROb2RlcyhjaGFuZ2VzLmNoZWNrVmFsdWVzLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlSW5kZXggIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlSW5kZXguaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnaW5hdGlvbk9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VTaXplICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMucGFnZVNpemUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnaW5hdGlvbk9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5wYWdlU2l6ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VMaXN0ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMucGFnZUxpc3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnaW5hdGlvbk9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMudG90YWwgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy50b3RhbC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy50b3RhbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmZpdENvbHVtbnMgJiYgIWNoYW5nZXMuZml0Q29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZVdpZHRoKHRoaXMuYWxsQ29sdW1uc1dpZHRoKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuaXNEYXRhQ2hhbmdlZCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmxvYWRlZERhdGEuZW1pdCgpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlzRGF0YUNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGhpcy5wc1JlZikge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoIChpdGVtLmdldFR5cGUoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhZGVyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRlbXBsYXRlID0gaXRlbS50ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvZHknOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keVRlbXBsYXRlID0gaXRlbS50ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb2x1bW5zUmVmLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLnR0YzJjb2x1bW5zKHRoaXMuY29sdW1uc1JlZik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnNSZWYuY2hhbmdlcy5zdWJzY3JpYmUoKGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy50dGMyY29sdW1ucyhkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcnJpcy10cmVldGFibGUnKTtcclxuICAgICAgICB0aGlzLmxvYWRlZERhdGEuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJTaG9ydGN1dHMoKTtcclxuXHJcbiAgICAgICAgLy8gYXV0b3dpZHRoIOaXtu+8jOihqOWktOWuveW6puS+neaNruWGheWuueWuveW6puS9nOWQjOatpeWkhOeQhlxyXG4gICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgdGhpcy5zZXRSaWdodEZpeGVkQ29sdW1uU2hhZG93KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmFkZCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldE5ld0NvbHVtbnNXaWR0aCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0b1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3Q29sV2lkdGg6IGFueSA9IHt9O1xyXG4gICAgICAgIGxldCBoZWFkZXJDZWxscyA9IFtdO1xyXG4gICAgICAgIGxldCBmaXJzdFJvd0NlbGxzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0hlYWRlciAmJiB0aGlzLmhlYWRlclRhYmxlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckNlbGxzID0gQXJyYXkuZnJvbTxIVE1MRWxlbWVudD4odGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXJpYWxpemVkVmFsdWUgJiYgdGhpcy5zZXJpYWxpemVkVmFsdWUubGVuZ3RoICYmIHRoaXMuYm9keVRhYmxlKSB7XHJcbiAgICAgICAgICAgIGZpcnN0Um93Q2VsbHMgPSBBcnJheS5mcm9tPEhUTUxFbGVtZW50Pih0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RyJykucXVlcnlTZWxlY3RvckFsbCgndGQnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaXJzdFJvd0NlbGxzLmZvckVhY2goKHRkOiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRkKTtcclxuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gdGQuZ2V0QXR0cmlidXRlKCdmaWVsZCcpO1xyXG4gICAgICAgICAgICBsZXQgY29sV2lkdGggPSB0ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aC50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICBuZXdDb2xXaWR0aFtmaWVsZE5hbWVdID0gY29sV2lkdGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmNvbHVtbnMuZmluZChjID0+IGMuZmllbGQgPT09IGZpZWxkTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChjb2wgJiYgY29sLndpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbFdpZHRoID0gY29sV2lkdGggPiBjb2wud2lkdGggPyBjb2xXaWR0aCA6IGNvbC53aWR0aDtcclxuICAgICAgICAgICAgICAgIHRkLnN0eWxlLm1pbldpZHRoID0gY29sV2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGhlYWRlckNlbGxzW2luZGV4XS5zdHlsZS53aWR0aCA9IGNvbFdpZHRoICsgJ3B4JztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb2x1bW5Jc1Zpc2libGUoY29sKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHRTZXJ2aWNlLmNvbHVtbklzVmlzaWJsZShjb2wsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNvbHVtbkNzc05hbWUobjogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIGAjJHt0aGlzLmlkfSAudHJlZXRhYmxlLWNlbGxbZmllbGQ9XCIke24uZmllbGR9XCJdLCAjJHt0aGlzLmlkfSAudHJlZXRhYmxlLWhlYWRlci1jZWxsW2ZpZWxkPVwiJHtuLmZpZWxkfVwiXTpub3QoLmdyb3VwLWhlYWRlci1jZWxsKWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5oyJ5Zu65a6a5YiX55qE6aG65bqP5o6S5bqPXHJcbiAgICBwcml2YXRlIHNvcnRDb2x1bW5zQnlGaXhlZCh1cGRhdGVDb2x1bW5zID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTGVmdCA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAnbGVmdCcpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkQ2VudGVyID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+ICFuLmZpeGVkIHx8IG4uZml4ZWQgPT09ICdjZW50ZXInKTtcclxuICAgICAgICBjb25zdCBmaXhlZFJpZ2h0ID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdyaWdodCcpO1xyXG5cclxuICAgICAgICBpZiAoZml4ZWRMZWZ0ICYmIGZpeGVkTGVmdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZml4ZWRMZWZ0LmZvckVhY2goKG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuLmxlZnQgPSBpbmRleCA/IGZpeGVkTGVmdFtpbmRleCAtIDFdLndpZHRoIDogMDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4ZWRSaWdodCAmJiBmaXhlZFJpZ2h0Lmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgbGV0IHJpZ2h0V2lkdGhUb3RhbCA9IGZpeGVkUmlnaHQucmVkdWNlKChyLCBjKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gciArIGMud2lkdGg7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgZml4ZWRSaWdodC5mb3JFYWNoKChuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmlnaHRXaWR0aFRvdGFsIC09IG4ud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBuLnJpZ2h0ID0gcmlnaHRXaWR0aFRvdGFsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IGZpeGVkTGVmdC5jb25jYXQoZml4ZWRDZW50ZXIpLmNvbmNhdChmaXhlZFJpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0NvbHVtbk9wdGlvbigpIHtcclxuICAgICAgICBjb25zdCBjc3NSdWxlcyA9IFtdO1xyXG4gICAgICAgIGlmICghdGhpcy5maXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbnNCeUZpeGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgobiwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobi52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG4udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChuWydoYWxpZ24nXSkge1xyXG4gICAgICAgICAgICAgICAgbi5oQWxpZ24gPSBuWydoYWxpZ24nXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG4ud2lkdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbi53aWR0aCA9IDEwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFuLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBuLmlkID0gJ3RyZWV0YWJsZS1oZWFkZXItJyArIChuLmZpZWxkIHx8IGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbFdpZHRoVG90YWwgPSB0aGlzLmFsbENvbHVtbnNXaWR0aCgpO1xyXG4gICAgICAgIGxldCBmaXhlZENvbHMgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBmaXhlZFJpZ2h0Q29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuICAgICAgICBpZiAoZml4ZWRSaWdodENvbHVtbnMgJiYgZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpeGVkUmlnaHRDb2x1bW5zWzBdWydyaWdodFNoYWRvd0NvbCddID0gdHJ1ZTtcclxuICAgICAgICAgICAgZml4ZWRSaWdodENvbHVtbnNbZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoIC0gMV1bJ2xhc3RDb2x1bW4nXSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNbdGhpcy5jb2x1bW5zLmxlbmd0aCAtIDFdWydsYXN0Q29sdW1uJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaXhlZExlZnRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdsZWZ0Jyk7XHJcbiAgICAgICAgaWYgKGZpeGVkTGVmdENvbHVtbnMgJiYgZml4ZWRMZWZ0Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZml4ZWRMZWZ0Q29sdW1uc1tmaXhlZExlZnRDb2x1bW5zLmxlbmd0aCAtIDFdWydsZWZ0U2hhZG93Q29sJ10gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IHRoaXMuY29sdW1uSXNWaXNpYmxlKG4pO1xyXG4gICAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IHRoaXMuY29sdW1uQ3NzTmFtZShuKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNzc1J1bGUgPSB0aGlzLnV0aWxzLmdldENzc1J1bGUocnVsZU5hbWUsIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgaWYgKCFjc3NSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVjc3MgPSBydWxlTmFtZSArICcgeyAnO1xyXG4gICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gaXNWaXNpYmxlID8gJycgOiAnZGlzcGxheTogbm9uZTsnO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSBgd2lkdGg6ICR7KG4ud2lkdGggLyBjb2xXaWR0aFRvdGFsICogMTAwKS50b0ZpeGVkKDIpfSU7YDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYHdpZHRoOiAke24ud2lkdGh9cHg7YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uZml4ZWQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYGxlZnQ6ICR7bi5sZWZ0fXB4YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkQ29scysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gYHJpZ2h0OiAke24ucmlnaHR9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWRDb2xzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3R5bGVjc3MgKz0gJ30nO1xyXG4gICAgICAgICAgICAgICAgY3NzUnVsZXMucHVzaChzdHlsZWNzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjc3NSdWxlLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnJyA6ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoY3NzUnVsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoY3NzUnVsZXMsIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGFibGVXaWR0aChjb2xXaWR0aFRvdGFsKTtcclxuXHJcblxyXG4gICAgICAgIC8vIOWQr+eUqOWIhumhteWKoOi9veWtkOiKgueCuVxyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb25Gb3JDaGlsZHJlbikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogJ19fbm9kZXNwYWdlcmJhcl9fJyxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5ub2Rlc1BhZ2VyQmFyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5maXhlZENvbHVtbnMgPSAhIWZpeGVkQ29scztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFRhYmxlV2lkdGgoY29sV2lkdGhUb3RhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyVGFibGUgJiYgdGhpcy5ib2R5VGFibGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NvbFdpZHRoVG90YWx9cHhgO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NvbFdpZHRoVG90YWx9cHhgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFsbENvbHVtbnNXaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5Jc1Zpc2libGUoYykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByICsgYy53aWR0aDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUGFnZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VkLmVtaXQoJGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VTaXplQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMucGFnZVNpemVDaGFuZ2VkLmVtaXQoJGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQYWdlSW5mbyhwYWdlSW5mbzogeyBwYWdlSW5kZXg/OiBudW1iZXIsIHBhZ2VTaXplPzogbnVtYmVyLCB0b3RhbD86IG51bWJlciwgcGFnZUxpc3Q/OiBudW1iZXJbXSB9KSB7XHJcbiAgICAgICAgaWYgKHBhZ2VJbmZvICYmIE9iamVjdC5rZXlzKHBhZ2VJbmZvKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9iajogYW55ID0ge307XHJcbiAgICAgICAgICAgIGlmIChwYWdlSW5mby50b3RhbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoudG90YWxJdGVtcyA9IHBhZ2VJbmZvLnRvdGFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFnZUluZm8ucGFnZUluZGV4ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai5jdXJyZW50UGFnZSA9IHBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VJbmZvLnBhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai5pdGVtc1BlclBhZ2UgPSBwYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VJbmZvLnBhZ2VMaXN0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG9iai5wYWdlTGlzdCA9IHBhZ2VJbmZvLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UGFnaW5hdGlvbk9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6ICdGYXJyaXMtVHJlZVRhYmxlLVBhZ2luYXRpb25fJyArIHRoaXMuX1VVSUQsXHJcbiAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5vZGVUZXh0KGNvbDogVHJlZVRhYmxlQ29sdW1uLCByb3dkYXRhKSB7XHJcbiAgICAgICAgaWYgKGNvbC5pc011bHRpbGluZ3VhbEZpZWxkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoY29sLmZpZWxkLCByb3dkYXRhKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxlU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxlSWQgPSB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWQgfHwgJ3poLUNIUyc7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHZhbCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxbbG9jYWxlSWRdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoY29sLmZpZWxkLCByb3dkYXRhLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0Tm9kZVN0YXR1cygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVmFsdWVzICYmIHRoaXMuY2hlY2tWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWROb2Rlcyh0aGlzLmNoZWNrVmFsdWVzLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlcyAmJiB0aGlzLnNlbGVjdFZhbHVlcy5sZW5ndGggJiYgIXRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZXModGhpcy5zZWxlY3RWYWx1ZXMsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKHRoaXMuc2VsZWN0VmFsdWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5rOo5YaM5b+r5o236ZSuICovXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyU2hvcnRjdXRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dGaWx0ZXJCYXIgJiYgdGhpcy5faG90S2V5cykge1xyXG4gICAgICAgICAgICB0aGlzLl9ob3RLZXlzLmFkZFNob3J0Y3V0KHsga2V5czogJ2VudGVyJywgZWxlbWVudDogdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCB9KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNlYXJjaCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RmluZFRleHQodGhpcy5lbmFibGVGaW5kVGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRGaW5kVGV4dChlbmFibGUgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVGaW5kVGV4dCA9IGVuYWJsZTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVGaW5kVGV4dCAmJiB0aGlzLl9ob3RLZXlzKSB7XHJcbiAgICAgICAgICAgIC8vIOafpeivouW3peWFt+adoVxyXG4gICAgICAgICAgICB0aGlzLmZpbmRLZXlzSGFuZGxlciA9IHRoaXMuX2hvdEtleXMuYWRkU2hvcnRjdXQoeyBrZXlzOiAnY29udHJvbC5zaGlmdC5mJyB9KS5zdWJzY3JpYmUoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUZpbmRUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmluZElucHV0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0ZpbmRJbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RmluZElucHV0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5maW5kS2V5c0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEtleXNIYW5kbGVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRLZXlzSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDdXN0b21DbHMocm93Tm9kZTogUm93Tm9kZSwgZmllbGQ6IHN0cmluZyA9ICcnLCBjbHNUeXBlOiAncm93JyB8ICdjZWxsJyA9ICdyb3cnKSB7XHJcbiAgICAgICAgY29uc3QgY2xzID0ge307XHJcbiAgICAgICAgbGV0IGZuID0gdGhpcy5yb3dTdHlsZXI7XHJcbiAgICAgICAgaWYgKGNsc1R5cGUgPT09ICdjZWxsJykge1xyXG4gICAgICAgICAgICBmbiA9IHRoaXMuY2VsbFN0eWxlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICBjb25zdCByb3dDbHMgPSBmbihyb3dOb2RlLm5vZGUsIGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKHJvd0Nscykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFycmNscyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByb3dDbHMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyY2xzID0gW3Jvd0Nsc107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJvd0NscykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyY2xzID0gcm93Q2xzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyY2xzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0Nsc09iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmNscy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dDbHNPYmpbJycgKyBjXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2NscyA9IHsgLi4ucm93Q2xzT2JqLCAuLi5jbHMgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NscztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvd0NscztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY2xzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRSb3dDbHMocm93Tm9kZTogUm93Tm9kZSwgZmllbGQ/OiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXN0b21DbHMocm93Tm9kZSwgJ3JvdycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENlbGxDbHMocm93Tm9kZTogUm93Tm9kZSwgZmllbGQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEN1c3RvbUNscyhyb3dOb2RlLCBmaWVsZCwgJ2NlbGwnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWFsQ29sV2lkdGgoY3VycmVudENvbDogVHJlZVRhYmxlQ29sdW1uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoICYmIHRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xXaWR0aFRvdGFsID0gdGhpcy5jb2x1bW5zLnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIgKyAodGhpcy5jb2x1bW5Jc1Zpc2libGUoYykgPyBjLndpZHRoIDogMCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uSXNWaXNpYmxlKGN1cnJlbnRDb2wpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGN1cnJlbnRDb2wud2lkdGggLyBjb2xXaWR0aFRvdGFsICogMTAwKS50b0ZpeGVkKDIpICsgJyUnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRDb2wud2lkdGggKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnKVxyXG4gICAgb25SZXNpemVkKCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplU2VyLndpbmRvd1Jlc2l6ZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFJpZ2h0Rml4ZWRDb2x1bW5TaGFkb3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgY29uc3QgcHMgPSAodGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYgYXMgYW55KS5pbnN0YW5jZTtcclxuICAgICAgICAgICAgaWYgKCFwcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29udGFpbmVyV2lkdGgsIHNjcm9sbGJhclhMZWZ0LCBjb250ZW50V2lkdGggfSA9IHBzO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggKyBzY3JvbGxiYXJYTGVmdCA8IGNvbnRlbnRXaWR0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkUmlnaHRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBgIyR7dGhpcy5pZH0uZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNgO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpeGVkUmlnaHRDb2x1bW5zICYmIGZpeGVkUmlnaHRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkUmlnaHRDc3NSdWxlS2V5ID0gYCR7cnVsZU5hbWV9IFtyLXR0LXNoYWRvdy1jb2xdOjpiZWZvcmVgO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q1NTUnVsZSA9IGAke2ZpeGVkUmlnaHRDc3NSdWxlS2V5fXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzojZDlkOWQ5IC0xMnB4IDBweCA4cHggLTEycHggaW5zZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoW3JpZ2h0Q1NTUnVsZV0sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEZpeGVkQ29sdW1uU2hhZG93KHgsIGUpIHtcclxuICAgICAgICBjb25zdCBmaXhlZExlZnRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdsZWZ0Jyk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRSaWdodENvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ3JpZ2h0Jyk7XHJcbiAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBgIyR7dGhpcy5pZH0uZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNgO1xyXG4gICAgICAgIGxldCBmaXhlZExlZnRDc3NSdWxlS2V5ID0gJyc7XHJcbiAgICAgICAgbGV0IGZpeGVkUmlnaHRDc3NSdWxlS2V5ID0gJyc7XHJcbiAgICAgICAgbGV0IGxlZnRDU1NSdWxlID0gJyc7XHJcbiAgICAgICAgbGV0IHJpZ2h0Q1NTUnVsZSA9ICcnO1xyXG4gICAgICAgIGlmIChmaXhlZExlZnRDb2x1bW5zICYmIGZpeGVkTGVmdENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RGaXhlZExlZnRDb2x1bW4gPSBmaXhlZExlZnRDb2x1bW5zW2ZpeGVkTGVmdENvbHVtbnMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGZpeGVkTGVmdENzc1J1bGVLZXkgPSBgJHtydWxlTmFtZX0gW2ZpZWxkPVwiJHtsYXN0Rml4ZWRMZWZ0Q29sdW1uLmZpZWxkfVwiXTo6YWZ0ZXJgO1xyXG4gICAgICAgICAgICBsZWZ0Q1NTUnVsZSA9IGAke2ZpeGVkTGVmdENzc1J1bGVLZXl9e1xyXG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzojZDlkOWQ5IDEycHggMHB4IDhweCAtMTJweCBpbnNldDtcclxuICAgICAgICAgICAgfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4ZWRSaWdodENvbHVtbnMgJiYgZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpeGVkUmlnaHRDc3NSdWxlS2V5ID0gYCR7cnVsZU5hbWV9IFtyLXR0LXNoYWRvdy1jb2xdOjpiZWZvcmVgO1xyXG4gICAgICAgICAgICByaWdodENTU1J1bGUgPSBgJHtmaXhlZFJpZ2h0Q3NzUnVsZUtleX17XHJcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiNkOWQ5ZDkgLTEycHggMHB4IDhweCAtMTJweCBpbnNldDtcclxuICAgICAgICAgICAgfWA7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHggPT09IDApIHtcclxuICAgICAgICAgICAgLy8g56e76Zmk5bem5L6n5Zu65a6a5YiX6Zi05b2x5qC35byPXHJcbiAgICAgICAgICAgIGlmIChmaXhlZExlZnRDc3NSdWxlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnJlbW92ZUNzc1J1bGUoZml4ZWRMZWZ0Q3NzUnVsZUtleSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgoeCArIGUuc3JjRWxlbWVudC5vZmZzZXRXaWR0aCkudG9GaXhlZCgpID09IGUuc3JjRWxlbWVudC5zY3JvbGxXaWR0aCkge1xyXG4gICAgICAgICAgICAvLyDnp7vpmaTlj7PliJnlm7rlrprliJfpmLTlvbHmoLflvI9cclxuICAgICAgICAgICAgaWYgKGZpeGVkUmlnaHRDc3NSdWxlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnJlbW92ZUNzc1J1bGUoZml4ZWRSaWdodENzc1J1bGVLZXksIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOW3puWPs+WbuuWumuWIl+agt+W8j1xyXG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgaWYgKGxlZnRDU1NSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChsZWZ0Q1NTUnVsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyaWdodENTU1J1bGUpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKHJpZ2h0Q1NTUnVsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoYXJyLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsWChlOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93SGVhZGVyICYmIHRoaXMuaGVhZGVyQm94KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBlLnNyY0VsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zY3JvbGxYID0geDtcclxuICAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmhlYWRlckJveC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyksICd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlM2QoLSR7eH1weCwgMHB4LCAwcHgpYCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQm94Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IHg7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEZpeGVkQ29sdW1uU2hhZG93KHgsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNjcm9sbFkoZTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gZS50YXJnZXQuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIHRvcEhpZGVIZWlnaHQsIGJvdHRvbUhpZGVIZWlnaHQgfSA9IHRoaXMuc2Nyb2xsTG9hZGVyLmdldFJvd05vZGVzKHNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2Nyb2xsWSA9IHNjcm9sbFRvcDtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSBkYXRhO1xyXG4gICAgICAgICAgICB0aGlzLnRvcEhpZGVIZWlnaHQgPSB0b3BIaWRlSGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmJvdHRvbUhpZGVIZWlnaHQgPSBib3R0b21IaWRlSGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TZWFyY2hWYWx1ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICBpZiAoISRldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xlYXJTZWFyY2hWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyU2VhcmNoVmFsdWUoKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hEYXRhLnZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaFZhbHVlLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNlbGxDbGljayhldmVudDogRXZlbnQsIGNvbDogYW55LCBub2RlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNlbGxDbGljay5lbWl0KHsgZXZlbnQsIGNvbCwgbm9kZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFja0J5Rm4oaW5kZXgsIHJvd05vZGUpIHtcclxuICAgICAgICByZXR1cm4gcm93Tm9kZS5pZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC85byP5YyW5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIGZvcm1hdERhdGEoY29sOiBhbnksIGRhdGE6IGFueSwgZm9ybWF0dGVyOiBhbnkpIHtcclxuICAgICAgICAvLyBjb25zdCB2YWwgPSB0aGlzLnV0aWxzLmdldFZhbHVlKGZpZWxkLCBkYXRhLCB0cnVlICk7XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5nZXROb2RlVGV4dChjb2wsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbEZvcm1hdFNlci5mb3JtYXQodmFsLCBkYXRhLCBmb3JtYXR0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbHVtbnNDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb2x1bW5PcHRpb24oKTtcclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHR0YzJjb2x1bW5zKGxpc3Q6IFF1ZXJ5TGlzdDxUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmU+KSB7XHJcbiAgICAgICAgcmV0dXJuIGxpc3QubWFwKChuOiBUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmUpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBuLmZpZWxkLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG4udGl0bGUsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogbi5hbGlnbixcclxuICAgICAgICAgICAgICAgIGhBbGlnbjogbi5oQWxpZ24sXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogbi53aWR0aCxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogbi5mb3JtYXR0ZXJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlU2V0U2l6ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5maXQpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHBhcmVudEVsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHBhcmVudEVsLm9mZnNldEhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJWaXJ0dWFsUm93Tm9kZXMobm9kZVBvc1kgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsWSA9IG5vZGVQb3NZIHx8IHRoaXMuc3RhdGUuc2Nyb2xsWTtcclxuICAgICAgICAgICAgY29uc3QgX3Jvd25vZGVzID0gdGhpcy5zY3JvbGxMb2FkZXIuZ2V0Um93Tm9kZXMoc2Nyb2xsWSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gX3Jvd25vZGVzLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMudG9wSGlkZUhlaWdodCA9IF9yb3dub2Rlcy50b3BIaWRlSGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmJvdHRvbUhpZGVIZWlnaHQgPSBfcm93bm9kZXMuYm90dG9tSGlkZUhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobm9kZVBvc1kpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IG5vZGVQb3NZO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZShub2RlUG9zWTogYW55ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gW107XHJcbiAgICAgICAgdGhpcy5zZWFyY2hIYW5kbGUuYWxsTm9kZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplTm9kZXMobnVsbCwgdGhpcy5kYXRhLCAwLCB0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCAmJiB0aGlzLmZpeGVkSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKG5vZGVQb3NZKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZW1pdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuagkeiKgueCueaVsOaNruW6j+WIl+WMluS4ulJvd05vZGVcclxuICAgICAqIEBwYXJhbSBwYXJlbnQg54i257qn6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gbm9kZXMg5qCR6IqC54K56ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gbGV2ZWwg57qn5YirXHJcbiAgICAgKiBAcGFyYW0gdmlzaWJsZSDmmK/lkKblj6/op4FcclxuICAgICAqL1xyXG4gICAgc2VyaWFsaXplTm9kZXMocGFyZW50OiBUcmVlTm9kZSwgbm9kZXM6IFRyZWVOb2RlW10sIGxldmVsOiBudW1iZXIsIHZpc2libGU6IGJvb2xlYW4sIHBhcmVudElkcz86IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vZGUucGFyZW50ID0gcGFyZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbm9kZS5oYXNPd25Qcm9wZXJ0eSgnc2VsZWN0YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUuaGFzT3duUHJvcGVydHkoJ3Nob3dJY29uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnNob3dJY29uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmx5U2VsZWN0TGVhZiA9PT0gJ3llcycgJiYgbm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3RhYmxlID0gISFub2RlLmxlYWY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlpZCA9IG5vZGUuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5pZCA9IGtleWlkO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuZmluZEluZGV4SW5TZWxlY3Rpb24obm9kZSkgPiAtMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IHRoaXMuZmluZEluZGV4SW5DaGVja2Vkcyhub2RlKSA+IC0xO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNMYXN0ID0gaW5kZXggPT09IG5vZGVzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0ZpcnN0ID0gaW5kZXggPT09IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudFJuID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRJRCA9IHBhcmVudC5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3BhcmVudHMgPSBwYXJlbnRJZHMgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50cyA9IHBhcmVudHMuY29uY2F0KF9wYXJlbnRzLm1hcChuID0+IG4pKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50SUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFJuID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcGFyZW50LmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dOb2RlOiBSb3dOb2RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBrZXlpZCxcclxuICAgICAgICAgICAgICAgICAgICBub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB2aXNpYmxlICYmIChwYXJlbnQgPyBwYXJlbnQuZXhwYW5kZWQgOiB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ2hlY2tlZCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFJvd05vZGU6IHBhcmVudFJuLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlLnJvd05vZGVzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0OiBpc0xhc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3Q6IGlzRmlyc3RcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5wdXNoKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5wdXNoKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVOb2Rlcyhub2RlLCBub2RlLmNoaWxkcmVuLCBsZXZlbCArIDEsIHJvd05vZGUudmlzaWJsZSwgcGFyZW50cyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaMh+WumueahOiKgueCueaYr+WQpuiiq+mAieS4rVxyXG4gICAgICogQHBhcmFtIG5vZGUg5qCR6IqC54K5XHJcbiAgICAgKi9cclxuICAgIGlzU2VsZWN0ZWQobm9kZTogVHJlZU5vZGUpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgJiYgdGhpcy5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuZGF0YVt0aGlzLmlkRmllbGRdID09PSB0aGlzLnNlbGVjdGVkUm93LmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucyAmJiB0aGlzLnNlbGVjdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25zLmZpbmRJbmRleChuID0+IG4uZGF0YVt0aGlzLmlkRmllbGRdID09PSBub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSkgPiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWIpOaWreW9k+WJjeiKgueCueeahOmSqemAieeKtuaAgSAqL1xyXG4gICAgaXNDaGVja2VkKG5vZGU6IFRyZWVOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgdGhpcy5jaGVja2Vkcykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkcyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja2Vkcy5maW5kSW5kZXgoKHYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG5vZGUuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfSkgPiAtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgdW5TZWxlY3RlZEN1cnJlbnRSb3dFbWl0KCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRSb3c7XHJcbiAgICAgICAgaWYgKGN1cnJTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgbm9kZTogY3VyclNlbGVjdGVkLCB0eXBlOiAncm93JywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NpbmdsZVNlbGVjdE5vZGUoZTogU2VsZWN0RXZlbnRBcmdzKSB7XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IGUucm93Tm9kZS5ub2RlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0Um93SW5kZXggPSBlLnJvd0luZGV4O1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtlLnJvd05vZGUubm9kZV07XHJcbiAgICAgICAgZS5yb3dOb2RlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgZS5yb3dOb2RlLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKGUucm93Tm9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcDogTm9kZVNlbGVjdGVkUGFyYW0gPSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGUub3JpZ2luYWxFdmVudCxcclxuICAgICAgICAgICAgbm9kZTogZS5yb3dOb2RlLm5vZGUsIHR5cGU6ICdyb3cnLFxyXG4gICAgICAgICAgICBpbmRleDogZS5yb3dJbmRleCxcclxuICAgICAgICAgICAgcGFyZW50czogZS5yb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm5vZGVTZWxlY3RlZC5lbWl0KHNwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zaW5nbGVVblNlbGVjdE5vZGUoZTogU2VsZWN0RXZlbnRBcmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RSb3dJbmRleCA9IC0xO1xyXG4gICAgICAgIGUucm93Tm9kZS5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgZS5yb3dOb2RlLmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHtcclxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZS5vcmlnaW5hbEV2ZW50LFxyXG4gICAgICAgICAgICBub2RlOiBlLnJvd05vZGUubm9kZSwgdHlwZTogJ3JvdycsIHBhcmVudHM6IGUucm93Tm9kZS5wYXJlbnRzLFxyXG4gICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX19zaW5nbGVTZWxlY3ROb2RlKGV2ZW50OiBTZWxlY3RFdmVudEFyZ3MsIHNlbGVjdGVkID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5TZWxlY3RlZEN1cnJlbnRSb3dFbWl0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NpbmdsZVNlbGVjdE5vZGUoZXZlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5rZWVwU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaW5nbGVVblNlbGVjdE5vZGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX19tdWx0aVNlbGVjdE5vZGUoZXZlbnQ6IFNlbGVjdEV2ZW50QXJncywgc2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSBldmVudC5yb3dOb2RlO1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkQ3VycmVudFJvd0VtaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5zaW5nbGVTZWxlY3RXaGVuTXVsdGlTZWxlY3Qocm93Tm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQub3JpZ2luYWxFdmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3JvdycsIGluZGV4OiBldmVudC5yb3dJbmRleCwgcGFyZW50czogcm93Tm9kZS5wYXJlbnRzLFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmtlZXBTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VsZWN0V2hlbk11bHRpU2VsZWN0KHJvd05vZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncm93JywgaW5kZXg6IGV2ZW50LnJvd0luZGV4LCBwYXJlbnRzOiByb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6KGM5Y2V5Ye75LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZVJvd0NsaWNrKGV2ZW50OiBTZWxlY3RFdmVudEFyZ3MpIHtcclxuICAgICAgICBjb25zdCByb3dOb2RlID0gZXZlbnQucm93Tm9kZTtcclxuICAgICAgICByb3dOb2RlLm5vZGVbJ2VsZW1lbnRSZWYnXSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5pc1NlbGVjdGVkKHJvd05vZGUubm9kZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9fc2luZ2xlU2VsZWN0Tm9kZShldmVudCwgc2VsZWN0ZWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX211bHRpU2VsZWN0Tm9kZShldmVudCwgc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tPblNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd05vZGUuaXNDaGVja2VkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuY2FzY2FkZU5vZGVzKHJvd05vZGUsIHJvd05vZGUuaXNDaGVja2VkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bim5pyJY2hlY2tib3gg55qE5Y2V6YCJXHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDlvZPliY3oioLngrlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaW5nbGVTZWxlY3RXaGVuTXVsdGlTZWxlY3Qocm93Tm9kZTogUm93Tm9kZSwgZmxhZzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSBmbGFnO1xyXG4gICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXNjYWRlTm9kZXMocm93Tm9kZSwgcm93Tm9kZS5pc0NoZWNrZWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSByb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZsYWc7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0V2hlbkNoZWNrZWQocm93Tm9kZTogUm93Tm9kZSwgZmxhZzogYm9vbGVhbiwgZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIHJvd05vZGUuaXNDaGVja2VkID0gZmxhZztcclxuICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd05vZGUpO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZsYWc7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dOb2RlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcywgdHlwZTogJ2NoZWNrYm94JyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcywgdHlwZTogJ2NoZWNrYm94JyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzSW5BcnJheShyb3dOb2RlOiBSb3dOb2RlLCBpdGVtczogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbXMuZmluZEluZGV4KGkgPT4gaS5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHJvd05vZGUuaWQpID4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTZWxlY3Rpb25zKHJvd05vZGU6IFJvd05vZGUpIHtcclxuICAgICAgICBpZiAocm93Tm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbkFycmF5KHJvd05vZGUsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGlvbnMsIHJvd05vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMucHVzaChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuc2VsZWN0aW9ucy5maW5kSW5kZXgoKHRuOiBUcmVlTm9kZSkgPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdID09PSByb3dOb2RlLm5vZGUuZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgICAgIGlmIChpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbnMgPSB0aGlzLnNlbGVjdGlvbnMuZmlsdGVyKCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSAhPT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDaGVja2Vkcyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2Vkcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luQXJyYXkocm93Tm9kZSwgdGhpcy5jaGVja2VkcykpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY2hlY2tlZHMgPSBbIC4uLnRoaXMuY2hlY2tlZHMsIHJvd05vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzLnB1c2gocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5jaGVja2Vkcy5maW5kSW5kZXgoKHRuOiBUcmVlTm9kZSkgPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdID09PSByb3dOb2RlLm5vZGUuZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgICAgIGlmIChpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5jaGVja2VkcyA9IHRoaXMuY2hlY2tlZHMuZmlsdGVyKCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSAhPT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaWZmcmVudERhdGEoZGF0YTogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBfbm9kZXMgPSBbXTtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9ub2Rlcy5maW5kSW5kZXgodCA9PiB0LmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gbi5kYXRhW3RoaXMuaWRGaWVsZF0pID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9ub2Rlcy5wdXNoKG4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIF9ub2RlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57qn6IGU6YCJ5oup6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDlvZPliY3oioLngrlcclxuICAgICAqIEBwYXJhbSBjaGVja2VkIOaYr+WQpumSqemAiVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhc2NhZGVOb2Rlcyhyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IGNoZWNrZWROb2RlcyA9IHRoaXMucHJvcGFnYXRlU2VsZWN0aW9uRG93bihyb3dOb2RlLCBjaGVja2VkKTtcclxuICAgICAgICBjaGVja2VkTm9kZXMgPSBjaGVja2VkTm9kZXMuY29uY2F0KHRoaXMucHJvcGFnYXRlU2VsZWN0aW9uVXAocm93Tm9kZSwgY2hlY2tlZCkpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERpZmZyZW50RGF0YShjaGVja2VkTm9kZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6KGMQ2hlY2tib3gg6YCJ5Lit5Y+Y5YyW5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0gZXZlbnQg6byg5qCH54K55Ye75LqL5Lu25a+56LGhXHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDlvZPliY3moJHoioLngrlcclxuICAgICAqL1xyXG4gICAgdG9nZ2xlTm9kZVdpdGhDaGVja2JveChldmVudDogRXZlbnQsIHJvd05vZGU6IFJvd05vZGUsIGNoZWNrZWQ6IGJvb2xlYW4pOiBhbnkge1xyXG5cclxuICAgICAgICByb3dOb2RlLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAvLyBsZXQgY2hlY2tlZE5vZGVzID0gdGhpcy5wcm9wYWdhdGVTZWxlY3Rpb25Eb3duKHJvd05vZGUsIGNoZWNrZWQpO1xyXG4gICAgICAgIC8vIGNoZWNrZWROb2RlcyA9IGNoZWNrZWROb2Rlcy5jb25jYXQodGhpcy5wcm9wYWdhdGVTZWxlY3Rpb25VcChyb3dOb2RlLCBjaGVja2VkKSk7XHJcbiAgICAgICAgLy8gY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGlmZnJlbnREYXRhKGNoZWNrZWROb2Rlcyk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY2FzY2FkZU5vZGVzKHJvd05vZGUsIGNoZWNrZWQpO1xyXG5cclxuICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBub2RlczogZGF0YSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlVW5DaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBub2RlczogZGF0YSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdFdoZW5DaGVja2VkKHJvd05vZGUsIGNoZWNrZWQsIGV2ZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFsuLi50aGlzLmNoZWNrZWRzXTtcclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFqOmAiVxyXG4gICAgICogQHBhcmFtIGV2ZW50IOm8oOagh+S6i+S7tuWvueixoVxyXG4gICAgICogQHBhcmFtIGNoZWNrZWQg5piv5ZCm6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZU5vZGVzV2l0aENoZWNrYm94KGV2ZW50OiBFdmVudCwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0FsbE5vZGVzKHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIGNoZWNrZWQsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy51bkNoZWNrQWxsTm9kZXMoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgY2hlY2tlZCwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhc2NhZGVDaGVja2VkTm9kZShyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKTogVHJlZU5vZGVbXSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZXM6IFRyZWVOb2RlW10gPSBbXTtcclxuICAgICAgICBpZiAocm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgfHwgcm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCBub2RlcykpIHtcclxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkJHkuIvnuqfogZTpgInkuK1cclxuICAgICAqIEBwYXJhbSBub2RlIOW9k+WJjeiKgueCuVxyXG4gICAgICogQHBhcmFtIGNoZWNrZWQg6YCJ5Lit54q25oCBXHJcbiAgICAgKiDov5Tlm57lj5flvbHlk43nmoTooYxcclxuICAgICAqL1xyXG4gICAgcHJvcGFnYXRlU2VsZWN0aW9uRG93bihyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZURvd24gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuICYmIHJvd05vZGUubm9kZS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmZvckVhY2goKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJuID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKChyb3c6IFJvd05vZGUpID0+IHJvdy5pZCA9PT0gdi5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChybiAmJiBybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBybi5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJuKTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVzLmNvbmNhdCh0aGlzLnByb3BhZ2F0ZVNlbGVjdGlvbkRvd24ocm4sIGNoZWNrZWQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkJHkuIrnuqfogZTpgInkuK1cclxuICAgICAqL1xyXG4gICAgcHJvcGFnYXRlU2VsZWN0aW9uVXAocm93Tm9kZTogUm93Tm9kZSwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocm93Tm9kZS5wYXJlbnRzKTtcclxuICAgICAgICBpZiAodGhpcy5jYXNjYWRlQ2hlY2sgJiYgdGhpcy5jYXNjYWRlVXAgJiYgcm93Tm9kZS5ub2RlLnBhcmVudCkge1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5wYXJlbnRzICYmIHJvd05vZGUucGFyZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5wYXJlbnRzLmZvckVhY2goKG4sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBybiA9IHRoaXMuZmluZFJvd05vZGUobik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJuICYmIHJuLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBybi5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkTm9kZXMgPSB0aGlzLmNhc2NhZGVDaGVja2VkTm9kZShybiwgY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2VkTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKGNoZWNrZWROb2Rlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm5zLnB1c2gocm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJucy5yZXZlcnNlKCkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5pu05paw5YWo6YCJY2hlY2tib3gg55qE54q25oCBICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuaXNJbmRldGVybWluYXRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrQWxsICYmICF0aGlzLnNpbmdsZVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlckNoZWNrYm94Q21wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGtBbGwubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gc3RhdHVzID09PSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hlY2tlZCA9IHN0YXR1cyA9PT0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5pu05paw54i26IqC54K5Y2hlY2tib3gg6YCJ5Lit54q25oCBICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzKHJvd05vZGU6IFJvd05vZGUpIHtcclxuICAgICAgICBjb25zdCBwTm9kZXMgPSBbXTtcclxuICAgICAgICByb3dOb2RlLnBhcmVudHMuZm9yRWFjaChybmlkID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLmZpbmRSb3dOb2RlKHJuaWQpO1xyXG4gICAgICAgICAgICBpZiAocm4pIHtcclxuICAgICAgICAgICAgICAgIHBOb2Rlcy5wdXNoKHJuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwTm9kZXMucmV2ZXJzZSgpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94U3RhdHVzKHJuKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiDmm7TmlrBO5Liq54i26IqC54K55aSN6YCJ5qGG5Lit55qE6YCJ5Lit54q25oCBICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVBhcmVudHNDaGVja1N0YXR1cyhwYXJlbnRJZHM6IGFueSkge1xyXG4gICAgICAgIGxldCBwaWRzID0gW107XHJcbiAgICAgICAgcGFyZW50SWRzLmZvckVhY2goKGlkczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHBpZHMgPSBbLi4ucGlkcywgLi4uaWRzXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGlkcyA9IEFycmF5LmZyb20obmV3IFNldChwaWRzKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBSb3dOb2RlcyA9IHRoaXMuZmluZFJvd05vZGVzKHBpZHMpO1xyXG5cclxuICAgICAgICBwUm93Tm9kZXMuc29ydCgociwgbikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbi5sZXZlbCAtIHIubGV2ZWw7XHJcbiAgICAgICAgfSkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0dXMocm4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwUm93Tm9kZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmm7TmlrDoioLngrnkuK1jaGVja2JveOeahOeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveFN0YXR1cyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5pc0luZGV0ZXJtaW5hdGUocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIHJvd05vZGUubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaW5kZXRlcm1pbmF0ZSA9IHN0YXR1cyA9PT0gMjtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaMh+WumuiKgueCuWNoZWNrYm94IOeahOeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSBpc0luZGV0ZXJtaW5hdGUocm93Tm9kZT86IFJvd05vZGUpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuZ2V0Q2hlY2tib3hTdGF0dXMocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQgPSAhIXN0YXR1cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSAmJiByb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhyb3dOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+U5Zue54i257qn6IqC54K5Y2hlY2tib3gg55qE54q25oCB44CCMO+8muS4jemAieS4re+8jCAx77yaIOmAieS4re+8jCAy77ya5LiN56Gu5a6aXHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDniLbnuqfoioLngrnvvJvkuLrnqbrml7bov5Tlm57lhajpgIljaGVja2JveCDnmoTnirbmgIFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRDaGVja2JveFN0YXR1cyhyb3dOb2RlPzogUm93Tm9kZSkge1xyXG4gICAgICAgIGxldCB1bmNoZWNrZWRMZW5ndGggPSAwO1xyXG4gICAgICAgIGxldCBjaGVja2VkTGVuZ3RoID0gMDtcclxuICAgICAgICBsZXQgbGVuID0gMDtcclxuICAgICAgICBsZXQgY2hpbGROb2RlcyA9IFtdO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSByb3dOb2RlLm5vZGUuY2hpbGRyZW4gfHwgW107XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKHJuID0+IHJuLmxldmVsID09PSAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGVuID0gY2hpbGROb2Rlcy5sZW5ndGg7XHJcbiAgICAgICAgY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICBsZXQgcm4gPSBuO1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcm4gPSB0aGlzLmZpbmRSb3dOb2RlKG4uZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm4gJiYgIXJuLmluZGV0ZXJtaW5hdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChybi5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkTGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuY2hlY2tlZExlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZsYWcgPSAwO1xyXG4gICAgICAgIGlmICh1bmNoZWNrZWRMZW5ndGggPT09IGxlbikge1xyXG4gICAgICAgICAgICBmbGFnID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tlZExlbmd0aCA9PT0gbGVuKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmxhZztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRJbmRleEluKG5vZGU6IFRyZWVOb2RlLCB0cmVlTm9kZXM6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAtMTtcclxuICAgICAgICBpZiAodHJlZU5vZGVzICYmIHRyZWVOb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5kZXggPSB0cmVlTm9kZXMuZmluZEluZGV4KCh2LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcXVhbHModiwgbm9kZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Zyo6YCJ5Lit55qE6ZuG5ZCI5Lit5p+l5om+5oyH5a6a6IqC54K555qE57Si5byVXHJcbiAgICAgKiBAcGFyYW0gbm9kZSDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgZmluZEluZGV4SW5DaGVja2Vkcyhub2RlOiBUcmVlTm9kZSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEluZGV4SW4obm9kZSwgdGhpcy5jaGVja2Vkcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjpgInkuK3nmoTpm4blkIjkuK3mn6Xmib7mjIflrproioLngrnnmoTntKLlvJVcclxuICAgICAqIEBwYXJhbSBub2RlIOagkeiKgueCuVxyXG4gICAgICovXHJcbiAgICBmaW5kSW5kZXhJblNlbGVjdGlvbihub2RlOiBUcmVlTm9kZSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEluZGV4SW4obm9kZSwgdGhpcy5zZWxlY3Rpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5a+55q+U5Lik5Liq6IqC54K55piv5ZCm5ZCM5LiA5Liq6IqC54K5ICovXHJcbiAgICBlcXVhbHModGFyZ2V0OiBUcmVlTm9kZSwgc291cmNlOiBUcmVlTm9kZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXQuZGF0YVt0aGlzLmlkRmllbGRdID09PSBzb3VyY2UuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bGV5byA5omA5pyJ6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDlsZXlvIDmraToioLngrnkuIvnmoTmiYDmnInoioLngrnvvJvlpoLmnpzkuLrnqbrvvIzliJnlsZXlvIDmiYDmnInoioLngrlcclxuICAgICAqIEBwYXJhbSBkZWVwIOiuvue9ruS4unRydWUg5pe277yM5b2T5YmN6IqC54K55LiL55qE5omA5pyJ5a2Q6IqC54K55YWo6YOo5bGV5byAXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZUV4cGFuZCh0cmVlTm9kZT86IFRyZWVOb2RlLCBkZWVwID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodHJlZU5vZGUpIHtcclxuICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSAhdHJlZU5vZGUuZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSh0cmVlTm9kZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVOb2RlLmNoaWxkcmVuICYmIHRyZWVOb2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0cmVlTm9kZS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmQuZW1pdCh0cmVlTm9kZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlLmVtaXQodHJlZU5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVlcCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVOb2RlLmNoaWxkcmVuICYmIHRyZWVOb2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVOb2RlLmNoaWxkcmVuLmZvckVhY2goKHJvdywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuZChyb3csIGRlZXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVFeHBhbmQocm93KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVWaXNpYmxlKHRyZWVOb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKHRyZWVOb2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmlkID0gcm93Tm9kZS5pZDtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIocm4gPT4gcm4ucGFyZW50cy5pbmRleE9mKHJpZCkgPiAtMSkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByblBhcmVudCA9IHRoaXMuZmluZFJvd05vZGUocm4ucGFyZW50LmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm5QYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBybi52aXNpYmxlID0gcm5QYXJlbnQudmlzaWJsZSAmJiBybi5wYXJlbnQuZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJuLnZpc2libGUgPSB0cmVlTm9kZS5leHBhbmRlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsZXlvIDmjIflrproioLngrkgKi9cclxuICAgIGV4cGFuZE5vZGUoaWQ6IHN0cmluZywgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmV4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZShyb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd05vZGUubm9kZS5jaGlsZHJlbiAmJiByb3dOb2RlLm5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kLmVtaXQocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvblxcJ3QgZmluZCB0cmVlIG5vZGUgd2lkaCBpZDonICsgaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUEFSQU0gaWQgaXMgbnVsbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5bGV5byA5omA5pyJ6IqC54K5ICovXHJcbiAgICBleHBhbmRBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgcm93Lm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3cudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZXMuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZE5vZGVzKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgLy8gY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmdldFJvb3QoaWQpO1xyXG4gICAgICAgIC8vIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHRyZWVOb2RlID0gcm93Tm9kZS5ub2RlO1xyXG4gICAgICAgIC8vICAgICB0cmVlTm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIHJvd05vZGUudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHBhcmVudHMgPSByb3dOb2RlLnBhcmVudHM7XHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihuID0+IG4ucGFyZW50cy5pbmRleE9mKHJvb3ROb2RlLmlkKSA+IC0xKS5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHBhcmVudHMuaW5kZXhPZihyLmlkKSA+IC0xKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgICAgICAgICByLm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWxleW8gOaMh+WumuiKgueCueS4i+eahOaJgOacieiKgueCuSAqL1xyXG4gICAgZXhwYW5kQWxsTm9kZXNCeShyb3dOb2RlOiBhbnkpIHtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0cmVlTm9kZSA9IHJvd05vZGUubm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3dOb2RlLnZpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIobiA9PiBuLnBhcmVudHMuaW5kZXhPZihyb3dOb2RlLmlkKSA+IC0xKS5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHIubm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmipjlj6DmjIflrproioLngrkgKi9cclxuICAgIGNvbGxhcHNlTm9kZShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUubm9kZS5leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlLmVtaXQocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvblxcJ3QgZmluZCB0cmVlIG5vZGUgd2lkaCBpZDonICsgaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUEFSQU0gaWQgaXMgbnVsbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmipjlj6DmiYDmnInoioLngrkgKi9cclxuICAgIGNvbGxhcHNlQWxsKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMgPSB0aGlzLnN0YXRlLnJvd05vZGVzLm1hcCgocm93OiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJvdy5ub2RlLmV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJvdy52aXNpYmxlID0gIXJvdy5wYXJlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2Rlcy5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250YWluZXJPZmZzZXQoKSB7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXHJcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemVCZWdpbihldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckxlZnQgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0Q29udGFpbmVyT2Zmc2V0KCkubGVmdCk7XHJcbiAgICAgICAgdGhpcy5sYXN0UmVzaXplckhlbHBlclggPSAoZXZlbnQucGFnZVggLSBjb250YWluZXJMZWZ0ICsgdGhpcy5jb250YWluZXJFbGVtZW50LnNjcm9sbExlZnQpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemUoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNpemFibGVDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckxlZnQgPSB0aGlzLmdldENvbnRhaW5lck9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5jb250YWluZXJFbGVtZW50LCAndWktdW5zZWxlY3RhYmxlLXRleHQnKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRhaW5lckVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAwICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gKGV2ZW50LnBhZ2VYIC0gY29udGFpbmVyTGVmdCkgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2x1bW5SZXNpemVFbmQoZXZlbnQ6IGFueSwgY29sdW1uOiBhbnkpIHtcclxuICAgICAgICAvLyDlgY/np7vph49cclxuICAgICAgICBjb25zdCBkZWx0YSA9IHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQub2Zmc2V0TGVmdCAtIHRoaXMubGFzdFJlc2l6ZXJIZWxwZXJYO1xyXG4gICAgICAgIC8vIOWIl+WuvVxyXG4gICAgICAgIGNvbnN0IGNvbHVtbldpZHRoID0gY29sdW1uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOaWsOWuveW6plxyXG4gICAgICAgIGNvbnN0IG5ld0NvbHVtbldpZHRoID0gY29sdW1uV2lkdGggKyBkZWx0YTtcclxuICAgICAgICAvLyDmnIDlsI/lrr3luqZcclxuICAgICAgICBjb25zdCBtaW5XaWR0aCA9IGNvbHVtbi5zdHlsZS5taW5XaWR0aCB8fCAxNTtcclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGNvbnN0IHJlc2l6ZUNvbHVtbkluZGV4ID0gdGhpcy5jb2x1bW5zLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGNvbHVtbi5pZCk7XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudCwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleF0ud2lkdGggPSBuZXdDb2x1bW5XaWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zb3J0Q29sdW1uc0J5Rml4ZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlV2lkdGgodGhpcy5hbGxDb2x1bW5zV2lkdGgoKSk7XHJcblxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgY3NzLlxyXG4gICAgICAgICAgICBjb25zdCBfY29sSW5mbyA9IHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleF07XHJcbiAgICAgICAgICAgIGlmIChfY29sSW5mbykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSB0aGlzLmNvbHVtbkNzc05hbWUoX2NvbEluZm8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVjc3MgPSBydWxlTmFtZSArICd7d2lkdGg6JyArIG5ld0NvbHVtbldpZHRoICsgJ3B4fSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKFtzdHlsZWNzc10sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV4dENvbHVtbiA9IHRoaXMuY29sdW1uc1tyZXNpemVDb2x1bW5JbmRleCArIDFdO1xyXG4gICAgICAgICAgICBpZiAobmV4dENvbHVtbiAmJiBuZXh0Q29sdW1uLmZpeGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBydWxlTmFtZSA9IHRoaXMuY29sdW1uQ3NzTmFtZShuZXh0Q29sdW1uKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlY3NzID0gcnVsZU5hbWUgKyAneycgKyBuZXh0Q29sdW1uLmZpeGVkICsgJzonICsgbmV4dENvbHVtbltuZXh0Q29sdW1uLmZpeGVkXSArICdweH0nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhbc3R5bGVjc3NdLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG5ld0NvbHVtbldpZHRoID4gbWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0Q29sdW1uID0gY29sdW1uLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgICAgIHdoaWxlICghbmV4dENvbHVtbi5vZmZzZXRQYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Q29sdW1uID0gbmV4dENvbHVtbi5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRDb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sdW1uV2lkdGggPSBuZXh0Q29sdW1uLm9mZnNldFdpZHRoIC0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbHVtbk1pbldpZHRoID0gbmV4dENvbHVtbi5zdHlsZS5taW5XaWR0aCB8fCAxNTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0NvbHVtbldpZHRoID4gMTUgJiYgbmV4dENvbHVtbldpZHRoID4gbmV4dENvbHVtbk1pbldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5oZWFkZXJUYWJsZS5uYXRpdmVFbGVtZW50LCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIG5leHRDb2x1bW5XaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudCwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBuZXh0Q29sdW1uV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZXNpemVySGVscGVyVkMubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbGVtZW50LCAndWktdW5zZWxlY3RhYmxlLXRleHQnKTtcclxuICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVDb2xHcm91cCh0YWJsZSwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBuZXh0Q29sdW1uV2lkdGg/OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGFibGUpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sR3JvdXAgPSB0YWJsZS5jaGlsZHJlblswXS5ub2RlTmFtZSA9PT0gJ0NPTEdST1VQJyA/IHRhYmxlLmNoaWxkcmVuWzBdIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2xHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sID0gY29sR3JvdXAuY2hpbGRyZW5bcmVzaXplQ29sdW1uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENvbCA9IGNvbC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICBjb2wuc3R5bGUud2lkdGggPSBuZXdDb2x1bW5XaWR0aCArICdweCc7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDb2x1bW5XaWR0aCAmJiB0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENvbC5zdHlsZS53aWR0aCA9IG5leHRDb2x1bW5XaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTY3JvbGxhYmxlIHRhYmxlcyByZXF1aXJlIGEgY29sZ3JvdXAgdG8gc3VwcG9ydCByZXNpemFibGUgY29sdW1ucycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2VhcmNoKCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoLmVtaXQodGhpcy5zZWFyY2hEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBpbnNlcnQobm9kZTogVHJlZU5vZGUsIHBhcmVudD86IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2gobm9kZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV4cGFuZE5vZGUocGFyZW50LmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kTmV3LmVtaXQoeyBwYXJlbnQgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLnB1c2gobm9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZChkYXRhOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwYXJlbnQ/OiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGFbdGhpcy5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc2VydCh7IGRhdGEsIGlkOiBkYXRhW3RoaXMuaWRGaWVsZF0gfSwgcGFyZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BsZWFzZSBzZXQgaWQgdmFsdWUuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW1pdEFwcGVuZE5ldyhwYXJlbnQ6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZVBvc1kgPSB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZShub2RlUG9zWSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZENoaWxkcmVuKG5vZGVzOiBUcmVlTm9kZVtdLCBwYXJlbnQ6IFRyZWVOb2RlLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2goLi4ubm9kZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0QXBwZW5kTmV3KHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kTmV3LmVtaXQoeyBwYXJlbnQgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+acquaJvuWIsOeItue6p+iKgueCuScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCfmt7vliqDlrZDoioLngrnnmoTmlbDmja7kuLrnqbonKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZENoaWxkcmVuKG5vZGVzOiBUcmVlTm9kZVtdLCBwYXJlbnQ6IFRyZWVOb2RlLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuID0gbm9kZXMgfHwgW107XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEFwcGVuZE5ldyhwYXJlbnQpO1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROZXcuZW1pdCh7IHBhcmVudCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUobm9kZUlkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAobm9kZUlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKG5vZGVJZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUodGhpcy5zdGF0ZS5yb3dOb2RlcywgKG4pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gbi5pZCA9PT0gbm9kZUlkO1xyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZSA9PT0gbm9kZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHJvd05vZGUucGFyZW50LmNoaWxkcmVuLCAobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG5vZGVJZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHRoaXMuc3RhdGUucm93Tm9kZXMsIChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmlkID09PSBub2RlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIobiA9PiBuLmRhdGFbdGhpcy5pZEZpZWxkXSAhPT0gbm9kZUlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VyaWFsaXplZFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uUmVtb3ZlKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVkLmVtaXQocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKG5vZGVJZDogc3RyaW5nLCBkYXRhOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcbiAgICAgICAgaWYgKG5vZGVJZCAmJiBkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKG5vZGVJZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGUuZGF0YSA9IGV4dGVuZChyb3dOb2RlLm5vZGUuZGF0YSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uVXBkYXRlKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkLmVtaXQocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTY29ybGxCb2R5SGVpZ2h0KCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93RmlsdGVyQmFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIDQ2O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maXhlZEhlYWRlciAmJiB0aGlzLnNob3dIZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyQm94ICYmICh0aGlzLmhlYWRlcldyYXAgfHwgdGhpcy51c2VHcm91cEhlYWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhoID0gdGhpcy5oZWFkZXJCb3gubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgPSB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLSBoaDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIHRoaXMuaGVhZGVySGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIHRoaXMucGFnZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemUoc2l6ZT86IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSkge1xyXG4gICAgICAgIGlmIChzaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBzaXplLndpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHNpemUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFNjb3JsbEJvZHlIZWlnaHQoKTtcclxuICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBpZiAodGhpcy5wc1JlZikge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhKGRhdGE6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGVtcHR5KCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQWxsKGRldGVjdENoYW5nZXMgPSB0cnVlKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihybiA9PiBybi5pbmRldGVybWluYXRlKS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgcm4uaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJuKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgcm93LmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByb3cuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByb3cuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy52aXJ0dWFsaXplZCAmJiB0aGlzLmZpeGVkSGVhZGVyKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gdGhpcy5zZXJpYWxpemVkVmFsdWUubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIHJvdy5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyAgICAgICAgIHJvdy5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgICAgICByb3cuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGVja0FsbCAmJiB0aGlzLmhlYWRlckNoZWNrYm94Q21wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hrQWxsLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZGV0ZWN0Q2hhbmdlcygpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXN0cmluZy1saXRlcmFsXHJcbiAgICAgICAgaWYgKCF0aGlzLmNkUmVmWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJDaGVja2VkcygpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrZWRzICYmIHRoaXMuY2hlY2tlZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZFJvd05vZGVzKHRoaXMuY2hlY2tlZHMubWFwKHRuID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSkpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tBbGwgJiYgdGhpcy5oZWFkZXJDaGVja2JveENtcCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoa0FsbC5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclNlbGVjdGlvbnMoKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZUlkcyA9IHRoaXMuc2VsZWN0aW9ucy5tYXAodG4gPT4gdG4uZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIG4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5maW5kUm93Tm9kZXMobm9kZUlkcykuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBybi5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHVuZGVmaW5lZDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKiDpgInkuK3nrKwx5Liq5Y+v5Lul6YCJ5Lit55qE6IqC54K5ICovXHJcbiAgICBzZWxlY3RGaXJzdE5vZGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucm93Tm9kZXMgJiYgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RDYW5TZWxlY3ROb2RlID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5ub2RlLnNlbGVjdGFibGUpO1xyXG4gICAgICAgICAgICBpZiAoZmlyc3RDYW5TZWxlY3ROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGUoZmlyc3RDYW5TZWxlY3ROb2RlLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNjcm9sbFRvQ3VycmVudFJvdyhpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgdHJJZCA9ICdyb3dub2RlLScgKyBpZDtcclxuICAgICAgICAvLyBjb25zdCB0ckVsZSA9ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRySWQpO1xyXG4gICAgICAgIGNvbnN0IHRyRWxlID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdHJJZCkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodHJJZCk7XHJcbiAgICAgICAgaWYgKHRyRWxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0VsZW1lbnRJblZpZXdwb3J0KHRyRWxlKSkge1xyXG4gICAgICAgICAgICAgICAgdHJFbGUuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnLCBpbmxpbmU6ICduZWFyZXN0JyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNFbGVtZW50SW5WaWV3cG9ydChlbCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdHJlZXRhYmxlLWJvZHknKTtcclxuICAgICAgICBpZiAoIWNvbnRhaW5lckVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3Qgdmlld1BvcnRIZWlnaHQgPSBjb250YWluZXIuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IG9mZnNldFRvcCA9IGVsLm9mZnNldFRvcDtcclxuICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgIGNvbnN0IHRvcCA9IG9mZnNldFRvcCAtIHNjcm9sbFRvcDtcclxuICAgICAgICByZXR1cm4gIHRvcCA+PSAwICYmIHRvcCA8PSB2aWV3UG9ydEhlaWdodDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2Nyb2xsVG9DdXJyZW50Tm9kZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuc2VsZWN0ZWRSb3cuaWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KGlkKTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKHBpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKG4gPT4gbi52aXNpYmxlKS5maW5kSW5kZXgobiA9PiBuLmlkID09PSBwaWQpICogMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9ZKHRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShwaWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9wID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIobiA9PiBuLnZpc2libGUpLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGlkKSAqIDMwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9ZKHRvcCAtIDMwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6YCJ5Lit5oyH5a6aSUQg55qE6IqC54K5LFxyXG4gICAgICogZGV0ZWN0Q2hhbmdlczog6Kem5Y+R6ISP5YC85qOA5p+l77yM6buY6K6k5Li6IHRydWVcclxuICAgICAqIGdvdG9jdXJyZW50OiDkvb/nlKjpgInkuK3oioLngrnlj6/op4HvvIzpu5jorqTkuLogdHJ1ZVxyXG4gICAgICovXHJcbiAgICBzZWxlY3ROb2RlKGlkOiBzdHJpbmcsIGRldGVjdENoYW5nZXMgPSB0cnVlLCBnb3RvY3VycmVudCA9IHRydWUpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICBjb25zdCBlbWl0ID0gIXRoaXMuc2VsZWN0ZWRSb3cgfHwgKHRoaXMuc2VsZWN0ZWRSb3cgJiYgaWQgIT09IHRoaXMuc2VsZWN0ZWRSb3cuaWQpO1xyXG5cclxuICAgICAgICBpZiAobm9kZSAmJiBlbWl0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCB8fCB0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW25vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICBub2RlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tPblNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzID0gW25vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMobm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBub2RlLm5vZGU7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZUNoYW5nZWRTdWJqZWN0Lm5leHQoaWQpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVTZWxlY3RlZC5lbWl0KHsgbm9kZTogbm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnb3RvY3VycmVudCAmJiB0aGlzLmZpeGVkSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudE5vZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYOacquaJvuWIsElE5Li6JHtpZH3nmoTmlbDmja7vvIHvvIFgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y+W5raI6YCJ5LitICovXHJcbiAgICB1blNlbGVjdE5vZGUoaWQ6IHN0cmluZywgZGV0ZWN0Q2hhbmdlcyA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7IG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGDmnKrmib7liLBJROS4uiR7aWR955qE5pWw5o2u77yB77yBYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDpgInkuK3lpJrooYzmlbDmja4gKi9cclxuICAgIHNlbGVjdE5vZGVzKGlkczogc3RyaW5nW10sIGRldGVjdENoYW5nZXMgPSB0cnVlLCBlbWl0Tm9kZVNlbGVjdGVkID0gZmFsc2UpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuZmluZFJvd05vZGVzKGlkcykubWFwKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJuKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBybi5ub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGlvbnNdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGVDaGFuZ2VkU3ViamVjdC5uZXh0KGlkcy5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICBpZiAoZW1pdE5vZGVTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdCh7IG5vZGU6IG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y+W5raI6YCJ5LitICovXHJcbiAgICB1blNlbGVjdE5vZGVzKGlkcz86IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd25vZGVzID0gdGhpcy5maW5kUm93Tm9kZXMoaWRzKTtcclxuICAgICAgICAgICAgaWYgKHJvd25vZGVzICYmIHJvd25vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcm93bm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhybik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGlvbnNdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgbm9kZTogcm93bm9kZXMubWFwKHIgPT4gci5ub2RlKSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpkqnpgInmjIflrprnmoToioLngrlcclxuICAgICAqIEBwYXJhbSB1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1czog5piv5ZCm5pu05paw54i257qn6IqC54K5Y2hlY2tib3gg54q25oCBLCDpu5jorqTkuLogdHJ1ZVxyXG4gICAgICogQHBhcmFtIGRldGVjdENoYW5nZXMg6Kem5Y+R5Y+Y5pu05qOA5rWL44CC6buY6K6k5Li6IHRydWVcclxuICAgICAqL1xyXG4gICAgY2hlY2tlZE5vZGUoaWQ6IHN0cmluZywgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgPSB0cnVlLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlTXVsdGlTZWxlY3QoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNDaGVja2VkKG5vZGUubm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHMgfHwgW10sIG5vZGUubm9kZV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgJiYgdGhpcy5jYXNjYWRlQ2hlY2sgJiYgdGhpcy5jYXNjYWRlVXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogbnVsbCwgbm9kZTogbm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg5pyq5om+5YiwSUTkuLoke2lkfeeahOaVsOaNruOAgmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tlZE5vZGUoaWQ6IHN0cmluZywgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVNdWx0aVNlbGVjdCgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd25vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd25vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd25vZGUuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd25vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyAmJiB0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMocm93bm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG5vZGU6IHJvd25vZGUsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDmnKrmib7liLBJROS4uiR7aWR955qE5pWw5o2u44CCYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tlZE5vZGVzKGlkczogc3RyaW5nW10sIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBwYXJlbnRJRFMgPSBbXTtcclxuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuZmluZFJvd05vZGVzKGlkcykubWFwKHJuID0+IHtcclxuICAgICAgICAgICAgcGFyZW50SURTLnB1c2gocm4ucGFyZW50cyk7XHJcbiAgICAgICAgICAgIHJuLmlzQ2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm4pO1xyXG4gICAgICAgICAgICByZXR1cm4gcm4ubm9kZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHNdO1xyXG4gICAgICAgIGlmICh0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAvLyDmm7TmlrDniLboioLngrnlpI3moYbnmoTpgInkuK3nirbmgIFcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJlbnRzQ2hlY2tTdGF0dXMocGFyZW50SURTKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5om56YeP6YCJ5Lit6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gaWRzOiBpZCDpm4blkIhcclxuICAgICAqIEBwYXJhbSBkZXRlY3RDaGFuZ2VzOiBib29sZWFuICDpu5jorqTkuLogdHJ1ZSAs5piv5ZCm6Kem5Y+R5Y+Y5pu05qOA5rWLXHJcbiAgICAgKiBjbG9zZUNhc2NhZGU6ICDmiafooYzlj5bmtojpkqnpgInml7bmmK/lkKblhbPpl63nuqfogZTlip/og73jgILpu5jorqTkuLogZmFsc2VcclxuICAgICAqICAgICAg6K6+5Li6dHJ1ZeaXtu+8jOmSqemAieWwhuemgeeUqOe6p+iBlOeahOWKn+iDve+8jOS7heWkhOeQhuW9k+WJjeiKgueCueeahOmAieS4reeKtuaAgeOAguaJp+ihjOWujOavleWQju+8jOaBouWkjeWOn+WFiOeahOe6p+iBlOmAiemhueOAglxyXG4gICAgICovXHJcbiAgICBjaGVja2VkTm9kZXMoaWRzOiBhbnlbXSwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUsIGVtaXQgPSB0cnVlLCBjbG9zZUNhc2NhZGU/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVNdWx0aVNlbGVjdCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jYXNjYWRlID0gdGhpcy5jYXNjYWRlQ2hlY2s7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VDYXNjYWRlICYmIF9jYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuX2NoZWNrZWROb2RlcyhpZHMsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjbG9zZUNhc2NhZGUgJiYgX2Nhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmgaLlpI3nuqfogZRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY2hlY2tlZHMgPSBub2RlcztcclxuICAgICAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBudWxsLCBub2RlOiBub2Rlcywgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5raI6YCJ5Lit55qE6IqC54K5LlxyXG4gICAgICogaWRzOiDmoIfor4ZJZCDmlbDnu4RcclxuICAgICAqIGNsb3NlQ2FzY2FkZTog5omn6KGM5Y+W5raI6ZKp6YCJ5pe25piv5ZCm5YWz6Zet57qn6IGU5Yqf6IO944CC6buY6K6k5Li6IGZhbHNlXHJcbiAgICAgKiAgICAg6K6+5Li6dHJ1ZeaXtu+8jOmSqemAieWwhuemgeeUqOe6p+iBlOeahOWKn+iDve+8jOS7heWkhOeQhuW9k+WJjeiKgueCueeahOmAieS4reeKtuaAgeOAguaJp+ihjOWujOavleWQju+8jOaBouWkjeWOn+WFiOeahOe6p+iBlOmAiemhueOAglxyXG4gICAgICogZW1pdDog5piv5ZCm6Kem5Y+R5Y+W5raI5Yu+6YCJ5LqL5Lu244CC6buY6K6k5Li6IHRydWVcclxuICAgICAqL1xyXG4gICAgdW5DaGVja2VkTm9kZXMoaWRzOiBzdHJpbmdbXSwgY2xvc2VDYXNjYWRlPzogYm9vbGVhbiwgZW1pdCA9IHRydWUpIHtcclxuXHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9jYXNjYWRlID0gdGhpcy5jYXNjYWRlQ2hlY2s7XHJcbiAgICAgICAgICAgIGlmIChjbG9zZUNhc2NhZGUgJiYgX2Nhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FzY2FkZUNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5fY2hlY2tlZE5vZGVzKGlkcywgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsb3NlQ2FzY2FkZSAmJiBfY2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5jaGVja2VkcyA9IG5vZGVzO1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5DaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBudWxsLCBub2RlOiBub2Rlcywgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaW5kUm93Tm9kZShpZDogc3RyaW5nKTogUm93Tm9kZSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnJvd05vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsIblnKggdjAuMi54IOW6n+W8g++8m+ivt+S9v+eUqCBmaW5kUm93Tm9kZSDmlrnms5UgKi9cclxuICAgIGZpbmROb2RlKGlkOiBzdHJpbmcpOiBSb3dOb2RlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lvZPliY3oioLngrlJRO+8jOiOt+WPlumhtue6p+eItuiKgueCuVxyXG4gICAgICogQHBhcmFtIGlkIOW9k+WJjeiKgueCuUlEXHJcbiAgICAgKiBAcmV0dXJucyDov5Tlm57pobbnuqfoioLngrlcclxuICAgICAqL1xyXG4gICAgZ2V0Um9vdChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZFJvd05vZGUocm93Tm9kZS5wYXJlbnRzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcm93Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZpbmRSb3dOb2RlcyhpZHM6IHN0cmluZ1tdKTogUm93Tm9kZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIocm4gPT4gaWRzLmluZGV4T2Yocm4uaWQpID4gLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQWxsTm9kZXMoYXJncz86IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGVzID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIobiA9PiAobi5ub2RlLnNlbGVjdGFibGUgfHwgbi5ub2RlLnNlbGVjdGFibGUgPT09IHVuZGVmaW5lZCkpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tlZHMgPSByb3dOb2Rlcy5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgIG4uaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKG4pO1xyXG4gICAgICAgICAgICBpZiAobi5ub2RlLnNlbGVjdGFibGUgfHwgbi5ub2RlLnNlbGVjdGFibGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbi5pc0NoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuLm5vZGU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gcm93Tm9kZXMubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG4ubm9kZS5zZWxlY3RhYmxlIHx8IG4ubm9kZS5zZWxlY3RhYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ubm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoZWNrQWxsLmVtaXQoYXJncyk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5DaGVja0FsbE5vZGVzKGFyZ3M/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgdGhpcy51bkNoZWNrQWxsLmVtaXQoYXJncyk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0VuYWJsZU11bHRpU2VsZWN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+acquWQr+eUqOWkmumAie+8gScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDku47mlbDmja7kuK3ojrflj5boioLngrnlm77moIdcclxuICAgIC8vIGljb25GaWVsZCDkuLogb2JqZWN0XHJcbiAgICAvLyAgICAgIOWmguaenCDlsZXlvIDlm77moIfkuLrnqbrvvIzmipjlj6Dlm77moIfkuI3kuLrnqbrvvIzmiJblj43kuYvvvIzliJnlsZXlvIDkuI7mipjlj6Dlm77moIfkv53mjIHkuIDoh7PvvJtcclxuICAgIC8vICAgICAg5aaC5p6cIOWPtuWtkOWbvuagh+S4uuepuu+8jOWImeS9v+eUqOe7hOS7tum7mOiupOeahOWbvuagh1xyXG4gICAgLy8gaWNvbkZpZWxkIOS4uiDlrZfnrKbkuLLvvJog5YiZ5Y+25a2QIOWxleW8gCDmipjlj6Ag5Zu+5qCH5L2/55So5ZCM5LiA5Liq44CCIOWmguaenOS4uuepuu+8jCDliJnkvb/nlKjnu4Tku7bpu5jorqTlm77moIdcclxuICAgIHByaXZhdGUgZ2V0Tm9kZUljb25Gcm9tRGF0YSh0bjogVHJlZU5vZGUpIHtcclxuICAgICAgICBsZXQgbGVhZiA9IG51bGw7XHJcbiAgICAgICAgbGV0IGV4cGFuZCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGNvbGxhcHNlID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy51c2VJY29uRnJvbURhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaWNvbkZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgX2ljb25GaWVsZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmljb25GaWVsZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBfaWNvbkZpZWxkID0gdGhpcy5pY29uRmllbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRuW19pY29uRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYWYgPSB0bltfaWNvbkZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmID0gdGhpcy51dGlscy5nZXRWYWx1ZShfaWNvbkZpZWxkLCB0bi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IGNvbGxhcHNlID0gbGVhZjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaWNvbkZpZWxkLmxlYWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZiA9IHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy5pY29uRmllbGQubGVhZiwgdG4uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmljb25GaWVsZC5leHBhbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLmljb25GaWVsZC5leHBhbmQsIHRuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pY29uRmllbGQuY29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2UgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuaWNvbkZpZWxkLmNvbGxhcHNlLCB0bi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmQgJiYgIWNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlID0gZXhwYW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHBhbmQgJiYgY29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gY29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVhZiwgZXhwYW5kLCBjb2xsYXBzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJlZUljb24odHJlZU5vZGU6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0cmVlTm9kZTtcclxuICAgICAgICBsZXQgbGVhZkljb24gPSB0aGlzLmxlYWZJY29uIHx8ICdmaWxlJztcclxuICAgICAgICBsZXQgZXhwYW5kSWNvbiA9IHRoaXMuZXhwYW5kSWNvbiB8fCAnZm9sZGVyLW9wZW4nO1xyXG4gICAgICAgIGxldCBjb2xsYXBzZUljb24gPSB0aGlzLmNvbGxhcHNlSWNvbiB8fCAnZm9sZGVyJztcclxuICAgICAgICBjb25zdCBsb2FkaW5nID0gJ3RyZWVub2RlLWxvYWRpbmcnO1xyXG5cclxuICAgICAgICBpZiAodG5bJ3Nob3dMb2FkaW5nJ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgW2xvYWRpbmddOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG4uaWNvbikge1xyXG4gICAgICAgICAgICBsZWFmSWNvbiA9IHRuLmljb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG4uZXhwYW5kZWRJY29uKSB7XHJcbiAgICAgICAgICAgIGV4cGFuZEljb24gPSB0bi5leHBhbmRlZEljb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG4uY29sbGFwc2VkSWNvbikge1xyXG4gICAgICAgICAgICBjb2xsYXBzZUljb24gPSB0bi5jb2xsYXBzZWRJY29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlSWNvbkZyb21EYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbGVhZiwgZXhwYW5kLCBjb2xsYXBzZSB9ID0gdGhpcy5nZXROb2RlSWNvbkZyb21EYXRhKHRyZWVOb2RlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2hlbkRhdGFJY29uRW1wdHlVc2VEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVhZikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYWZJY29uID0gbGVhZjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHBhbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBhbmRJY29uID0gZXhwYW5kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VJY29uID0gY29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZWFmSWNvbiA9IGxlYWYgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBleHBhbmRJY29uID0gZXhwYW5kIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgY29sbGFwc2VJY29uID0gY29sbGFwc2UgfHwgJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBjb25zdCBjb2xsYXBzZWRFeHByZXNzaW9uID0gKCF0bi5sZWFmIHx8ICEhKHRuLmNoaWxkcmVuICYmIHRuLmNoaWxkcmVuLmxlbmd0aCkpICYmICF0bi5leHBhbmRlZDtcclxuICAgICAgICBjb25zdCBleHBhbmRlZEV4cHJlc3Npb24gPSAhIXRuLmV4cGFuZGVkO1xyXG4gICAgICAgIGNvbnN0IGxlYWZFeHByZXNzaW9uID0gdG4ubGVhZiA9PT0gdW5kZWZpbmVkID8gKCF0bi5jaGlsZHJlbiB8fCAhdG4uY2hpbGRyZW4ubGVuZ3RoKSA6IHRuLmxlYWY7XHJcblxyXG4gICAgICAgIGNvbnN0IGljb25zID0ge307XHJcblxyXG4gICAgICAgIGlmIChsZWFmRXhwcmVzc2lvbiAmJiBsZWFmSWNvbikge1xyXG4gICAgICAgICAgICBpY29uc1tsZWFmSWNvbl0gPSBsZWFmRXhwcmVzc2lvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodG4uZXhwYW5kZWQgJiYgZXhwYW5kSWNvbikge1xyXG4gICAgICAgICAgICAgICAgaWNvbnNbZXhwYW5kSWNvbl0gPSBleHBhbmRlZEV4cHJlc3Npb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sbGFwc2VJY29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbY29sbGFwc2VJY29uXSA9IGNvbGxhcHNlZEV4cHJlc3Npb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25DbHMpIHtcclxuICAgICAgICAgICAgaWNvbnNbdGhpcy5pY29uQ2xzXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaWNvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wYXJlKGEsIGIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogKGEgPiBiID8gMSA6IC0xKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9zb3J0KHIxLCByMikge1xyXG4gICAgICAgIGxldCByID0gMDtcclxuICAgICAgICBjb25zdCBzb3J0RmllbGRzID0gdGhpcy5zb3J0TmFtZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IHRoaXMuc29ydE9yZGVyLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zb3J0TmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydEZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzbiA9IHNvcnRGaWVsZHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNvID0gb3JkZXJzW2ldO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmZpZWxkID09PSBzbik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvcmRlcmJ5ID0gY29sLnNvcnRlciB8fCB0aGlzLmNvbXBhcmU7XHJcbiAgICAgICAgICAgIGxldCB2MSA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoc24sIHIxLmRhdGEpO1xyXG4gICAgICAgICAgICBpZiAodjEgPT09IG51bGwgfHwgdjEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdjEgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdjIgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHNuLCByMi5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKHYyID09PSBudWxsIHx8IHYyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHYyID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgciA9IG9yZGVyYnkodjEsIHYyKTtcclxuICAgICAgICAgICAgaWYgKHIgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByICogKHNvID09PSAnYXNjJyA/IDEgOiAtMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcblxyXG4gICAgY2xpZW50U29ydCgpIHtcclxuICAgICAgICBjb25zdCBzb3J0ZWREYXRhID0gdGhpcy5kYXRhLnNvcnQodGhpcy5fc29ydC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc29ydENoaWxkTm9kZXMgPSAoY2hpbGROb2RlcykgPT4ge1xyXG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gY2hpbGROb2Rlcy5zb3J0KHRoaXMuX3NvcnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuLmNoaWxkcmVuICYmIG4uY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5jaGlsZHJlbiA9IG4uY2hpbGRyZW4uc29ydCh0aGlzLl9zb3J0LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRDaGlsZE5vZGVzKG4uY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkTm9kZXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc29ydGVkRGF0YS5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICBjLmNoaWxkcmVuID0gc29ydENoaWxkTm9kZXMoYy5jaGlsZHJlbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZERhdGEoc29ydGVkRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Tb3J0Q29sdW1uQ2xpY2soJGV2ZW50LCBjb2wpIHtcclxuICAgICAgICBpZiAoIWNvbC5zb3J0YWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNvcnROYW1lID0gdGhpcy5zb3J0TmFtZTtcclxuICAgICAgICBjb25zdCBzb3J0T3JkZXIgPSB0aGlzLnNvcnRPcmRlcjtcclxuICAgICAgICBsZXQgc29ydEZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGxldCBzb3J0T3JkZXJzID0gW107XHJcbiAgICAgICAgaWYgKHNvcnROYW1lKSB7XHJcbiAgICAgICAgICAgIHNvcnRGaWVsZHMgPSBzb3J0TmFtZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBzb3J0T3JkZXJzID0gc29ydE9yZGVyLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb2xPcmRlciA9IGNvbC5vcmRlciB8fCAnYXNjJztcclxuICAgICAgICBsZXQgbmV3T3JkZXIgPSBjb2xPcmRlcjtcclxuICAgICAgICBjb25zdCBpID0gc29ydEZpZWxkcy5maW5kSW5kZXgobiA9PiBuID09PSBjb2wuZmllbGQpO1xyXG4gICAgICAgIGlmIChpID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgX29yZGVyID0gc29ydE9yZGVyc1tpXSA9PT0gJ2FzYycgPyAnZGVzYycgOiAnYXNjJztcclxuICAgICAgICAgICAgbmV3T3JkZXIgPSBfb3JkZXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpU29ydCAmJiBuZXdPcmRlciA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgICAgIG5ld09yZGVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgc29ydEZpZWxkcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcnNbaV0gPSBfb3JkZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRzLnB1c2goY29sLmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcnMucHVzaChjb2xPcmRlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRzID0gW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzID0gW2NvbE9yZGVyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29sLm9yZGVyID0gbmV3T3JkZXI7XHJcblxyXG4gICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0RmllbGRzLmpvaW4oJywnKTtcclxuICAgICAgICB0aGlzLnNvcnRPcmRlciA9IHNvcnRPcmRlcnMuam9pbignLCcpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubXVsdGlTb3J0KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGaWVsZE9yZGVyID0gKGNvbHM6IFRyZWVUYWJsZUNvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbHMgfHwgIWNvbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29scy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGMub3JkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IHNvcnRGaWVsZHMuZmluZEluZGV4KGYgPT4gZiA9PT0gYy5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLm9yZGVyID0gc29ydE9yZGVyc1trXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkT3JkZXIodGhpcy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJlZm9yZVNvcnRDb2x1bW4odGhpcy5zb3J0TmFtZSwgdGhpcy5zb3J0T3JkZXIpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZVNvcnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudFNvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5Tb3J0ZWQuZW1pdCh7IHNvcnROYW1lOiB0aGlzLnNvcnROYW1lLCBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmn6Xor6Llt6XlhbfmnaHliY3nq6/lrZfnrKbmn6Xor6IgKi9cclxuICAgIGZpbmRLZXlXb3JkcygkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hWYWx1ZSA9ICRldmVudC52YWx1ZTtcclxuICAgICAgICBjb25zdCBmaWVsZCA9ICRldmVudC5maWVsZDtcclxuICAgICAgICB0aGlzLmZpbmRGaWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiBzZWFyY2hWYWx1ZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRWYWx1ZSA9IHNlYXJjaFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQbGVhc2Ugc2V0IGEgZmllbGQgZm9yIHRoZSBGaW5kRmllbGQgcHJvcGVydHkuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2VhcmNoSGFuZGxlLnNlYXJjaE9uQ2xpZW50KGZpZWxkLCBzZWFyY2hWYWx1ZSwgdGhpcy5zdGF0ZS5yb3dOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFJlc3VsdCA9IHJlc3VsdC5zb3J0KChhLCBiKSA9PiBhLmluZGV4ID09PSBiLmluZGV4ID8gMCA6IChhLmluZGV4ID4gYi5pbmRleCA/IDEgOiAtMSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3dJbmRleCA9IHJlc3VsdFswXS5pbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IHJlc3VsdC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuc2VhcmNoSGFuZGxlLmZpbmRQYXJlbnRzKHJlc3VsdCwgdGhpcy5zdGF0ZS5yb3dOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDE7XHJcbiAgICAgICAgICAgICAgICBbLi4ucGFyZW50cywgLi4ucmVzdWx0XS5mb3JFYWNoKChyOiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmROb2RlKHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5mb3JFYWNoKChyb3c6IFJvd05vZGUsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93LnZpc2libGUgJiYgZmlyc3RSb3dJbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gdGhpcy5yb3dIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh5IC0gMzApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaExpZ2h0S2V5d29yZHMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0RmluZFRleHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xvc2VGaW5kUGFuZWwoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93RmluZElucHV0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNldEZpbmRUZXh0KCk7XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWdoTGlnaHRLZXl3b3JkcygpIHtcclxuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsSGlnaExpZ2h0cyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLWhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxIaWdoTGlnaHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZmluZFJlc3VsdCA9IHRoaXMuZmluZFJlc3VsdC5jb25jYXQoQXJyYXkuZnJvbShhbGxIaWdoTGlnaHRzKSk7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmZpbmRSZXN1bHQgPSBBcnJheS5mcm9tKG5ldyBTZXQodGhpcy5maW5kUmVzdWx0KSk7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmZpbmRDb3VudCA9IGFsbEhpZ2hMaWdodHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGFsbEhpZ2hMaWdodHNbMF0sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0RmluZFRleHQoKSB7XHJcbiAgICAgICAgdGhpcy5maW5kVmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMDtcclxuICAgICAgICB0aGlzLmZpbmRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5maW5kUmVzdWx0ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEZpbmRWYWx1ZShzdGVwKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpbmRSZXN1bHQgfHwgIXRoaXMuZmluZFJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhbGxIaWdoTGlnaHRzID0gQXJyYXkuZnJvbSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaC1oaWdobGlnaHQnKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpbmRDdXJyZW50ID09PSB0aGlzLmZpbmRSZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzdGVwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gdGhpcy5maW5kQ3VycmVudCArIHN0ZXA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kQ3VycmVudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaGlnaGxpZ2h0LmFjdGl2ZScpO1xyXG5cclxuICAgICAgICBsZXQgX2luZGV4ID0gYWxsSGlnaExpZ2h0cy5pbmRleE9mKGFjdGl2ZSk7XHJcblxyXG4gICAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhhY3RpdmUsICdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcblxyXG4gICAgICAgICAgICBfaW5kZXggKz0gIXN0ZXAgPyAxIDogc3RlcDtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbGxIaWdoTGlnaHRzW19pbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoYWxsSGlnaExpZ2h0c1tfaW5kZXhdLCAnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5YWI5rua5Yqo5oyH5a6a5L2N572uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Um93ID0gdGhpcy5maW5kUmVzdWx0W3RoaXMuZmluZEN1cnJlbnQgLSAxXTtcclxuICAgICAgICAgICAgICAgIGxldCB5ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZm9yRWFjaCgocm93OiBSb3dOb2RlLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy52aXNpYmxlICYmIG5leHRSb3cuaW5kZXggPiBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ICs9IHRoaXMucm93SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBzUmVmICYmIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuc2Nyb2xsVG9ZKHkgLSAzMCwgMjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5V29yZHMgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaC1oaWdobGlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhrZXlXb3Jkc1swXSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFbDogYW55ID0gYWxsSGlnaExpZ2h0c1t0aGlzLmZpbmRDdXJyZW50IC0gMV07XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50RWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoY3VycmVudEVsLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNUb3AgPSBjdXJyZW50RWwuY2xvc2VzdCgndGQnKS5vZmZzZXRUb3AgLSAzMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1koc1RvcCwgMjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNjcm9sbFRvWSh5OiBudW1iZXIsIGFuaW1hdGlvbnMgPSAyMDApIHtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zY3JvbGxZID0geSB8fCAwO1xyXG4gICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh5LCBhbmltYXRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dPckhpZGVDb2x1bW4oZmllbGQ6IHN0cmluZyB8IHN0cmluZ1tdLCBpc0hpZGU6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuaW5kZXhPZihuLmZpZWxkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi52aXNpYmxlID0gIWlzSGlkZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQgPT09IG4uZmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLnZpc2libGUgPSAhaXNIaWRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Q29sdW1uKGZpZWxkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuc2hvd09ySGlkZUNvbHVtbihmaWVsZCwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDb2x1bW4oZmllbGQ6IHN0cmluZyB8IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5zaG93T3JIaWRlQ29sdW1uKGZpZWxkLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Q2hpbGRzTG9hZGluZyhwYXJlbnROb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IGNvbHNwYW4gPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi52aXNpYmxlICE9PSBmYWxzZSkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IFt0aGlzLmlkRmllbGRdOiAn5q2j5Zyo5Yqg6L295LitLi4uLicsIF9fY29sc3Bhbl9fOiBjb2xzcGFuIH07XHJcbiAgICAgICAgdGhpcy5sb2FkQ2hpbGRyZW4oW3sgZGF0YSwgX19jaGlsZHNfbG9hZGluZ19fOiB0cnVlIH1dLCBwYXJlbnROb2RlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGlsZHNQYWdlQ2hhbmdlZCgkZXZlbnQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygkZXZlbnQpO1xyXG4gICAgICAgIHRoaXMuY2hpbGRzUGFnZUNoYW5nZWQuZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJJZDJEYXRhSWQodHIpIHtcclxuICAgICAgICByZXR1cm4gdHIuaWQucmVwbGFjZSgncm93bm9kZS0nLCAnJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOW/q+aNt+mUrlxyXG4gICAgb25LZXlkb3duRXZlbnQoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCEkZXZlbnQgfHwgIXRoaXMuc2luZ2xlU2VsZWN0IHx8ICF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qga2V5cyA9IFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXTtcclxuXHJcbiAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKCRldmVudC5rZXkpIHx8ICRldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdJTlBVVCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG4gICAgICAgIGxldCBuZXdJZHg7XHJcbiAgICAgICAgY29uc3QgdHJzID0gQXJyYXkuZnJvbSh0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykpO1xyXG4gICAgICAgIGNvbnN0IHRyQ291bnQgPSB0cnMubGVuZ3RoO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZFRySW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRUckluZGV4ID0gdHJzLmZpbmRJbmRleCgobjogYW55KSA9PiB0aGlzLnRySWQyRGF0YUlkKG4pID09PSB0aGlzLnNlbGVjdGVkUm93LmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgkZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcclxuICAgICAgICAgICAgbmV3SWR4ID0gc2VsZWN0ZWRUckluZGV4ICsgMTtcclxuICAgICAgICB9IGVsc2UgaWYgKCRldmVudC5jb2RlID09PSAnQXJyb3dVcCcpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkVHJJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIG5ld0lkeCA9IHNlbGVjdGVkVHJJbmRleCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdyAmJiAoJGV2ZW50LmNvZGUgPT09ICdBcnJvd1JpZ2h0JyB8fCAkZXZlbnQuY29kZSA9PT0gJ0Fycm93TGVmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuZCh0aGlzLnNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5ld0lkeCA+PSAwICYmIG5ld0lkeCA8IHRyQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgX3RyID0gdHJzW25ld0lkeF0gYXMgYW55O1xyXG4gICAgICAgICAgICBpZiAoX3RyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMudHJJZDJEYXRhSWQoX3RyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShpZCk7XHJcbiAgICAgICAgICAgICAgICBfdHIuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQmVmb3JlU2hvd0NvbnRleHRNZW51ID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vIHJvd18xX2ZpeGVkbGVmdCAgcm93XzEgIHJvd18xX2ZpeGVkcmlnaHRcclxuICAgICAgICBjb25zdCB7IGNvbnRleHRNZW51RG9tLCBldmVudCB9ID0gZTtcclxuXHJcbiAgICAgICAgbGV0IHJvd0lEID0gZXZlbnQudGFyZ2V0LmlkO1xyXG5cclxuICAgICAgICBpZiAoY29udGV4dE1lbnVEb20pIHtcclxuICAgICAgICAgICAgcm93SUQgPSB0aGlzLnRySWQyRGF0YUlkKGNvbnRleHRNZW51RG9tKTtcclxuICAgICAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUocm93SUQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGdvJCA9IG9mKHtzaG93OiB0cnVlfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVNob3dDb250ZXh0TWVudSkge1xyXG4gICAgICAgICAgICAgICAgZ28kID0gdGhpcy5iZWZvcmVTaG93Q29udGV4dE1lbnUoeyBkYXRhOiByb3dOb2RlLCB0cmVlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ28kLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAoKHI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLnNob3cpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLm1lbnVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51SXRlbXMgPSByLm1lbnVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0VyA9IGNvbnRleHRNZW51RG9tLmNsb3Nlc3QoJy5mYXJyaXMtdHJlZXRhYmxlJykub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFcgPSBjb250ZXh0TWVudURvbS5vZmZzZXRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvY3VzVGFyZ2V0V2lkdGggPSB2aWV3cG9ydFcgPiB0YXJnZXRXID8gdGFyZ2V0VyA6IHZpZXdwb3J0VztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKHsgc2hvdzogdHJ1ZSwgZGF0YTogeyBkYXRhOiByb3dOb2RlLCB0cmVlOiB0aGlzIH0sIGZvY3VzVGFyZ2V0V2lkdGggfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKHsgc2hvdzogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mKHsgc2hvdzogZmFsc2UgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnW3RyZWVUYWJsZUJvZHldJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPG5nLXRlbXBsYXRlIG5nRm9yIGxldC1zZXJpYWxpemVkTm9kZSBsZXQtcm93SW5kZXg9XCJpbmRleFwiIFtuZ0Zvck9mXT1cInR0LnNlcmlhbGl6ZWRWYWx1ZVwiPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwic2VyaWFsaXplZE5vZGUudmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwidGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHskaW1wbGljaXQ6IHNlcmlhbGl6ZWROb2RlLCBub2RlOiBzZXJpYWxpemVkTm9kZS5ub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiBzZXJpYWxpemVkTm9kZS5ub2RlLmRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgY29sdW1uczogY29sdW1uc31cIj5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgYFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVFRCb2R5Q29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICog5YiX6ZuG5ZCIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNvbHVtbnM6IGFueVtdO1xyXG5cclxuICAgIC8qKiDooajkvZPmqKHmnb8gKi9cclxuICAgIEBJbnB1dCgpIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCkgeyB9XHJcbn1cclxuXHJcbi8vIFtzdHlsZS5tYXJnaW5MZWZ0XT1cInJvd05vZGUubGV2ZWwgKiAxNiArICdweCdcIlxyXG5cclxuLyoqXHJcbiAqIOagkeiKgueCueWxleW8gOaKmOWPoFxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy10cmVlVGFibGVUb2dnbGVyJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgI3RvZ2dsZXJcclxuICAgICAgICAgICAgY2xhc3M9XCJ0cmVlbm9kZS1mb2xkXCJcclxuICAgICAgICAgICAgW25nQ2xhc3NdPVwicm93Tm9kZS5ub2RlLmV4cGFuZGVkID8gdHQudW5mb2xkSWNvbiA6IHR0LmZvbGRJY29uXCJcclxuICAgICAgICAgICAgW3N0eWxlLmRpc3BsYXldPVwiaXNTaG93VHJpYW5nbGUgPyAnJyA6ICdub25lJ1wiPjwvYT5cclxuICAgIDxzcGFuIGNsYXNzPVwidHJlZS1pY29uLWxpbmVcIiBbc3R5bGUuZGlzcGxheV09XCJpc1Nob3dUcmlhbmdsZSAmJiBzaG93TGluZXM/ICcnIDogJ25vbmUnXCI+PC9zcGFuPlxyXG4gICAgPHNwYW4gW3N0eWxlLmRpc3BsYXldPVwiKHR0LnNob3dJY29uICYmIHJvd05vZGUubm9kZS5zaG93SWNvbikgPyAnaW5saW5lLWJsb2NrJzogJ25vbmUnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0cmVlbm9kZS1pY29uXCIgW25nQ2xhc3NdPVwidHJlZU5vZGVJY29uXCI+PC9zcGFuPlxyXG4gICAgPHR0LWNoZWNrYm94ICBbcm93Tm9kZV09XCJyb3dOb2RlXCIgKm5nSWY9XCJ0dC5zaG93Q2hlY2tib3hcIiBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIiBbY2hlY2tlZF09XCJyb3dOb2RlLmlzQ2hlY2tlZFwiID48L3R0LWNoZWNrYm94PlxyXG4gICAgYCxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBleHBvcnRBczogJ3R0VG9nZ2xlcidcclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZVRvZ2dsZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgRG9DaGVjaywgT25DaGFuZ2VzLCBBZnRlclZpZXdDaGVja2VkIHtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1jbXAtdHJlZXRhYmxlLXRvZ2dsZXInKSBjbHMgPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcm93Tm9kZTogUm93Tm9kZTtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dMaW5lcyA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGluZGVudFNwYWNpbmcgPSAxNjtcclxuXHJcbiAgICB0cmVlTm9kZUljb24gPSB7fTtcclxuICAgIGlzU2hvd1RyaWFuZ2xlID0gZmFsc2U7XHJcbiAgICBub0NoaWxkcyA9IGZhbHNlO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcblxyXG4gICAgZ2V0IG9mZnNldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZCgndG9nZ2xlcicpIHRvZ2dsZXJFbDogRWxlbWVudFJlZjtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwcml2YXRlIG5nem9uZTogTmdab25lLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyKSB7XHJcbiAgICB9XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlSWNvbiA9IHRoaXMudHQuZ2V0VHJlZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2hvd1RyaWFuZ2xlID0gdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICB0aGlzLm5vQ2hpbGRzID0gdGhpcy5oYXNDaGlsZHJlbigpO1xyXG4gICAgICAgIGNvbnN0IGV4cGFuZFN1YiA9IHRoaXMudHQuZXhwYW5kLnN1YnNjcmliZSgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucm93Tm9kZS5pZCA9PT0gbm9kZS5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMudXBkYXRlSWNvbihub2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHQuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbGxhcHNlU3ViID0gdGhpcy50dC5jb2xsYXBzZS5zdWJzY3JpYmUoKG5vZGU6IFRyZWVOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJvd05vZGUuaWQgPT09IG5vZGUuZGF0YVt0aGlzLnR0LmlkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnVwZGF0ZUljb24obm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0LmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGROZXdTdWIgPSB0aGlzLnR0LmFwcGVuZE5ldy5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd05vZGUuaWQgPT09IGUucGFyZW50LmRhdGFbdGhpcy50dC5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd05vZGUubm9kZS5sZWFmIHx8IHRoaXMucm93Tm9kZS5ub2RlLmxlYWYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd05vZGUubm9kZS5sZWFmID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDbGlja0V2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtleHBhbmRTdWIsIGNvbGxhcHNlU3ViLCBhZGROZXdTdWJdO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0xpbmVzICYmICFjaGFuZ2VzLnNob3dMaW5lcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScsIHRoaXMuaXNTaG93VHJpYW5nbGUgPyAnJyA6ICdub25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNsaWNrRXZlbnQoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdEb0NoZWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnR0ICYmIHRoaXMudHQuZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzU2hvd1RyaWFuZ2xlID0gdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICAgICAgdGhpcy5ub0NoaWxkcyA9IHRoaXMuaGFzQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdGhpcy50cmVlTm9kZUljb24gPSB0aGlzLnR0LmdldFRyZWVJY29uKHRoaXMucm93Tm9kZS5ub2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmICghdGhpcy50dC5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy50dCAmJiB0aGlzLnR0LmRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5BbGxTdWJzY3JpcHRpb25zKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgdW5BbGxTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQ2hpbGRyZW4oKSB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0aGlzLnJvd05vZGUubm9kZTtcclxuICAgICAgICByZXR1cm4gdG4ubGVhZiA9PT0gZmFsc2UgfHwgdGhpcy5yb3dOb2RlLmxldmVsICE9PSAwIHx8ICh0bi5jaGlsZHJlbiAmJiB0bi5jaGlsZHJlbi5sZW5ndGggPiAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93VHJpYW5nbGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0aGlzLnJvd05vZGUubm9kZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQubG9hZERhdGFUeXBlID09PSAnYWxsJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdG4ubGVhZiA9PT0gZmFsc2UgfHwgKHRuLmNoaWxkcmVuICYmIHRuLmNoaWxkcmVuLmxlbmd0aCA+IDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0bi5sZWFmID09PSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVTZXRMaW5lcygpIHtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwgJiYgdGhpcy50dC5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LmNsb3Nlc3QoJy50cmVldGFibGUtY2VsbC1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVscyA9IHBhcmVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50cmVldGFibGUtbGluZXMnKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGluZUVscy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbHNba10ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlckxpbmVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVuZGVyTGluZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTGluZXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9MaW5lU3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub0xpbmVTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGRzID0gdGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKHRkcykuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShuLCAncGFkZGluZycsICcwLjI1cmVtIDAuNzVyZW0nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIG5vTGluZVN0eWxlKCkge1xyXG4gICAgICAgIC8vIHRoaXMuY2xzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudG9nZ2xlckVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdtYXJnaW4tbGVmdCcsIGAke3RoaXMucm93Tm9kZS5sZXZlbCAqIHRoaXMuaW5kZW50U3BhY2luZ31weGApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAndmlzaWJpbGl0eScsIHRoaXMuaXNTaG93VHJpYW5nbGUgPyAndmlzaWJsZScgOiAnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyTGluZXMoKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5yb3dOb2RlLmxldmVsO1xyXG4gICAgICAgIGNvbnN0IHBhcmVudEVsID0gdGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCcudHJlZXRhYmxlLWNlbGwtY29udGVudCcpO1xyXG5cclxuICAgICAgICBpZiAoIXBhcmVudEVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZmVyRWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmIChsZW4gPT09IDAgJiYgIXRoaXMuc2hvd1RyaWFuZ2xlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMZWFmTm9kZUxpbmVzKHJlZmVyRWwsIHBhcmVudEVsLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgcGFyZW50RWwuaW5zZXJ0QmVmb3JlKHRoaXMubmV3TGluZUVsZW1lbnQoKSwgcmVmZXJFbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuZWFyTGluZSA9IHRoaXMubmV3TGluZUVsZW1lbnQoZmFsc2UpO1xyXG4gICAgICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobmVhckxpbmUsIHJlZmVyRWwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaXNMZWFmID0gIXRoaXMuc2hvd1RyaWFuZ2xlKCk7XHJcbiAgICAgICAgICAgIGlmIChpc0xlYWYgJiYgaSA9PT0gbGVuIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVMZWFmTm9kZUxpbmVzKHJlZmVyRWwsIHBhcmVudEVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld0xpbmVFbGVtZW50KGJvcmRlciA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBuZXdMaW5lRWwgPSB0aGlzLnJlbmRlci5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhuZXdMaW5lRWwsICd0cmVldGFibGUtbGluZXMnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChib3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKG5ld0xpbmVFbCwgJ3RyZWV0YWJsZS1saW5lcy1ib3JkZXItY29sb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TGluZUVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCgIOKInyBvciDilJxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVMZWFmTm9kZUxpbmVzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGFyZW50RWw6IEVsZW1lbnQsIGlzVG9wTm9kZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8g4pScXHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lc1wiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiByZ2IoMjA0LCAyMDQsIDIwNCk7XCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lcyB0cmVldGFibGUtbGluZXMtbGVhZlwiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cclxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIm5vcm1hbFwiPjwvZGl2PlxyXG4gICAgICAgIC8vIDwvZGl2PlxyXG5cclxuICAgICAgICAvLyDiiJ9cclxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwidHJlZXRhYmxlLWxpbmVzXCIgc3R5bGU9XCJib3JkZXItY29sb3I6IHRyYW5zcGFyZW50XCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lcyB0cmVldGFibGUtbGluZXMtbGVhZlwiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cclxuICAgICAgICAvLyAgICAgPGRpdiBzdHlsZT1cImNvcm5lclwiPjwvZGl2PlxyXG4gICAgICAgIC8vIDwvZGl2PlxyXG5cclxuICAgICAgICBjb25zdCBsMSA9IHRoaXMubmV3TGluZUVsZW1lbnQoKTtcclxuICAgICAgICBjb25zdCBsMiA9IHRoaXMubmV3TGluZUVsZW1lbnQoZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhsMiwgJ3RyZWV0YWJsZS1saW5lcy1sZWFmJyk7XHJcbiAgICAgICAgY29uc3QgZGVzc2VydCA9IHRoaXMucmVuZGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgbGV0IGNscyA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmxhc3QpIHtcclxuICAgICAgICAgICAgICAgIGNscyA9ICdjb3JuZXInO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3MobDEsICd0cmVldGFibGUtbGluZXMtYm9yZGVyLWNvbG9yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbDIuYXBwZW5kQ2hpbGQoZGVzc2VydCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGRlc3NlcnQsIGNscyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGRlc3NlcnQsICd0cmVldGFibGUtbGluZXMtYm9yZGVyLWNvbG9yJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobDEsIGNvbnRhaW5lckVsKTtcclxuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobDIsIGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgaWYgKGlzVG9wTm9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShsMiwgJ21hcmdpblJpZ2h0JywgJzNweCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyQ2xpY2tFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIubGlzdGVuKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdjbGljaycsIHRoaXMub25DbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy50dC5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnR0LnRvZ2dsZUV4cGFuZCh0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwcml2YXRlIHVwZGF0ZUljb24odHJlZU5vZGU6IFRyZWVOb2RlKSB7XHJcbiAgICAvLyAgICAgdGhpcy5pc1Nob3dUcmlhbmdsZSA9IHRoaXMuc2hvd1RyaWFuZ2xlKCk7XHJcbiAgICAvLyAgICAgdGhpcy5ub0NoaWxkcyA9IHRoaXMuaGFzQ2hpbGRyZW4oKTtcclxuICAgIC8vICAgICB0aGlzLnRyZWVOb2RlSWNvbiA9IHRoaXMudHQuZ2V0VHJlZUljb24odHJlZU5vZGUpO1xyXG4gICAgLy8gfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOmAieS4reihjOe7hOS7tlxyXG4gKi9cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tzZWxlY3RSb3ddJyxcclxuICAgIGV4cG9ydEFzOiAncm93J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgVHJlZVRhYmxlU2VsZWN0Um93RGlyZWN0aXZlIGltcGxlbWVudHMgRG9DaGVjaywgT25EZXN0cm95LCBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcblxyXG4gICAgQElucHV0KCdzZWxlY3RSb3cnKSByb3dOb2RlOiBSb3dOb2RlO1xyXG4gICAgQElucHV0KCkgcm93SW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICBASW5wdXQoKSBzZWxlY3RSb3dEaXNhYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBwdWJsaWMgcHJldmVudCA9IGZhbHNlO1xyXG4gICAgcHVibGljIHRpbWVyOiBhbnk7XHJcbiAgICBASW5wdXQoKSBkZWxheSA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy50dC5zZWxlY3ROb2RlQ2hhbmdlZFN1YmplY3Quc3Vic2NyaWJlKChpZHM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaWRzICYmIHRoaXMucm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRBcnIgPSBpZHMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZEFyci5pbmRleE9mKHRoaXMucm93Tm9kZS5pZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd05vZGUubm9kZVsnZWxlbWVudFJlZiddID0gdGhpcy5lbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIHRoaXMucm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPSAhdGhpcy5zZWxlY3RSb3dEaXNhYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgLy8gaWYgKGNoYW5nZXMuc2VsZWN0Um93RGlzYWJsZWQgJiYgIWNoYW5nZXMuc2VsZWN0Um93RGlzYWJsZWQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPSAhY2hhbmdlcy5zZWxlY3RSb3dEaXNhYmxlZC5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nRG9DaGVjaygpIHtcclxuICAgICAgICBpZiAodGhpcy50dC5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnR0LmlzU2VsZWN0ZWQodGhpcy5yb3dOb2RlLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgICBvbmNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5yb3dDbGljayhldmVudCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ICE9PSAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dDbGljayhldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3dDbGljayhldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRW5hYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMudHQuZGlzYWJsZWQgJiYgdGhpcy5zZWxlY3RSb3dEaXNhYmxlZCAhPT0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJvd0NsaWNrKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICB0aGlzLnR0LmJlZm9yZUNsaWNrTm9kZSh7IGluc3RhbmNlOiB0aGlzLnR0LCByb3dOb2RlOiB0aGlzLnJvd05vZGUsIGV2ZW50LCB0eXBlOiAncm93JyB9KS5zdWJzY3JpYmUoKGU6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFlKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgICB0aGlzLnR0LmhhbmRsZVJvd0NsaWNrKHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgcm93Tm9kZTogdGhpcy5yb3dOb2RlLFxyXG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IHRoaXMucm93SW5kZXhcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUNsYXNzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy50dC5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHQuaXNTZWxlY3RlZCh0aGlzLnJvd05vZGUubm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR0LnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmFycmlzLXRyZWV0YWJsZS10Ym9keT50ci5mYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyhuLCAnZmFycmlzLXRhYmxlLXNlbGVjdGVkcm93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy50dC5rZWVwU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnZmFycmlzLXRhYmxlLXNlbGVjdGVkcm93Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDooajlpLTlhajpgInnu4Tku7ZcclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0dC1oZWFkZXItY2hlY2tib3gnLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tY2hlY2tib3ggIGN1c3RvbS1jb250cm9sLWlubGluZSB0dC1jaGVja2JveFwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAjY2hrQWxsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtaW5wdXRcIiAgW2NoZWNrZWRdPVwiY2hlY2tlZFwiPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImN1c3RvbS1jb250cm9sLWxhYmVsXCIgKGNsaWNrKT1cImhhbmRsZUNsaWNrKCRldmVudClcIj48L2xhYmVsPlxyXG4gICAgPC9kaXY+XHJcbiAgICBgLFxyXG4gICAgc3R5bGVzOiBbXHJcbiAgICAgICAgYFxyXG4gICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYFxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVHJlZVRhYmxlSGVhZGVyQ2hlY2tib3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgQElucHV0KCkgY2hlY2tlZDogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIEBPdXRwdXQoKSBjaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2Noa0FsbCcpIGNoa0FsbDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCwgcHVibGljIHR0U2VydmljZTogVHJlZXRhYmxlU2VydmljZSkge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkgeyB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIXRoaXMudHQuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgYmVmb3JlRXZlbnQgPSAhdGhpcy5jaGVja2VkID8gdGhpcy50dC5iZWZvcmVDaGVja0FsbCA6IHRoaXMudHQuYmVmb3JlVW5DaGVja0FsbDtcclxuXHJcbiAgICAgICAgICAgIGJlZm9yZUV2ZW50KHsgaW5zdGFuY2U6IHRoaXMudHQsIGNoZWNrZWQ6ICF0aGlzLmNoZWNrZWQgfSkuc3Vic2NyaWJlKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8g5YWo6YCJ5Yqf6IO9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoa0FsbC5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0LnRvZ2dsZU5vZGVzV2l0aENoZWNrYm94KGV2ZW50LCB0aGlzLmNoZWNrZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOihqOS9k2NoZWNrYm94IOe7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3R0LWNoZWNrYm94JyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wgY3VzdG9tLWNoZWNrYm94ICBjdXN0b20tY29udHJvbC1pbmxpbmUgdHQtY2hlY2tib3hcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgI2NoayBjbGFzcz1cImN1c3RvbS1jb250cm9sLWlucHV0XCIgW2Rpc2FibGVkXT1cImRpc2FibGVkXCIgW2NoZWNrZWRdPVwiY2hlY2tlZFwiPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImN1c3RvbS1jb250cm9sLWxhYmVsXCIgKGNsaWNrKT1cImhhbmRsZUNsaWNrKCRldmVudClcIj48L2xhYmVsPlxyXG4gICAgPC9kaXY+XHJcbiAgICBgLFxyXG4gICAgc3R5bGVzOiBbXHJcbiAgICAgICAgYFxyXG4gICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgOmhvc3QgLmN1c3RvbS1jaGVja2JveCB7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgIGZsb2F0OiBub25lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDaGVja2JveENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLnRyZWUtdG9nZ2xlci1jaGVja2JveCcpIGNsczEgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgY2hlY2tlZDogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIHJvd05vZGU6IFJvd05vZGU7XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY2hrJykgY2hrOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwdWJsaWMgdHRTZXJ2aWNlOiBUcmVldGFibGVTZXJ2aWNlKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuY2hrLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IHRoaXMucm93Tm9kZS5pbmRldGVybWluYXRlIHx8IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnR0U2VydmljZS5jaGFuZ2VDaGVja2JveFN0YXR1cyQucGlwZShcclxuICAgICAgICAgICAgbWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG4uaWQgPT09IHRoaXMucm93Tm9kZS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5zdWJzY3JpYmUobiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoay5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSB0aGlzLnJvd05vZGUuaW5kZXRlcm1pbmF0ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IHRoaXMucm93Tm9kZS5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoay5uYXRpdmVFbGVtZW50LmNoZWNrZWQgPSB0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy50dC5iZWZvcmVDbGlja05vZGUoeyBpbnN0YW5jZTogdGhpcy50dCwgcm93Tm9kZTogdGhpcy5yb3dOb2RlLCBldmVudCwgdHlwZTogJ2NoZWNrYm94JyB9KS5zdWJzY3JpYmUoKGU6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghZSkgeyByZXR1cm47IH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmNsZWFyQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LnNlbGVjdE5vZGUodGhpcy5yb3dOb2RlLmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LnVuU2VsZWN0Tm9kZSh0aGlzLnJvd05vZGUuaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC50b2dnbGVOb2RlV2l0aENoZWNrYm94KGV2ZW50LCB0aGlzLnJvd05vZGUsIHRoaXMuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbZGJsY2xpY2tdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRGJsQ2xpY2tSb3dEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgQElucHV0KCdkYmxjbGljaycpIGVuYWJsZURibENsaWNrID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBkYmxjbGlja05vZGU6IFJvd05vZGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHB1YmxpYyBlbDogRWxlbWVudFJlZiwgcHVibGljIHR0U2VydmljZTogVHJlZXRhYmxlU2VydmljZSxcclxuICAgICAgICBAT3B0aW9uYWwoKSBAU2VsZigpIHB1YmxpYyBzZWxlY3RSb3dEaXI6IFRyZWVUYWJsZVNlbGVjdFJvd0RpcmVjdGl2ZSkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRGJsQ2xpY2spIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dEaXIuZGVsYXkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdkYmxjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgICBvbmRibGNsaWNrKGV2ZW50OiBFdmVudCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy50dC5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy50dC5tdWx0aVNlbGVjdCAmJiB0aGlzLmRibGNsaWNrTm9kZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYmxjbGlja05vZGUubm9kZS5sZWFmKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBjb25zdCBjbHNOYW1lID0gZXZlbnQudGFyZ2V0WydjbGFzc05hbWUnXTtcclxuXHJcbiAgICAgICAgbGV0IHRvZ2dsZXJUYWcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjbHNOYW1lLmluZGV4T2YoJ2YtY21wLXRyZWV0YWJsZS10b2dnbGVyJykgPiAtMSkge1xyXG4gICAgICAgICAgICB0b2dnbGVyVGFnID0gZXZlbnQudGFyZ2V0WydxdWVyeVNlbGVjdG9yJ10oJy50cmVlbm9kZS1mb2xkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldFsnY2xhc3NOYW1lJ10uaW5kZXhPZigndHJlZW5vZGUtZm9sZCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZXJUYWcgPSBldmVudC50YXJnZXQgYXMgYW55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG9nZ2xlclRhZyAmJiB0b2dnbGVyVGFnLnN0eWxlLnZpc2liaWxpdHkgPT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RSb3dEaXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dEaXIucHJldmVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zZWxlY3RSb3dEaXIudGltZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RSb3dEaXIucm93Tm9kZSAmJiB0aGlzLmVuYWJsZURibENsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBybiA9IHRoaXMuc2VsZWN0Um93RGlyLnJvd05vZGU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5sb2FkRGF0YVR5cGUgPT09ICdhbGwnICYmICFybi5ub2RlLmxlYWYgJiYgdGhpcy50dC5kYmxDbGlja0V4cGFuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQudG9nZ2xlRXhwYW5kKHJuLm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50dC5kYmxDbGljay5lbWl0KHJuLm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tjdXN0b21Sb3dTdHlsZV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDdXN0b21Sb3dTdHlsZURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICAgIEBJbnB1dCgnY3VzdG9tUm93U3R5bGUnKSByb3dOb2RlOiBSb3dOb2RlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLCBwcml2YXRlIG5nWm9uZTogTmdab25lLFxyXG4gICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCxcclxuICAgICAgICBwdWJsaWMgdXRpbHM6IENvbW1vblV0aWxzLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyKSB7XHJcbiAgICB9XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLnNldFJvd1N0eWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRSb3dTdHlsZSgpIHtcclxuICAgICAgICBjb25zdCBmbiA9IHRoaXMudHQucm93U3R5bGVyO1xyXG4gICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICBjb25zdCBzdHkgPSBmbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgIGlmIChzdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5ID09PSAnb2JqZWN0JyAmJiAoc3R5LnN0eWxlIHx8IHN0eS5jbHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdHkuc3R5bGUpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIHN0eS5zdHlsZVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5LmNscy5zcGxpdCgnLCcpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdHkpIHx8IHR5cGVvZiBzdHkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNscyA9IHRoaXMudHQuZ2V0Um93Q2xzKHRoaXMucm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbHMgJiYgT2JqZWN0LmtleXMoY2xzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNscykuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xzW2NdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdHkpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIHN0eVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFJvd1N0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2N1c3RvbUNlbGxTdHlsZV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUVEN1c3RvbUNlbGxTdHlsZURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICAgIEBJbnB1dCgnY3VzdG9tQ2VsbFN0eWxlJykgY29sdW1uOiBUcmVlVGFibGVDb2x1bW47XHJcbiAgICBASW5wdXQoKSByb3dOb2RlOiBSb3dOb2RlO1xyXG4gICAgQElucHV0KCkgcm93SW5kZXg6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3RvciwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIHR0OiBUcmVlVGFibGVDb21wb25lbnQsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscywgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMikge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnR0ICYmIHRoaXMudHQuZ2V0Q2VsbENscykge1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LnNob3dCb3JkZXIgJiYgdGhpcy50dC5jb2x1bW5zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdib3JkZXItd2lkdGgnLCAnMHB4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2VsbFN0eWxlKCkge1xyXG4gICAgICAgIGNvbnN0IGNlbGxDbHMgPSB0aGlzLnR0LmdldENlbGxDbHModGhpcy5yb3dOb2RlLCB0aGlzLmNvbHVtbi5maWVsZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uICYmIHRoaXMuY29sdW1uLnN0eWxlcikge1xyXG4gICAgICAgICAgICBpZiAoY2VsbENscyAmJiBPYmplY3Qua2V5cyhjZWxsQ2xzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNlbGxDbHMpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxDbHNbY10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCBjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMucm93Tm9kZS5ub2RlLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNjcyA9IHRoaXMuY29sdW1uLnN0eWxlcih0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuY29sdW1uLmZpZWxkLCByb3dEYXRhKSwgcm93RGF0YSwgdGhpcy5yb3dJbmRleCwgdGhpcy5yb3dOb2RlKTtcclxuICAgICAgICAgICAgaWYgKGNjcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjcy5zdHlsZSB8fCBjY3MuY2xzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNjcy5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjY3Muc3R5bGUpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIGNjcy5zdHlsZVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNjcy5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2NzLmNscy5zcGxpdCgnLCcpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhjZWxsQ2xzKS5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCBzLCBjZWxsQ2xzW3NdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tyZXNpemFibGUtY29sdW1uXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFRUUmVzaXphYmxlQ29sdW1uRGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICAgIEBJbnB1dCgncmVzaXphYmxlLWNvbHVtbicpIGVuYWJsZVJlc2l6ZSA9IHRydWU7XHJcbiAgICByZXNpemVyOiBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICByZXNpemVyTW91c2VEb3duTGlzdGVuZXI6IGFueTtcclxuICAgIGRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXI6IGFueTtcclxuICAgIGRvY3VtZW50TW91c2VVcExpc3RlbmVyOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHR0OiBUcmVlVGFibGVDb21wb25lbnQsIHB1YmxpYyBuZ3pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsIHB1YmxpYyByZW5kZXI6IFJlbmRlcmVyMikge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdyZXNpemFibGUtY29sdW1uJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplci5jbGFzc05hbWUgPSAnY29sdW1uLXJlc2l6ZXInO1xyXG4gICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5yZXNpemVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubmd6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNFbmFibGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHQucmVzaXphYmxlQ29sdW1ucyAmJiAhdGhpcy50dC5hdXRvV2lkdGggJiYgdGhpcy5lbmFibGVSZXNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZERvY3VtZW50RXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMubmd6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lciA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmRvY3VtZW50TW91c2VVcExpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1bmJpbmREb2N1bWVudEV2ZW50cygpIHtcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRG93bihldmVudDogRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnR0Lm9uQ29sdW1uUmVzaXplQmVnaW4oZXZlbnQpO1xyXG4gICAgICAgIHRoaXMuYmluZERvY3VtZW50RXZlbnRzKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VFbnRlcigpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlTW92ZShldmVudDogRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnR0Lm9uQ29sdW1uUmVzaXplKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlVXAoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50dC5vbkNvbHVtblJlc2l6ZUVuZChldmVudCwgdGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnJlc2l6ZXJNb3VzZURvd25MaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==