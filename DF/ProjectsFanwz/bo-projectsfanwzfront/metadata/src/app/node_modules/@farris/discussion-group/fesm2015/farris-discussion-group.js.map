{"version":3,"file":"farris-discussion-group.js.map","sources":["ng://@farris/discussion-group/lib/discussion-group.service.ts","ng://@farris/discussion-group/lib/discussion-list/discussion-list.service.ts","ng://@farris/discussion-group/lib/discussion-list/discussion-list.component.ts","ng://@farris/discussion-group/lib/discussion-editor/discussion-editor.interface.ts","ng://@farris/discussion-group/lib/discussion-editor/discussion-editor.component.ts","ng://@farris/discussion-group/lib/discussion-personnel/discussion-personnel.component.ts","ng://@farris/discussion-group/lib/discussion-list/discussionList.directive.ts","ng://@farris/discussion-group/lib/pipe/safe-html.pipe.ts","ng://@farris/discussion-group/lib/pipe/controlType.pipe.ts","ng://@farris/discussion-group/lib/discussion-group.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DiscussionGroupService {\r\n\r\n  constructor() { }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { discussionConfig } from './discussionList.interface';\r\nimport { Subject,BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class DiscussionListService {\r\n\r\n    resultDiscussion: BehaviorSubject<any> = new BehaviorSubject<any>(null);;\r\n\r\n    constructor() { }\r\n\r\n    resetData(data) {\r\n        let results = [];\r\n        if (data && data.commentIds && data.commentIds.length) {\r\n            data.commentIds.forEach(commentId => {\r\n                const item = data['comments'].find((comment) => {\r\n                    return comment[\"id\"] === commentId\r\n                })\r\n                if (item) {\r\n                    let id = item[\"id\"],\r\n                        userId = item[\"userId\"],\r\n                        userName = item['user'][\"name\"],\r\n                        //  imgData = item['user'][\"imgData\"],\r\n                        imgData = item['user'].hasOwnProperty('imgData') ? item['user'][\"imgData\"] : '',\r\n                        commentDate = item[\"commentDate\"],\r\n                        //  commentDate = this.dataFormate(item[\"commentDate\"]),\r\n                        text = item[\"text\"],\r\n                        attachFiles = item.hasOwnProperty('attachFiles') ? item[\"attachFiles\"] : [],\r\n                        parentData;\r\n                    if (item.hasOwnProperty('parentId')) {\r\n                        let parentItem = data['comments'].find(i => {\r\n                            return i.id === item.parentId;\r\n                        })\r\n                        if (parentItem) {\r\n                            let parid = parentItem[\"id\"],\r\n                                paruserId = parentItem[\"userId\"],\r\n                                paruserName = parentItem['user'][\"name\"],\r\n                                // parimgData = parentItem['user'][\"imgData\"],\r\n                                parimgData = parentItem['user'].hasOwnProperty('imgData') ? parentItem['user'][\"imgData\"] : '',\r\n                                parcommentDate = parentItem[\"commentDate\"],\r\n                                partext = parentItem[\"text\"],\r\n                                parattachFiles = parentItem.hasOwnProperty('attachFiles') ? parentItem[\"attachFiles\"] : [];\r\n                            parentData = {\r\n                                id: parid,\r\n                                userId: paruserId,\r\n                                userName: paruserName,\r\n                                imgData: parimgData,\r\n                                commentDate: parcommentDate,\r\n                                text: partext,\r\n                                attachFiles: parattachFiles\r\n                            }\r\n                        }\r\n                    }\r\n                    let thisData: discussionConfig = {\r\n                        id,\r\n                        userId,\r\n                        userName,\r\n                        imgData,\r\n                        commentDate,\r\n                        text,\r\n                        attachFiles,\r\n                        parentData\r\n                    };\r\n                    results.push(thisData);\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n        // this.resultDiscussion = results;\r\n        this.resultDiscussion.next(results);\r\n    }\r\n    getData() {\r\n        return this.resultDiscussion;\r\n    }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { PaginationControlsComponent, PaginationInstance } from '@farris/ui-pagination';\r\nimport { DiscussionListService } from './discussion-list.service';\r\n\r\n@Component({\r\n  selector: 'farris-discussion-list',\r\n  templateUrl:'./discussion-list.component.html',\r\n  styleUrls:['./discussion-list.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DiscussionListComponent implements OnInit {\r\n    // @Input() personnelsPrimaryKey: string = 'userId';\r\n    @Input() personnelsDisplayKey: string = 'userName';\r\n\r\n    /**æ¯å¦æ¯æåé¡µ */\r\n    @Input() supportPaging:boolean = true;\r\n    /**æ»é¡µæ° */\r\n    // @Input() pageSize:number;\r\n    /**å½åé¡µç  */\r\n    @Input() pageIndex:number = 1;\r\n    /**æ¯é¡µæ¾ç¤ºæ¡æ°éé¡¹ */\r\n    // private _pageList = [10,20,30,50];\r\n    // get pageList() {\r\n    //     return this._pageList;\r\n    // }\r\n    // @Input() set pageList(val) {\r\n    //     this._pageList = val;\r\n    //     if (this.pager) {\r\n    //         this.pager.setPageList(val);\r\n    //     }\r\n    // }\r\n    /**æ»æ¡æ° */\r\n    private _total = 0;\r\n    get total() {\r\n        return this._total;\r\n    }\r\n    @Input() set total(val) {\r\n      this._total = val;\r\n      // this.paginationOptions.totalItems = val;\r\n      this.initPaginationOptions();\r\n      // if(val){\r\n      //   this.initPaginationOptions();\r\n      // }\r\n    }\r\n    /**æ¯é¡µæ¾ç¤ºä¸ªæ° */\r\n    private _pageSize = 10;\r\n    get pageSize() {\r\n        return this._pageSize;\r\n    }\r\n    @Input() set pageSize(val) {\r\n      this._pageSize = val;\r\n      // this.paginationOptions.itemsPerPage = val;\r\n      this.initPaginationOptions();\r\n      //if(val){\r\n        //this.initPaginationOptions();\r\n      //}\r\n    }\r\n    /**å½åé¡µæ° */\r\n    // private _pageIndex = 1;\r\n    // get pageIndex() {\r\n    //     return this._pageIndex;\r\n    // }\r\n    // @Input() set pageIndex(val) {\r\n    //   if(val){\r\n    //     this._pageIndex = val;\r\n    //     this.initPaginationOptions();\r\n    //   }\r\n    // }\r\n    /**æ»æ¡æ° */\r\n    // @Input() total = 0;\r\n    /**è¯è®ºæ°æ® */\r\n    innerDiscussionData = [];\r\n    _discussionData = [];\r\n    @Input() \r\n    set discussionData(val) {\r\n      if(val){\r\n        this._discussionData = val;\r\n        this.innerDiscussionData = val;\r\n      }\r\n    }\r\n    get discussionData(){\r\n      return this._discussionData;\r\n    }\r\n    @Output() replyMessage = new EventEmitter();\r\n    // åé¡µäºä»¶\r\n    @Output() pageChanged = new EventEmitter();\r\n    @Output() pageSizeChanged = new EventEmitter();\r\n\r\n    /**éä»¶é¢è§ */\r\n    @Output() filePreview = new EventEmitter();\r\n    /**éä»¶ä¸è½½ */\r\n    @Output() fileDownload = new EventEmitter();\r\n    public labels: any = {\r\n        previousLabel: ' ',\r\n        nextLabel: ' '\r\n    };\r\n    public directionLinks = true;\r\n    public maxSize = 7;\r\n    public responsive = true;\r\n    public autoHide = false;\r\n    paginationOptions: PaginationInstance;\r\n    @ViewChild('pager') pager: PaginationControlsComponent;\r\n\r\n    constructor( private discussionListService:DiscussionListService ) { }\r\n    ngOnInit(){\r\n      // this.paginationOptions = {\r\n      //   id: 'Farris-discussion-Pagination',\r\n      //   itemsPerPage: this.pageSize,\r\n      //   currentPage: this.pageIndex,\r\n      //   // pageList: this.pageList,\r\n      //   totalItems: this.total\r\n      // };\r\n      this.initPaginationOptions();\r\n      /**çå¬æä»¤å¾å°çæ°æ® */\r\n      this.discussionListService.getData().subscribe((data:any): void => {\r\n        if(data && !this._discussionData.length){\r\n          this.innerDiscussionData = data;\r\n        }\r\n      });\r\n    }\r\n    initPaginationOptions(){\r\n      this.paginationOptions = {\r\n        id: 'Farris-discussion-Pagination',\r\n        itemsPerPage: this._pageSize,\r\n        currentPage: this.pageIndex,\r\n        // pageList: this.pageList,\r\n        totalItems: this._total\r\n      };\r\n    }\r\n    /**ç¹å»åå¤çè¨ */\r\n    reply(item){\r\n      this.replyMessage.emit(item);\r\n    }\r\n    /**é¡µç åå */\r\n    onPageChange(page: { pageIndex: number, pageSize: number }) {\r\n      if (this.pageIndex !== page.pageIndex) {\r\n          this.pageIndex = page.pageIndex;\r\n          this.paginationOptions.currentPage = page.pageIndex;\r\n          this.pageChanged.emit({ pageInfo: page });\r\n      }\r\n    }\r\n    /**æ¯é¡µæ¾ç¤ºæ¡æ°åå */\r\n    onPageSizeChange(pageSize: number) {\r\n        if (this.pageSize !== pageSize && this.total) {\r\n            this.paginationOptions.itemsPerPage = pageSize;\r\n            this.pageSize = pageSize;\r\n  \r\n            const total = this.total;\r\n            let pageLength = Math.floor(total / pageSize);\r\n            if (total % pageSize > 0) {\r\n                pageLength += 1;\r\n            }\r\n  \r\n            if (pageLength && this.pageIndex > pageLength) {\r\n                this.pageIndex = pageLength;\r\n                this.paginationOptions.currentPage = this.pageIndex;\r\n            }\r\n  \r\n            this.pageSizeChanged.emit({ pageInfo: { pageIndex: this.pageIndex, pageSize: pageSize } });\r\n        }\r\n    }\r\n    /**éä»¶é¢è§ */\r\n    filePreviewEventHandler(info) {\r\n      this.filePreview.emit(info);\r\n    }\r\n    /**éä»¶ä¸è½½ */\r\n    fileDownloadEventHandler(info) {\r\n      this.fileDownload.emit(info);\r\n    }\r\n    /**å ä½å¤´åæå­ */\r\n    getAvatar(item){\r\n      if(item && item[this.personnelsDisplayKey]){\r\n        let str = item[this.personnelsDisplayKey];\r\n        return str.substring(str.length-2,str.length);\r\n      }\r\n      else{\r\n          return '';\r\n      }\r\n    }\r\n  \r\n}","export interface editAttachFile {\r\n    id?:string;\r\n    name:string;\r\n    size:number;\r\n    metadataId:string;\r\n}\r\nexport interface ValueConfig {\r\n    msgInfo: MsgInfo;\r\n    text: string;\r\n    mailTos: Array<{ userId: string, userName: string }>;\r\n    mailToSections:Array<any>;\r\n    visibility: string;\r\n    // replyUser?:any;\r\n    parentId:string;\r\n    attachFiles?:editAttachFile[];\r\n}\r\nexport enum MsgInfo {\r\n    Cancel = 0,\r\n    Confirm = 1\r\n}","import { Component, OnInit, Input, ViewChild, ElementRef, Renderer2, Output, EventEmitter, ViewEncapsulation, ChangeDetectorRef, Injector } from '@angular/core';\r\nimport { UploaderOptions, FUploadFileExtend } from '@farris/extend-file-upload';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { ValueConfig, MsgInfo, editAttachFile } from './discussion-editor.interface';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'farris-discussion-editor',\r\n    templateUrl: './discussion-editor.component.html',\r\n    styleUrls: ['./discussion-editor.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DiscussionEditorComponent implements OnInit {\r\n    @Input() personnelsPrimaryKey: string = 'id';\r\n    @Input() personnelsDisplayKey: string = 'name';\r\n    @Input() replyPersonnelsDisplayKey: string = 'userName';\r\n    // @Input() personnels: Array<any> = [];\r\n    // @Input() permissionList: Array<any> = [\r\n    //     { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },\r\n    //     { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }\r\n    // ];\r\n    @Input() cancelVisible: boolean = true;\r\n    @Input() editHeight: number = 130;\r\n\r\n    @Input() type: string = 'user';\r\n    @Input() orgUrl:string;\r\n    @Input() personSearchUrl:string;\r\n    // éè¦çæ æ°æ®\r\n    // @Input() treeData: any[];\r\n    // å·¦ä¾§æ çä¸»é®å­æ®µ\r\n    @Input() treeIdField: string;\r\n    @Input() treeDisplayText: string;\r\n    @Input() sectionData:any[];\r\n    // ç¨æ·è§è²\r\n    // @Input() groupList: any[] = [];\r\n\r\n    options: UploaderOptions;\r\n    placeholder:string;\r\n    sectiontreeData:Array<any>;\r\n    // äººäºå¼¹çªåè¡¨æ°æ®\r\n    private _personnels: Array<any> = [];\r\n\r\n    get personnels() {\r\n        return this._personnels;\r\n    }\r\n    @Input() set personnels(val) {\r\n        if (val) {\r\n            this._personnels = val;\r\n            this.innerPersonnels = this._personnels;\r\n            this.copyPersonnels = this._personnels;\r\n            // this.copyPersonnels = this._personnels;\r\n        }\r\n    }\r\n\r\n    // äººäºå¼¹çªåè¡¨æ°æ®\r\n    private _replyUser;\r\n\r\n    get replyUser() {\r\n        return this._replyUser;\r\n    }\r\n    @Input() set replyUser(val) {\r\n        if (val) {\r\n            this._replyUser = val;\r\n            if(this._replyUser['id']){\r\n                this.editorFocus();\r\n            }\r\n        }\r\n    }\r\n\r\n    _attachFiles: FUploadFileExtend[];\r\n    get attachFiles() {\r\n        return this._attachFiles;\r\n    }\r\n    @Input() set attachFiles(val) {\r\n        if (val) {\r\n            this._attachFiles = val;\r\n        }\r\n    }\r\n\r\n    // æ°å»ºè¿æ¯ç»´æ¤èªå®ä¹è§è²\r\n    // @Output() customGroupChange = new EventEmitter<any>();\r\n    // å¯¹å¤æ´é²æ°æ®\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    // éä¸­çè¡\r\n    @Output() lineDataChange = new EventEmitter<any>();\r\n    // å¯¹å¤\r\n    @Output() valueChange = new EventEmitter<ValueConfig>();\r\n    /** éä»¶é¢è§ */\r\n    @Output() filePreview = new EventEmitter();\r\n    /** éä»¶å é¤ */\r\n    @Output() fileRemove = new EventEmitter();\r\n    @Output() fileUploadDone = new EventEmitter();\r\n    @Output() personnelSearch = new EventEmitter();\r\n    @Output() getOugUsers = new EventEmitter();\r\n    @ViewChild('editor') editor;\r\n    @ViewChild('personModal') personModal;\r\n    // @ViewChild('searchInput') searchInput;\r\n    // å®¡æ¹æè§\r\n    textValue: string = '';\r\n    // æå­ææ¬æ¡çè¾å¥ï¼è§£å³ç¦ç¹é®é¢\r\n    tempTextValue: string;\r\n    // æå­äººåä¿¡æ¯\r\n    tempPersonnelsValue: string = '';\r\n    // æå­é¨é¨\r\n    tempSectionValue: string = '';\r\n    // æç´¢äººäºç®¡çå¼¹çª\r\n    personModalVisible = false;\r\n    // éæ©è¦åéçäººååè¡¨\r\n    selectedPersonnels: Array<any> = [];\r\n    // éæ©è¦åéçé¨é¨\r\n    selectedSection: Array<any> = [];\r\n    // æç´¢ææ¬æ¡ä¸­ç»å®çå¼\r\n    personnelText;\r\n    // æå­äººåä¿¡æ¯ï¼ç¨äºæç´¢\r\n    copyPersonnels: Array<any> = [];\r\n    innerPersonnels: Array<any> = [];\r\n    el: ElementRef;\r\n    // é¿åéå¤è¾å¥çtoken\r\n    token: boolean;\r\n    relativeVisible: boolean = false;\r\n    permission: any;\r\n    //ä¸ä¼ éä»¶æ¯å¦æ¾ç¤º\r\n    attachFilesModalVisible = false;\r\n    pageSize:number = 20;\r\n    searchPersonnelList:any = {};\r\n    showSearchList:boolean = false;\r\n    permissionList: Array<any> = [];\r\n    localeService: LocaleService;\r\n    groupIcon = '<span class=\"f-icon f-icon-search\"></span>';\r\n    constructor(\r\n        private renderer: Renderer2,\r\n        private elementRef: ElementRef,\r\n        private cd: ChangeDetectorRef,\r\n        private notifyService: NotifyService,\r\n        private injector: Injector,\r\n        private http: HttpClient,\r\n    ) { \r\n        this.localeService = this.injector.get(LocaleService);\r\n    }\r\n\r\n    ngOnInit() {\r\n        const self = this;\r\n        this.renderer.listen(document, 'click', function (event) {\r\n            self.personModalVisible = false;\r\n            self.relativeVisible = false;\r\n        });\r\n        // this.copyPersonnels = this.personnels;\r\n        this.el = this.elementRef.nativeElement;\r\n        this.permissionList = [\r\n            { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },\r\n            { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }\r\n        ]\r\n        this.permission = this.permissionList[0];\r\n        this.options = { maxUploads: 3, maxFileSize: 10240, allowedContentTypes: ['.jpg', '.pdf'] };\r\n        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');\r\n    }\r\n\r\n    /**\r\n     * åä¸ªéä»¶ä¸ä¼ å®æ\r\n     * @param ev \r\n     */\r\n    fUploadDoneHandler(ev) {\r\n        this.fileUploadDone.emit(ev);\r\n    }\r\n    /**\r\n     * ä¸ä¼ éä»¶ä¸­åä¸ªéä»¶å é¤å®æ\r\n     * @param ev \r\n     */\r\n    fUploadRemovedHandler(ev) {\r\n        console.log('fUploadRemovedHandler');\r\n        console.log(ev);\r\n    }\r\n    /**éä»¶åè¡¨ä¸­é¢è§ */\r\n    filePreviewEventHandler(info) {\r\n        this.filePreview.emit(info);\r\n    }\r\n    /**éä»¶åè¡¨ä¸­å é¤ */\r\n    fileRemoveEventHandler(file) {\r\n        this.fileRemove.emit(file);\r\n    }\r\n\r\n    // ææ¬æ¡å¤±å»ç¦ç¹è§¦å\r\n    setTextValue(e = null) {\r\n        if (e) {\r\n            // console.log(e.target.innerHTML);\r\n            this.tempTextValue = e.target.innerHTML;\r\n            this.textValue = this.tempTextValue;\r\n        }\r\n        // if (this.tempTextValue) {\r\n        //     this.textValue = this.tempTextValue\r\n        // }\r\n        if (this.tempPersonnelsValue) {\r\n            this.textValue += this.tempPersonnelsValue;\r\n        }\r\n        if(this.tempSectionValue){\r\n            this.textValue += this.tempSectionValue;\r\n        }\r\n        this.tempTextValue = '';\r\n        this.tempPersonnelsValue = '';\r\n        this.tempSectionValue = '';\r\n    }\r\n\r\n    // çå¬é®çäºä»¶, ä¸»è¦æ¯ç¨äºå é¤@äºº\r\n    listenEditorValueChange(e) {\r\n        this.tempTextValue = e.target.innerHTML;\r\n        const children = e.target.children;\r\n        const childrenId = [];\r\n        for (let i = 0; i < children.length; i++) {\r\n            childrenId.push(children[i].id);\r\n        }\r\n        this.selectedPersonnels.forEach((personnel, index) => {\r\n            if (!childrenId.includes(personnel[this.personnelsPrimaryKey])) {\r\n                this.selectedPersonnels.splice(index, 1);\r\n            }\r\n        });\r\n        this.selectedSection.forEach((section, index) => {\r\n            if (!childrenId.includes(section[this.personnelsPrimaryKey])) {\r\n                this.selectedSection.splice(index, 1);\r\n            }\r\n        });\r\n        if (!this.tempTextValue) {\r\n            this.tempTextValue = '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æç´¢äººå\r\n     */\r\n    serachPersonnel() {\r\n        // if (this.personnelText) {\r\n        //     this.innerPersonnels = this.copyPersonnels.filter(item => {\r\n        //         if(item[this.personnelsDisplayKey]){\r\n        //             return item[this.personnelsDisplayKey].indexOf(this.personnelText) !== -1;\r\n        //         }\r\n        //     })\r\n        // }\r\n        // else {\r\n        //     this.innerPersonnels = this.copyPersonnels;\r\n        // }\r\n        if(this.personnelText){\r\n            this.showSearchList = true;\r\n            this.getSearchData(this.personnelText,0).subscribe(d=>{\r\n                if(d.hasOwnProperty(\"users\")){\r\n                    this.searchPersonnelList = d;\r\n                    this.setPersonModalPosition();\r\n                }\r\n            });\r\n        }\r\n        else{\r\n            this.showSearchList = false;\r\n        }\r\n        // this.searchInput.nativeElement.blur();\r\n        //ææ¶æ³¨éææå¡å¨ç«¯æ¥è¯¢\r\n        // this.personnelSearch.emit(this.personnelText);\r\n    }\r\n    /**\r\n     * æç´¢ä¸ä¸é¡µ\r\n     */\r\n    getMoreSearchData(){\r\n        this.getSearchData(this.personnelText,this.searchPersonnelList.pageIndex + 1).subscribe(d=>{\r\n            if(d.hasOwnProperty(\"users\")){\r\n                this.searchPersonnelList.pageIndex = d['pageIndex'];\r\n                this.searchPersonnelList['users'] = [...this.searchPersonnelList['users'],...d['users']];\r\n            }\r\n        });\r\n    }\r\n\r\n    getSearchData(text:string,pageIndex:number,pageSize:number = this.pageSize){\r\n        if(this.personSearchUrl){\r\n            const url = `${this.personSearchUrl}?param=${text}&pageSize=${pageSize}&pageIndex=${pageIndex}`;\r\n            //console.log(url);\r\n            return this.http.get(url);\r\n            //return this.http.get('assets/data/discussionPerson3.json');\r\n        }\r\n        else{\r\n            return of(true);\r\n        }\r\n    }\r\n\r\n    personnelChecked(item){\r\n        item.active = !item.active;\r\n        this.innerPersonnels = this.innerPersonnels.map(o => ({ ...o }));\r\n        this.cd.markForCheck();\r\n        this.appendPersonnels();\r\n    }\r\n\r\n    // å¢å @äººå\r\n    appendPersonnels() {\r\n        let selectedList = [];\r\n        if(!this.showSearchList){\r\n            selectedList = this.innerPersonnels.filter(item => item.active === true);\r\n        }\r\n        else{\r\n            selectedList = this.searchPersonnelList['users'].filter(item => item.active === true);\r\n        }\r\n        if (selectedList.length) {\r\n            this.appendPersonnel(selectedList);\r\n        }\r\n        this.resetPersonnels();\r\n        this.setTextValue();\r\n        this.personModalVisible = false;\r\n    }\r\n    //é«çº§æç´¢äººåæ·»å \r\n    appendPersonnelsList(listData) {\r\n        if (listData.length) {\r\n            this.appendPersonnel(listData, true);\r\n        }\r\n\r\n        this.setTextValue();\r\n    }\r\n    //å¾ªç¯å¢å äººå\r\n    appendPersonnel(listData, external = false) {\r\n        listData.forEach(item => {\r\n            if (this.selectedPersonnels.length && this._isInArray(item[this.personnelsPrimaryKey], this.personnelsPrimaryKey, this.selectedPersonnels)) {\r\n                return;\r\n            } else {\r\n                //if (!external) {\r\n                this.tempPersonnelsValue += '<a name=\"personnel\" contenteditable=\"false\" class=\"at-user\" id=\"' + item[this.personnelsPrimaryKey] + '\" userid=\"' + item[this.personnelsPrimaryKey] + '\">@' + item[this.personnelsDisplayKey] + '</a>&nbsp;';\r\n                // }\r\n                // else {\r\n                //     this.tempPersonnelsValue += '<a name=\"personnel\" contenteditable=\"false\" class=\"at-user\" id=\"' + item[this.personnelsPrimaryKey] + '\" userid=\"' + item[this.personnelsPrimaryKey] + '\">@' + item[this.replyPersonnelsDisplayKey] + '</a>';\r\n                // }\r\n                this.selectedPersonnels.push(item);\r\n            }\r\n        })\r\n    }\r\n    /**\r\n     * æ·»å é¨é¨\r\n     * @param listData \r\n     */\r\n    appendSectionList(listData){\r\n        if(listData.length){\r\n            this.appendSection(listData);\r\n        }\r\n        this.setTextValue();\r\n    }\r\n\r\n    appendSection(listData,) {\r\n        listData.forEach(item => {\r\n            if (this.selectedSection.length && this._isInArray(item[this.personnelsPrimaryKey], this.personnelsPrimaryKey, this.selectedSection)) {return;} \r\n            else {\r\n                this.tempSectionValue += '<a name=\"org\" contenteditable=\"false\" class=\"at-org\" id=\"' + item[this.personnelsPrimaryKey] + '\" orgid=\"' + item[this.personnelsPrimaryKey] + '\">@' + item['name'] + '</a>&nbsp;';\r\n                this.selectedSection.push(item);\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    // å¤æ­æ¯å¦å¨æ°ç»\r\n    private _isInArray(value: any, fieldInArray: string, array: any[]) {\r\n        if (!value || !fieldInArray) {\r\n            return false;\r\n        }\r\n        return array.findIndex(item => value === item[fieldInArray]) === -1 ? false : true;\r\n    }\r\n\r\n    /**\r\n     * å³é­äººäºç®¡çå¼¹çª\r\n     */\r\n    resetPersonnels() {\r\n        this.showSearchList = false;\r\n        this.personModalVisible = false;\r\n        this.innerPersonnels = this.copyPersonnels;\r\n        if(this.innerPersonnels.length){\r\n            this.innerPersonnels.forEach(item => item.active = false);\r\n        }\r\n        this.personnelText = '';\r\n        // this.stopBubble(e);\r\n    }\r\n\r\n    /**\r\n     * æå¼äººåç®¡ç\r\n     * @param e äºä»¶\r\n     */\r\n    openModalPerson(e) {\r\n        this.personModalVisible = !this.personModalVisible;\r\n        setTimeout(() => {\r\n            if(this.personModalVisible){\r\n                this.setPersonModalPosition();\r\n            }\r\n        }, 0);\r\n        // this.getPersonnelList();\r\n        this.stopBubble(e);\r\n    }\r\n    setPersonModalPosition(){\r\n        let winH = window.innerHeight;\r\n        let ModalBottom = this.personModal.nativeElement.getBoundingClientRect().bottom;\r\n        if(winH < ModalBottom){\r\n            this.personModal.nativeElement.scrollIntoView(false);\r\n        }\r\n    }\r\n    openModalPermission(e) {\r\n        this.relativeVisible = !this.relativeVisible;\r\n        this.stopBubble(e);\r\n    }\r\n\r\n    /**\r\n     * æå¼ä¸ä¼ éä»¶\r\n     */\r\n    openModalFile(e) {\r\n        this.attachFilesModalVisible = !this.attachFilesModalVisible;\r\n        this.stopBubble(e);\r\n    }\r\n\r\n    // é»æ­¢åæ³¡\r\n    stopBubble(e) {\r\n        if (e && e.stopPropagation) {\r\n            e.stopPropagation();\r\n        } else {\r\n            window.event.cancelBubble = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æäº¤è¯è¯­\r\n     */\r\n    submitApproval() {\r\n        if (!this.textValue) {\r\n            let notEmptyText = this.localeService.getValue('discussionGroup.notEmpty');\r\n            if(notEmptyText){\r\n                this.notifyService.error(notEmptyText);\r\n            }\r\n            return;\r\n        }\r\n        let editAttachFiles: editAttachFile[] = [];\r\n        if (this.attachFiles && this.attachFiles.length) {\r\n            this.attachFiles.forEach(file => {\r\n                let id = file['id'],\r\n                    name = file['name'],\r\n                    size = file['size'],\r\n                    metadataId = file['extend']['metadataId'];\r\n                let attachFile = {\r\n                    id,\r\n                    name,\r\n                    size,\r\n                    metadataId\r\n                }\r\n                editAttachFiles.push(attachFile);\r\n            })\r\n        }\r\n        this.valueChange.emit({\r\n            msgInfo: MsgInfo.Confirm,\r\n            text: this.textValue,\r\n            mailTos: this.selectedPersonnels,\r\n            mailToSections: this.selectedSection,\r\n            visibility: this.permission.value,\r\n            parentId: (this.replyUser && this.replyUser.hasOwnProperty('id')) ? this.replyUser.id : null,\r\n            attachFiles: editAttachFiles.length ? editAttachFiles : null\r\n        });\r\n        this.textValue = '';\r\n        this.selectedPersonnels = [];\r\n        this.selectedSection = [];\r\n        this.attachFiles = [];\r\n        this.replyUser = {};\r\n    }\r\n\r\n    cancel() {\r\n        this.valueChange.emit({\r\n            msgInfo: MsgInfo.Cancel,\r\n            text: null,\r\n            mailTos: [],\r\n            mailToSections: [],\r\n            visibility: null,\r\n            parentId: null,\r\n            attachFiles: null\r\n        });\r\n        this.textValue = '';\r\n        this.selectedPersonnels = [];\r\n        this.selectedSection = [];\r\n        this.attachFiles = [];\r\n        this.replyUser = {};\r\n    }\r\n    /**ä¿®æ¹æ¥çæé */\r\n    changePermission(value: string) {\r\n        this.permission = this.permissionList.find(item => item.value === value);\r\n        this.relativeVisible = false;\r\n    }\r\n    //è·å¾ç¦ç¹\r\n    editorFocus() {\r\n        this.editor.nativeElement.focus();\r\n    }\r\n    // customGroupChangePar(event){\r\n    //     this.customGroupChange.emit(event);\r\n    // }\r\n    /**\r\n     * é«çº§äººåç¹ç¡®è®¤\r\n     */\r\n    selectionsChangePar(event) {\r\n        //this.resetPersonnels();\r\n        if(event.data.users.length){\r\n            let userList = [];\r\n            event.data.users.forEach(user => {\r\n                userList.push(user.data);\r\n            });\r\n            this.appendPersonnelsList(userList);\r\n        }\r\n        if(event.data.section.length){\r\n            let sectionList = [];\r\n            event.data.section.forEach(sec => {\r\n                sectionList.push(sec.data);\r\n            });\r\n            this.appendSectionList(sectionList);\r\n        }\r\n        this.selectionsChange.emit(event);\r\n    }\r\n    /**é«çº§äººåä¸­éä¸­æè¡ */\r\n    lineDataChangePar(event) {\r\n        this.lineDataChange.emit(event);\r\n    }\r\n    /**è·å¾å ä½å¤´å */\r\n    getAvatar(item) {\r\n        if (item && item[this.personnelsDisplayKey]) {\r\n            let str = item[this.personnelsDisplayKey];\r\n            return str.substring(str.length - 2, str.length);\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    ougUsers(event){\r\n        this.getOugUsers.emit(event);\r\n    }\r\n}","import { Component, OnInit, Input, ViewChild, ElementRef, Renderer2, NgZone, HostBinding, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';\r\nimport { of } from 'rxjs';\r\nimport { Type } from './type';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n\r\n@Component({\r\n  selector: 'farris-discussion-personnel',\r\n  templateUrl:'./discussion-personnel.component.html',\r\n  styleUrls:['./discussion-personnel.component.scss'],\r\n})\r\nexport class DiscussionPersonnelComponent implements OnInit {\r\n\r\n    // æä½åè¡¨æèåç»æéè¦çä¸»é®å­æ®µ\r\n    @Input() listIdField: string = \"id\";\r\n    // åè¡¨ä¸­æ¾ç¤ºçå­æ®µ\r\n    @Input() listDisplayText: string = \"userName\";\r\n    @Input() sectionData:any[];\r\n    @Input() orgUrl:string;\r\n    @Input() personSearchUrl:string;\r\n\r\n    @ViewChild('personnelDialog') personnelDialog;\r\n    // æ°å»ºè¿æ¯ç»´æ¤èªå®ä¹è§è²\r\n    // @Output() customGroupChange = new EventEmitter<any>();\r\n    // å¯¹å¤æ´é²æ°æ®\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    // éä¸­çè¡\r\n    @Output() lineDataChange = new EventEmitter<any>();\r\n    @Output() openDialog = new EventEmitter<any>();\r\n    @Output() ougUsers = new EventEmitter<any>();\r\n\r\n    @ViewChild('crumbsList') crumbsList:ElementRef;\r\n\r\n    // å³ä¾§é¡¹\r\n    selections: any[] = [];\r\n    selectedSections:any[] = [];\r\n    selectedUsers:any[] = [];\r\n    // æç´¢ææ¬\r\n    searchText: string\r\n    // æéè¦æ¾ç¤ºçäººåä¿¡æ¯\r\n    finalText: string = '';\r\n\r\n    sectionDataTree:Array<any> = [];\r\n    sectionDataTiled:Array<any> = [];\r\n    currentSectionData:Array<any> = [];\r\n    currentSection:any = {};\r\n    currentSectionPerson:any = {};\r\n    currentSectionId:string = '';\r\n    sectionCrumbs:Array<any> = [];\r\n    pageSize:number = 20;\r\n\r\n    showSearchList:boolean = false;\r\n    crumbsEllipsis:boolean = false;\r\n    searchUserList:any = {};\r\n\r\n    selectEmployee:string = \"éæ©åå·¥\";\r\n    placeholder:string = \"è¯·è¾å¥åå·¥å§åæç´¢\";\r\n    allOrg:string = \"å¨é¨ç»ç»\";\r\n    private localeService: LocaleService;\r\n    groupIcon = '<span class=\"f-icon f-icon-search\"></span>';\r\n    constructor(\r\n        private renderer: Renderer2,\r\n        private elementRef: ElementRef,\r\n        private ngZone: NgZone,\r\n        private http: HttpClient,\r\n        private cd: ChangeDetectorRef,\r\n        private injector: Injector\r\n    ) {\r\n        this.localeService = this.injector.get(LocaleService);\r\n     }\r\n\r\n    ngOnInit() {\r\n        // let sectionDataTrees = this.initsectionData(this.sectionData,'');\r\n        this.allOrg = this.localeService.getValue('discussionGroup.allOrg');\r\n        let sectionDataTrees = this.initSectionData(this.sectionData,'');\r\n        // this.sectionSort(sectionDataTrees);\r\n        // if(sectionDataTrees.length>1){\r\n            let sectionParent = [\r\n                {\r\n                    data:{\r\n                        id:'discussionParent',\r\n                        code:'parent',\r\n                        name: this.allOrg,\r\n                        layer: 0,\r\n                        parentId: \"\",\r\n                        sortOrder: 1,\r\n                        path: \"\",\r\n                    },\r\n                    children: [],\r\n                    personnels:{\r\n                        count:0,\r\n                        pageCount:0,\r\n                        pageIndex:1,\r\n                        pageSize:0,\r\n                        totalCount:0,\r\n                        users: []\r\n                    },\r\n                    parent: null,\r\n                    parents: [],\r\n                    parentsArr : [],\r\n                    checked:false\r\n                }\r\n            ];\r\n            sectionParent[0].children = sectionDataTrees;\r\n            sectionParent[0].children.sort((a, b):number => a.data['sortOrder'] - b.data['sortOrder']);\r\n            this.initSectionTree(sectionParent[0].children);\r\n            this.sectionDataTree = sectionParent;\r\n        // }\r\n        // else{\r\n        //     this.sectionDataTree = sectionDataTrees;\r\n        // }\r\n        //console.log(this.sectionDataTree);\r\n        if(this.sectionDataTree && this.sectionDataTree.length){\r\n            this.sectionDataTiled = this.tileSectionData(this.sectionDataTree);\r\n        }\r\n        //console.log(this.sectionDataTiled);\r\n        this.currentSection = this.sectionDataTree[0];\r\n        this.sectionCrumbs = this.sectionDataTree[0].children.length?this.sectionDataTree[0].children[0]['parentsArr']:[];\r\n        this.currentSectionData = this.sectionDataTree[0].children.length?this.sectionDataTree[0].children:[];\r\n        this.currentSectionId = this.sectionDataTree[0].data.id;\r\n        this.getPersonnel(this.currentSectionId,0).subscribe((d:any)=>{\r\n            if(d.hasOwnProperty(\"users\")){\r\n                this.sectionDataTree[0].personnels = d;\r\n                this.currentSectionPerson = this.sectionDataTree[0].personnels;\r\n                // console.log('cur',this.currentSectionPerson);\r\n            }\r\n        });\r\n\r\n        this.selectEmployee = this.localeService.getValue('discussionGroup.selectEmployee');\r\n        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');\r\n        // console.log(this.sectionDataTiled);\r\n    }\r\n\r\n    initSectionTree(data,parentId=\"discussionParent\",  parentName = this.allOrg){\r\n        if(data && data.length){\r\n            data.forEach(item => {\r\n                let par = {\r\n                    id:parentId,\r\n                    name:parentName\r\n                };\r\n                item.parentsArr.unshift(par);\r\n                item.parents.unshift(parentId);\r\n                if(item.children.length){\r\n                    this.initSectionTree(item.children);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åå§ååç»æ°æ®\r\n     */\r\n    initSectionData(data, parentId, parentIdField = 'parentId', idField = 'id') {\r\n        const nodes = new Map();\r\n        const result = [];\r\n        const unattached = [];\r\n        if(data && data.length){\r\n            data.forEach(t => {\r\n                const node = {\r\n                    data: t,\r\n                    children: [],\r\n                    personnels:{},\r\n                    parent: null,\r\n                    parents: [],\r\n                    parentsArr : [],\r\n                    checked: false\r\n                };\r\n                const id = t[idField];\r\n                nodes.set(id, node);\r\n                const PID = t[parentIdField];\r\n                if (PID === parentId || PID === null) {\r\n                    result.push(node);\r\n                } else {\r\n                    const parent = nodes.get(PID);\r\n                    // console.log(parent);\r\n                    if (parent) {\r\n                        let par = {\r\n                            id:PID,\r\n                            name:parent.data.name\r\n                        };\r\n                        node['parent'] = PID;\r\n                        node['parents'] = [...parent.parents, PID];\r\n                        node['parentsArr'] = [...parent.parentsArr, par];\r\n                        parent.children.push(node);\r\n                        parent.children.sort((a, b):number => a.data['sortOrder'] - b.data['sortOrder']);\r\n                    } else {\r\n                        unattached.push(node);\r\n                    }\r\n                }\r\n            });\r\n            if(unattached.length){\r\n                unattached.forEach(n => {\r\n                    const pid = n.data[parentIdField];\r\n                    const parent = nodes.get(pid);\r\n                    if (parent) {\r\n                        parent.children.push(n);\r\n                        parent.children.sort((a, b):number => a.data['sortOrder'] - b.data['sortOrder']);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    tileSectionData(nodes){\r\n        let r = [];\r\n        this.getAllNodes(nodes,r);\r\n        return r;\r\n    }\r\n    getAllNodes( nodes, r) {\r\n        nodes.forEach(n =>{\r\n            r.push(n);\r\n            if (n.children.length) {\r\n                this.getAllNodes(n.children, r);\r\n            }  \r\n        })\r\n    }\r\n    /**\r\n     * ç¹å»ä¸çº§\r\n     * @param section \r\n     */\r\n    sectionNext(section){\r\n        if(JSON.stringify(section.personnels) === '{}' && !section.hasOwnProperty('noPersonnel')){\r\n            section.personnels = {\r\n                count:0,\r\n                pageCount:0,\r\n                pageIndex:1,\r\n                pageSize:0,\r\n                totalCount:0,\r\n                users: []\r\n            };\r\n            this.getPersonnel(section.data.id,0).subscribe((d:any)=>{\r\n                if(d.hasOwnProperty(\"users\")){\r\n                    section.personnels.count = d['count'];\r\n                    section.personnels.pageCount = d['pageCount'];\r\n                    section.personnels.pageIndex = d['pageIndex'];\r\n                    section.personnels.pageSize = d['pageSize'];\r\n                    section.personnels.totalCount = d['totalCount'];\r\n                    section.personnels['users'] = [...section.personnels['users'],...d['users']];\r\n                }\r\n                else{\r\n                    section['noPersonnel'] = true;\r\n                }\r\n                this.getNextData(section);\r\n            })\r\n        }\r\n        else{\r\n            this.getNextData(section);\r\n        }\r\n    }\r\n    /**\r\n     * è·åä¸çº§æ°æ®\r\n     * @param section \r\n     */\r\n    getNextData(section){\r\n        if((section.children && section.children.length) || (JSON.stringify(section.personnels) !== '{}')){\r\n            const sec = this.getSectionById(section.data.id);\r\n            if(sec){\r\n                let secChecked = sec['checked'];\r\n                sec['disabled'] = secChecked?true:false;\r\n                if(!sec['indeterminate']){\r\n                    if(sec.children && sec.children.length){\r\n                        sec.children.forEach(item => {\r\n                            item['checked'] = secChecked;\r\n                            item['indeterminate'] = false;\r\n                            // item['disabled'] = sec['disabled'];\r\n                        });\r\n                    };\r\n                    if(section.personnels['users'] && section.personnels['users'].length){\r\n                        section.personnels['users'].forEach(user => {\r\n                            user['checked'] = secChecked;\r\n                            user['indeterminate'] = false;\r\n                            // user['disabled'] = sec['disabled'];\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            let secParent = {\r\n                id:sec.data.id,\r\n                name:sec.data.name\r\n            };\r\n            let secCrumbs = [...sec['parentsArr'],secParent];\r\n            this.sectionCrumbs = sec.children.length?sec.children[0]['parentsArr']:secCrumbs;\r\n            this.currentSectionData = sec.children.length?sec.children:[];\r\n            this.currentSection = sec;\r\n            this.currentSectionId = sec.data.id;\r\n            this.currentSectionPerson = sec.personnels;\r\n            setTimeout(() => {\r\n                this.initCrumbsList();\r\n            }, 0);\r\n            // console.log(this.currentSection);\r\n            this.cd.detectChanges();\r\n        }\r\n        else{\r\n            this.currentSectionPerson = [];\r\n        }\r\n    }\r\n\r\n    getPersonnel(ougId:string,pageIndex:number,pageSize:number = this.pageSize){\r\n        // let data = {};\r\n        if(this.orgUrl){\r\n            const url = `${this.orgUrl}?orgId=${ougId}&pageSize=${pageSize}&pageIndex=${pageIndex}`;\r\n            return this.http.get(url);\r\n            // if(ougId == 'langchao'){\r\n            //     return this.http.get('assets/data/discussionPerson.json');\r\n            // }\r\n            // else if(ougId == 'guoji'){\r\n            //     return this.http.get('assets/data/discussionPerson2.json');\r\n            // }\r\n            // else if(ougId == 'yanfa'){\r\n            //     return this.http.get('assets/data/discussionPerson3.json');\r\n            // }\r\n            // else{\r\n            //     return of(true);\r\n            // }\r\n        }\r\n        else{\r\n            return of(true);\r\n        }\r\n        // return data;\r\n    }\r\n\r\n    getSectionById(id){\r\n        let section = this.sectionDataTiled.find(sec=>{\r\n            return sec.data.id == id;\r\n        });\r\n        return section;\r\n    }\r\n    /**\r\n     * ç¹å»é¢åå±\r\n     * @param crumbs \r\n     */\r\n    crumbsClick(crumbs){\r\n        if(crumbs.id == this.currentSectionId) return;\r\n        const sec = this.getSectionById(crumbs.id);\r\n        this.sectionCrumbs = sec.children.length?sec.children[0]['parentsArr']:[];\r\n        this.currentSectionData = sec.children.length?sec.children:[];\r\n        this.currentSectionId = sec.data.id;\r\n        this.currentSectionPerson = sec.personnels;\r\n        this.currentSection = sec;\r\n        setTimeout(() => {\r\n            this.initCrumbsList();\r\n        }, 0);\r\n    }\r\n    /**\r\n     * é¨é¨æäººåç¶æåå\r\n     * @param event \r\n     * @param section \r\n     */\r\n    handleClick(event,section,type) {\r\n        if(this.currentSection.disabled) return;\r\n        event.stopPropagation();\r\n        section.checked = !section.checked;\r\n        section['indeterminate'] = false;\r\n        this.setSectionDataChecked();\r\n        if(section.checked){\r\n            let selectedData = {\r\n                parent:this.currentSection,\r\n                data:section\r\n            };\r\n            if(type == 'user'){\r\n                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {\r\n                    return;\r\n                }\r\n                else{\r\n                    this.selectedUsers.push(selectedData);\r\n                }\r\n            }\r\n            else if(type == 'section'){\r\n                this.addSection(section);\r\n            }\r\n        }\r\n        else{\r\n            if(type == 'user'){\r\n                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {\r\n                    this.selectedUsers.forEach((item, index) => {\r\n                        if (item['data'][this.listIdField] === section[this.listIdField]) {\r\n                            this.selectedUsers.splice(index, 1);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if(type == 'section'){\r\n                this.removeSection(section);\r\n            }\r\n        }\r\n        // console.log(this.selectedUsers,this.selectedSections);\r\n    }\r\n\r\n    handleSearchClick(event,user){\r\n        event.stopPropagation();\r\n        user.checked = !user.checked;\r\n        if(user.checked){\r\n            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {\r\n                return;\r\n            }\r\n            else{\r\n                let selectedData = {\r\n                    parent:null,\r\n                    data:user\r\n                };\r\n                this.selectedUsers.push(selectedData);\r\n            }\r\n        }\r\n        else{\r\n            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {\r\n                this.selectedUsers.forEach((item, index) => {\r\n                    if (item['data'][this.listIdField] === user[this.listIdField]) {\r\n                        this.selectedUsers.splice(index, 1);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    setSectionDataChecked(){\r\n        let curChecked:boolean = false;\r\n        let sec = this.currentSection;\r\n        let secArray:any = [];\r\n        if(sec.children || (sec.personnels['users'] && sec.personnels['users'].length)){\r\n            secArray = secArray.concat(sec.children,sec.personnels['users']);\r\n            let secCheckedList = secArray.filter(item=>{\r\n                if(item.hasOwnProperty('checked') && item['checked']){\r\n                    return item;\r\n                }\r\n            });\r\n            let secIndeList = sec.children.filter(item=>{\r\n                if(item.hasOwnProperty('indeterminate') && item['indeterminate']){\r\n                    return item;\r\n                }\r\n            })\r\n            this.currentSection['indeterminate'] = (secIndeList && secIndeList.length)? true : false;\r\n            if(secCheckedList && secCheckedList.length){\r\n                if(secCheckedList.length == secArray.length && sec.personnels.pageIndex >= sec.personnels.pageCount-1){\r\n                    curChecked = true;\r\n                }\r\n                else{\r\n                    this.currentSection['indeterminate'] = true;\r\n                }\r\n            }\r\n            else{\r\n                curChecked = false;\r\n            }\r\n            this.currentSection['checked'] = curChecked;\r\n            // console.log(this.currentSection);\r\n        }\r\n\r\n        if(this.currentSection.parents.length>0 && this.currentSection['indeterminate']){\r\n            this.currentSection.parents.forEach(par => {\r\n                const parSec = this.getSectionById(par);\r\n                if(parSec){\r\n                    parSec['indeterminate'] = this.currentSection['indeterminate'];\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    setChildDisabledStatus(status:boolean = true){\r\n        let sec = this.currentSection;\r\n        // sec['disabled'] = status;\r\n        if(sec.children || (sec.personnels['users'] && sec.personnels['users'].length)){\r\n            sec.children.forEach(item => {\r\n                item['disabled'] = status;\r\n            });\r\n            // sec['childDisabled'] = status;\r\n            sec.personnels['users'].forEach(user => {\r\n                user['disabled'] = status;\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * äººåæ¥çæ´å¤\r\n     */\r\n    getMoreData(){\r\n        if(this.currentSectionId){\r\n            const sec = this.getSectionById(this.currentSectionId);\r\n            if(sec){\r\n                this.getPersonnel(this.currentSectionId, sec.personnels.pageIndex + 1).subscribe((d:any)=>{\r\n                    if(d.hasOwnProperty(\"users\")){\r\n                        sec.personnels.pageIndex = d['pageIndex'];\r\n                        sec.personnels['users'] = [...sec.personnels['users'],...d['users']];\r\n                        if(sec.personnels['users'].length){\r\n                            if(sec['checked']){\r\n                                sec.personnels['users'].forEach(user => {\r\n                                    user['checked'] = sec['checked'];\r\n                                });\r\n                            }\r\n                        }\r\n                        // this.setSectionDataChecked();\r\n                    }\r\n                    this.cd.detectChanges();\r\n                })\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * å¨é\r\n     * @param event \r\n     */\r\n    handleClickAll(event){\r\n        if(this.currentSection.disabled) return;\r\n        if(this.currentSection){\r\n            this.currentSection['checked'] = !this.currentSection['checked'];\r\n            this.currentSection['indeterminate'] = false;\r\n            let curChecked = this.currentSection['checked'];\r\n            this.currentSection.children.forEach(item => {\r\n                item['checked'] = curChecked;\r\n            });\r\n            if(JSON.stringify(this.currentSection.personnels) != '{}' && this.currentSection['personnels']['users'].length){\r\n                this.currentSection['personnels']['users'].forEach(user => {\r\n                    user['checked'] = curChecked;\r\n                });\r\n            }\r\n            if(curChecked){\r\n                this.addSection(this.currentSection)\r\n            }\r\n            else{\r\n                this.removeSection(this.currentSection);\r\n            }\r\n        }\r\n    }\r\n\r\n    addSection(section){\r\n        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {\r\n            return;\r\n        }\r\n        else{\r\n            this.selectedSections.push(section);\r\n        }\r\n    }\r\n    removeSection(section){\r\n        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {\r\n            this.selectedSections.forEach((item, index) => {\r\n                if (item['data'][this.listIdField] === section['data'][this.listIdField]) {\r\n                    this.selectedSections.splice(index, 1);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æç´¢ç¨æ·\r\n     */\r\n    searchUser() {\r\n        if (this.searchText) {\r\n            this.showSearchList = true;\r\n            this.getSearchData(this.searchText,0).subscribe(d=>{\r\n                if(d.hasOwnProperty(\"users\")){\r\n                    this.searchUserList = d;\r\n                }\r\n            });\r\n        }\r\n        else{\r\n            this.showSearchList = false;\r\n        }\r\n    }\r\n    /**\r\n     * æç´¢äººåæ¥çæ´å¤\r\n     */\r\n    getMoreSearchData(){\r\n        if(this.searchText && this.personSearchUrl){\r\n            this.getSearchData(this.searchText,this.searchUserList.pageIndex + 1).subscribe(d=>{\r\n                if(d.hasOwnProperty(\"users\")){\r\n                    this.searchUserList.pageIndex = d['pageIndex'];\r\n                    this.searchUserList['users'] = [...this.searchUserList['users'],...d['users']];\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    getSearchData(text:string,pageIndex:number,pageSize:number = this.pageSize){\r\n        if(this.personSearchUrl){\r\n            const url = `${this.personSearchUrl}?param=${text}&pageSize=${pageSize}&pageIndex=${pageIndex}`;\r\n            return this.http.get(url);\r\n            //return this.http.get('assets/data/discussionPerson3.json');\r\n        }\r\n        else{\r\n            return of(true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * éä¸­äººåæç»ç»å é¤\r\n     * @param data \r\n     * @param type \r\n     */\r\n    selectionRemove(data: any, type:string) {\r\n        if(!data) return;\r\n        if(type == 'user'){\r\n            let index = this.selectedUsers.findIndex(user => {\r\n                return user.data.id == data.data.id;\r\n            });\r\n            if(index >= 0 ){\r\n                this.selectedUsers.splice(index, 1);\r\n            }\r\n            data.data['checked'] = false;\r\n        }\r\n        else if(type == 'section'){\r\n            let index = this.selectedSections.findIndex(item => {\r\n                return item.data.id == data.data.id;\r\n            });\r\n            if(index >= 0 ){\r\n                this.selectedSections.splice(index, 1);\r\n            }\r\n            data['checked'] = false;\r\n        }\r\n        let dataParent = null;\r\n        if(type == 'section'){\r\n            dataParent = this.getSectionById(data.parent);\r\n        }\r\n        else if(type == 'user'){\r\n            dataParent = this.getSectionById(data.parent.data.id);\r\n        }\r\n        if(dataParent){\r\n            dataParent['checked'] = false;\r\n            if((dataParent.children && dataParent.children.length) || (dataParent.personnels.users && dataParent.personnels.users.length) ){\r\n                let childrens = dataParent.children.filter(child=>{\r\n                    return child['checked'];\r\n                });\r\n                let users = dataParent.personnels.users.filter(user=>{\r\n                    return user['checked'];\r\n                })\r\n                if((childrens && childrens.length) || (users && users.length)){\r\n                    dataParent['indeterminate'] = true;\r\n                }\r\n                else{\r\n                    dataParent['indeterminate'] = false;\r\n                }\r\n                if(dataParent.parents.length>0){\r\n                    dataParent.parents.forEach(par => {\r\n                        const parSec = this.getSectionById(par);\r\n                        if((parSec.children && parSec.children.length) || (parSec.personnels.users && parSec.personnels.users.length)){\r\n                            let parchildrens = parSec.children.filter(child=>{\r\n                                return child['checked'];\r\n                            });\r\n                            let parusers = parSec.personnels.users.filter(user=>{\r\n                                return user['checked'];\r\n                            })\r\n                            if((parchildrens && parchildrens.length) || (parusers && parusers.length)){\r\n                                parSec['indeterminate'] = true;\r\n                            }\r\n                            else{\r\n                                if(dataParent['indeterminate']){\r\n                                    parSec['indeterminate'] = dataParent['indeterminate'];\r\n                                }\r\n                                else{\r\n                                    parSec['indeterminate'] = false;\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * å é¤å³ä¾§å¨é¨æ°æ®\r\n     */\r\n    moveAllToLeft() {\r\n        this.selectedUsers.forEach(user=>{\r\n            user.data['checked'] = false;\r\n        });\r\n        this.selectedSections.forEach(item=>{\r\n            item['checked'] = false;\r\n        });\r\n        this.sectionDataTiled.forEach(sec => {\r\n            sec['indeterminate'] = false;\r\n            sec['checked'] = false;\r\n            sec['disabled'] = false;\r\n            if(JSON.stringify(sec.personnels) != '{}' && sec['personnels']['users'].length){\r\n                sec['personnels']['users'].forEach(user => {\r\n                    user['checked'] = false;\r\n                });\r\n            }\r\n        });\r\n        this.selectedUsers = [];\r\n        this.selectedSections = [];\r\n        this.cd.markForCheck();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param numberType 0ï¼åæ¶ï¼1ï¼ç¡®å®\r\n     */\r\n    returnResult(numberType: number) {\r\n        this.finalText = '';\r\n        if (numberType) {\r\n            // console.log(this.selectedUsers,this.selectedSections);\r\n            this.selectionsChange.emit({\r\n                info: 'confirm',\r\n                data: {\r\n                    users: this.selectedUsers,\r\n                    section: this.selectedSections\r\n                }\r\n            });\r\n            // this.selections.forEach(item => {\r\n            //     this.finalText += item[this.listDisplayText] + 'ï¼';\r\n            // })\r\n        } else {\r\n            this.selectionsChange.emit({\r\n                info: 'cancel',\r\n                data: {\r\n                    users: [],\r\n                    section: []\r\n                }\r\n            });\r\n        }\r\n        this.moveAllToLeft();\r\n        this.searchText = '';\r\n        this.searchUser();\r\n        this.personnelDialog.close();\r\n    }\r\n\r\n    initCrumbsList(){\r\n        const crumbsListWidth = this.crumbsList.nativeElement.offsetWidth - 30;\r\n        const crumbsListItems = this.crumbsList.nativeElement.children;\r\n        // console.log(crumbsListItems);\r\n        let crumbsListItemWidth = 0;\r\n        if(crumbsListItems && crumbsListItems.length){\r\n            for (let i = crumbsListItems.length - 1; i >= 0; i--) {\r\n                // console.log(crumbsListItems[i]);\r\n                this.renderer.setStyle(crumbsListItems[i],'display','flex');\r\n                let width = crumbsListItems[i].offsetWidth;\r\n                crumbsListItemWidth += width;\r\n                if(crumbsListItemWidth >= crumbsListWidth){\r\n                    this.renderer.setStyle(crumbsListItems[i],'display','none');\r\n                }\r\n                else{\r\n                    this.renderer.setStyle(crumbsListItems[i],'display','flex');\r\n                }\r\n                // console.log(width,crumbsListItemWidth,crumbsListWidth,i);\r\n            }\r\n        };\r\n        // console.log(crumbsListItemWidth,crumbsListWidth);\r\n        if(crumbsListItemWidth >= crumbsListWidth){\r\n            this.crumbsEllipsis = true;\r\n          }\r\n          else{\r\n            this.crumbsEllipsis = false;\r\n          }\r\n    }\r\n\r\n    crumbsMore(){\r\n        if(this.sectionCrumbs && this.sectionCrumbs.length){\r\n            this.crumbsClick(this.sectionCrumbs[0]);\r\n        }\r\n    }\r\n\r\n    _isInArray(value: string, field: string, array: any[]) {\r\n        if (!field || !value) {\r\n            throw new Error('å2ä¸ªåæ°å¿å¡«');\r\n        }\r\n        return array.find(item => value === item[field]) ? true : false;\r\n    }\r\n\r\n    _isSelectedInArray(value: string, field: string, array: any[]) {\r\n        if (!field || !value) {\r\n            throw new Error('å2ä¸ªåæ°å¿å¡«');\r\n        }\r\n        return array.find(item => value === item['data'][field]) ? true : false;\r\n    }\r\n\r\n    closeDialog(){\r\n        this.moveAllToLeft();\r\n        this.searchText = '';\r\n        this.searchUser();\r\n    }\r\n}","import { Directive, Input } from '@angular/core';\r\nimport { of } from 'rxjs';\r\nimport { discussionConfig } from './discussionList.interface';\r\nimport { DiscussionListService } from './discussion-list.service';\r\n\r\n@Directive({\r\n    selector: '[fDiscussionList]'\r\n})\r\nexport class DiscussionListDirective {\r\n    // private comments=[];\r\n    // @Input('discussionListData') \r\n    // set discussionListData(datas){\r\n    //     if(datas){\r\n    //         this.discussionListService.resetData(datas);\r\n    //         this.comments=[...datas];\r\n    //     }\r\n    // };\r\n    // get discussionListData(){\r\n    //     return this.comments;\r\n    // }\r\n\r\n    _discussionListData = [];\r\n    @Input() \r\n    set discussionListData(data) {\r\n      if(data){\r\n        this._discussionListData = data;\r\n        this.discussionListService.resetData(data);\r\n        // this.comments=[...data];\r\n      }\r\n    }\r\n    get discussionListData(){\r\n      return this._discussionListData;\r\n    }\r\n\r\n    constructor(private discussionListService:DiscussionListService) {\r\n    }\r\n}","\r\nimport { Pipe, PipeTransform } from \"@angular/core\";\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n@Pipe({ name: 'safeHtml' })\r\nexport class SafeHtmlPipe implements PipeTransform {\r\n    constructor(private sanitized: DomSanitizer) { }\r\n\r\n    transform(value) {\r\n        return this.sanitized.bypassSecurityTrustHtml(value);\r\n    }\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'avatarHtml'})\r\nexport class AvatarHtmlPipe implements PipeTransform {\r\n    transform(item:any): string {\r\n        let str = item['name'];\r\n        if(str){\r\n            return str.substring(str.length-2,str.length);\r\n        }\r\n        else{\r\n            return '';\r\n        }\r\n    }\r\n}\r\n\r\n@Pipe({name: 'getOrgText'})\r\nexport class GetOrgTextPipe implements PipeTransform {\r\n    transform(item:any, orgs: any[]): string {\r\n        let str = item['orgId'];\r\n        if(orgs && orgs.length){\r\n            let sec = orgs.find(org => {\r\n                return org['id'] == str;\r\n            });\r\n            let orgtext = '';\r\n            if(sec){\r\n                if(sec['parentId'] != ''){\r\n                    let par = orgs.find(org => {\r\n                        return org['id'] == sec['parentId'];\r\n                    });\r\n                    orgtext = par ? `${par.name}/${sec['name']}`:sec['name'];\r\n                }\r\n                else{\r\n                    orgtext = sec['name'];\r\n                }\r\n            }\r\n            return orgtext;\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule,registerLocaleData } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { SafeHtmlPipe } from './pipe/safe-html.pipe';\r\nimport { DiscussionListComponent } from './discussion-list/discussion-list.component';\r\nimport { DiscussionEditorComponent } from './discussion-editor/discussion-editor.component';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { TreeModule } from '@farris/ui-tree';\r\nimport { ModalModule, BsModalService } from '@farris/ui-modal';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { DiscussionPersonnelComponent } from './discussion-personnel/discussion-personnel.component';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { DiscussionListService } from './discussion-list/discussion-list.service';\r\nimport { DiscussionListDirective } from './discussion-list/discussionList.directive';\r\nimport { FFileUploadModule } from '@farris/extend-file-upload';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\n\r\nimport zh from '@angular/common/locales/zh';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { AvatarHtmlPipe, GetOrgTextPipe } from './pipe/controlType.pipe';\r\nregisterLocaleData(zh);\r\n\r\n@NgModule({\r\n  declarations: [DiscussionEditorComponent, DiscussionListComponent, DiscussionPersonnelComponent, SafeHtmlPipe, AvatarHtmlPipe,GetOrgTextPipe,DiscussionListDirective],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ModalModule,\r\n    FarrisDialogModule,\r\n    FarrisCommonModule,\r\n    LoadingModule,\r\n    PerfectScrollbarModule,\r\n    TreeModule,\r\n    PaginationModule,\r\n    FFileUploadModule,\r\n    NotifyModule,\r\n    HttpClientModule,\r\n    LocaleModule.forRoot(),\r\n    InputGroupModule\r\n  ],\r\n  providers: [\r\n      BsModalService,\r\n      ComponentLoaderFactory,\r\n      PositioningService,\r\n      DiscussionListService\r\n  ],\r\n  exports: [DiscussionEditorComponent, DiscussionListComponent, DiscussionPersonnelComponent, SafeHtmlPipe, AvatarHtmlPipe,GetOrgTextPipe,DiscussionListDirective],\r\n  entryComponents: [ DiscussionPersonnelComponent]\r\n})\r\nexport class DiscussionGroupModule { }\r\n"],"names":[],"mappings":"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"}
