/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ChangeDetectorRef, ChangeDetectionStrategy, Output, EventEmitter, ElementRef, Renderer2, Injector, LOCALE_ID, Optional, InjectFlags } from '@angular/core';
import { ControlType } from './entity/controltype';
import { ListFilterService } from './service/list-filter.service';
import { QuerySolutionService } from './submithandlers/query-solution.service';
import { ConvertorService } from './service/convertorservice';
import { TextValue } from './entity/conditionvalue/textvalue';
import { HelpValue } from './entity/conditionvalue/helpvalue';
import { DropDownListValue } from './entity/conditionvalue/dropdownlistvalue';
import { DateRangeValue } from './entity/conditionvalue/daterangevalue';
import { NumberRangeValue } from './entity/conditionvalue/numberrangevaue';
import { SearchValue } from './entity/conditionvalue/searchvalue';
import { DateValue } from './entity/conditionvalue/datevalue';
import { CheckboxGroupValue } from './entity/conditionvalue/checkboxgroupvalue';
import { LISTFILTER_HANDLER_TOKEN } from './interface/IistFilterHandler';
import { RadioGroupValue } from './entity/conditionvalue/radiovalue';
import { MonthValue } from './entity/conditionvalue/month';
import { YearValue } from './entity/conditionvalue/yearvalue';
import { YearRangeValue } from './entity/conditionvalue/yearrange';
import { MonthRangeValue } from './entity/conditionvalue/monthrange';
import { InputGroupValue } from './entity/conditionvalue/inputgroup';
var ListFilterComponent = /** @class */ (function () {
    function ListFilterComponent(filterService, cd, handler, convertorService, render, injector) {
        this.filterService = filterService;
        this.cd = cd;
        this.handler = handler;
        this.convertorService = convertorService;
        this.render = render;
        this.injector = injector;
        //  表单左对齐
        this.alLeft = false;
        //  平分空间
        this.autoWidth = true;
        //  实时搜索
        this.liveSearch = false;
        //  label的宽度是否自适应
        this.autoLabel = false;
        //  是否禁用
        this.disabled = false;
        this.filterPaddingNone = false;
        this.query = new EventEmitter();
        this.searchChange = new EventEmitter();
        //  filterWidth:number = 1000;
        //  标记是否有滚动条
        //  hasScroll = true;
        //  需要监听收折的表单
        //  resizeGroups: listFilterGroup;
        // 筛选icon部分小红点
        this.showExpandTag = false;
        /**
         * 是否需要显示展开更多icon
         */
        this.showMoreIcon = false;
        //  moreIconWidth:number = 0;
        this.showFilter = false;
        // 是否展现出的只有一个搜索控件
        this.formExpand = false;
        // 提交表单数据
        //  queryList;
        // 隐藏提交表单数据
        //  extendqueryList;
        /**
         * 循环表单
         */
        this.listFilterConditions = new Array();
        /**
         * 用来存储setvalue前数据
         */
        this.stagListFilterConditions = new Array();
        /**
         * 记录默认收起的搜索表单列表
         */
        this.extendFilterList = [];
        /**
         * 记录显示的搜索表单列表
         */
        this.showFilterList = [];
        /**
         * 显示中表单的必填项
         */
        this.requiredListFilter = [];
        /** 隐藏中表单的必填项 */
        //  extendRequiredListFilter: Array<QueryCondition> = [];
        /**
         * 表单是否允许提交
         */
        this.canSubmit = false;
        /**
         * 扩展表单是否允许提交
         */
        //  extendCanSubmit:boolean = false;
        this.localeIds = {
            en: 'en',
            'zh-CHS': 'zh-CHS'
        };
        this.currentLocale = 'zh-CHS';
        this.isControlInline = true;
        if (this.injector) {
            this.currentLocale = this.injector.get(LOCALE_ID);
            this.listfilterHandler = this.injector.get(LISTFILTER_HANDLER_TOKEN, null, InjectFlags.Optional);
        }
    }
    Object.defineProperty(ListFilterComponent.prototype, "defaultValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this._defaultValue;
        },
        set: /**
         * @param {?} configs
         * @return {?}
         */
        function (configs) {
            var _this = this;
            this._defaultValue = configs;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.setFilterValue(_this._defaultValue);
            }));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListFilterComponent.prototype, "filterList", {
        get: /**
         * @return {?}
         */
        function () {
            return this._filterList;
        },
        set: /**
         * @param {?} filterList
         * @return {?}
         */
        function (filterList) {
            this._filterList = filterList;
            this.initFilterList();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ListFilterComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.currentLocale === this.localeIds['en']) {
            this.isControlInline = false;
        }
        else {
            this.isControlInline = true;
        }
        this.canShowMoreIcon();
    };
    /**
     * @return {?}
     */
    ListFilterComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this.autoWidth && !this.formExpand && this.filterMainBasisRef) {
            /** @type {?} */
            var basicList = this.filterMainBasisRef.nativeElement.querySelectorAll('.filter-input-list');
            /** @type {?} */
            var basicWidth = 0;
            if (basicList && basicList.length) {
                for (var k = 0; k < basicList.length; k++) {
                    /** @type {?} */
                    var offW = Math.ceil(parseFloat(basicList[k].offsetWidth || 0));
                    if (offW > 0) {
                        basicWidth += offW;
                    }
                }
            }
            if (basicWidth > 0) {
                this.render.setStyle(this.filterMainBasisRef.nativeElement, 'width', basicWidth + 'px');
            }
        }
    };
    /** 初始化处理表单数据 */
    /**
     * 初始化处理表单数据
     * @return {?}
     */
    ListFilterComponent.prototype.initFilterList = /**
     * 初始化处理表单数据
     * @return {?}
     */
    function () {
        var _this = this;
        this.listFilterConditions = new Array();
        this.extendFilterList = [];
        this.showFilterList = [];
        this.filterDatas = this.filterService.fieldSchemasConvert(this._filterList);
        if (this.filterDatas && this.filterDatas.length) {
            this.listFilterConditions = this.convertorService.getSelectedFieldConditions(this.filterDatas, this.listFilterConditions);
            this.stagListFilterConditions = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return (tslib_1.__assign({}, o)); }));
            // 存储扩展项和默认展示表单
            this.listFilterConditions.forEach((/**
             * @param {?} field
             * @return {?}
             */
            function (field) {
                if (field.control.isExtend) {
                    _this.extendFilterList.push(field);
                }
                else {
                    _this.showFilterList.push(field);
                }
            }));
            // 判断是否是左对齐 只有一个搜索
            /** @type {?} */
            var _basisFilterList = this.listFilterConditions.filter((/**
             * @param {?} field
             * @return {?}
             */
            function (field) {
                return !field.control.isExtend;
            }));
            if (_basisFilterList && _basisFilterList.length === 1 && this.getControlType(_basisFilterList[0]) === 'search') {
                this.formExpand = true;
            }
            this.searchChange.emit(this.listFilterConditions);
            this.inSetCurrentFilterConditions();
            // 存储默认展示中必填项
            this.requiredListInit();
            this.canShowMoreIcon();
            //  this.listSearch();
            this.cd.detectChanges();
        }
    };
    /**
     * @return {?}
     */
    ListFilterComponent.prototype.inSetCurrentFilterConditions = /**
     * @return {?}
     */
    function () {
        if (this.listfilterHandler) {
            this.listfilterHandler.setCurrentFilterConditions(this.listFilterConditions);
        }
    };
    /**
     * 获取控件类型
     * @param selectedFieldCondition
     */
    /**
     * 获取控件类型
     * @param {?} selectedFieldCondition
     * @return {?}
     */
    ListFilterComponent.prototype.getControlType = /**
     * 获取控件类型
     * @param {?} selectedFieldCondition
     * @return {?}
     */
    function (selectedFieldCondition) {
        if (selectedFieldCondition) {
            if (selectedFieldCondition.control.getControlType() == ControlType.Text) {
                return 'input';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Search) {
                return 'search';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Date) {
                return 'date';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Month) {
                return 'month';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Year) {
                return 'year';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DateRange) {
                return 'daterange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DateRangeTime) {
                return 'daterangetime';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.MonthRange) {
                return 'monthrange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.YearRange) {
                return 'yearrange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DropDown) {
                return 'dropdown';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.NumberRange) {
                return 'number';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Help) {
                return 'help';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.CheckboxGroup) {
                return 'checkboxgroup';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Radio) {
                return 'radio';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.InputGroup) {
                return 'input-group';
            }
            else {
                return 'input';
            }
        }
    };
    /** 获得类名 */
    /**
     * 获得类名
     * @param {?} currentItem
     * @return {?}
     */
    ListFilterComponent.prototype.getStyle = /**
     * 获得类名
     * @param {?} currentItem
     * @return {?}
     */
    function (currentItem) {
        /** @type {?} */
        var defaultCondtionStyle = 'col-12 col-md-6 col-xl-3 col-el-2';
        return (this.filterClass && !this.autoWidth) ? this.filterClass : defaultCondtionStyle;
    };
    /** 判断是否需要显示更多按钮 */
    /**
     * 判断是否需要显示更多按钮
     * @return {?}
     */
    ListFilterComponent.prototype.canShowMoreIcon = /**
     * 判断是否需要显示更多按钮
     * @return {?}
     */
    function () {
        if (this.extendFilterList.length > 0) {
            this.showMoreIcon = true;
        }
        else {
            this.showMoreIcon = false;
        }
    };
    /** 判断是否所有必填项都填写完毕 */
    /**
     * 判断是否所有必填项都填写完毕
     * @param {?} requirelist
     * @return {?}
     */
    ListFilterComponent.prototype.canSubmitFilter = /**
     * 判断是否所有必填项都填写完毕
     * @param {?} requirelist
     * @return {?}
     */
    function (requirelist) {
        /** @type {?} */
        var formCanSubmit = false;
        if (!requirelist || !requirelist.length) {
            formCanSubmit = true;
            return formCanSubmit;
        }
        else {
            for (var i = 0; i < requirelist.length; i++) {
                /** @type {?} */
                var item = requirelist[i];
                if (item.control.getControlType() === ControlType.Text) {
                    /** @type {?} */
                    var tv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(tv).length < 0 || !tv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Help) {
                    /** @type {?} */
                    var shv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(shv).length === 0 || !shv.value || !shv.valueField) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DropDown) {
                    /** @type {?} */
                    var ddv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(ddv).length === 0 || !ddv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DateRange) {
                    /** @type {?} */
                    var drv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(drv).length === 0 || (!drv.startTime && !drv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DateRangeTime) {
                    /** @type {?} */
                    var drv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(drv).length === 0 || (!drv.startTime && !drv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.MonthRange) {
                    /** @type {?} */
                    var mrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(mrv).length === 0 || (!mrv.startTime && !mrv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.YearRange) {
                    /** @type {?} */
                    var yrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(yrv).length === 0 || (!yrv.startTime && !yrv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.NumberRange) {
                    /** @type {?} */
                    var nrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(nrv).length === 0 || (!nrv.startValue && !nrv.endValue)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Search) {
                    /** @type {?} */
                    var sv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(sv).length < 0 || !sv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Date) {
                    /** @type {?} */
                    var dv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(dv).length < 0 || !dv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Month) {
                    /** @type {?} */
                    var mv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(mv).length < 0 || !mv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Year) {
                    /** @type {?} */
                    var yv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(yv).length < 0 || !yv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.CheckboxGroup) {
                    /** @type {?} */
                    var cbgv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(cbgv).length === 0 || Object.keys(cbgv.value).length === 0) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Radio) {
                    /** @type {?} */
                    var ddv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(ddv).length === 0 || !ddv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.InputGroup) {
                    /** @type {?} */
                    var sv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(sv).length < 0 || !sv.textValue) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
            }
            return formCanSubmit;
        }
    };
    /** 搜索表单变化 */
    /**
     * 搜索表单变化
     * @param {?} $event
     * @param {?} item
     * @return {?}
     */
    ListFilterComponent.prototype.onSearch = /**
     * 搜索表单变化
     * @param {?} $event
     * @param {?} item
     * @return {?}
     */
    function ($event, item) {
        if (this.disabled) {
            return;
        }
        this.searchChange.emit({ item: item, conditions: this.listFilterConditions, instance: this });
        this.inSetCurrentFilterConditions();
        this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
        if (item.control.isExtend || !this.canSubmit || !this.liveSearch) {
            return;
        }
        this.submit('showFormData', this.listFilterConditions);
    };
    /** 开始筛选 */
    /**
     * 开始筛选
     * @return {?}
     */
    ListFilterComponent.prototype.filterClick = /**
     * 开始筛选
     * @return {?}
     */
    function () {
        if (this.disabled || !this.canSubmit) {
            return;
        }
        this.submit('showFormData', this.listFilterConditions);
    };
    /** 收折部分点击确定提交 */
    /**
     * 收折部分点击确定提交
     * @return {?}
     */
    ListFilterComponent.prototype.listSearch = /**
     * 收折部分点击确定提交
     * @return {?}
     */
    function () {
        if (this.disabled || !this.canSubmit) {
            return;
        }
        this.showFilter = false;
        this.submit('extendFormData', this.listFilterConditions);
    };
    /** 取消搜索 */
    /**
     * 取消搜索
     * @return {?}
     */
    ListFilterComponent.prototype.listSearchCancel = /**
     * 取消搜索
     * @return {?}
     */
    function () {
        this.showFilter = false;
    };
    /** 提交表单 */
    /**
     * 提交表单
     * @param {?} type
     * @param {?} filterlist
     * @return {?}
     */
    ListFilterComponent.prototype.submit = /**
     * 提交表单
     * @param {?} type
     * @param {?} filterlist
     * @return {?}
     */
    function (type, filterlist) {
        /** @type {?} */
        var queryList;
        queryList = this.handler.setFilterConditions(filterlist);
        if (type == 'extendFormData') {
            if (queryList.length > 0) {
                this.showExpandTag = true;
            }
            else {
                this.showExpandTag = false;
            }
        }
        this.query.emit({ type: type, data: JSON.stringify(queryList) });
    };
    /** 对外提供获得表单搜索数据 */
    /**
     * 对外提供获得表单搜索数据
     * @return {?}
     */
    ListFilterComponent.prototype.getFilterData = /**
     * 对外提供获得表单搜索数据
     * @return {?}
     */
    function () {
        /** @type {?} */
        var queryList;
        queryList = this.handler.setFilterConditions(this.listFilterConditions);
        return JSON.stringify(queryList);
    };
    /** 获取展示在外部的表单长度 */
    /**
     * 获取展示在外部的表单长度
     * @return {?}
     */
    ListFilterComponent.prototype.getShowLength = /**
     * 获取展示在外部的表单长度
     * @return {?}
     */
    function () {
        if (this.showFilterList) {
            return this.showFilterList.length;
        }
    };
    /** 清空条件 */
    /**
     * 清空条件
     * @return {?}
     */
    ListFilterComponent.prototype.resetSearch = /**
     * 清空条件
     * @return {?}
     */
    function () {
        if (this.disabled) {
            return;
        }
        if (this.listFilterConditions && this.listFilterConditions.length) {
            this.listFilterConditions.forEach((/**
             * @param {?} listFilterCondition
             * @return {?}
             */
            function (listFilterCondition) {
                if (listFilterCondition.control.getControlType() == ControlType.Text) {
                    listFilterCondition.value = new TextValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Search) {
                    listFilterCondition.value = new SearchValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Date) {
                    listFilterCondition.value = new DateValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Month) {
                    listFilterCondition.value = new MonthValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Year) {
                    listFilterCondition.value = new YearValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.DateRange) {
                    listFilterCondition.value = new DateRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.MonthRange) {
                    listFilterCondition.value = new MonthRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.YearRange) {
                    listFilterCondition.value = new YearRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.DropDown) {
                    listFilterCondition.value = new DropDownListValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.NumberRange) {
                    listFilterCondition.value = new NumberRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Help) {
                    listFilterCondition.value = new HelpValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.CheckboxGroup) {
                    listFilterCondition.value = new CheckboxGroupValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Radio) {
                    listFilterCondition.value = new RadioGroupValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.InputGroup) {
                    listFilterCondition.value = new InputGroupValue();
                }
                else {
                    listFilterCondition.value = new TextValue();
                }
            }));
            //  let listFilter = this.listFilterConditions.map(o => Object.assign({}, o));
            /** @type {?} */
            var listFilter = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return (tslib_1.__assign({}, o)); }));
            this.listFilterConditions = listFilter;
            this.requiredListInit();
            //  this.cd.markForCheck();
        }
    };
    // 设置默认值
    // 设置默认值
    /**
     * @param {?} fieldConfigs
     * @return {?}
     */
    ListFilterComponent.prototype.setFilterValue = 
    // 设置默认值
    /**
     * @param {?} fieldConfigs
     * @return {?}
     */
    function (fieldConfigs) {
        this.listFilterConditions = this.stagListFilterConditions.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        if (this.listFilterConditions && this.listFilterConditions.length) {
            this.setValues(this.listFilterConditions, fieldConfigs);
            /** @type {?} */
            var listFilter = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return (tslib_1.__assign({}, o)); }));
            this.listFilterConditions = listFilter;
            this.requiredListInit();
            this.searchChange.emit(this.listFilterConditions);
            this.inSetCurrentFilterConditions();
            //  this.listSearch();
            this.cd.detectChanges();
            this.cd.markForCheck();
            this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
            if (!this.canSubmit) {
                return;
            }
            this.submit('showFormData', this.listFilterConditions);
        }
    };
    // 设置value
    // 设置value
    /**
     * @param {?} conditions
     * @param {?} fieldConfigs
     * @return {?}
     */
    ListFilterComponent.prototype.setValues = 
    // 设置value
    /**
     * @param {?} conditions
     * @param {?} fieldConfigs
     * @return {?}
     */
    function (conditions, fieldConfigs) {
        var _this = this;
        /** @type {?} */
        var qc;
        /** @type {?} */
        var controlType;
        if (fieldConfigs && fieldConfigs.length) {
            fieldConfigs.forEach((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                qc = conditions.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.fieldCode == v.labelCode; }));
                if (qc) {
                    controlType = _this.getControlType(qc);
                    qc.value = _this.filterService.setValues(controlType, v.value);
                }
            }));
        }
    };
    /**
     * @param {?} fieldName
     * @return {?}
     */
    ListFilterComponent.prototype.getValue = /**
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldName) {
        /** @type {?} */
        var queryList = this.handler.setFilterConditions(this.listFilterConditions);
        /** @type {?} */
        var item = queryList.find((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n['FilterField'] === fieldName; }));
        if (item) {
            return item.value;
        }
        return undefined;
    };
    // 必填项初始化
    // 必填项初始化
    /**
     * @return {?}
     */
    ListFilterComponent.prototype.requiredListInit = 
    // 必填项初始化
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var requiredList = this.listFilterConditions.filter((/**
         * @param {?} listitem
         * @return {?}
         */
        function (listitem) {
            return listitem.control.required;
        }));
        if (requiredList && requiredList.length) {
            this.requiredListFilter = requiredList;
            this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
        }
        else {
            this.requiredListFilter = [];
            this.canSubmit = true;
        }
    };
    /**
     * @param {?} fields
     * @return {?}
     */
    ListFilterComponent.prototype.clearFilterValue = /**
     * @param {?} fields
     * @return {?}
     */
    function (fields) {
        if (fields && fields.length) {
            if (typeof fields === 'string') {
                fields = fields.split(',');
            }
            fields = fields.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                return n.toLowerCase();
            }));
            this.listFilterConditions.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (fields.indexOf(n.fieldCode.toLowerCase()) > -1) {
                    n.value.clearValue();
                }
            }));
        }
    };
    /**
     * @param {?} values
     * @return {?}
     */
    ListFilterComponent.prototype.updateValues = /**
     * @param {?} values
     * @return {?}
     */
    function (values) {
        var _this = this;
        if (values && Object.keys(values)) {
            /** @type {?} */
            var fields_1 = Object.keys(values);
            fields_1.forEach((/**
             * @param {?} f
             * @return {?}
             */
            function (f) {
                _this.listFilterConditions.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    if (fields_1.indexOf(n.fieldCode.toLowerCase()) > -1) {
                        n.value['value'] = values[f];
                    }
                }));
            }));
        }
    };
    ListFilterComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-list-filter',
                    template: "<app-filter-common></app-filter-common>\r\n<div class=\"f-list-filter position-relative\"\r\n    [ngClass]=\"{'list-filter-padding': showMoreIcon,'list-filter-autoWidth': autoWidth,'list-filter-paddingnone': filterPaddingNone}\">\r\n    <ng-container *ngIf=\"filterType === 'list';else filterLayout\">\r\n        <div class=\"filter-inputs-main filter-inputs-main-list f-form-layout farris-form farris-form-controls-inline\">\r\n            <ng-container *ngFor=\"let formItem of listFilterConditions;let last = last;\">\r\n                <div class=\"col-12\"\r\n                    [ngClass]=\"{'filter-list-item': showFilterList && showFilterList.length && showFilterList[showFilterList.length-1]['id'] == formItem.id}\"\r\n                    *ngIf=\"!formItem.control.isExtend\">\r\n                    <div class=\"filter-input-list farris-group-wrap\"\r\n                        [ngClass]=\"{'filter-input-list-autolabel': autoLabel,'filter-input-list-checkbox': getControlType(formItem) === 'checkboxgroup'}\"\r\n                        [id]=\"'filter-'+formItem.id\">\r\n                        <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                            [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                        <div class=\"filter-search-btn\"\r\n                            *ngIf=\"!liveSearch && showFilterList && showFilterList.length && showFilterList[showFilterList.length-1]['id'] == formItem.id\">\r\n                            <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                                (click)=\"filterClick()\">{{ 'listFilter.filter' | locale }}</button>\r\n                            <button class=\"btn btn-secondary filter-search-btn-reset\" *ngIf=\"!showMoreIcon\"\r\n                                (click)=\"resetSearch()\">\r\n                                <span class=\"f-icon f-icon-remove\"></span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #filterLayout>\r\n        <ng-container *ngIf=\"autoWidth;else gridLayout\">\r\n            <div class=\"filter-inputs-main-basis-wrapper\" [ngClass]=\"{'list-filter-wrapper-show-btn': !liveSearch,'list-filter-wrapper-show-btn-remove': !liveSearch && !showMoreIcon}\">\r\n                <div class=\"filter-inputs-main-basis-wrapper-inner\">\r\n                    <div class=\"filter-inputs-main filter-inputs-main-basis farris-form d-flex\"\r\n                        [ngClass]=\"{'justify-content-end': !alLeft,'farris-form-controls-inline':isControlInline}\"\r\n                        #filterMainBasis>\r\n                        <ng-container *ngFor=\"let formItem of listFilterConditions\">\r\n                            <div *ngIf=\"!formItem.control.isExtend\" class=\"filter-input-list farris-group-wrap\"\r\n                                [ngClass]=\"{'filter-input-list-autolabel': autoLabel,'filter-input-list-checkbox': getControlType(formItem) === 'checkboxgroup', 'filter-input-list-expand':formExpand,'filter-input-list-left': alLeft}\"\r\n                                [id]=\"'filter-'+formItem.id\">\r\n                                <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                                    [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n                <div class=\"filter-search-btn\" [ngClass]=\"{'filter-search-btn-remove': !showMoreIcon}\"\r\n                    *ngIf=\"!liveSearch\">\r\n                    <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                        (click)=\"filterClick()\">{{ 'listFilter.filter' | locale }}</button>\r\n                    <button class=\"btn btn-secondary filter-search-btn-reset\" *ngIf=\"!showMoreIcon\"\r\n                        (click)=\"resetSearch()\">\r\n                        <span class=\"f-icon f-icon-remove\"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <ng-template #gridLayout>\r\n            <div class=\"filter-inputs-main f-form-layout farris-form\" [ngClass]=\"\r\n                {'list-filter-type-1': getShowLength() === 1,\r\n                'list-filter-type-2': getShowLength() === 2,\r\n                'list-filter-type-3': getShowLength() === 3,\r\n                'list-filter-type-4': getShowLength() === 4,\r\n                'list-filter-type-5': getShowLength() === 5,\r\n                'list-filter-type-6': getShowLength() >= 6,\r\n                'list-filter-custom-type': this.filterClass,\r\n                'list-filter-show-reset': !showMoreIcon,\r\n                'list-filter-padding-none': liveSearch,\r\n                'farris-form-controls-inline':isControlInline}\">\r\n                <ng-container *ngFor=\"let formItem of listFilterConditions\">\r\n                    <div [ngClass]=\"getStyle(formItem)\" *ngIf=\"!formItem.control.isExtend\">\r\n                        <div class=\"filter-input-list farris-group-wrap\"\r\n                            [ngClass]=\"{'filter-input-list-autolabel': autoLabel,'filter-input-list-checkbox': getControlType(formItem) === 'checkboxgroup'}\"\r\n                            [id]=\"'filter-'+formItem.id\">\r\n                            <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                                [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n                <div class=\"filter-search-btn\" [ngClass]=\"{\r\n                    'filter-search-btn-type-1': getShowLength() === 1,\r\n                    'filter-search-btn-type-2': getShowLength() === 2,\r\n                    'filter-search-btn-type-3': getShowLength() === 3,\r\n                    'filter-search-btn-type-4': getShowLength() === 4,\r\n                    'filter-search-btn-type-5': getShowLength() === 5,\r\n                    'filter-search-custom-type': this.filterClass,\r\n                    'filter-search-btn-type-6': getShowLength() >= 6}\" *ngIf=\"!liveSearch\">\r\n                    <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                        (click)=\"filterClick()\">{{ 'listFilter.filter' | locale }}</button>\r\n                    <button class=\"btn btn-secondary filter-search-btn-reset\" *ngIf=\"!showMoreIcon\"\r\n                        (click)=\"resetSearch()\">\r\n                        <span class=\"f-icon f-icon-remove\"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n    </ng-template>\r\n    <div class=\"filter-expand position-absolute\" [class.active]=\"showFilter\" (click)=\"showFilter = !showFilter\"\r\n        *ngIf=\"showMoreIcon\">\r\n        <span class=\"f-icon f-icon-filtrate\"></span>\r\n        <span class=\"filter-expand-tag\" *ngIf=\"showExpandTag\"></span>\r\n    </div>\r\n    <div class=\"filter-inputs-extend position-absolute\" [hidden]=\"!showFilter\" *ngIf=\"showMoreIcon\">\r\n        <div class=\"filter-typelist-arrow\"></div>\r\n        <div class=\"farris-form farris-form-auto\" [ngClass]=\"{'farris-form-controls-inline':isControlInline}\">\r\n            <fieldset class=\"f-section-formgroup\">\r\n                <div class=\"f-section-formgroup-inputs\">\r\n                    <div class=\"col-12\">\r\n                        <ng-container *ngFor=\"let formItem of listFilterConditions\">\r\n                            <div class=\"filter-input-list farris-group-wrap\" *ngIf=\"formItem.control.isExtend\">\r\n                                <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                                    [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <div class=\"filter-form-btns text-right\">\r\n                <button class=\"btn btn-link filter-form-btn-reset\" (click)=\"resetSearch()\">{{ 'listFilter.reset' | locale }}</button>\r\n                <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\" (click)=\"listSearch()\">{{ 'listFilter.confirm' | locale }}</button>\r\n                <button class=\"btn btn-secondary\" (click)=\"listSearchCancel()\">{{ 'listFilter.cancel' | locale }}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<ng-template #filterInputTemplate let-item=\"item\">\r\n    <ng-container [ngSwitch]=\"item | controlType\">\r\n        <div class=\"filter-input-item filter-type-input\" *ngSwitchCase=\"'input'\">\r\n            <app-filter-input [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-input>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-search\" *ngSwitchCase=\"'search'\">\r\n            <app-filter-search [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-search>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'date'\">\r\n            <app-filter-date [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-year\" *ngSwitchCase=\"'year'\">\r\n            <app-filter-date [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\" [showType]=\"'3'\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-month\" *ngSwitchCase=\"'month'\">\r\n            <app-filter-date [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\" [showType]=\"'2'\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'daterange'\">\r\n            <app-filter-daterange [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'daterangetime'\">\r\n            <app-filter-daterange [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\" [showTime]=\"true\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-monthrange\" *ngSwitchCase=\"'monthrange'\">\r\n            <app-filter-daterange [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\" [showType]=\"'2'\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-yearrange\" *ngSwitchCase=\"'yearrange'\">\r\n            <app-filter-daterange [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\" [showType]=\"'3'\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-dropdown\" *ngSwitchCase=\"'dropdown'\">\r\n            <app-filter-dropdown [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-dropdown>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-number\" *ngSwitchCase=\"'number'\">\r\n            <app-filter-number [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-number>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-help\" *ngSwitchCase=\"'help'\">\r\n            <app-filter-help [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\" [hostRef]=\"this\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-help>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-checkboxgroup\" *ngSwitchCase=\"'checkboxgroup'\">\r\n            <app-filter-checkbox [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-checkbox>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-radio\" *ngSwitchCase=\"'radio'\">\r\n            <app-filter-radio [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-radio>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-input-group\" *ngSwitchCase=\"'input-group'\">\r\n            <app-filter-inputgroup [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-inputgroup>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-default\" *ngSwitchDefault>\r\n            <app-filter-input [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-input>\r\n        </div>\r\n    </ng-container>\r\n</ng-template>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["::-webkit-scrollbar{width:6px;height:6px;background-color:#eee}::-webkit-scrollbar-track{border-radius:0}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15);-webkit-transition:.2s;transition:.2s;border-radius:6px}::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.45)}.filter-search-btn-col{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%}.filter-search-btn-absoulte{position:absolute;right:0;top:0}.f-list-filter .filter-inputs-main-basis-wrapper{width:100%;overflow:hidden}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn{position:relative;padding-right:84px}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn.list-filter-wrapper-show-btn-remove{padding-right:124px}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn .filter-search-btn{position:absolute;right:0;top:0}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn .filter-search-btn .btn{margin-left:6px}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn .filter-search-btn .btn:first-child{margin-left:0}.f-list-filter .filter-inputs-main-basis-wrapper .filter-inputs-main-basis-wrapper-inner{width:100%;overflow:auto}.f-list-filter .filter-inputs-main-basis-wrapper .filter-inputs-main-basis-wrapper-inner .filter-inputs-main-basis.justify-content-end{margin-left:auto}.f-list-filter.list-filter-padding{padding-right:45px}.f-list-filter.list-filter-autoWidth{padding-bottom:8px}.f-list-filter.list-filter-autoWidth.list-filter-paddingnone{padding-bottom:0}@media (min-width:768px){.f-list-filter .list-filter-type-1{position:static;padding-right:0}.f-list-filter .list-filter-type-2,.f-list-filter .list-filter-type-3{position:relative;padding-right:70px}}@media (max-width:767px){.f-list-filter .list-filter-type-1{position:relative;padding-right:70px}.f-list-filter .list-filter-type-1.list-filter-show-reset{padding-right:110px}.f-list-filter .list-filter-type-2,.f-list-filter .list-filter-type-3{position:relative;padding-right:70px}.f-list-filter .list-filter-type-2.list-filter-show-reset,.f-list-filter .list-filter-type-3.list-filter-show-reset{position:relative;padding-right:110px}}@media (min-width:1200px){.f-list-filter .list-filter-type-2,.f-list-filter .list-filter-type-3{position:static;padding-right:0}.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:relative;padding-right:70px}}@media (max-width:767px){.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:relative;padding-right:70px}.f-list-filter .list-filter-type-4.list-filter-show-reset,.f-list-filter .list-filter-type-5.list-filter-show-reset{position:relative;padding-right:110px}}@media (min-width:768px){.f-list-filter .list-filter-type-2.list-filter-show-reset,.f-list-filter .list-filter-type-3.list-filter-show-reset{position:relative;padding-right:110px}.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:relative;padding-right:70px}.f-list-filter .list-filter-type-4.list-filter-show-reset,.f-list-filter .list-filter-type-5.list-filter-show-reset{position:relative;padding-right:110px}}@media (min-width:1690px){.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:static;padding-right:0}}@media (min-width:1200px){.f-list-filter .list-filter-type-4.list-filter-show-reset,.f-list-filter .list-filter-type-5.list-filter-show-reset{position:relative;padding-right:110px}}.f-list-filter .list-filter-custom-type,.f-list-filter .list-filter-type-6{position:relative;padding-right:70px}.f-list-filter .list-filter-custom-type.list-filter-show-reset,.f-list-filter .list-filter-type-6.list-filter-show-reset{padding-right:110px}.f-list-filter .list-filter-padding-none{padding-right:0}.f-list-filter .filter-inputs-main{width:100%;overflow:hidden}.f-list-filter .filter-inputs-main .col-12{padding-left:0}.f-list-filter .filter-inputs-main.filter-inputs-main-padding{padding-right:70px;position:relative}.f-list-filter .filter-inputs-main .filter-input-list.filter-input-list-autolabel{padding-right:14px}.f-list-filter .filter-inputs-main .filter-input-list.filter-input-list-autolabel:last-child{padding-right:0}.f-list-filter .filter-inputs-main .filter-input-list.filter-input-list-checkbox{max-width:none;-webkit-box-flex:inherit;flex:inherit}@media (max-width:767px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-1{position:absolute;right:0;top:0}}@media (min-width:768px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-1{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%;position:static}.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-2,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-3{position:absolute;right:0;top:0}}@media (max-width:767px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-2,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-3{position:absolute;right:0;top:0}}@media (min-width:1200px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-2,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-3{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%;position:static}.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{position:absolute;right:0;top:0}}@media (max-width:767px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{position:absolute;right:0;top:0}}@media (min-width:768px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{position:absolute;right:0;top:0}}@media (min-width:1690px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%;position:static}}.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-6,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-custom-type{position:absolute;right:0;top:0}.f-list-filter .filter-inputs-main .filter-search-btn .btn{margin-left:6px}.f-list-filter .filter-inputs-main .filter-search-btn .btn:first-child{margin-left:0}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list{min-width:200px}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list .filter-input-item .form-group{margin-bottom:0}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list.filter-input-list-left{-webkit-box-flex:1;flex:1 1 auto}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list.filter-input-list-expand{max-width:none}.f-list-filter .filter-inputs-main.filter-inputs-main-basis.justify-content-end .filter-input-list:not(.filter-input-list-checkbox){-webkit-box-flex:1;flex:auto}.f-list-filter .filter-expand{right:0;top:0;width:24px;margin-left:21px;height:24px;line-height:24px;cursor:pointer}.f-list-filter .filter-expand.active{border-radius:2px}.f-list-filter .filter-expand .f-icon{display:block;line-height:24px;margin:0 auto;font-size:18px}.f-list-filter .filter-expand .filter-expand-tag{position:absolute;right:0;top:0;display:block;width:6px;height:6px;border-radius:50%}.f-list-filter .filter-inputs-extend{width:429px;right:0;top:34px;background-color:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.15);z-index:900;padding:20px 0}.f-list-filter .filter-inputs-extend .filter-typelist-arrow{display:block;position:absolute;right:7px;top:-4px;width:8.48528137px;height:8.48528137px;background:0 0;border-style:solid;border-width:4.24264069px;box-shadow:-2px -2px 5px rgba(0,0,0,.08);-webkit-transform:translateX(-50%) rotate(45deg);transform:translateX(-50%) rotate(45deg);border-color:#fff transparent transparent #fff}.f-list-filter .filter-inputs-extend .filter-form-btns{margin-top:6px;padding:0 14px}.f-list-filter .filter-inputs-extend .filter-form-btns .btn{margin-left:6px}.f-list-filter .filter-inputs-extend .filter-form-btns .filter-form-btn-reset{position:relative;padding-right:10px;margin-right:4px}.f-list-filter .filter-inputs-extend .filter-form-btns .filter-form-btn-reset::after{content:'';position:absolute;right:0;top:50%;width:1px;height:16px;margin-top:-8px;background:#d9d9d9}.f-list-filter .filter-search-btn-reset{padding-left:4px;padding-right:4px;color:rgba(0,0,0,.65)}.f-list-filter .filter-input-list .form-group{display:block}.f-list-filter .farris-form-controls-inline .filter-input-list .form-group{display:-webkit-box;display:flex}.f-list-filter .filter-inputs-main-list .filter-input-item .farris-form-group{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.f-list-filter .filter-inputs-main-list .filter-list-item{padding-right:100px}.f-list-filter .filter-inputs-main-list .filter-list-item .filter-input-list{position:relative}.f-list-filter .filter-inputs-main-list .filter-list-item .filter-search-btn{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;position:absolute;top:50%;left:calc(100% + 20px);-webkit-transform:translateY(-50%);transform:translateY(-50%)}.filter-expand-simulate{opacity:0;display:inline-block;width:24px;height:24px;padding-left:21px}.filter-expand-simulate .f-icon{font-size:24px}"]
                }] }
    ];
    /** @nocollapse */
    ListFilterComponent.ctorParameters = function () { return [
        { type: ListFilterService },
        { type: ChangeDetectorRef },
        { type: QuerySolutionService },
        { type: ConvertorService },
        { type: Renderer2 },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    ListFilterComponent.propDecorators = {
        filterMainBasisRef: [{ type: ViewChild, args: ['filterMainBasis',] }],
        alLeft: [{ type: Input }],
        autoWidth: [{ type: Input }],
        liveSearch: [{ type: Input }],
        autoLabel: [{ type: Input }],
        disabled: [{ type: Input }],
        filterClass: [{ type: Input }],
        filterPaddingNone: [{ type: Input }],
        filterType: [{ type: Input }],
        defaultValue: [{ type: Input }],
        query: [{ type: Output }],
        searchChange: [{ type: Output }],
        filterList: [{ type: Input }]
    };
    return ListFilterComponent;
}());
export { ListFilterComponent };
if (false) {
    /** @type {?} */
    ListFilterComponent.prototype.filterMainBasisRef;
    /** @type {?} */
    ListFilterComponent.prototype.alLeft;
    /** @type {?} */
    ListFilterComponent.prototype.autoWidth;
    /** @type {?} */
    ListFilterComponent.prototype.liveSearch;
    /** @type {?} */
    ListFilterComponent.prototype.autoLabel;
    /** @type {?} */
    ListFilterComponent.prototype.disabled;
    /** @type {?} */
    ListFilterComponent.prototype.filterClass;
    /** @type {?} */
    ListFilterComponent.prototype.filterPaddingNone;
    /** @type {?} */
    ListFilterComponent.prototype.filterType;
    /** @type {?} */
    ListFilterComponent.prototype._defaultValue;
    /** @type {?} */
    ListFilterComponent.prototype.query;
    /** @type {?} */
    ListFilterComponent.prototype.searchChange;
    /** @type {?} */
    ListFilterComponent.prototype.filterDatas;
    /** @type {?} */
    ListFilterComponent.prototype.showExpandTag;
    /**
     * 搜索表单列表
     * @type {?}
     */
    ListFilterComponent.prototype._filterList;
    /**
     * 是否需要显示展开更多icon
     * @type {?}
     */
    ListFilterComponent.prototype.showMoreIcon;
    /** @type {?} */
    ListFilterComponent.prototype.showFilter;
    /** @type {?} */
    ListFilterComponent.prototype.formExpand;
    /**
     * 循环表单
     * @type {?}
     */
    ListFilterComponent.prototype.listFilterConditions;
    /**
     * 用来存储setvalue前数据
     * @type {?}
     */
    ListFilterComponent.prototype.stagListFilterConditions;
    /**
     * 记录默认收起的搜索表单列表
     * @type {?}
     */
    ListFilterComponent.prototype.extendFilterList;
    /**
     * 记录显示的搜索表单列表
     * @type {?}
     */
    ListFilterComponent.prototype.showFilterList;
    /**
     * 显示中表单的必填项
     * @type {?}
     */
    ListFilterComponent.prototype.requiredListFilter;
    /**
     * 表单是否允许提交
     * @type {?}
     */
    ListFilterComponent.prototype.canSubmit;
    /**
     * 扩展表单是否允许提交
     * @type {?}
     */
    ListFilterComponent.prototype.localeIds;
    /** @type {?} */
    ListFilterComponent.prototype.currentLocale;
    /** @type {?} */
    ListFilterComponent.prototype.isControlInline;
    /**
     * 组件服务接口
     * @type {?}
     */
    ListFilterComponent.prototype.listfilterHandler;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.handler;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.convertorService;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1maWx0ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1saXN0LWZpbHRlci8iLCJzb3VyY2VzIjpbImxpYi9saXN0LWZpbHRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUFVLEtBQUssRUFBRSxTQUFTLEVBQWlCLGlCQUFpQixFQUNyRSx1QkFBdUIsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFDekQsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFDeEQsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQy9FLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzlELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUM5RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDOUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUNsRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDOUQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFFaEYsT0FBTyxFQUFxQix3QkFBd0IsRUFBRSxNQUFNLCtCQUErQixD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LE9BQU8sTUFBTSxDQUFDO2FBQ2pCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxLQUFLLEVBQUU7Z0JBQzdFLE9BQU8sT0FBTyxDQUFDO2FBQ2xCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxJQUFJLEVBQUU7Z0JBQzVFLE9BQU8sTUFBTSxDQUFDO2FBQ2pCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxTQUFTLEVBQUU7Z0JBQ2pGLE9BQU8sV0FBVyxDQUFDO2FBQ3RCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxhQUFhLEVBQUU7Z0JBQ3JGLE9BQU8sZUFBZSxDQUFDO2FBQzFCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxVQUFVLEVBQUU7Z0JBQ2xGLE9BQU8sWUFBWSxDQUFDO2FBQ3ZCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxTQUFTLEVBQUU7Z0JBQ2pGLE9BQU8sV0FBVyxDQUFDO2FBQ3RCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxRQUFRLEVBQUU7Z0JBQ2hGLE9BQU8sVUFBVSxDQUFDO2FBQ3JCO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxXQUFXLEVBQUU7Z0JBQ25GLE9BQU8sUUFBUSxDQUFDO2FBQ25CO2lCQUFNLElBQUksc0JBQXNCLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxJQUFJLEVBQUU7Z0JBQzVFLE9BQU8sTUFBTSxDQUFDO2FBQ2pCO2lCQUFNLElBQUksc0JB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O0lBQ3JDLDJDQUE0Qzs7SUFFNUMsMENBQWdDOztJQU9oQyw0Q0FBc0I7Ozs7O0lBWXRCLDBDQUF3Qjs7Ozs7SUFHeEIsMkNBQXFCOztJQUVyQix5Q0FBbUI7O0lBRW5CLHlDQUFtQjs7Ozs7SUFNbkIsbURBQTBFOzs7OztJQUUxRSx1REFBOEU7Ozs7O0lBRTlFLCtDQUE2Qzs7Ozs7SUFFN0MsNkNBQTJDOzs7OztJQUUzQyxpREFBK0M7Ozs7O0lBSS9DLHdDQUFrQjs7Ozs7SUFJbEIsd0NBR0U7O0lBQ0YsNENBQXlCOztJQUN6Qiw4Q0FBdUI7Ozs7O0lBY3ZCLGdEQUFxQzs7Ozs7SUFHakMsNENBQXdDOzs7OztJQUN4QyxpQ0FBNkI7Ozs7O0lBQzdCLHNDQUFxQzs7Ozs7SUFDckMsK0NBQTBDOzs7OztJQUMxQyxxQ0FBeUI7Ozs7O0lBQ3pCLHVDQUFzQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEVsZW1lbnRSZWYsXHJcbiAgICBSZW5kZXJlcjIsIEluamVjdG9yLCBMT0NBTEVfSUQsIE9wdGlvbmFsLCBJbmplY3RGbGFnc1xyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGaWVsZENvbmZpZyB9IGZyb20gJy4vZW50aXR5L2ZpZWxkY29uZmlnL2ZpZWxkY29uZmlnJztcclxuaW1wb3J0IHsgUXVlcnlDb25kaXRpb24gfSBmcm9tICcuL2VudGl0eS9xdWVyeWNvbmRpdGlvbic7XHJcbmltcG9ydCB7IENvbnRyb2xUeXBlIH0gZnJvbSAnLi9lbnRpdHkvY29udHJvbHR5cGUnO1xyXG5pbXBvcnQgeyBMaXN0RmlsdGVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZS9saXN0LWZpbHRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUXVlcnlTb2x1dGlvblNlcnZpY2UgfSBmcm9tICcuL3N1Ym1pdGhhbmRsZXJzL3F1ZXJ5LXNvbHV0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb252ZXJ0b3JTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2NvbnZlcnRvcnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUZXh0VmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS90ZXh0dmFsdWUnO1xyXG5pbXBvcnQgeyBIZWxwVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9oZWxwdmFsdWUnO1xyXG5pbXBvcnQgeyBEcm9wRG93bkxpc3RWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2Ryb3Bkb3dubGlzdHZhbHVlJztcclxuaW1wb3J0IHsgRGF0ZVJhbmdlVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9kYXRlcmFuZ2V2YWx1ZSc7XHJcbmltcG9ydCB7IE51bWJlclJhbmdlVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9udW1iZXJyYW5nZXZhdWUnO1xyXG5pbXBvcnQgeyBTZWFyY2hWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3NlYXJjaHZhbHVlJztcclxuaW1wb3J0IHsgRGF0ZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvZGF0ZXZhbHVlJztcclxuaW1wb3J0IHsgQ2hlY2tib3hHcm91cFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvY2hlY2tib3hncm91cHZhbHVlJztcclxuaW1wb3J0IHsgRGF0ZVJhbmdlVGltZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvZGF0ZXJhbmdldGltZXZhbHVlJztcclxuaW1wb3J0IHsgTGlzdEZpbHRlckhhbmRsZXIsIExJU1RGSUxURVJfSEFORExFUl9UT0tFTiB9IGZyb20gJy4vaW50ZXJmYWNlL0lpc3RGaWx0ZXJIYW5kbGVyJztcclxuaW1wb3J0IHsgUmFkaW9Hcm91cFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvcmFkaW92YWx1ZSc7XHJcbmltcG9ydCB7IE1vbnRoVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9tb250aCc7XHJcbmltcG9ydCB7IFllYXJWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3llYXJ2YWx1ZSc7XHJcbmltcG9ydCB7IFllYXJSYW5nZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUveWVhcnJhbmdlJztcclxuaW1wb3J0IHsgTW9udGhSYW5nZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvbW9udGhyYW5nZSc7XHJcbmltcG9ydCB7IElucHV0R3JvdXBWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2lucHV0Z3JvdXAnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1saXN0LWZpbHRlcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vbGlzdC1maWx0ZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vbGlzdC1maWx0ZXIuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBMaXN0RmlsdGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdmaWx0ZXJNYWluQmFzaXMnKSBmaWx0ZXJNYWluQmFzaXNSZWY6IEVsZW1lbnRSZWY7XHJcbiAgICAvLyAg6KGo5Y2V5bem5a+56b2QXHJcbiAgICBASW5wdXQoKSBhbExlZnQgPSBmYWxzZTtcclxuICAgIC8vICDlubPliIbnqbrpl7RcclxuICAgIEBJbnB1dCgpIGF1dG9XaWR0aCA9IHRydWU7XHJcbiAgICAvLyAg5a6e5pe25pCc57SiXHJcbiAgICBASW5wdXQoKSBsaXZlU2VhcmNoID0gZmFsc2U7XHJcbiAgICAvLyAgbGFiZWznmoTlrr3luqbmmK/lkKboh6rpgILlupRcclxuICAgIEBJbnB1dCgpIGF1dG9MYWJlbCA9IGZhbHNlO1xyXG4gICAgLy8gIOaYr+WQpuemgeeUqFxyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBmaWx0ZXJDbGFzczogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgZmlsdGVyUGFkZGluZ05vbmUgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBmaWx0ZXJUeXBlOiBzdHJpbmc7XHJcbiAgICAvLyDliJ3lp4vljJblgLxcclxuICAgIF9kZWZhdWx0VmFsdWU6IEZpZWxkQ29uZmlnW107XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRlZmF1bHRWYWx1ZShjb25maWdzOiBGaWVsZENvbmZpZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gY29uZmlncztcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJWYWx1ZSh0aGlzLl9kZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRlZmF1bHRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIEBPdXRwdXQoKSBxdWVyeSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWFyY2hDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgZmlsdGVyRGF0YXM6IEFycmF5PEZpZWxkQ29uZmlnPjtcclxuICAgIC8vICBmaWx0ZXJXaWR0aDpudW1iZXIgPSAxMDAwO1xyXG4gICAgLy8gIOagh+iusOaYr+WQpuaciea7muWKqOadoVxyXG4gICAgLy8gIGhhc1Njcm9sbCA9IHRydWU7XHJcbiAgICAvLyAg6ZyA6KaB55uR5ZCs5pS25oqY55qE6KGo5Y2VXHJcbiAgICAvLyAgcmVzaXplR3JvdXBzOiBsaXN0RmlsdGVyR3JvdXA7XHJcbiAgICAvLyDnrZvpgIlpY29u6YOo5YiG5bCP57qi54K5XHJcbiAgICBzaG93RXhwYW5kVGFnID0gZmFsc2U7XHJcbiAgICAvLyAg5ZON5bqU5byP5a655ZmoXHJcbiAgICAvLyAgQFZpZXdDaGlsZCgncmVzaXplZENvbnRhaW5lcicpIHJlc2l6ZWRDb250YWluZXJFbDtcclxuICAgIC8vICDlk43lupTlvI/lhoXlrrnlrrnlmahcclxuICAgIC8vICBAVmlld0NoaWxkKCdyZXNpemVkQ29udGVudCcpIHJlc2l6ZWRDb250ZW50RWw7XHJcbiAgICAvLyAgQFZpZXdDaGlsZCgncmVzaXplTGlzdHMnKSByZXNpemVMaXN0c0VsO1xyXG4gICAgLy8gIEBWaWV3Q2hpbGQoJ3NpbXVsYXRlRXh0ZW5kJykgc2ltdWxhdGVFeHRlbmRFbDtcclxuXHJcbiAgICAvLyAgQFZpZXdDaGlsZCgncmVzaXplZENvbnRhaW5lcicsIHsgcmVhZDogRlJlc2l6ZWREaXJlY3RpdmUgfSlcclxuICAgIC8vICByZXNpemVkQ29udGFpbmVyRGlyZWN0aXZlOiBGUmVzaXplZERpcmVjdGl2ZTtcclxuXHJcbiAgICAvKiog5pCc57Si6KGo5Y2V5YiX6KGoICovXHJcbiAgICBfZmlsdGVyTGlzdDogQXJyYXk8YW55PjtcclxuXHJcbiAgICAvKiog5piv5ZCm6ZyA6KaB5pi+56S65bGV5byA5pu05aSaaWNvbiAqL1xyXG4gICAgc2hvd01vcmVJY29uID0gZmFsc2U7XHJcbiAgICAvLyAgbW9yZUljb25XaWR0aDpudW1iZXIgPSAwO1xyXG4gICAgc2hvd0ZpbHRlciA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5bGV546w5Ye655qE5Y+q5pyJ5LiA5Liq5pCc57Si5o6n5Lu2XHJcbiAgICBmb3JtRXhwYW5kID0gZmFsc2U7XHJcbiAgICAvLyDmj5DkuqTooajljZXmlbDmja5cclxuICAgIC8vICBxdWVyeUxpc3Q7XHJcbiAgICAvLyDpmpDol4/mj5DkuqTooajljZXmlbDmja5cclxuICAgIC8vICBleHRlbmRxdWVyeUxpc3Q7XHJcbiAgICAvKiog5b6q546v6KGo5Y2VICovXHJcbiAgICBsaXN0RmlsdGVyQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgLyoqIOeUqOadpeWtmOWCqHNldHZhbHVl5YmN5pWw5o2uICovXHJcbiAgICBzdGFnTGlzdEZpbHRlckNvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDorrDlvZXpu5jorqTmlLbotbfnmoTmkJzntKLooajljZXliJfooaggKi9cclxuICAgIGV4dGVuZEZpbHRlckxpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IFtdO1xyXG4gICAgLyoqIOiusOW9leaYvuekuueahOaQnOe0ouihqOWNleWIl+ihqCAqL1xyXG4gICAgc2hvd0ZpbHRlckxpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IFtdO1xyXG4gICAgLyoqIOaYvuekuuS4reihqOWNleeahOW/heWhq+mhuSAqL1xyXG4gICAgcmVxdWlyZWRMaXN0RmlsdGVyOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBbXTtcclxuICAgIC8qKiDpmpDol4/kuK3ooajljZXnmoTlv4XloavpobkgKi9cclxuICAgIC8vICBleHRlbmRSZXF1aXJlZExpc3RGaWx0ZXI6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IFtdO1xyXG4gICAgLyoqIOihqOWNleaYr+WQpuWFgeiuuOaPkOS6pCAqL1xyXG4gICAgY2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAvKiog5omp5bGV6KGo5Y2V5piv5ZCm5YWB6K645o+Q5LqkICovXHJcbiAgICAvLyAgZXh0ZW5kQ2FuU3VibWl0OmJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBsb2NhbGVJZHMgPSB7XHJcbiAgICAgICAgZW46ICdlbicsXHJcbiAgICAgICAgJ3poLUNIUyc6ICd6aC1DSFMnXHJcbiAgICB9O1xyXG4gICAgY3VycmVudExvY2FsZSA9ICd6aC1DSFMnO1xyXG4gICAgaXNDb250cm9sSW5saW5lID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGZpbHRlckxpc3QoKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbHRlckxpc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgZmlsdGVyTGlzdChmaWx0ZXJMaXN0OiBBcnJheTxhbnk+KSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyTGlzdCA9IGZpbHRlckxpc3Q7XHJcbiAgICAgICAgdGhpcy5pbml0RmlsdGVyTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uE5Lu25pyN5Yqh5o6l5Y+jXHJcbiAgICAgKi9cclxuICAgIGxpc3RmaWx0ZXJIYW5kbGVyOiBMaXN0RmlsdGVySGFuZGxlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGZpbHRlclNlcnZpY2U6IExpc3RGaWx0ZXJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlcjogUXVlcnlTb2x1dGlvblNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBjb252ZXJ0b3JTZXJ2aWNlOiBDb252ZXJ0b3JTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICApIHtcclxuICAgICAgICBpZiAodGhpcy5pbmplY3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhbGUgPSB0aGlzLmluamVjdG9yLmdldChMT0NBTEVfSUQpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RmaWx0ZXJIYW5kbGVyID0gdGhpcy5pbmplY3Rvci5nZXQ8TGlzdEZpbHRlckhhbmRsZXI+KExJU1RGSUxURVJfSEFORExFUl9UT0tFTiwgbnVsbCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50TG9jYWxlID09PSB0aGlzLmxvY2FsZUlkc1snZW4nXSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ29udHJvbElubGluZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNDb250cm9sSW5saW5lID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYW5TaG93TW9yZUljb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1dpZHRoICYmICF0aGlzLmZvcm1FeHBhbmQgJiYgdGhpcy5maWx0ZXJNYWluQmFzaXNSZWYpIHtcclxuICAgICAgICAgICAgY29uc3QgYmFzaWNMaXN0ID0gdGhpcy5maWx0ZXJNYWluQmFzaXNSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyLWlucHV0LWxpc3QnKTtcclxuICAgICAgICAgICAgbGV0IGJhc2ljV2lkdGggPSAwO1xyXG4gICAgICAgICAgICBpZiAoYmFzaWNMaXN0ICYmIGJhc2ljTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgYmFzaWNMaXN0Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2ZmVyA9IE1hdGguY2VpbChwYXJzZUZsb2F0KGJhc2ljTGlzdFtrXS5vZmZzZXRXaWR0aCB8fCAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZlcgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2ljV2lkdGggKz0gb2ZmVztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJhc2ljV2lkdGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmZpbHRlck1haW5CYXNpc1JlZi5uYXRpdmVFbGVtZW50LCAnd2lkdGgnLCBiYXNpY1dpZHRoICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqIOWIneWni+WMluWkhOeQhuihqOWNleaVsOaNriAqL1xyXG4gICAgaW5pdEZpbHRlckxpc3QoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgICAgICB0aGlzLmV4dGVuZEZpbHRlckxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLnNob3dGaWx0ZXJMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5maWx0ZXJEYXRhcyA9IHRoaXMuZmlsdGVyU2VydmljZS5maWVsZFNjaGVtYXNDb252ZXJ0KHRoaXMuX2ZpbHRlckxpc3QpO1xyXG4gICAgICAgIGlmICh0aGlzLmZpbHRlckRhdGFzICYmIHRoaXMuZmlsdGVyRGF0YXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgPSB0aGlzLmNvbnZlcnRvclNlcnZpY2UuZ2V0U2VsZWN0ZWRGaWVsZENvbmRpdGlvbnModGhpcy5maWx0ZXJEYXRhcywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ0xpc3RGaWx0ZXJDb25kaXRpb25zID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICAgICAgLy8g5a2Y5YKo5omp5bGV6aG55ZKM6buY6K6k5bGV56S66KGo5Y2VXHJcbiAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuY29udHJvbC5pc0V4dGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kRmlsdGVyTGlzdC5wdXNoKGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmlsdGVyTGlzdC5wdXNoKGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuaYr+W3puWvuem9kCDlj6rmnInkuIDkuKrmkJzntKJcclxuICAgICAgICAgICAgY29uc3QgX2Jhc2lzRmlsdGVyTGlzdCA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZmlsdGVyKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFmaWVsZC5jb250cm9sLmlzRXh0ZW5kO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZiAoX2Jhc2lzRmlsdGVyTGlzdCAmJiBfYmFzaXNGaWx0ZXJMaXN0Lmxlbmd0aCA9PT0gMSAmJiB0aGlzLmdldENvbnRyb2xUeXBlKF9iYXNpc0ZpbHRlckxpc3RbMF0pID09PSAnc2VhcmNoJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtRXhwYW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaENoYW5nZS5lbWl0KHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmluU2V0Q3VycmVudEZpbHRlckNvbmRpdGlvbnMoKTtcclxuICAgICAgICAgICAgLy8g5a2Y5YKo6buY6K6k5bGV56S65Lit5b+F5aGr6aG5XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRMaXN0SW5pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhblNob3dNb3JlSWNvbigpO1xyXG4gICAgICAgICAgICAvLyAgdGhpcy5saXN0U2VhcmNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RmaWx0ZXJIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGZpbHRlckhhbmRsZXIuc2V0Q3VycmVudEZpbHRlckNvbmRpdGlvbnModGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaOp+S7tuexu+Wei1xyXG4gICAgICogQHBhcmFtIHNlbGVjdGVkRmllbGRDb25kaXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0Q29udHJvbFR5cGUoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24pOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2lucHV0JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5TZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2RhdGUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ21vbnRoJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3llYXInO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdkYXRlcmFuZ2UnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZGF0ZXJhbmdldGltZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTW9udGhSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdtb250aHJhbmdlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAneWVhcnJhbmdlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Ecm9wRG93bikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdkcm9wZG93bic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbnVtYmVyJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5IZWxwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hlbHAnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnY2hlY2tib3hncm91cCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuUmFkaW8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAncmFkaW8nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLklucHV0R3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaW5wdXQtZ3JvdXAnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdpbnB1dCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqIOiOt+W+l+exu+WQjSAqL1xyXG4gICAgZ2V0U3R5bGUoY3VycmVudEl0ZW06IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdENvbmR0aW9uU3R5bGUgPSAnY29sLTEyIGNvbC1tZC02IGNvbC14bC0zIGNvbC1lbC0yJztcclxuICAgICAgICByZXR1cm4gKHRoaXMuZmlsdGVyQ2xhc3MgJiYgIXRoaXMuYXV0b1dpZHRoKSA/IHRoaXMuZmlsdGVyQ2xhc3MgOiBkZWZhdWx0Q29uZHRpb25TdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm6ZyA6KaB5pi+56S65pu05aSa5oyJ6ZKuICovXHJcbiAgICBjYW5TaG93TW9yZUljb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5kRmlsdGVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd01vcmVJY29uID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dNb3JlSWNvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm5omA5pyJ5b+F5aGr6aG56YO95aGr5YaZ5a6M5q+VICovXHJcbiAgICBjYW5TdWJtaXRGaWx0ZXIocmVxdWlyZWxpc3QpIHtcclxuICAgICAgICBsZXQgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghcmVxdWlyZWxpc3QgfHwgIXJlcXVpcmVsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1DYW5TdWJtaXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1aXJlbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlcXVpcmVsaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHYgPSAoaXRlbS52YWx1ZSBhcyBUZXh0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0dikubGVuZ3RoIDwgMCB8fCAhdHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNodiA9IChpdGVtLnZhbHVlIGFzIEhlbHBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHNodikubGVuZ3RoID09PSAwIHx8ICFzaHYudmFsdWUgfHwgIXNodi52YWx1ZUZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRyb3BEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGR2ID0gKGl0ZW0udmFsdWUgYXMgRHJvcERvd25MaXN0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkZHYpLmxlbmd0aCA9PT0gMCB8fCAhZGR2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRydiA9IChpdGVtLnZhbHVlIGFzIERhdGVSYW5nZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZHJ2KS5sZW5ndGggPT09IDAgfHwgKCFkcnYuc3RhcnRUaW1lICYmICFkcnYuZW5kVGltZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRydiA9IChpdGVtLnZhbHVlIGFzIERhdGVSYW5nZVRpbWVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRydikubGVuZ3RoID09PSAwIHx8ICghZHJ2LnN0YXJ0VGltZSAmJiAhZHJ2LmVuZFRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLk1vbnRoUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtcnYgPSAoaXRlbS52YWx1ZSBhcyBNb250aFJhbmdlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhtcnYpLmxlbmd0aCA9PT0gMCB8fCAoIW1ydi5zdGFydFRpbWUgJiYgIW1ydi5lbmRUaW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5ZZWFyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB5cnYgPSAoaXRlbS52YWx1ZSBhcyBZZWFyUmFuZ2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHlydikubGVuZ3RoID09PSAwIHx8ICgheXJ2LnN0YXJ0VGltZSAmJiAheXJ2LmVuZFRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLk51bWJlclJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnJ2ID0gKGl0ZW0udmFsdWUgYXMgTnVtYmVyUmFuZ2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ydikubGVuZ3RoID09PSAwIHx8ICghbnJ2LnN0YXJ0VmFsdWUgJiYgIW5ydi5lbmRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3YgPSAoaXRlbS52YWx1ZSBhcyBTZWFyY2hWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN2KS5sZW5ndGggPCAwIHx8ICFzdi52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHYgPSAoaXRlbS52YWx1ZSBhcyBEYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkdikubGVuZ3RoIDwgMCB8fCAhZHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuTW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtdiA9IChpdGVtLnZhbHVlIGFzIE1vbnRoVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhtdikubGVuZ3RoIDwgMCB8fCAhbXYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuWWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHl2ID0gKGl0ZW0udmFsdWUgYXMgWWVhclZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoeXYpLmxlbmd0aCA8IDAgfHwgIXl2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYmd2ID0gKGl0ZW0udmFsdWUgYXMgQ2hlY2tib3hHcm91cFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2JndikubGVuZ3RoID09PSAwIHx8IE9iamVjdC5rZXlzKGNiZ3YudmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5SYWRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRkdiA9IChpdGVtLnZhbHVlIGFzIFJhZGlvR3JvdXBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRkdikubGVuZ3RoID09PSAwIHx8ICFkZHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuSW5wdXRHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN2ID0gKGl0ZW0udmFsdWUgYXMgSW5wdXRHcm91cFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3YpLmxlbmd0aCA8IDAgfHwgIXN2LnRleHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtQ2FuU3VibWl0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKiog5pCc57Si6KGo5Y2V5Y+Y5YyWICovXHJcbiAgICBvblNlYXJjaCgkZXZlbnQsIGl0ZW0pIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgeyByZXR1cm47IH1cclxuICAgICAgICB0aGlzLnNlYXJjaENoYW5nZS5lbWl0KHsgaXRlbSwgY29uZGl0aW9uczogdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucywgaW5zdGFuY2U6IHRoaXN9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5jYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLnJlcXVpcmVkTGlzdEZpbHRlcik7XHJcbiAgICAgICAgaWYgKGl0ZW0uY29udHJvbC5pc0V4dGVuZCB8fCAhdGhpcy5jYW5TdWJtaXQgfHwgIXRoaXMubGl2ZVNlYXJjaCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3VibWl0KCdzaG93Rm9ybURhdGEnLCB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgIH1cclxuICAgIC8qKiDlvIDlp4vnrZvpgIkgKi9cclxuICAgIGZpbHRlckNsaWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICF0aGlzLmNhblN1Ym1pdCkgeyByZXR1cm47IH1cclxuICAgICAgICB0aGlzLnN1Ym1pdCgnc2hvd0Zvcm1EYXRhJywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICB9XHJcbiAgICAvKiog5pS25oqY6YOo5YiG54K55Ye756Gu5a6a5o+Q5LqkICovXHJcbiAgICBsaXN0U2VhcmNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICF0aGlzLmNhblN1Ym1pdCkgeyByZXR1cm47IH1cclxuICAgICAgICB0aGlzLnNob3dGaWx0ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN1Ym1pdCgnZXh0ZW5kRm9ybURhdGEnLCB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgIH1cclxuICAgIC8qKiDlj5bmtojmkJzntKIgKi9cclxuICAgIGxpc3RTZWFyY2hDYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93RmlsdGVyID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKiog5o+Q5Lqk6KGo5Y2VICovXHJcbiAgICBzdWJtaXQodHlwZSwgZmlsdGVybGlzdCkge1xyXG4gICAgICAgIGxldCBxdWVyeUxpc3Q7XHJcbiAgICAgICAgcXVlcnlMaXN0ID0gdGhpcy5oYW5kbGVyLnNldEZpbHRlckNvbmRpdGlvbnMoZmlsdGVybGlzdCk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2V4dGVuZEZvcm1EYXRhJykge1xyXG4gICAgICAgICAgICBpZiAocXVlcnlMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0V4cGFuZFRhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFeHBhbmRUYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnF1ZXJ5LmVtaXQoeyB0eXBlLCBkYXRhOiBKU09OLnN0cmluZ2lmeShxdWVyeUxpc3QpIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIOWvueWkluaPkOS+m+iOt+W+l+ihqOWNleaQnOe0ouaVsOaNriAqL1xyXG4gICAgZ2V0RmlsdGVyRGF0YSgpIHtcclxuICAgICAgICBsZXQgcXVlcnlMaXN0O1xyXG4gICAgICAgIHF1ZXJ5TGlzdCA9IHRoaXMuaGFuZGxlci5zZXRGaWx0ZXJDb25kaXRpb25zKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeUxpc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIOiOt+WPluWxleekuuWcqOWklumDqOeahOihqOWNlemVv+W6piAqL1xyXG4gICAgZ2V0U2hvd0xlbmd0aCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93RmlsdGVyTGlzdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93RmlsdGVyTGlzdC5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOa4heepuuadoeS7tiAqL1xyXG4gICAgcmVzZXRTZWFyY2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgJiYgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5mb3JFYWNoKGxpc3RGaWx0ZXJDb25kaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IFRleHRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5TZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IFNlYXJjaFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IERhdGVWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgTW9udGhWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBZZWFyVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBEYXRlUmFuZ2VWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aFJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBNb250aFJhbmdlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuWWVhclJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBZZWFyUmFuZ2VWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Ecm9wRG93bikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgRHJvcERvd25MaXN0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IE51bWJlclJhbmdlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgSGVscFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IENoZWNrYm94R3JvdXBWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5SYWRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgUmFkaW9Hcm91cFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLklucHV0R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IElucHV0R3JvdXBWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IFRleHRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gIGxldCBsaXN0RmlsdGVyID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5tYXAobyA9PiBPYmplY3QuYXNzaWduKHt9LCBvKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RGaWx0ZXIgPSB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLm1hcChvID0+ICh7IC4uLm8gfSkpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zID0gbGlzdEZpbHRlcjtcclxuICAgICAgICAgICAgdGhpcy5yZXF1aXJlZExpc3RJbml0KCk7XHJcbiAgICAgICAgICAgIC8vICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDorr7nva7pu5jorqTlgLxcclxuICAgIHNldEZpbHRlclZhbHVlKGZpZWxkQ29uZmlnczogRmllbGRDb25maWdbXSkge1xyXG4gICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgPSB0aGlzLnN0YWdMaXN0RmlsdGVyQ29uZGl0aW9ucy5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICBpZiAodGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyAmJiB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlcyh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLCBmaWVsZENvbmZpZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0RmlsdGVyID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyA9IGxpc3RGaWx0ZXI7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRMaXN0SW5pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaENoYW5nZS5lbWl0KHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmluU2V0Q3VycmVudEZpbHRlckNvbmRpdGlvbnMoKTtcclxuICAgICAgICAgICAgLy8gIHRoaXMubGlzdFNlYXJjaCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgdGhpcy5jYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLnJlcXVpcmVkTGlzdEZpbHRlcik7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TdWJtaXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdCgnc2hvd0Zvcm1EYXRhJywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g6K6+572udmFsdWVcclxuICAgIHNldFZhbHVlcyhjb25kaXRpb25zLCBmaWVsZENvbmZpZ3M6IEZpZWxkQ29uZmlnW10pIHtcclxuICAgICAgICBsZXQgcWM6IFF1ZXJ5Q29uZGl0aW9uO1xyXG4gICAgICAgIGxldCBjb250cm9sVHlwZTogc3RyaW5nO1xyXG4gICAgICAgIGlmIChmaWVsZENvbmZpZ3MgJiYgZmllbGRDb25maWdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmaWVsZENvbmZpZ3MuZm9yRWFjaCh2ID0+IHtcclxuICAgICAgICAgICAgICAgIHFjID0gY29uZGl0aW9ucy5maW5kKGMgPT4gYy5maWVsZENvZGUgPT0gdi5sYWJlbENvZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHFjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFR5cGUgPSB0aGlzLmdldENvbnRyb2xUeXBlKHFjKTtcclxuICAgICAgICAgICAgICAgICAgICBxYy52YWx1ZSA9IHRoaXMuZmlsdGVyU2VydmljZS5zZXRWYWx1ZXMoY29udHJvbFR5cGUsIHYudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoZmllbGROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBxdWVyeUxpc3QgPSB0aGlzLmhhbmRsZXIuc2V0RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICBjb25zdCBpdGVtID0gcXVlcnlMaXN0LmZpbmQoKG46IGFueSkgPT4gblsnRmlsdGVyRmllbGQnXSA9PT0gZmllbGROYW1lKTtcclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlv4XloavpobnliJ3lp4vljJZcclxuICAgIHJlcXVpcmVkTGlzdEluaXQoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWlyZWRMaXN0ID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5maWx0ZXIoKGxpc3RpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0aXRlbS5jb250cm9sLnJlcXVpcmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChyZXF1aXJlZExpc3QgJiYgcmVxdWlyZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVkTGlzdEZpbHRlciA9IHJlcXVpcmVkTGlzdDtcclxuICAgICAgICAgICAgdGhpcy5jYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLnJlcXVpcmVkTGlzdEZpbHRlcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckZpbHRlclZhbHVlKGZpZWxkczogYW55KSB7XHJcbiAgICAgICAgaWYgKGZpZWxkcyAmJiBmaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLm1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkcy5pbmRleE9mKG4uZmllbGRDb2RlLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLnZhbHVlLmNsZWFyVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZhbHVlcyh2YWx1ZXM6IHsgW2ZpZWxkOiBzdHJpbmddOiBhbnkgfSkge1xyXG4gICAgICAgIGlmICh2YWx1ZXMgJiYgT2JqZWN0LmtleXModmFsdWVzKSkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyh2YWx1ZXMpO1xyXG4gICAgICAgICAgICBmaWVsZHMuZm9yRWFjaCggZiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkcy5pbmRleE9mKG4uZmllbGRDb2RlLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi52YWx1ZVsndmFsdWUnXSA9IHZhbHVlc1tmXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=