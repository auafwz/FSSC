/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NgZone, ChangeDetectionStrategy } from '@angular/core';
import { ChangeDetectorRef } from '@angular/core';
import { Component, Input, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';
import { Subject } from 'rxjs';
export class FarrisButtonGroupComponent {
    /**
     * @param {?} changeRef
     * @param {?} ngZone
     */
    constructor(changeRef, ngZone) {
        this.changeRef = changeRef;
        this.ngZone = ngZone;
        // 是否自动纠正位置
        this.autoRectify = true;
        // 计算方向的真正placement
        this.realPlacement = 'bottom-right';
        // 重新计算后的placement
        this.rectifyPlacement = 'bottom-right';
        /* 显示的按钮数量  默认为2 */
        this.count = 2;
        /* 按钮大小 */
        this.size = 'small';
        /* 按钮样式 */
        this.type = 'primary';
        /* 按钮展示位置 */
        this._placement = "bottom";
        /* menu size */
        /**
         * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
         */
        this.width = 120;
        this.height = 250;
        this._menuWidth = 0;
        this._menuHeight = 0;
        /* 下拉按钮 触发事件 */
        this.changeState = new EventEmitter();
        /* 下拉菜单项点击事件 */
        this.change = new EventEmitter();
        this.click = new EventEmitter();
        /* 触发下拉按钮面板区域之外的事件 */
        this.clickMenuOut = new EventEmitter();
        /**
         * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
         */
        this.autoSize = false;
        /* 下拉面板显示 */
        this.show = false;
        this.setPosition$ = new Subject();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set placement(value) {
        if (!value) {
            return;
        }
        if (value !== this._placement) {
            this.realPlacement = this.getRealPlacement(value);
            this._placement = value;
        }
    }
    /**
     * @return {?}
     */
    get placement() {
        return this._placement;
    }
    /* 显示出来的按钮组 */
    /**
     * @return {?}
     */
    get flatButtons() {
        return this.data && this.data.slice(0, this.count);
    }
    /**
     * @return {?}
     */
    get dpButtons() {
        // this.height = this.dpButtons.length * 35;
        return this.data && this.data.slice(this.count);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // 初始化数据
    }
    /**
     * @param {?} simpleChanges
     * @return {?}
     */
    ngOnChanges(simpleChanges) {
        if (simpleChanges['data']) {
            // this.flatButtons = this.data.slice(0, this.count);
            // this.dpButtons = this.data.slice(this.count);
            // this.height = this.dpButtons.length * 35;
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
        if (this.show) {
            // const { height, width } = this.dpMenu.nativeElement.getBoundingClientRect();
            this.setPosition(this.event);
            // this.setPosition$.subscribe(res => this.setPosition(res, width, height));
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    clickEvent(e) {
        e.stopPropagation();
        this.show = !this.show;
        // body添加面板
        if (this.show) {
            this.appendBody();
            // this.setPosition(e);
            // this.setPosition$.next(e);
            this.event = e;
            // 绑定相应的事件
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                this.bindMenuMouseenter();
                this.bindiMenuMouseleave();
                // this.bindDocClick();
                this.mouseNotEnterLeave();
            }));
        }
        // 面板显示 脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        // this.changeState.emit({ originEvent: e, show: this.show });
        this.changeState.emit(this.show);
    }
    /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    toggle(e, btn) {
        e.stopPropagation();
        if (btn.disabled)
            return;
        this.show = false;
        // this.unbindDocClick();
        // 关闭下拉按钮面板  脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        this.change.emit(btn.id);
        this.click.emit(btn);
    }
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    appendBody() {
        if (this.dpMenu.nativeElement) {
            // 添加到body  便于全部显示
            document.body.appendChild(this.dpMenu.nativeElement);
        }
    }
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    changePlacement(btnSize) {
        if (!this.autoRectify) {
            return;
        }
        /** @type {?} */
        let referPosition = this.getReferencePosition();
        /** @type {?} */
        let newPlacement = this.realPlacement;
        if (newPlacement.indexOf('bottom') > -1) {
            if (this._menuHeight > referPosition.bottom - btnSize.bottom) {
                newPlacement = newPlacement.replace('bottom', 'top');
            }
        }
        else if (newPlacement.indexOf('top') > -1) {
            if (this._menuHeight > btnSize.top - referPosition.top) {
                newPlacement = newPlacement.replace('top', 'bottom');
            }
        }
        if (newPlacement.indexOf('left') > -1) {
            if (this._menuWidth > btnSize.left - referPosition.left) {
                newPlacement = newPlacement.replace('left', 'right');
            }
        }
        else if (newPlacement.indexOf('right') > -1) {
            if (this._menuWidth > referPosition.right - btnSize.right) {
                newPlacement = newPlacement.replace('right', 'left');
            }
        }
        this.rectifyPlacement = newPlacement;
    }
    /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    getReferencePosition() {
        /** @type {?} */
        let rRight = document.documentElement.clientWidth;
        /** @type {?} */
        let rBottom = document.documentElement.clientHeight;
        /** @type {?} */
        let rTop = 0;
        /** @type {?} */
        let rLeft = 0;
        // 横向参照
        if (this.rectifyReferenceH) {
            rRight = this.rectifyReferenceH.getBoundingClientRect().right;
            rLeft = this.rectifyReferenceH.getBoundingClientRect().left;
        }
        // 纵向参照
        if (this.rectifyReferenceV) {
            rBottom = this.rectifyReferenceV.getBoundingClientRect().bottom;
            rTop = this.rectifyReferenceV.getBoundingClientRect().top;
        }
        return { top: rTop, left: rLeft, right: rRight, bottom: rBottom };
    }
    /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    _getClsName(position) {
        /** @type {?} */
        let className = '';
        switch (position) {
            case 'top-right':
            case 'top':
                // 朝上，朝上-朝右
                className = 'dropup';
                break;
            case 'top-left':
                // 朝上-朝左
                className = 'dropup-left';
                break;
            case 'left-bottom':
            case 'left':
                // 横向——朝左——朝下
                className = 'dropleft';
                break;
            case 'left-top':
                // 横向——朝左——朝上
                className = 'dropleft-up';
                break;
            case 'right-bottom':
            case 'right':
                // 横向——朝右——朝下
                className = 'dropright';
                break;
            case 'right-top':
                // 横向——朝右——朝上
                className = 'dropright-up';
                break;
            case 'bottom-left':
                // 朝下——朝左
                className = 'dropdown-left';
                break;
            case 'bottom-right':
                className = 'dropdown';
                break;
            default:
                // 朝下，朝下——朝右
                className = 'dropdown';
        }
        return className;
    }
    /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    getRealPlacement(pment) {
        /** @type {?} */
        var result = 'bottom-right';
        switch (pment) {
            case 'top':
                result = 'top-right';
                break;
            case 'left':
                result = 'left-bottom';
                break;
            case 'right':
                result = 'right-bottom';
                break;
            case 'bottom':
                result = 'bottom-right';
                break;
            default:
                result = pment;
        }
        return result;
    }
    /*
      * 计算的位置区分忒细化
      */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    changePosition(btnSize) {
        // console.log(e);
        /** @type {?} */
        let rplacement = '';
        if (this.autoRectify) {
            rplacement = this.rectifyPlacement;
        }
        else {
            rplacement = this.realPlacement;
        }
        /** @type {?} */
        let styleTop = 0;
        /** @type {?} */
        let styleLeft = 0;
        if (rplacement.indexOf('top') > -1) {
            styleTop = btnSize.top - this._menuHeight;
        }
        else if (rplacement.indexOf('bottom') > -1) {
            styleTop = btnSize.bottom;
        }
        if (rplacement.indexOf('right') > -1) {
            styleLeft = btnSize.right;
        }
        else if (rplacement.indexOf('left') > -1) {
            styleLeft = btnSize.left - this._menuWidth;
        }
        // 开头
        if (rplacement.indexOf('-top') > -1) {
            styleTop = styleTop - btnSize.height;
        }
        else if (rplacement.indexOf('-bottom') > -1) {
            styleTop = styleTop + btnSize.height;
        }
        this.dpMenu.nativeElement.style.top = styleTop + 'px';
        this.dpMenu.nativeElement.style.left = styleLeft + 'px';
    }
    /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    bindMenuMouseenter() {
        this.mouseenterEvent = this.changeFlagToTrue.bind(this);
        this.dpMenu.nativeElement.addEventListener('mouseenter', this.mouseenterEvent);
    }
    /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    bindiMenuMouseleave() {
        this.mouseleaveEvent = this.mouseLeave.bind(this);
        this.dpMenu.nativeElement.addEventListener('mouseleave', this.mouseleaveEvent);
    }
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    unbindMenuMouseenter() {
        if (this.mouseenterEvent) {
            this.dpMenu.nativeElement.removeEventListener('mouseenter', this.mouseenterEvent);
        }
    }
    /**
     * @return {?}
     */
    unbindiMenuMouseleave() {
        if (this.mouseleaveEvent) {
            this.dpMenu.nativeElement.removeEventListener('mouseleave', this.mouseleaveEvent);
        }
    }
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    changeFlagToTrue() {
        this.dpFlag = true;
    }
    /* flag false */
    /**
     * @return {?}
     */
    changeFlagToFalse() {
        this.dpFlag = false;
    }
    /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    mouseLeave() {
        if (this.dpFlag) {
            this.changeFlagToFalse();
            // this.unbindDocClick();
            this.unbindiMenuMouseleave();
            this.unbindMenuMouseenter();
            this.close();
            if (this.setTimeObj) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                () => {
                    clearTimeout(this.setTimeObj);
                }));
            }
        }
    }
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    mouseNotEnterLeave() {
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.setTimeObj = setTimeout((/**
             * @return {?}
             */
            () => {
                if (!this.dpFlag) {
                    this.changeFlagToFalse();
                    // this.unbindDocClick();
                    this.unbindiMenuMouseleave();
                    this.unbindMenuMouseenter();
                    this.close();
                    if (this.setTimeObj) {
                        clearTimeout(this.setTimeObj);
                    }
                }
            }), 1500);
        }));
    }
    /* 点击面板之外区域 */
    // clickDoc() {
    //   this.unbindDocClick();
    //   this.unbindiMenuMouseleave();
    //   this.unbindMenuMouseenter();
    //   this.close();
    //   if (this.setTimeObj) {
    //     clearTimeout(this.setTimeObj);
    //   }
    //   this.clickMenuOut.emit(this.show);
    // }
    /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    close() {
        this.show = false;
        // 关闭下拉按钮面板  脏值检测
        if (!this.changeRef['destroyed']) {
            this.changeRef.detectChanges();
            this.changeRef.markForCheck();
        }
    }
    /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    setPosition(e) {
        // 下拉按钮
        /** @type {?} */
        const btnSize = this.dpBtn.nativeElement.getBoundingClientRect();
        // 下拉面板     
        /** @type {?} */
        let menuRect = this.dpMenu.nativeElement.getBoundingClientRect();
        this._menuHeight = menuRect.height;
        this._menuWidth = menuRect.width;
        // 如果要自动纠正方向
        if (this.autoRectify) {
            this.changePlacement(btnSize);
        }
        this.changePosition(btnSize);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
    }
}
FarrisButtonGroupComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-button-group',
                template: "<div class=\"f-btn-group\">\r\n    <div [class]=\"(size==='large'?'btn-group-lg':'btn-group-sm')+' btn-group f-btn-group-links'\">\r\n        <ng-container *ngFor=\"let btn of flatButtons\">\r\n            <ng-container *ngIf=\"btn.icon\">\r\n                <button [id]=\"btn.id\" class=\"btn btn-link btn-icontext\" [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                       <i class=\"f-icon\"  [ngClass]=\"btn.icon\"></i>\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!btn.icon\">\r\n            <button [id]=\"btn.id\"\r\n                [class]=\"'btn '+(btn.type?'btn-'+btn.type:'btn-link')+' '+ (btn.type && btn.type !== 'link' ? 'f-btn-ml' :'')\"\r\n                [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                {{btn.text}}\r\n            </button> \r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n    <ng-container *ngIf=\"dpButtons.length\">\r\n        <div class=\"btn-group f-btn-group-dropdown\">\r\n            <button #dpBtn type=\"button\" class=\"f-btn-dropdown\" (click)=\"clickEvent($event)\">\r\n                <span class=\"f-icon f-icon-lookup\"></span>\r\n            </button>\r\n            <div #dpMenu class=\"dropdown-menu f-btn-group-dropdown-menu\" [class.show]=\"show\"  style=\"position:fixed;\">\r\n                <ng-container *ngFor=\"let dpBtn of dpButtons\">\r\n                    <div class=\"dropdown-divider\" *ngIf=\"dpBtn.divider\"></div>\r\n                    <li [id]=\"dpBtn.id\" class=\"dropdown-item\" [class.disabled]=\"dpBtn.disabled\"\r\n                        (click)=\"toggle($event,dpBtn)\">\r\n                        <ng-container *ngIf=\"dpBtn.icon\">\r\n                            <i class=\"f-icon dropdown-item-icon\" [ngClass]=\"dpBtn.icon\"></i>\r\n                        </ng-container>\r\n                        <span>{{dpBtn.text}}</span>\r\n                    </li>\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>",
                changeDetection: ChangeDetectionStrategy.OnPush
            }] }
];
/** @nocollapse */
FarrisButtonGroupComponent.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: NgZone }
];
FarrisButtonGroupComponent.propDecorators = {
    dpBtn: [{ type: ViewChild, args: ['dpBtn',] }],
    dpMenu: [{ type: ViewChild, args: ['dpMenu',] }],
    rectifyReferenceH: [{ type: Input }],
    rectifyReferenceV: [{ type: Input }],
    autoRectify: [{ type: Input }],
    data: [{ type: Input }],
    count: [{ type: Input }],
    size: [{ type: Input }],
    type: [{ type: Input }],
    placement: [{ type: Input }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    changeState: [{ type: Output }],
    change: [{ type: Output }],
    click: [{ type: Output }],
    clickMenuOut: [{ type: Output }],
    autoSize: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpBtn;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpMenu;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceH;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceV;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.autoRectify;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.realPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.data;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.count;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.size;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.type;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._placement;
    /**
     * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.width;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.height;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuWidth;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuHeight;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.changeState;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.change;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.click;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.clickMenuOut;
    /**
     * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.autoSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.show;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setPosition$;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.event;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpFlag;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseenterEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseleaveEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.documentClickEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.btnSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setTimeObj;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.changeRef;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLWdyb3VwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktYnV0dG9uLyIsInNvdXJjZXMiOlsibGliL2J1dHRvbi1ncm91cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBYSxNQUFNLEVBQUUsdUJBQXVCLEVBQXVDLE1BQU0sZUFBZSxDQUFDO0FBQ2hILE9BQU8sRUFBbUMsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkYsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXRHLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFPL0IsTUFBTSxPQUFPLDBCQUEwQjs7Ozs7SUFpR3JDLFlBQW9CLFNBQTRCLEVBQVUsTUFBYztRQUFwRCxjQUFTLEdBQVQsU0FBUyxDQUFtQjtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVE7O1FBeEYvRCxnQkFBVyxHQUFHLElBQUksQ0FBQzs7UUFFcEIsa0JBQWEsR0FBRyxjQUFjLENBQUM7O1FBRXZDLHFCQUFnQixHQUFHLGNBQWMsQ0FBQzs7UUFNekIsVUFBSyxHQUFHLENBQUMsQ0FBQzs7UUFHVixTQUFJLEdBQUcsT0FBTyxDQUFDOztRQUdmLFNBQUksR0FBRyxTQUFTLENBQUM7O1FBR2xCLGVBQVUsR0FBRyxRQUFRLENBQUM7Ozs7O1FBbUJyQixVQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ1osV0FBTSxHQUFHLEdBQUcsQ0FBQztRQUNkLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFDZixnQkFBVyxHQUFHLENBQUMsQ0FBQzs7UUFHZCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7O1FBR3RDLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ2pDLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUdoQyxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7Ozs7UUFLeEMsYUFBUSxHQUFHLEtBQUssQ0FBQzs7UUFJMUIsU0FBSSxHQUFHLEtBQUssQ0FBQztRQVliLGlCQUFZLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztJQWdCK0MsQ0FBQzs7Ozs7SUFwRTdFLElBQ0ksU0FBUyxDQUFDLEtBQUs7UUFDakIsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLE9BQU87U0FDUjtRQUNELElBQUksS0FBSyxLQUFLLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7U0FDekI7SUFDSCxDQUFDOzs7O0lBQ0QsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7Ozs7O0lBOEJELElBQUksV0FBVztRQUNiLE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JELENBQUM7Ozs7SUFFRCxJQUFJLFNBQVM7UUFDWCw0Q0FBNEM7UUFFNUMsT0FBTyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsRCxDQUFDOzs7O0lBb0JELFFBQVE7UUFDTixRQUFRO0lBRVYsQ0FBQzs7Ozs7SUFFRCxXQUFXLENBQUMsYUFBNEI7UUFDdEMsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDekIscURBQXFEO1lBQ3JELGdEQUFnRDtZQUNoRCw0Q0FBNEM7U0FDN0M7SUFDSCxDQUFDOzs7O0lBRUQsZUFBZTtJQUNmLENBQUM7Ozs7SUFFRCxrQkFBa0I7UUFDaEIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2IsK0VBQStFO1lBQy9FLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQzVCLDRFQUE0RTtTQUM3RTtJQUNILENBQUM7Ozs7O0lBQ0QsVUFBVSxDQUFDLENBQU07UUFDZixDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDdkIsV0FBVztRQUNYLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtZQUNiLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQix1QkFBdUI7WUFDdkIsNkJBQTZCO1lBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsVUFBVTtZQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCOzs7WUFBQyxHQUFHLEVBQUU7Z0JBQ2pDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO2dCQUMxQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztnQkFDM0IsdUJBQXVCO2dCQUN2QixJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztZQUM1QixDQUFDLEVBQUMsQ0FBQztTQUNKO1FBQ0QsWUFBWTtRQUNaLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUM5Qiw4REFBOEQ7UUFDOUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ25DLENBQUM7Ozs7Ozs7SUFHRCxNQUFNLENBQUMsQ0FBTSxFQUFFLEdBQUc7UUFDaEIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3BCLElBQUksR0FBRyxDQUFDLFFBQVE7WUFBRSxPQUFPO1FBQ3pCLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ2xCLHlCQUF5QjtRQUN6QixpQkFBaUI7UUFDakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDOzs7OztJQUlELFVBQVU7UUFDUixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFO1lBQzdCLGtCQUFrQjtZQUNsQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ3REO0lBQ0gsQ0FBQzs7Ozs7OztJQU9ELGVBQWUsQ0FBQyxPQUFZO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3JCLE9BQU87U0FDUjs7WUFDRyxhQUFhLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFOztZQUMzQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWE7UUFDckMsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ3ZDLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxhQUFhLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUU7Z0JBQzVELFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQzthQUN0RDtTQUNGO2FBQU0sSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQzNDLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxHQUFDLGFBQWEsQ0FBQyxHQUFHLEVBQUc7Z0JBQ3JELFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQzthQUN0RDtTQUNGO1FBQ0QsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ3JDLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsSUFBSSxHQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUc7Z0JBQ3RELFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQzthQUN0RDtTQUNGO2FBQU0sSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQzdDLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxhQUFhLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLEVBQUU7Z0JBQ3pELFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQzthQUN0RDtTQUNGO1FBQ0QsSUFBSSxDQUFDLGdCQUFnQixHQUFDLFlBQVksQ0FBQztJQUNyQyxDQUFDOzs7Ozs7SUFJTyxvQkFBb0I7O1lBQ3RCLE1BQU0sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVc7O1lBQzdDLE9BQU8sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLFlBQVk7O1lBQy9DLElBQUksR0FBRyxDQUFDOztZQUNSLEtBQUssR0FBRyxDQUFDO1FBQ2IsT0FBTztRQUNQLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFO1lBQzFCLE1BQU0sR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDOUQsS0FBSyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLElBQUksQ0FBQztTQUM3RDtRQUNELE9BQU87UUFDUCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQixPQUFPLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixFQUFFLENBQUMsTUFBTSxDQUFDO1lBQ2hFLElBQUksR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxHQUFHLENBQUM7U0FDM0Q7UUFDRCxPQUFPLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxDQUFDO0lBQ3BFLENBQUM7Ozs7OztJQUtELFdBQVcsQ0FBQyxRQUFROztZQUNkLFNBQVMsR0FBRyxFQUFFO1FBQ2xCLFFBQVEsUUFBUSxFQUFFO1lBQ2hCLEtBQUssV0FBVyxDQUFDO1lBQ2pCLEtBQUssS0FBSztnQkFDUixXQUFXO2dCQUNYLFNBQVMsR0FBRyxRQUFRLENBQUM7Z0JBQ3JCLE1BQU07WUFDUixLQUFLLFVBQVU7Z0JBQ2IsUUFBUTtnQkFDUixTQUFTLEdBQUcsYUFBYSxDQUFDO2dCQUMxQixNQUFNO1lBQ1IsS0FBSyxhQUFhLENBQUM7WUFDbkIsS0FBSyxNQUFNO2dCQUNULGFBQWE7Z0JBQ2IsU0FBUyxHQUFHLFVBQVUsQ0FBQztnQkFDdkIsTUFBTTtZQUNSLEtBQUssVUFBVTtnQkFDYixhQUFhO2dCQUNiLFNBQVMsR0FBRyxhQUFhLENBQUM7Z0JBQzFCLE1BQU07WUFDUixLQUFLLGNBQWMsQ0FBQztZQUNwQixLQUFLLE9BQU87Z0JBQ1YsYUFBYTtnQkFDYixTQUFTLEdBQUcsV0FBVyxDQUFDO2dCQUN4QixNQUFNO1lBQ1IsS0FBSyxXQUFXO2dCQUNkLGFBQWE7Z0JBQ2IsU0FBUyxHQUFHLGNBQWMsQ0FBQztnQkFDM0IsTUFBTTtZQUNSLEtBQUssYUFBYTtnQkFDaEIsU0FBUztnQkFDVCxTQUFTLEdBQUcsZUFBZSxDQUFDO2dCQUM1QixNQUFNO1lBQ1IsS0FBSyxjQUFjO2dCQUNqQixTQUFTLEdBQUcsVUFBVSxDQUFDO2dCQUN2QixNQUFNO1lBQ1I7Z0JBQ0UsWUFBWTtnQkFDWixTQUFTLEdBQUcsVUFBVSxDQUFDO1NBQzFCO1FBQ0QsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQzs7Ozs7O0lBRU8sZ0JBQWdCLENBQUMsS0FBSzs7WUFDeEIsTUFBTSxHQUFHLGNBQWM7UUFDM0IsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLEtBQUs7Z0JBQ1IsTUFBTSxHQUFHLFdBQVcsQ0FBQztnQkFDckIsTUFBTTtZQUNSLEtBQUssTUFBTTtnQkFDVCxNQUFNLEdBQUcsYUFBYSxDQUFDO2dCQUN2QixNQUFNO1lBQ1IsS0FBSyxPQUFPO2dCQUNWLE1BQU0sR0FBRyxjQUFjLENBQUM7Z0JBQ3hCLE1BQU07WUFDUixLQUFLLFFBQVE7Z0JBQ1gsTUFBTSxHQUFHLGNBQWMsQ0FBQztnQkFDeEIsTUFBTTtZQUNSO2dCQUNFLE1BQU0sR0FBRyxLQUFLLENBQUM7U0FDbEI7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzs7Ozs7Ozs7SUFLTyxjQUFjLENBQUMsT0FBWTs7O1lBRTdCLFVBQVUsR0FBQyxFQUFFO1FBQ2pCLElBQUcsSUFBSSxDQUFDLFdBQVcsRUFBQztZQUNsQixVQUFVLEdBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDO1NBQ2xDO2FBQUk7WUFDSCxVQUFVLEdBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztTQUMvQjs7WUFDRyxRQUFRLEdBQUcsQ0FBQzs7WUFDWixTQUFTLEdBQUcsQ0FBQztRQUNqQixJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDbEMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztTQUMzQzthQUFLLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUMzQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztTQUMzQjtRQUNELElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUNwQyxTQUFTLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztTQUMzQjthQUFLLElBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUN4QyxTQUFTLEdBQUcsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1NBQzVDO1FBQ0QsS0FBSztRQUNMLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBQyxDQUFDLENBQUMsRUFBRTtZQUNqQyxRQUFRLEdBQUUsUUFBUSxHQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7U0FDbkM7YUFBSyxJQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEVBQUM7WUFDeEMsUUFBUSxHQUFFLFFBQVEsR0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1NBQ25DO1FBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3RELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsU0FBUyxHQUFHLElBQUksQ0FBQztJQUMxRCxDQUFDOzs7OztJQUdELGtCQUFrQjtRQUNoQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUNqRixDQUFDOzs7OztJQUdELG1CQUFtQjtRQUNqQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDakYsQ0FBQzs7Ozs7Ozs7OztJQVNELG9CQUFvQjtRQUNsQixJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUNuRjtJQUNILENBQUM7Ozs7SUFDRCxxQkFBcUI7UUFDbkIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDbkY7SUFDSCxDQUFDOzs7Ozs7Ozs7O0lBUUQsZ0JBQWdCO1FBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQzs7Ozs7SUFHRCxpQkFBaUI7UUFDZixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUN0QixDQUFDOzs7OztJQUdELFVBQVU7UUFDUixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN6Qix5QkFBeUI7WUFDekIsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFDN0IsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFDNUIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2IsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO2dCQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQjs7O2dCQUFDLEdBQUcsRUFBRTtvQkFDakMsWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDaEMsQ0FBQyxFQUFDLENBQUM7YUFDSjtTQUNGO0lBQ0gsQ0FBQzs7Ozs7SUFHRCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUI7OztRQUFDLEdBQUcsRUFBRTtZQUNqQyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVU7OztZQUFDLEdBQUcsRUFBRTtnQkFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7b0JBQ2hCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO29CQUN6Qix5QkFBeUI7b0JBQ3pCLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO29CQUM3QixJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztvQkFDNUIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO29CQUNiLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTt3QkFDbkIsWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztxQkFDL0I7aUJBQ0Y7WUFDSCxDQUFDLEdBQUUsSUFBSSxDQUFDLENBQUM7UUFDWCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7UUFDbEIsaUJBQWlCO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ2hDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUMvQjtJQUNILENBQUM7Ozs7Ozs7SUFJTyxXQUFXLENBQUMsQ0FBQzs7O2NBRWIsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLHFCQUFxQixFQUFFOzs7WUFFNUQsUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLHFCQUFxQixFQUFFO1FBQ2hFLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUNuQyxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDakMsWUFBWTtRQUNaLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQy9CO1FBQ0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDOzs7O0lBRUQsV0FBVztJQUVYLENBQUM7OztZQTdiRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLHFCQUFxQjtnQkFDL0Isb2pFQUE0QztnQkFDNUMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07YUFDaEQ7Ozs7WUFUeUMsaUJBQWlCO1lBRHZDLE1BQU07OztvQkFhdkIsU0FBUyxTQUFDLE9BQU87cUJBQ2pCLFNBQVMsU0FBQyxRQUFRO2dDQUVsQixLQUFLO2dDQUVMLEtBQUs7MEJBRUwsS0FBSzttQkFPTCxLQUFLO29CQUdMLEtBQUs7bUJBR0wsS0FBSzttQkFHTCxLQUFLO3dCQUlMLEtBQUs7b0JBa0JMLEtBQUs7cUJBQ0wsS0FBSzswQkFLTCxNQUFNO3FCQUdOLE1BQU07b0JBQ04sTUFBTTsyQkFHTixNQUFNO3VCQUtOLEtBQUs7Ozs7SUEvRE4sMkNBQXNDOztJQUN0Qyw0Q0FBd0M7O0lBRXhDLHVEQUF3Qzs7SUFFeEMsdURBQXdDOztJQUV4QyxpREFBNEI7Ozs7O0lBRTVCLG1EQUF1Qzs7SUFFdkMsc0RBQWtDOztJQUdsQywwQ0FBd0I7O0lBR3hCLDJDQUFtQjs7SUFHbkIsMENBQXdCOztJQUd4QiwwQ0FBMEI7Ozs7O0lBRzFCLGdEQUE4Qjs7Ozs7SUFtQjlCLDJDQUFxQjs7SUFDckIsNENBQXNCOzs7OztJQUN0QixnREFBdUI7Ozs7O0lBQ3ZCLGlEQUF3Qjs7SUFHeEIsaURBQWdEOztJQUdoRCw0Q0FBMkM7O0lBQzNDLDJDQUEwQzs7SUFHMUMsa0RBQWlEOzs7OztJQUtqRCw4Q0FBMEI7O0lBSTFCLDBDQUFhOztJQVliLGtEQUE2Qjs7SUFDN0IsMkNBQVc7O0lBR1gsNENBQWdCOztJQUdoQixxREFBcUI7O0lBQ3JCLHFEQUFxQjs7SUFDckIsd0RBQXdCOztJQUd4Qiw2Q0FBYTs7SUFHYixnREFBZ0I7Ozs7O0lBQ0osK0NBQW9DOzs7OztJQUFFLDRDQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9uRGVzdHJveSwgTmdab25lLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgUmVuZGVyZXIyLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVmlld0NoaWxkLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4vYnV0dG9uJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBzdHlsZSB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2ZhcnJpcy1idXR0b24tZ3JvdXAnLFxyXG4gIHRlbXBsYXRlVXJsOiBgLi9idXR0b24tZ3JvdXAuY29tcG9uZW50Lmh0bWxgLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNCdXR0b25Hcm91cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xyXG5cclxuICBAVmlld0NoaWxkKCdkcEJ0bicpIGRwQnRuOiBFbGVtZW50UmVmO1xyXG4gIEBWaWV3Q2hpbGQoJ2RwTWVudScpIGRwTWVudTogRWxlbWVudFJlZjtcclxuICAvLyDmqKrlkJHnuqDmraPnmoTlj4LnhadcclxuICBASW5wdXQoKSByZWN0aWZ5UmVmZXJlbmNlSDogSFRNTEVsZW1lbnQ7XHJcbiAgLy8g57q15ZCR57qg5q2j55qE5Y+C54WnXHJcbiAgQElucHV0KCkgcmVjdGlmeVJlZmVyZW5jZVY6IEhUTUxFbGVtZW50O1xyXG4gIC8vIOaYr+WQpuiHquWKqOe6oOato+S9jee9rlxyXG4gIEBJbnB1dCgpIGF1dG9SZWN0aWZ5ID0gdHJ1ZTtcclxuICAvLyDorqHnrpfmlrnlkJHnmoTnnJ/mraNwbGFjZW1lbnRcclxuICBwcml2YXRlIHJlYWxQbGFjZW1lbnQgPSAnYm90dG9tLXJpZ2h0JztcclxuICAvLyDph43mlrDorqHnrpflkI7nmoRwbGFjZW1lbnRcclxuICByZWN0aWZ5UGxhY2VtZW50ID0gJ2JvdHRvbS1yaWdodCc7XHJcblxyXG4gIC8qIOaMiemSruS/oeaBryAqL1xyXG4gIEBJbnB1dCgpIGRhdGE6IEJ1dHRvbltdO1xyXG5cclxuICAvKiDmmL7npLrnmoTmjInpkq7mlbDph48gIOm7mOiupOS4ujIgKi9cclxuICBASW5wdXQoKSBjb3VudCA9IDI7XHJcblxyXG4gIC8qIOaMiemSruWkp+WwjyAqL1xyXG4gIEBJbnB1dCgpIHNpemUgPSAnc21hbGwnO1xyXG5cclxuICAvKiDmjInpkq7moLflvI8gKi9cclxuICBASW5wdXQoKSB0eXBlID0gJ3ByaW1hcnknO1xyXG5cclxuICAvKiDmjInpkq7lsZXnpLrkvY3nva4gKi9cclxuICBwcml2YXRlIF9wbGFjZW1lbnQgPSBcImJvdHRvbVwiO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHBsYWNlbWVudCh2YWx1ZSkge1xyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUgIT09IHRoaXMuX3BsYWNlbWVudCkge1xyXG4gICAgICB0aGlzLnJlYWxQbGFjZW1lbnQgPSB0aGlzLmdldFJlYWxQbGFjZW1lbnQodmFsdWUpO1xyXG4gICAgICB0aGlzLl9wbGFjZW1lbnQgPSB2YWx1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IHBsYWNlbWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wbGFjZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvKiBtZW51IHNpemUgKi9cclxuICAvKipcclxuICAgKjIwMjEuMDYuMTIg5bqf5byD77yM5Zug5Li65L2/55So6ICF5LiN55+l6YGT5Zyo5Lit6Iux5paH5oOF5Ya15LiL77yM5LiL5ouJ6Z2i5p2/55qE5a695bqm5ZKM6auY5bqmXHJcbiAgICovXHJcbiAgQElucHV0KCkgd2lkdGggPSAxMjA7XHJcbiAgQElucHV0KCkgaGVpZ2h0ID0gMjUwO1xyXG4gIHByaXZhdGUgX21lbnVXaWR0aCA9IDA7XHJcbiAgcHJpdmF0ZSBfbWVudUhlaWdodCA9IDA7XHJcblxyXG4gIC8qIOS4i+aLieaMiemSriDop6blj5Hkuovku7YgKi9cclxuICBAT3V0cHV0KCkgY2hhbmdlU3RhdGUgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgLyog5LiL5ouJ6I+c5Y2V6aG554K55Ye75LqL5Lu2ICovXHJcbiAgQE91dHB1dCgpIGNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBjbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAvKiDop6blj5HkuIvmi4nmjInpkq7pnaLmnb/ljLrln5/kuYvlpJbnmoTkuovku7YgKi9cclxuICBAT3V0cHV0KCkgY2xpY2tNZW51T3V0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIDIwMjEuMDYuMTIg5bqf5byD77yM5Zug5Li65b2TYXV0b1NpemXkuLp0cnVl55qE5pe25YCZ77yM5oyJ6ZKu5pi+56S65LiN5Ye65p2l44CCXHJcbiAgICovXHJcbiAgQElucHV0KCkgYXV0b1NpemUgPSBmYWxzZTtcclxuXHJcblxyXG4gIC8qIOS4i+aLiemdouadv+aYvuekuiAqL1xyXG4gIHNob3cgPSBmYWxzZTtcclxuICAvKiDmmL7npLrlh7rmnaXnmoTmjInpkq7nu4QgKi9cclxuICBnZXQgZmxhdEJ1dHRvbnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhICYmIHRoaXMuZGF0YS5zbGljZSgwLCB0aGlzLmNvdW50KTtcclxuICB9XHJcblxyXG4gIGdldCBkcEJ1dHRvbnMoKSB7XHJcbiAgICAvLyB0aGlzLmhlaWdodCA9IHRoaXMuZHBCdXR0b25zLmxlbmd0aCAqIDM1O1xyXG5cclxuICAgIHJldHVybiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLnNsaWNlKHRoaXMuY291bnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0UG9zaXRpb24kID0gbmV3IFN1YmplY3QoKTtcclxuICBldmVudDogYW55O1xyXG5cclxuICAvKiDkuIvmi4npnaLmnb/mmL7npLrmoIflv5cgKi9cclxuICBkcEZsYWc6IGJvb2xlYW47XHJcblxyXG4gIC8qIOS6i+S7tiAqL1xyXG4gIG1vdXNlZW50ZXJFdmVudDogYW55O1xyXG4gIG1vdXNlbGVhdmVFdmVudDogYW55O1xyXG4gIGRvY3VtZW50Q2xpY2tFdmVudDogYW55O1xyXG5cclxuICAvKiDkuInkuKrngrnmjInpkq7lsLrlr7ggKi9cclxuICBidG5TaXplOiBhbnk7XHJcblxyXG4gIC8qICAqL1xyXG4gIHNldFRpbWVPYmo6IGFueTtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNoYW5nZVJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIC8vIOWIneWni+WMluaVsOaNrlxyXG5cclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKHNpbXBsZUNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGlmIChzaW1wbGVDaGFuZ2VzWydkYXRhJ10pIHtcclxuICAgICAgLy8gdGhpcy5mbGF0QnV0dG9ucyA9IHRoaXMuZGF0YS5zbGljZSgwLCB0aGlzLmNvdW50KTtcclxuICAgICAgLy8gdGhpcy5kcEJ1dHRvbnMgPSB0aGlzLmRhdGEuc2xpY2UodGhpcy5jb3VudCk7XHJcbiAgICAgIC8vIHRoaXMuaGVpZ2h0ID0gdGhpcy5kcEJ1dHRvbnMubGVuZ3RoICogMzU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICBpZiAodGhpcy5zaG93KSB7XHJcbiAgICAgIC8vIGNvbnN0IHsgaGVpZ2h0LCB3aWR0aCB9ID0gdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLmV2ZW50KVxyXG4gICAgICAvLyB0aGlzLnNldFBvc2l0aW9uJC5zdWJzY3JpYmUocmVzID0+IHRoaXMuc2V0UG9zaXRpb24ocmVzLCB3aWR0aCwgaGVpZ2h0KSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNsaWNrRXZlbnQoZTogYW55KSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5zaG93ID0gIXRoaXMuc2hvdztcclxuICAgIC8vIGJvZHnmt7vliqDpnaLmnb9cclxuICAgIGlmICh0aGlzLnNob3cpIHtcclxuICAgICAgdGhpcy5hcHBlbmRCb2R5KCk7XHJcbiAgICAgIC8vIHRoaXMuc2V0UG9zaXRpb24oZSk7XHJcbiAgICAgIC8vIHRoaXMuc2V0UG9zaXRpb24kLm5leHQoZSk7XHJcbiAgICAgIHRoaXMuZXZlbnQgPSBlO1xyXG4gICAgICAvLyDnu5Hlrprnm7jlupTnmoTkuovku7ZcclxuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgICAgdGhpcy5iaW5kaU1lbnVNb3VzZWxlYXZlKCk7XHJcbiAgICAgICAgLy8gdGhpcy5iaW5kRG9jQ2xpY2soKTtcclxuICAgICAgICB0aGlzLm1vdXNlTm90RW50ZXJMZWF2ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIOmdouadv+aYvuekuiDohI/lgLzmo4DmtYtcclxuICAgIHRoaXMuY2hhbmdlUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIHRoaXMuY2hhbmdlUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgLy8gdGhpcy5jaGFuZ2VTdGF0ZS5lbWl0KHsgb3JpZ2luRXZlbnQ6IGUsIHNob3c6IHRoaXMuc2hvdyB9KTtcclxuICAgIHRoaXMuY2hhbmdlU3RhdGUuZW1pdCh0aGlzLnNob3cpO1xyXG4gIH1cclxuXHJcbiAgLyog5oyJ6ZKu6Kem5Y+R5LqL5Lu2ICovXHJcbiAgdG9nZ2xlKGU6IGFueSwgYnRuKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGJ0bi5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICAvLyB0aGlzLnVuYmluZERvY0NsaWNrKCk7XHJcbiAgICAvLyDlhbPpl63kuIvmi4nmjInpkq7pnaLmnb8gIOiEj+WAvOajgOa1i1xyXG4gICAgdGhpcy5jaGFuZ2VSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgdGhpcy5jaGFuZ2VSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICB0aGlzLmNoYW5nZS5lbWl0KGJ0bi5pZCk7XHJcbiAgICB0aGlzLmNsaWNrLmVtaXQoYnRuKTtcclxuICB9XHJcblxyXG5cclxuICAvLyDkuIvmi4nmjInpkq7mmL7npLrliLBib2R55LitICDlj6/mlLnlj5jpnaLmnb/mlrnlkJFcclxuICBhcHBlbmRCb2R5KCkge1xyXG4gICAgaWYgKHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgLy8g5re75Yqg5YiwYm9keSAg5L6/5LqO5YWo6YOo5pi+56S6XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlvZPkuIvmi4notoXlh7rovrnnlYzml7YgIOi9rOaNouaWueWQkSxcclxuICAgKiDlubbmnKrlpITnkIbvvIzovrnnlYzkuI3lpJ/kuIvmi4nlsZXnpLrnmoTmg4XlhrVcclxuICAgKiBAcGFyYW0gYnRuU2l6ZSBcclxuICAgKi9cclxuICBjaGFuZ2VQbGFjZW1lbnQoYnRuU2l6ZTogYW55KSB7XHJcbiAgICBpZiAoIXRoaXMuYXV0b1JlY3RpZnkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHJlZmVyUG9zaXRpb24gPSB0aGlzLmdldFJlZmVyZW5jZVBvc2l0aW9uKCk7XHJcbiAgICBsZXQgbmV3UGxhY2VtZW50ID0gdGhpcy5yZWFsUGxhY2VtZW50O1xyXG4gICAgaWYgKG5ld1BsYWNlbWVudC5pbmRleE9mKCdib3R0b20nKSA+IC0xKSB7XHJcbiAgICAgIGlmICh0aGlzLl9tZW51SGVpZ2h0ID4gcmVmZXJQb3NpdGlvbi5ib3R0b20gLSBidG5TaXplLmJvdHRvbSkge1xyXG4gICAgICAgIG5ld1BsYWNlbWVudCA9IG5ld1BsYWNlbWVudC5yZXBsYWNlKCdib3R0b20nLCAndG9wJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoJ3RvcCcpID4gLTEpIHtcclxuICAgICAgaWYgKHRoaXMuX21lbnVIZWlnaHQgPiBidG5TaXplLnRvcC1yZWZlclBvc2l0aW9uLnRvcCApIHtcclxuICAgICAgICBuZXdQbGFjZW1lbnQgPSBuZXdQbGFjZW1lbnQucmVwbGFjZSgndG9wJywgJ2JvdHRvbScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoJ2xlZnQnKSA+IC0xKSB7XHJcbiAgICAgIGlmICh0aGlzLl9tZW51V2lkdGggPiBidG5TaXplLmxlZnQtcmVmZXJQb3NpdGlvbi5sZWZ0ICkge1xyXG4gICAgICAgIG5ld1BsYWNlbWVudCA9IG5ld1BsYWNlbWVudC5yZXBsYWNlKCdsZWZ0JywgJ3JpZ2h0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoJ3JpZ2h0JykgPiAtMSkge1xyXG4gICAgICBpZiAodGhpcy5fbWVudVdpZHRoID4gcmVmZXJQb3NpdGlvbi5yaWdodCAtIGJ0blNpemUucmlnaHQpIHtcclxuICAgICAgICBuZXdQbGFjZW1lbnQgPSBuZXdQbGFjZW1lbnQucmVwbGFjZSgncmlnaHQnLCAnbGVmdCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlY3RpZnlQbGFjZW1lbnQ9bmV3UGxhY2VtZW50O1xyXG4gIH1cclxuICAvKipcclxuICAgKiDnoa7orqTlj4LnhafnmoTovrnnlYxcclxuICAgKi9cclxuICBwcml2YXRlIGdldFJlZmVyZW5jZVBvc2l0aW9uKCkge1xyXG4gICAgbGV0IHJSaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgIGxldCByQm90dG9tID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgIGxldCByVG9wID0gMDtcclxuICAgIGxldCByTGVmdCA9IDA7XHJcbiAgICAvLyDmqKrlkJHlj4LnhadcclxuICAgIGlmICh0aGlzLnJlY3RpZnlSZWZlcmVuY2VIKSB7XHJcbiAgICAgIHJSaWdodCA9IHRoaXMucmVjdGlmeVJlZmVyZW5jZUguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQ7XHJcbiAgICAgIHJMZWZ0ID0gdGhpcy5yZWN0aWZ5UmVmZXJlbmNlSC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gICAgfVxyXG4gICAgLy8g57q15ZCR5Y+C54WnXHJcbiAgICBpZiAodGhpcy5yZWN0aWZ5UmVmZXJlbmNlVikge1xyXG4gICAgICByQm90dG9tID0gdGhpcy5yZWN0aWZ5UmVmZXJlbmNlVi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207XHJcbiAgICAgIHJUb3AgPSB0aGlzLnJlY3RpZnlSZWZlcmVuY2VWLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgIH1cclxuICAgIHJldHVybiB7IHRvcDogclRvcCwgbGVmdDogckxlZnQsIHJpZ2h0OiByUmlnaHQsIGJvdHRvbTogckJvdHRvbSB9O1xyXG4gIH1cclxuICAvKipcclxuICAgKiDlj5jljJblr7nlupTnmoRjbGFzc1xyXG4gICAqIEBwYXJhbSBwb3NpdGlvbiBcclxuICAgKi9cclxuICBfZ2V0Q2xzTmFtZShwb3NpdGlvbikge1xyXG4gICAgbGV0IGNsYXNzTmFtZSA9ICcnO1xyXG4gICAgc3dpdGNoIChwb3NpdGlvbikge1xyXG4gICAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgIC8vIOacneS4iu+8jOacneS4ii3mnJ3lj7NcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcHVwJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAndG9wLWxlZnQnOlxyXG4gICAgICAgIC8vIOacneS4ii3mnJ3lt6ZcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcHVwLWxlZnQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0LWJvdHRvbSc6XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIC8vIOaoquWQkeKAlOKAlOacneW3puKAlOKAlOacneS4i1xyXG4gICAgICAgIGNsYXNzTmFtZSA9ICdkcm9wbGVmdCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQtdG9wJzpcclxuICAgICAgICAvLyDmqKrlkJHigJTigJTmnJ3lt6bigJTigJTmnJ3kuIpcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcGxlZnQtdXAnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodC1ib3R0b20nOlxyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgLy8g5qiq5ZCR4oCU4oCU5pyd5Y+z4oCU4oCU5pyd5LiLXHJcbiAgICAgICAgY2xhc3NOYW1lID0gJ2Ryb3ByaWdodCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0LXRvcCc6XHJcbiAgICAgICAgLy8g5qiq5ZCR4oCU4oCU5pyd5Y+z4oCU4oCU5pyd5LiKXHJcbiAgICAgICAgY2xhc3NOYW1lID0gJ2Ryb3ByaWdodC11cCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgICAvLyDmnJ3kuIvigJTigJTmnJ3lt6ZcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcGRvd24tbGVmdCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2JvdHRvbS1yaWdodCc6XHJcbiAgICAgICAgY2xhc3NOYW1lID0gJ2Ryb3Bkb3duJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICAvLyDmnJ3kuIvvvIzmnJ3kuIvigJTigJTmnJ3lj7NcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcGRvd24nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNsYXNzTmFtZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UmVhbFBsYWNlbWVudChwbWVudCkge1xyXG4gICAgdmFyIHJlc3VsdCA9ICdib3R0b20tcmlnaHQnO1xyXG4gICAgc3dpdGNoIChwbWVudCkge1xyXG4gICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgIHJlc3VsdCA9ICd0b3AtcmlnaHQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICByZXN1bHQgPSAnbGVmdC1ib3R0b20nO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ3JpZ2h0LWJvdHRvbSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ2JvdHRvbS1yaWdodCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmVzdWx0ID0gcG1lbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyogXHJcbiAgKiDorqHnrpfnmoTkvY3nva7ljLrliIblv5Lnu4bljJZcclxuICAqL1xyXG4gIHByaXZhdGUgY2hhbmdlUG9zaXRpb24oYnRuU2l6ZTogYW55KSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhlKTtcclxuICAgIGxldCBycGxhY2VtZW50PScnO1xyXG4gICAgaWYodGhpcy5hdXRvUmVjdGlmeSl7XHJcbiAgICAgIHJwbGFjZW1lbnQ9dGhpcy5yZWN0aWZ5UGxhY2VtZW50O1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIHJwbGFjZW1lbnQ9dGhpcy5yZWFsUGxhY2VtZW50O1xyXG4gICAgfVxyXG4gICAgbGV0IHN0eWxlVG9wID0gMDtcclxuICAgIGxldCBzdHlsZUxlZnQgPSAwO1xyXG4gICAgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZigndG9wJykgPiAtMSkge1xyXG4gICAgICBzdHlsZVRvcCA9IGJ0blNpemUudG9wIC0gdGhpcy5fbWVudUhlaWdodDtcclxuICAgIH1lbHNlIGlmIChycGxhY2VtZW50LmluZGV4T2YoJ2JvdHRvbScpID4gLTEpIHtcclxuICAgICAgc3R5bGVUb3AgPSBidG5TaXplLmJvdHRvbTtcclxuICAgIH1cclxuICAgIGlmIChycGxhY2VtZW50LmluZGV4T2YoJ3JpZ2h0JykgPiAtMSkge1xyXG4gICAgICBzdHlsZUxlZnQgPSBidG5TaXplLnJpZ2h0O1xyXG4gICAgfWVsc2UgaWYocnBsYWNlbWVudC5pbmRleE9mKCdsZWZ0JykgPiAtMSkge1xyXG4gICAgICBzdHlsZUxlZnQgPSBidG5TaXplLmxlZnQgLSB0aGlzLl9tZW51V2lkdGg7XHJcbiAgICB9XHJcbiAgICAvLyDlvIDlpLRcclxuICAgIGlmIChycGxhY2VtZW50LmluZGV4T2YoJy10b3AnKT4tMSkge1xyXG4gICAgICBzdHlsZVRvcD0gc3R5bGVUb3AtYnRuU2l6ZS5oZWlnaHQ7XHJcbiAgICB9ZWxzZSBpZihycGxhY2VtZW50LmluZGV4T2YoJy1ib3R0b20nKT4tMSl7XHJcbiAgICAgIHN0eWxlVG9wPSBzdHlsZVRvcCtidG5TaXplLmhlaWdodDtcclxuICAgIH1cclxuICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gc3R5bGVUb3AgKyAncHgnO1xyXG4gICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gc3R5bGVMZWZ0ICsgJ3B4JztcclxuICB9XHJcblxyXG4gIC8qIOe7keWumuS4i+aLiemdouadv+m8oOagh+i/m+WFpeS6i+S7tiAqL1xyXG4gIGJpbmRNZW51TW91c2VlbnRlcigpIHtcclxuICAgIHRoaXMubW91c2VlbnRlckV2ZW50ID0gdGhpcy5jaGFuZ2VGbGFnVG9UcnVlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm1vdXNlZW50ZXJFdmVudCk7XHJcbiAgfVxyXG5cclxuICAvKiDnu5HlrprkuIvmi4npnaLmnb/pvKDmoIfnprvlvIDkuovku7YgICovXHJcbiAgYmluZGlNZW51TW91c2VsZWF2ZSgpIHtcclxuICAgIHRoaXMubW91c2VsZWF2ZUV2ZW50ID0gdGhpcy5tb3VzZUxlYXZlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm1vdXNlbGVhdmVFdmVudCk7XHJcbiAgfVxyXG5cclxuICAvKiDnu5Hlrprngrnlh7vpnaLmnb/ljLrln5/kuYvlpJbop6blj5HnmoTkuovku7YgKi9cclxuICAvLyBiaW5kRG9jQ2xpY2soKSB7XHJcbiAgLy8gICB0aGlzLmRvY3VtZW50Q2xpY2tFdmVudCA9IHRoaXMuY2xpY2tEb2MuYmluZCh0aGlzKTtcclxuICAvLyAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kb2N1bWVudENsaWNrRXZlbnQpO1xyXG4gIC8vIH1cclxuXHJcbiAgLyog6Kej57uR5LqL5Lu2ICovXHJcbiAgdW5iaW5kTWVudU1vdXNlZW50ZXIoKSB7XHJcbiAgICBpZiAodGhpcy5tb3VzZWVudGVyRXZlbnQpIHtcclxuICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5tb3VzZWVudGVyRXZlbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuICB1bmJpbmRpTWVudU1vdXNlbGVhdmUoKSB7XHJcbiAgICBpZiAodGhpcy5tb3VzZWxlYXZlRXZlbnQpIHtcclxuICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZWxlYXZlRXZlbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyB1bmJpbmREb2NDbGljaygpIHtcclxuICAvLyAgIGlmICh0aGlzLmRvY3VtZW50Q2xpY2tFdmVudCkge1xyXG4gIC8vICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZG9jdW1lbnRDbGlja0V2ZW50KTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIC8qIGZsYWcgdHJ1ZSAqL1xyXG4gIGNoYW5nZUZsYWdUb1RydWUoKSB7XHJcbiAgICB0aGlzLmRwRmxhZyA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKiBmbGFnIGZhbHNlICovXHJcbiAgY2hhbmdlRmxhZ1RvRmFsc2UoKSB7XHJcbiAgICB0aGlzLmRwRmxhZyA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyog6byg5qCH56a75byA5pe2ICDlhbPpl61tZW51ICovXHJcbiAgbW91c2VMZWF2ZSgpIHtcclxuICAgIGlmICh0aGlzLmRwRmxhZykge1xyXG4gICAgICB0aGlzLmNoYW5nZUZsYWdUb0ZhbHNlKCk7XHJcbiAgICAgIC8vIHRoaXMudW5iaW5kRG9jQ2xpY2soKTtcclxuICAgICAgdGhpcy51bmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgdGhpcy51bmJpbmRNZW51TW91c2VlbnRlcigpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIGlmICh0aGlzLnNldFRpbWVPYmopIHtcclxuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zZXRUaW1lT2JqKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyog6byg5qCH5rKh5pyJ6L+b5YWl5Yiw6Z2i5p2/ICDkuIDmrrXml7bpl7TlkI7pnaLmnb/oh6rliqjmtojlpLEgKi9cclxuICBtb3VzZU5vdEVudGVyTGVhdmUoKSB7XHJcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0VGltZU9iaiA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5kcEZsYWcpIHtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlRmxhZ1RvRmFsc2UoKTtcclxuICAgICAgICAgIC8vIHRoaXMudW5iaW5kRG9jQ2xpY2soKTtcclxuICAgICAgICAgIHRoaXMudW5iaW5kaU1lbnVNb3VzZWxlYXZlKCk7XHJcbiAgICAgICAgICB0aGlzLnVuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICBpZiAodGhpcy5zZXRUaW1lT2JqKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNldFRpbWVPYmopO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSwgMTUwMCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qIOeCueWHu+mdouadv+S5i+WkluWMuuWfnyAqL1xyXG4gIC8vIGNsaWNrRG9jKCkge1xyXG4gIC8vICAgdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gIC8vICAgdGhpcy51bmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAvLyAgIHRoaXMudW5iaW5kTWVudU1vdXNlZW50ZXIoKTtcclxuICAvLyAgIHRoaXMuY2xvc2UoKTtcclxuICAvLyAgIGlmICh0aGlzLnNldFRpbWVPYmopIHtcclxuICAvLyAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2V0VGltZU9iaik7XHJcbiAgLy8gICB9XHJcbiAgLy8gICB0aGlzLmNsaWNrTWVudU91dC5lbWl0KHRoaXMuc2hvdyk7XHJcbiAgLy8gfVxyXG5cclxuICAvKiDlhbPpl63kuIvmi4npnaLmnb8gKi9cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xyXG4gICAgLy8g5YWz6Zet5LiL5ouJ5oyJ6ZKu6Z2i5p2/ICDohI/lgLzmo4DmtYtcclxuICAgIGlmICghdGhpcy5jaGFuZ2VSZWZbJ2Rlc3Ryb3llZCddKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgdGhpcy5jaGFuZ2VSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyog5Yqo5oCB5oyH5a6abWVudeWcqGJvZHnkuK3nmoTkvY3nva4gKi9cclxuICBwcml2YXRlIHNldFBvc2l0aW9uKGUpIHtcclxuICAgIC8vIOS4i+aLieaMiemSrlxyXG4gICAgY29uc3QgYnRuU2l6ZSA9IHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIC8vIOS4i+aLiemdouadvyAgICAgXHJcbiAgICBsZXQgbWVudVJlY3QgPSB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdGhpcy5fbWVudUhlaWdodCA9IG1lbnVSZWN0LmhlaWdodDtcclxuICAgIHRoaXMuX21lbnVXaWR0aCA9IG1lbnVSZWN0LndpZHRoO1xyXG4gICAgLy8g5aaC5p6c6KaB6Ieq5Yqo57qg5q2j5pa55ZCRXHJcbiAgICBpZiAodGhpcy5hdXRvUmVjdGlmeSkge1xyXG4gICAgICB0aGlzLmNoYW5nZVBsYWNlbWVudChidG5TaXplKTtcclxuICAgIH1cclxuICAgIHRoaXMuY2hhbmdlUG9zaXRpb24oYnRuU2l6ZSk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuXHJcbiAgfVxyXG59XHJcbiJdfQ==