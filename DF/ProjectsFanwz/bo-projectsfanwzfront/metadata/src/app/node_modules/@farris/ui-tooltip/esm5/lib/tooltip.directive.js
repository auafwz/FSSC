/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, ElementRef, Renderer2, ViewContainerRef, ComponentFactoryResolver } from '@angular/core';
import { TooltipComponent } from './tooltip-component/tooltip.component';
var FarrisTooltipDirective = /** @class */ (function () {
    function FarrisTooltipDirective(el, render, viewContainerRef, resolver) {
        this.el = el;
        this.render = render;
        this.viewContainerRef = viewContainerRef;
        this.resolver = resolver;
        this.tooltipEnable = true;
        /* 提示文本 */
        this.text = '';
        // 提示框样式
        this.tipCls = '';
        // 提示框宽度
        this.tipWidth = '';
        /* 位置 */
        this.placement = 'top';
        this.triggerMode = 'hover';
        this.showTip = true;
        // 是否绑定了事件
        this.hasBindEvent = false;
        /* 生成提示组件 */
        this.componentFactory = this.resolver.resolveComponentFactory(TooltipComponent);
    }
    Object.defineProperty(FarrisTooltipDirective.prototype, "enableTooltip", {
        get: /**
         * @return {?}
         */
        function () {
            return this.tooltipEnable;
        },
        // 5月7日追加这种写法，控制禁用、启用
        // 原来的时候value是空字符串
        set: 
        // 5月7日追加这种写法，控制禁用、启用
        // 原来的时候value是空字符串
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (typeof value == 'string' && value == '') {
                this.enableOrDisable(true);
            }
            else {
                this.enableOrDisable(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTooltipDirective.prototype, "trigger", {
        get: /**
         * @return {?}
         */
        function () {
            return this.triggerMode;
        },
        /* 触发方式 */
        set: /* 触发方式 */
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                if (value !== this.triggerMode) {
                    this.triggerMode = value;
                    this.unbindEvent();
                    this.bindEvent();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTooltipDirective.prototype, "disable", {
        get: /**
         * @return {?}
         */
        function () {
            return !this.tooltipEnable;
        },
        /* 禁用---跟其他控件的属性容易冲突，逐渐废弃。
        * 比如按钮可以设置禁用不触发点击，但想给出点击提示，这样就冲突了
        */
        set: /* 禁用---跟其他控件的属性容易冲突，逐渐废弃。
          * 比如按钮可以设置禁用不触发点击，但想给出点击提示，这样就冲突了
          */
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.enableOrDisable(!value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FarrisTooltipDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.bindEvent();
    };
    /**
     * @return {?}
     */
    FarrisTooltipDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTooltipDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.unbindEvent();
        this.removeTooltip();
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    FarrisTooltipDirective.prototype.enableOrDisable = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.tooltipEnable = value;
        if (this.tooltipEnable) {
            this.bindEvent();
        }
        else {
            this.unbindEvent();
        }
    };
    /**
     * @return {?}
     */
    FarrisTooltipDirective.prototype.bindEvent = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tooltipEnable) {
            return;
        }
        // 是否已绑定事件
        if (this.hasBindEvent) {
            return;
        }
        if (this.trigger === 'click') {
            // 鼠标点击
            this.clickEvent = this.render.listen(this.el.nativeElement, 'click', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.stopPropagation();
                _this.appendTooltip();
                _this.clickOutEvent = _this.render.listen(document, 'click', (/**
                 * @return {?}
                 */
                function () {
                    _this.removeTooltip();
                    _this.clickOutEvent();
                }));
            }));
        }
        else if (this.trigger === 'focus') {
            // 聚焦
            // @Todo 需要把input等组件和普通组件分开
            this.focusDownEvent = this.render.listen(this.el.nativeElement, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.preventDefault();
                _this.appendTooltip();
            }));
            this.focusUpEvent = this.render.listen(this.el.nativeElement, 'mouseup', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.stopPropagation();
                _this.removeTooltip();
            }));
        }
        else {
            // 鼠标移动上去
            this.mouseenterEvent = this.render.listen(this.el.nativeElement, 'mouseenter', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.stopPropagation();
                _this.appendTooltip();
            }));
            this.mouseleaveEvent = this.render.listen(this.el.nativeElement, 'mouseleave', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.stopPropagation();
                _this.removeTooltip();
            }));
        }
        this.hasBindEvent = true;
    };
    /* 解绑事件 */
    /* 解绑事件 */
    /**
     * @return {?}
     */
    FarrisTooltipDirective.prototype.unbindEvent = /* 解绑事件 */
    /**
     * @return {?}
     */
    function () {
        // 鼠标移上去
        if (this.mouseenterEvent) {
            this.mouseenterEvent();
        }
        if (this.mouseleaveEvent) {
            this.mouseleaveEvent();
        }
        if (this.clickEvent) {
            this.clickEvent();
        }
        if (this.clickOutEvent) {
            this.clickOutEvent();
        }
        if (this.focusDownEvent) {
            this.focusDownEvent();
        }
        if (this.focusUpEvent) {
            this.focusUpEvent();
        }
        this.hasBindEvent = false;
    };
    /* body  移除tooltip */
    /* body  移除tooltip */
    /**
     * @return {?}
     */
    FarrisTooltipDirective.prototype.removeTooltip = /* body  移除tooltip */
    /**
     * @return {?}
     */
    function () {
        if (this.tooltip) {
            this.render.removeChild(document.body, this.tooltip.el.nativeElement);
            this._componentRef.changeDetectorRef.markForCheck();
            this._componentRef.changeDetectorRef.detectChanges();
            this._componentRef.destroy();
            this.viewContainerRef.clear();
            this.tooltip = null;
            this._componentRef = null;
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisTooltipDirective.prototype.appendTooltip = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.showTip)
            return;
        this.generateTooltip();
        this.updateViewProps(this.placement, this.content, this.el.nativeElement.getBoundingClientRect());
    };
    /* 更新tooltip组件属性 */
    /* 更新tooltip组件属性 */
    /**
     * @private
     * @param {?} placement
     * @param {?} content
     * @param {?} hostBoundingClientRect
     * @return {?}
     */
    FarrisTooltipDirective.prototype.updateViewProps = /* 更新tooltip组件属性 */
    /**
     * @private
     * @param {?} placement
     * @param {?} content
     * @param {?} hostBoundingClientRect
     * @return {?}
     */
    function (placement, content, hostBoundingClientRect) {
        this.tooltip.placement = placement;
        this.tooltip.content = content;
        this.tooltip.hostBoundingClientRect = hostBoundingClientRect;
        this.tooltip.tipCls = this.tipCls;
        this.tooltip.tipWidth = this.tipWidth;
        this._componentRef.changeDetectorRef.markForCheck();
        this._componentRef.changeDetectorRef.detectChanges();
    };
    /* 构造tooltip结构 */
    /* 构造tooltip结构 */
    /**
     * @private
     * @return {?}
     */
    FarrisTooltipDirective.prototype.generateTooltip = /* 构造tooltip结构 */
    /**
     * @private
     * @return {?}
     */
    function () {
        this._componentRef = this.viewContainerRef.createComponent(this.componentFactory);
        this.tooltip = this._componentRef.instance;
        // 父元素中移除  添加到body中
        this.render.removeChild(this.render.parentNode(this.el.nativeElement), this.tooltip.el.nativeElement);
        this.render.appendChild(document.body, this.tooltip.el.nativeElement);
    };
    FarrisTooltipDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[farrisTooltip]'
                },] }
    ];
    /** @nocollapse */
    FarrisTooltipDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: ViewContainerRef },
        { type: ComponentFactoryResolver }
    ]; };
    FarrisTooltipDirective.propDecorators = {
        enableTooltip: [{ type: Input, args: ['farrisTooltip',] }],
        text: [{ type: Input }],
        tipCls: [{ type: Input }],
        tipWidth: [{ type: Input }],
        placement: [{ type: Input }],
        trigger: [{ type: Input }],
        disable: [{ type: Input }],
        showTip: [{ type: Input }],
        content: [{ type: Input }]
    };
    return FarrisTooltipDirective;
}());
export { FarrisTooltipDirective };
if (false) {
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.tooltipEnable;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype._componentRef;
    /** @type {?} */
    FarrisTooltipDirective.prototype.text;
    /** @type {?} */
    FarrisTooltipDirective.prototype.tipCls;
    /** @type {?} */
    FarrisTooltipDirective.prototype.tipWidth;
    /** @type {?} */
    FarrisTooltipDirective.prototype.placement;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.triggerMode;
    /** @type {?} */
    FarrisTooltipDirective.prototype.showTip;
    /** @type {?} */
    FarrisTooltipDirective.prototype.content;
    /** @type {?} */
    FarrisTooltipDirective.prototype.mouseenterEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.mouseleaveEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.clickEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.clickOutEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.focusDownEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.focusUpEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.docBody;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.hasBindEvent;
    /** @type {?} */
    FarrisTooltipDirective.prototype.componentFactory;
    /** @type {?} */
    FarrisTooltipDirective.prototype.tooltipRef;
    /** @type {?} */
    FarrisTooltipDirective.prototype.tooltip;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.render;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.viewContainerRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTooltipDirective.prototype.resolver;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHRpcC5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRvb2x0aXAvIiwic291cmNlcyI6WyJsaWIvdG9vbHRpcC5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDRyxTQUFTLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBaUIsU0FBUyxFQUM1QyxnQkFBZ0IsRUFBRSx3QkFBd0IsRUFDN0QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDekU7SUE0RUUsZ0NBQ1UsRUFBYyxFQUNkLE1BQWlCLEVBQ2pCLGdCQUFrQyxFQUNsQyxRQUFrQztRQUhsQyxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQ2QsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUNqQixxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBNUVwQyxrQkFBYSxHQUFZLElBQUksQ0FBQzs7UUFnQjdCLFNBQUksR0FBRyxFQUFFLENBQUM7O1FBRVYsV0FBTSxHQUFDLEVBQUUsQ0FBQzs7UUFFVixhQUFRLEdBQUMsRUFBRSxDQUFDOztRQUVaLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFFbkIsZ0JBQVcsR0FBRyxPQUFPLENBQUM7UUEyQnJCLFlBQU8sR0FBWSxJQUFJLENBQUM7O1FBY3pCLGlCQUFZLEdBQUcsS0FBSyxDQUFDOztRQUc3QixxQkFBZ0IsR0FBdUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBUzNHLENBQUM7SUF6RUwsc0JBQ0ksaURBQWE7Ozs7UUFPakI7WUFDRSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDNUIsQ0FBQztRQVpELHFCQUFxQjtRQUNyQixrQkFBa0I7Ozs7Ozs7O1FBQ2xCLFVBQ2tCLEtBQVU7WUFDMUIsSUFBSSxPQUFPLEtBQUssSUFBRSxR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OztnQkFoTkYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxpQkFBaUI7aUJBQzVCOzs7O2dCQU4yQixVQUFVO2dCQUFpQixTQUFTO2dCQUM1QyxnQkFBZ0I7Z0JBQUUsd0JBQXdCOzs7Z0NBVzNELEtBQUssU0FBQyxlQUFlO3VCQVlyQixLQUFLO3lCQUVMLEtBQUs7MkJBRUwsS0FBSzs0QkFFTCxLQUFLOzBCQUlMLEtBQUs7MEJBaUJMLEtBQUs7MEJBUUwsS0FBSzswQkFJTCxLQUFLOztJQXNKUiw2QkFBQztDQUFBLEFBak5ELElBaU5DO1NBOU1ZLHNCQUFzQjs7Ozs7O0lBQ2pDLCtDQUFzQzs7Ozs7SUFDdEMsK0NBQXNEOztJQWV0RCxzQ0FBbUI7O0lBRW5CLHdDQUFtQjs7SUFFbkIsMENBQXFCOztJQUVyQiwyQ0FBMkI7Ozs7O0lBRTNCLDZDQUE4Qjs7SUEyQjlCLHlDQUFpQzs7SUFJakMseUNBQTRDOztJQUU1QyxpREFBcUI7O0lBQ3JCLGlEQUFxQjs7SUFDckIsNENBQWdCOztJQUNoQiwrQ0FBbUI7O0lBQ25CLGdEQUFvQjs7SUFDcEIsOENBQWtCOztJQUNsQix5Q0FBYTs7Ozs7SUFFYiw4Q0FBNkI7O0lBRzdCLGtEQUErRzs7SUFFL0csNENBQWdCOztJQUNoQix5Q0FBMEI7Ozs7O0lBRXhCLG9DQUFzQjs7Ozs7SUFDdEIsd0NBQXlCOzs7OztJQUN6QixrREFBMEM7Ozs7O0lBQzFDLDBDQUEwQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgT25Jbml0LCBEaXJlY3RpdmUsIElucHV0LCBFbGVtZW50UmVmLCBBZnRlclZpZXdJbml0LCBSZW5kZXJlcjIsIE9uRGVzdHJveSwgVGVtcGxhdGVSZWYsXHJcbiAgQ29tcG9uZW50RmFjdG9yeSwgVmlld0NvbnRhaW5lclJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBOZ1pvbmUsIENvbXBvbmVudFJlZlxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUb29sdGlwQ29tcG9uZW50IH0gZnJvbSAnLi90b29sdGlwLWNvbXBvbmVudC90b29sdGlwLmNvbXBvbmVudCc7XHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiAnW2ZhcnJpc1Rvb2x0aXBdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzVG9vbHRpcERpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICBwcml2YXRlIHRvb2x0aXBFbmFibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIHByaXZhdGUgX2NvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPFRvb2x0aXBDb21wb25lbnQ+O1xyXG4gIC8vIDXmnIg35pel6L+95Yqg6L+Z56eN5YaZ5rOV77yM5o6n5Yi256aB55So44CB5ZCv55SoXHJcbiAgLy8g5Y6f5p2l55qE5pe25YCZdmFsdWXmmK/nqbrlrZfnrKbkuLJcclxuICBASW5wdXQoJ2ZhcnJpc1Rvb2x0aXAnKVxyXG4gIHNldCBlbmFibGVUb29sdGlwKHZhbHVlOiBhbnkpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWU9PSdzdHJpbmcnJiZ2YWx1ZSA9PSAnJykge1xyXG4gICAgICB0aGlzLmVuYWJsZU9yRGlzYWJsZSh0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlT3JEaXNhYmxlKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGVuYWJsZVRvb2x0aXAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50b29sdGlwRW5hYmxlO1xyXG4gIH1cclxuICAvKiDmj5DnpLrmlofmnKwgKi9cclxuICBASW5wdXQoKSB0ZXh0ID0gJyc7XHJcbiAgLy8g5o+Q56S65qGG5qC35byPXHJcbiAgQElucHV0KCkgdGlwQ2xzPScnO1xyXG4gIC8vIOaPkOekuuahhuWuveW6plxyXG4gIEBJbnB1dCgpIHRpcFdpZHRoPScnO1xyXG4gIC8qIOS9jee9riAqL1xyXG4gIEBJbnB1dCgpIHBsYWNlbWVudCA9ICd0b3AnO1xyXG5cclxuICBwcml2YXRlIHRyaWdnZXJNb2RlID0gJ2hvdmVyJztcclxuICAvKiDop6blj5HmlrnlvI8gKi9cclxuICBASW5wdXQoKVxyXG4gIHNldCB0cmlnZ2VyKHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnRyaWdnZXJNb2RlKSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyTW9kZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudW5iaW5kRXZlbnQoKTtcclxuICAgICAgICB0aGlzLmJpbmRFdmVudCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCB0cmlnZ2VyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlck1vZGU7XHJcbiAgfVxyXG5cclxuICAvKiDnpoHnlKgtLS3ot5/lhbbku5bmjqfku7bnmoTlsZ7mgKflrrnmmJPlhrLnqoHvvIzpgJDmuJDlup/lvIPjgIJcclxuICAqIOavlOWmguaMiemSruWPr+S7peiuvue9ruemgeeUqOS4jeinpuWPkeeCueWHu++8jOS9huaDs+e7meWHuueCueWHu+aPkOekuu+8jOi/meagt+WwseWGsueqgeS6hlxyXG4gICovXHJcbiAgQElucHV0KClcclxuICBzZXQgZGlzYWJsZSh2YWx1ZSkge1xyXG4gICAgdGhpcy5lbmFibGVPckRpc2FibGUoIXZhbHVlKTtcclxuICB9XHJcbiAgZ2V0IGRpc2FibGUoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMudG9vbHRpcEVuYWJsZTtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgpIHNob3dUaXA6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuXHJcbiAgLyog5YaF5a655qih5p2/ICovXHJcbiAgQElucHV0KCkgY29udGVudDogc3RyaW5nIHwgVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgbW91c2VlbnRlckV2ZW50OiBhbnk7XHJcbiAgbW91c2VsZWF2ZUV2ZW50OiBhbnk7XHJcbiAgY2xpY2tFdmVudDogYW55O1xyXG4gIGNsaWNrT3V0RXZlbnQ6IGFueTtcclxuICBmb2N1c0Rvd25FdmVudDogYW55O1xyXG4gIGZvY3VzVXBFdmVudDogYW55O1xyXG4gIGRvY0JvZHk6IGFueTtcclxuICAvLyDmmK/lkKbnu5Hlrprkuobkuovku7ZcclxuICBwcml2YXRlIGhhc0JpbmRFdmVudCA9IGZhbHNlO1xyXG5cclxuICAvKiDnlJ/miJDmj5DnpLrnu4Tku7YgKi9cclxuICBjb21wb25lbnRGYWN0b3J5OiBDb21wb25lbnRGYWN0b3J5PFRvb2x0aXBDb21wb25lbnQ+ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShUb29sdGlwQ29tcG9uZW50KTtcclxuXHJcbiAgdG9vbHRpcFJlZjogYW55O1xyXG4gIHRvb2x0aXA6IFRvb2x0aXBDb21wb25lbnQ7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMixcclxuICAgIHByaXZhdGUgdmlld0NvbnRhaW5lclJlZjogVmlld0NvbnRhaW5lclJlZixcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxyXG4gICkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5iaW5kRXZlbnQoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuXHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMudW5iaW5kRXZlbnQoKTtcclxuICAgIHRoaXMucmVtb3ZlVG9vbHRpcCgpO1xyXG4gIH1cclxuICBwcml2YXRlIGVuYWJsZU9yRGlzYWJsZSh2YWx1ZSkge1xyXG4gICAgdGhpcy50b29sdGlwRW5hYmxlID0gdmFsdWU7XHJcbiAgICBpZiAodGhpcy50b29sdGlwRW5hYmxlKSB7XHJcbiAgICAgIHRoaXMuYmluZEV2ZW50KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnVuYmluZEV2ZW50KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBiaW5kRXZlbnQoKSB7XHJcbiAgICBpZiAoIXRoaXMudG9vbHRpcEVuYWJsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyDmmK/lkKblt7Lnu5Hlrprkuovku7ZcclxuICAgIGlmICh0aGlzLmhhc0JpbmRFdmVudCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50cmlnZ2VyID09PSAnY2xpY2snKSB7XHJcbiAgICAgIC8vIOm8oOagh+eCueWHu1xyXG4gICAgICB0aGlzLmNsaWNrRXZlbnQgPSB0aGlzLnJlbmRlci5saXN0ZW4odGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnY2xpY2snLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5hcHBlbmRUb29sdGlwKCk7XHJcbiAgICAgICAgdGhpcy5jbGlja091dEV2ZW50ID0gdGhpcy5yZW5kZXIubGlzdGVuKGRvY3VtZW50LCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXAoKTtcclxuICAgICAgICAgIHRoaXMuY2xpY2tPdXRFdmVudCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy50cmlnZ2VyID09PSAnZm9jdXMnKSB7XHJcbiAgICAgIC8vIOiBmueEplxyXG4gICAgICAvLyBAVG9kbyDpnIDopoHmioppbnB1dOetiee7hOS7tuWSjOaZrumAmue7hOS7tuWIhuW8gFxyXG4gICAgICB0aGlzLmZvY3VzRG93bkV2ZW50ID0gdGhpcy5yZW5kZXIubGlzdGVuKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ21vdXNlZG93bicsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuYXBwZW5kVG9vbHRpcCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5mb2N1c1VwRXZlbnQgPSB0aGlzLnJlbmRlci5saXN0ZW4odGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnbW91c2V1cCcsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXAoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDpvKDmoIfnp7vliqjkuIrljrtcclxuICAgICAgdGhpcy5tb3VzZWVudGVyRXZlbnQgPSB0aGlzLnJlbmRlci5saXN0ZW4odGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnbW91c2VlbnRlcicsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLmFwcGVuZFRvb2x0aXAoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMubW91c2VsZWF2ZUV2ZW50ID0gdGhpcy5yZW5kZXIubGlzdGVuKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ21vdXNlbGVhdmUnLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVUb29sdGlwKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5oYXNCaW5kRXZlbnQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyog6Kej57uR5LqL5Lu2ICovXHJcbiAgdW5iaW5kRXZlbnQoKSB7XHJcbiAgICAvLyDpvKDmoIfnp7vkuIrljrtcclxuICAgIGlmICh0aGlzLm1vdXNlZW50ZXJFdmVudCkge1xyXG4gICAgICB0aGlzLm1vdXNlZW50ZXJFdmVudCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubW91c2VsZWF2ZUV2ZW50KSB7XHJcbiAgICAgIHRoaXMubW91c2VsZWF2ZUV2ZW50KCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jbGlja0V2ZW50KSB7XHJcbiAgICAgIHRoaXMuY2xpY2tFdmVudCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY2xpY2tPdXRFdmVudCkge1xyXG4gICAgICB0aGlzLmNsaWNrT3V0RXZlbnQoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZvY3VzRG93bkV2ZW50KSB7XHJcbiAgICAgIHRoaXMuZm9jdXNEb3duRXZlbnQoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZvY3VzVXBFdmVudCkge1xyXG4gICAgICB0aGlzLmZvY3VzVXBFdmVudCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5oYXNCaW5kRXZlbnQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qIGJvZHkgIOenu+mZpHRvb2x0aXAgKi9cclxuICByZW1vdmVUb29sdGlwKCkge1xyXG4gICAgaWYgKHRoaXMudG9vbHRpcCkge1xyXG4gICAgICB0aGlzLnJlbmRlci5yZW1vdmVDaGlsZChkb2N1bWVudC5ib2R5LCB0aGlzLnRvb2x0aXAuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgIHRoaXMuX2NvbXBvbmVudFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgdGhpcy5fY29tcG9uZW50UmVmLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTsgICAgICBcclxuICAgICAgdGhpcy5fY29tcG9uZW50UmVmLmRlc3Ryb3koKTtcclxuICAgICAgdGhpcy52aWV3Q29udGFpbmVyUmVmLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMudG9vbHRpcCA9IG51bGw7XHJcbiAgICAgIHRoaXMuX2NvbXBvbmVudFJlZj1udWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhcHBlbmRUb29sdGlwKCkge1xyXG4gICAgaWYgKCF0aGlzLnNob3dUaXApIHJldHVybjtcclxuICAgIHRoaXMuZ2VuZXJhdGVUb29sdGlwKCk7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXdQcm9wcyh0aGlzLnBsYWNlbWVudCwgdGhpcy5jb250ZW50LCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xyXG4gIH1cclxuXHJcbiAgLyog5pu05pawdG9vbHRpcOe7hOS7tuWxnuaApyAqL1xyXG4gIHByaXZhdGUgdXBkYXRlVmlld1Byb3BzKHBsYWNlbWVudDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxhbnk+LCBob3N0Qm91bmRpbmdDbGllbnRSZWN0OiBvYmplY3QpIHtcclxuICAgIHRoaXMudG9vbHRpcC5wbGFjZW1lbnQgPSBwbGFjZW1lbnQ7XHJcbiAgICB0aGlzLnRvb2x0aXAuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB0aGlzLnRvb2x0aXAuaG9zdEJvdW5kaW5nQ2xpZW50UmVjdCA9IGhvc3RCb3VuZGluZ0NsaWVudFJlY3Q7XHJcbiAgICB0aGlzLnRvb2x0aXAudGlwQ2xzPXRoaXMudGlwQ2xzO1xyXG4gICAgdGhpcy50b29sdGlwLnRpcFdpZHRoPXRoaXMudGlwV2lkdGg7XHJcbiAgICB0aGlzLl9jb21wb25lbnRSZWYuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICB0aGlzLl9jb21wb25lbnRSZWYuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyog5p6E6YCgdG9vbHRpcOe7k+aehCAqL1xyXG4gIHByaXZhdGUgZ2VuZXJhdGVUb29sdGlwKCkgeyAgICBcclxuICAgIHRoaXMuX2NvbXBvbmVudFJlZj10aGlzLnZpZXdDb250YWluZXJSZWYuY3JlYXRlQ29tcG9uZW50KHRoaXMuY29tcG9uZW50RmFjdG9yeSlcclxuICAgIHRoaXMudG9vbHRpcCA9ICB0aGlzLl9jb21wb25lbnRSZWYuaW5zdGFuY2U7XHJcbiAgICAvLyDniLblhYPntKDkuK3np7vpmaQgIOa3u+WKoOWIsGJvZHnkuK1cclxuICAgIHRoaXMucmVuZGVyLnJlbW92ZUNoaWxkKHRoaXMucmVuZGVyLnBhcmVudE5vZGUodGhpcy5lbC5uYXRpdmVFbGVtZW50KSwgdGhpcy50b29sdGlwLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgdGhpcy5yZW5kZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuYm9keSwgdGhpcy50b29sdGlwLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXX0=