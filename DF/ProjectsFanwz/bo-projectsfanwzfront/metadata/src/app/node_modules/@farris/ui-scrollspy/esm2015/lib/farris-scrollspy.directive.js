/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, EventEmitter, Output, ElementRef, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisScrollSpyService } from './farris-scrollspy.service';
//锚点部分
export class FarrisScrollSpyDirective {
    /**
     * @param {?} elementRef
     * @param {?} scrollSpy
     */
    constructor(elementRef, scrollSpy) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.elementRef.nativeElement.className += ' f-scrollspy-part';
        if (!this.scrollGroupId) {
            this.scrollGroupId = this.scrollSpy.getGroupId();
        }
        //this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId, this.scrollGroupId);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.scrollSpy.removeElement(this.scrollId, this.scrollGroupId);
    }
}
FarrisScrollSpyDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fScrollSpy]'
            },] }
];
/** @nocollapse */
FarrisScrollSpyDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: FarrisScrollSpyService }
];
FarrisScrollSpyDirective.propDecorators = {
    scrollId: [{ type: Input, args: ['fScrollSpy',] }],
    scrollGroupId: [{ type: Input, args: ['fScrollGroup',] }]
};
if (false) {
    /** @type {?} */
    FarrisScrollSpyDirective.prototype.scrollId;
    /** @type {?} */
    FarrisScrollSpyDirective.prototype.scrollGroupId;
    /**
     * @type {?}
     * @private
     */
    FarrisScrollSpyDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisScrollSpyDirective.prototype.scrollSpy;
}
//跟随点击
export class FscrollFollowElementDirective {
    /**
     * @param {?} elementRef
     * @param {?} scrollSpy
     */
    constructor(elementRef, scrollSpy) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.followGroupId) {
            this.followGroupId = this.scrollSpy.getGroupId();
        }
        this.scrollSpy.addFollowElement(this.elementRef.nativeElement, this.followId, this.followGroupId);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.scrollSpy.removeFollowElement(this.followId, this.followGroupId);
    }
}
FscrollFollowElementDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fScrollFollowElement]'
            },] }
];
/** @nocollapse */
FscrollFollowElementDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: FarrisScrollSpyService }
];
FscrollFollowElementDirective.propDecorators = {
    followId: [{ type: Input, args: ['fScrollFollowElement',] }],
    followGroupId: [{ type: Input, args: ['fScrollElement',] }]
};
if (false) {
    /** @type {?} */
    FscrollFollowElementDirective.prototype.followId;
    /** @type {?} */
    FscrollFollowElementDirective.prototype.followGroupId;
    /**
     * @type {?}
     * @private
     */
    FscrollFollowElementDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FscrollFollowElementDirective.prototype.scrollSpy;
}
//监听滚动部分content
export class FscrollSpyContainerDirective {
    /**
     * @param {?} elementRef
     * @param {?} scrollSpy
     * @param {?} changeDetector
     */
    constructor(elementRef, scrollSpy, changeDetector) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
        this.changeDetector = changeDetector;
        this.fScrollChange = new EventEmitter;
        this.position = "relative";
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.fScrollGroupId) {
            this.fScrollGroupId = this.scrollSpy.getGroupId();
        }
        this.elementRef.nativeElement.className += ' f-scrollspy-container';
        this.scrollSpy.addContentElement(this.elementRef.nativeElement, this.fScrollGroupId);
        this.scrollSpy.setOffset(this.fOffset, this.fScrollGroupId);
        this.scrollSpy.updateScrollGroup(this.fScrollGroupId).subscribe((/**
         * @param {?} currentSection
         * @return {?}
         */
        (currentSection) => {
            //console.log('111',currentSection);
            console.log('section-group' + currentSection);
            this.fScrollChange.emit(currentSection);
            // this.scrollSpy.setCurrentSectionId(this.fScrollGroupId,currentSection);
            // this.changeDetector.markForCheck();
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // this.scrollSpy.getCurrentSection$(this.fScrollGroupId)
        // .subscribe((currentSection: string): void => {
        //   this.fScrollChange.next(currentSection);
        //   this.changeDetector.markForCheck();
        // });
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.scrollSpy.removeContentElement(this.fScrollGroupId);
    }
}
FscrollSpyContainerDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fScrollSpyContainer]'
            },] }
];
/** @nocollapse */
FscrollSpyContainerDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: FarrisScrollSpyService },
    { type: ChangeDetectorRef }
];
FscrollSpyContainerDirective.propDecorators = {
    fOffset: [{ type: Input }],
    fScrollGroupId: [{ type: Input, args: ['fScrollSpyContainer',] }],
    fScrollChange: [{ type: Output }],
    position: [{ type: HostBinding, args: ["style.position",] }]
};
if (false) {
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fOffset;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fScrollGroupId;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fScrollChange;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.position;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.scrollSpy;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.changeDetector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLXNjcm9sbHNweS5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNjcm9sbHNweS8iLCJzb3VyY2VzIjpbImxpYi9mYXJyaXMtc2Nyb2xsc3B5LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBYyxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQW9DLGlCQUFpQixFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqSyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7QUFLcEUsTUFBTSxPQUFPLHdCQUF3Qjs7Ozs7SUFJakMsWUFDVSxVQUFzQixFQUN0QixTQUFpQztRQURqQyxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGNBQVMsR0FBVCxTQUFTLENBQXdCO0lBQ3hDLENBQUM7Ozs7SUFFRyxRQUFRO1FBQ2IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsU0FBUyxJQUFFLG1CQUFtQixDQUFDO1FBQzdELElBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFDO1lBQ3JCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztTQUNsRDtRQUNELDZGQUE2RjtJQUMvRixDQUFDOzs7O0lBQ0QsZUFBZTtRQUNiLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzdGLENBQUM7Ozs7SUFFTSxXQUFXO1FBQ2hCLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7OztZQXpCSixTQUFTLFNBQUM7Z0JBQ1AsUUFB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Q0FBQyxDQUFDO0lBQzNELENBQUM7OztZQTdDSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLHVCQUF1QjthQUNwQzs7OztZQTVENEQsVUFBVTtZQUM5RCxzQkFBc0I7WUFENEUsaUJBQWlCOzs7c0JBK0R6SCxLQUFLOzZCQUNMLEtBQUssU0FBQyxxQkFBcUI7NEJBQzNCLE1BQU07dUJBRU4sV0FBVyxTQUFDLGdCQUFnQjs7OztJQUo3QiwrQ0FBd0I7O0lBQ3hCLHNEQUFvRDs7SUFDcEQscURBQTJDOztJQUUzQyxnREFBcUQ7Ozs7O0lBR2pELGtEQUE4Qjs7Ozs7SUFDOUIsaURBQXlDOzs7OztJQUN6QyxzREFBeUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEluamVjdGFibGUsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgRWxlbWVudFJlZiwgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBIb3N0QmluZGluZyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGYXJyaXNTY3JvbGxTcHlTZXJ2aWNlIH0gZnJvbSAnLi9mYXJyaXMtc2Nyb2xsc3B5LnNlcnZpY2UnO1xyXG4vL+mUmueCuemDqOWIhlxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2ZTY3JvbGxTcHldJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzU2Nyb2xsU3B5RGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcbiAgICBASW5wdXQoJ2ZTY3JvbGxTcHknKSBzY3JvbGxJZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCdmU2Nyb2xsR3JvdXAnKSBzY3JvbGxHcm91cElkOiBzdHJpbmc7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICBwcml2YXRlIHNjcm9sbFNweTogRmFycmlzU2Nyb2xsU3B5U2VydmljZSxcclxuICAgICkge31cclxuICBcclxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lKz0nIGYtc2Nyb2xsc3B5LXBhcnQnO1xyXG4gICAgICBpZighdGhpcy5zY3JvbGxHcm91cElkKXtcclxuICAgICAgICB0aGlzLnNjcm9sbEdyb3VwSWQgPSB0aGlzLnNjcm9sbFNweS5nZXRHcm91cElkKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy90aGlzLnNjcm9sbFNweS5hZGRFbGVtZW50KHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLnNjcm9sbElkLHRoaXMuc2Nyb2xsR3JvdXBJZCk7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKXtcclxuICAgICAgdGhpcy5zY3JvbGxTcHkuYWRkRWxlbWVudCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5zY3JvbGxJZCx0aGlzLnNjcm9sbEdyb3VwSWQpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5yZW1vdmVFbGVtZW50KHRoaXMuc2Nyb2xsSWQsIHRoaXMuc2Nyb2xsR3JvdXBJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4vL+i3n+maj+eCueWHu1xyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2ZTY3JvbGxGb2xsb3dFbGVtZW50XSdcclxufSlcclxuZXhwb3J0IGNsYXNzIEZzY3JvbGxGb2xsb3dFbGVtZW50RGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIC8vQElucHV0KCkgZm9sbG93SWQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgnZlNjcm9sbEZvbGxvd0VsZW1lbnQnKSBmb2xsb3dJZDpzdHJpbmc7XHJcbiAgICBASW5wdXQoJ2ZTY3JvbGxFbGVtZW50JykgZm9sbG93R3JvdXBJZDpzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICBwcml2YXRlIHNjcm9sbFNweTogRmFycmlzU2Nyb2xsU3B5U2VydmljZSxcclxuICAgICkge31cclxuICBcclxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgaWYoIXRoaXMuZm9sbG93R3JvdXBJZCl7XHJcbiAgICAgICAgdGhpcy5mb2xsb3dHcm91cElkID0gdGhpcy5zY3JvbGxTcHkuZ2V0R3JvdXBJZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LmFkZEZvbGxvd0VsZW1lbnQodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHRoaXMuZm9sbG93SWQsIHRoaXMuZm9sbG93R3JvdXBJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5yZW1vdmVGb2xsb3dFbGVtZW50KHRoaXMuZm9sbG93SWQsIHRoaXMuZm9sbG93R3JvdXBJZCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbi8v55uR5ZCs5rua5Yqo6YOo5YiGY29udGVudFxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2ZTY3JvbGxTcHlDb250YWluZXJdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRnNjcm9sbFNweUNvbnRhaW5lckRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCxBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG4gIFxyXG4gIEBJbnB1dCgpIGZPZmZzZXQ6bnVtYmVyO1xyXG4gIEBJbnB1dCgnZlNjcm9sbFNweUNvbnRhaW5lcicpIGZTY3JvbGxHcm91cElkOnN0cmluZztcclxuICBAT3V0cHV0KCkgZlNjcm9sbENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI7XHJcblxyXG4gIEBIb3N0QmluZGluZyhcInN0eWxlLnBvc2l0aW9uXCIpIHBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBcclxuICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICBwcml2YXRlIHNjcm9sbFNweTogRmFycmlzU2Nyb2xsU3B5U2VydmljZSxcclxuICAgICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICApIHt9XHJcbiAgXHJcbiAgICBwdWJsaWMgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgIGlmKCF0aGlzLmZTY3JvbGxHcm91cElkKXtcclxuICAgICAgICB0aGlzLmZTY3JvbGxHcm91cElkID0gdGhpcy5zY3JvbGxTcHkuZ2V0R3JvdXBJZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTmFtZSs9JyBmLXNjcm9sbHNweS1jb250YWluZXInO1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5hZGRDb250ZW50RWxlbWVudCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5mU2Nyb2xsR3JvdXBJZCk7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnNldE9mZnNldCh0aGlzLmZPZmZzZXQsIHRoaXMuZlNjcm9sbEdyb3VwSWQpO1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS51cGRhdGVTY3JvbGxHcm91cCh0aGlzLmZTY3JvbGxHcm91cElkKS5zdWJzY3JpYmUoKGN1cnJlbnRTZWN0aW9uOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCcxMTEnLGN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnc2VjdGlvbi1ncm91cCcrY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgdGhpcy5mU2Nyb2xsQ2hhbmdlLmVtaXQoY3VycmVudFNlY3Rpb24pO1xyXG5cclxuICAgICAgICAgIC8vIHRoaXMuc2Nyb2xsU3B5LnNldEN1cnJlbnRTZWN0aW9uSWQodGhpcy5mU2Nyb2xsR3JvdXBJZCxjdXJyZW50U2VjdGlvbik7XHJcblxyXG4gICAgICAgICAgLy8gdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICBcclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpe1xyXG4gICAgICAvLyB0aGlzLnNjcm9sbFNweS5nZXRDdXJyZW50U2VjdGlvbiQodGhpcy5mU2Nyb2xsR3JvdXBJZClcclxuICAgICAgLy8gLnN1YnNjcmliZSgoY3VycmVudFNlY3Rpb246IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgICAvLyAgIHRoaXMuZlNjcm9sbENoYW5nZS5uZXh0KGN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgLy8gICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAvLyB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnJlbW92ZUNvbnRlbnRFbGVtZW50KHRoaXMuZlNjcm9sbEdyb3VwSWQpO1xyXG4gICAgfVxyXG5cclxuICB9Il19