/**
 * @fileoverview added by tsickle
 * Generated from: lib/organization-selector.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, forwardRef, HostBinding, Injector, Input, NgZone, Output, Renderer2, ViewChild, ChangeDetectorRef } from '@angular/core';
import { NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { DialogComponent } from '@farris/ui-dialog';
import { ApiService } from '../utils/api.service';
import { CommonUtil } from '../utils/common.tool';
import { FavoritesTool } from '../utils/favorites.tool';
import { ChangeType } from '../utils/index.type';
import { StateMgrTool } from '../utils/state.mgr.tool';
import { Subject } from 'rxjs';
import * as _ from 'lodash-es';
import { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';
import { GroupComponent } from './tab-group/group.component';
import { OrganizationComponent } from './tab-organization/to.component';
import { FavoritesComponent } from './tab-favorites/favorites.component';
var OrganizationSelectorComponent = /** @class */ (function () {
    function OrganizationSelectorComponent(render, injector, favoritesTool, apiService, ngZone, stateMgr) {
        var _this = this;
        this.render = render;
        this.injector = injector;
        this.favoritesTool = favoritesTool;
        this.apiService = apiService;
        this.ngZone = ngZone;
        this.stateMgr = stateMgr;
        this.baseCls = true;
        this.width = '100%';
        // input框是否显示
        this.showInput = true;
        // 业务标识
        this.busNum = 'common';
        this.multiSelect = true;
        this.placeholder = '请选择';
        this.searchPlaceholder = '请输入编号或名称搜索';
        this.readonly = false;
        // 传入的url
        this.absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';
        this.absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';
        this.absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';
        this.groupApiUrl = "/api/runtime/sys/v1.0/org-group";
        this.groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend-org.js';
        /**
         * 数据源类型
         * 默认为： System_organization  系统数据源   获取系统人员、系统组织
         * Administrative_organization  已扩展数据源  获取行政组织、行政人员
         * absOrgType {string}
         * PersonnelSelectorComponent
         */
        this.absOrgType = 'System_organization';
        // 启用分层加载
        this.enableHierarchicalLoading = true;
        // 不包含停用组织
        this.notGetStopOrg = true;
        this.primaryField = 'orgId';
        this.displayField = 'name';
        this.orgIds = [];
        // 展开层级
        this.layer = 1;
        // 是否启用级联选中
        this.cascadeCheck = true;
        // 级联选中下级
        this.cascadeDown = true;
        // 级联选中上级
        this.cascadeUp = false;
        // 显示全选按钮
        this.showCheckAll = false;
        this.keepSelect = false;
        // 一次性最多选中多少条
        this.selectedLimit = 50;
        this.showTabIds = 'organization,favorites';
        this.activeTabId = 'organization';
        // 搜索前端分页50条
        this.searchPageSize = 50;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ',';
        this.draggable = true;
        this.selectionsChange = new EventEmitter();
        // 全部清除按钮触发回调
        this.inputClear = new EventEmitter();
        // 标签删除按钮出发回调
        this.tagRemoved = new EventEmitter();
        this.selections = [];
        this.originalSelections = [];
        this.finalText = [];
        this.lookupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.searchIcon = '<span class="k-icon k-i-search"></span>';
        this.organizationTabId = 'organization';
        this.groupTabId = 'group';
        this.favoritesTabId = 'favorites';
        this.dialogHeight = 548;
        this.dialogId = 'dialogId';
        this.isShow = false;
        this.confirmToken = false;
        this.hideSearchPanel = true;
        this.searchText = '';
        this.groupDialogOpend = false;
        this.groupDialogTitle = '保存为群组';
        this.validGroupTitle = true;
        this.groupTitleStream = new Subject();
        this.selectionsShow = false;
        this.farrisDialogbeforeClose = (/**
         * @return {?}
         */
        function () {
            _this.isShow = false;
            if (_this.confirmToken) {
                _this.originalSelections = _.cloneDeep(_this.selections);
            }
            else {
                _this.selections = _.cloneDeep(_this.originalSelections);
            }
            _this.hideSearchPanel = true;
            _this.confirmToken = false;
            return true;
        });
        this.onModelChange = (/**
         * @param {?=} val
         * @return {?}
         */
        function (val) { });
        this.onModelTouched = (/**
         * @param {?=} val
         * @return {?}
         */
        function (val) { });
        this.apiService.absUrl = this.absUserOrgUrl;
        this.apiService.groupApiUrl = this.groupApiUrl;
        this.cdRef = this.injector.get(ChangeDetectorRef);
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.writeValue = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        if (!!obj && typeof obj === 'string') {
            this.finalText = obj.split(this.multipleChoiceSeparator);
        }
        else {
            this.finalText = [];
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        throw new Error('Method not implemented.');
    };
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.initDialogHeight();
        this.listenSelectionsChange();
        this.initTabs();
        this.initGroupSearch();
        this.ngControl = this.injector.get(NgControl, null);
    };
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.listenWindowResize();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var orgIdsChange = changes.orgIds;
        if (orgIdsChange && orgIdsChange.currentValue) {
            this.assembleDataByOrgIds(orgIdsChange.currentValue);
        }
    };
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.selectionsSub.unsubscribe();
    };
    /**
     * @private
     * @param {?} selections
     * @param {?=} changeType
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.emitSelections = /**
     * @private
     * @param {?} selections
     * @param {?=} changeType
     * @return {?}
     */
    function (selections, changeType) {
        if (changeType === void 0) { changeType = ChangeType.ValueChanged; }
        this.stateMgr.emitSelections(selections, changeType);
    };
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.mapFields2Component = 
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        if (!helpFields.includes(this.primaryField)) {
            console.warn('选中组件数据，需要映射组件主键');
            return;
        }
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                var bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                var pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split('/').filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n !== ''; }));
                }
                /** @type {?} */
                var multiPath = this.mapFields[this.primaryField].split(this.multipleChoiceSeparator);
                /** @type {?} */
                var fieldPaths = pathArr.concat(multiPath[0].split('.'));
                /** @type {?} */
                var ids = bindingData.getValue(fieldPaths);
                if (!ids) {
                    this.emitSelections([]);
                    return;
                }
                this.assembleDataByOrgIds(ids.split(this.multipleChoiceSeparator));
            }
        }
    };
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.assembleDataByOrgIds = 
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        if (!ids || ids.length === 0) {
            return;
        }
        if (ids && ids.length > 1 && !this.multiSelect) {
            console.warn('单选模式下，只允许选中一条数据~');
            return;
        }
        /** @type {?} */
        var param = {
            absOrgType: this.absOrgType,
            idList: ids,
            getOrgAllPath: true,
            getCurUser: false
        };
        this.apiService.getOrganization(param).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res && res.data) {
                _this.selections = res.data;
                if (!_this.mapFields) {
                    _this.assembleFinalText();
                }
                else {
                    _this.emitSelections(_this.selections);
                }
            }
        }));
    };
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.assembleFinalText = 
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.finalText = [];
        this.selections.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            /** @type {?} */
            var formatedName = _this.formatFn && _this.formatFn(item);
            /** @type {?} */
            var finalText = formatedName ? formatedName : item[_this.displayField];
            _this.finalText.push(finalText);
        }));
        this.finalText = this.finalText.slice();
    };
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initDialogHeight = 
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var uuid = CommonUtil.newGuid();
        this.dialogId += uuid;
        /** @type {?} */
        var windowInnerHeight = window.innerHeight;
        this.dialogHeight = windowInnerHeight - 60;
        if (this.dialogHeight > 680) {
            this.dialogHeight = 680;
        }
    };
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenSelectionsChange = 
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data.changeType === ChangeType.ValueChanged) {
                _this.selections = _.cloneDeep(data.value);
            }
            else if (data.changeType === ChangeType.Remove) {
                _this.selections = _this.selections.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item[_this.primaryField] !== data.value[_this.primaryField]; }));
            }
            else if (data.changeType === ChangeType.Append) {
                CommonUtil.findIndex(data.value[_this.primaryField], _this.primaryField, _this.selections) === -1 ? _this.selections.push(data.value) : null;
            }
            _this.cdRef.detectChanges();
        }));
    };
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initTabs = 
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    function () {
        if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
            this.enableFavorites = true;
        }
        else {
            this.enableFavorites = false;
        }
        // 暂不开启群组功能
        // const allTabIdsArray = this.showTabIds.split(',').filter(item => item !== this.groupTabId);
        // this.showTabIds = allTabIdsArray.join(',');
        if (this.showTabIds.indexOf(this.groupTabId) !== -1) {
            this.enableGroup = true;
        }
        else {
            this.enableGroup = false;
        }
        // 启用群组功能扩展函数
        /*
        if (this.enableGroup) {
          const ccwork = window.top.document.createElement("script")
          ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();
          window.document.head.appendChild(ccwork);
        }
        */
    };
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initGroupSearch = 
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.enableGroup) {
            this.groupTitleStream.pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (!!data) {
                    _this.validGroupTitle = true;
                }
                else {
                    _this.validGroupTitle = false;
                }
            }));
        }
    };
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenWindowResize = 
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var dialogElement = document.querySelector('#' + this.dialogId);
        /** @type {?} */
        var targetElement = null;
        if (!!dialogElement) {
            targetElement = dialogElement.querySelector('.modal-dialog');
        }
        window.addEventListener('resize', (/**
         * @return {?}
         */
        function () {
            if (!!targetElement) {
                /** @type {?} */
                var height = window.innerHeight - 60;
                if (height > 680) {
                    height = 680;
                }
                _this.dialogHeight = height;
                /** @type {?} */
                var innerHeight_1 = height + 'px';
                /** @type {?} */
                var marginTop = '-' + height / 2 + 'px';
                _this.render.setStyle(targetElement, 'height', innerHeight_1);
                _this.render.setStyle(targetElement, 'margin-top', marginTop);
            }
        }));
    };
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    /**
     * @private
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.initFavorites = 
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.favoritesTool.absOrgType = this.absOrgType;
        this.favoritesTool.busNum = this.busNum;
        this.favoritesTool.idField = this.primaryField;
        this.favoritesTool.absRfQueryUrl = this.absRfQueryUrl;
        this.favoritesTool.absRfModifyUrl = this.absRfModifyUrl;
        this.favoritesTool.getFavoritesList().subscribe((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            /** @type {?} */
            var resData = result ? ((/** @type {?} */ (result))).orgData : [];
            _this.favoritesTool.favoritesList = resData;
            _this.favoritesTool.setFavoritesList(resData);
        }));
    };
    // 打开选组织弹窗
    // 打开选组织弹窗
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.showFarrisDialog = 
    // 打开选组织弹窗
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.isShow = true;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.dialog.show();
                if (_this.showTabIds.indexOf(_this.favoritesTabId) !== -1) {
                    _this.initFavorites();
                }
                if (_this.mapFields) {
                    _this.mapFields2Component();
                    return;
                }
                _this.stateMgr.emitSelections(_this.selections, ChangeType.ValueChanged);
            }));
        }));
    };
    // input文本框内点击清除按钮时触发
    // input文本框内点击清除按钮时触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.clearAll = 
    // input文本框内点击清除按钮时触发
    /**
     * @return {?}
     */
    function () {
        this.selections = [];
        this.assembleFinalText();
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.emitSelections([]);
        this.inputClear.emit();
    };
    // input文本框内删除某一个已选组织时触发
    // input文本框内删除某一个已选组织时触发
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.removeItem = 
    // input文本框内删除某一个已选组织时触发
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    function (data, index) {
        this.selections.splice(index, 1);
        this.assembleFinalText();
        // 关联或udt先出非主键的
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.emitSelections(data, ChangeType.Remove);
        this.tagRemoved.emit({
            deleteItem: data,
            deleteIndex: index,
            selections: this.selections
        });
    };
    // 清空最近已选组织
    // 清空最近已选组织
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.clearSeletions = 
    // 清空最近已选组织
    /**
     * @return {?}
     */
    function () {
        this.stateMgr.emitSelections([], ChangeType.ValueChanged);
    };
    // 点击搜索按钮或者敲击回车时触发
    // 点击搜索按钮或者敲击回车时触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.onSearch = 
    // 点击搜索按钮或者敲击回车时触发
    /**
     * @return {?}
     */
    function () {
        if (!!this.searchText) {
            this.hideSearchPanel = false;
            this.onSearchToken = CommonUtil.newGuid();
        }
    };
    // 清空组织搜索内容时触发
    // 清空组织搜索内容时触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.clearSearch = 
    // 清空组织搜索内容时触发
    /**
     * @return {?}
     */
    function () {
        this.hideSearchPanel = true;
        this.onSearchToken = false;
    };
    // 监听搜索框内输入的文本
    // 监听搜索框内输入的文本
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenSearchText = 
    // 监听搜索框内输入的文本
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e.code === 'Backspace' || e.code === 'Delete') {
            if (!this.searchText) {
                this.clearSearch();
            }
        }
    };
    // 监听搜索页的关闭事件，目前只会接收到true
    // 监听搜索页的关闭事件，目前只会接收到true
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenClosePanelChange = 
    // 监听搜索页的关闭事件，目前只会接收到true
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.hideSearchPanel = e;
    };
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.closeGroupDialog = 
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    /**
     * @return {?}
     */
    function () {
        this.groupDialogOpend = false;
        this.editingGroupId = null;
        this.groupTitle = null;
        this.groupNote = null;
        this.groupDialogTitle = '保存为群组';
    };
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenGroupTitle = 
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.groupTitleStream.next(this.groupTitle);
    };
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenOpenGroup = 
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.groupDialogOpend = e;
    };
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    /**
     * @param {?} item
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.listenGroupChange = 
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        this.groupDialogOpend = true;
        this.editingGroupId = item.id;
        this.groupTitle = item.title;
        this.groupNote = item.description;
        this.groupDialogTitle = '编辑群组';
    };
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    /**
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.saveGroup = 
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.groupTitle) {
            this.validGroupTitle = false;
            return;
        }
        /** @type {?} */
        var groupId = CommonUtil.newGuid();
        /** @type {?} */
        var groupCode = 'orgGroup_private_';
        groupCode += Math.random().toString(16).substring(2, 10);
        /** @type {?} */
        var addIds = [];
        this.selections.forEach((/**
         * @param {?} selection
         * @return {?}
         */
        function (selection) {
            addIds.push(selection[_this.primaryField]);
        }));
        this.groupDialogOpend = false;
        /** @type {?} */
        var body = {
            groupId: groupId,
            groupCode: groupCode,
            title: this.groupTitle,
            description: this.groupNote,
            absOrgType: this.absOrgType,
            changeType: Number(1)
        };
        if (this.editingGroupId) {
            body.groupId = this.editingGroupId;
            body.changeType = Number(2);
            delete body.groupCode;
            this.updateNameOrNote(body);
            return;
        }
        /** @type {?} */
        var newGroup$ = this.apiService.saveGroup(body);
        newGroup$.pipe(switchMap((/**
         * @return {?}
         */
        function () {
            console.log('群组保存成功！');
            _this.libOrgGroup.selectedGroupId = groupId;
            /** @type {?} */
            var addOrgsInNewGroup$ = _this.apiService.saveGroup({
                groupId: groupId,
                addIds: addIds,
                deleteIds: [],
                changeType: Number(3)
            });
            return addOrgsInNewGroup$.pipe(tap((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data) {
                    console.log('已为新群组添加组织成员！');
                    if (_this.currentTabId == _this.groupTabId) {
                        _this.libOrgGroup.assembleData();
                    }
                }
            })));
        }))).subscribe();
    };
    /**
     * @private
     * @param {?} param
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.updateNameOrNote = /**
     * @private
     * @param {?} param
     * @return {?}
     */
    function (param) {
        var _this = this;
        /** @type {?} */
        var updateInfo$ = this.apiService.saveGroup(param);
        updateInfo$.pipe(tap((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                console.log('修改群组信息成功！');
                _this.editingGroupId = null;
                _this.groupTitle = null;
                _this.groupNote = null;
                _this.groupDialogTitle = '保存为群组';
                _this.libOrgGroup.assembleData();
            }
        }))).subscribe();
    };
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    /**
     * @param {?} type
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.returnResult = 
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var finalText = '';
        if (!!type) {
            this.confirmToken = true;
            this.assembleFinalText();
            finalText = this.finalText.join();
            if (this.selections && this.selections.length) {
                this.selectionsChange.emit({
                    selections: this.selections
                });
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
            }
            else {
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
                this.selectionsChange.emit({
                    selections: this.selections
                });
            }
        }
        this.orgIds = [];
        this.dialog.close();
        this.isShow = false;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    OrganizationSelectorComponent.prototype.changeTabs = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e.nextId === this.groupTabId) {
            this.currentTabId = this.groupTabId;
            this.libOrgGroup.selections = _.cloneDeep(this.selections);
            this.libOrgGroup.assembleData();
        }
        else if (e.nextId === this.favoritesTabId) {
            this.currentTabId = this.favoritesTabId;
            // this.libOrgFavorites.selections = _.cloneDeep(this.selections);
            // this.libOrgFavorites.assembleData();
        }
        else if (e.nextId === this.organizationTabId) {
            this.currentTabId = this.organizationTabId;
            // this.libOrgTree.selections = _.cloneDeep(this.selections);
            // this.libOrgTree.assembleData();
        }
    };
    OrganizationSelectorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-organization-selector',
                    template: "<div #tagbox class=\"input-group s-input-group\" *ngIf=\"showInput\" [class.farris-input-group-readonly]=\"readonly\">\r\n  <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\">\r\n    <div class=\"multi--content\" *ngFor=\"let item of finalText; index as i\" [title]=\"item\">\r\n      <span class=\"multi--item\">\r\n        {{item}}\r\n      </span>\r\n      <i class=\"f-icon f-icon-close cursor-pointer\" *ngIf=\"!readonly\" style=\"margin-top: 1px;\"\r\n        (click)=\"removeItem(item, i)\"></i>\r\n    </div>\r\n    <span class=\"multi-another\" *ngIf=\"finalText.length === 0\">{{placeholder}}</span>\r\n  </div>\r\n  <div *ngIf=\"!readonly\" class=\"input-group-append\" title=\"\">\r\n    <span *ngIf=\"finalText && finalText.length > 0\" class=\"input-group-text input-group-clear cursor-pointer\"\r\n      (click)=\"clearAll()\">\r\n      <i class=\"f-icon modal_close\"></i>\r\n    </span>\r\n    <span class=\"input-group-text cursor-pointer\" (click)=\"showFarrisDialog()\">\r\n      <span class=\"f-icon f-icon-lookup\"></span>\r\n    </span>\r\n  </div>\r\n</div>\r\n\r\n<farris-dialog #farrisDialog *ngIf=\"isShow\" class=\"fos-dialog\" [resizable]=\"false\" id=\"{{dialogId}}\"\r\n  [draggable]=\"draggable\" [buttons]=\"buttonRef\" [beforeClose]=\"farrisDialogbeforeClose\" [showMaxButton]=\"false\"\r\n  [width]=\"760\" [height]=\"dialogHeight\" [title]=\"'\u8BF7\u9009\u62E9\u7EC4\u7EC7'\">\r\n  <div class=\"fos-content\">\r\n    <div class=\"fos-content-container\">\r\n      <div class=\"fos-content-main\">\r\n        <lib-search #searchResultPage [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n          [enableFavorites]=\"enableFavorites\" [absOrgType]=\"absOrgType\" [notGetStopOrg]=\"notGetStopOrg\"\r\n          [onSearch]=\"onSearchToken\" [searchText]=\"searchText\" [pageSize]=\"searchPageSize\"\r\n          (closePanelChange)=\"listenClosePanelChange($event)\" [hidden]=\"hideSearchPanel\">\r\n        </lib-search>\r\n        <input-group class=\"fos-search-input\" id=\"org-search-input\" [placeholder]=\"searchPlaceholder\"\r\n          [(value)]=\"searchText\" [groupText]=\"searchIcon\" (enterHandle)=\"onSearch()\" (clickHandle)=\"onSearch()\"\r\n          (keyup)=\"listenSearchText($event)\" (clear)=\"clearSearch()\">\r\n        </input-group>\r\n        <farris-tabs #selectTabs class=\"fos-tabs\" [value]=\"activeTabId\" [width]=\"'100%'\" [contentFill]=\"true\" (tabChange)=\"changeTabs($event)\">\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  START -->\r\n          <farris-tab [title]=\"'\u7EC4\u7EC7\u67B6\u6784'\" [id]=\"organizationTabId\" *ngIf=\"showTabIds.indexOf(organizationTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-org #libOrgTree [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableFavorites]=\"enableFavorites\" [primaryField]=\"primaryField\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\"\r\n                [multiSelect]=\"multiSelect\" [absOrgType]=\"absOrgType\" [layer]=\"layer\" [orgIds]=\"orgIds\"\r\n                [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\">\r\n              </lib-org>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  END -->\r\n          <!-- \u6211\u7684\u6536\u85CF  START -->\r\n          <farris-tab [title]=\"'\u6211\u7684\u6536\u85CF'\" [id]=\"favoritesTabId\" *ngIf=\"showTabIds.indexOf(favoritesTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-favorites #libOrgFavorites [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"></lib-favorites>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u6211\u7684\u6536\u85CF  END -->\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  START -->\r\n          <farris-tab [title]=\"'\u6211\u7684\u7FA4\u7EC4'\" [id]=\"groupTabId\" *ngIf=\"showTabIds.indexOf(groupTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-group #libOrgGroup \r\n                [primaryField]=\"primaryField\" [absOrgType]=\"absOrgType\" [multiSelect]=\"multiSelect\"\r\n                [enableFavorites]=\"enableFavorites\" [groupApiUrl]=\"groupApiUrl\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\"\r\n                [layer]=\"layer\" [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" (groupChange)=\"listenGroupChange($event)\">\r\n              </lib-group>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  END -->\r\n        </farris-tabs>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"s-personnel-group\" *ngIf=\"groupDialogOpend\">\r\n    <div class=\"s-personnel-group-title\">\r\n      <span class=\"f-icon f-sidebar-close\" (click)=\"closeGroupDialog()\"></span>{{groupDialogTitle}}\r\n    </div>\r\n    <div class=\"f-form-layout farris-form farris-form-controls-inline\" style=\"margin-top: 22px;\">\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\" for=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\">\r\n              <span class=\"farris-label-info text-danger\">*</span>\r\n              <span class=\"farris-label-text\">\u7FA4\u7EC4\u540D\u79F0</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <input class=\"form-control\" id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\"\r\n                (keyup)=\"listenGroupTitle($event)\" placeholder=\"\u8BF7\u8F93\u5165\"\r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\" [(ngModel)]=\"groupTitle\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\" style=\"margin-top: 4px;\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\"\r\n              for=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\">\r\n              <span class=\"farris-label-text\">\u7FA4\u7EC4\u5907\u6CE8</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <textarea class=\"form-control\" style=\"height: 66px;\" [(ngModel)]=\"groupNote\"\r\n                id=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\" placeholder=\"\u8BF7\u8F93\u5165\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"s-personnel-group-footer\">\r\n      <input type=\"button\" class=\"btn btn-primary fr\" style=\"width: 100px;\" value=\"\u786E\u5B9A\" (click)=\"saveGroup()\" />\r\n      <input type=\"button\" class=\"btn btn-secondary fr mr-3\" value=\"\u53D6\u6D88\" (click)=\"closeGroupDialog()\" />\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<ng-template #buttonRef>\r\n  <div class=\"fos-dialog-footer\">\r\n    <span class=\"fosd-footer-selection\" (mouseover)=\"selectionsShow=true\"\r\n      (mouseout)=\"selectionsShow=false\">\u5DF2\u9009\r\n      <a>{{selections.length}}</a> \u4E2A</span>\r\n    <span class=\"fosd-footer-clear\" (click)=\"clearSeletions()\">\u6E05\u7A7A\u6700\u8FD1</span>\r\n    <lib-selection #selectedComponent class=\"fosd-selection-content\" [primaryField]=\"primaryField\"\r\n      [enableGroup]=\"enableGroup\" (mouseover)=\"selectionsShow=true\" (mouseout)=\"selectionsShow=false\"\r\n      [hidden]=\"!selectionsShow\" (openedChange)=\"listenOpenGroup($event)\"></lib-selection>\r\n  </div>\r\n  <input type=\"button\" class=\"btn btn-secondary\" value=\"\u53D6\u6D88\" (click)=\"returnResult(0)\" />\r\n  <input type=\"button\" class=\"btn btn-primary\" style=\"width: 100px;\" value=\"\u786E\u5B9A\" (click)=\"returnResult(1)\" />\r\n</ng-template>",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return OrganizationSelectorComponent; })),
                            multi: true
                        },
                        FavoritesTool, ApiService, StateMgrTool
                    ],
                    styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:-webkit-box;display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{-webkit-box-flex:0;flex:0 0 100%;position:relative;display:-webkit-box;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;-webkit-box-flex:1;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:-webkit-box;display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;-webkit-box-pack:justify;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;-webkit-box-flex:1;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}"]
                }] }
    ];
    /** @nocollapse */
    OrganizationSelectorComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: Injector },
        { type: FavoritesTool },
        { type: ApiService },
        { type: NgZone },
        { type: StateMgrTool }
    ]; };
    OrganizationSelectorComponent.propDecorators = {
        baseCls: [{ type: HostBinding, args: ['class.f-organization-selector',] }],
        width: [{ type: HostBinding, args: ['style.width',] }, { type: Input }],
        dialog: [{ type: ViewChild, args: ['farrisDialog',] }],
        libOrgGroup: [{ type: ViewChild, args: ['libOrgGroup',] }],
        libOrgTree: [{ type: ViewChild, args: ['libOrgTree',] }],
        libOrgFavorites: [{ type: ViewChild, args: ['libOrgFavorites',] }],
        showInput: [{ type: Input }],
        busNum: [{ type: Input }],
        multiSelect: [{ type: Input }],
        placeholder: [{ type: Input }],
        searchPlaceholder: [{ type: Input }],
        readonly: [{ type: Input }],
        absUserOrgUrl: [{ type: Input }],
        absRfQueryUrl: [{ type: Input }],
        absRfModifyUrl: [{ type: Input }],
        groupApiUrl: [{ type: Input }],
        groupExtendUrl: [{ type: Input }],
        absOrgType: [{ type: Input }],
        enableHierarchicalLoading: [{ type: Input }],
        notGetStopOrg: [{ type: Input }],
        primaryField: [{ type: Input }],
        displayField: [{ type: Input }],
        orgIds: [{ type: Input }],
        layer: [{ type: Input }],
        cascadeCheck: [{ type: Input }],
        cascadeDown: [{ type: Input }],
        cascadeUp: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        keepSelect: [{ type: Input }],
        formatFn: [{ type: Input }],
        selectedLimit: [{ type: Input }],
        showTabIds: [{ type: Input }],
        activeTabId: [{ type: Input }],
        searchPageSize: [{ type: Input }],
        mapFields: [{ type: Input }],
        multipleChoiceSeparator: [{ type: Input }],
        draggable: [{ type: Input }],
        selectionsChange: [{ type: Output }],
        inputClear: [{ type: Output }],
        tagRemoved: [{ type: Output }]
    };
    return OrganizationSelectorComponent;
}());
export { OrganizationSelectorComponent };
if (false) {
    /** @type {?} */
    OrganizationSelectorComponent.prototype.baseCls;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.width;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialog;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgTree;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showInput;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.busNum;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.multiSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.placeholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPlaceholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.readonly;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfQueryUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfModifyUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupApiUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupExtendUrl;
    /**
     * 数据源类型
     * 默认为： System_organization  系统数据源   获取系统人员、系统组织
     * Administrative_organization  已扩展数据源  获取行政组织、行政人员
     * absOrgType {string}
     * PersonnelSelectorComponent
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.absOrgType;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableHierarchicalLoading;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.notGetStopOrg;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.primaryField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.displayField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.layer;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeCheck;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeDown;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeUp;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showCheckAll;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.keepSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.formatFn;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectedLimit;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showTabIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.activeTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPageSize;
    /**
     * 字段映射, 仅在farris form中使用{ 帮助数据字段：表单字段 }
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.mapFields;
    /**
     * 多选分隔符
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.multipleChoiceSeparator;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.draggable;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.inputClear;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.tagRemoved;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.originalSelections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.finalText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.lookupIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.organizationTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.favoritesTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogHeight;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.isShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.selectionsSub;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.confirmToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.hideSearchPanel;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onSearchToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogOpend;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupNote;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.validGroupTitle;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.groupTitleStream;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.ngControl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.editingGroupId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.currentTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.farrisDialogbeforeClose;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.favoritesTool;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.stateMgr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktb3JnYW5pemF0aW9uLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsibGliL29yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQWlCLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBZ0MsTUFBTSxFQUFFLFNBQVMsRUFBaUIsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZOLE9BQU8sRUFBd0IsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxVQUFVLEVBQTBDLE1BQU0scUJBQXFCLENBQUM7QUFDekYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sS0FBSyxDQUFDLE1BQU0sV0FBVyxDQUFDO0FBQy9CLE9BQU8sRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXBGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUN4RSxP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Qjs7SUFDbkIsa0RBQWtCOztJQUNsQix3REFBdUI7Ozs7O0lBQ3ZCLHlEQUFrRTs7SUFDbEUsa0RBQXNCOztJQUN0Qix1REFBdUI7Ozs7O0lBQ3ZCLHVEQUErQjs7Ozs7SUFDL0IsOENBQWlDOzs7OztJQUNqQyxxREFBNkI7O0lBRTdCLGdFQVVDOztJQUVELHNEQUF3Qzs7SUFDeEMsdURBQXlDOzs7OztJQUd2QywrQ0FBeUI7Ozs7O0lBQ3pCLGlEQUEwQjs7Ozs7SUFDMUIsc0RBQW9DOzs7OztJQUNwQyxtREFBOEI7Ozs7O0lBQzlCLCtDQUFzQjs7Ozs7SUFDdEIsaURBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYsIEhvc3RCaW5kaW5nLCBJbmplY3RvciwgSW5wdXQsIE5nWm9uZSwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3V0cHV0LCBSZW5kZXJlcjIsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZCwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5nQ29udHJvbCwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gJy4uL3V0aWxzL2FwaS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbCB9IGZyb20gJy4uL3V0aWxzL2NvbW1vbi50b29sJztcclxuaW1wb3J0IHsgRmF2b3JpdGVzVG9vbCB9IGZyb20gJy4uL3V0aWxzL2Zhdm9yaXRlcy50b29sJztcclxuaW1wb3J0IHsgQ2hhbmdlVHlwZSwgT3JnUmVxdWVzdFBhcmFtLCBTYXZlR3JvdXBSZXFldXN0UGFyYW0gfSBmcm9tICcuLi91dGlscy9pbmRleC50eXBlJztcclxuaW1wb3J0IHsgU3RhdGVNZ3JUb29sIH0gZnJvbSAnLi4vdXRpbHMvc3RhdGUubWdyLnRvb2wnO1xyXG5pbXBvcnQgeyBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgcmVzdWx0IH0gZnJvbSAnbG9kYXNoJztcclxuaW1wb3J0IHsgR3JvdXBDb21wb25lbnQgfSBmcm9tICcuL3RhYi1ncm91cC9ncm91cC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25Db21wb25lbnQgfSBmcm9tICcuL3RhYi1vcmdhbml6YXRpb24vdG8uY29tcG9uZW50JztcclxuaW1wb3J0IHsgRmF2b3JpdGVzQ29tcG9uZW50IH0gZnJvbSAnLi90YWItZmF2b3JpdGVzL2Zhdm9yaXRlcy5jb21wb25lbnQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdmYXJyaXMtb3JnYW5pemF0aW9uLXNlbGVjdG9yJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vb3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9vcmdhbml6YXRpb24tc2VsZWN0b3IuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gT3JnYW5pemF0aW9uU2VsZWN0b3JDb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZVxyXG4gICAgfSxcclxuICAgIEZhdm9yaXRlc1Rvb2wsIEFwaVNlcnZpY2UsIFN0YXRlTWdyVG9vbFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE9yZ2FuaXphdGlvblNlbGVjdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xyXG5cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtb3JnYW5pemF0aW9uLXNlbGVjdG9yJykgYmFzZUNscyA9IHRydWU7XHJcbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS53aWR0aCcpIEBJbnB1dCgpIHdpZHRoID0gJzEwMCUnO1xyXG4gIEBWaWV3Q2hpbGQoJ2ZhcnJpc0RpYWxvZycpIGRpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2xpYk9yZ0dyb3VwJykgbGliT3JnR3JvdXA6IEdyb3VwQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2xpYk9yZ1RyZWUnKSBsaWJPcmdUcmVlOiBPcmdhbml6YXRpb25Db21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnbGliT3JnRmF2b3JpdGVzJykgbGliT3JnRmF2b3JpdGVzOiBGYXZvcml0ZXNDb21wb25lbnQ7XHJcbiAgLy8gaW5wdXTmoYbmmK/lkKbmmL7npLpcclxuICBASW5wdXQoKSBzaG93SW5wdXQgPSB0cnVlO1xyXG4gIC8vIOS4muWKoeagh+ivhlxyXG4gIEBJbnB1dCgpIGJ1c051bSA9ICdjb21tb24nO1xyXG4gIEBJbnB1dCgpIG11bHRpU2VsZWN0ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBwbGFjZWhvbGRlciA9ICfor7fpgInmi6knO1xyXG4gIEBJbnB1dCgpIHNlYXJjaFBsYWNlaG9sZGVyID0gJ+ivt+i+k+WFpee8luWPt+aIluWQjeensOaQnOe0oic7XHJcbiAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcclxuICAvLyDkvKDlhaXnmoR1cmxcclxuICBASW5wdXQoKSBhYnNVc2VyT3JnVXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNVc2VyT3JnJztcclxuICBASW5wdXQoKSBhYnNSZlF1ZXJ5VXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9xdWVyeSc7XHJcbiAgQElucHV0KCkgYWJzUmZNb2RpZnlVcmwgPSAnL2FwaS9ydW50aW1lL3N5cy92MS4wL2Fic1JlY2VudENvbnRhY3RzL21vZGlmeSc7XHJcbiAgQElucHV0KCkgZ3JvdXBBcGlVcmwgPSBcIi9hcGkvcnVudGltZS9zeXMvdjEuMC9vcmctZ3JvdXBcIjtcclxuICBASW5wdXQoKSBncm91cEV4dGVuZFVybCA9ICcvcGxhdGZvcm0vcnVudGltZS93Zi93ZWJhcHAvbmctZmFycmlzLW1vYmlsZS11aS9leHRlbmQtb3JnLmpzJztcclxuICAvKipcclxuICAgKiDmlbDmja7mupDnsbvlnotcclxuICAgKiDpu5jorqTkuLrvvJogU3lzdGVtX29yZ2FuaXphdGlvbiAg57O757uf5pWw5o2u5rqQICAg6I635Y+W57O757uf5Lq65ZGY44CB57O757uf57uE57uHXHJcbiAgICogQWRtaW5pc3RyYXRpdmVfb3JnYW5pemF0aW9uICDlt7LmianlsZXmlbDmja7mupAgIOiOt+WPluihjOaUv+e7hOe7h+OAgeihjOaUv+S6uuWRmFxyXG4gICAqIGFic09yZ1R5cGUge3N0cmluZ31cclxuICAgKiBQZXJzb25uZWxTZWxlY3RvckNvbXBvbmVudFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGFic09yZ1R5cGUgPSAnU3lzdGVtX29yZ2FuaXphdGlvbic7XHJcbiAgLy8g5ZCv55So5YiG5bGC5Yqg6L29XHJcbiAgQElucHV0KCkgZW5hYmxlSGllcmFyY2hpY2FsTG9hZGluZyA9IHRydWU7XHJcbiAgLy8g5LiN5YyF5ZCr5YGc55So57uE57uHXHJcbiAgQElucHV0KCkgbm90R2V0U3RvcE9yZyA9IHRydWU7XHJcbiAgQElucHV0KCkgcHJpbWFyeUZpZWxkID0gJ29yZ0lkJztcclxuICBASW5wdXQoKSBkaXNwbGF5RmllbGQgPSAnbmFtZSc7XHJcbiAgQElucHV0KCkgb3JnSWRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIC8vIOWxleW8gOWxgue6p1xyXG4gIEBJbnB1dCgpIGxheWVyID0gMTtcclxuICAvLyDmmK/lkKblkK/nlKjnuqfogZTpgInkuK1cclxuICBASW5wdXQoKSBjYXNjYWRlQ2hlY2sgPSB0cnVlO1xyXG4gIC8vIOe6p+iBlOmAieS4reS4i+e6p1xyXG4gIEBJbnB1dCgpIGNhc2NhZGVEb3duID0gdHJ1ZTtcclxuICAvLyDnuqfogZTpgInkuK3kuIrnuqdcclxuICBASW5wdXQoKSBjYXNjYWRlVXAgPSBmYWxzZTtcclxuICAvLyDmmL7npLrlhajpgInmjInpkq5cclxuICBASW5wdXQoKSBzaG93Q2hlY2tBbGwgPSBmYWxzZTtcclxuICBASW5wdXQoKSBrZWVwU2VsZWN0ID0gZmFsc2U7XHJcbiAgLy8g5Ye95pWw6Ieq5a6a5LmJ6L6T5Ye65qC35byPXHJcbiAgQElucHV0KCkgZm9ybWF0Rm46IChvYmo6IGFueSkgPT4gc3RyaW5nO1xyXG4gIC8vIOS4gOasoeaAp+acgOWkmumAieS4reWkmuWwkeadoVxyXG4gIEBJbnB1dCgpIHNlbGVjdGVkTGltaXQgPSA1MDtcclxuICBASW5wdXQoKSBzaG93VGFiSWRzID0gJ29yZ2FuaXphdGlvbixmYXZvcml0ZXMnO1xyXG4gIEBJbnB1dCgpIGFjdGl2ZVRhYklkID0gJ29yZ2FuaXphdGlvbic7XHJcbiAgLy8g5pCc57Si5YmN56uv5YiG6aG1NTDmnaFcclxuICBASW5wdXQoKSBzZWFyY2hQYWdlU2l6ZSA9IDUwO1xyXG4gIC8qKiDlrZfmrrXmmKDlsIQsIOS7heWcqGZhcnJpcyBmb3Jt5Lit5L2/55SoeyDluK7liqnmlbDmja7lrZfmrrXvvJrooajljZXlrZfmrrUgfSAqL1xyXG4gIEBJbnB1dCgpIG1hcEZpZWxkczogeyBbc291cmNlRmllbGQ6IHN0cmluZ106IHN0cmluZyB9O1xyXG4gIC8qKiDlpJrpgInliIbpmpTnrKYgKi9cclxuICBASW5wdXQoKSBtdWx0aXBsZUNob2ljZVNlcGFyYXRvciA9ICcsJztcclxuICBASW5wdXQoKSBkcmFnZ2FibGUgPSB0cnVlO1xyXG4gIEBPdXRwdXQoKSBzZWxlY3Rpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgLy8g5YWo6YOo5riF6Zmk5oyJ6ZKu6Kem5Y+R5Zue6LCDXHJcbiAgQE91dHB1dCgpIGlucHV0Q2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAvLyDmoIfnrb7liKDpmaTmjInpkq7lh7rlj5Hlm57osINcclxuICBAT3V0cHV0KCkgdGFnUmVtb3ZlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBzZWxlY3Rpb25zID0gW107XHJcbiAgb3JpZ2luYWxTZWxlY3Rpb25zID0gW107XHJcbiAgZmluYWxUZXh0ID0gW107XHJcbiAgbG9va3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcbiAgc2VhcmNoSWNvbiA9ICc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktc2VhcmNoXCI+PC9zcGFuPic7XHJcbiAgb3JnYW5pemF0aW9uVGFiSWQgPSAnb3JnYW5pemF0aW9uJztcclxuICBncm91cFRhYklkID0gJ2dyb3VwJztcclxuICBmYXZvcml0ZXNUYWJJZCA9ICdmYXZvcml0ZXMnO1xyXG4gIGRpYWxvZ0hlaWdodCA9IDU0ODtcclxuICBkaWFsb2dJZCA9ICdkaWFsb2dJZCc7XHJcbiAgaXNTaG93ID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBzZWxlY3Rpb25zU3ViOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpdmF0ZSBjb25maXJtVG9rZW4gPSBmYWxzZTtcclxuICBoaWRlU2VhcmNoUGFuZWwgPSB0cnVlO1xyXG4gIHNlYXJjaFRleHQgPSAnJztcclxuICBvblNlYXJjaFRva2VuOiBhbnk7XHJcbiAgZW5hYmxlRmF2b3JpdGVzOiBib29sZWFuO1xyXG4gIGVuYWJsZUdyb3VwOiBib29sZWFuO1xyXG4gIGdyb3VwRGlhbG9nT3BlbmQgPSBmYWxzZTtcclxuICBncm91cERpYWxvZ1RpdGxlID0gJ+S/neWtmOS4uue+pOe7hCc7XHJcbiAgZ3JvdXBUaXRsZTogc3RyaW5nO1xyXG4gIGdyb3VwTm90ZTogc3RyaW5nO1xyXG4gIHZhbGlkR3JvdXBUaXRsZSA9IHRydWU7XHJcbiAgcHJpdmF0ZSBncm91cFRpdGxlU3RyZWFtOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XHJcbiAgcHVibGljIG5nQ29udHJvbDogYW55O1xyXG4gIHNlbGVjdGlvbnNTaG93ID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBlZGl0aW5nR3JvdXBJZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmO1xyXG4gIHByaXZhdGUgY3VycmVudFRhYklkOiBzdHJpbmc7XHJcblxyXG4gIGZhcnJpc0RpYWxvZ2JlZm9yZUNsb3NlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLmNvbmZpcm1Ub2tlbikge1xyXG4gICAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbnMgPSBfLmNsb25lRGVlcCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9ucyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmhpZGVTZWFyY2hQYW5lbCA9IHRydWU7XHJcbiAgICB0aGlzLmNvbmZpcm1Ub2tlbiA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBvbk1vZGVsQ2hhbmdlOiBhbnkgPSAodmFsPzogYW55KSA9PiB7IH07XHJcbiAgb25Nb2RlbFRvdWNoZWQ6IGFueSA9ICh2YWw/OiBhbnkpID0+IHsgfTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIGZhdm9yaXRlc1Rvb2w6IEZhdm9yaXRlc1Rvb2wsXHJcbiAgICBwcml2YXRlIGFwaVNlcnZpY2U6IEFwaVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxyXG4gICAgcHJpdmF0ZSBzdGF0ZU1ncjogU3RhdGVNZ3JUb29sXHJcbiAgKSB7XHJcbiAgICB0aGlzLmFwaVNlcnZpY2UuYWJzVXJsID0gdGhpcy5hYnNVc2VyT3JnVXJsO1xyXG4gICAgdGhpcy5hcGlTZXJ2aWNlLmdyb3VwQXBpVXJsID0gdGhpcy5ncm91cEFwaVVybDtcclxuICAgIHRoaXMuY2RSZWYgPSB0aGlzLmluamVjdG9yLmdldChDaGFuZ2VEZXRlY3RvclJlZik7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKG9iajogYW55KTogdm9pZCB7XHJcbiAgICBpZiAoISFvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy5maW5hbFRleHQgPSBvYmouc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dCA9IFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMub25Nb2RlbFRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pbml0RGlhbG9nSGVpZ2h0KCk7XHJcbiAgICB0aGlzLmxpc3RlblNlbGVjdGlvbnNDaGFuZ2UoKTtcclxuICAgIHRoaXMuaW5pdFRhYnMoKTtcclxuICAgIHRoaXMuaW5pdEdyb3VwU2VhcmNoKCk7XHJcbiAgICB0aGlzLm5nQ29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmxpc3RlbldpbmRvd1Jlc2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgY29uc3Qgb3JnSWRzQ2hhbmdlID0gY2hhbmdlcy5vcmdJZHM7XHJcbiAgICBpZiAob3JnSWRzQ2hhbmdlICYmIG9yZ0lkc0NoYW5nZS5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgdGhpcy5hc3NlbWJsZURhdGFCeU9yZ0lkcyhvcmdJZHNDaGFuZ2UuY3VycmVudFZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgdGhpcy5zZWxlY3Rpb25zU3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVtaXRTZWxlY3Rpb25zKHNlbGVjdGlvbnM6IGFueSwgY2hhbmdlVHlwZSA9IENoYW5nZVR5cGUuVmFsdWVDaGFuZ2VkKSB7XHJcbiAgICB0aGlzLnN0YXRlTWdyLmVtaXRTZWxlY3Rpb25zKHNlbGVjdGlvbnMsIGNoYW5nZVR5cGUpO1xyXG4gIH1cclxuXHJcbiAgLy8g5qC55o2u5a2X5q615pig5bCE5YWz57O76I635Y+W5b2T5YmN5bey6YCJ57uE57uH55qEaWTvvIzov5vogIzlnKjmiZPlvIDpgInnu4Tnu4flvLnnqpfml7bov5vooYznm7jlupTlsZXnpLpcclxuICBwcml2YXRlIG1hcEZpZWxkczJDb21wb25lbnQoKSB7XHJcbiAgICBjb25zdCBoZWxwRmllbGRzID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgaWYgKCFoZWxwRmllbGRzLmluY2x1ZGVzKHRoaXMucHJpbWFyeUZpZWxkKSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+mAieS4ree7hOS7tuaVsOaNru+8jOmcgOimgeaYoOWwhOe7hOS7tuS4u+mUricpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhO1xyXG4gICAgICBpZiAoYmluZGluZ0RhdGEuc2V0VmFsdWUpIHtcclxuICAgICAgICBjb25zdCBiaW5kaW5nUGF0aCA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nUGF0aDtcclxuICAgICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbXVsdGlQYXRoID0gdGhpcy5tYXBGaWVsZHNbdGhpcy5wcmltYXJ5RmllbGRdLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChtdWx0aVBhdGhbMF0uc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgY29uc3QgaWRzID0gYmluZGluZ0RhdGEuZ2V0VmFsdWUoZmllbGRQYXRocyk7XHJcbiAgICAgICAgaWYgKCFpZHMpIHtcclxuICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnMoW10pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFzc2VtYmxlRGF0YUJ5T3JnSWRzKGlkcy5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOagueaNruS8oOWFpeeahOe7hOe7h2lk5pWw57uE6I635Y+W5a+55bqU55qE57uE57uHXHJcbiAgLy8g55SxbmdPbkNoYW5nZXMoKeOAgW1hcEZpZWxkczJDb21wb25lbnQoKeiwg+eUqFxyXG4gIHByaXZhdGUgYXNzZW1ibGVEYXRhQnlPcmdJZHMoaWRzOiBzdHJpbmdbXSkge1xyXG4gICAgaWYgKCFpZHMgfHwgaWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGggPiAxICYmICF0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign5Y2V6YCJ5qih5byP5LiL77yM5Y+q5YWB6K646YCJ5Lit5LiA5p2h5pWw5o2uficpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXJhbTogT3JnUmVxdWVzdFBhcmFtID0ge1xyXG4gICAgICBhYnNPcmdUeXBlOiB0aGlzLmFic09yZ1R5cGUsXHJcbiAgICAgIGlkTGlzdDogaWRzLFxyXG4gICAgICBnZXRPcmdBbGxQYXRoOiB0cnVlLFxyXG4gICAgICBnZXRDdXJVc2VyOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIHRoaXMuYXBpU2VydmljZS5nZXRPcmdhbml6YXRpb24ocGFyYW0pLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHJlcy5kYXRhO1xyXG4gICAgICAgIGlmICghdGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucyh0aGlzLnNlbGVjdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDlm57mmL7oh7NpbnB1dOaWh+acrOahhueahOWGheWuuVxyXG4gIC8vIOWcqOaciW1hcEZpZWxkc+eahOWJjeaPkOS4i++8jOeUsWFzc2VtYmxlRGF0YUJ5T3JnSWRzKCnosIPnlKjvvIxjbGVhckFsbCgp44CBcmVtb3ZlSXRlbSgp44CBcmV0dXJuUmVzdWx0KCnkuZ/kvJrosIPnlKhcclxuICBwcml2YXRlIGFzc2VtYmxlRmluYWxUZXh0KCkge1xyXG4gICAgdGhpcy5maW5hbFRleHQgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBmb3JtYXRlZE5hbWUgPSB0aGlzLmZvcm1hdEZuICYmIHRoaXMuZm9ybWF0Rm4oaXRlbSk7XHJcbiAgICAgIGNvbnN0IGZpbmFsVGV4dCA9IGZvcm1hdGVkTmFtZSA/IGZvcm1hdGVkTmFtZSA6IGl0ZW1bdGhpcy5kaXNwbGF5RmllbGRdO1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dC5wdXNoKGZpbmFsVGV4dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuc2xpY2UoKTtcclxuICB9XHJcblxyXG4gIC8vIOWIneWni+WMluW8ueeql2lk5Y+K6auY5bqmXHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIGluaXREaWFsb2dIZWlnaHQoKSB7XHJcbiAgICBjb25zdCB1dWlkID0gQ29tbW9uVXRpbC5uZXdHdWlkKCk7XHJcbiAgICB0aGlzLmRpYWxvZ0lkICs9IHV1aWQ7XHJcbiAgICBjb25zdCB3aW5kb3dJbm5lckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ID0gd2luZG93SW5uZXJIZWlnaHQgLSA2MDtcclxuICAgIGlmICh0aGlzLmRpYWxvZ0hlaWdodCA+IDY4MCkge1xyXG4gICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IDY4MDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOebkeWQrHNlbGVjdGlvbnPnmoTlj5jmm7TvvIzlj5jmm7TljIXlkKvkuInnp43lvaLlvI/vvJp2YWx1ZUNoYW5nZeOAgWFwcGVuZOOAgXJlbW92ZVxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBsaXN0ZW5TZWxlY3Rpb25zQ2hhbmdlKCkge1xyXG4gICAgdGhpcy5zZWxlY3Rpb25zU3ViID0gdGhpcy5zdGF0ZU1nci5zZWxlY3Rpb25zU3ViamVjdC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIGlmIChkYXRhLmNoYW5nZVR5cGUgPT09IENoYW5nZVR5cGUuVmFsdWVDaGFuZ2VkKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gXy5jbG9uZURlZXAoZGF0YS52YWx1ZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5jaGFuZ2VUeXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHRoaXMuc2VsZWN0aW9ucy5maWx0ZXIoaXRlbSA9PiBpdGVtW3RoaXMucHJpbWFyeUZpZWxkXSAhPT0gZGF0YS52YWx1ZVt0aGlzLnByaW1hcnlGaWVsZF0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuY2hhbmdlVHlwZSA9PT0gQ2hhbmdlVHlwZS5BcHBlbmQpIHtcclxuICAgICAgICBDb21tb25VdGlsLmZpbmRJbmRleChkYXRhLnZhbHVlW3RoaXMucHJpbWFyeUZpZWxkXSwgdGhpcy5wcmltYXJ5RmllbGQsIHRoaXMuc2VsZWN0aW9ucykgPT09IC0xID8gdGhpcy5zZWxlY3Rpb25zLnB1c2goZGF0YS52YWx1ZSkgOiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmoLnmja5zaG93VGFiSWRz5Yik5pat5piv5ZCm5ZCv55So5pS26JeP5Yqf6IO944CB576k57uE5Yqf6IO9XHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIHByaXZhdGUgaW5pdFRhYnMoKSB7XHJcbiAgICBpZiAodGhpcy5zaG93VGFiSWRzLmluZGV4T2YodGhpcy5mYXZvcml0ZXNUYWJJZCkgIT09IC0xKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlRmF2b3JpdGVzID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlRmF2b3JpdGVzID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pqC5LiN5byA5ZCv576k57uE5Yqf6IO9XHJcbiAgICAvLyBjb25zdCBhbGxUYWJJZHNBcnJheSA9IHRoaXMuc2hvd1RhYklkcy5zcGxpdCgnLCcpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IHRoaXMuZ3JvdXBUYWJJZCk7XHJcbiAgICAvLyB0aGlzLnNob3dUYWJJZHMgPSBhbGxUYWJJZHNBcnJheS5qb2luKCcsJyk7XHJcbiAgICBpZiAodGhpcy5zaG93VGFiSWRzLmluZGV4T2YodGhpcy5ncm91cFRhYklkKSAhPT0gLTEpIHtcclxuICAgICAgdGhpcy5lbmFibGVHcm91cCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVuYWJsZUdyb3VwID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyDlkK/nlKjnvqTnu4Tlip/og73mianlsZXlh73mlbBcclxuICAgIC8qXHJcbiAgICBpZiAodGhpcy5lbmFibGVHcm91cCkge1xyXG4gICAgICBjb25zdCBjY3dvcmsgPSB3aW5kb3cudG9wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIilcclxuICAgICAgY2N3b3JrLnNyYyA9IHRoaXMuZ3JvdXBFeHRlbmRVcmwgKyAnP3ZzPScgKyBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICB3aW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjY3dvcmspO1xyXG4gICAgfVxyXG4gICAgKi9cclxuICB9XHJcblxyXG4gIC8vIOWIpOaWree+pOe7hOWQjeensOaYr+WQpuWQiOazlVxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBwcml2YXRlIGluaXRHcm91cFNlYXJjaCgpIHtcclxuICAgIGlmICh0aGlzLmVuYWJsZUdyb3VwKSB7XHJcbiAgICAgIHRoaXMuZ3JvdXBUaXRsZVN0cmVhbS5waXBlKFxyXG4gICAgICAgIGRlYm91bmNlVGltZSg1MDApLFxyXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKClcclxuICAgICAgKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKCEhZGF0YSkge1xyXG4gICAgICAgICAgdGhpcy52YWxpZEdyb3VwVGl0bGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkR3JvdXBUaXRsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDlvZPmtY/op4jlmajnqpflj6PlpKflsI/lj5jmm7Tml7bvvIzlj5jmm7TlvLnnqpfnmoTlpKflsI9cclxuICAvLyDnlLFuZ0FmdGVyVmlld0luaXQoKeiwg+eUqFxyXG4gIGxpc3RlbldpbmRvd1Jlc2l6ZSgpIHtcclxuICAgIGNvbnN0IGRpYWxvZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuZGlhbG9nSWQpO1xyXG4gICAgbGV0IHRhcmdldEVsZW1lbnQgPSBudWxsO1xyXG4gICAgaWYgKCEhZGlhbG9nRWxlbWVudCkge1xyXG4gICAgICB0YXJnZXRFbGVtZW50ID0gZGlhbG9nRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZGlhbG9nJyk7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICBpZiAoISF0YXJnZXRFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIDYwO1xyXG4gICAgICAgIGlmIChoZWlnaHQgPiA2ODApIHtcclxuICAgICAgICAgIGhlaWdodCA9IDY4MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgaW5uZXJIZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIGNvbnN0IG1hcmdpblRvcCA9ICctJyArIGhlaWdodCAvIDIgKyAncHgnO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRhcmdldEVsZW1lbnQsICdoZWlnaHQnLCBpbm5lckhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGFyZ2V0RWxlbWVudCwgJ21hcmdpbi10b3AnLCBtYXJnaW5Ub3ApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOWIneWni+WMlue7hOe7h+aUtuiXj+aVsOaNrlxyXG4gIC8vIOeUsXNob3dGYXJyaXNEaWFsb2coKeiwg+eUqO+8jOWNs+aJk+W8gOmAiee7hOe7h+W8ueeql+aXtuWPkemAgeivt+axglxyXG4gIHByaXZhdGUgaW5pdEZhdm9yaXRlcygpIHtcclxuICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5hYnNPcmdUeXBlID0gdGhpcy5hYnNPcmdUeXBlO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmJ1c051bSA9IHRoaXMuYnVzTnVtO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmlkRmllbGQgPSB0aGlzLnByaW1hcnlGaWVsZDtcclxuICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5hYnNSZlF1ZXJ5VXJsID0gdGhpcy5hYnNSZlF1ZXJ5VXJsO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmFic1JmTW9kaWZ5VXJsID0gdGhpcy5hYnNSZk1vZGlmeVVybDtcclxuICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5nZXRGYXZvcml0ZXNMaXN0KCkuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc3QgcmVzRGF0YSA9IHJlc3VsdCA/IChyZXN1bHQgYXMgYW55KS5vcmdEYXRhIDogW107XHJcbiAgICAgIHRoaXMuZmF2b3JpdGVzVG9vbC5mYXZvcml0ZXNMaXN0ID0gcmVzRGF0YTtcclxuICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLnNldEZhdm9yaXRlc0xpc3QocmVzRGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOaJk+W8gOmAiee7hOe7h+W8ueeql1xyXG4gIHNob3dGYXJyaXNEaWFsb2coKSB7XHJcbiAgICB0aGlzLmlzU2hvdyA9IHRydWU7XHJcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlhbG9nLnNob3coKTtcclxuICAgICAgICBpZiAodGhpcy5zaG93VGFiSWRzLmluZGV4T2YodGhpcy5mYXZvcml0ZXNUYWJJZCkgIT09IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLmluaXRGYXZvcml0ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICB0aGlzLm1hcEZpZWxkczJDb21wb25lbnQoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGF0ZU1nci5lbWl0U2VsZWN0aW9ucyh0aGlzLnNlbGVjdGlvbnMsIENoYW5nZVR5cGUuVmFsdWVDaGFuZ2VkKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gaW5wdXTmlofmnKzmoYblhoXngrnlh7vmuIXpmaTmjInpkq7ml7bop6blj5FcclxuICBjbGVhckFsbCgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKFtdKTtcclxuICAgIHRoaXMuaW5wdXRDbGVhci5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBpbnB1dOaWh+acrOahhuWGheWIoOmZpOafkOS4gOS4quW3sumAiee7hOe7h+aXtuinpuWPkVxyXG4gIHJlbW92ZUl0ZW0oZGF0YTogYW55LCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgIC8vIOWFs+iBlOaIlnVkdOWFiOWHuumdnuS4u+mUrueahFxyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKGRhdGEsIENoYW5nZVR5cGUuUmVtb3ZlKTtcclxuICAgIHRoaXMudGFnUmVtb3ZlZC5lbWl0KHtcclxuICAgICAgZGVsZXRlSXRlbTogZGF0YSxcclxuICAgICAgZGVsZXRlSW5kZXg6IGluZGV4LFxyXG4gICAgICBzZWxlY3Rpb25zOiB0aGlzLnNlbGVjdGlvbnNcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5riF56m65pyA6L+R5bey6YCJ57uE57uHXHJcbiAgY2xlYXJTZWxldGlvbnMoKSB7XHJcbiAgICB0aGlzLnN0YXRlTWdyLmVtaXRTZWxlY3Rpb25zKFtdLCBDaGFuZ2VUeXBlLlZhbHVlQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICAvLyDngrnlh7vmkJzntKLmjInpkq7miJbogIXmlbLlh7vlm57ovabml7bop6blj5FcclxuICBvblNlYXJjaCgpIHtcclxuICAgIGlmICghIXRoaXMuc2VhcmNoVGV4dCkge1xyXG4gICAgICB0aGlzLmhpZGVTZWFyY2hQYW5lbCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm9uU2VhcmNoVG9rZW4gPSBDb21tb25VdGlsLm5ld0d1aWQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOa4heepuue7hOe7h+aQnOe0ouWGheWuueaXtuinpuWPkVxyXG4gIGNsZWFyU2VhcmNoKCkge1xyXG4gICAgdGhpcy5oaWRlU2VhcmNoUGFuZWwgPSB0cnVlO1xyXG4gICAgdGhpcy5vblNlYXJjaFRva2VuID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyDnm5HlkKzmkJzntKLmoYblhoXovpPlhaXnmoTmlofmnKxcclxuICBsaXN0ZW5TZWFyY2hUZXh0KGUpIHtcclxuICAgIGlmIChlLmNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGUuY29kZSA9PT0gJ0RlbGV0ZScpIHtcclxuICAgICAgaWYgKCF0aGlzLnNlYXJjaFRleHQpIHtcclxuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOebkeWQrOaQnOe0oumhteeahOWFs+mXreS6i+S7tu+8jOebruWJjeWPquS8muaOpeaUtuWIsHRydWVcclxuICBsaXN0ZW5DbG9zZVBhbmVsQ2hhbmdlKGUpIHtcclxuICAgIHRoaXMuaGlkZVNlYXJjaFBhbmVsID0gZTtcclxuICB9XHJcblxyXG4gIC8vIOWFs+mXreS/neWtmOe+pOe7hOeahOW8ueeql+aXtueCueWHu+KAnOWPlua2iOKAneaIluiAheWPs+S4iuinkuWPieWPt+inpuWPkVxyXG4gIGNsb3NlR3JvdXBEaWFsb2coKSB7XHJcbiAgICB0aGlzLmdyb3VwRGlhbG9nT3BlbmQgPSBmYWxzZTtcclxuICAgIHRoaXMuZWRpdGluZ0dyb3VwSWQgPSBudWxsO1xyXG4gICAgdGhpcy5ncm91cFRpdGxlID0gbnVsbDtcclxuICAgIHRoaXMuZ3JvdXBOb3RlID0gbnVsbDtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9ICfkv53lrZjkuLrnvqTnu4QnO1xyXG4gIH1cclxuXHJcbiAgLy8g5Zyo5L+d5a2Y576k57uE55qE5by556qX5YaF77yM5L+u5pS5576k57uE5ZCN56ew5pe26Kem5Y+R77yM55uR5ZCsa2V5dXDkuovku7ZcclxuICBsaXN0ZW5Hcm91cFRpdGxlKGUpIHtcclxuICAgIHRoaXMuZ3JvdXBUaXRsZVN0cmVhbS5uZXh0KHRoaXMuZ3JvdXBUaXRsZSk7XHJcbiAgfVxyXG5cclxuICAvLyDpgInnu4Tnu4fnmoTlvLnnqpflhoXmnInkuIDkuKrigJzlt7LpgInigJ3moIflv5fvvIzpvKDmoIfnp7vkuIrljrvlkI7kvJrmmL7npLrlt7LpgInnu4Tnu4fnmoTpobXpnaLvvIzor6XpobXpnaLlhoXmnInigJzkv53lrZjkuLrnvqTnu4TigJ3nmoTmjInpkq7vvIzngrnlh7vlkI7lj6/ku6XmiZPlvIDkv53lrZjnvqTnu4TnmoTlvLnnqpdcclxuICBsaXN0ZW5PcGVuR3JvdXAoZSkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZTtcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+e+pOe7hOe8lui+keaMiemSruinpuWPke+8jOWPr+S/ruaUuemAieS4ree+pOe7hOeahOWQjeensOWPiuaPj+i/sFxyXG4gIGxpc3Rlbkdyb3VwQ2hhbmdlKGl0ZW06IGFueSkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gdHJ1ZTtcclxuICAgIHRoaXMuZWRpdGluZ0dyb3VwSWQgPSBpdGVtLmlkO1xyXG4gICAgdGhpcy5ncm91cFRpdGxlID0gaXRlbS50aXRsZTtcclxuICAgIHRoaXMuZ3JvdXBOb3RlID0gaXRlbS5kZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9ICfnvJbovpHnvqTnu4QnO1xyXG59XHJcblxyXG4gIC8vIOWFs+mXreS/neWtmOe+pOe7hOeahOW8ueeql+aXtueCueWHu+KAnOehruWumuKAneinpuWPke+8jOWwhuW9k+WJjeW3sumAiee7hOe7h+S/neWtmOS4uuS4gOS4quaWsOeahOe+pOe7hFxyXG4gIHNhdmVHcm91cCgpIHtcclxuICAgIGlmICghdGhpcy5ncm91cFRpdGxlKSB7XHJcbiAgICAgIHRoaXMudmFsaWRHcm91cFRpdGxlID0gZmFsc2U7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGdyb3VwSWQgPSBDb21tb25VdGlsLm5ld0d1aWQoKTtcclxuICAgIGxldCBncm91cENvZGUgPSAnb3JnR3JvdXBfcHJpdmF0ZV8nO1xyXG4gICAgZ3JvdXBDb2RlICs9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygyLCAxMCk7XHJcbiAgICBjb25zdCBhZGRJZHMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKHNlbGVjdGlvbiA9PiB7XHJcbiAgICAgIGFkZElkcy5wdXNoKHNlbGVjdGlvblt0aGlzLnByaW1hcnlGaWVsZF0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmdyb3VwRGlhbG9nT3BlbmQgPSBmYWxzZTtcclxuICAgIGNvbnN0IGJvZHk6IFNhdmVHcm91cFJlcWV1c3RQYXJhbSA9IHtcclxuICAgICAgZ3JvdXBJZCxcclxuICAgICAgZ3JvdXBDb2RlLFxyXG4gICAgICB0aXRsZTogdGhpcy5ncm91cFRpdGxlLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5ncm91cE5vdGUsXHJcbiAgICAgIGFic09yZ1R5cGU6IHRoaXMuYWJzT3JnVHlwZSxcclxuICAgICAgY2hhbmdlVHlwZTogTnVtYmVyKDEpXHJcbiAgICB9O1xyXG4gICAgaWYgKHRoaXMuZWRpdGluZ0dyb3VwSWQpIHtcclxuICAgICAgYm9keS5ncm91cElkID0gdGhpcy5lZGl0aW5nR3JvdXBJZDtcclxuICAgICAgYm9keS5jaGFuZ2VUeXBlID0gTnVtYmVyKDIpO1xyXG4gICAgICBkZWxldGUgYm9keS5ncm91cENvZGU7XHJcbiAgICAgIHRoaXMudXBkYXRlTmFtZU9yTm90ZShib2R5KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3R3JvdXAkID0gdGhpcy5hcGlTZXJ2aWNlLnNhdmVHcm91cChib2R5KTtcclxuICAgIG5ld0dyb3VwJC5waXBlKFxyXG4gICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+e+pOe7hOS/neWtmOaIkOWKn++8gScpO1xyXG4gICAgICAgICAgdGhpcy5saWJPcmdHcm91cC5zZWxlY3RlZEdyb3VwSWQgPSBncm91cElkO1xyXG4gICAgICAgICAgY29uc3QgYWRkT3Jnc0luTmV3R3JvdXAkID0gdGhpcy5hcGlTZXJ2aWNlLnNhdmVHcm91cCh7XHJcbiAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgIGFkZElkcyxcclxuICAgICAgICAgICAgZGVsZXRlSWRzOiBbXSxcclxuICAgICAgICAgICAgY2hhbmdlVHlwZTogTnVtYmVyKDMpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBhZGRPcmdzSW5OZXdHcm91cCQucGlwZShcclxuICAgICAgICAgICAgdGFwKFxyXG4gICAgICAgICAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflt7LkuLrmlrDnvqTnu4Tmt7vliqDnu4Tnu4fmiJDlkZjvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50VGFiSWQgPT0gdGhpcy5ncm91cFRhYklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWJPcmdHcm91cC5hc3NlbWJsZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZU5hbWVPck5vdGUocGFyYW06IFNhdmVHcm91cFJlcWV1c3RQYXJhbSkge1xyXG4gICAgY29uc3QgdXBkYXRlSW5mbyQgPSB0aGlzLmFwaVNlcnZpY2Uuc2F2ZUdyb3VwKHBhcmFtKTtcclxuICAgIHVwZGF0ZUluZm8kLnBpcGUoXHJcbiAgICAgIHRhcChcclxuICAgICAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5L+u5pS5576k57uE5L+h5oGv5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0dyb3VwSWQgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwVGl0bGUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwTm90ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9ICfkv53lrZjkuLrnvqTnu4QnO1xyXG4gICAgICAgICAgICB0aGlzLmxpYk9yZ0dyb3VwLmFzc2VtYmxlRGF0YSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+mAiee7hOe7h+W8ueeql+eahOehruWumuaIluiAheWPlua2iOaMiemSruaXtuinpuWPke+8jDHkuLrnoa7lrprvvIww5Li65Y+W5raIXHJcbiAgcmV0dXJuUmVzdWx0KHR5cGU6IG51bWJlcikge1xyXG4gICAgbGV0IGZpbmFsVGV4dCA9ICcnO1xyXG4gICAgaWYgKCEhdHlwZSkge1xyXG4gICAgICB0aGlzLmNvbmZpcm1Ub2tlbiA9IHRydWU7XHJcbiAgICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgICAgZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuam9pbigpO1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICBzZWxlY3Rpb25zOiB0aGlzLnNlbGVjdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UoZmluYWxUZXh0KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKGZpbmFsVGV4dCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKGZpbmFsVGV4dCk7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZChmaW5hbFRleHQpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLm9yZ0lkcyA9IFtdO1xyXG4gICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VUYWJzKGU6IGFueSkge1xyXG4gICAgaWYgKGUubmV4dElkID09PSB0aGlzLmdyb3VwVGFiSWQpIHtcclxuICAgICAgdGhpcy5jdXJyZW50VGFiSWQgPSB0aGlzLmdyb3VwVGFiSWQ7XHJcbiAgICAgIHRoaXMubGliT3JnR3JvdXAuc2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICAgIHRoaXMubGliT3JnR3JvdXAuYXNzZW1ibGVEYXRhKCk7XHJcbiAgICB9IGVsc2UgaWYoZS5uZXh0SWQgPT09IHRoaXMuZmF2b3JpdGVzVGFiSWQpIHtcclxuICAgICAgdGhpcy5jdXJyZW50VGFiSWQgPSB0aGlzLmZhdm9yaXRlc1RhYklkO1xyXG4gICAgICAvLyB0aGlzLmxpYk9yZ0Zhdm9yaXRlcy5zZWxlY3Rpb25zID0gXy5jbG9uZURlZXAodGhpcy5zZWxlY3Rpb25zKTtcclxuICAgICAgLy8gdGhpcy5saWJPcmdGYXZvcml0ZXMuYXNzZW1ibGVEYXRhKCk7XHJcbiAgICB9IGVsc2UgaWYoZS5uZXh0SWQgPT09IHRoaXMub3JnYW5pemF0aW9uVGFiSWQpIHtcclxuICAgICAgdGhpcy5jdXJyZW50VGFiSWQgPSB0aGlzLm9yZ2FuaXphdGlvblRhYklkO1xyXG4gICAgICAvLyB0aGlzLmxpYk9yZ1RyZWUuc2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICAgIC8vIHRoaXMubGliT3JnVHJlZS5hc3NlbWJsZURhdGEoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19