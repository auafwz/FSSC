/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, ViewChild, EventEmitter, Output, NgZone } from '@angular/core';
import { fromEvent, interval, Observable, of, BehaviorSubject, Subject } from 'rxjs';
import { takeUntil, map, scan, switchMap, takeWhile, concat, debounceTime } from 'rxjs/operators';
import { TabService } from '../tabs.config';
import ResizeObserver from 'resize-observer-polyfill';
import { NgbDropdownMenu } from '../dropdown/dropdown';
export class FarrisTabsComponent {
    /**
     * @param {?} stService
     * @param {?} elementRef
     * @param {?} renderer
     * @param {?} cdRef
     * @param {?} ngZone
     */
    constructor(stService, elementRef, renderer, cdRef, ngZone) {
        this.stService = stService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        // 支持标签页填充
        this.fill = false;
        // 支持标签页标题自适应宽度-
        this.autoTitleWidth = false;
        // 标题长度大于等于多少字符，启用渐变样式——属性废弃
        this.titleLength = 7;
        // 搜索框是否显示
        this.searchBoxVisible = true;
        // 内容是否是flex 容器 用于内部子元素flex
        this.contentDirection = 'column';
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        // 左侧所有标签的宽度和,百分比
        this.titleWidth = 0;
        this.tabChange = new EventEmitter();
        this.tabRemove = new EventEmitter();
        // 内容填充状态
        this.contentFillStates = new BehaviorSubject(false);
        // 宽度状态
        this.widthStates = new BehaviorSubject(false);
        // 高度状态
        this.heightStates = new BehaviorSubject(false);
        this.positionStates = new BehaviorSubject('top');
        this.menuItemsWidth = 'auto';
        //maxDropdownH = 200;
        // 下拉列表最大宽度： 非正值表明是不限制宽度
        this.maxDropdownW = -1;
        this._customClass = '';
        // 标签存储列表
        this._tabs = [];
        // 工具条显示相关配置
        this.toolbarConf = {
            position: '',
            contents: []
        };
        // 工具条右侧小下拉框是否显示
        this.toolbarDpHidden = true;
        // 工具条“更多”里的按钮
        this.inMoreButtonContents = [];
        // 显示下拉数据
        this.dropdownTabs = [];
        // 隐藏左右滚动箭头按钮
        this.hideButtons = true;
        // 隐藏下拉
        this.hideDropDown = true;
        // 禁用左箭头
        this.disableLeft = false;
        // 禁用右箭头
        this.disableRight = false;
        // 记录事件流
        this.subscription = [];
        // 禁用右侧提示
        this.disableRTooltip = true;
        // 禁用左侧提示
        this.disableLTooltip = true;
        // 左侧提示数据
        this.leftTooltipTabs = [];
        // 右侧提示数据
        this.rightTooltipTabs = [];
        this.maxTooltipLen = 5;
        // 标记当前Tab标签
        this.activeId = '';
        this.ro = null;
        this._ddmHandler = null;
        this.el = this.elementRef.nativeElement;
        this.verifyConfig();
    }
    // tab页位置 上下左右
    /**
     * @param {?} value
     * @return {?}
     */
    set position(value) {
        this._position = value;
        this.positionStates.next(value);
    }
    /**
     * @return {?}
     */
    get position() {
        return this._position;
    }
    // tabs宽度和高度
    /**
     * @param {?} value
     * @return {?}
     */
    set width(value) {
        this._width = this.resolveSize(value);
        this.widthStates.next(this._width);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set height(value) {
        this._height = this.resolveSize(value);
        this.heightStates.next(this._height);
    }
    /**
     * @return {?}
     */
    get headerHeight() {
        return this._headerHeight;
    }
    /**
     * @param {?} headerHeight
     * @return {?}
     */
    set headerHeight(headerHeight) {
        this._headerHeight = this.resolveSize(headerHeight);
    }
    // 内容是否填充  默认是不填充
    /**
     * @param {?} value
     * @return {?}
     */
    set contentFill(value) {
        this._contentFill = value;
        this.contentFillStates.next(value);
    }
    // 所有标签数据
    /**
     * @return {?}
     */
    get tabs() {
        return this._tabs;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set tabs(value) {
        this._tabs = value;
    }
    /**
     * @return {?}
     */
    get customClass() {
        return this._customClass;
    }
    /**
     * @param {?} customClass
     * @return {?}
     */
    set customClass(customClass) {
        if (this.customClass) {
            this.customClass.split(' ').forEach((/**
             * @param {?} cssClass
             * @return {?}
             */
            (cssClass) => {
                this.renderer.removeClass(this.el, cssClass);
            }));
        }
        this._customClass = customClass ? customClass.trim() : null;
        if (this.customClass) {
            this.customClass.split(' ').forEach((/**
             * @param {?} cssClass
             * @return {?}
             */
            (cssClass) => {
                this.renderer.addClass(this.el, cssClass);
            }));
        }
    }
    /**
     * @return {?}
     */
    get direction() {
        switch (this.position) {
            case 'top':
                return 'column';
            case 'bottom':
                return 'column-reverse';
            case 'left':
                return 'row';
            case 'right':
                return 'row-reverse';
        }
    }
    // 无用，兼容
    /**
     * @return {?}
     */
    get tabDirection() {
        if (this.position === 'top' || this.position === 'bottom') {
            return 'row';
        }
        else if (this.position === 'left' || this.position === 'right') {
            return 'column';
        }
    }
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    trackByButton(index, btn) { return btn.id; }
    /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    verifyConfig() {
        /** @type {?} */
        const config = this.stService.getConfig();
        Object.assign(this, config);
        this.scrollStep = parseInt(this.scrollStep + '', 10);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            () => of(true));
        }
        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        (btnInfo) => {
            if (btnInfo.click && typeof btnInfo.click == 'function') {
                btnInfo.click();
            }
        }));
        this._tabContainerEl = this.tabContainer.nativeElement;
        this._createStream();
        this.activeId = this.selectId;
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                if (this.ro === null) {
                    this.ro = new ResizeObserver((/**
                     * @param {?} el
                     * @return {?}
                     */
                    (el) => {
                        this._reCalculateAll();
                        this._calculateToolbarDropdownIsShow();
                        this._calculateButtonsShow();
                    }));
                    this.ro.observe(this.el.parentElement);
                }
            }));
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes['selectId']) {
            this.selectTab(changes['selectId'].currentValue);
        }
    }
    /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    ngAfterContentInit() { }
    /**
     * @return {?}
     */
    ngAfterContentChecked() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // 为了兼容弄旧表单，不兼容HostBinding, 通过追加class的方式实现
        this.renderer.addClass(this.el, 'farris-tabs');
        this.renderer.addClass(this.el, 'flex-column');
        this.contentFillStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data) {
                this.renderer.addClass(this.el, 'f-tabs-content-fill');
            }
            else {
                this.renderer.removeClass(this.el, 'f-tabs-content-fill');
            }
        }));
        this.widthStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data) {
                this.renderer.setStyle(this.el, 'width', data);
            }
        }));
        this.heightStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data) {
                this.renderer.setStyle(this.el, 'height', data);
            }
        }));
        this.positionStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            this.renderer.removeClass(this.el, 'flex-row');
            this.renderer.removeClass(this.el, 'flex-column');
            this.renderer.removeClass(this.el, 'flex-row-reverse');
            this.renderer.removeClass(this.el, 'flex-column-reverse');
            if (data === 'left') {
                this.renderer.addClass(this.el, 'flex-row');
            }
            if (data === 'top') {
                this.renderer.addClass(this.el, 'flex-column');
            }
            if (data === 'right') {
                this.renderer.addClass(this.el, 'flex-row-reverse');
            }
            if (data === 'bottom') {
                this.renderer.addClass(this.el, 'flex-column-reverse');
            }
        }));
        // 兼容结束
        this.getToolbarConf();
        this._reCalculateAll();
        this._setActive();
        this._changeTitleStyle();
        this._listenShowChanges();
        /** @type {?} */
        const self = this;
        // this.renderer.listen(document, 'keyup', function (e) {
        //     if (self.searchInputVisible) {
        //         console.log(e);
        //     }
        // });
        this._ddmHandler = this.renderer.listen(document, 'mousedown', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (!e.target.closest('.farris-tabs-header')) {
                if (this.el && this.el.querySelector('.dropdown-menu')) {
                    if (this.ddm && this.ddm.dropdown) {
                        this.ddm.dropdown.close();
                    }
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        // 组件销毁时  取消所有事件订阅
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        sub => {
            sub.unsubscribe();
        }));
        this.subscription = [];
        if (this.ro) {
            if (this.el.parentElement) {
                this.ro.unobserve(this.el.parentElement);
            }
            this.ro = null;
        }
        if (this._ddmHandler) {
            this._ddmHandler();
            this._ddmHandler = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
    }
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    clickHandler(btnInfo) {
        if (!btnInfo) {
            return;
        }
        this.clickItems.next(btnInfo);
    }
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    openChange(e) {
        this.searchInputVisible = e;
        this.searchTabText = undefined;
        this._reCalculateAll();
        // 启用了搜索，需要判断下拉面板的值
        // 因为下拉面板可能存在遮挡的问题
        if (e) {
            this.menuItemsWidth = this.ddm.resetMenuElWidthOpen() + 'px';
        }
        else {
            this.menuItemsWidth = 'auto';
        }
    }
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    searchTab(e) {
        this._reCalculateAll();
        this.stopBubble(e);
    }
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    stopBubble(e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    }
    /**
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    getToolbarState(id, state = this.btnStates) {
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                if (n[id] === undefined) {
                    console.warn(`未找ID为：${id} 相关状态设置！`);
                    return false;
                }
                return n[id];
            })));
        }
        else {
            return of(true);
        }
    }
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    _listenShowChanges() {
        // 如果隐藏的组件是激活状态，先将其设置为常规
        this.tabs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.showStates.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                /** @type {?} */
                let activeIdToken;
                item._show = data;
                if (data === false && item.id === this.activeId) {
                    item._active = false;
                    this.activeId = '';
                    activeIdToken = false;
                }
                /** @type {?} */
                const tabs = this.tabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item._show === true));
                /** @type {?} */
                const defaultTabId = tabs.length ? tabs[0].id : null;
                // 然后将显示状态下的第一个tab激活
                if (defaultTabId && activeIdToken === false) {
                    this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    (item, index) => {
                        if (item.id === defaultTabId) {
                            this.activeId = item.id;
                            this.tabs[index]._active = true;
                        }
                    }));
                    this.getToolbarConf();
                }
                this.cdRef.detectChanges();
            }));
        }));
    }
    /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    selectTab(tabId) {
        /** @type {?} */
        const selectedTab = this._getTabById(tabId);
        this._selectTab(selectedTab.tab, selectedTab.index);
    }
    /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    _cpSelectTabByIndex(ev, id, ddm = null) {
        /** @type {?} */
        const targetEL = (/** @type {?} */ (ev.target));
        if (targetEL.className.indexOf('st-drop-close') > -1 ||
            targetEL.parentElement.className.indexOf('st-drop-close') > -1) {
            // 阻止冒泡和捕获事件 点击删除标记 则执行删除标签方法  而不是选中标签
            ev.stopPropagation();
            this.closeTab(id);
        }
        else {
            // 阻止冒泡
            ev.preventDefault();
            this.selectTab(id);
        }
        this.getToolbarConf();
        this.cdRef.markForCheck();
        this._reCalculateAll();
        this._calculateToolbarDropdownIsShow();
        this._calculateButtonsShow();
        if (ddm) {
            ddm.dropdown.close();
        }
        return false;
    }
    /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    selectTabByIndex(index) {
        if (index >= 0 && index < this.tabs.length) {
            /** @type {?} */
            const selectTab = this.tabs[index];
            this._selectTab(selectTab, index);
        }
    }
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    _selectTab(tab, index) {
        if (tab && !tab.disabled && this.activeId !== tab.id) {
            if (!this.beforeSelect) {
                this.beforeSelect = (/**
                 * @return {?}
                 */
                () => of(true));
            }
            /** @type {?} */
            const tabsChangeEventParam = {
                prevId: this.activeId,
                nextId: tab.id
            };
            this.beforeSelect(tabsChangeEventParam).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (e) {
                    this.activeId = tab.id;
                    // 首先不激活所有的tab页  然后激活当前tab页
                    // let index = -1;
                    this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} i
                     * @return {?}
                     */
                    (item, i) => {
                        item._active = false;
                    }));
                    this.tabs[index]._active = true;
                    this.getToolbarConf();
                    // 滚动到可见区域内
                    this.scrollTabIntoView(index);
                    this.cdRef.detectChanges();
                    this.tabChange.emit(tabsChangeEventParam);
                }
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    _setActive() {
        if (this.tabs.length) {
            /** @type {?} */
            const tabs = this.tabs.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => item._show === true));
            /** @type {?} */
            const activeTab = this._getTabById(this.activeId).tab;
            this.activeId = activeTab ? activeTab.id : this.tabs.length ? this.tabs[0].id : null;
            // 过滤掉show=false（隐藏）的tab
            if (tabs.length) {
                if (this.activeId) {
                    /** @type {?} */
                    const targetTab = tabs.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    item => item.id === this.activeId));
                    if (targetTab) {
                        this.activeId = targetTab.id;
                    }
                }
                else {
                    this.activeId = tabs[0].id;
                }
            }
            else {
                this.activeId = null;
            }
            this.tabs.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item._active = false;
                if (item.id === this.activeId) {
                    item._active = true;
                }
            }));
        }
    }
    /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    showTab(tabId, selectable = true) {
        /** @type {?} */
        const len = this.tabs.length;
        for (let i = 0; i < len; i++) {
            if (this.tabs[i].id === tabId) {
                this.tabs[i]._show = true;
                if (selectable) {
                    this.selectTab(tabId);
                }
                return;
            }
        }
    }
    /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    hideTab(activeId) {
        /** @type {?} */
        const showTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item._show === true;
        }));
        /** @type {?} */
        const len = showTabs.length - 1;
        if (len < 0) {
            return;
        }
        /** @type {?} */
        let index;
        for (let i = 0; i <= len; i++) {
            if (showTabs[i].id === activeId) {
                showTabs[i]._show = false;
                index = i;
                break;
            }
        }
        if (index === undefined) {
            return;
        }
        else if (index === len && len < 1) {
            this.selectTab('');
        }
        else if (index === len && len >= 1) {
            this.selectTab(showTabs[len - 1].id);
        }
        else {
            this.selectTab(showTabs[index + 1].id);
        }
    }
    /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    addTabs(curTabs, index, setActiveId) {
        if (curTabs.length > 0) {
            this.tabs.splice(index, 0, ...curTabs);
            // 去重
            this.tabs = this._unique(this.tabs);
        }
        if (setActiveId && this.activeId !== setActiveId) {
            /** @type {?} */
            const filterTab = this._getTabById(setActiveId);
            if (filterTab.index >= 0) {
                this.selectTab(setActiveId);
                this.activeId = setActiveId;
                this.scrollTabIntoView(filterTab.index);
            }
        }
        this.cdRef.detectChanges();
        this._reCalculateAll();
        this._changeTitleStyle();
    }
    /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    _unique(objArray) {
        /** @type {?} */
        const hash = {};
        objArray = objArray.reduce((/**
         * @param {?} item
         * @param {?} next
         * @return {?}
         */
        function (item, next) {
            if (hash[next.id]) {
                hash[next.id] = '';
            }
            else {
                hash[next.id] = true && item.push(next);
            }
            return item;
        }), []);
        return objArray;
    }
    /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    removeTabByIndex(index) {
        /** @type {?} */
        const len = this.tabs.length - 1;
        if (index < 0 || index > len) {
            return;
        }
        /** @type {?} */
        const removeTab = this.tabs[index];
        removeTab._active = false;
        if (this.activeId === removeTab.id) {
            // 只有一个而且被删除
            if (len === 0) {
                // 如果所有标签均删除 激活id为空
                this.activeId = '';
            }
            else if (index === len) {
                // 如果删除的是最后一个标签 设置其前面的处于激活状态
                this.activeId = this.tabs[len - 1].id;
                this.tabs[index - 1]._active = true;
            }
            else {
                // 如果其他情况  设置其后面的处于激活状态
                this.activeId = this.tabs[index + 1].id;
                this.tabs[index + 1]._active = true;
            }
            this.tabs.splice(index, 1);
            this.scrollTabIntoView(index);
        }
        else {
            this.tabs.splice(index, 1);
        }
        this.tabRemove.emit({
            removeIndex: index,
            removeId: removeTab.id,
            activeId: this.activeId
        });
        this.cdRef.detectChanges();
    }
    /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    closeTab(activeId) {
        /** @type {?} */
        const len = this.tabs.length;
        for (let i = 0; i < len; i++) {
            /** @type {?} */
            const tab = this.tabs[i];
            if (tab.id === activeId) {
                this.removeTabByIndex(i);
                return;
            }
        }
    }
    /**
     * 初始化
     * @return {?}
     */
    load() {
        for (let i = 0; i < this.tabs.length; i++) {
            if (this.tabs[i].id === this.activeId) {
                this.tabs[i]._active = true;
                return;
            }
        }
    }
    /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    _truncateTitle() {
        this.tabs = this.tabs.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.title = item.title.length > 6 ? item.title.substr(0, 6) : item.title;
            return item;
        }));
    }
    /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    _changeTitleStyle() {
        if (this.autoTitleWidth) {
            return;
        }
        /** @type {?} */
        const $textEls = this._tabContainerEl.querySelectorAll('.st-tab-text');
        for (var k = 0; k < $textEls.length; k++) {
            /** @type {?} */
            let parentEl = $textEls[k].parentNode;
            if ($textEls[k].scrollWidth > parentEl['offsetWidth']) {
                this.tabs[k].titleOverflow = true;
            }
            else {
                this.tabs[k].titleOverflow = false;
            }
        }
        //this.cdRef.detectChanges();
    }
    /**
     * 创建流
     * @private
     * @return {?}
     */
    _createStream() {
        [this.rightNav, this.leftNav].forEach((/**
         * @param {?} curBtn
         * @param {?} index
         * @return {?}
         */
        (curBtn, index) => {
            /** @type {?} */
            const direction = index ? -1 : 1;
            /** @type {?} */
            const mousedown$ = fromEvent(curBtn.nativeElement, 'mousedown');
            /** @type {?} */
            const mouseup$ = fromEvent(curBtn.nativeElement, 'mouseup');
            /** @type {?} */
            const newMouseDown$ = mousedown$.pipe(switchMap((/**
             * @param {?} event
             * @return {?}
             */
            (event) => {
                event.preventDefault();
                /** @type {?} */
                const interval$ = of(0).pipe(concat(interval(80)), takeUntil(mouseup$), scan((/**
                 * @param {?} sum
                 * @param {?} num
                 * @return {?}
                 */
                (sum, num) => {
                    return sum + this.scrollStep * direction;
                }), 0), takeWhile((/**
                 * @param {?} num
                 * @return {?}
                 */
                num => {
                    if (direction > 0) {
                        return !this.disableRight;
                    }
                    return !this.disableLeft;
                })), map((/**
                 * @param {?} v
                 * @return {?}
                 */
                v => {
                    return { value: v, direction: direction };
                })));
                return interval$;
            })));
            /** @type {?} */
            const mousepressSub = newMouseDown$.subscribe((/**
             * @param {?} change
             * @return {?}
             */
            change => {
                this._scrollTab(change.value, change.direction);
            }));
            this.subscription.push(mousepressSub);
        }));
        // if (this.autoResize) {
        //     // 订阅windows resize事件
        //     this.subscription.push(
        //         fromEvent(window, 'resize')
        //             .pipe(throttleTime(80))
        //             .subscribe(e => {
        //                 this.cdRef.detectChanges();
        //             })
        //     );
        // }
    }
    /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    _scrollTab(move, direction) {
        /** @type {?} */
        const dist_scrollleft = this._tabContainerEl.scrollLeft + move;
        /** @type {?} */
        const max_scroll_left = this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        // 标签页左侧移动
        if (direction > 0) {
            this._tabContainerEl.scrollLeft = Math.min(dist_scrollleft, max_scroll_left);
        }
        else if (direction < 0) {
            // 标签页右侧移动
            this._tabContainerEl.scrollLeft = Math.max(dist_scrollleft, 0);
        }
        this._reCalculateSides();
        this.cdRef.detectChanges();
    }
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    scrollTabIntoView(index) {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        const tabIndex = parseInt(index + '', 10);
        /** @type {?} */
        let tabToScroll;
        // first we find the tab element.
        if (tabIndex >= 0) {
            /** @type {?} */
            const allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
            if (allTabs.length > tabIndex) {
                tabToScroll = allTabs[tabIndex];
            }
        }
        else {
            // scroll selected tab into view
            /** @type {?} */
            const activeTab = this._tabContainerEl.querySelector('li.active');
            if (activeTab) {
                tabToScroll = activeTab;
            }
        }
        if (tabToScroll) {
            /** @type {?} */
            const tab_left = parseInt(tabToScroll.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            const tabs_left = parseInt(this._tabContainerEl.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            const rightPosition = tab_left +
                parseInt(tabToScroll.getBoundingClientRect().width + '', 10) -
                tabs_left;
            /** @type {?} */
            const leftPosition = tab_left - tabs_left - 10;
            if (leftPosition < 0) {
                this._scrollTab(leftPosition, -1);
            }
            else if (rightPosition > this._tabContainerEl.offsetWidth) {
                this._scrollTab(rightPosition - this._tabContainerEl.offsetWidth + 20, 1);
            }
        }
    }
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    getToolbarConf() {
        /** @type {?} */
        const tabConfig = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item._active === true;
        }))[0];
        if (!tabConfig || !tabConfig.hasOwnProperty('toolbar')) {
            this.toolbarConf = null;
        }
        else {
            this.toolbarConf = tabConfig.toolbar;
        }
        // 获取该tab下的头部扩展区域
        if (!tabConfig || !tabConfig.hasOwnProperty('farrisTabsExtendDirective')) {
            this.headerExtendConf = null;
        }
        else {
            this.headerExtendConf = tabConfig.farrisTabsExtendDirective;
        }
        // 隐藏更多按钮
        this.toolbarDpHidden = true;
        this.cdRef.detectChanges();
    }
    /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    _calculateToolbarDropdownIsShow() {
        /** @type {?} */
        let headerExtendEl;
        /** @type {?} */
        let headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        const toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        let divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        if (!divEl) {
            return;
        }
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            this.renderer.removeStyle(headerExtendEl, 'overflow');
            headerExtendElWidth = headerExtendEl.offsetWidth;
        }
        // 按钮在内容区
        if (!this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else if (this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth - headerExtendElWidth) {
            // 按钮在头部工具栏
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
        this.cdRef.detectChanges();
    }
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    _calculateButtonsShow() {
        /** @type {?} */
        let headerExtendEl;
        /** @type {?} */
        let headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        const toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        let divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        /** @type {?} */
        let btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        let btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('button');
        if (!divEl || btnPlaceHolderBtns.length == 0) {
            return;
        }
        // 此处有个Bug，如果是inContent还是headerExtendConf的情况下，按钮的位置形如inHead
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            headerExtendElWidth = this.hasInHeadCl() ? headerExtendEl.offsetWidth : 0;
        }
        /** @type {?} */
        const moreButton = toolbarContainer.querySelector('.morebtn');
        // 计算按钮的宽度      
        /** @type {?} */
        let basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        let basicWidth = toolbarContainer.offsetWidth - moreButton.offsetWidth - 12 - headerExtendElWidth;
        /** @type {?} */
        let toolbarDropdownHidden = true;
        /** @type {?} */
        let k = 0
        // 只有一个按钮
        ;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        let showBtns = divEl.querySelectorAll('button');
        for (let i = 0; i < k; i++) {
            this.renderer.setStyle(showBtns[i], 'display', '');
        }
        for (let m = k; m < showBtns.length; m++) {
            this.renderer.setStyle(showBtns[m], 'display', 'none');
        }
        if (this.toolbarConf.contents && this.toolbarConf.contents.length) {
            this.inMoreButtonContents = this.toolbarConf.contents.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            (item, index) => {
                return index >= k;
            }));
        }
    }
    /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    _reCalculateAll() {
        if (!this._tabContainerEl) {
            return;
        }
        /** @type {?} */
        let tabParentWidth = this.tabParent.nativeElement.offsetWidth;
        if (!this.hideButtons) {
            /** @type {?} */
            const tr = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-right"));
            /** @type {?} */
            const tl = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-left"));
            tabParentWidth += tr + tl;
        }
        this.hideButtons = this._tabContainerEl.scrollWidth <= tabParentWidth;
        this.hideDropDown = this.showDropDown ? this.hideButtons : true;
        if (!this.hideButtons) {
            if (!this.hideDropDown) {
                this.dropdownTabs = [].concat(this.tabs);
            }
            if (this.searchTabText) {
                this.dropdownTabs = this.dropdownTabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => {
                    return item['title'].indexOf(this.searchTabText) !== -1;
                }));
            }
            this._reCalculateSides();
        }
        this.cdRef.detectChanges();
    }
    /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    _reCalulateTooltips() {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        const t_right_tooltips = [];
        /** @type {?} */
        const t_left_tooltips = [];
        /** @type {?} */
        const allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
        /** @type {?} */
        const len = allTabs.length;
        /** @type {?} */
        const hiddenTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item._show !== true;
        }));
        /** @type {?} */
        const hiddenTabsLength = hiddenTabs.length;
        for (let i = 0; i < len; i++) {
            /** @type {?} */
            const leftPosition = allTabs[i].getBoundingClientRect().left -
                this._tabContainerEl.getBoundingClientRect().left;
            /** @type {?} */
            const rightPosition = allTabs[i].getBoundingClientRect().width + leftPosition;
            if (rightPosition > this._tabContainerEl.offsetWidth) {
                t_right_tooltips.push(this.tabs[i]);
            }
            else if (leftPosition < 0) {
                t_left_tooltips.push(this.tabs[i]);
            }
        }
        this.leftTooltipTabs = []
            .concat(t_left_tooltips)
            .slice(Math.max(0, t_left_tooltips.length - this.maxTooltipLen));
        this.rightTooltipTabs = []
            .concat(t_right_tooltips)
            .slice(0, Math.min(this.maxTooltipLen, t_right_tooltips.length));
        this.disableRTooltip = this.rightTooltipTabs.length < 1;
        this.disableLTooltip = this.leftTooltipTabs.length - hiddenTabsLength < 1;
    }
    /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    _reCalculateSides() {
        this.disableRight =
            this._tabContainerEl.scrollLeft >=
                this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        this.disableLeft = this._tabContainerEl.scrollLeft <= 0;
        this._reCalulateTooltips();
    }
    /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    _getTabById(id) {
        /** @type {?} */
        const indexWidthId = [];
        /** @type {?} */
        const tabsWithId = this.tabs.filter((/**
         * @param {?} tab
         * @param {?} index
         * @return {?}
         */
        (tab, index) => {
            if (tab.id === id) {
                indexWidthId.push(index);
                return true;
            }
            else {
                return false;
            }
        }));
        return {
            tab: tabsWithId.length ? tabsWithId[0] : null,
            index: indexWidthId.length ? indexWidthId[0] : -1
        };
    }
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    resolveSize(size) {
        /** @type {?} */
        const regex = /px|em|rem|pt|%/;
        // 说明是字符串
        return regex.test(size)
            ? `${parseInt(size, 10)}${size.match(regex)[0]}`
            : `${size}px`;
    }
    /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    hasInHeadCl() {
        if (this.toolbarConf && this.toolbarConf.hasOwnProperty('position') && this.toolbarConf.hasOwnProperty('contents') && this.toolbarConf.position === 'inHead' && this.toolbarConf.contents.length > 0) {
            return true;
        }
        if (this.headerExtendConf && !(this.toolbarConf && this.toolbarConf.position === 'inContent' && this.toolbarConf.contents.length)) {
            return true;
        }
        return false;
    }
}
FarrisTabsComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-tabs',
                template: "<div #tabHeader class=\"farris-tabs-header\"\r\n    [class.farris-tabs-inHead]=\"hasInHeadCl()\"\r\n    [class.farris-tabs-inContent]=\"!hasInHeadCl()\">\r\n    <div class=\"farris-tabs-title scroll-tabs\"\r\n        [ngStyle]=\"{'width': hasInHeadCl() ? (titleWidth?titleWidth + '%':null) : null}\">\r\n        <button type=\"button\" (disabled)=\"disableLeft\" class=\"btn sc-nav-btn px-1 sc-nav-lr\"\r\n            [ngClass]=\"{'d-none':hideButtons}\" #leftNav>\r\n        </button>\r\n        <div class=\"spacer f-utils-fill\" #tabParent\r\n            [ngClass]=\"{'spacer-sides':!hideButtons&& hideDropDown,'spacer-sides-dropdown':!hideButtons&&!hideDropDown}\"\r\n            style=\"width:100%;\">\r\n            <ul class=\"nav farris-nav-tabs flex-nowrap\" [class.nav-fill]=\"fill\"\r\n                [class.flex-row]=\"position==='top'||position==='bottom'\"\r\n                [class.flex-column]=\"position==='left'||position==='right'\" #tabContainer>\r\n                <li class=\"nav-item\" *ngFor=\"let tab of tabs;index as tabIndex\"\r\n                    [ngClass]=\"{'d-none': tab._show !== true, 'f-state-active': tab.id === activeId, 'f-state-disabled': tab.disabled === true}\"\r\n                    [ngStyle]=\"{'width':tab.tabWidth+'px'}\">\r\n                    <a class=\"nav-link tabs-text-truncate\" #anchor [class.active]=\"tab.id === activeId\"\r\n                        [class.disabled]=\"tab.disabled\" (click)=\"_cpSelectTabByIndex($event,tab.id)\">\r\n                        <span class=\"st-tab-text\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [ngClass]=\"tab.titleCustomCls\" [tabTransclude]=\"tab.headingRef\"\r\n                            *ngIf=\"tab.headingRef\"></span>\r\n                        <span class=\"st-tab-text\" [ngbTooltip]=\"tab.title\" [referElement]=\"tabContainer\"\r\n                            [disableTooltip]=\"!tab.titleOverflow\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [class.farris-title-text-custom]=\"tab.titleOverflow\"\r\n                            *ngIf=\"!tab.headingRef\">{{tab.title}}</span>\r\n                        <span class=\"st-drop-close\" *ngIf=\"tab.removeable\">\r\n                            <i class=\"f-icon f-icon-close\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown (openChange)=\"openChange($event)\">\r\n            <button type=\"button\" (disabled)=\"disableRight\" class=\"btn sc-nav-rg\" [ngClass]=\"{'d-none':hideButtons}\"\r\n                #rightNav></button>\r\n            <button #dropDownButton class=\"btn dropdown-toggle-split \" ngbDropdownToggle\r\n                [ngClass]=\"{'d-none':hideDropDown}\">\r\n            </button>\r\n            <div class=\"dropdown-menu\" [class.tabs-pt28]=\"searchBoxVisible\" ngbDropdownMenu #ddm=\"DropdownMenu\">\r\n                <div (click)=\"stopBubble($event)\" class='pb-1 tabs-li-absolute' *ngIf=\"searchBoxVisible\">\r\n                    <input type=\"text\" class=\"form-control k-textbox\" [(ngModel)]=\"searchTabText\"\r\n                        (keyup)=\"searchTab($event)\" />\r\n                    <span class=\"f-icon f-icon-page-title-query tabs-icon-search\"></span>\r\n                </div>\r\n                <ul class=\"tab-dropdown-menu--items\" [ngStyle]=\"{'width':menuItemsWidth}\">\r\n                    <li class=\"dropdown-item text-truncate px-2\" *ngFor=\"let tab of dropdownTabs;index as tabIndex\"\r\n                        [ngClass]=\"{'disabled': tab.disabled, 'active': tab.id === activeId, 'd-none': tab._show !==true}\"\r\n                        (click)=\"_cpSelectTabByIndex($event,tab.id, ddm)\">\r\n                        <!-- <span class=\"float-right st-drop-close\">\r\n                            <i class=\"material-icons align-middle\">close</i>\r\n                        </span> -->\r\n                        <a class=\"dropdown-title\">{{tab.title}}</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #toolbarContainer class=\"farris-tabs-toolbar\" *ngIf=\"toolbarConf || headerExtendConf\">\r\n        <div *ngIf=\"headerExtendConf && headerExtendConf.templateRef\" class=\"farris-tabs-header-extend\"\r\n            [class.margin-right-14]=\"toolbarConf && toolbarConf.contents.length\"\r\n            [ngClass]=\"headerExtendConf && headerExtendConf.extendCls\">\r\n            <template [ngTemplateOutlet]=\"headerExtendConf.templateRef\"></template>\r\n        </div>\r\n        <div class=\"farris-tabs-inline-flex\" *ngIf=\"toolbarConf\">\r\n            <ng-template ngFor let-btn [ngForOf]=\"toolbarConf.contents\" let-i=\"index\" [ngForTrackBy]=\"trackByButton\">\r\n                <button [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"\r\n                    *ngIf=\"getToolbarState(btn.id, btnVisible) | async\"\r\n                    [disabled]=\"getToolbarState(btn.id, btnStates) | async\"\r\n                    (click)=\"clickHandler(btn)\">{{btn.title}}</button>\r\n            </ng-template>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown [hidden]=\"toolbarDpHidden\">\r\n            <button class=\"btn btn-link morebtn\" ngbDropdownToggle>{{'tabs.more' | locale}}</button>\r\n            <ul class=\"dropdown-menu\" ngbDropdownMenu *ngIf=\"inMoreButtonContents.length\">\r\n                <ng-template ngFor let-content [ngForOf]=\"inMoreButtonContents\" let-i=\"index\">\r\n                    <li class=\"dropdown-item text-truncate px-2\"\r\n                        *ngIf=\"getToolbarState(content.id, btnVisible) | async\">\r\n                        <button style=\"width:100%;\" [attr.id]=\"content.id\" class=\"btn btn-link text-left\"\r\n                            [class.disabled]=\"getToolbarState(content.id, btnStates) | async\"\r\n                            (click)=\"clickHandler(content)\">{{content.title}}</button>\r\n                    </li>\r\n                </ng-template>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class=\"farris-tabs-btn-placeholder\" #btnPlaceholder *ngIf=\"toolbarConf\">\r\n        <ng-container *ngFor=\"let btn of toolbarConf.contents\">\r\n            <button [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getToolbarState(btn.id, btnVisible) | async\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<ng-content></ng-content>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                styles: [".farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-title{width:41.6666667%}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer.spacer-sides-dropdown{margin:0 60px 0 28px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .sc-nav-btn.dropdown{right:6px}.farris-tabs .margin-right-14{margin-right:14px}.farris-tabs .farris-tabs-header-extend{height:44px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer .farris-nav-tabs .nav-item .nav-link .farris-title-text{max-width:112px}.farris-tabs .tabs-pt28{padding:0}.farris-tabs .tab-dropdown-menu--items{max-height:200px;overflow:auto}.farris-tabs .tabs-li-absolute{padding:4px;margin:0;position:relative}.farris-tabs .tabs-icon-search{position:absolute;right:4px;top:50%;font-size:14px;padding:0 4px;width:auto;height:24px;color:rgba(0,0,0,.25);margin-top:-12px;line-height:20px}.farris-tabs .st-drop-close{line-height:1}.farris-tabs .dropdown-menu .dropdown-item .dropdown-title{overflow:hidden;display:inline-block;padding:0 5px}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-inline-flex{overflow:hidden}.farris-tabs .farris-tabs-btn-placeholder{position:absolute;display:-webkit-inline-box;display:inline-flex;top:-30px;left:0;opacity:0;z-index:-90}"]
            }] }
];
/** @nocollapse */
FarrisTabsComponent.ctorParameters = () => [
    { type: TabService },
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: NgZone }
];
FarrisTabsComponent.propDecorators = {
    fill: [{ type: Input }],
    autoTitleWidth: [{ type: Input }],
    titleLength: [{ type: Input }],
    position: [{ type: Input }],
    showDropDown: [{ type: Input }],
    showTooltips: [{ type: Input }],
    scrollStep: [{ type: Input }],
    autoResize: [{ type: Input }],
    closeable: [{ type: Input }],
    selectId: [{ type: Input, args: ['value',] }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    searchBoxVisible: [{ type: Input }],
    headerHeight: [{ type: Input, args: ['header-height',] }],
    contentDirection: [{ type: Input }],
    contentFill: [{ type: Input }],
    clickThrottleTime: [{ type: Input }],
    btnStates: [{ type: Input }],
    btnVisible: [{ type: Input }],
    tabs: [{ type: Input }],
    customClass: [{ type: Input }],
    titleWidth: [{ type: Input }],
    leftNav: [{ type: ViewChild, args: ['leftNav',] }],
    rightNav: [{ type: ViewChild, args: ['rightNav',] }],
    tabContainer: [{ type: ViewChild, args: ['tabContainer',] }],
    toolbarContainer: [{ type: ViewChild, args: ['toolbarContainer',] }],
    dropDownButton: [{ type: ViewChild, args: ['dropDownButton',] }],
    tabParent: [{ type: ViewChild, args: ['tabParent',] }],
    btnPlaceHolder: [{ type: ViewChild, args: ['btnPlaceholder',] }],
    beforeSelect: [{ type: Input }],
    tabChange: [{ type: Output }],
    tabRemove: [{ type: Output }],
    ddm: [{ type: ViewChild, args: ['ddm',] }]
};
if (false) {
    /** @type {?} */
    FarrisTabsComponent.prototype.fill;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoTitleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleLength;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchInputVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.showDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.showTooltips;
    /** @type {?} */
    FarrisTabsComponent.prototype.scrollStep;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoResize;
    /** @type {?} */
    FarrisTabsComponent.prototype.closeable;
    /** @type {?} */
    FarrisTabsComponent.prototype.selectId;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchBoxVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype._headerHeight;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentDirection;
    /** @type {?} */
    FarrisTabsComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickSubscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropDownButton;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabParent;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnPlaceHolder;
    /**
     * 选中tab 前事件
     * @type {?}
     */
    FarrisTabsComponent.prototype.beforeSelect;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabChange;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabRemove;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentFillStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._contentFill;
    /** @type {?} */
    FarrisTabsComponent.prototype.widthStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._width;
    /** @type {?} */
    FarrisTabsComponent.prototype.heightStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._height;
    /** @type {?} */
    FarrisTabsComponent.prototype._position;
    /** @type {?} */
    FarrisTabsComponent.prototype.positionStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.menuItemsWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.maxDropdownW;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._customClass;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.headerExtendConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisTabsComponent.prototype.inMoreButtonContents;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropdownTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideButtons;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLeft;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRight;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.el;
    /** @type {?} */
    FarrisTabsComponent.prototype.subscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftTooltipTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightTooltipTabs;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabContainerEl;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.maxTooltipLen;
    /** @type {?} */
    FarrisTabsComponent.prototype.activeId;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ro;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchTabText;
    /** @type {?} */
    FarrisTabsComponent.prototype.ddm;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._ddmHandler;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.stService;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRhYnMvIiwic291cmNlcyI6WyJsaWIvdGFicy90YWJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUNILFNBQVMsRUFBb0MsS0FBSyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsdUJBQXVCLEVBQ2xHLGlCQUFpQixFQUFFLGlCQUFpQixFQUFpQixTQUFTLEVBQzlELFlBQVksRUFBRSxNQUFNLEVBQXNDLE1BQU0sRUFDbkUsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFnQixTQUFTLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNuRyxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFbEcsT0FBTyxFQUFFLFVBQVUsRUFBYSxNQUFNLGdCQUFnQixDQUFDO0FBSXZELE9BQU8sY0FBYyxNQUFNLDBCQUEwQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQVN2RCxNQUFNLE9BQU8sbUJBQW1COzs7Ozs7OztJQTBNNUIsWUFDWSxTQUFxQixFQUNyQixVQUFzQixFQUN0QixRQUFtQixFQUNuQixLQUF3QixFQUN4QixNQUFjO1FBSmQsY0FBUyxHQUFULFNBQVMsQ0FBWTtRQUNyQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsVUFBSyxHQUFMLEtBQUssQ0FBbUI7UUFDeEIsV0FBTSxHQUFOLE1BQU0sQ0FBUTs7UUEzTWpCLFNBQUksR0FBRyxLQUFLLENBQUM7O1FBRWIsbUJBQWMsR0FBRyxLQUFLLENBQUM7O1FBRXZCLGdC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OztJQUNoRCw2Q0FBNEM7O0lBQzVDLHdDQUFrQzs7SUFDbEMsNkNBQTJDOzs7OztJQUczQywyQ0FBbUU7O0lBQ25FLHdDQUEwRDs7SUFDMUQsd0NBQTZEOztJQXdCN0QsZ0RBQXdEOztJQUV4RCwyQ0FBa0I7O0lBRWxCLDBDQUE4Qzs7SUFFOUMscUNBQVk7O0lBRVosMkNBQStDOztJQUUvQyxzQ0FBYTs7SUFFYix3Q0FBZTs7SUFDZiw2Q0FBb0Q7O0lBQ3BELDZDQUF3Qjs7SUFHeEIsMkNBQWtCOzs7OztJQUNsQiwyQ0FBMEI7Ozs7O0lBRTFCLG9DQUF5Qzs7SUFFekMsK0NBQXNCOztJQUV0QiwwQ0FHRTs7SUFFRiw4Q0FBdUI7O0lBRXZCLG1EQUFpQzs7SUFFakMsMkNBQWtCOztJQUVsQiwwQ0FBbUI7O0lBRW5CLHVDQUFpQjs7SUFHakIsMkNBQW9COztJQUVwQiwwQ0FBb0I7O0lBRXBCLDJDQUFxQjs7Ozs7SUFFckIsaUNBQXdCOztJQUV4QiwyQ0FBa0M7O0lBRWxDLDhDQUF1Qjs7SUFFdkIsOENBQXVCOztJQUV2Qiw4Q0FBcUI7O0lBRXJCLCtDQUFzQjs7Ozs7SUFFdEIsOENBQXFDOzs7OztJQUNyQyw0Q0FBMEI7O0lBRTFCLHVDQUFjOzs7OztJQUNkLGlDQUFrQzs7SUFFbEMsNENBQXNCOztJQUV0QixrQ0FBdUM7Ozs7O0lBRXZDLDBDQUFnQzs7Ozs7SUFJNUIsd0NBQTZCOzs7OztJQUM3Qix5Q0FBOEI7Ozs7O0lBQzlCLHVDQUEyQjs7Ozs7SUFDM0Isb0NBQWdDOzs7OztJQUNoQyxxQ0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIElucHV0LCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsIFZpZXdFbmNhcHN1bGF0aW9uLCBBZnRlclZpZXdJbml0LCBWaWV3Q2hpbGQsIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50Q2hlY2tlZCxcclxuICAgIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdDaGVja2VkLCBOZ1pvbmVcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBmcm9tRXZlbnQsIGludGVydmFsLCBPYnNlcnZhYmxlLCBvZiwgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRha2VVbnRpbCwgbWFwLCBzY2FuLCBzd2l0Y2hNYXAsIHRha2VXaGlsZSwgY29uY2F0LCBkZWJvdW5jZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBUYWJTZXJ2aWNlLCBUYWJDb25maWcgfSBmcm9tICcuLi90YWJzLmNvbmZpZyc7XHJcbmltcG9ydCB7IFRhYnNDaGFuZ2VFdmVudCwgVGFic1JlbW92ZVRhYkV2ZW50IH0gZnJvbSAnLi4vdGFicy5ldmVudHMnO1xyXG5pbXBvcnQgeyBGYXJyaXNUYWJDb21wb25lbnQgfSBmcm9tICcuLi90YWIvdGFiLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFRvb2xiYXJDb25mLFRvb2xiYXJDb250ZW50c0NvbmZ9IGZyb20gJy4uL3Rvb2xiYXIuY29uZmlnJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XHJcbmltcG9ydCB7IE5nYkRyb3Bkb3duTWVudSB9IGZyb20gJy4uL2Ryb3Bkb3duL2Ryb3Bkb3duJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdGFicycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vdGFicy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi90YWJzLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIEZhcnJpc1RhYnNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgQWZ0ZXJWaWV3Q2hlY2tlZCB7XHJcblxyXG4gICAgLy8g5pSv5oyB5qCH562+6aG15aGr5YWFXHJcbiAgICBASW5wdXQoKSBmaWxsID0gZmFsc2U7XHJcbiAgICAvLyDmlK/mjIHmoIfnrb7pobXmoIfpopjoh6rpgILlupTlrr3luqYtXHJcbiAgICBASW5wdXQoKSBhdXRvVGl0bGVXaWR0aCA9IGZhbHNlO1xyXG4gICAgLy8g5qCH6aKY6ZW/5bqm5aSn5LqO562J5LqO5aSa5bCR5a2X56ym77yM5ZCv55So5riQ5Y+Y5qC35byP4oCU4oCU5bGe5oCn5bqf5byDXHJcbiAgICBASW5wdXQoKSB0aXRsZUxlbmd0aCA9IDc7XHJcbiAgICBzZWFyY2hJbnB1dFZpc2libGU6IGJvb2xlYW47XHJcbiAgICAvLyB0YWLpobXkvY3nva4g5LiK5LiL5bem5Y+zXHJcbiAgICBASW5wdXQoKSBzZXQgcG9zaXRpb24odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0YXRlcy5uZXh0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIGdldCBwb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgICB9XHJcbiAgICAvLyDmmK/lkKblkK/nlKjkuIvmi4nmoYZcclxuICAgIEBJbnB1dCgpIHNob3dEcm9wRG93bjtcclxuICAgIC8vIOaYr+WQpuWQr+eUqOaPkOekuuS/oeaBr1xyXG4gICAgQElucHV0KCkgc2hvd1Rvb2x0aXBzO1xyXG4gICAgLy8g54K55Ye75pe25rua5Yqo5YC8XHJcbiAgICBASW5wdXQoKSBzY3JvbGxTdGVwO1xyXG4gICAgLy8g5piv5ZCm6Ieq5Yqo6YeN5paw5a695bqmXHJcbiAgICBASW5wdXQoKSBhdXRvUmVzaXplO1xyXG4gICAgLy8g6K6+572u5Y+v5YWz6Zet5qCH562+6aG1XHJcbiAgICBASW5wdXQoKSBjbG9zZWFibGU6IGJvb2xlYW47XHJcbiAgICAvLyDorr7nva7lj6/pgInkuK3moIfnrb7pobVcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbnB1dC1yZW5hbWVcclxuICAgIEBJbnB1dCgndmFsdWUnKSBzZWxlY3RJZDogc3RyaW5nO1xyXG4gICAgLy8gdGFic+WuveW6puWSjOmrmOW6plxyXG4gICAgQElucHV0KCkgc2V0IHdpZHRoKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl93aWR0aCA9IHRoaXMucmVzb2x2ZVNpemUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMud2lkdGhTdGF0ZXMubmV4dCh0aGlzLl93aWR0aCk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgaGVpZ2h0KHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHQgPSB0aGlzLnJlc29sdmVTaXplKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmhlaWdodFN0YXRlcy5uZXh0KHRoaXMuX2hlaWdodCk7XHJcbiAgICB9XHJcbiAgICAvLyDmkJzntKLmoYbmmK/lkKbmmL7npLpcclxuICAgIEBJbnB1dCgpIHNlYXJjaEJveFZpc2libGUgPSB0cnVlO1xyXG4gICAgLy8g5qCH562+6aG16auY5bqmXHJcbiAgICBfaGVhZGVySGVpZ2h0OiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgICBASW5wdXQoJ2hlYWRlci1oZWlnaHQnKVxyXG4gICAgZ2V0IGhlYWRlckhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVySGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgc2V0IGhlYWRlckhlaWdodChoZWFkZXJIZWlnaHQpIHtcclxuICAgICAgICB0aGlzLl9oZWFkZXJIZWlnaHQgPSB0aGlzLnJlc29sdmVTaXplKGhlYWRlckhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YaF5a655piv5ZCm5pivZmxleCDlrrnlmagg55So5LqO5YaF6YOo5a2Q5YWD57SgZmxleFxyXG4gICAgQElucHV0KCkgY29udGVudERpcmVjdGlvbiA9ICdjb2x1bW4nO1xyXG4gICAgLy8g5YaF5a655piv5ZCm5aGr5YWFICDpu5jorqTmmK/kuI3loavlhYVcclxuICAgIEBJbnB1dCgpIHNldCBjb250ZW50RmlsbCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRGaWxsID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsbFN0YXRlcy5uZXh0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIGNsaWNrVGhyb3R0bGVUaW1lID0gMzUwO1xyXG4gICAgcHJpdmF0ZSBjbGlja0l0ZW1zID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgcHJpdmF0ZSBjbGlja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIEBJbnB1dCgpIGJ0blN0YXRlczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+O1xyXG4gICAgQElucHV0KCkgYnRuVmlzaWJsZTogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+O1xyXG5cclxuICAgIC8vIOaJgOacieagh+etvuaVsOaNrlxyXG4gICAgQElucHV0KClcclxuICAgIGdldCB0YWJzKCk6IGFueVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGFicztcclxuICAgIH1cclxuICAgIHNldCB0YWJzKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fdGFicyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgY3VzdG9tQ2xhc3MoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tQ2xhc3M7XHJcbiAgICB9XHJcbiAgICBzZXQgY3VzdG9tQ2xhc3MoY3VzdG9tQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsIGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jdXN0b21DbGFzcyA9IGN1c3RvbUNsYXNzID8gY3VzdG9tQ2xhc3MudHJpbSgpIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tQ2xhc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21DbGFzcy5zcGxpdCgnICcpLmZvckVhY2goKGNzc0NsYXNzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgY3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDlt6bkvqfmiYDmnInmoIfnrb7nmoTlrr3luqblkows55m+5YiG5q+UXHJcbiAgICBASW5wdXQoKSB0aXRsZVdpZHRoID0gMDtcclxuICAgIEBWaWV3Q2hpbGQoJ2xlZnROYXYnKSBsZWZ0TmF2O1xyXG4gICAgQFZpZXdDaGlsZCgncmlnaHROYXYnKSByaWdodE5hdjtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhYkNvbnRhaW5lcicpIHRhYkNvbnRhaW5lcjtcclxuICAgIEBWaWV3Q2hpbGQoJ3Rvb2xiYXJDb250YWluZXInKSB0b29sYmFyQ29udGFpbmVyO1xyXG4gICAgQFZpZXdDaGlsZCgnZHJvcERvd25CdXR0b24nKSBkcm9wRG93bkJ1dHRvbjtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhYlBhcmVudCcpIHRhYlBhcmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ2J0blBsYWNlaG9sZGVyJykgYnRuUGxhY2VIb2xkZXJcclxuXHJcbiAgICAvKiog6YCJ5LitdGFiIOWJjeS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgYmVmb3JlU2VsZWN0OiAoZTogVGFic0NoYW5nZUV2ZW50KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQE91dHB1dCgpIHRhYkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8VGFic0NoYW5nZUV2ZW50PigpO1xyXG4gICAgQE91dHB1dCgpIHRhYlJlbW92ZSA9IG5ldyBFdmVudEVtaXR0ZXI8VGFic1JlbW92ZVRhYkV2ZW50PigpO1xyXG5cclxuICAgIGdldCBkaXJlY3Rpb24oKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2NvbHVtbic7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2NvbHVtbi1yZXZlcnNlJztcclxuICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Jvdyc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncm93LXJldmVyc2UnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDml6DnlKjvvIzlhbzlrrlcclxuICAgIGdldCB0YWJEaXJlY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gPT09ICd0b3AnIHx8IHRoaXMucG9zaXRpb24gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAncm93JztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucG9zaXRpb24gPT09ICdsZWZ0JyB8fCB0aGlzLnBvc2l0aW9uID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnY29sdW1uJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDlhoXlrrnloavlhYXnirbmgIFcclxuICAgIGNvbnRlbnRGaWxsU3RhdGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihmYWxzZSk7XHJcbiAgICAvLyDlhoXlrrnmmK/lkKbloavlhYUs6buY6K6k5LiN5aGr5YWFXHJcbiAgICBfY29udGVudEZpbGw6IGFueTtcclxuICAgIC8vIOWuveW6pueKtuaAgVxyXG4gICAgd2lkdGhTdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oZmFsc2UpO1xyXG4gICAgLy8gdGFic+WuveW6plxyXG4gICAgX3dpZHRoOiBhbnk7XHJcbiAgICAvLyDpq5jluqbnirbmgIFcclxuICAgIGhlaWdodFN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihmYWxzZSk7XHJcbiAgICAvLyB0YWJz5a695bqmXHJcbiAgICBfaGVpZ2h0OiBhbnk7XHJcbiAgICAvLyB0YWJz5qCH6aKY5L2N572uXHJcbiAgICBfcG9zaXRpb246IGFueTtcclxuICAgIHBvc2l0aW9uU3RhdGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmc+KCd0b3AnKTtcclxuICAgIG1lbnVJdGVtc1dpZHRoID0gJ2F1dG8nO1xyXG4gICAgLy9tYXhEcm9wZG93bkggPSAyMDA7XHJcbiAgICAvLyDkuIvmi4nliJfooajmnIDlpKflrr3luqbvvJog6Z2e5q2j5YC86KGo5piO5piv5LiN6ZmQ5Yi25a695bqmXHJcbiAgICBtYXhEcm9wZG93blcgPSAtMTtcclxuICAgIHByaXZhdGUgX2N1c3RvbUNsYXNzID0gJyc7XHJcbiAgICAvLyDmoIfnrb7lrZjlgqjliJfooahcclxuICAgIHByaXZhdGUgX3RhYnM6IEZhcnJpc1RhYkNvbXBvbmVudFtdID0gW107XHJcblxyXG4gICAgaGVhZGVyRXh0ZW5kQ29uZjogYW55O1xyXG4gICAgLy8g5bel5YW35p2h5pi+56S655u45YWz6YWN572uXHJcbiAgICB0b29sYmFyQ29uZjogVG9vbGJhckNvbmYgPSB7XHJcbiAgICAgICAgcG9zaXRpb246ICcnLFxyXG4gICAgICAgIGNvbnRlbnRzOiBbXVxyXG4gICAgfTtcclxuICAgIC8vIOW3peWFt+adoeWPs+S+p+Wwj+S4i+aLieahhuaYr+WQpuaYvuekulxyXG4gICAgdG9vbGJhckRwSGlkZGVuID0gdHJ1ZTtcclxuICAgIC8vIOW3peWFt+adoeKAnOabtOWkmuKAnemHjOeahOaMiemSrlxyXG4gICAgaW5Nb3JlQnV0dG9uQ29udGVudHM6IGFueVtdID0gW107XHJcbiAgICAvLyDmmL7npLrkuIvmi4nmlbDmja5cclxuICAgIGRyb3Bkb3duVGFicyA9IFtdO1xyXG4gICAgLy8g6ZqQ6JeP5bem5Y+z5rua5Yqo566t5aS05oyJ6ZKuXHJcbiAgICBoaWRlQnV0dG9ucyA9IHRydWU7XHJcbiAgICAvLyDljZXkuKrmoIfnrb7pobXmoIfpopjnmoTlrr3luqZcclxuICAgIHRhYldpZHRoOiBudW1iZXI7XHJcblxyXG4gICAgLy8g6ZqQ6JeP5LiL5ouJXHJcbiAgICBoaWRlRHJvcERvd24gPSB0cnVlO1xyXG4gICAgLy8g56aB55So5bem566t5aS0XHJcbiAgICBkaXNhYmxlTGVmdCA9IGZhbHNlO1xyXG4gICAgLy8g56aB55So5Y+z566t5aS0XHJcbiAgICBkaXNhYmxlUmlnaHQgPSBmYWxzZTtcclxuICAgIC8vIOW9k+WJjeagt+W8j1xyXG4gICAgcHJpdmF0ZSBlbDogSFRNTEVsZW1lbnQ7XHJcbiAgICAvLyDorrDlvZXkuovku7bmtYFcclxuICAgIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICAgIC8vIOemgeeUqOWPs+S+p+aPkOekulxyXG4gICAgZGlzYWJsZVJUb29sdGlwID0gdHJ1ZTtcclxuICAgIC8vIOemgeeUqOW3puS+p+aPkOekulxyXG4gICAgZGlzYWJsZUxUb29sdGlwID0gdHJ1ZTtcclxuICAgIC8vIOW3puS+p+aPkOekuuaVsOaNrlxyXG4gICAgbGVmdFRvb2x0aXBUYWJzID0gW107XHJcbiAgICAvLyDlj7Pkvqfmj5DnpLrmlbDmja5cclxuICAgIHJpZ2h0VG9vbHRpcFRhYnMgPSBbXTtcclxuICAgIC8vIOWGhemDqOWkhOeQhuagh+iusFRhYuagh+etvlxyXG4gICAgcHJpdmF0ZSBfdGFiQ29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBtYXhUb29sdGlwTGVuID0gNTtcclxuICAgIC8vIOagh+iusOW9k+WJjVRhYuagh+etvlxyXG4gICAgYWN0aXZlSWQgPSAnJztcclxuICAgIHByaXZhdGUgcm86IFJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuICAgIC8vIOaQnOe0onRhYuahhueahOWAvFxyXG4gICAgc2VhcmNoVGFiVGV4dDogc3RyaW5nO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2RkbScpIGRkbTogTmdiRHJvcGRvd25NZW51O1xyXG5cclxuICAgIHByaXZhdGUgX2RkbUhhbmRsZXI6IGFueSA9IG51bGw7XHJcblxyXG4gICAgdHJhY2tCeUJ1dHRvbihpbmRleDogbnVtYmVyLCBidG46IGFueSk6IG51bWJlciB7IHJldHVybiBidG4uaWQ7IH1cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgc3RTZXJ2aWNlOiBUYWJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Q29uZmlnKCk7XHJcbiAgICB9XHJcbiAgICAvKiog6aqM6K+B5Lyg6YCS5Y+C5pWwICovXHJcbiAgICBwcml2YXRlIHZlcmlmeUNvbmZpZygpIHtcclxuICAgICAgICBjb25zdCBjb25maWc6IFRhYkNvbmZpZyA9IHRoaXMuc3RTZXJ2aWNlLmdldENvbmZpZygpO1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY29uZmlnKTtcclxuICAgICAgICB0aGlzLnNjcm9sbFN0ZXAgPSBwYXJzZUludCh0aGlzLnNjcm9sbFN0ZXAgKyAnJywgMTApO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVNlbGVjdCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy5jbGlja0l0ZW1zLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuY2xpY2tUaHJvdHRsZVRpbWUpKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChidG5JbmZvOlRvb2xiYXJDb250ZW50c0NvbmYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihidG5JbmZvLmNsaWNrJiZ0eXBlb2YgYnRuSW5mby5jbGljaz09J2Z1bmN0aW9uJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkluZm8uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwgPSB0aGlzLnRhYkNvbnRhaW5lci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZVN0cmVhbSgpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0aGlzLnNlbGVjdElkO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uZ1pvbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm8gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMuZWwucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzWydzZWxlY3RJZCddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKGNoYW5nZXNbJ3NlbGVjdElkJ10uY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyog5qCH562+6aG15YaF5a655Yid5aeL5YyWICovXHJcbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7IH1cclxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIC8vIOS4uuS6huWFvOWuueW8hOaXp+ihqOWNle+8jOS4jeWFvOWuuUhvc3RCaW5kaW5nLCDpgJrov4fov73liqBjbGFzc+eahOaWueW8j+WunueOsFxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZhcnJpcy10YWJzJyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4nKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxsU3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2YtdGFicy1jb250ZW50LWZpbGwnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2YtdGFicy1jb250ZW50LWZpbGwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud2lkdGhTdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsLCAnd2lkdGgnLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0U3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbCwgJ2hlaWdodCcsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93LXJldmVyc2UnKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4tcmV2ZXJzZScpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmbGV4LXJvdycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09PSAndG9wJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1yb3ctcmV2ZXJzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4tcmV2ZXJzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5YW85a6557uT5p2fXHJcbiAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0QWN0aXZlKCk7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlVGl0bGVTdHlsZSgpO1xyXG4gICAgICAgIHRoaXMuX2xpc3RlblNob3dDaGFuZ2VzKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChzZWxmLnNlYXJjaElucHV0VmlzaWJsZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGRtSGFuZGxlciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAnbW91c2Vkb3duJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5mYXJyaXMtdGFicy1oZWFkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGRtICYmIHRoaXMuZGRtLmRyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGRtLmRyb3Bkb3duLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKTogdm9pZCB7XHJcblxyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgLy8g57uE5Lu26ZSA5q+B5pe2ICDlj5bmtojmiYDmnInkuovku7borqLpmIVcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi5mb3JFYWNoKHN1YiA9PiB7XHJcbiAgICAgICAgICAgIHN1Yi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm8udW5vYnNlcnZlKHRoaXMuZWwucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ybyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fZGRtSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9kZG1IYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RkbUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jbGlja1N1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xpY2tIYW5kbGVyKGJ0bkluZm8pIHtcclxuICAgICAgICBpZiAoIWJ0bkluZm8pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsaWNrSXRlbXMubmV4dChidG5JbmZvKTtcclxuXHJcbiAgICB9XHJcbiAgICAvLyDmm7TlpJp0YWLnmoTmmL7npLrpmpDol49cclxuICAgIG9wZW5DaGFuZ2UoZSkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXRWaXNpYmxlID0gZTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRhYlRleHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAvLyDlkK/nlKjkuobmkJzntKLvvIzpnIDopoHliKTmlq3kuIvmi4npnaLmnb/nmoTlgLxcclxuICAgICAgICAvLyDlm6DkuLrkuIvmi4npnaLmnb/lj6/og73lrZjlnKjpga7mjKHnmoTpl67pophcclxuICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVJdGVtc1dpZHRoID0gdGhpcy5kZG0ucmVzZXRNZW51RWxXaWR0aE9wZW4oKSArICdweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNXaWR0aCA9ICdhdXRvJztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLy8g5pCc57SidGFiXHJcbiAgICBzZWFyY2hUYWIoZSkge1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgfVxyXG4gICAgLy8g6Zi75q2i5YaS5rOhXHJcbiAgICBzdG9wQnViYmxlKGUpIHtcclxuICAgICAgICBpZiAoZSAmJiBlLnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5ldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFRvb2xiYXJTdGF0ZShpZDogc3RyaW5nLCBzdGF0ZTogT2JzZXJ2YWJsZTxhbnk+ID0gdGhpcy5idG5TdGF0ZXMpIHtcclxuICAgICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBtYXAoKG46IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuW2lkXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg5pyq5om+SUTkuLrvvJoke2lkfSDnm7jlhbPnirbmgIHorr7nva7vvIFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltpZF07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDnm5HlkKzlrZDnu4Tku7bnmoTpmpDol4/mmL7npLrlsZ7mgKdcclxuICAgIHByaXZhdGUgX2xpc3RlblNob3dDaGFuZ2VzKCkge1xyXG4gICAgICAgIC8vIOWmguaenOmakOiXj+eahOe7hOS7tuaYr+a/gOa0u+eKtuaAge+8jOWFiOWwhuWFtuiuvue9ruS4uuW4uOinhFxyXG4gICAgICAgIHRoaXMudGFicy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnNob3dTdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUlkVG9rZW47XHJcbiAgICAgICAgICAgICAgICBpdGVtLl9zaG93ID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSBmYWxzZSAmJiBpdGVtLmlkID09PSB0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5fYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUlkVG9rZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYnMgPSB0aGlzLnRhYnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5fc2hvdyA9PT0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VGFiSWQgPSB0YWJzLmxlbmd0aCA/IHRhYnNbMF0uaWQgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8g54S25ZCO5bCG5pi+56S654q25oCB5LiL55qE56ys5LiA5LiqdGFi5r+A5rS7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFRhYklkICYmIGFjdGl2ZUlkVG9rZW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSBkZWZhdWx0VGFiSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSBpdGVtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzW2luZGV4XS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCJ5LitVGFiXHJcbiAgICAgKiBAcGFyYW0gIHRhYklkIHRhYuagh+ivhlxyXG4gICAgICovXHJcbiAgICBzZWxlY3RUYWIodGFiSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVGFiID0gdGhpcy5fZ2V0VGFiQnlJZCh0YWJJZCk7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0VGFiKHNlbGVjdGVkVGFiLnRhYiwgc2VsZWN0ZWRUYWIuaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgX2NwU2VsZWN0VGFiQnlJbmRleChldjogRXZlbnQsIGlkOiBzdHJpbmcsIGRkbSA9IG51bGwpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRFTCA9IGV2LnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0YXJnZXRFTC5jbGFzc05hbWUuaW5kZXhPZignc3QtZHJvcC1jbG9zZScpID4gLTEgfHxcclxuICAgICAgICAgICAgdGFyZ2V0RUwucGFyZW50RWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZignc3QtZHJvcC1jbG9zZScpID4gLTFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8g6Zi75q2i5YaS5rOh5ZKM5o2V6I635LqL5Lu2IOeCueWHu+WIoOmZpOagh+iusCDliJnmiafooYzliKDpmaTmoIfnrb7mlrnms5UgIOiAjOS4jeaYr+mAieS4reagh+etvlxyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVRhYihpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g6Zi75q2i5YaS5rOhXHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG5cclxuICAgICAgICBpZiAoZGRtKSB7XHJcbiAgICAgICAgICAgIGRkbS5kcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4d0YWJz55qE57Si5byV6YCJ5oupIHRhYlxyXG4gICAgICogQHBhcmFtIGluZGV4IHRhYnPntKLlvJVcclxuICAgICAqL1xyXG4gICAgc2VsZWN0VGFiQnlJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnRhYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFRhYiA9IHRoaXMudGFic1tpbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdFRhYihzZWxlY3RUYWIsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiDpgInkuK10YWLml7YgIOaatOmcsuWHuumAieS4rXRhYueahGlkIOWSjOWFtuS5i+WQjueahGlkICovXHJcbiAgICBwcml2YXRlIF9zZWxlY3RUYWIodGFiLCBpbmRleCkge1xyXG4gICAgICAgIGlmICh0YWIgJiYgIXRhYi5kaXNhYmxlZCAmJiB0aGlzLmFjdGl2ZUlkICE9PSB0YWIuaWQpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0ID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYnNDaGFuZ2VFdmVudFBhcmFtID0ge1xyXG4gICAgICAgICAgICAgICAgcHJldklkOiB0aGlzLmFjdGl2ZUlkLFxyXG4gICAgICAgICAgICAgICAgbmV4dElkOiB0YWIuaWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QodGFic0NoYW5nZUV2ZW50UGFyYW0pLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGFiLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmmluWFiOS4jea/gOa0u+aJgOacieeahHRhYumhtSAg54S25ZCO5r+A5rS75b2T5YmNdGFi6aG1XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKGl0ZW06IEZhcnJpc1RhYkNvbXBvbmVudCwgaTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFic1tpbmRleF0uX2FjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmu5rliqjliLDlj6/op4HljLrln5/lhoVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhYkludG9WaWV3KGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJDaGFuZ2UuZW1pdCh0YWJzQ2hhbmdlRXZlbnRQYXJhbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgX3NldEFjdGl2ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy50YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IGl0ZW0uX3Nob3cgPT09IHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHRoaXMuYWN0aXZlSWQpLnRhYjtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IGFjdGl2ZVRhYiA/IGFjdGl2ZVRhYi5pZCA6IHRoaXMudGFicy5sZW5ndGggPyB0aGlzLnRhYnNbMF0uaWQgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8g6L+H5ruk5o6Jc2hvdz1mYWxzZe+8iOmakOiXj++8ieeahHRhYlxyXG4gICAgICAgICAgICBpZiAodGFicy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gdGFicy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5hY3RpdmVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFRhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGFyZ2V0VGFiLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhYnNbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhY3RpdmVJZCDmmL7npLrmn5DkuKp0YWJcclxuICAgICAqL1xyXG4gICAgc2hvd1RhYih0YWJJZDogYW55LCBzZWxlY3RhYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMudGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJzW2ldLmlkID09PSB0YWJJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2ldLl9zaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIodGFiSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aXZlSWQg6ZqQ6JeP5p+Q5LiqdGFiXHJcbiAgICAgKi9cclxuICAgIGhpZGVUYWIoYWN0aXZlSWQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHNob3dUYWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX3Nob3cgPT09IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gc2hvd1RhYnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAobGVuIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzaG93VGFic1tpXS5pZCA9PT0gYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHNob3dUYWJzW2ldLl9zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuICYmIGxlbiA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxlbiAmJiBsZW4gPj0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihzaG93VGFic1tsZW4gLSAxXS5pZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2hvd1RhYnNbaW5kZXggKyAxXS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDmoIfnrb5cclxuICAgICAqIEBwYXJhbSBjdXJUYWJzIOaVsOe7hOaIluiAheWvueixoVxyXG4gICAgICogQHBhcmFtIGFjdGl2ZUlkIOiuvue9rlxyXG4gICAgICovXHJcbiAgICBhZGRUYWJzKGN1clRhYnM6IGFueVtdLCBpbmRleCwgc2V0QWN0aXZlSWQpIHtcclxuICAgICAgICBpZiAoY3VyVGFicy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFicy5zcGxpY2UoaW5kZXgsIDAsIC4uLmN1clRhYnMpO1xyXG4gICAgICAgICAgICAvLyDljrvph41cclxuICAgICAgICAgICAgdGhpcy50YWJzID0gdGhpcy5fdW5pcXVlKHRoaXMudGFicyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXRBY3RpdmVJZCAmJiB0aGlzLmFjdGl2ZUlkICE9PSBzZXRBY3RpdmVJZCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHNldEFjdGl2ZUlkKTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlclRhYi5pbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihzZXRBY3RpdmVJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gc2V0QWN0aXZlSWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhYkludG9WaWV3KGZpbHRlclRhYi5pbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VUaXRsZVN0eWxlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa3u+WKoOagh+etvuaXtiAg5Y676YeNXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF91bmlxdWUob2JqQXJyYXkpIHtcclxuICAgICAgICBjb25zdCBoYXNoID0ge307XHJcbiAgICAgICAgb2JqQXJyYXkgPSBvYmpBcnJheS5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHtcclxuICAgICAgICAgICAgaWYgKGhhc2hbbmV4dC5pZF0pIHtcclxuICAgICAgICAgICAgICAgIGhhc2hbbmV4dC5pZF0gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhhc2hbbmV4dC5pZF0gPSB0cnVlICYmIGl0ZW0ucHVzaChuZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgcmV0dXJuIG9iakFycmF5O1xyXG4gICAgfVxyXG4gICAgLyog6YCa6L+HdGFi5YiX6KGo55qE5bqP5YiX5Yig6ZmkdGFiICovXHJcbiAgICByZW1vdmVUYWJCeUluZGV4KGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gbGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlVGFiID0gdGhpcy50YWJzW2luZGV4XTtcclxuICAgICAgICByZW1vdmVUYWIuX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkID09PSByZW1vdmVUYWIuaWQpIHtcclxuICAgICAgICAgICAgLy8g5Y+q5pyJ5LiA5Liq6ICM5LiU6KKr5Yig6ZmkXHJcbiAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaJgOacieagh+etvuWdh+WIoOmZpCDmv4DmtLtpZOS4uuepulxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWIoOmZpOeahOaYr+acgOWQjuS4gOS4quagh+etviDorr7nva7lhbbliY3pnaLnmoTlpITkuo7mv4DmtLvnirbmgIFcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0aGlzLnRhYnNbbGVuIC0gMV0uaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXggLSAxXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWFtuS7luaDheWGtSAg6K6+572u5YW25ZCO6Z2i55qE5aSE5LqO5r+A5rS754q25oCBXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy50YWJzW2luZGV4ICsgMV0uaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXggKyAxXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhpbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFiUmVtb3ZlLmVtaXQoe1xyXG4gICAgICAgICAgICByZW1vdmVJbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIHJlbW92ZUlkOiByZW1vdmVUYWIuaWQsXHJcbiAgICAgICAgICAgIGFjdGl2ZUlkOiB0aGlzLmFjdGl2ZUlkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWFs+mXreagh+etviAg6Lef5Yig6Zmk5qCH562+5LiN5ZCMXHJcbiAgICAgKiBAcGFyYW0gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIGNsb3NlVGFiKGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy50YWJzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYiA9IHRoaXMudGFic1tpXTtcclxuICAgICAgICAgICAgaWYgKHRhYi5pZCA9PT0gYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiQnlJbmRleChpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yid5aeL5YyWXHJcbiAgICAgKi9cclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFic1tpXS5pZCA9PT0gdGhpcy5hY3RpdmVJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2ldLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5oiq5Y+WdGFi5Lit55qEdGl0bGUs6LaF6L+HNuS9je+8jOaIquaWrVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF90cnVuY2F0ZVRpdGxlKCkge1xyXG4gICAgICAgIHRoaXMudGFicyA9IHRoaXMudGFicy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0udGl0bGUgPSBpdGVtLnRpdGxlLmxlbmd0aCA+IDYgPyBpdGVtLnRpdGxlLnN1YnN0cigwLCA2KSA6IGl0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pu/5o2idGFi5Lit55qEdGl0bGXpopzoibJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2hhbmdlVGl0bGVTdHlsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRvVGl0bGVXaWR0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0ICR0ZXh0RWxzID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnN0LXRhYi10ZXh0Jyk7XHJcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAkdGV4dEVscy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50RWwgPSAkdGV4dEVsc1trXS5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAoJHRleHRFbHNba10uc2Nyb2xsV2lkdGggPiBwYXJlbnRFbFsnb2Zmc2V0V2lkdGgnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2tdLnRpdGxlT3ZlcmZsb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2tdLnRpdGxlT3ZlcmZsb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL3RoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7rmtYFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY3JlYXRlU3RyZWFtKCkge1xyXG4gICAgICAgIFt0aGlzLnJpZ2h0TmF2LCB0aGlzLmxlZnROYXZdLmZvckVhY2goKGN1ckJ0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gaW5kZXggPyAtMSA6IDE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb3VzZWRvd24kID0gZnJvbUV2ZW50KGN1ckJ0bi5uYXRpdmVFbGVtZW50LCAnbW91c2Vkb3duJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdXNldXAkID0gZnJvbUV2ZW50KGN1ckJ0bi5uYXRpdmVFbGVtZW50LCAnbW91c2V1cCcpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdNb3VzZURvd24kID0gbW91c2Vkb3duJC5waXBlKFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwkID0gb2YoMCkucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uY2F0KGludGVydmFsKDgwKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VVbnRpbChtb3VzZXVwJCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4oKHN1bTogbnVtYmVyLCBudW06IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIHRoaXMuc2Nyb2xsU3RlcCAqIGRpcmVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VXaGlsZShudW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuZGlzYWJsZVJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHYsIGRpcmVjdGlvbjogZGlyZWN0aW9uIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWwkO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW91c2VwcmVzc1N1YiA9IG5ld01vdXNlRG93biQuc3Vic2NyaWJlKGNoYW5nZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIoY2hhbmdlLnZhbHVlLCBjaGFuZ2UuZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnB1c2gobW91c2VwcmVzc1N1Yik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGlmICh0aGlzLmF1dG9SZXNpemUpIHtcclxuICAgICAgICAvLyAgICAgLy8g6K6i6ZiFd2luZG93cyByZXNpemXkuovku7ZcclxuICAgICAgICAvLyAgICAgdGhpcy5zdWJzY3JpcHRpb24ucHVzaChcclxuICAgICAgICAvLyAgICAgICAgIGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5waXBlKHRocm90dGxlVGltZSg4MCkpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcclxuICAgICAgICAvLyAgICAgKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaMieeFp+aWueWQke+8jOa7muWKqOWIsOaMh+WumuS9jee9rlxyXG4gICAgICogQHBhcmFtIGRpc3Rfc2Nyb2xsIOebruagh+a7muWKqFxyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiDmlrnlkJFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfc2Nyb2xsVGFiKG1vdmUsIGRpcmVjdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGRpc3Rfc2Nyb2xsbGVmdCA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgKyBtb3ZlO1xyXG4gICAgICAgIGNvbnN0IG1heF9zY3JvbGxfbGVmdCA9XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbFdpZHRoIC0gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgLy8g5qCH562+6aG15bem5L6n56e75YqoXHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgZGlzdF9zY3JvbGxsZWZ0LFxyXG4gICAgICAgICAgICAgICAgbWF4X3Njcm9sbF9sZWZ0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKSB7XHJcbiAgICAgICAgICAgIC8vIOagh+etvumhteWPs+S+p+enu+WKqFxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ID0gTWF0aC5tYXgoZGlzdF9zY3JvbGxsZWZ0LCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVTaWRlcygpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmjIflrprlvZPliY3mu5HliqjliLDlj6/op4bljLrln5/igJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTmnKrmtYvor5VcclxuICAgICAqIGluZGV4XHJcbiAgICAgKi9cclxuICAgIHNjcm9sbFRhYkludG9WaWV3KGluZGV4KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90YWJDb250YWluZXJFbCB8fCB0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFiSW5kZXggPSBwYXJzZUludChpbmRleCArICcnLCAxMCk7XHJcbiAgICAgICAgbGV0IHRhYlRvU2Nyb2xsO1xyXG5cclxuICAgICAgICAvLyBmaXJzdCB3ZSBmaW5kIHRoZSB0YWIgZWxlbWVudC5cclxuICAgICAgICBpZiAodGFiSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBhbGxUYWJzID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLm5hdi1pdGVtJyk7XHJcbiAgICAgICAgICAgIGlmIChhbGxUYWJzLmxlbmd0aCA+IHRhYkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbCA9IGFsbFRhYnNbdGFiSW5kZXhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2Nyb2xsIHNlbGVjdGVkIHRhYiBpbnRvIHZpZXdcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignbGkuYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVUYWIpIHtcclxuICAgICAgICAgICAgICAgIHRhYlRvU2Nyb2xsID0gYWN0aXZlVGFiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFiVG9TY3JvbGwpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFiX2xlZnQgPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgIHRhYlRvU2Nyb2xsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAnJyxcclxuICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYnNfbGVmdCA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArICcnLFxyXG4gICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgcmlnaHRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgICAgICB0YWJfbGVmdCArXHJcbiAgICAgICAgICAgICAgICBwYXJzZUludCh0YWJUb1Njcm9sbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICcnLCAxMCkgLVxyXG4gICAgICAgICAgICAgICAgdGFic19sZWZ0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGVmdFBvc2l0aW9uID0gdGFiX2xlZnQgLSB0YWJzX2xlZnQgLSAxMDtcclxuICAgICAgICAgICAgaWYgKGxlZnRQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRhYihsZWZ0UG9zaXRpb24sIC0xKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyaWdodFBvc2l0aW9uID4gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRhYihcclxuICAgICAgICAgICAgICAgICAgICByaWdodFBvc2l0aW9uIC0gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGggKyAyMCxcclxuICAgICAgICAgICAgICAgICAgICAxXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YiH5o2idGFi5ZCO77yM6YeN5paw6I635Y+W6ZyA6KaB6K+ldGFi5LiL5bel5YW35p2h5oyJ6ZKu55qE6YWN572u5L+h5oGv5Lul5Y+K6ZqQ6JeP5pu05aSa5oyJ6ZKuXHJcbiAgICAgKiDku6Xlj4rojrflj5bor6V0YWLkuIvnmoTlpLTpg6jmianlsZXljLrln59cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRUb29sYmFyQ29uZigpIHtcclxuICAgICAgICBjb25zdCB0YWJDb25maWcgPSB0aGlzLnRhYnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5fYWN0aXZlID09PSB0cnVlO1xyXG4gICAgICAgIH0pWzBdO1xyXG4gICAgICAgIGlmICghdGFiQ29uZmlnIHx8ICF0YWJDb25maWcuaGFzT3duUHJvcGVydHkoJ3Rvb2xiYXInKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJDb25mID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJDb25mID0gdGFiQ29uZmlnLnRvb2xiYXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiOt+WPluivpXRhYuS4i+eahOWktOmDqOaJqeWxleWMuuWfn1xyXG4gICAgICAgIGlmICghdGFiQ29uZmlnIHx8ICF0YWJDb25maWcuaGFzT3duUHJvcGVydHkoJ2ZhcnJpc1RhYnNFeHRlbmREaXJlY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckV4dGVuZENvbmYgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyRXh0ZW5kQ29uZiA9IHRhYkNvbmZpZy5mYXJyaXNUYWJzRXh0ZW5kRGlyZWN0aXZlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDpmpDol4/mm7TlpJrmjInpkq5cclxuICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorqHnrpflt6XlhbfmoI/mmK/lkKbmmL7npLrkuIvmi4nmjInpkq5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCkge1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbDogYW55O1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbFdpZHRoID0gMDtcclxuICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lciB8fCAhdGhpcy50b29sYmFyQ29uZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSB0aGlzLmhhc0luSGVhZENsKCkgPyB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudCA6IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGRpdkVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaW5saW5lLWZsZXgnKTtcclxuICAgICAgICBpZiAoIWRpdkVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyRXh0ZW5kQ29uZikge1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbCA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJzLWhlYWRlci1leHRlbmQnKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZShoZWFkZXJFeHRlbmRFbCwgJ292ZXJmbG93Jyk7XHJcbiAgICAgICAgICAgIGhlYWRlckV4dGVuZEVsV2lkdGggPSBoZWFkZXJFeHRlbmRFbC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5oyJ6ZKu5Zyo5YaF5a655Yy6XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0luSGVhZENsKCkgJiYgdGhpcy5idG5QbGFjZUhvbGRlci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoID4gdG9vbGJhckNvbnRhaW5lci5vZmZzZXRXaWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNJbkhlYWRDbCgpICYmIHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCA+IHRvb2xiYXJDb250YWluZXIub2Zmc2V0V2lkdGggLSBoZWFkZXJFeHRlbmRFbFdpZHRoKSB7XHJcbiAgICAgICAgICAgIC8vIOaMiemSruWcqOWktOmDqOW3peWFt+agj1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorqHnrpfmmL7npLrnmoTmjInpkq7kuKrmlbDlj4rmm7TlpJrkuK3mmL7npLrnmoTmjInpkq7kuKrmlbBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2FsY3VsYXRlQnV0dG9uc1Nob3coKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlckV4dGVuZEVsOiBhbnk7XHJcbiAgICAgICAgbGV0IGhlYWRlckV4dGVuZEVsV2lkdGggPSAwO1xyXG4gICAgICAgIGlmICghdGhpcy50b29sYmFyQ29udGFpbmVyIHx8ICF0aGlzLnRvb2xiYXJDb25mKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9vbGJhckNvbnRhaW5lciA9IHRoaXMuaGFzSW5IZWFkQ2woKSA/IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50IDogdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICBsZXQgZGl2RWwgPSB0b29sYmFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdGFicy1pbmxpbmUtZmxleCcpO1xyXG4gICAgICAgIGxldCBidG5QbGFjZUhvbGRlckVsID0gdGhpcy5idG5QbGFjZUhvbGRlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGxldCBidG5QbGFjZUhvbGRlckJ0bnMgPSBidG5QbGFjZUhvbGRlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xyXG4gICAgICAgIGlmICghZGl2RWwgfHwgYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5q2k5aSE5pyJ5LiqQnVn77yM5aaC5p6c5pivaW5Db250ZW506L+Y5pivaGVhZGVyRXh0ZW5kQ29uZueahOaDheWGteS4i++8jOaMiemSrueahOS9jee9ruW9ouWmgmluSGVhZFxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckV4dGVuZENvbmYpIHtcclxuICAgICAgICAgICAgaGVhZGVyRXh0ZW5kRWwgPSB0b29sYmFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdGFicy1oZWFkZXItZXh0ZW5kJyk7XHJcbiAgICAgICAgICAgIGhlYWRlckV4dGVuZEVsV2lkdGggPSB0aGlzLmhhc0luSGVhZENsKCkgPyBoZWFkZXJFeHRlbmRFbC5vZmZzZXRXaWR0aCA6IDA7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtb3JlQnV0dG9uID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubW9yZWJ0bicpO1xyXG4gICAgICAgIC8vIOiuoeeul+aMiemSrueahOWuveW6piAgICAgIFxyXG4gICAgICAgIGxldCBiYXNpY1N0YXJ0ID0gcGFyc2VJbnQoYnRuUGxhY2VIb2xkZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KTtcclxuICAgICAgICBsZXQgYmFzaWNXaWR0aCA9IHRvb2xiYXJDb250YWluZXIub2Zmc2V0V2lkdGggLSBtb3JlQnV0dG9uLm9mZnNldFdpZHRoIC0gMTIgLSBoZWFkZXJFeHRlbmRFbFdpZHRoO1xyXG4gICAgICAgIGxldCB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIGxldCBrID0gMFxyXG4gICAgICAgIC8vIOWPquacieS4gOS4quaMiemSrlxyXG4gICAgICAgIGlmIChidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgaWYgKGJ0blBsYWNlSG9sZGVyRWwub2Zmc2V0V2lkdGggPiBiYXNpY1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGsgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChrID0gMTsgayA8PSBidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlhoXlrrnotoXlh7os6ICD6JmR5Yiw5oyJ6ZKu5LmL6Ze055qE6Ze06LedXHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PSBidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChidG5QbGFjZUhvbGRlckVsLm9mZnNldFdpZHRoID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgayA9IGsgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGJ0blBsYWNlSG9sZGVyQnRuc1trXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KSAtIGJhc2ljU3RhcnQgPiBiYXNpY1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IGsgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRvb2xiYXJEcm9wZG93bkhpZGRlbjtcclxuICAgICAgICBsZXQgc2hvd0J0bnMgPSBkaXZFbC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGs7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNob3dCdG5zW2ldLCAnZGlzcGxheScsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgbSA9IGs7IG0gPCBzaG93QnRucy5sZW5ndGg7IG0rKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNob3dCdG5zW21dLCAnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzICYmIHRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgIChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA+PSBrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YeN5paw6K6h566X5piv5ZCm5pi+56S65oyJ6ZKu5ZKM5LiL5ouJXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlQ2FsY3VsYXRlQWxsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRhYlBhcmVudFdpZHRoID0gdGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICBpZiAoIXRoaXMuaGlkZUJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgdHIgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRhYlBhcmVudC5uYXRpdmVFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLXJpZ2h0XCIpKTtcclxuICAgICAgICAgICAgY29uc3QgdGwgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRhYlBhcmVudC5uYXRpdmVFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLWxlZnRcIikpO1xyXG4gICAgICAgICAgICB0YWJQYXJlbnRXaWR0aCArPSB0ciArIHRsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oaWRlQnV0dG9ucyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbFdpZHRoIDw9IHRhYlBhcmVudFdpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLmhpZGVEcm9wRG93biA9IHRoaXMuc2hvd0Ryb3BEb3duID8gdGhpcy5oaWRlQnV0dG9ucyA6IHRydWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5oaWRlRHJvcERvd24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25UYWJzID0gW10uY29uY2F0KHRoaXMudGFicyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGFiVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93blRhYnMgPSB0aGlzLmRyb3Bkb3duVGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bJ3RpdGxlJ10uaW5kZXhPZih0aGlzLnNlYXJjaFRhYlRleHQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlU2lkZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjeaWsOiuoeeul+W3puWPs+eahOaPkOekuuaWh+Wtl1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZUNhbHVsYXRlVG9vbHRpcHMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90YWJDb250YWluZXJFbCB8fCB0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdF9yaWdodF90b29sdGlwcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHRfbGVmdF90b29sdGlwcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFsbFRhYnMgPSB0aGlzLl90YWJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWl0ZW0nKTtcclxuICAgICAgICBjb25zdCBsZW4gPSBhbGxUYWJzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBoaWRkZW5UYWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX3Nob3cgIT09IHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBoaWRkZW5UYWJzTGVuZ3RoID0gaGlkZGVuVGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsZWZ0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgYWxsVGFic1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgYWxsVGFic1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArIGxlZnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHJpZ2h0UG9zaXRpb24gPiB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdF9yaWdodF90b29sdGlwcy5wdXNoKHRoaXMudGFic1tpXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdFBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdF9sZWZ0X3Rvb2x0aXBzLnB1c2godGhpcy50YWJzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sZWZ0VG9vbHRpcFRhYnMgPSBbXVxyXG4gICAgICAgICAgICAuY29uY2F0KHRfbGVmdF90b29sdGlwcylcclxuICAgICAgICAgICAgLnNsaWNlKE1hdGgubWF4KDAsIHRfbGVmdF90b29sdGlwcy5sZW5ndGggLSB0aGlzLm1heFRvb2x0aXBMZW4pKTtcclxuICAgICAgICB0aGlzLnJpZ2h0VG9vbHRpcFRhYnMgPSBbXVxyXG4gICAgICAgICAgICAuY29uY2F0KHRfcmlnaHRfdG9vbHRpcHMpXHJcbiAgICAgICAgICAgIC5zbGljZSgwLCBNYXRoLm1pbih0aGlzLm1heFRvb2x0aXBMZW4sIHRfcmlnaHRfdG9vbHRpcHMubGVuZ3RoKSk7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlUlRvb2x0aXAgPSB0aGlzLnJpZ2h0VG9vbHRpcFRhYnMubGVuZ3RoIDwgMTtcclxuICAgICAgICB0aGlzLmRpc2FibGVMVG9vbHRpcCA9IHRoaXMubGVmdFRvb2x0aXBUYWJzLmxlbmd0aCAtIGhpZGRlblRhYnNMZW5ndGggPCAxO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDph43mlrDorqHnrpflt6blj7Pnrq3lpLTnirbmgIFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcmVDYWxjdWxhdGVTaWRlcygpIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVSaWdodCA9XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPj1cclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsV2lkdGggLSB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0aGlzLmRpc2FibGVMZWZ0ID0gdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA8PSAwO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsdWxhdGVUb29sdGlwcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4dpZOWvu+aJvlRhYlxyXG4gICAgICogQHBhcmFtIGlkIElEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2dldFRhYkJ5SWQoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGluZGV4V2lkdGhJZCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHRhYnNXaXRoSWQ6IEZhcnJpc1RhYkNvbXBvbmVudFtdID0gdGhpcy50YWJzLmZpbHRlcihcclxuICAgICAgICAgICAgKHRhYiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0YWIuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhXaWR0aElkLnB1c2goaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRhYjogdGFic1dpdGhJZC5sZW5ndGggPyB0YWJzV2l0aElkWzBdIDogbnVsbCxcclxuICAgICAgICAgICAgaW5kZXg6IGluZGV4V2lkdGhJZC5sZW5ndGggPyBpbmRleFdpZHRoSWRbMF0gOiAtMVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKuWuvemrmOexu+Wei+aYryBzdHJpbmfmiJbogIVudW1iZXIg6Kej5p6Q5a696auYICDlsLrlr7ggKi9cclxuICAgIHJlc29sdmVTaXplKHNpemUpIHtcclxuICAgICAgICBjb25zdCByZWdleCA9IC9weHxlbXxyZW18cHR8JS87XHJcbiAgICAgICAgLy8g6K+05piO5piv5a2X56ym5LiyXHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3Qoc2l6ZSlcclxuICAgICAgICAgICAgPyBgJHtwYXJzZUludChzaXplLCAxMCl9JHtzaXplLm1hdGNoKHJlZ2V4KVswXX1gXHJcbiAgICAgICAgICAgIDogYCR7c2l6ZX1weGA7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICDmuIXnqbp0YWJcclxuICAgICAgICovXHJcbiAgICAvLyByZW1vdmVBbGxUYWIoKSB7XHJcbiAgICAvLyAgICAgdGhpcy50YWJzLnNwbGljZSgwLCB0aGlzLnRhYnMubGVuZ3RoKTtcclxuICAgIC8vIH1cclxuICAgIGhhc0luSGVhZENsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRvb2xiYXJDb25mICYmIHRoaXMudG9vbGJhckNvbmYuaGFzT3duUHJvcGVydHkoJ3Bvc2l0aW9uJykgJiYgdGhpcy50b29sYmFyQ29uZi5oYXNPd25Qcm9wZXJ0eSgnY29udGVudHMnKSAmJiB0aGlzLnRvb2xiYXJDb25mLnBvc2l0aW9uID09PSAnaW5IZWFkJyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckV4dGVuZENvbmYgJiYgISh0aGlzLnRvb2xiYXJDb25mICYmIHRoaXMudG9vbGJhckNvbmYucG9zaXRpb24gPT09ICdpbkNvbnRlbnQnICYmIHRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==