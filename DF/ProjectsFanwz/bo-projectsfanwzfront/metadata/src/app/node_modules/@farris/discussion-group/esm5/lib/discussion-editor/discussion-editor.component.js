/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, Renderer2, Output, EventEmitter, ViewEncapsulation, ChangeDetectorRef, Injector } from '@angular/core';
import { NotifyService } from '@farris/ui-notify';
import { LocaleService } from '@farris/ui-locale';
import { MsgInfo } from './discussion-editor.interface';
import { HttpClient } from '@angular/common/http';
import { of } from 'rxjs';
var DiscussionEditorComponent = /** @class */ (function () {
    function DiscussionEditorComponent(renderer, elementRef, cd, notifyService, injector, http) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.cd = cd;
        this.notifyService = notifyService;
        this.injector = injector;
        this.http = http;
        this.personnelsPrimaryKey = 'id';
        this.personnelsDisplayKey = 'name';
        this.replyPersonnelsDisplayKey = 'userName';
        // @Input() personnels: Array<any> = [];
        // @Input() permissionList: Array<any> = [
        //     { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },
        //     { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }
        // ];
        this.cancelVisible = true;
        this.editHeight = 130;
        this.type = 'user';
        // 人事弹窗列表数据
        this._personnels = [];
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        // 对外
        this.valueChange = new EventEmitter();
        /**
         * 附件预览
         */
        this.filePreview = new EventEmitter();
        /**
         * 附件删除
         */
        this.fileRemove = new EventEmitter();
        this.fileUploadDone = new EventEmitter();
        this.personnelSearch = new EventEmitter();
        this.getOugUsers = new EventEmitter();
        // @ViewChild('searchInput') searchInput;
        // 审批意见
        this.textValue = '';
        // 暂存人员信息
        this.tempPersonnelsValue = '';
        // 暂存部门
        this.tempSectionValue = '';
        // 搜索人事管理弹窗
        this.personModalVisible = false;
        // 选择要发送的人员列表
        this.selectedPersonnels = [];
        // 选择要发送的部门
        this.selectedSection = [];
        // 暂存人员信息，用于搜索
        this.copyPersonnels = [];
        this.innerPersonnels = [];
        this.relativeVisible = false;
        //上传附件是否显示
        this.attachFilesModalVisible = false;
        this.pageSize = 20;
        this.searchPersonnelList = {};
        this.showSearchList = false;
        this.permissionList = [];
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        this.localeService = this.injector.get(LocaleService);
    }
    Object.defineProperty(DiscussionEditorComponent.prototype, "personnels", {
        get: /**
         * @return {?}
         */
        function () {
            return this._personnels;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._personnels = val;
                this.innerPersonnels = this._personnels;
                this.copyPersonnels = this._personnels;
                // this.copyPersonnels = this._personnels;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DiscussionEditorComponent.prototype, "replyUser", {
        get: /**
         * @return {?}
         */
        function () {
            return this._replyUser;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._replyUser = val;
                if (this._replyUser['id']) {
                    this.editorFocus();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DiscussionEditorComponent.prototype, "attachFiles", {
        get: /**
         * @return {?}
         */
        function () {
            return this._attachFiles;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._attachFiles = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        this.renderer.listen(document, 'click', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            self.personModalVisible = false;
            self.relativeVisible = false;
        }));
        // this.copyPersonnels = this.personnels;
        this.el = this.elementRef.nativeElement;
        this.permissionList = [
            { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },
            { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }
        ];
        this.permission = this.permissionList[0];
        this.options = { maxUploads: 3, maxFileSize: 10240, allowedContentTypes: ['.jpg', '.pdf'] };
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
    };
    /**
     * 单个附件上传完成
     * @param ev
     */
    /**
     * 单个附件上传完成
     * @param {?} ev
     * @return {?}
     */
    DiscussionEditorComponent.prototype.fUploadDoneHandler = /**
     * 单个附件上传完成
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        this.fileUploadDone.emit(ev);
    };
    /**
     * 上传附件中单个附件删除完成
     * @param ev
     */
    /**
     * 上传附件中单个附件删除完成
     * @param {?} ev
     * @return {?}
     */
    DiscussionEditorComponent.prototype.fUploadRemovedHandler = /**
     * 上传附件中单个附件删除完成
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        console.log('fUploadRemovedHandler');
        console.log(ev);
    };
    /**附件列表中预览 */
    /**
     * 附件列表中预览
     * @param {?} info
     * @return {?}
     */
    DiscussionEditorComponent.prototype.filePreviewEventHandler = /**
     * 附件列表中预览
     * @param {?} info
     * @return {?}
     */
    function (info) {
        this.filePreview.emit(info);
    };
    /**附件列表中删除 */
    /**
     * 附件列表中删除
     * @param {?} file
     * @return {?}
     */
    DiscussionEditorComponent.prototype.fileRemoveEventHandler = /**
     * 附件列表中删除
     * @param {?} file
     * @return {?}
     */
    function (file) {
        this.fileRemove.emit(file);
    };
    // 文本框失去焦点触发
    // 文本框失去焦点触发
    /**
     * @param {?=} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.setTextValue = 
    // 文本框失去焦点触发
    /**
     * @param {?=} e
     * @return {?}
     */
    function (e) {
        if (e === void 0) { e = null; }
        if (e) {
            // console.log(e.target.innerHTML);
            this.tempTextValue = e.target.innerHTML;
            this.textValue = this.tempTextValue;
        }
        // if (this.tempTextValue) {
        //     this.textValue = this.tempTextValue
        // }
        if (this.tempPersonnelsValue) {
            this.textValue += this.tempPersonnelsValue;
        }
        if (this.tempSectionValue) {
            this.textValue += this.tempSectionValue;
        }
        this.tempTextValue = '';
        this.tempPersonnelsValue = '';
        this.tempSectionValue = '';
    };
    // 监听键盘事件, 主要是用于删除@人
    // 监听键盘事件, 主要是用于删除@人
    /**
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.listenEditorValueChange = 
    // 监听键盘事件, 主要是用于删除@人
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.tempTextValue = e.target.innerHTML;
        /** @type {?} */
        var children = e.target.children;
        /** @type {?} */
        var childrenId = [];
        for (var i = 0; i < children.length; i++) {
            childrenId.push(children[i].id);
        }
        this.selectedPersonnels.forEach((/**
         * @param {?} personnel
         * @param {?} index
         * @return {?}
         */
        function (personnel, index) {
            if (!childrenId.includes(personnel[_this.personnelsPrimaryKey])) {
                _this.selectedPersonnels.splice(index, 1);
            }
        }));
        this.selectedSection.forEach((/**
         * @param {?} section
         * @param {?} index
         * @return {?}
         */
        function (section, index) {
            if (!childrenId.includes(section[_this.personnelsPrimaryKey])) {
                _this.selectedSection.splice(index, 1);
            }
        }));
        if (!this.tempTextValue) {
            this.tempTextValue = '';
        }
    };
    /**
     * 搜索人员
     */
    /**
     * 搜索人员
     * @return {?}
     */
    DiscussionEditorComponent.prototype.serachPersonnel = /**
     * 搜索人员
     * @return {?}
     */
    function () {
        var _this = this;
        // if (this.personnelText) {
        //     this.innerPersonnels = this.copyPersonnels.filter(item => {
        //         if(item[this.personnelsDisplayKey]){
        //             return item[this.personnelsDisplayKey].indexOf(this.personnelText) !== -1;
        //         }
        //     })
        // }
        // else {
        //     this.innerPersonnels = this.copyPersonnels;
        // }
        if (this.personnelText) {
            this.showSearchList = true;
            this.getSearchData(this.personnelText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    _this.searchPersonnelList = d;
                    _this.setPersonModalPosition();
                }
            }));
        }
        else {
            this.showSearchList = false;
        }
        // this.searchInput.nativeElement.blur();
        //暂时注释掉服务器端查询
        // this.personnelSearch.emit(this.personnelText);
    };
    /**
     * 搜索下一页
     */
    /**
     * 搜索下一页
     * @return {?}
     */
    DiscussionEditorComponent.prototype.getMoreSearchData = /**
     * 搜索下一页
     * @return {?}
     */
    function () {
        var _this = this;
        this.getSearchData(this.personnelText, this.searchPersonnelList.pageIndex + 1).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            if (d.hasOwnProperty("users")) {
                _this.searchPersonnelList.pageIndex = d['pageIndex'];
                _this.searchPersonnelList['users'] = tslib_1.__spread(_this.searchPersonnelList['users'], d['users']);
            }
        }));
    };
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionEditorComponent.prototype.getSearchData = /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (text, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        if (this.personSearchUrl) {
            /** @type {?} */
            var url = this.personSearchUrl + "?param=" + text + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            //console.log(url);
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    DiscussionEditorComponent.prototype.personnelChecked = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        item.active = !item.active;
        this.innerPersonnels = this.innerPersonnels.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        this.cd.markForCheck();
        this.appendPersonnels();
    };
    // 增加@人员
    // 增加@人员
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendPersonnels = 
    // 增加@人员
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var selectedList = [];
        if (!this.showSearchList) {
            selectedList = this.innerPersonnels.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.active === true; }));
        }
        else {
            selectedList = this.searchPersonnelList['users'].filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.active === true; }));
        }
        if (selectedList.length) {
            this.appendPersonnel(selectedList);
        }
        this.resetPersonnels();
        this.setTextValue();
        this.personModalVisible = false;
    };
    //高级搜索人员添加
    //高级搜索人员添加
    /**
     * @param {?} listData
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendPersonnelsList = 
    //高级搜索人员添加
    /**
     * @param {?} listData
     * @return {?}
     */
    function (listData) {
        if (listData.length) {
            this.appendPersonnel(listData, true);
        }
        this.setTextValue();
    };
    //循环增加人员
    //循环增加人员
    /**
     * @param {?} listData
     * @param {?=} external
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendPersonnel = 
    //循环增加人员
    /**
     * @param {?} listData
     * @param {?=} external
     * @return {?}
     */
    function (listData, external) {
        var _this = this;
        if (external === void 0) { external = false; }
        listData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (_this.selectedPersonnels.length && _this._isInArray(item[_this.personnelsPrimaryKey], _this.personnelsPrimaryKey, _this.selectedPersonnels)) {
                return;
            }
            else {
                //if (!external) {
                _this.tempPersonnelsValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[_this.personnelsPrimaryKey] + '" userid="' + item[_this.personnelsPrimaryKey] + '">@' + item[_this.personnelsDisplayKey] + '</a>&nbsp;';
                // }
                // else {
                //     this.tempPersonnelsValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[this.personnelsPrimaryKey] + '" userid="' + item[this.personnelsPrimaryKey] + '">@' + item[this.replyPersonnelsDisplayKey] + '</a>';
                // }
                _this.selectedPersonnels.push(item);
            }
        }));
    };
    /**
     * 添加部门
     * @param listData
     */
    /**
     * 添加部门
     * @param {?} listData
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendSectionList = /**
     * 添加部门
     * @param {?} listData
     * @return {?}
     */
    function (listData) {
        if (listData.length) {
            this.appendSection(listData);
        }
        this.setTextValue();
    };
    /**
     * @param {?} listData
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendSection = /**
     * @param {?} listData
     * @return {?}
     */
    function (listData) {
        var _this = this;
        listData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (_this.selectedSection.length && _this._isInArray(item[_this.personnelsPrimaryKey], _this.personnelsPrimaryKey, _this.selectedSection)) {
                return;
            }
            else {
                _this.tempSectionValue += '<a name="org" contenteditable="false" class="at-org" id="' + item[_this.personnelsPrimaryKey] + '" orgid="' + item[_this.personnelsPrimaryKey] + '">@' + item['name'] + '</a>&nbsp;';
                _this.selectedSection.push(item);
            }
        }));
    };
    // 判断是否在数组
    // 判断是否在数组
    /**
     * @private
     * @param {?} value
     * @param {?} fieldInArray
     * @param {?} array
     * @return {?}
     */
    DiscussionEditorComponent.prototype._isInArray = 
    // 判断是否在数组
    /**
     * @private
     * @param {?} value
     * @param {?} fieldInArray
     * @param {?} array
     * @return {?}
     */
    function (value, fieldInArray, array) {
        if (!value || !fieldInArray) {
            return false;
        }
        return array.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[fieldInArray]; })) === -1 ? false : true;
    };
    /**
     * 关闭人事管理弹窗
     */
    /**
     * 关闭人事管理弹窗
     * @return {?}
     */
    DiscussionEditorComponent.prototype.resetPersonnels = /**
     * 关闭人事管理弹窗
     * @return {?}
     */
    function () {
        this.showSearchList = false;
        this.personModalVisible = false;
        this.innerPersonnels = this.copyPersonnels;
        if (this.innerPersonnels.length) {
            this.innerPersonnels.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.active = false; }));
        }
        this.personnelText = '';
        // this.stopBubble(e);
    };
    /**
     * 打开人员管理
     * @param e 事件
     */
    /**
     * 打开人员管理
     * @param {?} e 事件
     * @return {?}
     */
    DiscussionEditorComponent.prototype.openModalPerson = /**
     * 打开人员管理
     * @param {?} e 事件
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.personModalVisible = !this.personModalVisible;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.personModalVisible) {
                _this.setPersonModalPosition();
            }
        }), 0);
        // this.getPersonnelList();
        this.stopBubble(e);
    };
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.setPersonModalPosition = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var winH = window.innerHeight;
        /** @type {?} */
        var ModalBottom = this.personModal.nativeElement.getBoundingClientRect().bottom;
        if (winH < ModalBottom) {
            this.personModal.nativeElement.scrollIntoView(false);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.openModalPermission = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.relativeVisible = !this.relativeVisible;
        this.stopBubble(e);
    };
    /**
     * 打开上传附件
     */
    /**
     * 打开上传附件
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.openModalFile = /**
     * 打开上传附件
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.attachFilesModalVisible = !this.attachFilesModalVisible;
        this.stopBubble(e);
    };
    // 阻止冒泡
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.stopBubble = 
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    };
    /**
     * 提交评语
     */
    /**
     * 提交评语
     * @return {?}
     */
    DiscussionEditorComponent.prototype.submitApproval = /**
     * 提交评语
     * @return {?}
     */
    function () {
        if (!this.textValue) {
            /** @type {?} */
            var notEmptyText = this.localeService.getValue('discussionGroup.notEmpty');
            if (notEmptyText) {
                this.notifyService.error(notEmptyText);
            }
            return;
        }
        /** @type {?} */
        var editAttachFiles = [];
        if (this.attachFiles && this.attachFiles.length) {
            this.attachFiles.forEach((/**
             * @param {?} file
             * @return {?}
             */
            function (file) {
                /** @type {?} */
                var id = file['id'];
                /** @type {?} */
                var name = file['name'];
                /** @type {?} */
                var size = file['size'];
                /** @type {?} */
                var metadataId = file['extend']['metadataId'];
                /** @type {?} */
                var attachFile = {
                    id: id,
                    name: name,
                    size: size,
                    metadataId: metadataId
                };
                editAttachFiles.push(attachFile);
            }));
        }
        this.valueChange.emit({
            msgInfo: MsgInfo.Confirm,
            text: this.textValue,
            mailTos: this.selectedPersonnels,
            mailToSections: this.selectedSection,
            visibility: this.permission.value,
            parentId: (this.replyUser && this.replyUser.hasOwnProperty('id')) ? this.replyUser.id : null,
            attachFiles: editAttachFiles.length ? editAttachFiles : null
        });
        this.textValue = '';
        this.selectedPersonnels = [];
        this.selectedSection = [];
        this.attachFiles = [];
        this.replyUser = {};
    };
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.cancel = /**
     * @return {?}
     */
    function () {
        this.valueChange.emit({
            msgInfo: MsgInfo.Cancel,
            text: null,
            mailTos: [],
            mailToSections: [],
            visibility: null,
            parentId: null,
            attachFiles: null
        });
        this.textValue = '';
        this.selectedPersonnels = [];
        this.selectedSection = [];
        this.attachFiles = [];
        this.replyUser = {};
    };
    /**修改查看权限 */
    /**
     * 修改查看权限
     * @param {?} value
     * @return {?}
     */
    DiscussionEditorComponent.prototype.changePermission = /**
     * 修改查看权限
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.permission = this.permissionList.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.value === value; }));
        this.relativeVisible = false;
    };
    //获得焦点
    //获得焦点
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.editorFocus = 
    //获得焦点
    /**
     * @return {?}
     */
    function () {
        this.editor.nativeElement.focus();
    };
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     */
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     * @param {?} event
     * @return {?}
     */
    DiscussionEditorComponent.prototype.selectionsChangePar = 
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     * @param {?} event
     * @return {?}
     */
    function (event) {
        //this.resetPersonnels();
        if (event.data.users.length) {
            /** @type {?} */
            var userList_1 = [];
            event.data.users.forEach((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                userList_1.push(user.data);
            }));
            this.appendPersonnelsList(userList_1);
        }
        if (event.data.section.length) {
            /** @type {?} */
            var sectionList_1 = [];
            event.data.section.forEach((/**
             * @param {?} sec
             * @return {?}
             */
            function (sec) {
                sectionList_1.push(sec.data);
            }));
            this.appendSectionList(sectionList_1);
        }
        this.selectionsChange.emit(event);
    };
    /**高级人员中选中某行 */
    /**
     * 高级人员中选中某行
     * @param {?} event
     * @return {?}
     */
    DiscussionEditorComponent.prototype.lineDataChangePar = /**
     * 高级人员中选中某行
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.lineDataChange.emit(event);
    };
    /**获得占位头像 */
    /**
     * 获得占位头像
     * @param {?} item
     * @return {?}
     */
    DiscussionEditorComponent.prototype.getAvatar = /**
     * 获得占位头像
     * @param {?} item
     * @return {?}
     */
    function (item) {
        if (item && item[this.personnelsDisplayKey]) {
            /** @type {?} */
            var str = item[this.personnelsDisplayKey];
            return str.substring(str.length - 2, str.length);
        }
        else {
            return '';
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DiscussionEditorComponent.prototype.ougUsers = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.getOugUsers.emit(event);
    };
    DiscussionEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-discussion-editor',
                    template: "<div class=\"farris-discussion-group-reply-tip\" *ngIf=\"replyUser && replyUser.id\">\r\n    {{ 'discussionGroup.reply' | locale }} &nbsp;\r\n    <span class=\"farris-discussion-group-reply-tip-name\">\r\n        {{replyUser[replyPersonnelsDisplayKey]}}\r\n    </span>\r\n    \uFF1A\r\n</div>\r\n<div class=\"f-discussion-group-edit\">\r\n    <div class=\"f-discussion-group-edit-container\" [ngStyle]=\"{'height': editHeight + 'px'}\">\r\n        <div class=\"textarea-editor\" #editor (keyup)=\"listenEditorValueChange($event)\" (blur)=\"setTextValue($event)\"\r\n            contenteditable=\"true\" [innerHTML]=\"textValue | safeHtml\"></div>\r\n    </div>\r\n    <!-- \u9644\u4EF6\u90E8\u5206 <div class=\"f-discussion-group-edit-files\" *ngIf=\"attachFiles && attachFiles.length\">\r\n        <f-file-preview class=\"d-flex flex-wrap\" [itemCls]=\"'demo-view-item'\" [fileInfos]=\"attachFiles\"\r\n            (filePreviewEvent)=\"filePreviewEventHandler($event)\" (fileRemoveEvent)=\"fileRemoveEventHandler($event)\"\r\n            #filePreview>\r\n            <ng-template filePreviewListTypeTemplate let-data let-readonly=\"readonly\">\r\n                <div class=\"ffilepreview--item-detail\">\r\n                    <div class=\"ffilepreview--item-icon\">\r\n                        <span class=\"ffilepreview--filetype-icon\" [ngClass]=\"filePreview.getFileTypeClassName(data.name)\"></span>\r\n                    </div>\r\n                    <div class=\"ffilepreview--item-content\">\r\n                        <a class=\"item-content--title\" [title]=\"data.name\"\r\n                            (click)=\"filePreview.filePreviewHandler($event,data)\">{{data.name}}</a>\r\n                        <div class=\"item-content--toolbar f-text-light\">\r\n                            <button class=\"btn btn-link\" (click)=\"filePreview.filePreviewHandler($event,data)\">\r\n                                <span class=\"f-icon f-icon-preview\"></span>\u9884\u89C8\r\n                            </button>\r\n                            <button class=\"btn btn-link\" (click)=\"filePreview.fileRemoveHandler($event,data)\">\r\n                                <span class=\"f-icon f-icon-delete\"></span>\u5220\u9664\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n        </f-file-preview>\r\n    </div> -->\r\n    <div class=\"f-discussion-group-edit-footer\">\r\n        <div class=\"f-discussion-group-edit-toolbar\">\r\n            <!-- <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-file\" (click)=\"openModalFile($event)\">\r\n                <div class=\"toolbar-item-text\">\r\n                    <span class=\"toolbar-icon f-icon f-icon-attachment\"></span>\r\n                    <span class=\"toolbar-text\">\u9644\u4EF6</span>\r\n                </div>\r\n            </div> -->\r\n            <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-about\">\r\n                <div class=\"toolbar-item-text\" (click)=\"openModalPerson($event)\">\r\n                    <span class=\"toolbar-icon\">@</span>\r\n                    <span class=\"toolbar-text\">{{ 'discussionGroup.colleague' | locale }}</span>\r\n                </div>\r\n                <div class=\"f-discussion-group-about-dropdown\" *ngIf=\"personModalVisible\" (click)=\"stopBubble($event)\" #personModal>\r\n                    <div class=\"f-discussion-group-about-search\">\r\n                        <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"personnelText\" (enterHandle)=\"serachPersonnel()\" (clickHandle)=\"serachPersonnel()\" (valueChange)=\"serachPersonnel()\"></input-group>\r\n                    </div>\r\n                    <div class=\"f-discussion-group-about-content\">\r\n                        <div class=\"f-discussion-group-about-used\" [hidden]=\"showSearchList\">\r\n                            <ul class=\"f-discussion-group-about-dropdown-list\">\r\n                                <ng-template [ngIf]=\"innerPersonnels.length\">\r\n                                    <li *ngFor=\"let item of innerPersonnels\" (click)=\"item.active = !item.active\" class=\"d-flex f-discussion-group-about-dropdown-list-item\"\r\n                                        [class.active]=\"item.active\">\r\n                                        <span class=\"f-icon f-icon-check\"></span>\r\n                                        <img [src]=\"item.imgData\" class=\"about-list-item-avatar\" *ngIf=\"item.imgData\"/>\r\n                                        <div class=\"about-list-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n                                        <div class=\"f-discussion-group-about-dropdown-list-detail f-utils-fill\">\r\n                                            <div class=\"about-list-detail-text\">{{item[personnelsDisplayKey]}}</div>\r\n                                            <div class=\"about-list-detail-subtext\">{{item.email}}</div>\r\n                                        </div>\r\n                                    </li>\r\n                                </ng-template>\r\n                                <ng-template [ngIf]=\"!innerPersonnels.length\">\r\n                                    <li class=\"f-discussion-group-about-dropdown-list-item about-dropdown-list-item-empty\">{{ 'discussionGroup.emptyMessage' | locale }}</li>\r\n                                </ng-template>\r\n                            </ul>        \r\n                        </div>\r\n                        <div class=\"f-discussion-group-about-searchlist\" [hidden]=\"!showSearchList\">\r\n                            <ul class=\"f-discussion-group-about-dropdown-list\">\r\n                                <ng-template [ngIf]=\"searchPersonnelList && searchPersonnelList.users && searchPersonnelList.users.length\">\r\n                                    <li *ngFor=\"let item of searchPersonnelList['users']\" (click)=\"item.active = !item.active\" class=\"d-flex f-discussion-group-about-dropdown-list-item\"\r\n                                        [class.active]=\"item.active\">\r\n                                        <span class=\"f-icon f-icon-check\"></span>\r\n                                        <img [src]=\"item.imgData\" class=\"about-list-item-avatar\" *ngIf=\"item.imgData\"/>\r\n                                        <div class=\"about-list-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n                                        <div class=\"f-discussion-group-about-dropdown-list-detail f-utils-fill\">\r\n                                            <div class=\"about-list-detail-text\">{{item[personnelsDisplayKey]}}</div>\r\n                                            <!-- <div class=\"about-list-detail-subtext\">{{item.email}}</div> -->\r\n                                            <div class=\"about-list-detail-subtext\">\r\n                                                <span [innerHTML]=\"item | getOrgText:sectionData\"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"searchPersonnelList.pageIndex < searchPersonnelList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                    </div>\r\n                                </ng-template>\r\n                                <ng-template [ngIf]=\"searchPersonnelList && searchPersonnelList.users && !searchPersonnelList.users.length\">\r\n                                    <li class=\"f-discussion-group-about-dropdown-list-item\">{{ 'discussionGroup.emptyMessage' | locale }}</li>\r\n                                </ng-template>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-about-list-btns d-flex\">\r\n                        <div class=\"f-about-list-btns-left\">\r\n                            <farris-discussion-personnel \r\n                            [sectionData]=\"sectionData\"\r\n                            [orgUrl]=\"orgUrl\"\r\n                            [personSearchUrl]=\"personSearchUrl\"\r\n                            (selectionsChange)=\"selectionsChangePar($event)\"\r\n                            (lineDataChange)=\"lineDataChangePar($event)\"\r\n                            (ougUsers)=\"ougUsers($event)\"\r\n                            ></farris-discussion-personnel>\r\n                        </div>\r\n                        <div class=\"f-about-list-btns-right\">\r\n                            <button class=\"btn btn-secondary\" (click)=\"resetPersonnels()\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n                            <button class=\"btn btn-primary\" (click)=\"appendPersonnels()\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-dropdown\">\r\n                <div class=\"toolbar-dropdown-text\" (click)=\"openModalPermission($event)\">\r\n                    <span class=\"toolbar-text\">{{permission.text}}</span>\r\n                    <span class=\"f-icon f-icon-collapse toolbar-icon\"></span>\r\n                </div>\r\n                <div class=\"toolbar-dropdown-list dropdownlist\" *ngIf=\"relativeVisible\">\r\n                    <ul *ngIf=\"permissionList && permissionList.length\">\r\n                        <li *ngFor=\"let item of permissionList\" class=\"dropdown-item\" [class.active]=\"permission?.value === item.value\"\r\n                            (click)=\"changePermission(item.value)\">{{item.text}}</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-discussion-group-edit-btns\">\r\n            <button class=\"btn btn-link f-discussion-cancel\" *ngIf=\"cancelVisible\" (click)=\"cancel()\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n            <button class=\"btn btn-primary\" (click)=\"submitApproval()\">{{ 'discussionGroup.submit' | locale }}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- <div class=\"f-discussion-group-file-upload\" [hidden]=\"!attachFilesModalVisible\">\r\n    <f-file-upload\r\n        (fUploadDoneEvent)=\"fUploadDoneHandler($event)\"\r\n        (fUploadRemovedEvent)=\"fUploadRemovedHandler($event)\">\r\n    </f-file-upload>\r\n</div> -->",
                    encapsulation: ViewEncapsulation.None,
                    styles: [":host{display:block}.f-discussion-group-edit{border:1px solid #dcdcdc;background:#fff}.f-discussion-group-edit .f-discussion-group-edit-container{width:100%;position:relative}.f-discussion-group-edit .f-discussion-group-edit-container .textarea-editor{width:100%;height:100%;padding:8px;margin:0 auto;outline:0;overflow-y:auto;word-break:break-all;white-space:normal;resize:none}.f-discussion-group-edit .f-discussion-group-edit-container .textarea-editor a{color:#3487e3}.f-discussion-group-edit .f-discussion-group-edit-footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between;padding:10px 14px;background:#f7f7f7}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;flex-wrap:wrap}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item{cursor:pointer;color:rgba(0,0,0,.65)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-item-text{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;line-height:22px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-text{margin-left:2px;font-size:14px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-icon{color:#667580;font-size:16px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-file{margin-right:12px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about{position:relative;margin-right:32px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown{position:absolute;top:calc(100% + 6px);left:0;width:300px;padding-top:16px;z-index:999;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list{max-height:282px;margin-top:10px;overflow-y:auto}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar{width:7px;height:7px;background-color:#8e8e8e}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar-track{border-radius:0;background-color:#fff;border:0;background-clip:padding-box;border-right:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar-thumb{border-radius:3px;background-color:#dbdbdb;border:0;background-clip:content-box;opacity:.6;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item{padding:3px 14px;list-style:none;-webkit-box-align:center;align-items:center}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail{margin-left:6px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail .about-list-detail-text{line-height:20px;font-size:12px;color:#0a131a;margin:0 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail .about-list-detail-subtext{font-size:12px;color:#8f9ca6;line-height:20px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-icon-check{border:1px solid #d8d9d9;color:#fff;font-size:15px;border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-icon-check::before{content:''}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.active .f-icon-check{border:none;background:#4c91ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.active .f-icon-check::before{content:'\\e118'}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .about-list-item-avatar{display:block;width:30px;height:30px;margin-left:6px;border-radius:50%;overflow:hidden}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .about-list-item-avatar-tip{width:32px;height:32px;margin-left:6px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item:hover{background:#e6f7ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.about-dropdown-list-item-empty{cursor:default}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.about-dropdown-list-item-empty:hover{background:#fff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-search{padding:0 14px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns{-webkit-box-pack:justify;justify-content:space-between;background:#faf9f9;border-top:1px solid #efefef;padding:10px 15px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns .btn{margin-right:10px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns .btn:last-child{margin-right:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown{position:relative}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-text{cursor:pointer}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-icon{color:rgba(0,0,0,.25)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-text{margin-left:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list{position:absolute;left:0;top:calc(100% + 6px);z-index:999;padding:2px 0;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul{max-width:220px;overflow-y:auto}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul li{font:14px/28px Microsoft yahei;padding:0 15px 0 10px;word-break:keep-all}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul li:hover{background:#e6f7ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-btns{flex-shrink:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-btns .f-discussion-cancel{margin-right:12px;font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-edit .f-discussion-group-edit-files{padding:10px 14px 0}.f-discussion-group-edit .f-discussion-group-edit-files .ffilepreview--filetype-icon{width:32px;height:32px}.farris-discussion-group-reply-tip{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:10px;font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-file-upload{margin-top:10px}.f-discussion-dialog-content{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;height:100%;padding:14px;overflow:hidden}.f-discussion-dialog-content-left{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:600px;height:100%;padding:0}.f-discussion-dialog-content-left .f-discussion-personnel-search{flex-shrink:0;position:relative;margin-bottom:7px}.f-discussion-dialog-content-left .f-discussion-tab-content{border:1px solid #dcdcdc;border-radius:2px;padding:12px 0 7px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs{flex-shrink:0;position:relative;width:100%;height:32px;padding:0 12px;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list{width:100%;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item{display:-webkit-box;display:flex;flex-wrap:nowrap;flex-shrink:0;-webkit-box-align:center;align-items:center;line-height:20px;font-size:14px;color:rgba(0,0,0,.85);cursor:pointer}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item .crumbs-text{padding:0 2px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item:first-child .crumbs-text{padding-left:0}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item.crumbs-list-item-disabled{color:rgba(0,0,0,.55)}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-ellipsis{-webkit-box-align:center;align-items:center;position:absolute;left:12px;top:0;width:30px;height:32px;line-height:32px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-padding{padding-left:30px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content.f-discussion-personnel-content-hide{display:none!important}.f-discussion-dialog-content-right{height:100%;margin-left:14px;padding:0;border:1px solid #dcdcdc;border-radius:2px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;height:36px;padding:0 14px;background:#fafafa}.f-discussion-dialog-content-right .f-discussion-selected-personnel-header-text{font-size:14px;line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content{padding:8px 0}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;padding:6px 12px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-text{line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-text .f-discussion-selected-name{font-size:14px;color:rgba(0,0,0,.85)}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-tip{font-size:12px;color:rgba(0,0,0,.35);line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-remove{display:none;color:#388fff;cursor:pointer}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item:hover{background:#f3fbff}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item:hover .f-discussion-selected-item-remove{display:block}.f-discussion-dialog-content .f-discussion-personnel-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:3px 14px 3px 3px;cursor:pointer}.f-discussion-dialog-content .f-discussion-personnel-item-avatar{flex-shrink:0;width:36px;height:36px;margin-right:5px;border-radius:50%;overflow:hidden}.f-discussion-dialog-content .f-discussion-personnel-item-avatar img{display:block;width:100%}.f-discussion-dialog-content .f-discussion-personnel-item-text{flex-shrink:1;-webkit-box-flex:1;flex-grow:1;flex-basis:0;padding-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.f-discussion-dialog-content .f-discussion-personnel-item-text .f-discussion-personnel-name{line-height:20px;font-size:12px;color:#0a131a}.f-discussion-dialog-content .f-discussion-personnel-item-text .f-discussion-personnel-mail{line-height:20px;font-size:12px;color:#8f9ca6}.f-discussion-dialog-content .f-discussion-personnel-item-remove{display:none}.f-discussion-dialog-content .f-discussion-personnel-item:hover{background:#f3fbff}.f-discussion-dialog-content .f-discussion-personnel-item:hover .f-discussion-personnel-item-remove{display:block}.f-discussion-dialog-content .f-discussion-personnel-item.active{background:#def1ff}.f-discussion-dialog-content .f-discussion-personnel-item.selected{background:#fff;cursor:not-allowed}.f-discussion-dialog-content .f-discussion-personnel-item.selected .f-discussion-personnel-mail,.f-discussion-dialog-content .f-discussion-personnel-item.selected .f-discussion-personnel-name{color:#c1c1c1}.f-discussion-dialog-content .f-discussion-personnel-empty{padding:3px 14px;list-style:none;-webkit-box-align:center;align-items:center}.f-discussion-dialog-content .f-discussion-section-list-empty{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100%}.f-discussion-dialog-content .f-discussion-section-list-empty .f-icon{margin-bottom:8px;font-size:26px;color:#e2e6f0}.f-discussion-dialog-content .f-discussion-section-list-empty .section-list-empty-text{font-size:13px;color:rgba(0,0,0,.25)}.f-discussion-dialog-content .f-discussion-personnel-item-tip{width:36px;height:36px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-dialog-content .f-discussion-section-list .section-list-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;height:32px;padding:0 12px;cursor:pointer}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-name{font-size:14px;color:rgba(0,0,0,.85);line-height:32px}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-next{flex-shrink:0;position:relative;padding-left:20px;padding-right:10px;line-height:20px;font-size:12px;color:#388fff;cursor:pointer}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-next::before{position:absolute;left:0;top:50%;width:1px;height:12px;margin-top:-6px;background:#d9d9d9;content:''}.f-discussion-dialog-content .f-discussion-section-list .section-list-item:hover{background:#f3f8ff}.f-discussion-dialog-content .f-discussion-section-list .section-list-item .section-list-item-checkbox.custom-control.custom-checkbox{margin-right:0;padding:0;margin-bottom:0}.f-discussion-dialog-content .f-discussion-section-list .person-list-item{height:auto;padding-top:7px;padding-bottom:6px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-img{flex-shrink:0;width:36px;height:36px;border-radius:50%;overflow:hidden}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-img img{display:block;width:100%;height:100%}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content{padding-left:6px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content .section-list-item-name{font-size:14px;color:rgba(0,0,0,.85);line-height:20px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content .section-list-item-tip{font-size:12px;color:rgba(0,0,0,.35);line-height:20px}.f-discussion-person-list-page{padding:10px 0;text-align:center;cursor:pointer}.f-discussion-person-list-page .section-page-text{font-size:14px;color:rgba(0,0,0,.55)}.f-discussion-person-list-page:hover .section-page-text{color:rgba(0,0,0,.85)}"]
                }] }
    ];
    /** @nocollapse */
    DiscussionEditorComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: NotifyService },
        { type: Injector },
        { type: HttpClient }
    ]; };
    DiscussionEditorComponent.propDecorators = {
        personnelsPrimaryKey: [{ type: Input }],
        personnelsDisplayKey: [{ type: Input }],
        replyPersonnelsDisplayKey: [{ type: Input }],
        cancelVisible: [{ type: Input }],
        editHeight: [{ type: Input }],
        type: [{ type: Input }],
        orgUrl: [{ type: Input }],
        personSearchUrl: [{ type: Input }],
        treeIdField: [{ type: Input }],
        treeDisplayText: [{ type: Input }],
        sectionData: [{ type: Input }],
        personnels: [{ type: Input }],
        replyUser: [{ type: Input }],
        attachFiles: [{ type: Input }],
        selectionsChange: [{ type: Output }],
        lineDataChange: [{ type: Output }],
        valueChange: [{ type: Output }],
        filePreview: [{ type: Output }],
        fileRemove: [{ type: Output }],
        fileUploadDone: [{ type: Output }],
        personnelSearch: [{ type: Output }],
        getOugUsers: [{ type: Output }],
        editor: [{ type: ViewChild, args: ['editor',] }],
        personModal: [{ type: ViewChild, args: ['personModal',] }]
    };
    return DiscussionEditorComponent;
}());
export { DiscussionEditorComponent };
if (false) {
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelsPrimaryKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelsDisplayKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.replyPersonnelsDisplayKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.cancelVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.editHeight;
    /** @type {?} */
    DiscussionEditorComponent.prototype.type;
    /** @type {?} */
    DiscussionEditorComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionEditorComponent.prototype.treeIdField;
    /** @type {?} */
    DiscussionEditorComponent.prototype.treeDisplayText;
    /** @type {?} */
    DiscussionEditorComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionEditorComponent.prototype.options;
    /** @type {?} */
    DiscussionEditorComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionEditorComponent.prototype.sectiontreeData;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype._personnels;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype._replyUser;
    /** @type {?} */
    DiscussionEditorComponent.prototype._attachFiles;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionEditorComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionEditorComponent.prototype.valueChange;
    /**
     * 附件预览
     * @type {?}
     */
    DiscussionEditorComponent.prototype.filePreview;
    /**
     * 附件删除
     * @type {?}
     */
    DiscussionEditorComponent.prototype.fileRemove;
    /** @type {?} */
    DiscussionEditorComponent.prototype.fileUploadDone;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelSearch;
    /** @type {?} */
    DiscussionEditorComponent.prototype.getOugUsers;
    /** @type {?} */
    DiscussionEditorComponent.prototype.editor;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personModal;
    /** @type {?} */
    DiscussionEditorComponent.prototype.textValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempTextValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempPersonnelsValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempSectionValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personModalVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectedPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectedSection;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelText;
    /** @type {?} */
    DiscussionEditorComponent.prototype.copyPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.innerPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.el;
    /** @type {?} */
    DiscussionEditorComponent.prototype.token;
    /** @type {?} */
    DiscussionEditorComponent.prototype.relativeVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.permission;
    /** @type {?} */
    DiscussionEditorComponent.prototype.attachFilesModalVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionEditorComponent.prototype.searchPersonnelList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.permissionList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.localeService;
    /** @type {?} */
    DiscussionEditorComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1lZGl0b3IuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tZWRpdG9yL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRWpLLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFlLE9BQU8sRUFBa0IsTUFBTSwrQkFBK0IsQ0FBQztBQUNyRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUxQjtJQTJISSxtQ0FDWSxRQUFtQixFQUNuQixVQUFzQixFQUN0QixFQUFxQixFQUNyQixhQUE0QixFQUM1QixRQUFrQixFQUNsQixJQUFnQjtRQUxoQixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBMUhuQix5QkFBb0IsR0FBVyxJQUFJLENBQUM7UUFDcEMseUJBQW9CLEdBQVcsTUFBTSxDQUFDO1FBQ3RDLDhCQUF5QixHQUFXLFVBQVUsQ0FBQzs7Ozs7O1FBTS9DLGtCQUFhLEdBQVksSUFBSSxDQUFDO1FBQzlCLGVBQVUsR0FBVyxHQUFHLENBQUM7UUFFekIsU0FBSSxHQUFXLE1BQU0sQ0FBQzs7UUFnQnZCLGdCQUFXLEdBQWUsRUFBRSxDQUFDOzs7O1FBMEMzQixxQkFBZ0IsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUUzQyxtQkFBYyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7O1FBRXpDLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQWUsQ0FBQzs7OztRQUU5QyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFFakMsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDaEMsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ3BDLG9CQUFlLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNyQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7OztRQUszQyxjQUFTLEdBQVcsRUFBRSxDQUFDOztRQUl2Qix3QkFBbUIsR0FBVyxFQUFFLENBQUM7O1FBRWpDLHFCQUFnQixHQUFXLEVBQUUsQ0FBQzs7UUFFOUIsdUJBQWtCLEdBQUcsS0FBSyxDQUFDOztRQUUzQix1QkFBa0IsR0FBZSxFQUFFLENBQUM7O1FBRXBDLG9CQUFlLEdBQWUsRUFBRSxDQUFDOztRQUlqQyxtQkFBYyxHQUFlLEVBQUUsQ0FBQztRQUNoQyxvQkFBZSxHQUFlLEVBQUUsQ0FBQztRQUlqQyxvQkFBZSxHQUFZLEtBQUssQ0FBQzs7UUFHakMsNEJBQXVCLEdBQUcsS0FBSyxDQUFDO1FBQ2hDLGFBQVEsR0FBVSxFQUFFLENBQUM7UUFDckIsd0JBQW1CLEdBQU8sRUFBRSxDQUFDO1FBQzdCLG1CQUFjLEdBQVcsS0FBSyxDQUFDO1FBQy9CLG1CQUFjLEdBQWUsRUFBRSxDQUFDO1FBRWhDLGNBQVMsR0FBRyw0Q0FBNEMsQ0FBQztRQVNyRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFoR0Qsc0JBQUksaURBQVU7Ozs7UUFBZDtZQUNJLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUM1QixDQUFDOzs7OztRQUNELFVBQXdCLEdBQUc7WUFDdkIsSUFBSSxHQUFHLEVBQUU7Z0JBQ0wsSUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztnQkFDeEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2dCQUN2QywwQ0FBMEM7YUFDN0M7UUFDTCxDQUFDOzs7T0FSQTtJQWFELHNCQUFJLGdEQUFTOzs7O1FBQWI7WUFDSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDM0IsQ0FBQzs7Ozs7UUFDRCxVQUF1QixHQUFHO1lBQ3RCLElBQUksR0FBRyxFQUFFO2dCQUNMLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO2dCQUN0QixJQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUM7b0JBQ3JCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztpQkFDdEI7YUFDSjtRQUNMLENBQUM7OztPQVJBO0lBV0Qsc0JBQUksa0RBQVc7Ozs7UUFBZjtZQUNJLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztRQUM3QixDQUFDOzs7OztRQUNELFVBQXlCLEdBQUc7WUFDeEIsSUFBSSxHQUFHLEVBQUU7Z0JBQ0wsSUFBSSxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUM7YUFDM0I7UUFDTCxDQUFDOzs7T0FMQTs7OztJQW9FRCw0Q0FBUTs7O0lBQVI7O1lBQ1UsSUFBSSxHQUFHLElBQUk7UUFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE9BQU87Ozs7UUFBRSxVQUFVLEtBQUs7WUFDbkQsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztZQUNoQyxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztRQUNqQyxDQUFDLEVBQUMsQ0FBQztRQUNILHlDQUF5QztRQUN6QyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxjQUFjLEdBQUc7WUFDbEIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQzFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMseUJBQXlCLENBQUMsRUFBRTtTQUNyRixDQUFBO1FBQ0QsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUM1RixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLDZCQUE2QixDQUFDLENBQUM7SUFDbEYsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsc0RBQWtCOzs7OztJQUFsQixVQUFtQixFQUFFO1FBQ2pCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFDRDs7O09BR0c7Ozs7OztJQUNILHlEQUFxQjs7Ozs7SUFBckIsVUFBc0IsRUFBRTtRQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDckMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNwQixDQUFDO0lBQ0QsYUFBYTs7Ozs7O0lBQ2IsMkRBQXVCOzs7OztJQUF2QixVQUF3QixJQUFJO1FBQ3hCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFDRCxhQUFhOzs7Ozs7SUFDYiwwREFBc0I7Ozs7O0lBQXRCLFVBQXVCLElBQUk7UUFDdkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELFlBQVk7Ozs7OztJQUNaLGdEQUFZOzs7Ozs7SUFBWixVQUFhLENBQVE7UUFBUixrQkFBQSxFQUFBLFFBQVE7UUFDakIsSUFBSSxDQUFDLEVBQUU7WUFDSCxtQ0FBbUM7WUFDbkMsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztZQUN4QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7U0FDdkM7UUFDRCw0QkFBNEI7UUFDNUIsMENBQTBDO1FBQzFDLElBQUk7UUFDSixJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtZQUMxQixJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztTQUM5QztRQUNELElBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFDO1lBQ3JCLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDO1NBQzNDO1FBQ0QsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFRCxvQkFBb0I7Ozs7OztJQUNwQiwyREFBdUI7Ozs7OztJQUF2QixVQUF3QixDQUFDO1FBQXpCLGlCQW9CQztRQW5CRyxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDOztZQUNsQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFROztZQUM1QixVQUFVLEdBQUcsRUFBRTtRQUNyQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN0QyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNuQztRQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPOzs7OztRQUFDLFVBQUMsU0FBUyxFQUFFLEtBQUs7WUFDN0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQUU7Z0JBQzVELEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQzVDO1FBQ0wsQ0FBQyxFQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU87Ozs7O1FBQUMsVUFBQyxPQUFPLEVBQUUsS0FBSztZQUN4QyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsRUFBRTtnQkFDMUQsS0FBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3pDO1FBQ0wsQ0FBQyxFQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUNyQixJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQztTQUMzQjtJQUNMLENBQUM7SUFFRDs7T0FFRzs7Ozs7SUFDSCxtREFBZTs7OztJQUFmO1FBQUEsaUJBMEJDO1FBekJHLDRCQUE0QjtRQUM1QixrRUFBa0U7UUFDbEUsK0NBQStDO1FBQy9DLHlGQUF5RjtRQUN6RixZQUFZO1FBQ1osU0FBUztRQUNULElBQUk7UUFDSixTQUFTO1FBQ1Qsa0RBQWtEO1FBQ2xELElBQUk7UUFDSixJQUFHLElBQUksQ0FBQyxhQUFhLEVBQUM7WUFDbEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7WUFDM0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLENBQUM7Z0JBQ2hELElBQUcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBQztvQkFDekIsS0FBSSxDQUFDLG1CQUFtQixHQUFHLENBQUMsQ0FBQztvQkFDN0IsS0FBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7aUJBQ2pDO1lBQ0wsQ0FBQyxFQUFDLENBQUM7U0FDTjthQUNHO1lBQ0EsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7U0FDL0I7UUFDRCx5Q0FBeUM7UUFDekMsYUFBYTtRQUNiLGlEQUFpRDtJQUNyRCxDQUFDO0lBQ0Q7O09BRUc7Ozs7O0lBQ0gscURBQWlCOzs7O0lBQWpCO1FBQUEsaUJBT0M7UUFORyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTOzs7O1FBQUMsVUFBQSxDQUFDO1lBQ3JGLElBQUcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBQztnQkFDekIsS0FBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ3BELEtBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsb0JBQU8sS0FBSSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxFQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2FBQzVGO1FBQ0wsQ0FBQyxFQUFDLENBQUM7SUFDUCxDQUFDOzs7Ozs7O0lBRUQsaURBQWE7Ozs7OztJQUFiLFVBQWMsSUFBVyxFQUFDLFNBQWdCLEVBQUMsUUFBK0I7UUFBL0IseUJBQUEsRUFBQSxXQUFrQixJQUFJLENBQUMsUUFBUTtRQUN0RSxJQUFHLElBQUksQ0FBQyxlQUFlLEVBQUM7O2dCQUNkLEdBQUcsR0FBTSxJQUFJLENBQUMsZUFBZSxlQUFVLElBQUksa0JBQWEsUUFBUSxtQkFBYyxTQUFXO1lBQy9GLG1CQUFtQjtZQUNuQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLDZEQUE2RDtTQUNoRTthQUNHO1lBQ0EsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDbkI7SUFDTCxDQUFDOzs7OztJQUVELG9EQUFnQjs7OztJQUFoQixVQUFpQixJQUFJO1FBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzNCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxzQkFBTSxDQUFDLEVBQUcsRUFBVixDQUFVLEVBQUMsQ0FBQztRQUNqRSxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFRCxRQUFROzs7OztJQUNSLG9EQUFnQjs7Ozs7SUFBaEI7O1lBQ1EsWUFBWSxHQUFHLEVBQUU7UUFDckIsSUFBRyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUM7WUFDcEIsWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTTs7OztZQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQXBCLENBQW9CLEVBQUMsQ0FBQztTQUM1RTthQUNHO1lBQ0EsWUFBWSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNOzs7O1lBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsTUFBTSxLQUFLLElBQUksRUFBcEIsQ0FBb0IsRUFBQyxDQUFDO1NBQ3pGO1FBQ0QsSUFBSSxZQUFZLENBQUMsTUFBTSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDdEM7UUFDRCxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7SUFDcEMsQ0FBQztJQUNELFVBQVU7Ozs7OztJQUNWLHdEQUFvQjs7Ozs7O0lBQXBCLFVBQXFCLFFBQVE7UUFDekIsSUFBSSxRQUFRLENBQUMsTUFBTSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3hDO1FBRUQsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFDRCxRQUFROzs7Ozs7O0lBQ1IsbURBQWU7Ozs7Ozs7SUFBZixVQUFnQixRQUFRLEVBQUUsUUFBZ0I7UUFBMUMsaUJBY0M7UUFkeUIseUJBQUEsRUFBQSxnQkFBZ0I7UUFDdEMsUUFBUSxDQUFDLE9BQU87Ozs7UUFBQyxVQUFBLElBQUk7WUFDakIsSUFBSSxLQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxJQUFJLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLEtBQUksQ0FBQyxvQkFBb0IsRUFBRSxLQUFJLENBQUMsa0JBQWtCLENBQUMsRUFBRTtnQkFDeEksT0FBTzthQUNWO2lCQUFNO2dCQUNILGtCQUFrQjtnQkFDbEIsS0FBSSxDQUFDLG1CQUFtQixJQUFJLGtFQUFrRSxHQUFHLElBQUksQ0FBQyxLQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsWUFBWSxDQUFDO2dCQUMzTyxJQUFJO2dCQUNKLFNBQVM7Z0JBQ1QsaVBBQWlQO2dCQUNqUCxJQUFJO2dCQUNKLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDdEM7UUFDTCxDQUFDLEVBQUMsQ0FBQTtJQUNOLENBQUM7SUFDRDs7O09BR0c7Ozs7OztJQUNILHFEQUFpQjs7Ozs7SUFBakIsVUFBa0IsUUFBUTtRQUN0QixJQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUM7WUFDZixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ2hDO1FBQ0QsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3hCLENBQUM7Ozs7O0lBRUQsaURBQWE7Ozs7SUFBYixVQUFjLFFBQVE7UUFBdEIsaUJBUUM7UUFQRyxRQUFRLENBQUMsT0FBTzs7OztRQUFDLFVBQUEsSUFBSTtZQUNqQixJQUFJLEtBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxJQUFJLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLEtBQUksQ0FBQyxvQkFBb0IsRUFBRSxLQUFJLENBQUMsZUFBZSxDQUFDLEVBQUU7Z0JBQUMsT0FBTzthQUFDO2lCQUMxSTtnQkFDRCxLQUFJLENBQUMsZ0JBQWdCLElBQUksMkRBQTJELEdBQUcsSUFBSSxDQUFDLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUM7Z0JBQzdNLEtBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ25DO1FBQ0wsQ0FBQyxFQUFDLENBQUE7SUFDTixDQUFDO0lBR0QsVUFBVTs7Ozs7Ozs7O0lBQ0YsOENBQVU7Ozs7Ozs7OztJQUFsQixVQUFtQixLQUFVLEVBQUUsWUFBb0IsRUFBRSxLQUFZO1FBQzdELElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDekIsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLEtBQUssQ0FBQyxTQUFTOzs7O1FBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxLQUFLLEtBQUssSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUE1QixDQUE0QixFQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3ZGLENBQUM7SUFFRDs7T0FFRzs7Ozs7SUFDSCxtREFBZTs7OztJQUFmO1FBQ0ksSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDM0MsSUFBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBQztZQUMzQixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU87Ozs7WUFBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxFQUFuQixDQUFtQixFQUFDLENBQUM7U0FDN0Q7UUFDRCxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQztRQUN4QixzQkFBc0I7SUFDMUIsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsbURBQWU7Ozs7O0lBQWYsVUFBZ0IsQ0FBQztRQUFqQixpQkFTQztRQVJHLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztRQUNuRCxVQUFVOzs7UUFBQztZQUNQLElBQUcsS0FBSSxDQUFDLGtCQUFrQixFQUFDO2dCQUN2QixLQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQzthQUNqQztRQUNMLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztRQUNOLDJCQUEyQjtRQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7Ozs7SUFDRCwwREFBc0I7OztJQUF0Qjs7WUFDUSxJQUFJLEdBQUcsTUFBTSxDQUFDLFdBQVc7O1lBQ3pCLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLE1BQU07UUFDL0UsSUFBRyxJQUFJLEdBQUcsV0FBVyxFQUFDO1lBQ2xCLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN4RDtJQUNMLENBQUM7Ozs7O0lBQ0QsdURBQW1COzs7O0lBQW5CLFVBQW9CLENBQUM7UUFDakIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7UUFDN0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBRUQ7O09BRUc7Ozs7OztJQUNILGlEQUFhOzs7OztJQUFiLFVBQWMsQ0FBQztRQUNYLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztRQUM3RCxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxPQUFPOzs7Ozs7SUFDUCw4Q0FBVTs7Ozs7O0lBQVYsVUFBVyxDQUFDO1FBQ1IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRTtZQUN4QixDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7U0FDdkI7YUFBTTtZQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztTQUNwQztJQUNMLENBQUM7SUFFRDs7T0FFRzs7Ozs7SUFDSCxrREFBYzs7OztJQUFkO1FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7O2dCQUNiLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQywwQkFBMEIsQ0FBQztZQUMxRSxJQUFHLFlBQVksRUFBQztnQkFDWixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUMxQztZQUNELE9BQU87U0FDVjs7WUFDRyxlQUFlLEdBQXFCLEVBQUU7UUFDMUMsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFO1lBQzdDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsSUFBSTs7b0JBQ3JCLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDOztvQkFDZixJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQzs7b0JBQ25CLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDOztvQkFDbkIsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUM7O29CQUN6QyxVQUFVLEdBQUc7b0JBQ2IsRUFBRSxJQUFBO29CQUNGLElBQUksTUFBQTtvQkFDSixJQUFJLE1BQUE7b0JBQ0osVUFBVSxZQUFBO2lCQUNiO2dCQUNELGVBQWUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDckMsQ0FBQyxFQUFDLENBQUE7U0FDTDtRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO1lBQ2xCLE9BQU8sRUFBRSxPQUFPLENBQUMsT0FBTztZQUN4QixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVM7WUFDcEIsT0FBTyxFQUFFLElBQUksQ0FBQyxrQkFBa0I7WUFDaEMsY0FBYyxFQUFFLElBQUksQ0FBQyxlQUFlO1lBQ3BDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUs7WUFDakMsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSTtZQUM1RixXQUFXLEVBQUUsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxJQUFJO1NBQy9ELENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDeEIsQ0FBQzs7OztJQUVELDBDQUFNOzs7SUFBTjtRQUNJLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO1lBQ2xCLE9BQU8sRUFBRSxPQUFPLENBQUMsTUFBTTtZQUN2QixJQUFJLEVBQUUsSUFBSTtZQUNWLE9BQU8sRUFBRSxFQUFFO1lBQ1gsY0FBYyxFQUFFLEVBQUU7WUFDbEIsVUFBVSxFQUFFLElBQUk7WUFDaEIsUUFBUSxFQUFFLElBQUk7WUFDZCxXQUFXLEVBQUUsSUFBSTtTQUNwQixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1FBQzFCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFDRCxZQUFZOzs7Ozs7SUFDWixvREFBZ0I7Ozs7O0lBQWhCLFVBQWlCLEtBQWE7UUFDMUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUk7Ozs7UUFBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxFQUFwQixDQUFvQixFQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7SUFDakMsQ0FBQztJQUNELE1BQU07Ozs7O0lBQ04sK0NBQVc7Ozs7O0lBQVg7UUFDSSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBQ0QsK0JBQStCO0lBQy9CLDBDQUEwQztJQUMxQyxJQUFJO0lBQ0o7O09BRUc7Ozs7Ozs7OztJQUNILHVEQUFtQjs7Ozs7Ozs7O0lBQW5CLFVBQW9CLEtBQUs7UUFDckIseUJBQXlCO1FBQ3pCLElBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDOztnQkFDbkIsVUFBUSxHQUFHLEVBQUU7WUFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsSUFBSTtnQkFDekIsVUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0IsQ0FBQyxFQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsb0JBQW9CLENBQUMsVUFBUSxDQUFDLENBQUM7U0FDdkM7UUFDRCxJQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBQzs7Z0JBQ3JCLGFBQVcsR0FBRyxFQUFFO1lBQ3BCLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU87Ozs7WUFBQyxVQUFBLEdBQUc7Z0JBQzFCLGFBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9CLENBQUMsRUFBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGFBQVcsQ0FBQyxDQUFDO1NBQ3ZDO1FBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBQ0QsZUFBZTs7Ozs7O0lBQ2YscURBQWlCOzs7OztJQUFqQixVQUFrQixLQUFLO1FBQ25CLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFDRCxZQUFZOzs7Ozs7SUFDWiw2Q0FBUzs7Ozs7SUFBVCxVQUFVLElBQUk7UUFDVixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7O2dCQUNyQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztZQUN6QyxPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3BEO2FBQ0k7WUFDRCxPQUFPLEVBQUUsQ0FBQztTQUNiO0lBQ0wsQ0FBQzs7Ozs7SUFFRCw0Q0FBUTs7OztJQUFSLFVBQVMsS0FBSztRQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pDLENBQUM7O2dCQXBnQkosU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSwwQkFBMEI7b0JBQ3BDLDR2VkFBaUQ7b0JBRWpELGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOztpQkFDeEM7Ozs7Z0JBYnlELFNBQVM7Z0JBQXJCLFVBQVU7Z0JBQXNELGlCQUFpQjtnQkFFdEgsYUFBYTtnQkFGMkcsUUFBUTtnQkFLaEksVUFBVTs7O3VDQVVkLEtBQUs7dUNBQ0wsS0FBSzs0Q0FDTCxLQUFLO2dDQU1MLEtBQUs7NkJBQ0wsS0FBSzt1QkFFTCxLQUFLO3lCQUNMLEtBQUs7a0NBQ0wsS0FBSzs4QkFJTCxLQUFLO2tDQUNMLEtBQUs7OEJBQ0wsS0FBSzs2QkFhTCxLQUFLOzRCQWVMLEtBQUs7OEJBYUwsS0FBSzttQ0FTTCxNQUFNO2lDQUVOLE1BQU07OEJBRU4sTUFBTTs4QkFFTixNQUFNOzZCQUVOLE1BQU07aUNBQ04sTUFBTTtrQ0FDTixNQUFNOzhCQUNOLE1BQU07eUJBQ04sU0FBUyxTQUFDLFFBQVE7OEJBQ2xCLFNBQVMsU0FBQyxhQUFhOztJQTRhNUIsZ0NBQUM7Q0FBQSxBQXJnQkQsSUFxZ0JDO1NBL2ZZLHlCQUF5Qjs7O0lBQ2xDLHlEQUE2Qzs7SUFDN0MseURBQStDOztJQUMvQyw4REFBd0Q7O0lBTXhELGtEQUF1Qzs7SUFDdkMsK0NBQWtDOztJQUVsQyx5Q0FBK0I7O0lBQy9CLDJDQUF1Qjs7SUFDdkIsb0RBQWdDOztJQUloQyxnREFBNkI7O0lBQzdCLG9EQUFpQzs7SUFDakMsZ0RBQTJCOztJQUkzQiw0Q0FBeUI7O0lBQ3pCLGdEQUFtQjs7SUFDbkIsb0RBQTJCOzs7OztJQUUzQixnREFBcUM7Ozs7O0lBZXJDLCtDQUFtQjs7SUFjbkIsaURBQWtDOztJQWFsQyxxREFBcUQ7O0lBRXJELG1EQUFtRDs7SUFFbkQsZ0RBQXdEOzs7OztJQUV4RCxnREFBMkM7Ozs7O0lBRTNDLCtDQUEwQzs7SUFDMUMsbURBQThDOztJQUM5QyxvREFBK0M7O0lBQy9DLGdEQUEyQzs7SUFDM0MsMkNBQTRCOztJQUM1QixnREFBc0M7O0lBR3RDLDhDQUF1Qjs7SUFFdkIsa0RBQXNCOztJQUV0Qix3REFBaUM7O0lBRWpDLHFEQUE4Qjs7SUFFOUIsdURBQTJCOztJQUUzQix1REFBb0M7O0lBRXBDLG9EQUFpQzs7SUFFakMsa0RBQWM7O0lBRWQsbURBQWdDOztJQUNoQyxvREFBaUM7O0lBQ2pDLHVDQUFlOztJQUVmLDBDQUFlOztJQUNmLG9EQUFpQzs7SUFDakMsK0NBQWdCOztJQUVoQiw0REFBZ0M7O0lBQ2hDLDZDQUFxQjs7SUFDckIsd0RBQTZCOztJQUM3QixtREFBK0I7O0lBQy9CLG1EQUFnQzs7SUFDaEMsa0RBQTZCOztJQUM3Qiw4Q0FBeUQ7Ozs7O0lBRXJELDZDQUEyQjs7Ozs7SUFDM0IsK0NBQThCOzs7OztJQUM5Qix1Q0FBNkI7Ozs7O0lBQzdCLGtEQUFvQzs7Ozs7SUFDcEMsNkNBQTBCOzs7OztJQUMxQix5Q0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVmlld0VuY2Fwc3VsYXRpb24sIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBVcGxvYWRlck9wdGlvbnMsIEZVcGxvYWRGaWxlRXh0ZW5kIH0gZnJvbSAnQGZhcnJpcy9leHRlbmQtZmlsZS11cGxvYWQnO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBWYWx1ZUNvbmZpZywgTXNnSW5mbywgZWRpdEF0dGFjaEZpbGUgfSBmcm9tICcuL2Rpc2N1c3Npb24tZWRpdG9yLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRpc2N1c3Npb24tZWRpdG9yJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9kaXNjdXNzaW9uLWVkaXRvci5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9kaXNjdXNzaW9uLWVkaXRvci5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGlzY3Vzc2lvbkVkaXRvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBASW5wdXQoKSBwZXJzb25uZWxzUHJpbWFyeUtleTogc3RyaW5nID0gJ2lkJztcclxuICAgIEBJbnB1dCgpIHBlcnNvbm5lbHNEaXNwbGF5S2V5OiBzdHJpbmcgPSAnbmFtZSc7XHJcbiAgICBASW5wdXQoKSByZXBseVBlcnNvbm5lbHNEaXNwbGF5S2V5OiBzdHJpbmcgPSAndXNlck5hbWUnO1xyXG4gICAgLy8gQElucHV0KCkgcGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgLy8gQElucHV0KCkgcGVybWlzc2lvbkxpc3Q6IEFycmF5PGFueT4gPSBbXHJcbiAgICAvLyAgICAgeyB2YWx1ZTogJ0FMTCcsIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLmFsbCcpIH0sXHJcbiAgICAvLyAgICAgeyB2YWx1ZTogJ1JFTEFURUQnLCB0ZXh0OiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5yZWxhdGVkJykgfVxyXG4gICAgLy8gXTtcclxuICAgIEBJbnB1dCgpIGNhbmNlbFZpc2libGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgQElucHV0KCkgZWRpdEhlaWdodDogbnVtYmVyID0gMTMwO1xyXG5cclxuICAgIEBJbnB1dCgpIHR5cGU6IHN0cmluZyA9ICd1c2VyJztcclxuICAgIEBJbnB1dCgpIG9yZ1VybDpzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBwZXJzb25TZWFyY2hVcmw6c3RyaW5nO1xyXG4gICAgLy8g6ZyA6KaB55qE5qCR5pWw5o2uXHJcbiAgICAvLyBASW5wdXQoKSB0cmVlRGF0YTogYW55W107XHJcbiAgICAvLyDlt6bkvqfmoJHnmoTkuLvplK7lrZfmrrVcclxuICAgIEBJbnB1dCgpIHRyZWVJZEZpZWxkOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSB0cmVlRGlzcGxheVRleHQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHNlY3Rpb25EYXRhOmFueVtdO1xyXG4gICAgLy8g55So5oi36KeS6ImyXHJcbiAgICAvLyBASW5wdXQoKSBncm91cExpc3Q6IGFueVtdID0gW107XHJcblxyXG4gICAgb3B0aW9uczogVXBsb2FkZXJPcHRpb25zO1xyXG4gICAgcGxhY2Vob2xkZXI6c3RyaW5nO1xyXG4gICAgc2VjdGlvbnRyZWVEYXRhOkFycmF5PGFueT47XHJcbiAgICAvLyDkurrkuovlvLnnqpfliJfooajmlbDmja5cclxuICAgIHByaXZhdGUgX3BlcnNvbm5lbHM6IEFycmF5PGFueT4gPSBbXTtcclxuXHJcbiAgICBnZXQgcGVyc29ubmVscygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc29ubmVscztcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBwZXJzb25uZWxzKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGVyc29ubmVscyA9IHZhbDtcclxuICAgICAgICAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLl9wZXJzb25uZWxzO1xyXG4gICAgICAgICAgICB0aGlzLmNvcHlQZXJzb25uZWxzID0gdGhpcy5fcGVyc29ubmVscztcclxuICAgICAgICAgICAgLy8gdGhpcy5jb3B5UGVyc29ubmVscyA9IHRoaXMuX3BlcnNvbm5lbHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOS6uuS6i+W8ueeql+WIl+ihqOaVsOaNrlxyXG4gICAgcHJpdmF0ZSBfcmVwbHlVc2VyO1xyXG5cclxuICAgIGdldCByZXBseVVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcGx5VXNlcjtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCByZXBseVVzZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZXBseVVzZXIgPSB2YWw7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX3JlcGx5VXNlclsnaWQnXSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvckZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2F0dGFjaEZpbGVzOiBGVXBsb2FkRmlsZUV4dGVuZFtdO1xyXG4gICAgZ2V0IGF0dGFjaEZpbGVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdHRhY2hGaWxlcztcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBhdHRhY2hGaWxlcyh2YWwpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaEZpbGVzID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmlrDlu7rov5jmmK/nu7TmiqToh6rlrprkuYnop5LoibJcclxuICAgIC8vIEBPdXRwdXQoKSBjdXN0b21Hcm91cENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLy8g5a+55aSW5pq06Zyy5pWw5o2uXHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0aW9uc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLy8g6YCJ5Lit55qE6KGMXHJcbiAgICBAT3V0cHV0KCkgbGluZURhdGFDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8vIOWvueWkllxyXG4gICAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxWYWx1ZUNvbmZpZz4oKTtcclxuICAgIC8qKiDpmYTku7bpooTop4ggKi9cclxuICAgIEBPdXRwdXQoKSBmaWxlUHJldmlldyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDpmYTku7bliKDpmaQgKi9cclxuICAgIEBPdXRwdXQoKSBmaWxlUmVtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGZpbGVVcGxvYWREb25lID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHBlcnNvbm5lbFNlYXJjaCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBnZXRPdWdVc2VycyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBWaWV3Q2hpbGQoJ2VkaXRvcicpIGVkaXRvcjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BlcnNvbk1vZGFsJykgcGVyc29uTW9kYWw7XHJcbiAgICAvLyBAVmlld0NoaWxkKCdzZWFyY2hJbnB1dCcpIHNlYXJjaElucHV0O1xyXG4gICAgLy8g5a6h5om55oSP6KeBXHJcbiAgICB0ZXh0VmFsdWU6IHN0cmluZyA9ICcnO1xyXG4gICAgLy8g5pqC5a2Y5paH5pys5qGG55qE6L6T5YWl77yM6Kej5Yaz54Sm54K56Zeu6aKYXHJcbiAgICB0ZW1wVGV4dFZhbHVlOiBzdHJpbmc7XHJcbiAgICAvLyDmmoLlrZjkurrlkZjkv6Hmga9cclxuICAgIHRlbXBQZXJzb25uZWxzVmFsdWU6IHN0cmluZyA9ICcnO1xyXG4gICAgLy8g5pqC5a2Y6YOo6ZeoXHJcbiAgICB0ZW1wU2VjdGlvblZhbHVlOiBzdHJpbmcgPSAnJztcclxuICAgIC8vIOaQnOe0ouS6uuS6i+euoeeQhuW8ueeql1xyXG4gICAgcGVyc29uTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAvLyDpgInmi6nopoHlj5HpgIHnmoTkurrlkZjliJfooahcclxuICAgIHNlbGVjdGVkUGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgLy8g6YCJ5oup6KaB5Y+R6YCB55qE6YOo6ZeoXHJcbiAgICBzZWxlY3RlZFNlY3Rpb246IEFycmF5PGFueT4gPSBbXTtcclxuICAgIC8vIOaQnOe0ouaWh+acrOahhuS4ree7keWumueahOWAvFxyXG4gICAgcGVyc29ubmVsVGV4dDtcclxuICAgIC8vIOaaguWtmOS6uuWRmOS/oeaBr++8jOeUqOS6juaQnOe0olxyXG4gICAgY29weVBlcnNvbm5lbHM6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIGlubmVyUGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgZWw6IEVsZW1lbnRSZWY7XHJcbiAgICAvLyDpgb/lhY3ph43lpI3ovpPlhaXnmoR0b2tlblxyXG4gICAgdG9rZW46IGJvb2xlYW47XHJcbiAgICByZWxhdGl2ZVZpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHBlcm1pc3Npb246IGFueTtcclxuICAgIC8v5LiK5Lyg6ZmE5Lu25piv5ZCm5pi+56S6XHJcbiAgICBhdHRhY2hGaWxlc01vZGFsVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgcGFnZVNpemU6bnVtYmVyID0gMjA7XHJcbiAgICBzZWFyY2hQZXJzb25uZWxMaXN0OmFueSA9IHt9O1xyXG4gICAgc2hvd1NlYXJjaExpc3Q6Ym9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcGVybWlzc2lvbkxpc3Q6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICBncm91cEljb24gPSAnPHNwYW4gY2xhc3M9XCJmLWljb24gZi1pY29uLXNlYXJjaFwiPjwvc3Bhbj4nO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwcml2YXRlIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgKSB7IFxyXG4gICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgc2VsZi5wZXJzb25Nb2RhbFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VsZi5yZWxhdGl2ZVZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyB0aGlzLmNvcHlQZXJzb25uZWxzID0gdGhpcy5wZXJzb25uZWxzO1xyXG4gICAgICAgIHRoaXMuZWwgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25MaXN0ID0gW1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAnQUxMJywgdGV4dDogdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAuYWxsJykgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ1JFTEFURUQnLCB0ZXh0OiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5yZWxhdGVkJykgfVxyXG4gICAgICAgIF1cclxuICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB0aGlzLnBlcm1pc3Npb25MaXN0WzBdO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgbWF4VXBsb2FkczogMywgbWF4RmlsZVNpemU6IDEwMjQwLCBhbGxvd2VkQ29udGVudFR5cGVzOiBbJy5qcGcnLCAnLnBkZiddIH07XHJcbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLnBsYWNlaG9sZGVyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDljZXkuKrpmYTku7bkuIrkvKDlrozmiJBcclxuICAgICAqIEBwYXJhbSBldiBcclxuICAgICAqL1xyXG4gICAgZlVwbG9hZERvbmVIYW5kbGVyKGV2KSB7XHJcbiAgICAgICAgdGhpcy5maWxlVXBsb2FkRG9uZS5lbWl0KGV2KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5LiK5Lyg6ZmE5Lu25Lit5Y2V5Liq6ZmE5Lu25Yig6Zmk5a6M5oiQXHJcbiAgICAgKiBAcGFyYW0gZXYgXHJcbiAgICAgKi9cclxuICAgIGZVcGxvYWRSZW1vdmVkSGFuZGxlcihldikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdmVXBsb2FkUmVtb3ZlZEhhbmRsZXInKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhldik7XHJcbiAgICB9XHJcbiAgICAvKirpmYTku7bliJfooajkuK3pooTop4ggKi9cclxuICAgIGZpbGVQcmV2aWV3RXZlbnRIYW5kbGVyKGluZm8pIHtcclxuICAgICAgICB0aGlzLmZpbGVQcmV2aWV3LmVtaXQoaW5mbyk7XHJcbiAgICB9XHJcbiAgICAvKirpmYTku7bliJfooajkuK3liKDpmaQgKi9cclxuICAgIGZpbGVSZW1vdmVFdmVudEhhbmRsZXIoZmlsZSkge1xyXG4gICAgICAgIHRoaXMuZmlsZVJlbW92ZS5lbWl0KGZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaWh+acrOahhuWkseWOu+eEpueCueinpuWPkVxyXG4gICAgc2V0VGV4dFZhbHVlKGUgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQuaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgdGhpcy50ZW1wVGV4dFZhbHVlID0gZS50YXJnZXQuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRWYWx1ZSA9IHRoaXMudGVtcFRleHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgKHRoaXMudGVtcFRleHRWYWx1ZSkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnRleHRWYWx1ZSA9IHRoaXMudGVtcFRleHRWYWx1ZVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAodGhpcy50ZW1wUGVyc29ubmVsc1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFZhbHVlICs9IHRoaXMudGVtcFBlcnNvbm5lbHNWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy50ZW1wU2VjdGlvblZhbHVlKXtcclxuICAgICAgICAgICAgdGhpcy50ZXh0VmFsdWUgKz0gdGhpcy50ZW1wU2VjdGlvblZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRlbXBUZXh0VmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnRlbXBQZXJzb25uZWxzVmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnRlbXBTZWN0aW9uVmFsdWUgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICAvLyDnm5HlkKzplK7nm5jkuovku7YsIOS4u+imgeaYr+eUqOS6juWIoOmZpEDkurpcclxuICAgIGxpc3RlbkVkaXRvclZhbHVlQ2hhbmdlKGUpIHtcclxuICAgICAgICB0aGlzLnRlbXBUZXh0VmFsdWUgPSBlLnRhcmdldC5pbm5lckhUTUw7XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBlLnRhcmdldC5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbklkID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjaGlsZHJlbklkLnB1c2goY2hpbGRyZW5baV0uaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscy5mb3JFYWNoKChwZXJzb25uZWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW5JZC5pbmNsdWRlcyhwZXJzb25uZWxbdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb24uZm9yRWFjaCgoc2VjdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbklkLmluY2x1ZGVzKHNlY3Rpb25bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbi5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRlbXBUZXh0VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wVGV4dFZhbHVlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si5Lq65ZGYXHJcbiAgICAgKi9cclxuICAgIHNlcmFjaFBlcnNvbm5lbCgpIHtcclxuICAgICAgICAvLyBpZiAodGhpcy5wZXJzb25uZWxUZXh0KSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaW5uZXJQZXJzb25uZWxzID0gdGhpcy5jb3B5UGVyc29ubmVscy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZihpdGVtW3RoaXMucGVyc29ubmVsc0Rpc3BsYXlLZXldKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gaXRlbVt0aGlzLnBlcnNvbm5lbHNEaXNwbGF5S2V5XS5pbmRleE9mKHRoaXMucGVyc29ubmVsVGV4dCkgIT09IC0xO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLmNvcHlQZXJzb25uZWxzO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZih0aGlzLnBlcnNvbm5lbFRleHQpe1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hEYXRhKHRoaXMucGVyc29ubmVsVGV4dCwwKS5zdWJzY3JpYmUoZD0+e1xyXG4gICAgICAgICAgICAgICAgaWYoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFBlcnNvbm5lbExpc3QgPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uTW9kYWxQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnNlYXJjaElucHV0Lm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG4gICAgICAgIC8v5pqC5pe25rOo6YeK5o6J5pyN5Yqh5Zmo56uv5p+l6K+iXHJcbiAgICAgICAgLy8gdGhpcy5wZXJzb25uZWxTZWFyY2guZW1pdCh0aGlzLnBlcnNvbm5lbFRleHQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLkuIvkuIDpobVcclxuICAgICAqL1xyXG4gICAgZ2V0TW9yZVNlYXJjaERhdGEoKXtcclxuICAgICAgICB0aGlzLmdldFNlYXJjaERhdGEodGhpcy5wZXJzb25uZWxUZXh0LHRoaXMuc2VhcmNoUGVyc29ubmVsTGlzdC5wYWdlSW5kZXggKyAxKS5zdWJzY3JpYmUoZD0+e1xyXG4gICAgICAgICAgICBpZihkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0LnBhZ2VJbmRleCA9IGRbJ3BhZ2VJbmRleCddO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0Wyd1c2VycyddID0gWy4uLnRoaXMuc2VhcmNoUGVyc29ubmVsTGlzdFsndXNlcnMnXSwuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlYXJjaERhdGEodGV4dDpzdHJpbmcscGFnZUluZGV4Om51bWJlcixwYWdlU2l6ZTpudW1iZXIgPSB0aGlzLnBhZ2VTaXplKXtcclxuICAgICAgICBpZih0aGlzLnBlcnNvblNlYXJjaFVybCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMucGVyc29uU2VhcmNoVXJsfT9wYXJhbT0ke3RleHR9JnBhZ2VTaXplPSR7cGFnZVNpemV9JnBhZ2VJbmRleD0ke3BhZ2VJbmRleH1gO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24zLmpzb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwZXJzb25uZWxDaGVja2VkKGl0ZW0pe1xyXG4gICAgICAgIGl0ZW0uYWN0aXZlID0gIWl0ZW0uYWN0aXZlO1xyXG4gICAgICAgIHRoaXMuaW5uZXJQZXJzb25uZWxzID0gdGhpcy5pbm5lclBlcnNvbm5lbHMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB0aGlzLmFwcGVuZFBlcnNvbm5lbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlop7liqBA5Lq65ZGYXHJcbiAgICBhcHBlbmRQZXJzb25uZWxzKCkge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZExpc3QgPSBbXTtcclxuICAgICAgICBpZighdGhpcy5zaG93U2VhcmNoTGlzdCl7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkTGlzdCA9IHRoaXMuaW5uZXJQZXJzb25uZWxzLmZpbHRlcihpdGVtID0+IGl0ZW0uYWN0aXZlID09PSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZWN0ZWRMaXN0ID0gdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0Wyd1c2VycyddLmZpbHRlcihpdGVtID0+IGl0ZW0uYWN0aXZlID09PSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRQZXJzb25uZWwoc2VsZWN0ZWRMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldFBlcnNvbm5lbHMoKTtcclxuICAgICAgICB0aGlzLnNldFRleHRWYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucGVyc29uTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvL+mrmOe6p+aQnOe0ouS6uuWRmOa3u+WKoFxyXG4gICAgYXBwZW5kUGVyc29ubmVsc0xpc3QobGlzdERhdGEpIHtcclxuICAgICAgICBpZiAobGlzdERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUGVyc29ubmVsKGxpc3REYXRhLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGV4dFZhbHVlKCk7XHJcbiAgICB9XHJcbiAgICAvL+W+queOr+WinuWKoOS6uuWRmFxyXG4gICAgYXBwZW5kUGVyc29ubmVsKGxpc3REYXRhLCBleHRlcm5hbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGlzdERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzLmxlbmd0aCAmJiB0aGlzLl9pc0luQXJyYXkoaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSwgdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleSwgdGhpcy5zZWxlY3RlZFBlcnNvbm5lbHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2lmICghZXh0ZXJuYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcFBlcnNvbm5lbHNWYWx1ZSArPSAnPGEgbmFtZT1cInBlcnNvbm5lbFwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCIgY2xhc3M9XCJhdC11c2VyXCIgaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIiB1c2VyaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIj5AJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV0gKyAnPC9hPiZuYnNwOyc7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnRlbXBQZXJzb25uZWxzVmFsdWUgKz0gJzxhIG5hbWU9XCJwZXJzb25uZWxcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiIGNsYXNzPVwiYXQtdXNlclwiIGlkPVwiJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0gKyAnXCIgdXNlcmlkPVwiJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0gKyAnXCI+QCcgKyBpdGVtW3RoaXMucmVwbHlQZXJzb25uZWxzRGlzcGxheUtleV0gKyAnPC9hPic7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg6YOo6ZeoXHJcbiAgICAgKiBAcGFyYW0gbGlzdERhdGEgXHJcbiAgICAgKi9cclxuICAgIGFwcGVuZFNlY3Rpb25MaXN0KGxpc3REYXRhKXtcclxuICAgICAgICBpZihsaXN0RGF0YS5sZW5ndGgpe1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFNlY3Rpb24obGlzdERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFRleHRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZFNlY3Rpb24obGlzdERhdGEsKSB7XHJcbiAgICAgICAgbGlzdERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWN0aW9uLmxlbmd0aCAmJiB0aGlzLl9pc0luQXJyYXkoaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSwgdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleSwgdGhpcy5zZWxlY3RlZFNlY3Rpb24pKSB7cmV0dXJuO30gXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wU2VjdGlvblZhbHVlICs9ICc8YSBuYW1lPVwib3JnXCIgY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIiBjbGFzcz1cImF0LW9yZ1wiIGlkPVwiJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0gKyAnXCIgb3JnaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIj5AJyArIGl0ZW1bJ25hbWUnXSArICc8L2E+Jm5ic3A7JztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9uLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyDliKTmlq3mmK/lkKblnKjmlbDnu4RcclxuICAgIHByaXZhdGUgX2lzSW5BcnJheSh2YWx1ZTogYW55LCBmaWVsZEluQXJyYXk6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCAhZmllbGRJbkFycmF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmZpbmRJbmRleChpdGVtID0+IHZhbHVlID09PSBpdGVtW2ZpZWxkSW5BcnJheV0pID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFs+mXreS6uuS6i+euoeeQhuW8ueeql1xyXG4gICAgICovXHJcbiAgICByZXNldFBlcnNvbm5lbHMoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGVyc29uTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLmNvcHlQZXJzb25uZWxzO1xyXG4gICAgICAgIGlmKHRoaXMuaW5uZXJQZXJzb25uZWxzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXJQZXJzb25uZWxzLmZvckVhY2goaXRlbSA9PiBpdGVtLmFjdGl2ZSA9IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZXJzb25uZWxUZXh0ID0gJyc7XHJcbiAgICAgICAgLy8gdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omT5byA5Lq65ZGY566h55CGXHJcbiAgICAgKiBAcGFyYW0gZSDkuovku7ZcclxuICAgICAqL1xyXG4gICAgb3Blbk1vZGFsUGVyc29uKGUpIHtcclxuICAgICAgICB0aGlzLnBlcnNvbk1vZGFsVmlzaWJsZSA9ICF0aGlzLnBlcnNvbk1vZGFsVmlzaWJsZTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYodGhpcy5wZXJzb25Nb2RhbFZpc2libGUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Nb2RhbFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAwKTtcclxuICAgICAgICAvLyB0aGlzLmdldFBlcnNvbm5lbExpc3QoKTtcclxuICAgICAgICB0aGlzLnN0b3BCdWJibGUoZSk7XHJcbiAgICB9XHJcbiAgICBzZXRQZXJzb25Nb2RhbFBvc2l0aW9uKCl7XHJcbiAgICAgICAgbGV0IHdpbkggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgbGV0IE1vZGFsQm90dG9tID0gdGhpcy5wZXJzb25Nb2RhbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuICAgICAgICBpZih3aW5IIDwgTW9kYWxCb3R0b20pe1xyXG4gICAgICAgICAgICB0aGlzLnBlcnNvbk1vZGFsLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW5Nb2RhbFBlcm1pc3Npb24oZSkge1xyXG4gICAgICAgIHRoaXMucmVsYXRpdmVWaXNpYmxlID0gIXRoaXMucmVsYXRpdmVWaXNpYmxlO1xyXG4gICAgICAgIHRoaXMuc3RvcEJ1YmJsZShlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJk+W8gOS4iuS8oOmZhOS7tlxyXG4gICAgICovXHJcbiAgICBvcGVuTW9kYWxGaWxlKGUpIHtcclxuICAgICAgICB0aGlzLmF0dGFjaEZpbGVzTW9kYWxWaXNpYmxlID0gIXRoaXMuYXR0YWNoRmlsZXNNb2RhbFZpc2libGU7XHJcbiAgICAgICAgdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmYu+atouWGkuazoVxyXG4gICAgc3RvcEJ1YmJsZShlKSB7XHJcbiAgICAgICAgaWYgKGUgJiYgZS5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmj5DkuqTor4Tor61cclxuICAgICAqL1xyXG4gICAgc3VibWl0QXBwcm92YWwoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRleHRWYWx1ZSkge1xyXG4gICAgICAgICAgICBsZXQgbm90RW1wdHlUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAubm90RW1wdHknKTtcclxuICAgICAgICAgICAgaWYobm90RW1wdHlUZXh0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcihub3RFbXB0eVRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGVkaXRBdHRhY2hGaWxlczogZWRpdEF0dGFjaEZpbGVbXSA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmF0dGFjaEZpbGVzICYmIHRoaXMuYXR0YWNoRmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoRmlsZXMuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpZCA9IGZpbGVbJ2lkJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGZpbGVbJ25hbWUnXSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0gZmlsZVsnc2l6ZSddLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhSWQgPSBmaWxlWydleHRlbmQnXVsnbWV0YWRhdGFJZCddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGF0dGFjaEZpbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVkaXRBdHRhY2hGaWxlcy5wdXNoKGF0dGFjaEZpbGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgICBtc2dJbmZvOiBNc2dJbmZvLkNvbmZpcm0sXHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dFZhbHVlLFxyXG4gICAgICAgICAgICBtYWlsVG9zOiB0aGlzLnNlbGVjdGVkUGVyc29ubmVscyxcclxuICAgICAgICAgICAgbWFpbFRvU2VjdGlvbnM6IHRoaXMuc2VsZWN0ZWRTZWN0aW9uLFxyXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiB0aGlzLnBlcm1pc3Npb24udmFsdWUsXHJcbiAgICAgICAgICAgIHBhcmVudElkOiAodGhpcy5yZXBseVVzZXIgJiYgdGhpcy5yZXBseVVzZXIuaGFzT3duUHJvcGVydHkoJ2lkJykpID8gdGhpcy5yZXBseVVzZXIuaWQgOiBudWxsLFxyXG4gICAgICAgICAgICBhdHRhY2hGaWxlczogZWRpdEF0dGFjaEZpbGVzLmxlbmd0aCA/IGVkaXRBdHRhY2hGaWxlcyA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRleHRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb24gPSBbXTtcclxuICAgICAgICB0aGlzLmF0dGFjaEZpbGVzID0gW107XHJcbiAgICAgICAgdGhpcy5yZXBseVVzZXIgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgbXNnSW5mbzogTXNnSW5mby5DYW5jZWwsXHJcbiAgICAgICAgICAgIHRleHQ6IG51bGwsXHJcbiAgICAgICAgICAgIG1haWxUb3M6IFtdLFxyXG4gICAgICAgICAgICBtYWlsVG9TZWN0aW9uczogW10sXHJcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IG51bGwsXHJcbiAgICAgICAgICAgIHBhcmVudElkOiBudWxsLFxyXG4gICAgICAgICAgICBhdHRhY2hGaWxlczogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGV4dFZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBlcnNvbm5lbHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoRmlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlcGx5VXNlciA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoq5L+u5pS55p+l55yL5p2D6ZmQICovXHJcbiAgICBjaGFuZ2VQZXJtaXNzaW9uKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB0aGlzLnBlcm1pc3Npb25MaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5yZWxhdGl2ZVZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8v6I635b6X54Sm54K5XHJcbiAgICBlZGl0b3JGb2N1cygpIHtcclxuICAgICAgICB0aGlzLmVkaXRvci5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICAvLyBjdXN0b21Hcm91cENoYW5nZVBhcihldmVudCl7XHJcbiAgICAvLyAgICAgdGhpcy5jdXN0b21Hcm91cENoYW5nZS5lbWl0KGV2ZW50KTtcclxuICAgIC8vIH1cclxuICAgIC8qKlxyXG4gICAgICog6auY57qn5Lq65ZGY54K556Gu6K6kXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdGlvbnNDaGFuZ2VQYXIoZXZlbnQpIHtcclxuICAgICAgICAvL3RoaXMucmVzZXRQZXJzb25uZWxzKCk7XHJcbiAgICAgICAgaWYoZXZlbnQuZGF0YS51c2Vycy5sZW5ndGgpe1xyXG4gICAgICAgICAgICBsZXQgdXNlckxpc3QgPSBbXTtcclxuICAgICAgICAgICAgZXZlbnQuZGF0YS51c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXNlckxpc3QucHVzaCh1c2VyLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRQZXJzb25uZWxzTGlzdCh1c2VyTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGV2ZW50LmRhdGEuc2VjdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICBsZXQgc2VjdGlvbkxpc3QgPSBbXTtcclxuICAgICAgICAgICAgZXZlbnQuZGF0YS5zZWN0aW9uLmZvckVhY2goc2VjID0+IHtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25MaXN0LnB1c2goc2VjLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRTZWN0aW9uTGlzdChzZWN0aW9uTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KGV2ZW50KTtcclxuICAgIH1cclxuICAgIC8qKumrmOe6p+S6uuWRmOS4remAieS4reafkOihjCAqL1xyXG4gICAgbGluZURhdGFDaGFuZ2VQYXIoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmxpbmVEYXRhQ2hhbmdlLmVtaXQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLyoq6I635b6X5Y2g5L2N5aS05YOPICovXHJcbiAgICBnZXRBdmF0YXIoaXRlbSkge1xyXG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV0pIHtcclxuICAgICAgICAgICAgbGV0IHN0ciA9IGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV07XHJcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSAyLCBzdHIubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3VnVXNlcnMoZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuZ2V0T3VnVXNlcnMuZW1pdChldmVudCk7XHJcbiAgICB9XHJcbn0iXX0=