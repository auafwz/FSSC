/**
 * @fileoverview added by tsickle
 * Generated from: lib/component/external-integration/external-integration.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, ElementRef, EventEmitter, forwardRef, Injector, Input, Optional, Output, ViewChild, ViewContainerRef } from "@angular/core";
import { DialogComponent } from "@farris/ui-dialog";
import { VariableParseService, ViewModel } from "@farris/devkit";
import { ExternalIntegrationService } from "./external-integration-service";
import { NgControl, NG_VALUE_ACCESSOR } from "@angular/forms";
import { Observable, of } from "rxjs";
import { ListViewComponent } from "@farris/ui-list-view";
var ExternalIntegrationComponent = /** @class */ (function () {
    function ExternalIntegrationComponent(vm, el, extIntgrtnSrvc, variableParseService, resolver, inj) {
        var _this = this;
        this.vm = vm;
        this.el = el;
        this.extIntgrtnSrvc = extIntgrtnSrvc;
        this.variableParseService = variableParseService;
        this.resolver = resolver;
        this.inj = inj;
        /**
         * 模态框宽
         */
        this.width = 960;
        /**
         * 模态框高
         */
        this.height = 577;
        this.fieldText = "";
        this.placeholder = "请选择";
        // 是否只读
        this.readonly = false;
        /**
         * 内容中留白边距
         */
        this.containerMargin = { top: 0, bottom: 5, left: 10, right: 10 };
        /**
         * 指令回填sap数据
         */
        this.selectSapData = new EventEmitter();
        this.afterOnblur = new EventEmitter();
        /**
         * 多表数据集合
         */
        this.tableData = [];
        /**
         * 模态框导航栏当前选中项
         */
        this.currentLink = {};
        /**
         * 模态框确定按钮是否可用
         */
        this.ensureFlag = true;
        this.containerStyle = {
            marginLeft: this.containerMargin.left + "px",
            marginRight: this.containerMargin.right + "px",
            marginTop: this.containerMargin.top + "px",
            marginBottom: this.containerMargin.bottom + "px"
        };
        this.beforeClose = (/**
         * @return {?}
         */
        function () {
            _this.tableData = [];
            _this.ensureFlag = true;
            _this.sendSapData();
            return of(true);
        });
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) { };
    /**
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.fieldTextChange = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var pathArr = this.getBindingPathArray();
        this.vm.bindingData.setValue(pathArr.concat(this.ngControl.name), this.fieldText, true, true);
    };
    /**
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} obj
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.writeValue = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        this.fieldText = obj;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) { };
    /**
     * @param {?} fn
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) { };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) { };
    /**
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngControl = this.inj.get(NgControl);
        // 卡片绑定onblur事件，表格再grid-external-integration中绑定onblur事件
        if (this.mappingType != "grid") {
            this.input.nativeElement.onblur = (/**
             * @return {?}
             */
            function () {
                _this.callSapService();
            });
        }
        this.extIntgrtnSrvc.sapData.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.sapDataHandle(data);
        }));
    };
    /**
     * 打开模态框
     * @returns
     */
    /**
     * 打开模态框
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.showDialog = /**
     * 打开模态框
     * @return {?}
     */
    function () {
        this.farrisListView.listClick.emit({
            data: [this.tableData[0]],
            index: 0,
            checkChangeEvent: false
        });
        this.farrisListView.clickItem = this.tableData[0];
        this.dialog.show();
        return false;
    };
    /**
     * 调用sap外部服务，出参在ngOninit监听
     */
    /**
     * 调用sap外部服务，出参在ngOninit监听
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.callSapService = /**
     * 调用sap外部服务，出参在ngOninit监听
     * @return {?}
     */
    function () {
        this.fieldTextChange();
        this.extIntgrtnSrvc.queryExtIntegrationService(this.externalParams, this.serviceCode);
    };
    /**
     * 处理sap出参
     * @param data sap出参
     */
    /**
     * 处理sap出参
     * @param {?} data sap出参
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.sapDataHandle = /**
     * 处理sap出参
     * @param {?} data sap出参
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (!data) {
            return;
        }
        /** @type {?} */
        var tableNameList = Object.keys(data);
        /** @type {?} */
        var mapTableList = this.getTableListFromMapFields();
        // 取交集
        tableNameList = tableNameList.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return mapTableList.indexOf(item) != -1;
        }));
        // 多表场景
        if (tableNameList.length > 1) {
            // 校验是否弹出模态框
            /** @type {?} */
            var openDialogFlag = this.checkMultiTableData(data, tableNameList);
            if (openDialogFlag == "open") {
                // 组装模态框数据
                this.assembleTableData(data);
                this.showDialog();
            }
            else if (openDialogFlag == "backfill") {
                // 多表，每个表只有一条数据
                /** @type {?} */
                var backfillData_1 = {};
                tableNameList.forEach((/**
                 * @param {?} tableName
                 * @return {?}
                 */
                function (tableName) {
                    Object.assign(backfillData_1, _this.assembleSapData(tableName, data[tableName][0]));
                }));
                this.sendSapData(backfillData_1);
            }
            else {
                // 多表无数据
                this.sendSapData();
            }
        }
        else if (tableNameList.length == 1) {
            /** @type {?} */
            var tableName = tableNameList[0];
            /** @type {?} */
            var sapDataLength = (data[tableName] || []).length;
            if (sapDataLength > 0) {
                if (sapDataLength == 1) {
                    // 一个表只有一条数据
                    /** @type {?} */
                    var sapData = this.assembleSapData(tableName, data[tableName][0]);
                    this.sendSapData(sapData);
                }
                else if (sapDataLength > 1) {
                    // 一个表有多条数据
                    this.assembleTableData(data);
                    this.showDialog();
                    return;
                }
            }
        }
        else {
            // 处理查询异常，editor没有endPending
            this.sendSapData();
        }
    };
    /**
     * @param {?} data
     * @param {?} tableNameList
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.checkMultiTableData = /**
     * @param {?} data
     * @param {?} tableNameList
     * @return {?}
     */
    function (data, tableNameList) {
        /** @type {?} */
        var openDialogFlag = "";
        for (var index = 0; index < tableNameList.length; index++) {
            /** @type {?} */
            var tableName = tableNameList[index];
            if (data[tableName].length > 1) {
                openDialogFlag = "open";
                break;
            }
            else if (data[tableName].length == 0 && openDialogFlag != "backfill") {
                openDialogFlag = "none";
                continue;
            }
            openDialogFlag = "backfill";
        }
        return openDialogFlag;
    };
    /**
     * 组装模态框数据
     * @param data sap出参
     */
    /**
     * 组装模态框数据
     * @param {?} data sap出参
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.assembleTableData = /**
     * 组装模态框数据
     * @param {?} data sap出参
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var tableNameList = Object.keys(data);
        /** @type {?} */
        var mapTableList = this.getTableListFromMapFields();
        // 取交集
        mapTableList = mapTableList.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return tableNameList.indexOf(item) != -1;
        }));
        if (mapTableList.length > 0) {
            // 遍历sap映射表，组装表及对应数据
            mapTableList.forEach((/**
             * @param {?} mapTable
             * @return {?}
             */
            function (mapTable) {
                // 组装模态框中单表数据
                /** @type {?} */
                var tableInfo = _this.assembleTableInfo(mapTable, data);
                if (tableInfo &&
                    Object.keys(tableInfo).length > 0 &&
                    (tableInfo.data || []).length > 0) {
                    _this.tableData.push(tableInfo);
                }
            }));
        }
    };
    /**
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.getTableListFromMapFields = /**
     * @return {?}
     */
    function () {
        // 获取需要回填的表
        /** @type {?} */
        var mapKeyList = Object.keys(this.myField);
        // 定义sap映射表集合
        /** @type {?} */
        var mapTableList = [];
        (mapKeyList || []).forEach((/**
         * @param {?} mapKey
         * @return {?}
         */
        function (mapKey) {
            // 在映射关系中获取sap出参中的表集合
            mapTableList.push(mapKey.split(".")[0]);
        }));
        // 去重
        mapTableList = Array.from(new Set(mapTableList));
        return mapTableList;
    };
    /**
     * 组装模态框中单表数据
     * @param mapTable 表名
     * @param data sap出参
     * @returns 模态框单表数据对象
     */
    /**
     * 组装模态框中单表数据
     * @param {?} mapTable 表名
     * @param {?} data sap出参
     * @return {?} 模态框单表数据对象
     */
    ExternalIntegrationComponent.prototype.assembleTableInfo = /**
     * 组装模态框中单表数据
     * @param {?} mapTable 表名
     * @param {?} data sap出参
     * @return {?} 模态框单表数据对象
     */
    function (mapTable, data) {
        // 模态框单表数据对象
        /** @type {?} */
        var tableInfo = {};
        // 表头集合
        /** @type {?} */
        var tableColumnList = [];
        // 遍历sap出参表信息，获取表头中文、表名
        (this.extTableSchemas || []).forEach((/**
         * @param {?} tableSchema
         * @return {?}
         */
        function (tableSchema) {
            if (tableSchema.code == mapTable) {
                tableInfo.name = tableSchema.name;
                // 模拟主键，保证farris-grid组件【单选】功能正常
                /** @type {?} */
                var idColumn = {};
                idColumn.field = "id";
                idColumn.title = "序号";
                tableColumnList.push(idColumn);
                // 组装表头
                tableSchema.columns.forEach((/**
                 * @param {?} column
                 * @return {?}
                 */
                function (column) {
                    /** @type {?} */
                    var tableColumn = {};
                    tableColumn.field = column.code;
                    tableColumn.title = column.name;
                    tableColumnList.push(tableColumn);
                }));
                tableInfo.columns = tableColumnList;
                tableInfo.code = mapTable;
                // 给表数据增加模拟主键
                (data[mapTable] || []).forEach((/**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */
                function (item, index) {
                    item["id"] = index + 1;
                }));
                tableInfo.data = data[mapTable];
            }
        }));
        return tableInfo;
    };
    /**
     * 导航栏点击事件
     * @param event 导航栏信息
     * @returns
     */
    /**
     * 导航栏点击事件
     * @param {?} event 导航栏信息
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.listClick = /**
     * 导航栏点击事件
     * @param {?} event 导航栏信息
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var clickData = event.data;
        if (event.data.disable) {
            return false;
        }
        else {
            if (typeof this.currentLink["data"] !== "undefined") {
                if (clickData[0].code === this.currentLink["data"][0].code) {
                    return false;
                }
                else {
                    this.currentLink = event;
                }
            }
            else {
                this.currentLink = event;
            }
        }
    };
    /**
     * 模态框，确定，取消按钮
     * @param flag ensure:确定按钮，cancel：取消按钮
     */
    /**
     * 模态框，确定，取消按钮
     * @param {?} flag ensure:确定按钮，cancel：取消按钮
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.confirm = /**
     * 模态框，确定，取消按钮
     * @param {?} flag ensure:确定按钮，cancel：取消按钮
     * @return {?}
     */
    function (flag) {
        // 点击确定按钮
        if (flag == "ensure") {
            /** @type {?} */
            var sapData = {};
            // 遍历模态框表数据，组装回填数据
            for (var index = 0; index < this.tableData.length; index++) {
                /** @type {?} */
                var tableInfo = this.tableData[index];
                Object.assign(sapData, this.assembleSapData(tableInfo.code, tableInfo.selectedData.data));
            }
            this.sendSapData(sapData);
        }
        // 清空模态框数据
        this.tableData = [];
        // 关闭模态框
        this.dialog.close();
    };
    /**
     * 选中一行事件
     * @param selectedRow 选中行数据
     * @param tableName 当前表格对应表名
     */
    /**
     * 选中一行事件
     * @param {?} selectedRow 选中行数据
     * @param {?} tableName 当前表格对应表名
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.selectRowChange = /**
     * 选中一行事件
     * @param {?} selectedRow 选中行数据
     * @param {?} tableName 当前表格对应表名
     * @return {?}
     */
    function (selectedRow, tableName) {
        this.tableData.forEach((/**
         * @param {?} tableInfo
         * @return {?}
         */
        function (tableInfo) {
            if (tableInfo.code == tableName) {
                tableInfo.selectedData = selectedRow;
            }
        }));
        this.setEnsureButtonFlag();
    };
    /**
     * 取消一行事件
     * @param selectedRow 被取消行数据
     * @param tableName 当前表格对应表名
     */
    /**
     * 取消一行事件
     * @param {?} selectedRow 被取消行数据
     * @param {?} tableName 当前表格对应表名
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.unSelect = /**
     * 取消一行事件
     * @param {?} selectedRow 被取消行数据
     * @param {?} tableName 当前表格对应表名
     * @return {?}
     */
    function (selectedRow, tableName) {
        this.tableData.forEach((/**
         * @param {?} tableInfo
         * @return {?}
         */
        function (tableInfo) {
            if (tableInfo.code == tableName) {
                tableInfo.selectedData = null;
                tableInfo.selectedValue = "";
            }
        }));
        selectedRow = null;
        this.setEnsureButtonFlag();
    };
    /**
     * 设置模态框确定按钮是否可用
     */
    /**
     * 设置模态框确定按钮是否可用
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.setEnsureButtonFlag = /**
     * 设置模态框确定按钮是否可用
     * @return {?}
     */
    function () {
        /** @type {?} */
        var flag = false;
        for (var index = 0; index < this.tableData.length; index++) {
            /** @type {?} */
            var tableInfo = this.tableData[index];
            if (!tableInfo.selectedData) {
                flag = true;
                break;
            }
        }
        this.ensureFlag = flag;
    };
    /**
     * 组装sap回填数据
     * @param tableName 表名
     * @param tableData 表数据
     * @returns (表名.表字段名:表数据):Object
     */
    /**
     * 组装sap回填数据
     * @param {?} tableName 表名
     * @param {?} tableData 表数据
     * @return {?} (表名.表字段名:表数据):Object
     */
    ExternalIntegrationComponent.prototype.assembleSapData = /**
     * 组装sap回填数据
     * @param {?} tableName 表名
     * @param {?} tableData 表数据
     * @return {?} (表名.表字段名:表数据):Object
     */
    function (tableName, tableData) {
        if (!tableName || !tableData) {
            return;
        }
        // sap回填数据
        /** @type {?} */
        var sapData = {};
        // 表字段名集合
        /** @type {?} */
        var tableDataItemKeys = Object.keys(tableData);
        for (var index = 0; index < tableDataItemKeys.length; index++) {
            /** @type {?} */
            var itemKey = tableDataItemKeys[index];
            // sap回填数据key= 表名.表字段名
            /** @type {?} */
            var key = tableName + "." + itemKey;
            sapData[key] = tableData[itemKey];
        }
        return sapData;
    };
    /**
     * 回填sap数据
     * @param sapData 将要回填的sap数据
     */
    /**
     * 回填sap数据
     * @private
     * @param {?=} sapData 将要回填的sap数据
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.sendSapData = /**
     * 回填sap数据
     * @private
     * @param {?=} sapData 将要回填的sap数据
     * @return {?}
     */
    function (sapData) {
        if (sapData) {
            this.selectSapData.emit(sapData);
        }
        // 子表关闭editor状态
        if (this.mappingType == "grid") {
            this.afterOnblur.emit();
        }
    };
    /**
     * @private
     * @return {?}
     */
    ExternalIntegrationComponent.prototype.getBindingPathArray = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var path = this.vm.bindingPath;
        if (path) {
            return path.split("/").filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n !== ""; }));
        }
        return [];
    };
    ExternalIntegrationComponent.decorators = [
        { type: Component, args: [{
                    selector: "web-external-integration",
                    template: "<input [(ngModel)]=\"fieldText\" #input  class=\"form-control\" input-end-edit [readonly]=\"false\"\n  tabindex=\"0\" maxlength=\"36\" />\n\n<farris-dialog #dialog [title]=\"'\u9009\u62E9\u6570\u636E'\" [beforeClose]=\"beforeClose\"  [width]=\"1000\" [height]=\"834\" [showButtons]=\"true\" [showMaxButton]=\"true\"\n  [showCloseButton]=\"true\" [enableScroll]=\"false\" [dialogHeaderHeight]=\"50\" [buttons]=\"defaultButtonRef\">\n  <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\">\n    <div class=\"listnav-example-wrapper\">\n      <div class=\"example-side-nav\">\n        <farris-list-nav  [listNavWidth]=\"240\" (listClick)=\"listClick($event)\">\n          <ng-template listNavContent>\n            <farris-list-view #farrisListView [showEmpty]=\"true\" [data]=\"tableData\" [activeIndex]=\"3\" listidName=\"code\" (listClick)=\"listClick($event)\">\n              <ng-template #navView listTemplate let-item=\"item\" let-selected=\"selectedItem\">\n                <div class=\"f-template-listnav-row\">\n                  <!-- routerLinkActive=\"active\" -->\n                  <a class=\"list-nav-link\" [ngStyle]=\"{'pointer-events': item.disable ?'none' : '','width':240 +'px'}\"\n                     [title]=\"item.name\">\n                    <span class=\"nav-item-name\">\n                      {{ item.name }}\n                    </span>\n                  </a>\n                </div>\n              </ng-template>\n            </farris-list-view>\n          </ng-template>\n\n          <!-- <ng-template listNavFooter>\n                \u5E95\u90E8\u90E8\u5206\n            </ng-template> -->\n\n        </farris-list-nav>\n      </div>\n      <div class=\"example-content\" >\n        <ng-container #girdView *ngFor=\"let item of tableData;let i = index\">\n          <div style=\"height:100%\" [hidden]=\"! (currentLink && item.code == ((currentLink['data'] || [])[0] || {})['code'])\" >\n            <farris-datagrid \n              [autoFitColumns]=\"true\" \n              [columns]=\"item.columns\" \n              [data]=\"item.data\" \n              [fitColumns]=\"true\"\n              [fit]=\"true\" \n              [showBorder]=\"true\" \n              [(selectValue)]=\"item.selectedValue\"\n              [keepSelect]=\"false\"\n              [pagination]=\"false\"\n              (selectChanged)=\"selectRowChange($event, item.code)\"\n              (unSelect)=\"unSelect(null, item.code)\">\n            </farris-datagrid>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</farris-dialog>\n\n<ng-template #defaultButtonRef>\n  <button #okbtn type=\"button\" [disabled]=\"ensureFlag\" (click)=\"confirm('ensure')\"  class=\"btn btn-primary btn-lg\">\n    {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\n  </button>\n  <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"confirm('cancel')\" [disabled]=\"false\">\n    {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\n  </button>\n</ng-template>",
                    providers: [
                        ExternalIntegrationService,
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return ExternalIntegrationComponent; })),
                            multi: true
                        }
                    ],
                    styles: [".listnav-example-wrapper{background-color:#e7ebef;display:flex;height:100%}.listnav-example-wrapper .example-side-nav{flex:0 0 auto}.listnav-example-wrapper .example-content{flex:1 1 0;width:726px;overflow-y:auto;padding:10px 10px 10px 4px}.listnav-example-wrapper .example-content .listnav-content{height:100%;width:100%;background-color:#fff}.listnav-example-wrapper .example-content.example-content-right{padding:10px 4px 10px 10px}"]
                }] }
    ];
    /** @nocollapse */
    ExternalIntegrationComponent.ctorParameters = function () { return [
        { type: ViewModel, decorators: [{ type: Optional }] },
        { type: ElementRef },
        { type: ExternalIntegrationService },
        { type: VariableParseService },
        { type: ComponentFactoryResolver },
        { type: Injector }
    ]; };
    ExternalIntegrationComponent.propDecorators = {
        width: [{ type: Input }],
        height: [{ type: Input }],
        serviceCode: [{ type: Input, args: ["serviceCode",] }],
        externalParams: [{ type: Input, args: ["externalParams",] }],
        mappingType: [{ type: Input, args: ["mappingType",] }],
        myField: [{ type: Input, args: ["mapFields",] }],
        fieldText: [{ type: Input }],
        extTableSchemas: [{ type: Input, args: ["extTableSchemas",] }],
        placeholder: [{ type: Input }],
        readonly: [{ type: Input }],
        beforeSapSrvc: [{ type: Input }],
        customData: [{ type: Input }],
        selectSapData: [{ type: Output }],
        afterOnblur: [{ type: Output }],
        dialog: [{ type: ViewChild, args: ["dialog",] }],
        input: [{ type: ViewChild, args: ["input",] }],
        girdView: [{ type: ViewChild, args: ["girdView", { read: ViewContainerRef },] }],
        farrisListView: [{ type: ViewChild, args: ["farrisListView",] }]
    };
    return ExternalIntegrationComponent;
}());
export { ExternalIntegrationComponent };
if (false) {
    /**
     * 模态框宽
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.width;
    /**
     * 模态框高
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.height;
    /**
     * 服务名
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.serviceCode;
    /**
     * 外部服务请求入参,表达式
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.externalParams;
    /**
     * form:主表回填形式,grid：子表回填形式
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.mappingType;
    /**
     * 映射关系
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.myField;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.fieldText;
    /**
     * sap出参表信息描述
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.extTableSchemas;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.placeholder;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.readonly;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.beforeSapSrvc;
    /**
     * 内容中留白边距
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.containerMargin;
    /**
     * 自定义数据
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.customData;
    /**
     * 指令回填sap数据
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.selectSapData;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.afterOnblur;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.dialog;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.input;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.girdView;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.farrisListView;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.componentRef;
    /**
     * 多表数据集合
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.tableData;
    /**
     * 模态框导航栏当前选中项
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.currentLink;
    /**
     * 模态框确定按钮是否可用
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.ensureFlag;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.ngControl;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.containerStyle;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.beforeClose;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.vm;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.extIntgrtnSrvc;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.variableParseService;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.inj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0ZXJuYWwtaW50ZWdyYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9leHRlcm5hbC1pbnRlZ3JhdGlvbi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnQvZXh0ZXJuYWwtaW50ZWdyYXRpb24vZXh0ZXJuYWwtaW50ZWdyYXRpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUVMLFNBQVMsRUFDVCx3QkFBd0IsRUFFeEIsVUFBVSxFQUNWLFlBQVksRUFDWixVQUFVLEVBQ1YsUUFBUSxFQUNSLEtBQUssRUFJTCxRQUFRLEVBQ1IsTUFBTSxFQUVOLFNBQVMsRUFDVCxnQkFBZ0IsRUFDakIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUU1RSxPQUFPLEVBRUwsU0FBUyxFQUNULGlCQUFpQixFQUNsQixNQUFNLGdCQUFnQixDQUFDO0FBRXhCLE9BQU8sRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXpEO0lBa0VFLHNDQUNzQixFQUFhLEVBQzFCLEVBQWMsRUFDYixjQUEwQyxFQUMxQyxvQkFBMEMsRUFDMUMsUUFBa0MsRUFDbEMsR0FBYTtRQU52QixpQkFPSTtRQU5rQixPQUFFLEdBQUYsRUFBRSxDQUFXO1FBQzFCLE9BQUUsR0FBRixFQUFFLENBQVk7UUFDYixtQkFBYyxHQUFkLGNBQWMsQ0FBNEI7UUFDMUMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQUMxQyxhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUNsQyxRQUFH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LG1EQUEwQzs7Ozs7SUFFMUMsK0NBQWlDOztJQUNqQyxpREFBZ0M7Ozs7O0lBRWhDLHVEQUErQzs7SUFFL0MsbURBQTZCOztJQUU3QixnREFBMEI7O0lBRTFCLHFEQUF3Qzs7Ozs7SUFHeEMsdURBQTZEOzs7OztJQUU3RCxrREFBeUI7Ozs7O0lBRXpCLHFEQUE2Qzs7SUFDN0MsbURBQTJDOztJQUMzQyw4Q0FBNkM7O0lBQzdDLDZDQUEyQzs7SUFDM0MsZ0RBQThFOztJQUM5RSxzREFBK0Q7O0lBQy9ELG9EQUE4Qzs7Ozs7SUFHOUMsaURBQTRCOzs7OztJQUU1QixtREFBc0I7Ozs7O0lBRXRCLGtEQUEyQjs7SUFFM0IsaURBQXFCOztJQUVyQixzREFLRTs7SUFrUkYsbURBS0U7Ozs7O0lBcFJBLDBDQUFpQzs7SUFDakMsMENBQXFCOzs7OztJQUNyQixzREFBa0Q7Ozs7O0lBQ2xELDREQUFrRDs7Ozs7SUFDbEQsZ0RBQTBDOzs7OztJQUMxQywyQ0FBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDb21wb25lbnQsXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgQ29tcG9uZW50UmVmLFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIEluamVjdG9yLFxuICBJbnB1dCxcbiAgT25DaGFuZ2VzLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3B0aW9uYWwsXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVmlld0NoaWxkLFxuICBWaWV3Q29udGFpbmVyUmVmXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1kaWFsb2dcIjtcbmltcG9ydCB7IFZhcmlhYmxlUGFyc2VTZXJ2aWNlLCBWaWV3TW9kZWwgfSBmcm9tIFwiQGZhcnJpcy9kZXZraXRcIjtcbmltcG9ydCB7IEV4dGVybmFsSW50ZWdyYXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4vZXh0ZXJuYWwtaW50ZWdyYXRpb24tc2VydmljZVwiO1xuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1kYXRhZ3JpZFwiO1xuaW1wb3J0IHtcbiAgQ29udHJvbFZhbHVlQWNjZXNzb3IsXG4gIE5nQ29udHJvbCxcbiAgTkdfVkFMVUVfQUNDRVNTT1Jcbn0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XG5pbXBvcnQgeyBUYWJsZUNvbHVtbiwgVGFibGVJbmZvIH0gZnJvbSBcIi4vZXh0ZXJuYWwtaW50ZWdyYXRpb24tZGlzcGxheXR5cGVcIjtcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IExpc3RWaWV3Q29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktbGlzdC12aWV3XCI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJ3ZWItZXh0ZXJuYWwtaW50ZWdyYXRpb25cIixcbiAgdGVtcGxhdGVVcmw6IFwiLi9leHRlcm5hbC1pbnRlZ3JhdGlvbi5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vZXh0ZXJuYWwtaW50ZWdyYXRpb24uY29tcG9uZW50LnNjc3NcIl0sXG4gIHByb3ZpZGVyczogW1xuICAgIEV4dGVybmFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRXh0ZXJuYWxJbnRlZ3JhdGlvbkNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBFeHRlcm5hbEludGVncmF0aW9uQ29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuICAvKiog5qih5oCB5qGG5a69ICovXG4gIEBJbnB1dCgpIHdpZHRoOiBudW1iZXIgPSA5NjA7XG4gIC8qKiDmqKHmgIHmoYbpq5ggKi9cbiAgQElucHV0KCkgaGVpZ2h0OiBudW1iZXIgPSA1Nzc7XG4gIC8qKiDmnI3liqHlkI0gKi9cbiAgQElucHV0KFwic2VydmljZUNvZGVcIikgc2VydmljZUNvZGU6IHN0cmluZztcbiAgLyoqIOWklumDqOacjeWKoeivt+axguWFpeWPgizooajovr7lvI8gKi9cbiAgQElucHV0KFwiZXh0ZXJuYWxQYXJhbXNcIikgZXh0ZXJuYWxQYXJhbXM6IGFueTtcbiAgLyoqIGZvcm065Li76KGo5Zue5aGr5b2i5byPLGdyaWTvvJrlrZDooajlm57loavlvaLlvI8gKi9cbiAgQElucHV0KFwibWFwcGluZ1R5cGVcIikgbWFwcGluZ1R5cGU6IHN0cmluZztcbiAgLyoqIOaYoOWwhOWFs+ezuyAqL1xuICBASW5wdXQoXCJtYXBGaWVsZHNcIikgbXlGaWVsZDogYW55O1xuICBASW5wdXQoKSBmaWVsZFRleHQ6IHN0cmluZyA9IFwiXCI7XG4gIC8qKiBzYXDlh7rlj4Looajkv6Hmga/mj4/ov7AgKi9cbiAgQElucHV0KFwiZXh0VGFibGVTY2hlbWFzXCIpIGV4dFRhYmxlU2NoZW1hczogYW55O1xuXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gXCLor7fpgInmi6lcIjtcbiAgLy8g5piv5ZCm5Y+q6K+7XG4gIEBJbnB1dCgpIHJlYWRvbmx5ID0gZmFsc2U7XG4gIC8vIOivt+axguWJjeS6i+S7tlxuICBASW5wdXQoKSBiZWZvcmVTYXBTcnZjOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgLyoqIOWGheWuueS4reeVmeeZvei+uei3nSAqL1xuICBjb250YWluZXJNYXJnaW4gPSB7IHRvcDogMCwgYm90dG9tOiA1LCBsZWZ0OiAxMCwgcmlnaHQ6IDEwIH07XG4gIC8qKiDoh6rlrprkuYnmlbDmja4gKi9cbiAgQElucHV0KCkgY3VzdG9tRGF0YTogYW55O1xuICAvKiog5oyH5Luk5Zue5aGrc2Fw5pWw5o2uICovXG4gIEBPdXRwdXQoKSBzZWxlY3RTYXBEYXRhID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgYWZ0ZXJPbmJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBWaWV3Q2hpbGQoXCJkaWFsb2dcIikgZGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoXCJpbnB1dFwiKSBpbnB1dDogRWxlbWVudFJlZjxhbnk+O1xuICBAVmlld0NoaWxkKFwiZ2lyZFZpZXdcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGdpcmRWaWV3OiBWaWV3Q29udGFpbmVyUmVmO1xuICBAVmlld0NoaWxkKFwiZmFycmlzTGlzdFZpZXdcIikgZmFycmlzTGlzdFZpZXc6IExpc3RWaWV3Q29tcG9uZW50O1xuICBjb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxEYXRhZ3JpZENvbXBvbmVudD47XG5cbiAgLyoqIOWkmuihqOaVsOaNrumbhuWQiCAqL1xuICB0YWJsZURhdGE6IFRhYmxlSW5mb1tdID0gW107XG4gIC8qKiDmqKHmgIHmoYblr7zoiKrmoI/lvZPliY3pgInkuK3pobkgKi9cbiAgY3VycmVudExpbms6IGFueSA9IHt9O1xuICAvKiog5qih5oCB5qGG56Gu5a6a5oyJ6ZKu5piv5ZCm5Y+v55SoICovXG4gIGVuc3VyZUZsYWc6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIG5nQ29udHJvbDogTmdDb250cm9sO1xuXG4gIGNvbnRhaW5lclN0eWxlID0ge1xuICAgIG1hcmdpbkxlZnQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLmxlZnQgKyBcInB4XCIsXG4gICAgbWFyZ2luUmlnaHQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0ICsgXCJweFwiLFxuICAgIG1hcmdpblRvcDogdGhpcy5jb250YWluZXJNYXJnaW4udG9wICsgXCJweFwiLFxuICAgIG1hcmdpbkJvdHRvbTogdGhpcy5jb250YWluZXJNYXJnaW4uYm90dG9tICsgXCJweFwiXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSB2bTogVmlld01vZGVsLFxuICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIGV4dEludGdydG5TcnZjOiBFeHRlcm5hbEludGVncmF0aW9uU2VydmljZSxcbiAgICBwcml2YXRlIHZhcmlhYmxlUGFyc2VTZXJ2aWNlOiBWYXJpYWJsZVBhcnNlU2VydmljZSxcbiAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgcHJpdmF0ZSBpbmo6IEluamVjdG9yXG4gICkge31cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7fVxuXG4gIGZpZWxkVGV4dENoYW5nZSgpIHtcbiAgICBjb25zdCBwYXRoQXJyID0gdGhpcy5nZXRCaW5kaW5nUGF0aEFycmF5KCk7XG4gICAgdGhpcy52bS5iaW5kaW5nRGF0YS5zZXRWYWx1ZShcbiAgICAgIHBhdGhBcnIuY29uY2F0KHRoaXMubmdDb250cm9sLm5hbWUpLFxuICAgICAgdGhpcy5maWVsZFRleHQsXG4gICAgICB0cnVlLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7fVxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHt9XG4gIHdyaXRlVmFsdWUob2JqOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmZpZWxkVGV4dCA9IG9iajtcbiAgfVxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHt9XG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHt9XG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5uZ0NvbnRyb2wgPSB0aGlzLmluai5nZXQoTmdDb250cm9sKTtcbiAgICAvLyDljaHniYfnu5HlrppvbmJsdXLkuovku7bvvIzooajmoLzlho1ncmlkLWV4dGVybmFsLWludGVncmF0aW9u5Lit57uR5a6ab25ibHVy5LqL5Lu2XG4gICAgaWYgKHRoaXMubWFwcGluZ1R5cGUgIT0gXCJncmlkXCIpIHtcbiAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2FsbFNhcFNlcnZpY2UoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhpcy5leHRJbnRncnRuU3J2Yy5zYXBEYXRhLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XG4gICAgICB0aGlzLnNhcERhdGFIYW5kbGUoZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5omT5byA5qih5oCB5qGGXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBzaG93RGlhbG9nKCk6IGFueSB7XG4gICAgdGhpcy5mYXJyaXNMaXN0Vmlldy5saXN0Q2xpY2suZW1pdCh7XG4gICAgICBkYXRhOiBbdGhpcy50YWJsZURhdGFbMF1dLFxuICAgICAgaW5kZXg6IDAsXG4gICAgICBjaGVja0NoYW5nZUV2ZW50OiBmYWxzZVxuICAgIH0pO1xuICAgIHRoaXMuZmFycmlzTGlzdFZpZXcuY2xpY2tJdGVtID0gdGhpcy50YWJsZURhdGFbMF07XG4gICAgdGhpcy5kaWFsb2cuc2hvdygpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDosIPnlKhzYXDlpJbpg6jmnI3liqHvvIzlh7rlj4LlnKhuZ09uaW5pdOebkeWQrFxuICAgKi9cbiAgY2FsbFNhcFNlcnZpY2UoKSB7XG4gICAgdGhpcy5maWVsZFRleHRDaGFuZ2UoKTtcbiAgICB0aGlzLmV4dEludGdydG5TcnZjLnF1ZXJ5RXh0SW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgdGhpcy5leHRlcm5hbFBhcmFtcyxcbiAgICAgIHRoaXMuc2VydmljZUNvZGVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhnNhcOWHuuWPglxuICAgKiBAcGFyYW0gZGF0YSBzYXDlh7rlj4JcbiAgICovXG4gIHNhcERhdGFIYW5kbGUoZGF0YSkge1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdGFibGVOYW1lTGlzdCA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIGxldCBtYXBUYWJsZUxpc3QgPSB0aGlzLmdldFRhYmxlTGlzdEZyb21NYXBGaWVsZHMoKTtcbiAgICAvLyDlj5bkuqTpm4ZcbiAgICB0YWJsZU5hbWVMaXN0ID0gdGFibGVOYW1lTGlzdC5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICByZXR1cm4gbWFwVGFibGVMaXN0LmluZGV4T2YoaXRlbSkgIT0gLTE7XG4gICAgfSk7XG4gICAgLy8g5aSa6KGo5Zy65pmvXG4gICAgaWYgKHRhYmxlTmFtZUxpc3QubGVuZ3RoID4gMSkge1xuICAgICAgLy8g5qCh6aqM5piv5ZCm5by55Ye65qih5oCB5qGGXG4gICAgICBsZXQgb3BlbkRpYWxvZ0ZsYWcgPSB0aGlzLmNoZWNrTXVsdGlUYWJsZURhdGEoZGF0YSwgdGFibGVOYW1lTGlzdCk7XG4gICAgICBpZiAob3BlbkRpYWxvZ0ZsYWcgPT0gXCJvcGVuXCIpIHtcbiAgICAgICAgLy8g57uE6KOF5qih5oCB5qGG5pWw5o2uXG4gICAgICAgIHRoaXMuYXNzZW1ibGVUYWJsZURhdGEoZGF0YSk7XG4gICAgICAgIHRoaXMuc2hvd0RpYWxvZygpO1xuICAgICAgfSBlbHNlIGlmIChvcGVuRGlhbG9nRmxhZyA9PSBcImJhY2tmaWxsXCIpIHtcbiAgICAgICAgLy8g5aSa6KGo77yM5q+P5Liq6KGo5Y+q5pyJ5LiA5p2h5pWw5o2uXG4gICAgICAgIGxldCBiYWNrZmlsbERhdGE6IGFueSA9IHt9O1xuICAgICAgICB0YWJsZU5hbWVMaXN0LmZvckVhY2godGFibGVOYW1lID0+IHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgYmFja2ZpbGxEYXRhLFxuICAgICAgICAgICAgdGhpcy5hc3NlbWJsZVNhcERhdGEodGFibGVOYW1lLCBkYXRhW3RhYmxlTmFtZV1bMF0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZFNhcERhdGEoYmFja2ZpbGxEYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWkmuihqOaXoOaVsOaNrlxuICAgICAgICB0aGlzLnNlbmRTYXBEYXRhKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0YWJsZU5hbWVMaXN0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICBsZXQgdGFibGVOYW1lID0gdGFibGVOYW1lTGlzdFswXTtcbiAgICAgIGxldCBzYXBEYXRhTGVuZ3RoID0gKGRhdGFbdGFibGVOYW1lXSB8fCBbXSkubGVuZ3RoO1xuICAgICAgaWYgKHNhcERhdGFMZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChzYXBEYXRhTGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAvLyDkuIDkuKrooajlj6rmnInkuIDmnaHmlbDmja5cbiAgICAgICAgICBsZXQgc2FwRGF0YSA9IHRoaXMuYXNzZW1ibGVTYXBEYXRhKHRhYmxlTmFtZSwgZGF0YVt0YWJsZU5hbWVdWzBdKTtcbiAgICAgICAgICB0aGlzLnNlbmRTYXBEYXRhKHNhcERhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKHNhcERhdGFMZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8g5LiA5Liq6KGo5pyJ5aSa5p2h5pWw5o2uXG4gICAgICAgICAgdGhpcy5hc3NlbWJsZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgICAgICB0aGlzLnNob3dEaWFsb2coKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aSE55CG5p+l6K+i5byC5bi477yMZWRpdG9y5rKh5pyJZW5kUGVuZGluZ1xuICAgICAgdGhpcy5zZW5kU2FwRGF0YSgpO1xuICAgIH1cbiAgfVxuXG4gIGNoZWNrTXVsdGlUYWJsZURhdGEoZGF0YSwgdGFibGVOYW1lTGlzdCkge1xuICAgIGxldCBvcGVuRGlhbG9nRmxhZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRhYmxlTmFtZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBsZXQgdGFibGVOYW1lID0gdGFibGVOYW1lTGlzdFtpbmRleF07XG4gICAgICBpZiAoZGF0YVt0YWJsZU5hbWVdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgb3BlbkRpYWxvZ0ZsYWcgPSBcIm9wZW5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKGRhdGFbdGFibGVOYW1lXS5sZW5ndGggPT0gMCAmJiBvcGVuRGlhbG9nRmxhZyAhPSBcImJhY2tmaWxsXCIpIHtcbiAgICAgICAgb3BlbkRpYWxvZ0ZsYWcgPSBcIm5vbmVcIjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBvcGVuRGlhbG9nRmxhZyA9IFwiYmFja2ZpbGxcIjtcbiAgICB9XG4gICAgcmV0dXJuIG9wZW5EaWFsb2dGbGFnO1xuICB9XG5cbiAgLyoqXG4gICAqIOe7hOijheaooeaAgeahhuaVsOaNrlxuICAgKiBAcGFyYW0gZGF0YSBzYXDlh7rlj4JcbiAgICovXG4gIGFzc2VtYmxlVGFibGVEYXRhKGRhdGEpIHtcbiAgICBsZXQgdGFibGVOYW1lTGlzdCA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIGxldCBtYXBUYWJsZUxpc3QgPSB0aGlzLmdldFRhYmxlTGlzdEZyb21NYXBGaWVsZHMoKTtcbiAgICAvLyDlj5bkuqTpm4ZcbiAgICBtYXBUYWJsZUxpc3QgPSBtYXBUYWJsZUxpc3QuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgcmV0dXJuIHRhYmxlTmFtZUxpc3QuaW5kZXhPZihpdGVtKSAhPSAtMTtcbiAgICB9KTtcbiAgICBpZiAobWFwVGFibGVMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIOmBjeWOhnNhcOaYoOWwhOihqO+8jOe7hOijheihqOWPiuWvueW6lOaVsOaNrlxuICAgICAgbWFwVGFibGVMaXN0LmZvckVhY2gobWFwVGFibGUgPT4ge1xuICAgICAgICAvLyDnu4Too4XmqKHmgIHmoYbkuK3ljZXooajmlbDmja5cbiAgICAgICAgbGV0IHRhYmxlSW5mbyA9IHRoaXMuYXNzZW1ibGVUYWJsZUluZm8obWFwVGFibGUsIGRhdGEpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGFibGVJbmZvICYmXG4gICAgICAgICAgT2JqZWN0LmtleXModGFibGVJbmZvKS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgKHRhYmxlSW5mby5kYXRhIHx8IFtdKS5sZW5ndGggPiAwXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2godGFibGVJbmZvKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VGFibGVMaXN0RnJvbU1hcEZpZWxkcygpIHtcbiAgICAvLyDojrflj5bpnIDopoHlm57loavnmoTooahcbiAgICBsZXQgbWFwS2V5TGlzdCA9IE9iamVjdC5rZXlzKHRoaXMubXlGaWVsZCk7XG4gICAgLy8g5a6a5LmJc2Fw5pig5bCE6KGo6ZuG5ZCIXG4gICAgbGV0IG1hcFRhYmxlTGlzdCA9IFtdO1xuICAgIChtYXBLZXlMaXN0IHx8IFtdKS5mb3JFYWNoKG1hcEtleSA9PiB7XG4gICAgICAvLyDlnKjmmKDlsITlhbPns7vkuK3ojrflj5ZzYXDlh7rlj4LkuK3nmoTooajpm4blkIhcbiAgICAgIG1hcFRhYmxlTGlzdC5wdXNoKG1hcEtleS5zcGxpdChcIi5cIilbMF0pO1xuICAgIH0pO1xuICAgIC8vIOWOu+mHjVxuICAgIG1hcFRhYmxlTGlzdCA9IEFycmF5LmZyb20obmV3IFNldChtYXBUYWJsZUxpc3QpKTtcbiAgICByZXR1cm4gbWFwVGFibGVMaXN0O1xuICB9XG5cbiAgLyoqXG4gICAqIOe7hOijheaooeaAgeahhuS4reWNleihqOaVsOaNrlxuICAgKiBAcGFyYW0gbWFwVGFibGUg6KGo5ZCNXG4gICAqIEBwYXJhbSBkYXRhIHNhcOWHuuWPglxuICAgKiBAcmV0dXJucyDmqKHmgIHmoYbljZXooajmlbDmja7lr7nosaFcbiAgICovXG4gIGFzc2VtYmxlVGFibGVJbmZvKG1hcFRhYmxlLCBkYXRhKSB7XG4gICAgLy8g5qih5oCB5qGG5Y2V6KGo5pWw5o2u5a+56LGhXG4gICAgbGV0IHRhYmxlSW5mbzogVGFibGVJbmZvID0ge1xuXG4gICAgfTtcbiAgICAvLyDooajlpLTpm4blkIhcbiAgICBsZXQgdGFibGVDb2x1bW5MaXN0ID0gW107XG4gICAgLy8g6YGN5Y6Gc2Fw5Ye65Y+C6KGo5L+h5oGv77yM6I635Y+W6KGo5aS05Lit5paH44CB6KGo5ZCNXG4gICAgKHRoaXMuZXh0VGFibGVTY2hlbWFzIHx8IFtdKS5mb3JFYWNoKHRhYmxlU2NoZW1hID0+IHtcbiAgICAgIGlmICh0YWJsZVNjaGVtYS5jb2RlID09IG1hcFRhYmxlKSB7XG4gICAgICAgIHRhYmxlSW5mby5uYW1lID0gdGFibGVTY2hlbWEubmFtZTtcbiAgICAgICAgLy8g5qih5ouf5Li76ZSu77yM5L+d6K+BZmFycmlzLWdyaWTnu4Tku7bjgJDljZXpgInjgJHlip/og73mraPluLhcbiAgICAgICAgbGV0IGlkQ29sdW1uOiBUYWJsZUNvbHVtbiA9IHt9O1xuICAgICAgICBpZENvbHVtbi5maWVsZCA9IFwiaWRcIjtcbiAgICAgICAgaWRDb2x1bW4udGl0bGUgPSBcIuW6j+WPt1wiO1xuICAgICAgICB0YWJsZUNvbHVtbkxpc3QucHVzaChpZENvbHVtbik7XG4gICAgICAgIC8vIOe7hOijheihqOWktFxuICAgICAgICB0YWJsZVNjaGVtYS5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHtcbiAgICAgICAgICBsZXQgdGFibGVDb2x1bW46IFRhYmxlQ29sdW1uID0ge307XG4gICAgICAgICAgdGFibGVDb2x1bW4uZmllbGQgPSBjb2x1bW4uY29kZTtcbiAgICAgICAgICB0YWJsZUNvbHVtbi50aXRsZSA9IGNvbHVtbi5uYW1lO1xuICAgICAgICAgIHRhYmxlQ29sdW1uTGlzdC5wdXNoKHRhYmxlQ29sdW1uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlSW5mby5jb2x1bW5zID0gdGFibGVDb2x1bW5MaXN0O1xuICAgICAgICB0YWJsZUluZm8uY29kZSA9IG1hcFRhYmxlO1xuICAgICAgICAvLyDnu5nooajmlbDmja7lop7liqDmqKHmi5/kuLvplK5cbiAgICAgICAgKGRhdGFbbWFwVGFibGVdIHx8IFtdKS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGl0ZW1bXCJpZFwiXSA9IGluZGV4ICsgMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlSW5mby5kYXRhID0gZGF0YVttYXBUYWJsZV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhYmxlSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiDlr7zoiKrmoI/ngrnlh7vkuovku7ZcbiAgICogQHBhcmFtIGV2ZW50IOWvvOiIquagj+S/oeaBr1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgbGlzdENsaWNrKGV2ZW50KSB7XG4gICAgbGV0IGNsaWNrRGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgaWYgKGV2ZW50LmRhdGEuZGlzYWJsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudExpbmtbXCJkYXRhXCJdICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmIChjbGlja0RhdGFbMF0uY29kZSA9PT0gdGhpcy5jdXJyZW50TGlua1tcImRhdGFcIl1bMF0uY29kZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRMaW5rID0gZXZlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VycmVudExpbmsgPSBldmVudDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5qih5oCB5qGG77yM56Gu5a6a77yM5Y+W5raI5oyJ6ZKuXG4gICAqIEBwYXJhbSBmbGFnIGVuc3VyZTrnoa7lrprmjInpkq7vvIxjYW5jZWzvvJrlj5bmtojmjInpkq5cbiAgICovXG5cbiAgY29uZmlybShmbGFnKSB7XG4gICAgLy8g54K55Ye756Gu5a6a5oyJ6ZKuXG4gICAgaWYgKGZsYWcgPT0gXCJlbnN1cmVcIikge1xuICAgICAgbGV0IHNhcERhdGE6IGFueSA9IHt9O1xuICAgICAgLy8g6YGN5Y6G5qih5oCB5qGG6KGo5pWw5o2u77yM57uE6KOF5Zue5aGr5pWw5o2uXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy50YWJsZURhdGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGxldCB0YWJsZUluZm8gPSB0aGlzLnRhYmxlRGF0YVtpbmRleF07XG4gICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgc2FwRGF0YSxcbiAgICAgICAgICB0aGlzLmFzc2VtYmxlU2FwRGF0YSh0YWJsZUluZm8uY29kZSwgdGFibGVJbmZvLnNlbGVjdGVkRGF0YS5kYXRhKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5zZW5kU2FwRGF0YShzYXBEYXRhKTtcbiAgICB9XG4gICAgLy8g5riF56m65qih5oCB5qGG5pWw5o2uXG4gICAgdGhpcy50YWJsZURhdGEgPSBbXTtcbiAgICAvLyDlhbPpl63mqKHmgIHmoYZcbiAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xuICB9XG5cbiAgYmVmb3JlQ2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy50YWJsZURhdGEgPSBbXTtcbiAgICB0aGlzLmVuc3VyZUZsYWcgPSB0cnVlO1xuICAgIHRoaXMuc2VuZFNhcERhdGEoKTtcbiAgICByZXR1cm4gb2YodHJ1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIOmAieS4reS4gOihjOS6i+S7tlxuICAgKiBAcGFyYW0gc2VsZWN0ZWRSb3cg6YCJ5Lit6KGM5pWw5o2uXG4gICAqIEBwYXJhbSB0YWJsZU5hbWUg5b2T5YmN6KGo5qC85a+55bqU6KGo5ZCNXG4gICAqL1xuICBzZWxlY3RSb3dDaGFuZ2Uoc2VsZWN0ZWRSb3csIHRhYmxlTmFtZSkge1xuICAgIHRoaXMudGFibGVEYXRhLmZvckVhY2godGFibGVJbmZvID0+IHtcbiAgICAgIGlmICh0YWJsZUluZm8uY29kZSA9PSB0YWJsZU5hbWUpIHtcbiAgICAgICAgdGFibGVJbmZvLnNlbGVjdGVkRGF0YSA9IHNlbGVjdGVkUm93O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc2V0RW5zdXJlQnV0dG9uRmxhZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPlua2iOS4gOihjOS6i+S7tlxuICAgKiBAcGFyYW0gc2VsZWN0ZWRSb3cg6KKr5Y+W5raI6KGM5pWw5o2uXG4gICAqIEBwYXJhbSB0YWJsZU5hbWUg5b2T5YmN6KGo5qC85a+55bqU6KGo5ZCNXG4gICAqL1xuICB1blNlbGVjdChzZWxlY3RlZFJvdywgdGFibGVOYW1lKSB7XG4gICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaCh0YWJsZUluZm8gPT4ge1xuICAgICAgaWYgKHRhYmxlSW5mby5jb2RlID09IHRhYmxlTmFtZSkge1xuICAgICAgICB0YWJsZUluZm8uc2VsZWN0ZWREYXRhID0gbnVsbDtcbiAgICAgICAgdGFibGVJbmZvLnNlbGVjdGVkVmFsdWUgPSBcIlwiO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNlbGVjdGVkUm93ID0gbnVsbDtcbiAgICB0aGlzLnNldEVuc3VyZUJ1dHRvbkZsYWcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7mqKHmgIHmoYbnoa7lrprmjInpkq7mmK/lkKblj6/nlKhcbiAgICovXG4gIHNldEVuc3VyZUJ1dHRvbkZsYWcoKSB7XG4gICAgbGV0IGZsYWcgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy50YWJsZURhdGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBsZXQgdGFibGVJbmZvID0gdGhpcy50YWJsZURhdGFbaW5kZXhdO1xuICAgICAgaWYgKCF0YWJsZUluZm8uc2VsZWN0ZWREYXRhKSB7XG4gICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5lbnN1cmVGbGFnID0gZmxhZztcbiAgfVxuXG4gIC8qKlxuICAgKiDnu4Too4VzYXDlm57loavmlbDmja5cbiAgICogQHBhcmFtIHRhYmxlTmFtZSDooajlkI1cbiAgICogQHBhcmFtIHRhYmxlRGF0YSDooajmlbDmja5cbiAgICogQHJldHVybnMgKOihqOWQjS7ooajlrZfmrrXlkI066KGo5pWw5o2uKTpPYmplY3RcbiAgICovXG4gIGFzc2VtYmxlU2FwRGF0YSh0YWJsZU5hbWUsIHRhYmxlRGF0YSkge1xuICAgIGlmICghdGFibGVOYW1lIHx8ICF0YWJsZURhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gc2Fw5Zue5aGr5pWw5o2uXG4gICAgbGV0IHNhcERhdGE6IGFueSA9IHt9O1xuICAgIC8vIOihqOWtl+auteWQjembhuWQiFxuICAgIGxldCB0YWJsZURhdGFJdGVtS2V5cyA9IE9iamVjdC5rZXlzKHRhYmxlRGF0YSk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRhYmxlRGF0YUl0ZW1LZXlzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IGl0ZW1LZXkgPSB0YWJsZURhdGFJdGVtS2V5c1tpbmRleF07XG4gICAgICAvLyBzYXDlm57loavmlbDmja5rZXk9IOihqOWQjS7ooajlrZfmrrXlkI1cbiAgICAgIGxldCBrZXkgPSB0YWJsZU5hbWUgKyBcIi5cIiArIGl0ZW1LZXk7XG4gICAgICBzYXBEYXRhW2tleV0gPSB0YWJsZURhdGFbaXRlbUtleV07XG4gICAgfVxuICAgIHJldHVybiBzYXBEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIOWbnuWhq3NhcOaVsOaNrlxuICAgKiBAcGFyYW0gc2FwRGF0YSDlsIbopoHlm57loavnmoRzYXDmlbDmja5cbiAgICovXG4gIHByaXZhdGUgc2VuZFNhcERhdGEoc2FwRGF0YT8pIHtcbiAgICBpZiAoc2FwRGF0YSkge1xuICAgICAgdGhpcy5zZWxlY3RTYXBEYXRhLmVtaXQoc2FwRGF0YSk7XG4gICAgfVxuICAgIC8vIOWtkOihqOWFs+mXrWVkaXRvcueKtuaAgVxuICAgIGlmICh0aGlzLm1hcHBpbmdUeXBlID09IFwiZ3JpZFwiKSB7XG4gICAgICB0aGlzLmFmdGVyT25ibHVyLmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEJpbmRpbmdQYXRoQXJyYXkoKTogYW55W10ge1xuICAgIGNvbnN0IHBhdGggPSB0aGlzLnZtLmJpbmRpbmdQYXRoO1xuICAgIGlmIChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5zcGxpdChcIi9cIikuZmlsdGVyKG4gPT4gbiAhPT0gXCJcIik7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxufVxuIl19