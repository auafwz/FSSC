!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@farris/ui-locale")):"function"==typeof define&&define.amd?define("@farris/tags",["exports","@angular/core","@angular/common","@angular/forms","@farris/ui-locale"],a):a((t.farris=t.farris||{},t.farris.tags={}),t.ng.core,t.ng.common,t.ng.forms,t.uiLocale)}(this,function(t,r,a,e,i){"use strict";var s=(n.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[]},n.ngInjectableDef=r.defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n);function n(){}var o=(Object.defineProperty(c.prototype,"data",{get:function(){return this._data},set:function(t){var a=this;this._data=t,setTimeout(function(){a.tagInit(a._data)})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"checkable",{get:function(){return this._checkable},set:function(t){this._checkable=t,this.cd.detectChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"addable",{get:function(){return this._addable},set:function(t){this._addable=t,this.addTagAble=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tagType",{get:function(){return this._tagType},set:function(t){this._tagType=t,this.cd.detectChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.styleInit()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"closable",{get:function(){return this._closable},set:function(t){this._closable=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"readonly",{get:function(){return this._readonly},set:function(t){this._readonly=t,this._readonly?(this.activeTag="",this._closable=!1,this.addTagAble=!1):(this._closable=!0,this.addTagAble=!0),this.cd.detectChanges()},enumerable:!0,configurable:!0}),c.prototype.ngOnInit=function(){this._checkable&&(this._closable=!1),this.placeholder=this.localeService.getValue("tag.placeholder")},c.prototype.tagInit=function(t){if(this.innerTags=[],t){var a=t.split(",").filter(function(t){if(""!==t)return t});if(a&&a.length)for(var r=0;r<a.length;r++){var e={name:""};e.name=a[r],this.innerTags.push(e)}else this.innerTags=[]}},c.prototype.closeHandler=function(t,a,r){t.preventDefault(),this.innerTags.splice(r,1);var e=this.tagProcess(this.innerTags);this.onChangeCallback(e),this.onTouchedCallback(),this.closed.emit(a.name),this.dataChanged.emit(e)},c.prototype.clickHandler=function(t,a){if(t.preventDefault(),!this._readonly&&(this.activeTag!=a.name&&(this.activeTag=a.name),this.tagClick.emit(a.name),this._checkable)){a.hasOwnProperty("checked")?a.checked=!a.checked:a.checked=!0,this.checkedTags=this.innerTags.filter(function(t){return t.checked});var r=this.tagProcess(this.innerTags);this.onChangeCallback(r),this.onTouchedCallback();var e={data:r,tag:a.name,checked:this.tagProcess(this.checkedTags)};this.checkChanged.emit(e)}},c.prototype.addHander=function(){var t=this;this._addable&&this.addTagAble&&(this.addInput=!0,this.addTagValue="",setTimeout(function(){t.addInputText.nativeElement.focus()}))},c.prototype.addInputBlur=function(t){var a=this;if(this._addable&&this.addInput){if(this.addTagValue){if(this.innerTags.find(function(t){return t.name==a.addTagValue}))return void(this.addInput=!1);var r={name:this.addTagValue};this.innerTags.push(r);var e=this.tagProcess(this.innerTags);this.dataChanged.emit(this.tagProcess(this.innerTags)),this.onChangeCallback(e),this.onTouchedCallback()}this.addInput=!1}},c.prototype.writeValue=function(t){this._data=t,this.tagInit(this._data)},c.prototype.registerOnChange=function(t){this.onChangeCallback=t},c.prototype.registerOnTouched=function(t){this.onTouchedCallback=t},c.prototype.tagProcess=function(t){if(t&&t.length){var a=[];return t.forEach(function(t){a.push(t.name)}),a.join(",")}return""},c.prototype.hexToRgba=function(t,a){void 0===a&&(a=1);var r=t.toLowerCase();if(r&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(r)){if(4===r.length){for(var e="#",i=1;i<4;i+=1)e+=r.slice(i,i+1).concat(r.slice(i,i+1));r=e}var s=[];for(i=1;i<7;i+=2)s.push(parseInt("0x"+r.slice(i,i+2)));return"RGB("+s.join(",")+","+a+")"}return r},c.prototype.styleInit=function(){this.color?this.tagStyle={color:this._color,background:this._color?this.hexToRgba(this._color,.1):"",borderColor:this._color}:this.tagStyle="",this.cd.detectChanges()},c.decorators=[{type:r.Component,args:[{selector:"farris-tags",template:'<div [class]="\'farris-tags \'+ (className?className:\'\')" [ngClass]="{\'farris-tags-checkable\': checkable}">\r\n    <ul class="farris-tags-item-container">\r\n        <li\r\n        *ngFor="let tag of innerTags;let index = index;"\r\n        [class]="\'farris-tag-item\' + (tagType?\' farris-tag-item-\' + tagType:\'\')"\r\n        [ngClass]="{\'farris-tag-item-checked\': checkable && tag.checked,\r\n        \'farris-tag-item-checkable\': checkable, \r\n        \'farris-tag-item-has-color\': color,\r\n        \'farris-tag-item-actived\':activeTag == tag.name}"\r\n        (click)="clickHandler($event,tag)"\r\n        [ngStyle]="tagStyle"\r\n        >\r\n            <span class="tag-box">{{tag.name}}</span>\r\n            <span class="tag-delete" *ngIf="closable">\r\n                <i class="f-icon f-icon-close" (click)="closeHandler($event,tag,index)"></i>\r\n            </span>\r\n        </li>\r\n        <li class="farris-tag-item farris-tag-add-button" [ngClass]="{\'farris-tag-add-button-disabled\': !addTagAble}" *ngIf="addable && !addInput" (click)="addHander()">\r\n            <span class="f-icon f-icon-amplification"></span>\r\n            <span class="farris-tag-add-text">{{ \'tag.addText\' | locale }}</span>\r\n        </li>\r\n        <li class="farris-tag-input-box" *ngIf="addable && addInput">\r\n            <input type="text" class="form-control" (blur)="addInputBlur($event)" (keyup.enter)="addInputBlur($event)" #addInputText [(ngModel)]="addTagValue" [placeholder]="placeholder">\r\n        </li>\r\n    </ul>\r\n</div>',encapsulation:r.ViewEncapsulation.None,providers:[{provide:e.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return c}),multi:!0}],styles:[".farris-tags .farris-tags-item-container .farris-tag-item{display:inline-block;padding:0 8px;margin:0 10px 0 0;line-height:24px;font-size:13px;color:#2d314e;background:#f6faff;border:1px solid #e6e6e6;white-space:nowrap;border-radius:3px;cursor:default;opacity:1;-webkit-transition:.3s cubic-bezier(.78,.14,.15,.86);transition:.3s cubic-bezier(.78,.14,.15,.86)}.farris-tags .farris-tags-item-container .farris-tag-item a,.farris-tags .farris-tags-item-container .farris-tag-item a:hover{color:rgba(0,0,0,.85)}.farris-tags .farris-tags-item-container .farris-tag-item>a:first-child:last-child{display:inline-block;margin:0 -8px;padding:0 8px}.farris-tags .farris-tags-item-container .farris-tag-item .tag-delete{display:inline-block;font-size:10px;margin-left:6px;color:rgba(0,0,0,.2);cursor:pointer;-webkit-transition:.3s cubic-bezier(.78,.14,.15,.86);transition:.3s cubic-bezier(.78,.14,.15,.86)}.farris-tags .farris-tags-item-container .farris-tag-item .tag-delete:hover{color:rgba(0,0,0,.85)}.farris-tags .farris-tags-item-container .farris-tag-item>.f-icon{font-size:12px}.farris-tags .farris-tags-item-container .farris-tag-item>.f-icon+span,.farris-tags .farris-tags-item-container .farris-tag-item>span+.f-icon{margin-left:7px}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-success{color:#52c41a;background:#f6ffed;border-color:#b7eb8f}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-info{color:#1890ff;background:#e6f7ff;border-color:#91d5ff}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-error{color:#f5222d;background:#fff1f0;border-color:#ffa39e}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-warning{color:#fa8c16;background:#fff7e6;border-color:#ffd591}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-checkable:not(.farris-tag-item-checked){background-color:transparent;border-color:transparent;cursor:pointer}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-checkable:not(.farris-tag-item-checked):active,.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-checkable:not(.farris-tag-item-checked):hover{color:#59a1ff}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-checkdisabled{background-color:transparent;border-color:transparent;cursor:not-allowed;color:rgba(0,0,0,.45)}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-checked{background-color:#fff;border-color:#2a87ff;color:#2a87ff}.farris-tags .farris-tags-item-container .farris-tag-item:last-child{margin-right:0}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-actived,.farris-tags .farris-tags-item-container .farris-tag-item:active{background-color:#2a87ff;color:#fff}.farris-tags .farris-tags-item-container .farris-tag-item.farris-tag-item-actived .tag-delete,.farris-tags .farris-tags-item-container .farris-tag-item:active .tag-delete{color:#fff}.farris-tags .farris-tags-item-container .farris-tag-add-button{cursor:pointer;background:#f9f9f9;border:1px dashed #babdc9}.farris-tags .farris-tags-item-container .farris-tag-add-button .farris-tag-add-text{color:rgba(0,0,0,.45)}.farris-tags .farris-tags-item-container .farris-tag-add-button .f-icon{color:rgba(0,0,0,.2)}.farris-tags .farris-tags-item-container .farris-tag-add-button:hover{background-color:#f9f9f9;border-color:#59a1ff}.farris-tags .farris-tags-item-container .farris-tag-add-button:hover .f-icon,.farris-tags .farris-tags-item-container .farris-tag-add-button:hover .farris-tag-add-text{color:#59a1ff}.farris-tags .farris-tags-item-container .farris-tag-add-button.farris-tag-add-button-disabled{background-color:#f7f7f7;border-color:#dcdcdc;border-style:solid;cursor:not-allowed}.farris-tags .farris-tags-item-container .farris-tag-add-button.farris-tag-add-button-disabled .farris-tag-add-text{color:rgba(0,0,0,.25)}.farris-tags .farris-tags-item-container .farris-tag-add-button.farris-tag-add-button-disabled:hover{background-color:#f7f7f7;border-color:#dcdcdc}.farris-tags .farris-tags-item-container .farris-tag-add-button.farris-tag-add-button-disabled:hover .f-icon,.farris-tags .farris-tags-item-container .farris-tag-add-button.farris-tag-add-button-disabled:hover .farris-tag-add-text{color:rgba(0,0,0,.25)}.farris-tags .farris-tags-item-container .farris-tag-input-box{display:inline-block}.farris-tags .farris-tags-item-container .farris-tag-input-box .form-control{height:24px;width:100px}.farris-tags .farris-tags-item-container .farris-tag-input-box .form-control:focus{box-shadow:none}.farris-tags.farris-tags-checkable .farris-tag-item{line-height:22px}"]}]}],c.ctorParameters=function(){return[{type:i.LocaleService},{type:r.ChangeDetectorRef}]},c.propDecorators={data:[{type:r.Input}],value:[{type:r.Input}],checkable:[{type:r.Input}],addable:[{type:r.Input}],tagType:[{type:r.Input}],color:[{type:r.Input}],closable:[{type:r.Input}],readonly:[{type:r.Input}],className:[{type:r.Input}],checkChanged:[{type:r.Output}],tagClick:[{type:r.Output}],dataChanged:[{type:r.Output}],closed:[{type:r.Output}],addInputText:[{type:r.ViewChild,args:["addInputText"]}]},c);function c(t,a){this.localeService=t,this.cd=a,this._addable=!0,this._closable=!0,this._readonly=!1,this.checkChanged=new r.EventEmitter,this.tagClick=new r.EventEmitter,this.dataChanged=new r.EventEmitter,this.closed=new r.EventEmitter,this.addInput=!1,this.addTagValue="",this.checkedTags=[],this.innerTags=[],this.addTagAble=!0,this.onChangeCallback=function(){},this.onTouchedCallback=function(){}}var f=(g.decorators=[{type:r.NgModule,args:[{declarations:[o],imports:[a.CommonModule,e.FormsModule,i.LocaleModule.forRoot()],exports:[o]}]}],g);function g(){}t.TagsService=s,t.TagsComponent=o,t.TagsModule=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-tags.umd.min.js.map