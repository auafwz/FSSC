/**
 * @fileoverview added by tsickle
 * Generated from: lib/controlcomponent/numberrangecomponent/numberrange.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { SolutionService } from '../../service/solution.service';
import { NumberRangeValue } from '../../entity/conditionvalue/numberrangevaue';
var NumberRangeComponent = /** @class */ (function () {
    function NumberRangeComponent(solutionService) {
        this.solutionService = solutionService;
        /**
         * 某个字段发生值变化事件时，需要同步清空的字段，可能不是当前字段
         */
        this.changeFields = [];
        this.conditionChange = new EventEmitter();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    NumberRangeComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if (changes['changeFields'] && changes['changeFields'].currentValue && !changes['changeFields'].firstChange) {
            /** @type {?} */
            var isChange = changes['changeFields'].currentValue.some((/**
             * @param {?} field
             * @return {?}
             */
            function (field) { return field == _this.item.fieldCode; }));
            if (isChange) {
                this.constructMultiFieldNumberRange((/** @type {?} */ (this.item.value)));
            }
        }
    };
    /**
     * @return {?}
     */
    NumberRangeComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.testId = this.solutionService.getGuid();
        this.canNull = true;
        this.placeholder = (this.item.placeHolder) ? (this.item.placeHolder) : (this.item.control.placeholder);
        this.beginPlaceHolder = this.item.beginPlaceHolder ? this.item.beginPlaceHolder : this.placeholder;
        this.endPlaceHolder = this.item.endPlaceHolder ? this.item.endPlaceHolder : this.placeholder;
        this.precision = this.item.control.precision;
        this.textAlign = this.item.control.textAlign;
        this.bigNumber = this.item.control.bigNumber ? this.item.control.bigNumber : false;
        if (!this.bigNumber) {
            this.min = (this.item.control.min === undefined || this.item.control.min === null) ? -2147483648 : (this.item.control.min);
            this.max = (this.item.control.max === undefined || this.item.control.max === null) ? 2147483647 : (this.item.control.max);
        }
        this.constructMultiFieldNumberRange((/** @type {?} */ (this.item.value)));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    NumberRangeComponent.prototype.valueChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var dataArray = data.split("~");
        /** @type {?} */
        var start = dataArray[0] && dataArray[0].length > 0 ? dataArray[0] : null;
        /** @type {?} */
        var end = dataArray[1] && dataArray[1].length > 0 ? dataArray[1] : null;
        if (!this.bigNumber) {
            this.item.value = new NumberRangeValue({ startValue: start, endValue: end });
        }
        else {
            /** @type {?} */
            var numberRangeValue = new NumberRangeValue();
            isNaN(parseFloat(start)) ? numberRangeValue.startValue = null : numberRangeValue.startValue = start;
            isNaN(parseFloat(end)) ? numberRangeValue.endValue = null : numberRangeValue.endValue = end;
            this.item.value = numberRangeValue;
        }
        this.conditionChange.emit();
    };
    // constructNumberRange(value: NumberRangeValue): string {
    //   return "a~b".replace(/a/, value.startValue ? value.startValue.toString().trim() : "").replace(/b/, value.endValue ? value.endValue.toString().trim() : "");
    // }
    // constructNumberRange(value: NumberRangeValue): string {
    //   return "a~b".replace(/a/, value.startValue ? value.startValue.toString().trim() : "").replace(/b/, value.endValue ? value.endValue.toString().trim() : "");
    // }
    /**
     * @param {?} value
     * @return {?}
     */
    NumberRangeComponent.prototype.constructMultiFieldNumberRange = 
    // constructNumberRange(value: NumberRangeValue): string {
    //   return "a~b".replace(/a/, value.startValue ? value.startValue.toString().trim() : "").replace(/b/, value.endValue ? value.endValue.toString().trim() : "");
    // }
    /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        // this.beginValue = value && value.startValue ? value.startValue.toString().trim() : '';
        // this.endValue = value && value.endValue ? value.endValue.toString().trim() : '';
        this.beginValue = value.startValue == null ? null : value.startValue;
        this.endValue = value.endValue == null ? null : value.endValue;
    };
    // getConditionItemStyle(field: QueryCondition, controlType: any) {
    //     return this.solutionService.getConditionItemStyle(field,controlType);
    // }
    // getConditionItemStyle(field: QueryCondition, controlType: any) {
    //     return this.solutionService.getConditionItemStyle(field,controlType);
    // }
    /**
     * @param {?} field
     * @return {?}
     */
    NumberRangeComponent.prototype.getConditionItemTitle = 
    // getConditionItemStyle(field: QueryCondition, controlType: any) {
    //     return this.solutionService.getConditionItemStyle(field,controlType);
    // }
    /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        return this.solutionService.getConditionItemTitle(field);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NumberRangeComponent.prototype.beginValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.beginValue = $event;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NumberRangeComponent.prototype.endValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.endValue = $event;
    };
    NumberRangeComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-solution-numberrange',
                    template: "<div class=\"farris-group-wrap\" id=\"{{item.id}}\">\r\n  <div class=\"form-group farris-form-group  common-group number-range-group\" [ngClass]=\"{'q-state-readonly':item.readonly}\">\r\n    <label class=\"col-form-label\" *ngIf=\"item\" title=\"{{getConditionItemTitle(item)}}\">\r\n      <span class=\"farris-label-info text-danger\" *ngIf=\"item.control.isRequired()\">*</span>\r\n      <span class=\"farris-label-text\">{{item.fieldName}}</span>\r\n    </label>\r\n    <div class=\"farris-input-wrap\">\r\n      <farris-number-range *ngIf=\"!bigNumber\"\r\n        [beginValue]=\"beginValue\"\r\n        [endValue]=\"endValue\"\r\n        [min]=\"min\"\r\n        [max]=\"max\"\r\n        (beginValueChange)=\"beginValueChange($event)\"\r\n        (endValueChange)=\"endValueChange($event)\"\r\n        (valueChange)=\"valueChange($event)\" \r\n        id=\"{{testId}}\"\r\n        [canNull]=\"canNull\"\r\n        [bigNumber]=\"bigNumber\"\r\n        [placeholder]=\"placeholder\"\r\n        [precision]=\"precision\"\r\n        [textAlign]=\"textAlign\"\r\n        [readonly]=\"item.readonly\"\r\n        [beginPlaceHolder]=\"beginPlaceHolder\"\r\n        [endPlaceHolder]=\"endPlaceHolder\">\r\n      </farris-number-range>\r\n      <farris-number-range *ngIf=\"bigNumber\"\r\n        [beginValue]=\"beginValue\"\r\n        [endValue]=\"endValue\"\r\n        (beginValueChange)=\"beginValueChange($event)\"\r\n        (endValueChange)=\"endValueChange($event)\"\r\n        (valueChange)=\"valueChange($event)\" \r\n        id=\"{{testId}}\"\r\n        [canNull]=\"canNull\"\r\n        [bigNumber]=\"bigNumber\"\r\n        [placeholder]=\"placeholder\"\r\n        [precision]=\"precision\"\r\n        [textAlign]=\"textAlign\"\r\n        [readonly]=\"item.readonly\"        \r\n        [beginPlaceHolder]=\"beginPlaceHolder\"\r\n        [endPlaceHolder]=\"endPlaceHolder\">\r\n      </farris-number-range>\r\n    </div>\r\n  </div>\r\n</div>"
                }] }
    ];
    /** @nocollapse */
    NumberRangeComponent.ctorParameters = function () { return [
        { type: SolutionService }
    ]; };
    NumberRangeComponent.propDecorators = {
        item: [{ type: Input }],
        changeFields: [{ type: Input }],
        conditionChange: [{ type: Output, args: ['conditionChange',] }]
    };
    return NumberRangeComponent;
}());
export { NumberRangeComponent };
if (false) {
    /** @type {?} */
    NumberRangeComponent.prototype.beginValue;
    /** @type {?} */
    NumberRangeComponent.prototype.endValue;
    /** @type {?} */
    NumberRangeComponent.prototype.testId;
    /** @type {?} */
    NumberRangeComponent.prototype.precision;
    /** @type {?} */
    NumberRangeComponent.prototype.textAlign;
    /** @type {?} */
    NumberRangeComponent.prototype.placeholder;
    /** @type {?} */
    NumberRangeComponent.prototype.item;
    /** @type {?} */
    NumberRangeComponent.prototype.canNull;
    /** @type {?} */
    NumberRangeComponent.prototype.bigNumber;
    /** @type {?} */
    NumberRangeComponent.prototype.min;
    /** @type {?} */
    NumberRangeComponent.prototype.max;
    /** @type {?} */
    NumberRangeComponent.prototype.beginPlaceHolder;
    /** @type {?} */
    NumberRangeComponent.prototype.endPlaceHolder;
    /**
     * 某个字段发生值变化事件时，需要同步清空的字段，可能不是当前字段
     * @type {?}
     */
    NumberRangeComponent.prototype.changeFields;
    /** @type {?} */
    NumberRangeComponent.prototype.conditionChange;
    /**
     * @type {?}
     * @private
     */
    NumberRangeComponent.prototype.solutionService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnVtYmVycmFuZ2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21wb25lbnQtcXVlcnljb25kaXRpb24vIiwic291cmNlcyI6WyJsaWIvY29udHJvbGNvbXBvbmVudC9udW1iZXJyYW5nZWNvbXBvbmVudC9udW1iZXJyYW5nZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsWUFBWSxFQUE0QixNQUFNLGVBQWUsQ0FBQztBQUV6RyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDakUsT0FBTyxFQUFFLGdCQUFnQixFQUE2QixNQUFNLDZDQUE2QyxDQUFDO0FBRzFHO0lBNEJFLDhCQUFvQixlQUFnQztRQUFoQyxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7Ozs7UUFKM0MsaUJBQVksR0FBa0IsRUFBRSxDQUFDO1FBRWYsb0JBQWUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0lBRVIsQ0FBQzs7Ozs7SUFFekQsMENBQVc7Ozs7SUFBWCxVQUFZLE9BQXNCO1FBQWxDLGlCQU9DO1FBTkMsSUFBRyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxXQUFXLEVBQUU7O2dCQUNwRyxRQUFRLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJOzs7O1lBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxLQUFLLElBQUksS0FBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQTVCLENBQTRCLEVBQUM7WUFDakcsSUFBRyxRQUFRLEVBQUM7Z0JBQ1YsSUFBSSxDQUFDLDhCQUE4QixDQUFDLG1CQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFvQixDQUFDLENBQUM7YUFDMUU7U0FD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LFVBQXNCLEtBQXFCO1FBQ3pDLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzRCxDQUFDOzs7OztJQUVELCtDQUFnQjs7OztJQUFoQixVQUFpQixNQUFNO1FBQ3JCLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO0lBQzNCLENBQUM7Ozs7O0lBRUQsNkNBQWM7Ozs7SUFBZCxVQUFlLE1BQU07UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQzs7Z0JBL0ZGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyx3NkRBQTJDO2lCQUM1Qzs7OztnQkFQUSxlQUFlOzs7dUJBaUJyQixLQUFLOytCQVdMLEtBQUs7a0NBRUwsTUFBTSxTQUFDLGlCQUFpQjs7SUFzRTNCLDJCQUFDO0NBQUEsQUFoR0QsSUFnR0M7U0EzRlksb0JBQW9COzs7SUFFL0IsMENBQWdCOztJQUNoQix3Q0FBYzs7SUFDZCxzQ0FBZTs7SUFDZix5Q0FBa0I7O0lBQ2xCLHlDQUFrQjs7SUFDbEIsMkNBQW9COztJQUNwQixvQ0FBbUI7O0lBQ25CLHVDQUFpQjs7SUFDakIseUNBQW1COztJQUNuQixtQ0FBWTs7SUFDWixtQ0FBWTs7SUFDWixnREFBd0I7O0lBQ3hCLDhDQUFzQjs7Ozs7SUFLdEIsNENBQTBDOztJQUUxQywrQ0FBZ0U7Ozs7O0lBRXBELCtDQUF3QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBRdWVyeUNvbmRpdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0eS9xdWVyeWNvbmRpdGlvbic7XHJcbmltcG9ydCB7IFNvbHV0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2Uvc29sdXRpb24uc2VydmljZSc7XHJcbmltcG9ydCB7IE51bWJlclJhbmdlVmFsdWUsIE51bWJlclJhbmdlVmFsdWVDb252ZXJ0b3IgfSBmcm9tICcuLi8uLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvbnVtYmVycmFuZ2V2YXVlJztcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1zb2x1dGlvbi1udW1iZXJyYW5nZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL251bWJlcnJhbmdlLmNvbXBvbmVudC5odG1sJyxcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBOdW1iZXJSYW5nZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICAvLyBudW1iZXJSYW5nZTogc3RyaW5nO1xyXG4gIGJlZ2luVmFsdWU6IGFueTtcclxuICBlbmRWYWx1ZTogYW55O1xyXG4gIHRlc3RJZDogc3RyaW5nO1xyXG4gIHByZWNpc2lvbjogbnVtYmVyO1xyXG4gIHRleHRBbGlnbjogc3RyaW5nO1xyXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgaXRlbTogYW55O1xyXG4gIGNhbk51bGw6IGJvb2xlYW47XHJcbiAgYmlnTnVtYmVyOiBib29sZWFuO1xyXG4gIG1pbjogbnVtYmVyO1xyXG4gIG1heDogbnVtYmVyO1xyXG4gIGJlZ2luUGxhY2VIb2xkZXI6c3RyaW5nO1xyXG4gIGVuZFBsYWNlSG9sZGVyOnN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICog5p+Q5Liq5a2X5q615Y+R55Sf5YC85Y+Y5YyW5LqL5Lu25pe277yM6ZyA6KaB5ZCM5q2l5riF56m655qE5a2X5q6177yM5Y+v6IO95LiN5piv5b2T5YmN5a2X5q61XHJcbiAgICovXHJcbiAgQElucHV0KCkgY2hhbmdlRmllbGRzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG4gIEBPdXRwdXQoJ2NvbmRpdGlvbkNoYW5nZScpIGNvbmRpdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzb2x1dGlvblNlcnZpY2U6IFNvbHV0aW9uU2VydmljZSkgeyB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGlmKGNoYW5nZXNbJ2NoYW5nZUZpZWxkcyddICYmIGNoYW5nZXNbJ2NoYW5nZUZpZWxkcyddLmN1cnJlbnRWYWx1ZSAmJiAhY2hhbmdlc1snY2hhbmdlRmllbGRzJ10uZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgY29uc3QgaXNDaGFuZ2UgPSBjaGFuZ2VzWydjaGFuZ2VGaWVsZHMnXS5jdXJyZW50VmFsdWUuc29tZShmaWVsZCA9PiBmaWVsZCA9PSB0aGlzLml0ZW0uZmllbGRDb2RlKTtcclxuICAgICAgaWYoaXNDaGFuZ2Upe1xyXG4gICAgICAgIHRoaXMuY29uc3RydWN0TXVsdGlGaWVsZE51bWJlclJhbmdlKHRoaXMuaXRlbS52YWx1ZSBhcyBOdW1iZXJSYW5nZVZhbHVlKTtcclxuICAgICAgfVxyXG4gIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy50ZXN0SWQgPSB0aGlzLnNvbHV0aW9uU2VydmljZS5nZXRHdWlkKCk7XHJcbiAgICB0aGlzLmNhbk51bGwgPSB0cnVlO1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9ICh0aGlzLml0ZW0ucGxhY2VIb2xkZXIpID8gKHRoaXMuaXRlbS5wbGFjZUhvbGRlcikgOiAodGhpcy5pdGVtLmNvbnRyb2wucGxhY2Vob2xkZXIpO1xyXG4gICAgdGhpcy5iZWdpblBsYWNlSG9sZGVyPXRoaXMuaXRlbS5iZWdpblBsYWNlSG9sZGVyP3RoaXMuaXRlbS5iZWdpblBsYWNlSG9sZGVyOnRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLmVuZFBsYWNlSG9sZGVyPXRoaXMuaXRlbS5lbmRQbGFjZUhvbGRlcj90aGlzLml0ZW0uZW5kUGxhY2VIb2xkZXI6dGhpcy5wbGFjZWhvbGRlcjtcclxuICAgIHRoaXMucHJlY2lzaW9uID0gdGhpcy5pdGVtLmNvbnRyb2wucHJlY2lzaW9uO1xyXG4gICAgdGhpcy50ZXh0QWxpZ24gPSB0aGlzLml0ZW0uY29udHJvbC50ZXh0QWxpZ247XHJcbiAgICB0aGlzLmJpZ051bWJlciA9IHRoaXMuaXRlbS5jb250cm9sLmJpZ051bWJlciA/IHRoaXMuaXRlbS5jb250cm9sLmJpZ051bWJlciA6IGZhbHNlO1xyXG4gICAgaWYoIXRoaXMuYmlnTnVtYmVyKXtcclxuICAgICAgdGhpcy5taW4gPSAodGhpcy5pdGVtLmNvbnRyb2wubWluID09PSB1bmRlZmluZWQgfHwgdGhpcy5pdGVtLmNvbnRyb2wubWluID09PSBudWxsKSA/IC0yMTQ3NDgzNjQ4IDogKHRoaXMuaXRlbS5jb250cm9sLm1pbik7XHJcbiAgICAgIHRoaXMubWF4ID0gKHRoaXMuaXRlbS5jb250cm9sLm1heCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuaXRlbS5jb250cm9sLm1heCA9PT0gbnVsbCkgPyAyMTQ3NDgzNjQ3IDogKHRoaXMuaXRlbS5jb250cm9sLm1heCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnN0cnVjdE11bHRpRmllbGROdW1iZXJSYW5nZSh0aGlzLml0ZW0udmFsdWUgYXMgTnVtYmVyUmFuZ2VWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICB2YWx1ZUNoYW5nZShkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IGRhdGFBcnJheSA9IGRhdGEuc3BsaXQoXCJ+XCIpO1xyXG4gICAgY29uc3Qgc3RhcnQgPSBkYXRhQXJyYXlbMF0gJiYgZGF0YUFycmF5WzBdLmxlbmd0aCA+IDAgPyBkYXRhQXJyYXlbMF0gOiBudWxsO1xyXG4gICAgY29uc3QgZW5kID0gZGF0YUFycmF5WzFdICYmIGRhdGFBcnJheVsxXS5sZW5ndGggPiAwID8gZGF0YUFycmF5WzFdIDogbnVsbDtcclxuICAgIGlmKCF0aGlzLmJpZ051bWJlcikge1xyXG4gICAgICB0aGlzLml0ZW0udmFsdWUgPSBuZXcgTnVtYmVyUmFuZ2VWYWx1ZSh7c3RhcnRWYWx1ZTogc3RhcnQsIGVuZFZhbHVlOiBlbmR9KTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgY29uc3QgbnVtYmVyUmFuZ2VWYWx1ZSA9IG5ldyBOdW1iZXJSYW5nZVZhbHVlKCk7XHJcbiAgICAgIGlzTmFOKHBhcnNlRmxvYXQoc3RhcnQpKSA/IG51bWJlclJhbmdlVmFsdWUuc3RhcnRWYWx1ZSA9IG51bGwgOiBudW1iZXJSYW5nZVZhbHVlLnN0YXJ0VmFsdWUgPSBzdGFydDtcclxuICAgICAgaXNOYU4ocGFyc2VGbG9hdChlbmQpKSA/IG51bWJlclJhbmdlVmFsdWUuZW5kVmFsdWUgPSBudWxsIDogbnVtYmVyUmFuZ2VWYWx1ZS5lbmRWYWx1ZSA9IGVuZDtcclxuICAgICAgdGhpcy5pdGVtLnZhbHVlID0gbnVtYmVyUmFuZ2VWYWx1ZTtcclxuICAgIH1cclxuICAgIHRoaXMuY29uZGl0aW9uQ2hhbmdlLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIC8vIGNvbnN0cnVjdE51bWJlclJhbmdlKHZhbHVlOiBOdW1iZXJSYW5nZVZhbHVlKTogc3RyaW5nIHtcclxuICAvLyAgIHJldHVybiBcImF+YlwiLnJlcGxhY2UoL2EvLCB2YWx1ZS5zdGFydFZhbHVlID8gdmFsdWUuc3RhcnRWYWx1ZS50b1N0cmluZygpLnRyaW0oKSA6IFwiXCIpLnJlcGxhY2UoL2IvLCB2YWx1ZS5lbmRWYWx1ZSA/IHZhbHVlLmVuZFZhbHVlLnRvU3RyaW5nKCkudHJpbSgpIDogXCJcIik7XHJcbiAgLy8gfVxyXG5cclxuICBjb25zdHJ1Y3RNdWx0aUZpZWxkTnVtYmVyUmFuZ2UodmFsdWU6IE51bWJlclJhbmdlVmFsdWUpIHtcclxuICAgIC8vIHRoaXMuYmVnaW5WYWx1ZSA9IHZhbHVlICYmIHZhbHVlLnN0YXJ0VmFsdWUgPyB2YWx1ZS5zdGFydFZhbHVlLnRvU3RyaW5nKCkudHJpbSgpIDogJyc7XHJcbiAgICAvLyB0aGlzLmVuZFZhbHVlID0gdmFsdWUgJiYgdmFsdWUuZW5kVmFsdWUgPyB2YWx1ZS5lbmRWYWx1ZS50b1N0cmluZygpLnRyaW0oKSA6ICcnO1xyXG4gICAgdGhpcy5iZWdpblZhbHVlID0gdmFsdWUuc3RhcnRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IHZhbHVlLnN0YXJ0VmFsdWU7XHJcbiAgICB0aGlzLmVuZFZhbHVlID0gdmFsdWUuZW5kVmFsdWUgPT0gbnVsbCA/IG51bGwgOiB2YWx1ZS5lbmRWYWx1ZTtcclxuICB9XHJcblxyXG4gIC8vIGdldENvbmRpdGlvbkl0ZW1TdHlsZShmaWVsZDogUXVlcnlDb25kaXRpb24sIGNvbnRyb2xUeXBlOiBhbnkpIHtcclxuICAvLyAgICAgcmV0dXJuIHRoaXMuc29sdXRpb25TZXJ2aWNlLmdldENvbmRpdGlvbkl0ZW1TdHlsZShmaWVsZCxjb250cm9sVHlwZSk7XHJcbiAgLy8gfVxyXG5cclxuICBnZXRDb25kaXRpb25JdGVtVGl0bGUoZmllbGQ6IFF1ZXJ5Q29uZGl0aW9uKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zb2x1dGlvblNlcnZpY2UuZ2V0Q29uZGl0aW9uSXRlbVRpdGxlKGZpZWxkKTtcclxuICB9XHJcblxyXG4gIGJlZ2luVmFsdWVDaGFuZ2UoJGV2ZW50KSB7XHJcbiAgICB0aGlzLmJlZ2luVmFsdWUgPSAkZXZlbnQ7XHJcbiAgfVxyXG5cclxuICBlbmRWYWx1ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgIHRoaXMuZW5kVmFsdWUgPSAkZXZlbnQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==