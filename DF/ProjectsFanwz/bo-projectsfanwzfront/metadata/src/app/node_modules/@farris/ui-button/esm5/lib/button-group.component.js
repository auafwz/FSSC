/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NgZone, ChangeDetectionStrategy } from '@angular/core';
import { ChangeDetectorRef } from '@angular/core';
import { Component, Input, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';
import { Subject } from 'rxjs';
var FarrisButtonGroupComponent = /** @class */ (function () {
    function FarrisButtonGroupComponent(changeRef, ngZone) {
        this.changeRef = changeRef;
        this.ngZone = ngZone;
        // 是否自动纠正位置
        this.autoRectify = true;
        // 计算方向的真正placement
        this.realPlacement = 'bottom-right';
        // 重新计算后的placement
        this.rectifyPlacement = 'bottom-right';
        /* 显示的按钮数量  默认为2 */
        this.count = 2;
        /* 按钮大小 */
        this.size = 'small';
        /* 按钮样式 */
        this.type = 'primary';
        /* 按钮展示位置 */
        this._placement = "bottom";
        /* menu size */
        /**
         * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
         */
        this.width = 120;
        this.height = 250;
        this._menuWidth = 0;
        this._menuHeight = 0;
        /* 下拉按钮 触发事件 */
        this.changeState = new EventEmitter();
        /* 下拉菜单项点击事件 */
        this.change = new EventEmitter();
        this.click = new EventEmitter();
        /* 触发下拉按钮面板区域之外的事件 */
        this.clickMenuOut = new EventEmitter();
        /**
         * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
         */
        this.autoSize = false;
        /* 下拉面板显示 */
        this.show = false;
        this.setPosition$ = new Subject();
    }
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "placement", {
        get: /**
         * @return {?}
         */
        function () {
            return this._placement;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (!value) {
                return;
            }
            if (value !== this._placement) {
                this.realPlacement = this.getRealPlacement(value);
                this._placement = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "flatButtons", {
        /* 显示出来的按钮组 */
        get: /* 显示出来的按钮组 */
        /**
         * @return {?}
         */
        function () {
            return this.data && this.data.slice(0, this.count);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "dpButtons", {
        get: /**
         * @return {?}
         */
        function () {
            // this.height = this.dpButtons.length * 35;
            return this.data && this.data.slice(this.count);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // 初始化数据
    };
    /**
     * @param {?} simpleChanges
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnChanges = /**
     * @param {?} simpleChanges
     * @return {?}
     */
    function (simpleChanges) {
        if (simpleChanges['data']) {
            // this.flatButtons = this.data.slice(0, this.count);
            // this.dpButtons = this.data.slice(this.count);
            // this.height = this.dpButtons.length * 35;
        }
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        if (this.show) {
            // const { height, width } = this.dpMenu.nativeElement.getBoundingClientRect();
            this.setPosition(this.event);
            // this.setPosition$.subscribe(res => this.setPosition(res, width, height));
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.clickEvent = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        e.stopPropagation();
        this.show = !this.show;
        // body添加面板
        if (this.show) {
            this.appendBody();
            // this.setPosition(e);
            // this.setPosition$.next(e);
            this.event = e;
            // 绑定相应的事件
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.bindMenuMouseenter();
                _this.bindiMenuMouseleave();
                // this.bindDocClick();
                _this.mouseNotEnterLeave();
            }));
        }
        // 面板显示 脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        // this.changeState.emit({ originEvent: e, show: this.show });
        this.changeState.emit(this.show);
    };
    /* 按钮触发事件 */
    /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.toggle = /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    function (e, btn) {
        e.stopPropagation();
        if (btn.disabled)
            return;
        this.show = false;
        // this.unbindDocClick();
        // 关闭下拉按钮面板  脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        this.change.emit(btn.id);
        this.click.emit(btn);
    };
    // 下拉按钮显示到body中  可改变面板方向
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.appendBody = 
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    function () {
        if (this.dpMenu.nativeElement) {
            // 添加到body  便于全部显示
            document.body.appendChild(this.dpMenu.nativeElement);
        }
    };
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param btnSize
     */
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changePlacement = /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    function (btnSize) {
        if (!this.autoRectify) {
            return;
        }
        /** @type {?} */
        var referPosition = this.getReferencePosition();
        /** @type {?} */
        var newPlacement = this.realPlacement;
        if (newPlacement.indexOf('bottom') > -1) {
            if (this._menuHeight > referPosition.bottom - btnSize.bottom) {
                newPlacement = newPlacement.replace('bottom', 'top');
            }
        }
        else if (newPlacement.indexOf('top') > -1) {
            if (this._menuHeight > btnSize.top - referPosition.top) {
                newPlacement = newPlacement.replace('top', 'bottom');
            }
        }
        if (newPlacement.indexOf('left') > -1) {
            if (this._menuWidth > btnSize.left - referPosition.left) {
                newPlacement = newPlacement.replace('left', 'right');
            }
        }
        else if (newPlacement.indexOf('right') > -1) {
            if (this._menuWidth > referPosition.right - btnSize.right) {
                newPlacement = newPlacement.replace('right', 'left');
            }
        }
        this.rectifyPlacement = newPlacement;
    };
    /**
     * 确认参照的边界
     */
    /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.getReferencePosition = /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rRight = document.documentElement.clientWidth;
        /** @type {?} */
        var rBottom = document.documentElement.clientHeight;
        /** @type {?} */
        var rTop = 0;
        /** @type {?} */
        var rLeft = 0;
        // 横向参照
        if (this.rectifyReferenceH) {
            rRight = this.rectifyReferenceH.getBoundingClientRect().right;
            rLeft = this.rectifyReferenceH.getBoundingClientRect().left;
        }
        // 纵向参照
        if (this.rectifyReferenceV) {
            rBottom = this.rectifyReferenceV.getBoundingClientRect().bottom;
            rTop = this.rectifyReferenceV.getBoundingClientRect().top;
        }
        return { top: rTop, left: rLeft, right: rRight, bottom: rBottom };
    };
    /**
     * 变化对应的class
     * @param position
     */
    /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype._getClsName = /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    function (position) {
        /** @type {?} */
        var className = '';
        switch (position) {
            case 'top-right':
            case 'top':
                // 朝上，朝上-朝右
                className = 'dropup';
                break;
            case 'top-left':
                // 朝上-朝左
                className = 'dropup-left';
                break;
            case 'left-bottom':
            case 'left':
                // 横向——朝左——朝下
                className = 'dropleft';
                break;
            case 'left-top':
                // 横向——朝左——朝上
                className = 'dropleft-up';
                break;
            case 'right-bottom':
            case 'right':
                // 横向——朝右——朝下
                className = 'dropright';
                break;
            case 'right-top':
                // 横向——朝右——朝上
                className = 'dropright-up';
                break;
            case 'bottom-left':
                // 朝下——朝左
                className = 'dropdown-left';
                break;
            case 'bottom-right':
                className = 'dropdown';
                break;
            default:
                // 朝下，朝下——朝右
                className = 'dropdown';
        }
        return className;
    };
    /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.getRealPlacement = /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    function (pment) {
        /** @type {?} */
        var result = 'bottom-right';
        switch (pment) {
            case 'top':
                result = 'top-right';
                break;
            case 'left':
                result = 'left-bottom';
                break;
            case 'right':
                result = 'right-bottom';
                break;
            case 'bottom':
                result = 'bottom-right';
                break;
            default:
                result = pment;
        }
        return result;
    };
    /*
    * 计算的位置区分忒细化
    */
    /*
      * 计算的位置区分忒细化
      */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changePosition = /*
      * 计算的位置区分忒细化
      */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    function (btnSize) {
        // console.log(e);
        /** @type {?} */
        var rplacement = '';
        if (this.autoRectify) {
            rplacement = this.rectifyPlacement;
        }
        else {
            rplacement = this.realPlacement;
        }
        /** @type {?} */
        var styleTop = 0;
        /** @type {?} */
        var styleLeft = 0;
        if (rplacement.indexOf('top') > -1) {
            styleTop = btnSize.top - this._menuHeight;
        }
        else if (rplacement.indexOf('bottom') > -1) {
            styleTop = btnSize.bottom;
        }
        if (rplacement.indexOf('right') > -1) {
            styleLeft = btnSize.right;
        }
        else if (rplacement.indexOf('left') > -1) {
            styleLeft = btnSize.left - this._menuWidth;
        }
        // 开头
        if (rplacement.indexOf('-top') > -1) {
            styleTop = styleTop - btnSize.height;
        }
        else if (rplacement.indexOf('-bottom') > -1) {
            styleTop = styleTop + btnSize.height;
        }
        this.dpMenu.nativeElement.style.top = styleTop + 'px';
        this.dpMenu.nativeElement.style.left = styleLeft + 'px';
    };
    /* 绑定下拉面板鼠标进入事件 */
    /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.bindMenuMouseenter = /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    function () {
        this.mouseenterEvent = this.changeFlagToTrue.bind(this);
        this.dpMenu.nativeElement.addEventListener('mouseenter', this.mouseenterEvent);
    };
    /* 绑定下拉面板鼠标离开事件  */
    /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.bindiMenuMouseleave = /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    function () {
        this.mouseleaveEvent = this.mouseLeave.bind(this);
        this.dpMenu.nativeElement.addEventListener('mouseleave', this.mouseleaveEvent);
    };
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.unbindMenuMouseenter = /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    function () {
        if (this.mouseenterEvent) {
            this.dpMenu.nativeElement.removeEventListener('mouseenter', this.mouseenterEvent);
        }
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.unbindiMenuMouseleave = /**
     * @return {?}
     */
    function () {
        if (this.mouseleaveEvent) {
            this.dpMenu.nativeElement.removeEventListener('mouseleave', this.mouseleaveEvent);
        }
    };
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changeFlagToTrue = 
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    function () {
        this.dpFlag = true;
    };
    /* flag false */
    /* flag false */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changeFlagToFalse = /* flag false */
    /**
     * @return {?}
     */
    function () {
        this.dpFlag = false;
    };
    /* 鼠标离开时  关闭menu */
    /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.mouseLeave = /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.dpFlag) {
            this.changeFlagToFalse();
            // this.unbindDocClick();
            this.unbindiMenuMouseleave();
            this.unbindMenuMouseenter();
            this.close();
            if (this.setTimeObj) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    clearTimeout(_this.setTimeObj);
                }));
            }
        }
    };
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.mouseNotEnterLeave = /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.setTimeObj = setTimeout((/**
             * @return {?}
             */
            function () {
                if (!_this.dpFlag) {
                    _this.changeFlagToFalse();
                    // this.unbindDocClick();
                    _this.unbindiMenuMouseleave();
                    _this.unbindMenuMouseenter();
                    _this.close();
                    if (_this.setTimeObj) {
                        clearTimeout(_this.setTimeObj);
                    }
                }
            }), 1500);
        }));
    };
    /* 点击面板之外区域 */
    // clickDoc() {
    //   this.unbindDocClick();
    //   this.unbindiMenuMouseleave();
    //   this.unbindMenuMouseenter();
    //   this.close();
    //   if (this.setTimeObj) {
    //     clearTimeout(this.setTimeObj);
    //   }
    //   this.clickMenuOut.emit(this.show);
    // }
    /* 关闭下拉面板 */
    /* 点击面板之外区域 */
    // clickDoc() {
    //   this.unbindDocClick();
    //   this.unbindiMenuMouseleave();
    //   this.unbindMenuMouseenter();
    //   this.close();
    //   if (this.setTimeObj) {
    //     clearTimeout(this.setTimeObj);
    //   }
    //   this.clickMenuOut.emit(this.show);
    // }
    /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.close = /* 点击面板之外区域 */
    // clickDoc() {
    //   this.unbindDocClick();
    //   this.unbindiMenuMouseleave();
    //   this.unbindMenuMouseenter();
    //   this.close();
    //   if (this.setTimeObj) {
    //     clearTimeout(this.setTimeObj);
    //   }
    //   this.clickMenuOut.emit(this.show);
    // }
    /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    function () {
        this.show = false;
        // 关闭下拉按钮面板  脏值检测
        if (!this.changeRef['destroyed']) {
            this.changeRef.detectChanges();
            this.changeRef.markForCheck();
        }
    };
    /* 动态指定menu在body中的位置 */
    /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.setPosition = /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // 下拉按钮
        /** @type {?} */
        var btnSize = this.dpBtn.nativeElement.getBoundingClientRect();
        // 下拉面板     
        /** @type {?} */
        var menuRect = this.dpMenu.nativeElement.getBoundingClientRect();
        this._menuHeight = menuRect.height;
        this._menuWidth = menuRect.width;
        // 如果要自动纠正方向
        if (this.autoRectify) {
            this.changePlacement(btnSize);
        }
        this.changePosition(btnSize);
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
    };
    FarrisButtonGroupComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-button-group',
                    template: "<div class=\"f-btn-group\">\r\n    <div [class]=\"(size==='large'?'btn-group-lg':'btn-group-sm')+' btn-group f-btn-group-links'\">\r\n        <ng-container *ngFor=\"let btn of flatButtons\">\r\n            <ng-container *ngIf=\"btn.icon\">\r\n                <button [id]=\"btn.id\" class=\"btn btn-link btn-icontext\" [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                       <i class=\"f-icon\"  [ngClass]=\"btn.icon\"></i>\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!btn.icon\">\r\n            <button [id]=\"btn.id\"\r\n                [class]=\"'btn '+(btn.type?'btn-'+btn.type:'btn-link')+' '+ (btn.type && btn.type !== 'link' ? 'f-btn-ml' :'')\"\r\n                [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                {{btn.text}}\r\n            </button> \r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n    <ng-container *ngIf=\"dpButtons.length\">\r\n        <div class=\"btn-group f-btn-group-dropdown\">\r\n            <button #dpBtn type=\"button\" class=\"f-btn-dropdown\" (click)=\"clickEvent($event)\">\r\n                <span class=\"f-icon f-icon-lookup\"></span>\r\n            </button>\r\n            <div #dpMenu class=\"dropdown-menu f-btn-group-dropdown-menu\" [class.show]=\"show\"  style=\"position:fixed;\">\r\n                <ng-container *ngFor=\"let dpBtn of dpButtons\">\r\n                    <div class=\"dropdown-divider\" *ngIf=\"dpBtn.divider\"></div>\r\n                    <li [id]=\"dpBtn.id\" class=\"dropdown-item\" [class.disabled]=\"dpBtn.disabled\"\r\n                        (click)=\"toggle($event,dpBtn)\">\r\n                        <ng-container *ngIf=\"dpBtn.icon\">\r\n                            <i class=\"f-icon dropdown-item-icon\" [ngClass]=\"dpBtn.icon\"></i>\r\n                        </ng-container>\r\n                        <span>{{dpBtn.text}}</span>\r\n                    </li>\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>",
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    /** @nocollapse */
    FarrisButtonGroupComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    FarrisButtonGroupComponent.propDecorators = {
        dpBtn: [{ type: ViewChild, args: ['dpBtn',] }],
        dpMenu: [{ type: ViewChild, args: ['dpMenu',] }],
        rectifyReferenceH: [{ type: Input }],
        rectifyReferenceV: [{ type: Input }],
        autoRectify: [{ type: Input }],
        data: [{ type: Input }],
        count: [{ type: Input }],
        size: [{ type: Input }],
        type: [{ type: Input }],
        placement: [{ type: Input }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        changeState: [{ type: Output }],
        change: [{ type: Output }],
        click: [{ type: Output }],
        clickMenuOut: [{ type: Output }],
        autoSize: [{ type: Input }]
    };
    return FarrisButtonGroupComponent;
}());
export { FarrisButtonGroupComponent };
if (false) {
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpBtn;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpMenu;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceH;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceV;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.autoRectify;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.realPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.data;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.count;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.size;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.type;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._placement;
    /**
     * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.width;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.height;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuWidth;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuHeight;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.changeState;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.change;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.click;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.clickMenuOut;
    /**
     * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.autoSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.show;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setPosition$;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.event;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpFlag;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseenterEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseleaveEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.documentClickEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.btnSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setTimeObj;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.changeRef;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLWdyb3VwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktYnV0dG9uLyIsInNvdXJjZXMiOlsibGliL2J1dHRvbi1ncm91cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBYSxNQUFNLEVBQUUsdUJBQXVCLEVBQXVDLE1BQU0sZUFBZSxDQUFDO0FBQ2hILE9BQU8sRUFBbUMsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkYsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXRHLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFL0I7SUFzR0Usb0NBQW9CLFNBQTRCLEVBQVUsTUFBYztRQUFwRCxjQUFTLEdBQVQsU0FBUyxDQUFtQjtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVE7O1FBeEYvRCxnQkFBVyxHQUFHLElBQUksQ0FBQzs7UUFFcEIsa0JBQWEsR0FBRyxjQUFjLENBQUM7O1FBRXZDLHFCQUFnQixHQUFHLGNBQWMsQ0FBQzs7UUFNekIsVUFBSyxHQUFHLENBQUMsQ0FBQzs7UUFHVixTQUFJLEdBQUcsT0FBTyxDQUFDOztRQUdmLFNBQUksR0FBRyxTQUFTLENBQUM7O1FBR2xCLGVBQVUsR0FBRyxRQUFRLENBQUM7Ozs7O1FBbUJyQixVQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ1osV0FBTSxHQUFHLEdBQUcsQ0FBQztRQUNkLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFDZixnQkFBVyxHQUFHLENBQUMsQ0FBQzs7UUFHZCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7O1FBR3RDLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ2pDLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUdoQyxpQkFBWSxHQUFH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Szt1QkFHTCxLQUFLO3VCQUdMLEtBQUs7NEJBSUwsS0FBSzt3QkFrQkwsS0FBSzt5QkFDTCxLQUFLOzhCQUtMLE1BQU07eUJBR04sTUFBTTt3QkFDTixNQUFNOytCQUdOLE1BQU07MkJBS04sS0FBSzs7SUF3WFIsaUNBQUM7Q0FBQSxBQTliRCxJQThiQztTQXpiWSwwQkFBMEI7OztJQUVyQywyQ0FBc0M7O0lBQ3RDLDRDQUF3Qzs7SUFFeEMsdURBQXdDOztJQUV4Qyx1REFBd0M7O0lBRXhDLGlEQUE0Qjs7Ozs7SUFFNUIsbURBQXVDOztJQUV2QyxzREFBa0M7O0lBR2xDLDBDQUF3Qjs7SUFHeEIsMkNBQW1COztJQUduQiwwQ0FBd0I7O0lBR3hCLDBDQUEwQjs7Ozs7SUFHMUIsZ0RBQThCOzs7OztJQW1COUIsMkNBQXFCOztJQUNyQiw0Q0FBc0I7Ozs7O0lBQ3RCLGdEQUF1Qjs7Ozs7SUFDdkIsaURBQXdCOztJQUd4QixpREFBZ0Q7O0lBR2hELDRDQUEyQzs7SUFDM0MsMkNBQTBDOztJQUcxQyxrREFBaUQ7Ozs7O0lBS2pELDhDQUEwQjs7SUFJMUIsMENBQWE7O0lBWWIsa0RBQTZCOztJQUM3QiwyQ0FBVzs7SUFHWCw0Q0FBZ0I7O0lBR2hCLHFEQUFxQjs7SUFDckIscURBQXFCOztJQUNyQix3REFBd0I7O0lBR3hCLDZDQUFhOztJQUdiLGdEQUFnQjs7Ozs7SUFDSiwrQ0FBb0M7Ozs7O0lBQUUsNENBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT25EZXN0cm95LCBOZ1pvbmUsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBSZW5kZXJlcjIsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBBZnRlclZpZXdJbml0LCBBZnRlclZpZXdDaGVja2VkLCBDaGFuZ2VEZXRlY3RvclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi9idXR0b24nO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHN0eWxlIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZmFycmlzLWJ1dHRvbi1ncm91cCcsXHJcbiAgdGVtcGxhdGVVcmw6IGAuL2J1dHRvbi1ncm91cC5jb21wb25lbnQuaHRtbGAsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIEZhcnJpc0J1dHRvbkdyb3VwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2RwQnRuJykgZHBCdG46IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnZHBNZW51JykgZHBNZW51OiBFbGVtZW50UmVmO1xyXG4gIC8vIOaoquWQkee6oOato+eahOWPgueFp1xyXG4gIEBJbnB1dCgpIHJlY3RpZnlSZWZlcmVuY2VIOiBIVE1MRWxlbWVudDtcclxuICAvLyDnurXlkJHnuqDmraPnmoTlj4LnhadcclxuICBASW5wdXQoKSByZWN0aWZ5UmVmZXJlbmNlVjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8g5piv5ZCm6Ieq5Yqo57qg5q2j5L2N572uXHJcbiAgQElucHV0KCkgYXV0b1JlY3RpZnkgPSB0cnVlO1xyXG4gIC8vIOiuoeeul+aWueWQkeeahOecn+ato3BsYWNlbWVudFxyXG4gIHByaXZhdGUgcmVhbFBsYWNlbWVudCA9ICdib3R0b20tcmlnaHQnO1xyXG4gIC8vIOmHjeaWsOiuoeeul+WQjueahHBsYWNlbWVudFxyXG4gIHJlY3RpZnlQbGFjZW1lbnQgPSAnYm90dG9tLXJpZ2h0JztcclxuXHJcbiAgLyog5oyJ6ZKu5L+h5oGvICovXHJcbiAgQElucHV0KCkgZGF0YTogQnV0dG9uW107XHJcblxyXG4gIC8qIOaYvuekuueahOaMiemSruaVsOmHjyAg6buY6K6k5Li6MiAqL1xyXG4gIEBJbnB1dCgpIGNvdW50ID0gMjtcclxuXHJcbiAgLyog5oyJ6ZKu5aSn5bCPICovXHJcbiAgQElucHV0KCkgc2l6ZSA9ICdzbWFsbCc7XHJcblxyXG4gIC8qIOaMiemSruagt+W8jyAqL1xyXG4gIEBJbnB1dCgpIHR5cGUgPSAncHJpbWFyeSc7XHJcblxyXG4gIC8qIOaMiemSruWxleekuuS9jee9riAqL1xyXG4gIHByaXZhdGUgX3BsYWNlbWVudCA9IFwiYm90dG9tXCI7XHJcbiAgQElucHV0KClcclxuICBzZXQgcGxhY2VtZW50KHZhbHVlKSB7XHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fcGxhY2VtZW50KSB7XHJcbiAgICAgIHRoaXMucmVhbFBsYWNlbWVudCA9IHRoaXMuZ2V0UmVhbFBsYWNlbWVudCh2YWx1ZSk7XHJcbiAgICAgIHRoaXMuX3BsYWNlbWVudCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgcGxhY2VtZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BsYWNlbWVudDtcclxuICB9XHJcblxyXG4gIC8qIG1lbnUgc2l6ZSAqL1xyXG4gIC8qKlxyXG4gICAqMjAyMS4wNi4xMiDlup/lvIPvvIzlm6DkuLrkvb/nlKjogIXkuI3nn6XpgZPlnKjkuK3oi7Hmlofmg4XlhrXkuIvvvIzkuIvmi4npnaLmnb/nmoTlrr3luqblkozpq5jluqZcclxuICAgKi9cclxuICBASW5wdXQoKSB3aWR0aCA9IDEyMDtcclxuICBASW5wdXQoKSBoZWlnaHQgPSAyNTA7XHJcbiAgcHJpdmF0ZSBfbWVudVdpZHRoID0gMDtcclxuICBwcml2YXRlIF9tZW51SGVpZ2h0ID0gMDtcclxuXHJcbiAgLyog5LiL5ouJ5oyJ6ZKuIOinpuWPkeS6i+S7tiAqL1xyXG4gIEBPdXRwdXQoKSBjaGFuZ2VTdGF0ZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAvKiDkuIvmi4noj5zljZXpobnngrnlh7vkuovku7YgKi9cclxuICBAT3V0cHV0KCkgY2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIGNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIC8qIOinpuWPkeS4i+aLieaMiemSrumdouadv+WMuuWfn+S5i+WklueahOS6i+S7tiAqL1xyXG4gIEBPdXRwdXQoKSBjbGlja01lbnVPdXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgLyoqXHJcbiAgICogMjAyMS4wNi4xMiDlup/lvIPvvIzlm6DkuLrlvZNhdXRvU2l6ZeS4unRydWXnmoTml7blgJnvvIzmjInpkq7mmL7npLrkuI3lh7rmnaXjgIJcclxuICAgKi9cclxuICBASW5wdXQoKSBhdXRvU2l6ZSA9IGZhbHNlO1xyXG5cclxuXHJcbiAgLyog5LiL5ouJ6Z2i5p2/5pi+56S6ICovXHJcbiAgc2hvdyA9IGZhbHNlO1xyXG4gIC8qIOaYvuekuuWHuuadpeeahOaMiemSrue7hCAqL1xyXG4gIGdldCBmbGF0QnV0dG9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLnNsaWNlKDAsIHRoaXMuY291bnQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRwQnV0dG9ucygpIHtcclxuICAgIC8vIHRoaXMuaGVpZ2h0ID0gdGhpcy5kcEJ1dHRvbnMubGVuZ3RoICogMzU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEuc2xpY2UodGhpcy5jb3VudCk7XHJcbiAgfVxyXG5cclxuICBzZXRQb3NpdGlvbiQgPSBuZXcgU3ViamVjdCgpO1xyXG4gIGV2ZW50OiBhbnk7XHJcblxyXG4gIC8qIOS4i+aLiemdouadv+aYvuekuuagh+W/lyAqL1xyXG4gIGRwRmxhZzogYm9vbGVhbjtcclxuXHJcbiAgLyog5LqL5Lu2ICovXHJcbiAgbW91c2VlbnRlckV2ZW50OiBhbnk7XHJcbiAgbW91c2VsZWF2ZUV2ZW50OiBhbnk7XHJcbiAgZG9jdW1lbnRDbGlja0V2ZW50OiBhbnk7XHJcblxyXG4gIC8qIOS4ieS4queCueaMiemSruWwuuWvuCAqL1xyXG4gIGJ0blNpemU6IGFueTtcclxuXHJcbiAgLyogICovXHJcbiAgc2V0VGltZU9iajogYW55O1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhbmdlUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgLy8g5Yid5aeL5YyW5pWw5o2uXHJcblxyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoc2ltcGxlQ2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgaWYgKHNpbXBsZUNoYW5nZXNbJ2RhdGEnXSkge1xyXG4gICAgICAvLyB0aGlzLmZsYXRCdXR0b25zID0gdGhpcy5kYXRhLnNsaWNlKDAsIHRoaXMuY291bnQpO1xyXG4gICAgICAvLyB0aGlzLmRwQnV0dG9ucyA9IHRoaXMuZGF0YS5zbGljZSh0aGlzLmNvdW50KTtcclxuICAgICAgLy8gdGhpcy5oZWlnaHQgPSB0aGlzLmRwQnV0dG9ucy5sZW5ndGggKiAzNTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcclxuICAgIGlmICh0aGlzLnNob3cpIHtcclxuICAgICAgLy8gY29uc3QgeyBoZWlnaHQsIHdpZHRoIH0gPSB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICB0aGlzLnNldFBvc2l0aW9uKHRoaXMuZXZlbnQpXHJcbiAgICAgIC8vIHRoaXMuc2V0UG9zaXRpb24kLnN1YnNjcmliZShyZXMgPT4gdGhpcy5zZXRQb3NpdGlvbihyZXMsIHdpZHRoLCBoZWlnaHQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgY2xpY2tFdmVudChlOiBhbnkpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLnNob3cgPSAhdGhpcy5zaG93O1xyXG4gICAgLy8gYm9keea3u+WKoOmdouadv1xyXG4gICAgaWYgKHRoaXMuc2hvdykge1xyXG4gICAgICB0aGlzLmFwcGVuZEJvZHkoKTtcclxuICAgICAgLy8gdGhpcy5zZXRQb3NpdGlvbihlKTtcclxuICAgICAgLy8gdGhpcy5zZXRQb3NpdGlvbiQubmV4dChlKTtcclxuICAgICAgdGhpcy5ldmVudCA9IGU7XHJcbiAgICAgIC8vIOe7keWumuebuOW6lOeahOS6i+S7tlxyXG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5iaW5kTWVudU1vdXNlZW50ZXIoKTtcclxuICAgICAgICB0aGlzLmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgICAvLyB0aGlzLmJpbmREb2NDbGljaygpO1xyXG4gICAgICAgIHRoaXMubW91c2VOb3RFbnRlckxlYXZlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8g6Z2i5p2/5pi+56S6IOiEj+WAvOajgOa1i1xyXG4gICAgdGhpcy5jaGFuZ2VSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgdGhpcy5jaGFuZ2VSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAvLyB0aGlzLmNoYW5nZVN0YXRlLmVtaXQoeyBvcmlnaW5FdmVudDogZSwgc2hvdzogdGhpcy5zaG93IH0pO1xyXG4gICAgdGhpcy5jaGFuZ2VTdGF0ZS5lbWl0KHRoaXMuc2hvdyk7XHJcbiAgfVxyXG5cclxuICAvKiDmjInpkq7op6blj5Hkuovku7YgKi9cclxuICB0b2dnbGUoZTogYW55LCBidG4pIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoYnRuLmRpc2FibGVkKSByZXR1cm47XHJcbiAgICB0aGlzLnNob3cgPSBmYWxzZTtcclxuICAgIC8vIHRoaXMudW5iaW5kRG9jQ2xpY2soKTtcclxuICAgIC8vIOWFs+mXreS4i+aLieaMiemSrumdouadvyAg6ISP5YC85qOA5rWLXHJcbiAgICB0aGlzLmNoYW5nZVJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB0aGlzLmNoYW5nZVJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgIHRoaXMuY2hhbmdlLmVtaXQoYnRuLmlkKTtcclxuICAgIHRoaXMuY2xpY2suZW1pdChidG4pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIOS4i+aLieaMiemSruaYvuekuuWIsGJvZHnkuK0gIOWPr+aUueWPmOmdouadv+aWueWQkVxyXG4gIGFwcGVuZEJvZHkoKSB7XHJcbiAgICBpZiAodGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICAvLyDmt7vliqDliLBib2R5ICDkvr/kuo7lhajpg6jmmL7npLpcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW9k+S4i+aLiei2heWHuui+ueeVjOaXtiAg6L2s5o2i5pa55ZCRLFxyXG4gICAqIOW5tuacquWkhOeQhu+8jOi+ueeVjOS4jeWkn+S4i+aLieWxleekuueahOaDheWGtVxyXG4gICAqIEBwYXJhbSBidG5TaXplIFxyXG4gICAqL1xyXG4gIGNoYW5nZVBsYWNlbWVudChidG5TaXplOiBhbnkpIHtcclxuICAgIGlmICghdGhpcy5hdXRvUmVjdGlmeSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgcmVmZXJQb3NpdGlvbiA9IHRoaXMuZ2V0UmVmZXJlbmNlUG9zaXRpb24oKTtcclxuICAgIGxldCBuZXdQbGFjZW1lbnQgPSB0aGlzLnJlYWxQbGFjZW1lbnQ7XHJcbiAgICBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoJ2JvdHRvbScpID4gLTEpIHtcclxuICAgICAgaWYgKHRoaXMuX21lbnVIZWlnaHQgPiByZWZlclBvc2l0aW9uLmJvdHRvbSAtIGJ0blNpemUuYm90dG9tKSB7XHJcbiAgICAgICAgbmV3UGxhY2VtZW50ID0gbmV3UGxhY2VtZW50LnJlcGxhY2UoJ2JvdHRvbScsICd0b3AnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChuZXdQbGFjZW1lbnQuaW5kZXhPZigndG9wJykgPiAtMSkge1xyXG4gICAgICBpZiAodGhpcy5fbWVudUhlaWdodCA+IGJ0blNpemUudG9wLXJlZmVyUG9zaXRpb24udG9wICkge1xyXG4gICAgICAgIG5ld1BsYWNlbWVudCA9IG5ld1BsYWNlbWVudC5yZXBsYWNlKCd0b3AnLCAnYm90dG9tJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChuZXdQbGFjZW1lbnQuaW5kZXhPZignbGVmdCcpID4gLTEpIHtcclxuICAgICAgaWYgKHRoaXMuX21lbnVXaWR0aCA+IGJ0blNpemUubGVmdC1yZWZlclBvc2l0aW9uLmxlZnQgKSB7XHJcbiAgICAgICAgbmV3UGxhY2VtZW50ID0gbmV3UGxhY2VtZW50LnJlcGxhY2UoJ2xlZnQnLCAncmlnaHQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChuZXdQbGFjZW1lbnQuaW5kZXhPZigncmlnaHQnKSA+IC0xKSB7XHJcbiAgICAgIGlmICh0aGlzLl9tZW51V2lkdGggPiByZWZlclBvc2l0aW9uLnJpZ2h0IC0gYnRuU2l6ZS5yaWdodCkge1xyXG4gICAgICAgIG5ld1BsYWNlbWVudCA9IG5ld1BsYWNlbWVudC5yZXBsYWNlKCdyaWdodCcsICdsZWZ0Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucmVjdGlmeVBsYWNlbWVudD1uZXdQbGFjZW1lbnQ7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOehruiupOWPgueFp+eahOi+ueeVjFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0UmVmZXJlbmNlUG9zaXRpb24oKSB7XHJcbiAgICBsZXQgclJpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgbGV0IHJCb3R0b20gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgbGV0IHJUb3AgPSAwO1xyXG4gICAgbGV0IHJMZWZ0ID0gMDtcclxuICAgIC8vIOaoquWQkeWPgueFp1xyXG4gICAgaWYgKHRoaXMucmVjdGlmeVJlZmVyZW5jZUgpIHtcclxuICAgICAgclJpZ2h0ID0gdGhpcy5yZWN0aWZ5UmVmZXJlbmNlSC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcclxuICAgICAgckxlZnQgPSB0aGlzLnJlY3RpZnlSZWZlcmVuY2VILmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICB9XHJcbiAgICAvLyDnurXlkJHlj4LnhadcclxuICAgIGlmICh0aGlzLnJlY3RpZnlSZWZlcmVuY2VWKSB7XHJcbiAgICAgIHJCb3R0b20gPSB0aGlzLnJlY3RpZnlSZWZlcmVuY2VWLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuICAgICAgclRvcCA9IHRoaXMucmVjdGlmeVJlZmVyZW5jZVYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgdG9wOiByVG9wLCBsZWZ0OiByTGVmdCwgcmlnaHQ6IHJSaWdodCwgYm90dG9tOiByQm90dG9tIH07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWPmOWMluWvueW6lOeahGNsYXNzXHJcbiAgICogQHBhcmFtIHBvc2l0aW9uIFxyXG4gICAqL1xyXG4gIF9nZXRDbHNOYW1lKHBvc2l0aW9uKSB7XHJcbiAgICBsZXQgY2xhc3NOYW1lID0gJyc7XHJcbiAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3RvcC1yaWdodCc6XHJcbiAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgLy8g5pyd5LiK77yM5pyd5LiKLeacneWPs1xyXG4gICAgICAgIGNsYXNzTmFtZSA9ICdkcm9wdXAnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd0b3AtbGVmdCc6XHJcbiAgICAgICAgLy8g5pyd5LiKLeacneW3plxyXG4gICAgICAgIGNsYXNzTmFtZSA9ICdkcm9wdXAtbGVmdCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQtYm90dG9tJzpcclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgLy8g5qiq5ZCR4oCU4oCU5pyd5bem4oCU4oCU5pyd5LiLXHJcbiAgICAgICAgY2xhc3NOYW1lID0gJ2Ryb3BsZWZ0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGVmdC10b3AnOlxyXG4gICAgICAgIC8vIOaoquWQkeKAlOKAlOacneW3puKAlOKAlOacneS4ilxyXG4gICAgICAgIGNsYXNzTmFtZSA9ICdkcm9wbGVmdC11cCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0LWJvdHRvbSc6XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAvLyDmqKrlkJHigJTigJTmnJ3lj7PigJTigJTmnJ3kuItcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcHJpZ2h0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQtdG9wJzpcclxuICAgICAgICAvLyDmqKrlkJHigJTigJTmnJ3lj7PigJTigJTmnJ3kuIpcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcHJpZ2h0LXVwJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYm90dG9tLWxlZnQnOlxyXG4gICAgICAgIC8vIOacneS4i+KAlOKAlOacneW3plxyXG4gICAgICAgIGNsYXNzTmFtZSA9ICdkcm9wZG93bi1sZWZ0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYm90dG9tLXJpZ2h0JzpcclxuICAgICAgICBjbGFzc05hbWUgPSAnZHJvcGRvd24nO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vIOacneS4i++8jOacneS4i+KAlOKAlOacneWPs1xyXG4gICAgICAgIGNsYXNzTmFtZSA9ICdkcm9wZG93bic7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2xhc3NOYW1lO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRSZWFsUGxhY2VtZW50KHBtZW50KSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gJ2JvdHRvbS1yaWdodCc7XHJcbiAgICBzd2l0Y2ggKHBtZW50KSB7XHJcbiAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ3RvcC1yaWdodCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHJlc3VsdCA9ICdsZWZ0LWJvdHRvbSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICByZXN1bHQgPSAncmlnaHQtYm90dG9tJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICByZXN1bHQgPSAnYm90dG9tLXJpZ2h0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXN1bHQgPSBwbWVudDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKiBcclxuICAqIOiuoeeul+eahOS9jee9ruWMuuWIhuW/kue7huWMllxyXG4gICovXHJcbiAgcHJpdmF0ZSBjaGFuZ2VQb3NpdGlvbihidG5TaXplOiBhbnkpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgbGV0IHJwbGFjZW1lbnQ9Jyc7XHJcbiAgICBpZih0aGlzLmF1dG9SZWN0aWZ5KXtcclxuICAgICAgcnBsYWNlbWVudD10aGlzLnJlY3RpZnlQbGFjZW1lbnQ7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcnBsYWNlbWVudD10aGlzLnJlYWxQbGFjZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBsZXQgc3R5bGVUb3AgPSAwO1xyXG4gICAgbGV0IHN0eWxlTGVmdCA9IDA7XHJcbiAgICBpZiAocnBsYWNlbWVudC5pbmRleE9mKCd0b3AnKSA+IC0xKSB7XHJcbiAgICAgIHN0eWxlVG9wID0gYnRuU2l6ZS50b3AgLSB0aGlzLl9tZW51SGVpZ2h0O1xyXG4gICAgfWVsc2UgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZignYm90dG9tJykgPiAtMSkge1xyXG4gICAgICBzdHlsZVRvcCA9IGJ0blNpemUuYm90dG9tO1xyXG4gICAgfVxyXG4gICAgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZigncmlnaHQnKSA+IC0xKSB7XHJcbiAgICAgIHN0eWxlTGVmdCA9IGJ0blNpemUucmlnaHQ7XHJcbiAgICB9ZWxzZSBpZihycGxhY2VtZW50LmluZGV4T2YoJ2xlZnQnKSA+IC0xKSB7XHJcbiAgICAgIHN0eWxlTGVmdCA9IGJ0blNpemUubGVmdCAtIHRoaXMuX21lbnVXaWR0aDtcclxuICAgIH1cclxuICAgIC8vIOW8gOWktFxyXG4gICAgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZignLXRvcCcpPi0xKSB7XHJcbiAgICAgIHN0eWxlVG9wPSBzdHlsZVRvcC1idG5TaXplLmhlaWdodDtcclxuICAgIH1lbHNlIGlmKHJwbGFjZW1lbnQuaW5kZXhPZignLWJvdHRvbScpPi0xKXtcclxuICAgICAgc3R5bGVUb3A9IHN0eWxlVG9wK2J0blNpemUuaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBzdHlsZVRvcCArICdweCc7XHJcbiAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSBzdHlsZUxlZnQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgLyog57uR5a6a5LiL5ouJ6Z2i5p2/6byg5qCH6L+b5YWl5LqL5Lu2ICovXHJcbiAgYmluZE1lbnVNb3VzZWVudGVyKCkge1xyXG4gICAgdGhpcy5tb3VzZWVudGVyRXZlbnQgPSB0aGlzLmNoYW5nZUZsYWdUb1RydWUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMubW91c2VlbnRlckV2ZW50KTtcclxuICB9XHJcblxyXG4gIC8qIOe7keWumuS4i+aLiemdouadv+m8oOagh+emu+W8gOS6i+S7tiAgKi9cclxuICBiaW5kaU1lbnVNb3VzZWxlYXZlKCkge1xyXG4gICAgdGhpcy5tb3VzZWxlYXZlRXZlbnQgPSB0aGlzLm1vdXNlTGVhdmUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMubW91c2VsZWF2ZUV2ZW50KTtcclxuICB9XHJcblxyXG4gIC8qIOe7keWumueCueWHu+mdouadv+WMuuWfn+S5i+WkluinpuWPkeeahOS6i+S7tiAqL1xyXG4gIC8vIGJpbmREb2NDbGljaygpIHtcclxuICAvLyAgIHRoaXMuZG9jdW1lbnRDbGlja0V2ZW50ID0gdGhpcy5jbGlja0RvYy5iaW5kKHRoaXMpO1xyXG4gIC8vICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRvY3VtZW50Q2xpY2tFdmVudCk7XHJcbiAgLy8gfVxyXG5cclxuICAvKiDop6Pnu5Hkuovku7YgKi9cclxuICB1bmJpbmRNZW51TW91c2VlbnRlcigpIHtcclxuICAgIGlmICh0aGlzLm1vdXNlZW50ZXJFdmVudCkge1xyXG4gICAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm1vdXNlZW50ZXJFdmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHVuYmluZGlNZW51TW91c2VsZWF2ZSgpIHtcclxuICAgIGlmICh0aGlzLm1vdXNlbGVhdmVFdmVudCkge1xyXG4gICAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm1vdXNlbGVhdmVFdmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIHVuYmluZERvY0NsaWNrKCkge1xyXG4gIC8vICAgaWYgKHRoaXMuZG9jdW1lbnRDbGlja0V2ZW50KSB7XHJcbiAgLy8gICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kb2N1bWVudENsaWNrRXZlbnQpO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcbiAgLyogZmxhZyB0cnVlICovXHJcbiAgY2hhbmdlRmxhZ1RvVHJ1ZSgpIHtcclxuICAgIHRoaXMuZHBGbGFnID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qIGZsYWcgZmFsc2UgKi9cclxuICBjaGFuZ2VGbGFnVG9GYWxzZSgpIHtcclxuICAgIHRoaXMuZHBGbGFnID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKiDpvKDmoIfnprvlvIDml7YgIOWFs+mXrW1lbnUgKi9cclxuICBtb3VzZUxlYXZlKCkge1xyXG4gICAgaWYgKHRoaXMuZHBGbGFnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRmxhZ1RvRmFsc2UoKTtcclxuICAgICAgLy8gdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gICAgICB0aGlzLnVuYmluZGlNZW51TW91c2VsZWF2ZSgpO1xyXG4gICAgICB0aGlzLnVuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgaWYgKHRoaXMuc2V0VGltZU9iaikge1xyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNldFRpbWVPYmopO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiDpvKDmoIfmsqHmnInov5vlhaXliLDpnaLmnb8gIOS4gOauteaXtumXtOWQjumdouadv+iHquWKqOa2iOWksSAqL1xyXG4gIG1vdXNlTm90RW50ZXJMZWF2ZSgpIHtcclxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRUaW1lT2JqID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRwRmxhZykge1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VGbGFnVG9GYWxzZSgpO1xyXG4gICAgICAgICAgLy8gdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gICAgICAgICAgdGhpcy51bmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgICAgIHRoaXMudW5iaW5kTWVudU1vdXNlZW50ZXIoKTtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgIGlmICh0aGlzLnNldFRpbWVPYmopIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2V0VGltZU9iaik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAxNTAwKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyog54K55Ye76Z2i5p2/5LmL5aSW5Yy65Z+fICovXHJcbiAgLy8gY2xpY2tEb2MoKSB7XHJcbiAgLy8gICB0aGlzLnVuYmluZERvY0NsaWNrKCk7XHJcbiAgLy8gICB0aGlzLnVuYmluZGlNZW51TW91c2VsZWF2ZSgpO1xyXG4gIC8vICAgdGhpcy51bmJpbmRNZW51TW91c2VlbnRlcigpO1xyXG4gIC8vICAgdGhpcy5jbG9zZSgpO1xyXG4gIC8vICAgaWYgKHRoaXMuc2V0VGltZU9iaikge1xyXG4gIC8vICAgICBjbGVhclRpbWVvdXQodGhpcy5zZXRUaW1lT2JqKTtcclxuICAvLyAgIH1cclxuICAvLyAgIHRoaXMuY2xpY2tNZW51T3V0LmVtaXQodGhpcy5zaG93KTtcclxuICAvLyB9XHJcblxyXG4gIC8qIOWFs+mXreS4i+aLiemdouadvyAqL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICAvLyDlhbPpl63kuIvmi4nmjInpkq7pnaLmnb8gIOiEj+WAvOajgOa1i1xyXG4gICAgaWYgKCF0aGlzLmNoYW5nZVJlZlsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgdGhpcy5jaGFuZ2VSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB0aGlzLmNoYW5nZVJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKiDliqjmgIHmjIflrpptZW515ZyoYm9keeS4reeahOS9jee9riAqL1xyXG4gIHByaXZhdGUgc2V0UG9zaXRpb24oZSkge1xyXG4gICAgLy8g5LiL5ouJ5oyJ6ZKuXHJcbiAgICBjb25zdCBidG5TaXplID0gdGhpcy5kcEJ0bi5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgLy8g5LiL5ouJ6Z2i5p2/ICAgICBcclxuICAgIGxldCBtZW51UmVjdCA9IHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICB0aGlzLl9tZW51SGVpZ2h0ID0gbWVudVJlY3QuaGVpZ2h0O1xyXG4gICAgdGhpcy5fbWVudVdpZHRoID0gbWVudVJlY3Qud2lkdGg7XHJcbiAgICAvLyDlpoLmnpzopoHoh6rliqjnuqDmraPmlrnlkJFcclxuICAgIGlmICh0aGlzLmF1dG9SZWN0aWZ5KSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlUGxhY2VtZW50KGJ0blNpemUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jaGFuZ2VQb3NpdGlvbihidG5TaXplKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG5cclxuICB9XHJcbn1cclxuIl19