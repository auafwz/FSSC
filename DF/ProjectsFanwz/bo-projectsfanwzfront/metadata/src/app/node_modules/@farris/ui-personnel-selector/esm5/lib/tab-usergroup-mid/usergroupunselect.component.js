/**
 * @fileoverview added by tsickle
 * Generated from: lib/tab-usergroup-mid/usergroupunselect.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild, TemplateRef, Optional } from '@angular/core';
import { ApiLocalService } from '../../utils/api-service';
import { DatagridComponent } from '@farris/ui-datagrid';
import * as _ from 'lodash-es';
import { FavoritesTool } from '../../utils/favorites.tool';
import { noDataImg } from '../../assets/resource';
import { DataLoadingService } from '../../utils/loading-service';
import { FilterOrg } from '../../utils/user.type';
import { switchMap, tap } from 'rxjs/operators';
import { FilterOrgTool } from '../../utils/filterorg.tool';
var UserGroupUnSelectComponent = /** @class */ (function () {
    function UserGroupUnSelectComponent(apiService, favoritesTool) {
        this.apiService = apiService;
        this.favoritesTool = favoritesTool;
        this.idField = 'userId';
        this.items = [];
        this.orgId = '';
        this.userIds = '';
        this.unSelectedUserIds = '';
        this.enablePagination = true;
        this.userGroupId = '';
        this.selectionsChange = new EventEmitter();
        this.searchResultChange = new EventEmitter();
        this.selections = [];
        this.cloneUserIds = '';
        this.cloneSelections = [];
        this.pEnableChildHierarchy = true;
        this.pIncludeCurrentUser = true;
        this.favoritesList = [];
        this.noDataImg = noDataImg;
        this.allChecked = false;
        this.itemsBackup = [];
        this.allIndexId = 'allIndexId';
        // 是否显示用户编号
        this.showUserCode = true;
        this.showPagesPanel = false;
        this.pageList = [10, 20, 50, 100, 200, 500, 1000, 2000, 5000];
        this.filterPersonWithOrgUrl = '/api/runtime/sys/v1.0/absUserOrg/org/System_organization/getOrgByUserFiler';
        this.filterOrgArr = [];
        this.filterOrgId = null;
        this.isEmptyFilterOrg = false;
        this.presetFilterInfo = '筛选组织：无';
        this.currentFilerInfo = null;
        this.allIndexId = Math.random().toString(16).substring(3, 10);
        this.filterOrgTool = new FilterOrgTool();
    }
    Object.defineProperty(UserGroupUnSelectComponent.prototype, "enableChildHierarchy", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.pEnableChildHierarchy = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserGroupUnSelectComponent.prototype, "includeCurrentUser", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.pIncludeCurrentUser = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var title = '';
        if (this.multiSelect) {
            title = '全选';
        }
        this.columns = [
            {
                field: 'name', template: this.opCell, title: title, width: '150'
            }
        ];
        if (this.filterOrgTool) {
            this.filterOrgSub = this.filterOrgTool.filterOrgSubject.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                _this.currentFilerInfo = data;
            }));
        }
        if (this.favoritesTool) {
            this.favoritesTool.favoritesSubject.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                _this.favoritesList = data;
                _this.unSelectedListLoad();
            }));
        }
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        // this.pageChangeCheck();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.includeCurrentUser && typeof changes.includeCurrentUser.currentValue === 'boolean'
            && !changes.includeCurrentUser.firstChange) {
            this.assembleDataByUserGroupId();
        }
        if (changes.enableChildHierarchy && typeof changes.enableChildHierarchy.currentValue === 'boolean'
            && !changes.enableChildHierarchy.firstChange) {
            this.assembleDataByUserGroupId();
        }
        // console.log(changes);
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.filterOrgSub.unsubscribe();
    };
    /**
     * @private
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.emitSelections = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var emitObj = {
            selections: this.selections,
            token: 'unDatagrid'
        };
        this.selectionsChange.emit(emitObj);
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.restoreSelections = /**
     * @return {?}
     */
    function () {
        this.selections = _.cloneDeep(this.cloneSelections);
        // this.emitSelections();
        this.toggleChecked();
    };
    // 人员展示翻页触发查询（！）
    // 人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.switchPage = 
    // 人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        this.pageIndex = size.pageIndex;
        this.pageSize = size.pageSize;
        if (this.searchPage) {
            this.assembleDataBySearch();
        }
        else {
            this.assembleDataByUserGroupId();
        }
    };
    /**
     * @param {?} e
     * @param {?} item
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.toggleFavorites = /**
     * @param {?} e
     * @param {?} item
     * @return {?}
     */
    function (e, item) {
        this.favoritesTool.toggleFavorites(e, item);
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.assembleDataBySearch = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var requestParam = {
            pageSize: this.pageSize,
            pageIndex: this.pageIndex,
            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId
        };
        // 全局搜索or局部
        if (!this.globalSearch) {
            requestParam.orgId = this.orgId;
        }
        this.apiService.getPersonnelBySearch(this.absUserOrgUrl, this.absOrgType, this.searchText, requestParam).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            /** @type {?} */
            var rcResData = res ? res.data : [];
            _this.unSelectedList = rcResData;
            _this.pageTotalAll = res.totalCount;
            _this.pageTotal = Math.ceil(_this.pageTotalAll / _this.pageSize);
            if (_this.pageTotal === 0) {
                _this.pageTotal = 1;
            }
            _this.unSelectedListLoad();
            _this.searchResultChange.emit(true);
        }));
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.assembleDataByUserGroupId = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.dataLoadingService) {
            this.dataLoadingService.show(this.loadingServiceMessage);
        }
        /** @type {?} */
        var requestParam = {
            withAllGroup: this.pEnableChildHierarchy ? true : false,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId,
            groupId: this.userGroupId,
        };
        if (this.enablePagination) {
            requestParam.pageSize = this.pageSize;
            requestParam.pageIndex = this.pageIndex;
        }
        // 通过组织进行人员的二次过滤
        if (this.filterOrgId) {
            requestParam.orgId = this.filterOrgId;
        }
        this.apiService.getPersonnelByUserGroupId(this.absUserOrgUrl, requestParam).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            /** @type {?} */
            var rcResData = res ? res.data : [];
            _this.unSelectedList = rcResData;
            _this.pageTotalAll = res.totalCount;
            _this.pageTotal = Math.ceil(_this.pageTotalAll / _this.pageSize);
            if (_this.pageTotal === 0) {
                _this.pageTotal = 1;
            }
            _this.unSelectedListLoad();
            if (_this.filterOrgId) {
                /** @type {?} */
                var currentFilterOrg = _this.filterOrgArr.find((/**
                 * @param {?} arr
                 * @return {?}
                 */
                function (arr) { return arr.id == _this.filterOrgId; }));
                if (currentFilterOrg) {
                    _this.filterOrgTool.emitFilterOrg('筛选组织：' + currentFilterOrg['name']);
                }
            }
            else {
                _this.filterOrgTool.emitFilterOrg(_this.presetFilterInfo);
            }
            if (_this.dataLoadingService) {
                _this.dataLoadingService.hide();
            }
        }));
    };
    // 显示组织过滤漏斗的场景下，用户分组树内切换用户分组时首先获取人员所属的全部组织，再获取人员数据
    // 显示组织过滤漏斗的场景下，用户分组树内切换用户分组时首先获取人员所属的全部组织，再获取人员数据
    /**
     * @param {?} size
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.assembleDataByUserGroupIdAndGetFilterOrg = 
    // 显示组织过滤漏斗的场景下，用户分组树内切换用户分组时首先获取人员所属的全部组织，再获取人员数据
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        var _this = this;
        if (this.dataLoadingService) {
            this.dataLoadingService.show(this.loadingServiceMessage);
        }
        this.pageIndex = size.pageIndex;
        this.pageSize = size.pageSize;
        this.filterOrgArr = [];
        this.filterOrgId = null;
        /** @type {?} */
        var filterRequestParam = {
            absOrgType: this.absOrgType,
            withAllOrg: true,
            getUserInfo: false,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId,
            groupId: this.userGroupId,
        };
        // 首先获取当前用户分组下所有成员所属的组织
        /** @type {?} */
        var getFilterOrg$ = this.apiService.getFilterOrganization(this.filterPersonWithOrgUrl, this.absOrgType, filterRequestParam);
        /** @type {?} */
        var requestParam = {
            withAllGroup: this.pEnableChildHierarchy ? true : false,
            notGetStopUser: !this.includeStopUser,
            notGetCurrentUser: !this.pIncludeCurrentUser,
            orderField: this.orderField,
            userTypeMode: this.userTypeMode,
            filterId: this.filterId,
            groupId: this.userGroupId,
        };
        if (this.enablePagination) {
            requestParam.pageSize = this.pageSize;
            requestParam.pageIndex = this.pageIndex;
        }
        // 然后获取当前用户分组下的所有成员
        /** @type {?} */
        var getPersonnel$ = this.apiService.getPersonnelByUserGroupId(this.absUserOrgUrl, requestParam);
        getFilterOrg$.pipe(switchMap((/**
         * @param {?} resData
         * @return {?}
         */
        function (resData) {
            if (resData && resData.data && resData.data.length > 0) {
                /** @type {?} */
                var filterOrg_1;
                _this.filterOrgArr = resData.data.map((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    filterOrg_1 = new FilterOrg();
                    filterOrg_1.id = data['orgId'];
                    filterOrg_1.value = data['code'];
                    filterOrg_1.name = data['name'];
                    return filterOrg_1;
                }));
                _this.filterOrgTool.emitFilterOrg(_this.presetFilterInfo);
            }
            else {
                _this.isEmptyFilterOrg = true;
            }
            return getPersonnel$.pipe(tap((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                /** @type {?} */
                var rcResData = res ? res.data : [];
                _this.unSelectedList = rcResData;
                _this.pageTotalAll = res.totalCount;
                _this.pageTotal = Math.ceil(_this.pageTotalAll / _this.pageSize);
                if (_this.pageTotal === 0) {
                    _this.pageTotal = 1;
                }
                _this.unSelectedListLoad();
            })));
        })), tap((/**
         * @return {?}
         */
        function () {
            if (_this.dataLoadingService) {
                _this.dataLoadingService.hide();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            if (_this.dataLoadingService) {
                _this.dataLoadingService.hide();
            }
            console.warn('显示组织过滤漏斗的场景下，调用后端接口出现错误！');
        }))).subscribe();
    };
    /**
     * datagrid用于数据展示
     */
    /**
     * datagrid用于数据展示
     * @param {?=} initLoad
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.unSelectedListLoad = /**
     * datagrid用于数据展示
     * @param {?=} initLoad
     * @return {?}
     */
    function (initLoad) {
        var _this = this;
        if (initLoad === void 0) { initLoad = false; }
        this.items = [];
        this.unSelectedList.forEach((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            // const indexId = Math.random().toString(16).substring(2);
            // const item = {
            //     abbreviation: res.abbreviation,
            //     code: res.code,
            //     defaultOrgId: res.defaultOrgId,
            //     defaultOrgPath: res.defaultOrgPath,
            //     ext1: res.ext1,
            //     ext2: res.ext2,
            //     fullPathName: res.fullPathName,
            //     name: res.name,
            //     orgTypeId: res.orgTypeId,
            //     secLevel: res.secLevel,
            //     sortOrder: res.sortOrder,
            //     state: res.state,
            //     su: res.su,
            //     userId: res.userId,
            //     orgAllPath: res.orgAllPath,
            //     inFavorites: false,
            //     type: 'people',
            //     checked: false,
            //     indexId
            // };
            /** @type {?} */
            var item = _.cloneDeep(res);
            item.checked = false;
            item.inFavorites = false;
            item.indexId = Math.random().toString(16).substring(2);
            if (_this._isInArray(res[_this.idField], _this.idField, _this.selections) !== -1) {
                item.checked = true;
            }
            if (_this._isInArray(res[_this.idField], _this.idField, _this.favoritesList) !== -1) {
                item.inFavorites = true;
            }
            item.displayName = !!_this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;
            _this.items.push(item);
            _this.itemsBackup.push(item);
        }));
        this.toggleChecked();
        this.items = this.items.slice();
        this.cdRef ? this.cdRef.detectChanges() : null;
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.toggleAll = /**
     * @return {?}
     */
    function () {
        if (!this.allChecked) {
            this.checkAll();
        }
        else {
            this.unCheckAll();
        }
        this.emitSelections();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.toggleOne = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data.checked) {
            this.unSelectLine(data);
        }
        else {
            this.selectLine(data);
        }
        this.emitSelections();
    };
    /**
     * 全选后处理
     * @param dataArr 全选的值
     */
    /**
     * 全选后处理
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.checkAll = /**
     * 全选后处理
     * @return {?}
     */
    function () {
        var _this = this;
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this._insertOneIntoSelections(item);
            item.checked = true;
        }));
    };
    /**
     * 全部取消
     * @param dataArr 取消的数据
     * @returns void
     */
    /**
     * 全部取消
     * @return {?} void
     */
    UserGroupUnSelectComponent.prototype.unCheckAll = /**
     * 全部取消
     * @return {?} void
     */
    function () {
        var _this = this;
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this.selections.forEach((/**
             * @param {?} selection
             * @param {?} index
             * @return {?}
             */
            function (selection, index) {
                if (item[_this.idField] === selection[_this.idField]) {
                    _this.selections.splice(index, 1);
                }
            }));
            item.checked = false;
        }));
    };
    /**
    * 当前行选中
    * @param data 当前行的数据（）
    */
    /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.selectLine = /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    function (data) {
        if (this.multiSelect) {
            this._insertOneIntoSelections(data);
        }
        else {
            this.userIds = '';
            this.selections = [];
            this.items.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.checked) {
                    item.checked = false;
                }
            }));
            this._insertOneIntoSelections(data);
        }
        if (this.isAllChecked()) {
            this.allChecked = true;
        }
    };
    /**
     * 单选取消选中
     * @param data 取消选中行
     */
    /**
     * 单选取消选中
     * @param {?} data 取消选中行
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.unSelectLine = /**
     * 单选取消选中
     * @param {?} data 取消选中行
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var index = this._isInArray(data[this.idField], this.idField, this.selections);
        if (index > -1) {
            this.selections.splice(index, 1);
        }
        if (this.allChecked) {
            this.allChecked = false;
        }
    };
    /**
     *  取消选中
     * @param $event 取消勾选的数据
     */
    /**
     *  取消选中
     * @param {?} $event 取消勾选的数据
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.cancelSelections = /**
     *  取消选中
     * @param {?} $event 取消勾选的数据
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if (this.items.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item[_this.idField] === $event.id; })) === -1) {
            return;
        }
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item[_this.idField] === $event.id) {
                item.checked = false;
            }
        }));
        this.selections.forEach((/**
         * @param {?} selection
         * @param {?} index
         * @return {?}
         */
        function (selection, index) {
            if ($event.id === selection[_this.idField]) {
                _this.selections.splice(index, 1);
            }
        }));
        this.allChecked = false;
    };
    /**
     * 全部取消勾选
     */
    /**
     * 全部取消勾选
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.clearCheckeds = /**
     * 全部取消勾选
     * @return {?}
     */
    function () {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.checked = false;
        }));
        this.allChecked = false;
        this.selections = [];
    };
    /**
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.clearUserIds = /**
     * @return {?}
     */
    function () {
        this.userIds = '';
    };
    /**
     * 选中并插入当前行数据到右侧
     * @param data 当前行的数据
     * @param collection 暂存当前数据的集合
     */
    /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype._insertOneIntoSelections = /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    function (data) {
        // 如果当前数据已经移入右侧数据，则返回。
        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {
            return;
        }
        this.selections.push(data);
        this.selections = this.selections.slice();
    };
    /**
     * 判断是否在内
     * @param value value
     * @param field field
     * @param array array
     * @returns 位置索引
     */
    /**
     * 判断是否在内
     * @param {?} value value
     * @param {?} field field
     * @param {?} array array
     * @return {?} 位置索引
     */
    UserGroupUnSelectComponent.prototype._isInArray = /**
     * 判断是否在内
     * @param {?} value value
     * @param {?} field field
     * @param {?} array array
     * @return {?} 位置索引
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[field]; }));
    };
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     */
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.toggleChecked = /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    function () {
        var _this = this;
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (_this._isInArray(item[_this.idField], _this.idField, _this.selections) > -1) {
                item.checked = true;
            }
            else {
                item.checked = false;
            }
        }));
        if (this.isAllChecked()) {
            this.allChecked = true;
        }
        else {
            this.allChecked = false;
        }
    };
    /**
     * @private
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.isAllChecked = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var count = 0;
        /** @type {?} */
        var allChecked = false;
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this.selections.forEach((/**
             * @param {?} selection
             * @return {?}
             */
            function (selection) {
                if (item[_this.idField] === selection[_this.idField]) {
                    count += 1;
                }
            }));
        }));
        if (this.items.length === count && count > 0) {
            allChecked = true;
        }
        return allChecked;
    };
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.trackByFn = /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    function (index, item) {
        return item.userId;
    };
    /**
     * @param {?} dir
     * @param {?} num
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.turnOverPage = /**
     * @param {?} dir
     * @param {?} num
     * @return {?}
     */
    function (dir, num) {
        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {
            return;
        }
        this.pageIndex = this.pageIndex + num;
        this.switchPage({
            pageIndex: this.pageIndex,
            pageSize: this.pageSize,
        });
    };
    /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.beforePageIndexChange = /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    function (inputEl, maxNumber) {
        /** @type {?} */
        var target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        var currentPageNumber = Number(target.value);
        if (currentPageNumber > maxNumber) {
            target.value = maxNumber;
        }
        else {
            if (currentPageNumber < 1) {
                target.value = 1;
            }
        }
        this.pageIndex = Number(target.value);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.onMouseEnter = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.showPagesPanel = true;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.onMouseLeave = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.showPagesPanel = false;
    };
    /**
     * @param {?} $event
     * @param {?} num
     * @return {?}
     */
    UserGroupUnSelectComponent.prototype.changePageSizeHandler = /**
     * @param {?} $event
     * @param {?} num
     * @return {?}
     */
    function ($event, num) {
        $event.stopPropagation();
        if (num == this.pageSize) {
            return;
        }
        this.showPagesPanel = false;
        this.pageSize = num;
        this.switchPage({
            pageIndex: 1,
            pageSize: this.pageSize,
        });
    };
    UserGroupUnSelectComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-usergroup-unselect',
                    template: "<ng-template #unSelectDatagrid [ngIf]=\"false\"></ng-template>\r\n<ng-template #opCell [ngIf]=\"false\"></ng-template>\r\n<!-- \u517C\u5BB9\u4FDD\u7559 -->\r\n\r\n<div class=\"candidate\">\r\n    <div class=\"candidate-title\">\r\n        <div class=\"custom-control custom-checkbox mb-2\" *ngIf=\"multiSelect && items.length > 0\">\r\n            <input class=\"custom-control-input\" [id]=\"allIndexId\" type=\"checkbox\" [(ngModel)]=\"allChecked\">\r\n            <label class=\"custom-control-label\" [for]=\"allIndexId\" (click)=\"toggleAll()\">\u5168\u9009</label>\r\n        </div>\r\n        <div>&nbsp;</div>\r\n    </div>\r\n    <perfect-scrollbar *ngIf=\"items.length!==0\">\r\n        <div class=\"candidate-content\">\r\n            <div *ngFor=\"let data of items; let i = index;trackBy: trackByFn\" class=\"s-selectedPerson\">\r\n                <div class=\"custom-control custom-checkbox\">\r\n                    <input class=\"custom-control-input\" [(ngModel)]=\"data.checked\" [id]=\"data.indexId\" type=\"checkbox\">\r\n                    <label class=\"custom-control-label\" [for]=\"data.indexId\" (click)=\"toggleOne(data)\">\r\n                        <div style=\"display: flex; height: 32px; margin: -21px 0 0 24px;\">\r\n                            <farris-avatar [avatarWidth]=\"32\" [avatarHeight]=\"32\" [cover]=\"data.ext1\" [readonly]=\"true\">\r\n                            </farris-avatar>\r\n                            <div style=\"margin-left: 11px; margin-top: -1px; padding-right: 10px; overflow: hidden;\">\r\n                                <p class=\"candidate-content-title\" title=\"{{data.displayName}}\">\r\n                                    {{data.displayName}}</p>\r\n                                <p class=\"candidate-content-orgpath\" title=\"{{data.orgAllPath}}\">\r\n                                    {{data.orgAllPath}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <span class=\"f-icon f-icon-star\" *ngIf=\"enableFavorites\" [class.default-light-color]=\"data.inFavorites\"\r\n                    [class.default-dark-color]=\"!data.inFavorites\" (click)=\"toggleFavorites($event, data)\"></span>\r\n            </div>\r\n\r\n        </div>\r\n    </perfect-scrollbar>\r\n    <div class=\"pagination-container\" *ngIf=\"items.length!==0\">\r\n        <ul class=\"ngx-pagination pagination pager-viewmode-simple\">\r\n            <li class=\"pagination-pagelist\" style=\"padding: 0;\" *ngIf=\"showPageList\">\r\n                <div class=\"dropup dropdown-right pg-pagelist\"\r\n                    [ngClass]=\"{'show': showPagesPanel}\"\r\n                    (mouseenter)=\"onMouseEnter($event)\" (mouseleave)=\"onMouseLeave($event)\">\r\n                    <div class=\"pg-pagelist-info\">\r\n                        <span class=\"pagelist-text\">\u663E\u793A</span><b\r\n                            class=\"cur-pagesize\">{{ pageSize }}</b><span\r\n                            class=\"pagelist-text\">\u6761</span><i\r\n                            class=\"f-icon f-icon-dropdown\"></i>\r\n                    </div>\r\n                    <div class=\"dropdown-menu\" [ngClass]=\"{'show': showPagesPanel}\" style=\"margin-bottom: -1px;\">\r\n                        <li class=\"dropdown-item\" [ngClass]=\"{'active':num == pageSize}\"\r\n                            *ngFor=\"let num of pageList\" (click)=\"changePageSizeHandler($event, num)\">\r\n                            <span>{{ num }}</span>\r\n                        </li>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li class=\"page-item d-flex flex-fill\"></li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === 1\" (click)=\"turnOverPage('pre', -1)\">\r\n                <span class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-pre\"></span>\r\n                </span>\r\n            </li>\r\n            <li class=\"page-item\">\r\n                <input id=\"farris-datagrid-gotopagenumber\" min=\"1\" type=\"number\" max=\"{{pageTotal}}\"\r\n                    [(ngModel)]=\"pageIndex\" style=\"width: 38px;\" (keyup.enter)=\"switchPage({pageIndex: pageIndex, pageSize: pageSize})\"\r\n                    (input)=\"beforePageIndexChange($event, pageTotal)\">\r\n            </li>\r\n            <li class=\"page-item page-separator\" style=\"margin-left: 10px\"> / </li>\r\n            <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n                <span style=\"font-size: 16px; font-weight: 600;\"> {{pageTotal}}</span>\r\n            </li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === pageTotal\" (click)=\"turnOverPage('next', 1)\">\r\n                <a class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-next\"></span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div *ngIf=\"items.length===0\" [ngStyle]=\"{'background-image': noDataImg}\" class=\"fp-candidate-nodata\">\r\n        \u6682\u65E0\u6570\u636E</div>\r\n</div>",
                    styles: [":host{display:-webkit-box;display:flex;height:100%;-webkit-box-flex:1;flex:1;overflow:hidden;position:static}.candidate{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%}.candidate .fp-candidate-nodata{width:100px;height:100px;text-align:center;background-repeat:no-repeat;background-size:contain;margin:110px auto 0;color:#b4bccc;padding-top:110px}.candidate .group_blank_15{width:100%;height:15px}.candidate .candidate-content{clear:both}.candidate .s-selectedPerson:first-child{margin-top:0}.candidate .s-selectedPerson{min-width:240px;float:left;width:calc(100% - 6px);position:relative;height:40px;padding:5px 12px;margin:0 3px 1px}.candidate .s-selectedPerson:hover{background:#eef5ff;border-radius:5px}.candidate .f-icon{font-size:14px}.candidate .s-selectedPerson .f-icon-star{position:absolute;top:13px;right:12px;font-size:14px}.candidate .s-selectedPerson .default-light-color{color:#f7b500}.candidate .s-selectedPerson .default-dark-color{color:#d8dce6}.candidate .candidate-content-title{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:13px}.candidate .candidate-content-orgpath{margin:0;font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#c7ccd7}.candidate .candidate-title{-webkit-box-pack:justify;justify-content:space-between;height:35px;margin-bottom:18px}.candidate .candidate-title .custom-control{margin:10px 0 0 15px;line-height:35px}.candidate .s-selectedPerson .custom-control-label::before{top:7px}.candidate .candidate-title .title-clearall{margin:5px 15px 0 0;color:#2a87ff;cursor:pointer;line-height:35px}.candidate .candidate-title div{line-height:35px;margin:5px 10px 0 0;color:#2a87ff;cursor:pointer}.candidate .saved-group{position:absolute;width:111px;height:26px;line-height:26px;background:#eaedf2;border-radius:5px;text-align:center;font-size:13px;bottom:10px;left:13px;z-index:999;color:#909ba2;cursor:pointer}.candidate .saved-group:hover{color:#2a87ff;background:#eaf4ff}.candidate .saved-group:hover .f-icon{color:#2a87ff}.candidate .saved-group .f-icon{color:#909ba2;margin-right:5px;cursor:pointer;font-size:14px}.s-group-dialog-container{height:520px;width:600px;position:fixed;left:50%;top:50%;margin:-260px 0 0 -300px;background:#fff;padding:15px 20px;border-radius:10px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;z-index:9999}.s-group-dialog-container .s-personnel-group-footer{margin-top:15px}.s-help-bg{background:rgb(0 0 0 / 15%);position:fixed;left:0;top:0;right:0;bottom:0;z-index:9997}.s-group-dialog-container .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.s-group-dialog-container .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.s-group-dialog-container .s-personnel-group-footer .fr{float:right;height:32px}"]
                }] }
    ];
    /** @nocollapse */
    UserGroupUnSelectComponent.ctorParameters = function () { return [
        { type: ApiLocalService },
        { type: FavoritesTool, decorators: [{ type: Optional }] }
    ]; };
    UserGroupUnSelectComponent.propDecorators = {
        unSelectDatagrid: [{ type: ViewChild, args: ['unSelectDatagrid',] }],
        opCell: [{ type: ViewChild, args: ['opCell',] }],
        idField: [{ type: Input }],
        items: [{ type: Input }],
        absUserOrgUrl: [{ type: Input }],
        absOrgType: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pageTotalAll: [{ type: Input }],
        multiSelect: [{ type: Input }],
        noSelectToRight: [{ type: Input }],
        searchText: [{ type: Input }],
        unSelectedList: [{ type: Input }],
        pageTotal: [{ type: Input }],
        enableChildHierarchy: [{ type: Input }],
        orgId: [{ type: Input }],
        userIds: [{ type: Input }],
        unSelectedUserIds: [{ type: Input }],
        includeStopUser: [{ type: Input }],
        searchPage: [{ type: Input }],
        includeCurrentUser: [{ type: Input }],
        enablePagination: [{ type: Input }],
        enableFavorites: [{ type: Input }],
        busNum: [{ type: Input }],
        orderField: [{ type: Input }],
        userTypeMode: [{ type: Input }],
        globalSearch: [{ type: Input }],
        userGroupId: [{ type: Input }],
        showPageList: [{ type: Input }],
        dataLoadingService: [{ type: Input }],
        selectionsChange: [{ type: Output }],
        searchResultChange: [{ type: Output }]
    };
    return UserGroupUnSelectComponent;
}());
export { UserGroupUnSelectComponent };
if (false) {
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.unSelectDatagrid;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.opCell;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.idField;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.items;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.absOrgType;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageIndex;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageSize;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageTotalAll;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.multiSelect;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.noSelectToRight;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.searchText;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.unSelectedList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageTotal;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.orgId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.userIds;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.unSelectedUserIds;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.includeStopUser;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.searchPage;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.enablePagination;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.enableFavorites;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.busNum;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.orderField;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.userTypeMode;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.globalSearch;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.userGroupId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.showPageList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.dataLoadingService;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.selectionsChange;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.searchResultChange;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.columns;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.selections;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.cloneUserIds;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.cloneSelections;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.pEnableChildHierarchy;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.pIncludeCurrentUser;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.favoritesList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.noDataImg;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.allChecked;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.itemsBackup;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.allIndexId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.showUserCode;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.cdRef;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.showPagesPanel;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.pageList;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.loadingServiceMessage;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterPersonWithOrgUrl;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterOrgArr;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.filterOrgId;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.isEmptyFilterOrg;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.filterOrgTool;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.filterOrgSub;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.presetFilterInfo;
    /** @type {?} */
    UserGroupUnSelectComponent.prototype.currentFilerInfo;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    UserGroupUnSelectComponent.prototype.favoritesTool;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1wZXJzb25uZWwtc2VsZWN0b3IvIiwic291cmNlcyI6WyJsaWIvdGFiLXVzZXJncm91cC1taWQvdXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQXlCLFdBQVcsRUFDM0QsUUFBUSxFQUNyQyxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxLQUFLLENBQUMsTUFBTSxXQUFXLENBQUM7QUFDL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFHM0Q7SUEwRUksb0NBQ1ksVUFBMkIsRUFDZixhQUE0QjtRQUR4QyxlQUFVLEdBQVYsVUFBVSxDQUFpQjtRQUNmLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBbEUzQyxZQUFPLEdBQVcsUUFBUSxDQUFDO1FBQzNCLFVBQUssR0FBRyxFQUFFLENBQUM7UUFjWCxVQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ1gsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQUNiLHNCQUFpQixH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c0RBQW9DOztJQUNwQyxzREFBZ0M7Ozs7O0lBRzVCLGdEQUFtQzs7Ozs7SUFDbkMsbURBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgVGVtcGxhdGVSZWYsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgT25EZXN0cm95XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFwaUxvY2FsU2VydmljZSB9IGZyb20gJy4uLy4uL3V0aWxzL2FwaS1zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBGYXZvcml0ZXNUb29sIH0gZnJvbSAnLi4vLi4vdXRpbHMvZmF2b3JpdGVzLnRvb2wnO1xyXG5pbXBvcnQgeyBub0RhdGFJbWcgfSBmcm9tICcuLi8uLi9hc3NldHMvcmVzb3VyY2UnO1xyXG5pbXBvcnQgeyBEYXRhTG9hZGluZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi91dGlscy9sb2FkaW5nLXNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGaWx0ZXJPcmcgfSBmcm9tICcuLi8uLi91dGlscy91c2VyLnR5cGUnO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgRmlsdGVyT3JnVG9vbCB9IGZyb20gJy4uLy4uL3V0aWxzL2ZpbHRlcm9yZy50b29sJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnbGliLXVzZXJncm91cC11bnNlbGVjdCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vdXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdXNlcmdyb3VwdW5zZWxlY3QuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVc2VyR3JvdXBVblNlbGVjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3VuU2VsZWN0RGF0YWdyaWQnKSB1blNlbGVjdERhdGFncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ29wQ2VsbCcpIG9wQ2VsbDogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICBASW5wdXQoKSBpZEZpZWxkOiBzdHJpbmcgPSAndXNlcklkJztcclxuICAgIEBJbnB1dCgpIGl0ZW1zID0gW107XHJcbiAgICBASW5wdXQoKSBhYnNVc2VyT3JnVXJsOiBhbnk7XHJcbiAgICBASW5wdXQoKSBhYnNPcmdUeXBlOiBhbnk7XHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXg6IGFueTtcclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplOiBhbnk7XHJcbiAgICBASW5wdXQoKSBwYWdlVG90YWxBbGw6IGFueTtcclxuICAgIEBJbnB1dCgpIG11bHRpU2VsZWN0OiBhbnk7XHJcbiAgICBASW5wdXQoKSBub1NlbGVjdFRvUmlnaHQ6IGFueTtcclxuICAgIEBJbnB1dCgpIHNlYXJjaFRleHQ6IGFueTtcclxuICAgIEBJbnB1dCgpIHVuU2VsZWN0ZWRMaXN0OiBhbnk7XHJcbiAgICBASW5wdXQoKSBwYWdlVG90YWw6IGFueTtcclxuICAgIEBJbnB1dCgpIHNldCBlbmFibGVDaGlsZEhpZXJhcmNoeSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMucEVuYWJsZUNoaWxkSGllcmFyY2h5ID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBvcmdJZCA9ICcnO1xyXG4gICAgQElucHV0KCkgdXNlcklkcyA9ICcnO1xyXG4gICAgQElucHV0KCkgdW5TZWxlY3RlZFVzZXJJZHMgPSAnJztcclxuICAgIEBJbnB1dCgpIGluY2x1ZGVTdG9wVXNlcjogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIHNlYXJjaFBhZ2U6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBzZXQgaW5jbHVkZUN1cnJlbnRVc2VyKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5wSW5jbHVkZUN1cnJlbnRVc2VyID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBlbmFibGVQYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGVuYWJsZUZhdm9yaXRlczogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGJ1c051bTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgb3JkZXJGaWVsZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgdXNlclR5cGVNb2RlOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBnbG9iYWxTZWFyY2g6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSB1c2VyR3JvdXBJZCA9ICcnO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VMaXN0OiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgZGF0YUxvYWRpbmdTZXJ2aWNlOiBEYXRhTG9hZGluZ1NlcnZpY2U7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0aW9uc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIHNlYXJjaFJlc3VsdENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgICBjb2x1bW5zOiBhbnk7XHJcbiAgICBzZWxlY3Rpb25zOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIGNsb25lVXNlcklkcyA9ICcnO1xyXG4gICAgY2xvbmVTZWxlY3Rpb25zID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBwRW5hYmxlQ2hpbGRIaWVyYXJjaHkgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBwSW5jbHVkZUN1cnJlbnRVc2VyID0gdHJ1ZTtcclxuICAgIGZhdm9yaXRlc0xpc3QgPSBbXTtcclxuICAgIG5vRGF0YUltZyA9IG5vRGF0YUltZztcclxuICAgIGFsbENoZWNrZWQgPSBmYWxzZTtcclxuICAgIGl0ZW1zQmFja3VwID0gW107XHJcbiAgICBhbGxJbmRleElkID0gJ2FsbEluZGV4SWQnO1xyXG4gICAgZmlsdGVySWQ6IHN0cmluZztcclxuICAgIC8vIOaYr+WQpuaYvuekuueUqOaIt+e8luWPt1xyXG4gICAgc2hvd1VzZXJDb2RlID0gdHJ1ZTtcclxuICAgIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZjtcclxuICAgIHNob3dQYWdlc1BhbmVsOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwYWdlTGlzdCA9IFsxMCwgMjAsIDUwLCAxMDAsIDIwMCwgNTAwLCAxMDAwLCAyMDAwLCA1MDAwXTtcclxuICAgIGxvYWRpbmdTZXJ2aWNlTWVzc2FnZTogc3RyaW5nO1xyXG4gICAgZmlsdGVyUGVyc29uV2l0aE9yZ1VybDogc3RyaW5nID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNVc2VyT3JnL29yZy9TeXN0ZW1fb3JnYW5pemF0aW9uL2dldE9yZ0J5VXNlckZpbGVyJztcclxuICAgIGZpbHRlck9yZ0FycjogQXJyYXk8RmlsdGVyT3JnPiA9IFtdO1xyXG4gICAgZmlsdGVyT3JnSWQ6IHN0cmluZyA9IG51bGw7XHJcbiAgICBpc0VtcHR5RmlsdGVyT3JnOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGZpbHRlck9yZ1Rvb2w6IEZpbHRlck9yZ1Rvb2xcclxuICAgIHByaXZhdGUgZmlsdGVyT3JnU3ViOiBTdWJzY3JpcHRpb247XHJcbiAgICBwcmVzZXRGaWx0ZXJJbmZvOiBzdHJpbmcgPSAn562b6YCJ57uE57uH77ya5pegJztcclxuICAgIGN1cnJlbnRGaWxlckluZm86IHN0cmluZyA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBhcGlTZXJ2aWNlOiBBcGlMb2NhbFNlcnZpY2UsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBmYXZvcml0ZXNUb29sOiBGYXZvcml0ZXNUb29sXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmFsbEluZGV4SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMywgMTApO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyT3JnVG9vbCA9IG5ldyBGaWx0ZXJPcmdUb29sKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHRpdGxlID0gJyc7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGl0bGUgPSAn5YWo6YCJJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogJ25hbWUnLCB0ZW1wbGF0ZTogdGhpcy5vcENlbGwsIHRpdGxlLCB3aWR0aDogJzE1MCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYodGhpcy5maWx0ZXJPcmdUb29sKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3JnU3ViID0gdGhpcy5maWx0ZXJPcmdUb29sLmZpbHRlck9yZ1N1YmplY3Quc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsZXJJbmZvID0gZGF0YTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmF2b3JpdGVzVG9vbCkge1xyXG4gICAgICAgICAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuZmF2b3JpdGVzU3ViamVjdC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0xpc3QgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdExvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICAvLyB0aGlzLnBhZ2VDaGFuZ2VDaGVjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5pbmNsdWRlQ3VycmVudFVzZXIgJiYgdHlwZW9mIGNoYW5nZXMuaW5jbHVkZUN1cnJlbnRVc2VyLmN1cnJlbnRWYWx1ZSA9PT0gJ2Jvb2xlYW4nXHJcbiAgICAgICAgICAgICYmICFjaGFuZ2VzLmluY2x1ZGVDdXJyZW50VXNlci5maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VtYmxlRGF0YUJ5VXNlckdyb3VwSWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZW5hYmxlQ2hpbGRIaWVyYXJjaHkgJiYgdHlwZW9mIGNoYW5nZXMuZW5hYmxlQ2hpbGRIaWVyYXJjaHkuY3VycmVudFZhbHVlID09PSAnYm9vbGVhbidcclxuICAgICAgICAgICAgJiYgIWNoYW5nZXMuZW5hYmxlQ2hpbGRIaWVyYXJjaHkuZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlbWJsZURhdGFCeVVzZXJHcm91cElkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNoYW5nZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyT3JnU3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbWl0U2VsZWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBlbWl0T2JqID0ge1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25zOiB0aGlzLnNlbGVjdGlvbnMsXHJcbiAgICAgICAgICAgIHRva2VuOiAndW5EYXRhZ3JpZCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KGVtaXRPYmopO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3RvcmVTZWxlY3Rpb25zKCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMuY2xvbmVTZWxlY3Rpb25zKTtcclxuICAgICAgICAvLyB0aGlzLmVtaXRTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDaGVja2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Lq65ZGY5bGV56S657+76aG16Kem5Y+R5p+l6K+i77yI77yB77yJXHJcbiAgICBzd2l0Y2hQYWdlKHNpemUpIHtcclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHNpemUucGFnZUluZGV4O1xyXG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBzaXplLnBhZ2VTaXplO1xyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaFBhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlbWJsZURhdGFCeVNlYXJjaCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlVc2VyR3JvdXBJZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVGYXZvcml0ZXMoZTogYW55LCBpdGVtOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmZhdm9yaXRlc1Rvb2wudG9nZ2xlRmF2b3JpdGVzKGUsIGl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzc2VtYmxlRGF0YUJ5U2VhcmNoKCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RQYXJhbTogYW55ID0ge1xyXG4gICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogdGhpcy5wRW5hYmxlQ2hpbGRIaWVyYXJjaHkgPyAxIDogMCxcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6ICF0aGlzLmluY2x1ZGVTdG9wVXNlcixcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6ICF0aGlzLnBJbmNsdWRlQ3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHRoaXMub3JkZXJGaWVsZCxcclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiB0aGlzLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHRoaXMuZmlsdGVySWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIOWFqOWxgOaQnOe0om9y5bGA6YOoXHJcbiAgICAgICAgaWYgKCF0aGlzLmdsb2JhbFNlYXJjaCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGFyYW0ub3JnSWQgPSB0aGlzLm9yZ0lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFwaVNlcnZpY2UuZ2V0UGVyc29ubmVsQnlTZWFyY2godGhpcy5hYnNVc2VyT3JnVXJsLCB0aGlzLmFic09yZ1R5cGUsIHRoaXMuc2VhcmNoVGV4dCxcclxuICAgICAgICAgICAgcmVxdWVzdFBhcmFtKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByY1Jlc0RhdGEgPSByZXMgPyByZXMuZGF0YSA6IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdCA9IHJjUmVzRGF0YTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZVRvdGFsQWxsID0gcmVzLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbCA9IE1hdGguY2VpbCh0aGlzLnBhZ2VUb3RhbEFsbCAvIHRoaXMucGFnZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFnZVRvdGFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlVG90YWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdExvYWQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0Q2hhbmdlLmVtaXQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzc2VtYmxlRGF0YUJ5VXNlckdyb3VwSWQoKSB7XHJcbiAgICAgICAgaWYodGhpcy5kYXRhTG9hZGluZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhTG9hZGluZ1NlcnZpY2Uuc2hvdyh0aGlzLmxvYWRpbmdTZXJ2aWNlTWVzc2FnZSk7ICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXF1ZXN0UGFyYW06IGFueSA9IHtcclxuICAgICAgICAgICAgd2l0aEFsbEdyb3VwOiB0aGlzLnBFbmFibGVDaGlsZEhpZXJhcmNoeSA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6ICF0aGlzLmluY2x1ZGVTdG9wVXNlcixcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6ICF0aGlzLnBJbmNsdWRlQ3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHRoaXMub3JkZXJGaWVsZCxcclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiB0aGlzLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHRoaXMuZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMudXNlckdyb3VwSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVQYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5wYWdlU2l6ZSA9IHRoaXMucGFnZVNpemU7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5wYWdlSW5kZXggPSB0aGlzLnBhZ2VJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6YCa6L+H57uE57uH6L+b6KGM5Lq65ZGY55qE5LqM5qyh6L+H5rukXHJcbiAgICAgICAgaWYodGhpcy5maWx0ZXJPcmdJZCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGFyYW0ub3JnSWQgPSB0aGlzLmZpbHRlck9yZ0lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFwaVNlcnZpY2UuZ2V0UGVyc29ubmVsQnlVc2VyR3JvdXBJZCh0aGlzLmFic1VzZXJPcmdVcmwsIHJlcXVlc3RQYXJhbSkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByY1Jlc0RhdGEgPSByZXMgPyByZXMuZGF0YSA6IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0ID0gcmNSZXNEYXRhO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbEFsbCA9IHJlcy50b3RhbENvdW50O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VUb3RhbCA9IE1hdGguY2VpbCh0aGlzLnBhZ2VUb3RhbEFsbCAvIHRoaXMucGFnZVNpemUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlVG90YWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZVRvdGFsID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0TG9hZCgpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmZpbHRlck9yZ0lkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVyT3JnID0gIHRoaXMuZmlsdGVyT3JnQXJyLmZpbmQoKGFycjogRmlsdGVyT3JnKSA9PiB7cmV0dXJuIGFyci5pZCA9PSB0aGlzLmZpbHRlck9yZ0lkfSk7XHJcbiAgICAgICAgICAgICAgICBpZihjdXJyZW50RmlsdGVyT3JnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcmdUb29sLmVtaXRGaWx0ZXJPcmcoJ+etm+mAiee7hOe7h++8micgKyBjdXJyZW50RmlsdGVyT3JnWyduYW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcmdUb29sLmVtaXRGaWx0ZXJPcmcodGhpcy5wcmVzZXRGaWx0ZXJJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0aGlzLmRhdGFMb2FkaW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhTG9hZGluZ1NlcnZpY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyDmmL7npLrnu4Tnu4fov4fmu6TmvI/mlpfnmoTlnLrmma/kuIvvvIznlKjmiLfliIbnu4TmoJHlhoXliIfmjaLnlKjmiLfliIbnu4Tml7bpppblhYjojrflj5bkurrlkZjmiYDlsZ7nmoTlhajpg6jnu4Tnu4fvvIzlho3ojrflj5bkurrlkZjmlbDmja5cclxuICAgIGFzc2VtYmxlRGF0YUJ5VXNlckdyb3VwSWRBbmRHZXRGaWx0ZXJPcmcoc2l6ZTogYW55KSB7XHJcbiAgICAgICAgaWYodGhpcy5kYXRhTG9hZGluZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhTG9hZGluZ1NlcnZpY2Uuc2hvdyh0aGlzLmxvYWRpbmdTZXJ2aWNlTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFnZUluZGV4ID0gc2l6ZS5wYWdlSW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHNpemUucGFnZVNpemU7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJPcmdBcnIgPSBbXTtcclxuICAgICAgICB0aGlzLmZpbHRlck9yZ0lkID0gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsdGVyUmVxdWVzdFBhcmFtOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIGFic09yZ1R5cGU6IHRoaXMuYWJzT3JnVHlwZSxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogdHJ1ZSxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGZhbHNlLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogIXRoaXMuaW5jbHVkZVN0b3BVc2VyLFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogIXRoaXMucEluY2x1ZGVDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogdGhpcy5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHRoaXMudXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogdGhpcy5maWx0ZXJJZCxcclxuICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy51c2VyR3JvdXBJZCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIOmmluWFiOiOt+WPluW9k+WJjeeUqOaIt+WIhue7hOS4i+aJgOacieaIkOWRmOaJgOWxnueahOe7hOe7h1xyXG4gICAgICAgIGNvbnN0IGdldEZpbHRlck9yZyQgPSB0aGlzLmFwaVNlcnZpY2UuZ2V0RmlsdGVyT3JnYW5pemF0aW9uKHRoaXMuZmlsdGVyUGVyc29uV2l0aE9yZ1VybCwgdGhpcy5hYnNPcmdUeXBlLCBmaWx0ZXJSZXF1ZXN0UGFyYW0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXF1ZXN0UGFyYW06IGFueSA9IHtcclxuICAgICAgICAgICAgd2l0aEFsbEdyb3VwOiB0aGlzLnBFbmFibGVDaGlsZEhpZXJhcmNoeSA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6ICF0aGlzLmluY2x1ZGVTdG9wVXNlcixcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6ICF0aGlzLnBJbmNsdWRlQ3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHRoaXMub3JkZXJGaWVsZCxcclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiB0aGlzLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHRoaXMuZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMudXNlckdyb3VwSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVQYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5wYWdlU2l6ZSA9IHRoaXMucGFnZVNpemU7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXJhbS5wYWdlSW5kZXggPSB0aGlzLnBhZ2VJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g54S25ZCO6I635Y+W5b2T5YmN55So5oi35YiG57uE5LiL55qE5omA5pyJ5oiQ5ZGYXHJcbiAgICAgICAgY29uc3QgZ2V0UGVyc29ubmVsJCA9IHRoaXMuYXBpU2VydmljZS5nZXRQZXJzb25uZWxCeVVzZXJHcm91cElkKHRoaXMuYWJzVXNlck9yZ1VybCwgcmVxdWVzdFBhcmFtKTtcclxuXHJcbiAgICAgICAgZ2V0RmlsdGVyT3JnJC5waXBlKFxyXG4gICAgICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgICAgICAocmVzRGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzRGF0YSAmJiByZXNEYXRhLmRhdGEgJiYgcmVzRGF0YS5kYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlck9yZzogRmlsdGVyT3JnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9yZ0FyciA9IHJlc0RhdGEuZGF0YS5tYXAoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3JnID0gbmV3IEZpbHRlck9yZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3JnLmlkID0gZGF0YVsnb3JnSWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlck9yZy52YWx1ZSA9IGRhdGFbJ2NvZGUnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlck9yZy5uYW1lID0gZGF0YVsnbmFtZSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlck9yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3JnVG9vbC5lbWl0RmlsdGVyT3JnKHRoaXMucHJlc2V0RmlsdGVySW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VtcHR5RmlsdGVyT3JnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFBlcnNvbm5lbCQucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmNSZXNEYXRhID0gcmVzID8gcmVzLmRhdGEgOiBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0ID0gcmNSZXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVRvdGFsQWxsID0gcmVzLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlVG90YWwgPSBNYXRoLmNlaWwodGhpcy5wYWdlVG90YWxBbGwgLyB0aGlzLnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWdlVG90YWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlVG90YWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0TG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB0YXAoXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5kYXRhTG9hZGluZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTG9hZGluZ1NlcnZpY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGFMb2FkaW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMb2FkaW5nU2VydmljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign5pi+56S657uE57uH6L+H5ruk5ryP5paX55qE5Zy65pmv5LiL77yM6LCD55So5ZCO56uv5o6l5Y+j5Ye6546w6ZSZ6K+v77yBJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApLnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZGF0YWdyaWTnlKjkuo7mlbDmja7lsZXnpLpcclxuICAgICAqL1xyXG4gICAgdW5TZWxlY3RlZExpc3RMb2FkKGluaXRMb2FkID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdC5mb3JFYWNoKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGluZGV4SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMik7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IGl0ZW0gPSB7XHJcbiAgICAgICAgICAgIC8vICAgICBhYmJyZXZpYXRpb246IHJlcy5hYmJyZXZpYXRpb24sXHJcbiAgICAgICAgICAgIC8vICAgICBjb2RlOiByZXMuY29kZSxcclxuICAgICAgICAgICAgLy8gICAgIGRlZmF1bHRPcmdJZDogcmVzLmRlZmF1bHRPcmdJZCxcclxuICAgICAgICAgICAgLy8gICAgIGRlZmF1bHRPcmdQYXRoOiByZXMuZGVmYXVsdE9yZ1BhdGgsXHJcbiAgICAgICAgICAgIC8vICAgICBleHQxOiByZXMuZXh0MSxcclxuICAgICAgICAgICAgLy8gICAgIGV4dDI6IHJlcy5leHQyLFxyXG4gICAgICAgICAgICAvLyAgICAgZnVsbFBhdGhOYW1lOiByZXMuZnVsbFBhdGhOYW1lLFxyXG4gICAgICAgICAgICAvLyAgICAgbmFtZTogcmVzLm5hbWUsXHJcbiAgICAgICAgICAgIC8vICAgICBvcmdUeXBlSWQ6IHJlcy5vcmdUeXBlSWQsXHJcbiAgICAgICAgICAgIC8vICAgICBzZWNMZXZlbDogcmVzLnNlY0xldmVsLFxyXG4gICAgICAgICAgICAvLyAgICAgc29ydE9yZGVyOiByZXMuc29ydE9yZGVyLFxyXG4gICAgICAgICAgICAvLyAgICAgc3RhdGU6IHJlcy5zdGF0ZSxcclxuICAgICAgICAgICAgLy8gICAgIHN1OiByZXMuc3UsXHJcbiAgICAgICAgICAgIC8vICAgICB1c2VySWQ6IHJlcy51c2VySWQsXHJcbiAgICAgICAgICAgIC8vICAgICBvcmdBbGxQYXRoOiByZXMub3JnQWxsUGF0aCxcclxuICAgICAgICAgICAgLy8gICAgIGluRmF2b3JpdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgLy8gICAgIHR5cGU6ICdwZW9wbGUnLFxyXG4gICAgICAgICAgICAvLyAgICAgY2hlY2tlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIC8vICAgICBpbmRleElkXHJcbiAgICAgICAgICAgIC8vIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBfLmNsb25lRGVlcChyZXMpO1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaXRlbS5pbkZhdm9yaXRlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpdGVtLmluZGV4SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkocmVzW3RoaXMuaWRGaWVsZF0sIHRoaXMuaWRGaWVsZCwgdGhpcy5zZWxlY3Rpb25zKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShyZXNbdGhpcy5pZEZpZWxkXSwgdGhpcy5pZEZpZWxkLCB0aGlzLmZhdm9yaXRlc0xpc3QpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5pbkZhdm9yaXRlcyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbS5kaXNwbGF5TmFtZSA9ICEhdGhpcy5zaG93VXNlckNvZGUgPyAoJ1snICsgaXRlbS5jb2RlICsgJ10nICsgaXRlbS5uYW1lKSA6IGl0ZW0ubmFtZTtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zQmFja3VwLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDaGVja2VkKCk7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLmNkUmVmID8gdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCkgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUFsbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWxsQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQWxsKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51bkNoZWNrQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVPbmUoZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdExpbmUoZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RMaW5lKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgInlkI7lpITnkIZcclxuICAgICAqIEBwYXJhbSBkYXRhQXJyIOWFqOmAieeahOWAvFxyXG4gICAgICovXHJcbiAgICBjaGVja0FsbCgpIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGl0ZW0pO1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWo6YOo5Y+W5raIXHJcbiAgICAgKiBAcGFyYW0gZGF0YUFyciDlj5bmtojnmoTmlbDmja5cclxuICAgICAqIEByZXR1cm5zIHZvaWRcclxuICAgICAqL1xyXG4gICAgdW5DaGVja0FsbCgpIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChzZWxlY3Rpb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVt0aGlzLmlkRmllbGRdID09PSBzZWxlY3Rpb25bdGhpcy5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIOW9k+WJjeihjOmAieS4rVxyXG4gICAgKiBAcGFyYW0gZGF0YSDlvZPliY3ooYznmoTmlbDmja7vvIjvvIlcclxuICAgICovXHJcbiAgICBzZWxlY3RMaW5lKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlcklkcyA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0T25lSW50b1NlbGVjdGlvbnMoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzQWxsQ2hlY2tlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V6YCJ5Y+W5raI6YCJ5LitXHJcbiAgICAgKiBAcGFyYW0gZGF0YSDlj5bmtojpgInkuK3ooYxcclxuICAgICAqL1xyXG4gICAgdW5TZWxlY3RMaW5lKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5faXNJbkFycmF5KGRhdGFbdGhpcy5pZEZpZWxkXSwgdGhpcy5pZEZpZWxkLCB0aGlzLnNlbGVjdGlvbnMpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hbGxDaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICDlj5bmtojpgInkuK1cclxuICAgICAqIEBwYXJhbSAkZXZlbnQg5Y+W5raI5Yu+6YCJ55qE5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIGNhbmNlbFNlbGVjdGlvbnMoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbVt0aGlzLmlkRmllbGRdID09PSAkZXZlbnQuaWQpID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW1bdGhpcy5pZEZpZWxkXSA9PT0gJGV2ZW50LmlkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChzZWxlY3Rpb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgkZXZlbnQuaWQgPT09IHNlbGVjdGlvblt0aGlzLmlkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWo6YOo5Y+W5raI5Yu+6YCJXHJcbiAgICAgKi9cclxuICAgIGNsZWFyQ2hlY2tlZHMoKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFsbENoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclVzZXJJZHMoKSB7XHJcbiAgICAgICAgdGhpcy51c2VySWRzID0gJyc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reW5tuaPkuWFpeW9k+WJjeihjOaVsOaNruWIsOWPs+S+p1xyXG4gICAgICogQHBhcmFtIGRhdGEg5b2T5YmN6KGM55qE5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbiDmmoLlrZjlvZPliY3mlbDmja7nmoTpm4blkIhcclxuICAgICAqL1xyXG4gICAgX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGE6IGFueSkge1xyXG4gICAgICAgIC8vIOWmguaenOW9k+WJjeaVsOaNruW3sue7j+enu+WFpeWPs+S+p+aVsOaNru+8jOWImei/lOWbnuOAglxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoZGF0YVt0aGlzLmlkRmllbGRdLCB0aGlzLmlkRmllbGQsIHRoaXMuc2VsZWN0aW9ucykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy5wdXNoKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHRoaXMuc2VsZWN0aW9ucy5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5piv5ZCm5Zyo5YaFXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgdmFsdWVcclxuICAgICAqIEBwYXJhbSBmaWVsZCBmaWVsZFxyXG4gICAgICogQHBhcmFtIGFycmF5IGFycmF5XHJcbiAgICAgKiBAcmV0dXJucyDkvY3nva7ntKLlvJVcclxuICAgICAqL1xyXG4gICAgX2lzSW5BcnJheSh2YWx1ZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCBhcnJheTogYW55W10pOiBudW1iZXIge1xyXG4gICAgICAgIGlmICghZmllbGQgfHwgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5YmNMuS4quWPguaVsOW/heWhqycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuZmluZEluZGV4KGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe/u+mhteajgOafpe+8muS6uuWRmOWxleekuuWMuueahOWLvumAieeKtuaAgeS4juW3sumAieS6uuWRmOWMuuaYr+WQpuWvueW6lFxyXG4gICAgICovXHJcbiAgICB0b2dnbGVDaGVja2VkKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShpdGVtW3RoaXMuaWRGaWVsZF0sIHRoaXMuaWRGaWVsZCwgdGhpcy5zZWxlY3Rpb25zKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5pc0FsbENoZWNrZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFsbENoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQWxsQ2hlY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGxldCBhbGxDaGVja2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtW3RoaXMuaWRGaWVsZF0gPT09IHNlbGVjdGlvblt0aGlzLmlkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID09PSBjb3VudCAmJiBjb3VudCA+IDApIHtcclxuICAgICAgICAgICAgYWxsQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbGxDaGVja2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrQnlGbihpbmRleCwgaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBpdGVtLnVzZXJJZDtcclxuICAgIH1cclxuXHJcbiAgICB0dXJuT3ZlclBhZ2UoZGlyOiBzdHJpbmcsIG51bTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKChkaXIgPT09ICdwcmUnICYmIHRoaXMucGFnZUluZGV4ID09PSAxKSB8fCAoZGlyID09PSAnbmV4dCcgJiYgdGhpcy5wYWdlSW5kZXggPT09IHRoaXMucGFnZVRvdGFsKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFnZUluZGV4ID0gdGhpcy5wYWdlSW5kZXggKyBudW07XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hQYWdlKHtcclxuICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmVmb3JlUGFnZUluZGV4Q2hhbmdlKGlucHV0RWw6IEtleWJvYXJkRXZlbnQsIG1heE51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGlucHV0RWwudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChjdXJyZW50UGFnZU51bWJlciA+IG1heE51bWJlcikge1xyXG4gICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBtYXhOdW1iZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlTnVtYmVyIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VFbnRlcigkZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuc2hvd1BhZ2VzUGFuZWwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VMZWF2ZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlUGFnZVNpemVIYW5kbGVyKCRldmVudCwgbnVtKXtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYobnVtID09IHRoaXMucGFnZVNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IG51bTtcclxuICAgICAgICB0aGlzLnN3aXRjaFBhZ2Uoe1xyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==