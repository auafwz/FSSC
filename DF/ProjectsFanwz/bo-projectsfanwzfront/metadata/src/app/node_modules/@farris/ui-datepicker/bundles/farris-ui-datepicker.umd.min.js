!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("lodash-es"),require("@angular/forms"),require("date-fns"),require("@angular/core"),require("@farris/ui-time-picker"),require("@farris/ui-locale"),require("@farris/ui-popover"),require("@farris/ui-common/date"),require("@farris/ui-notify")):"function"==typeof define&&define.amd?define("@farris/ui-datepicker",["exports","@angular/common","lodash-es","@angular/forms","date-fns","@angular/core","@farris/ui-time-picker","@farris/ui-locale","@farris/ui-popover","@farris/ui-common/date","@farris/ui-notify"],t):t((e.farris=e.farris||{},e.farris["ui-datepicker"]={}),e.ng.common,e.lodashEs,e.ng.forms,e.dateFns,e.ng.core,e.uiTimePicker,e.uiLocale,e.uiPopover,e.date,e.uiNotify)}(this,function(e,t,v,i,h,d,n,a,r,s,o){"use strict";var m=function(){return(m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function E(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function M(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,a,r=i.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r["return"])&&i.call(r)}finally{if(a)throw a.error}}return s}var l={Open:1,CloseByDateSel:2,CloseByCalBtn:3,CloseByOutClick:4,CloseByEsc:5};l[l.Open]="Open",l[l.CloseByDateSel]="CloseByDateSel",l[l.CloseByCalBtn]="CloseByCalBtn",l[l.CloseByOutClick]="CloseByOutClick",l[l.CloseByEsc]="CloseByEsc";var T={Date:1,Month:2,Year:3};T[T.Date]="Date",T[T.Month]="Month",T[T.Year]="Year";var c={enter:13,esc:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,tab:9,shift:16};c[c.enter]="enter",c[c.esc]="esc",c[c.space]="space",c[c.leftArrow]="leftArrow",c[c.upArrow]="upArrow",c[c.rightArrow]="rightArrow",c[c.downArrow]="downArrow",c[c.tab]="tab",c[c.shift]="shift";var u={enter:"Enter",esc:"Escape",space:" ",leftArrow:"ArrowLeft",upArrow:"ArrowUp",rightArrow:"ArrowRight",downArrow:"ArrowDown",tab:"Tab",shift:"Shift"},f={prev:1,curr:2,next:3};f[f.prev]="prev",f[f.curr]="curr",f[f.next]="next";var p={both:0,singleDate:1,dateRange:2};p[p.both]="both",p[p.singleDate]="singleDate",p[p.dateRange]="dateRange";var V={all:1,noDate:2,noDateAndMonth:3,selectWeek:4};V[V.all]="all",V[V.noDate]="noDate",V[V.noDateAndMonth]="noDateAndMonth",V[V.selectWeek]="selectWeek";var g={min:1e3,max:9999};g[g.min]="min",g[g.max]="max";var y=(D.prototype.getDefaultConfig=function(){return this.defaultConfig},D.decorators=[{type:d.Injectable}],D);function D(){this.defaultConfig={dateRange:!1,dayLabels:{su:"Sun",mo:"Mon",tu:"Tue",we:"Wed",th:"Thu",fr:"Fri",sa:"Sat"},monthLabels:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},dateFormat:"yyyy-MM-dd",returnFormat:"yyyy-MM-dd",defaultView:T.Date,showType:V.all,firstDayOfWeek:"mo",satHighlight:!1,sunHighlight:!1,highlightDates:[],markCurrentDay:!0,markCurrentMonth:!0,markCurrentYear:!0,monthSelector:!0,yearSelector:!0,disableHeaderButtons:!0,showWeekNumbers:!1,selectorHeight:"295px",selectorWidth:"280px",disableUntil:{year:0,month:0,day:0,hour:0,minute:0,second:0},disableSince:{year:0,month:0,day:0,hour:0,minute:0,second:0},disableDates:[],disableDateRanges:[],disableWeekends:!1,disableWeekdays:[],enableDates:[],markDates:[],markWeekends:{marked:!1,color:""},closeSelectorOnDateSelect:!0,closeSelectorOnDocumentClick:!0,minYear:g.min,maxYear:g.max,focusInputOnDateSelect:!0,moveFocusByArrowKeys:!0,dateRangeDatesDelimiter:" - ",inputFieldValidation:!0,stylesData:{selector:"",styles:""},ariaLabelPrevMonth:"Previous Month",ariaLabelNextMonth:"Next Month",shortcuts:[],weekText:"Week"}}var b="d",w="dd",C="M",S="MM",x="MMM",k="yyyy",R="_",O="su",_="mo",F="tu",I="we",N="th",B="fr",Y="sa",j="ZH_CN",P="",L="click",A="keyup",W="blur",H="disabled",$="options",z="defaultMonth",K="opts",U="years",Z="visibleMonth",q="selectMonth",J="selectYear",G="prevViewDisabled",X="nextViewDisabled",Q="dates",ee="weekDays",te="selectedDate",ie="selectedDateRange",ne="months",ae=(re.prototype.getLocaleOptions=function(e){return e&&this.locales.hasOwnProperty(e)?this.locales[e]:this.locales[j]},re.decorators=[{type:d.Injectable}],re);function re(){this.locales={EN_US:{dayLabels:{su:"Sun",mo:"Mon",tu:"Tue",we:"Wed",th:"Thu",fr:"Fri",sa:"Sat"},monthLabels:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},dateFormat:"MM/dd/yyyy",returnFormat:"MM/dd/yyyy",firstDayOfWeek:"mo",sunHighlight:!1,yearTxt:"",timeBtnText:"Select Time",dateBtnText:"Select Date",commitBtnText:"OK",weekText:"Week",placeholder:"Please select a date",range:{begin:"Please select a begin date",end:"Please select a end date"},message:{101:"The end time must not be earlier than the start time."}},ZH_CN:{dayLabels:{su:"日",mo:"一",tu:"二",we:"三",th:"四",fr:"五",sa:"六"},monthLabels:{1:"一月",2:"二月",3:"三月",4:"四月",5:"五月",6:"六月",7:"七月",8:"八月",9:"九月",10:"十月",11:"十一月",12:"十二月"},dateFormat:"yyyy-MM-dd",returnFormat:"yyyy-MM-dd",firstDayOfWeek:"mo",sunHighlight:!1,yearTxt:"年",timeBtnText:"选择时间",dateBtnText:"选择日期",commitBtnText:"确认",weekText:"周",placeholder:"请选择日期",range:{begin:"请选择开始日期",end:"请选择结束日期"},message:{101:"结束时间不得早于开始时间！"}},ZH_CHT:{dayLabels:{su:"日",mo:"一",tu:"二",we:"三",th:"四",fr:"五",sa:"六"},monthLabels:{1:"一月",2:"二月",3:"三月",4:"四月",5:"五月",6:"六月",7:"七月",8:"八月",9:"九月",10:"十月",11:"十一月",12:"十二月"},dateFormat:"yyyy-MM-dd",returnFormat:"yyyy-MM-dd",firstDayOfWeek:"mo",sunHighlight:!1,yearTxt:"年",timeBtnText:"選擇時間",dateBtnText:"選擇日期",commitBtnText:"確認",weekText:"周",placeholder:"請選擇日期",range:{begin:"請選擇開始日期",end:"請選擇結束日期"},message:{101:"結束時間不得早于開始時間！"}}}}var se=(oe.prototype.isDateValid=function(e,t,i){var n;void 0===i&&(i=!1);var a=0,r=0,s=0,o=this.resetDate();if(!e||!e.length)return o;var l=t.dateFormat,h=t.minYear,d=t.maxYear,c=t.monthLabels,u=t.showTime,p=t.returnFormat,g=t.showType,y=u,m=l;i&&(m=p.replace(/[年,月]/g,"-").replace(/[日]/,"").replace(/[时,分]/g,":").replace(/[秒]/g,""),"-"!==(e=e.replace(/[年,月]/g,"-").replace(/[日]/,"").replace(/[时,分]/g,":").replace(/[秒]/g,""))[e.length-1]&&":"!==e[e.length-1]||(e=e.substring(0,e.length-1)),!u&&-1<p.toLocaleLowerCase().indexOf("hh:mm")&&(y=!0));var v=[31,28,31,30,31,30,31,31,30,31,30,31],f=-1!==m.indexOf(x),D=m.match(/[^(DdMmYy)]{1,}/g);if(y&&e){n=e.split(" ")[0],Object.assign(o,{hour:0,minute:0,second:0});var b=e.split(" ")[1];if(b)(w=b.replace("时",":").replace("分",":").replace("秒","").split(":"))[0]&&(a=Number(w[0].substr(0,2)),a=isNaN(a)?0:a),w[1]&&(r=Number(w[1].substr(0,2)),r=isNaN(r)?0:r),w[2]&&(s=Number(w[2].substr(0,2)),s=isNaN(s)?0:s);else if(D=undefined,/^\d{1,}$/.test(e)){var w,C=m;n=e.substr(0,8),(w=e.substr(8))&&(C.includes("HH")&&w&&(a=+w.slice(0,2),w=w.slice(2)),C.includes("mm")&&w&&(r=+w.slice(0,2),w=w.slice(2)),C.includes("ss")&&w&&(s=+w.slice(0,2)))}}else n=e?e.split(" ")[0]:"";var S=this.getDateValue(n,m,D),M=this.getNumberByValue(S[0]),k=f?this.getMonthNumberByMonthName(S[1],c):this.getNumberByValue(S[1]),R=this.getNumberByValue(S[2]);if(g===V.noDateAndMonth)return{year:M,month:1,day:1};if(-1===k||-1===R||-1===M)return o;if(M<h||d<M||k<1||12<k)return o;var O=y?{year:M,month:k,day:R,hour:a,minute:r,second:s}:{year:M,month:k,day:R};return this.isDisabledDate(O,t)?o:((M%400==0||M%100!=0&&M%4==0)&&(v[1]=29),R<1||R>v[k-1]?o:t.showType===V.noDate?{year:O.year,month:O.month}:t.showType===V.noDateAndMonth?{year:O.year}:O)},oe.prototype.isDateValidDateRange=function(e,t){var i={begin:this.resetDate(),end:this.resetDate()};if(e&&e.length){var n=e.split(t.dateRangeDatesDelimiter);if(n&&2===n.length){var a=M(n,2),r=a[0],s=a[1],o=this.isDateValid(r,t,!0);if(this.isInitializedDate(o)){var l=this.isDateValid(s,t,!0);this.isInitializedDate(l)&&this.isDateSameOrEarlier(o,l)&&(i={begin:o,end:l})}}}return i},oe.prototype.getDateValue=function(e,t,i){var n=[];if(i){var a=i[0];i[0]!==i[1]&&(a=i[0]+i[1],i[2]&&i[1]!==i[2]&&(a+=i[2]));for(var r=new RegExp("["+a+"]"),s=e.split(r),o=t.split(r),l=0;l<o.length;l++)-1!==o[l].indexOf(k)&&(n[0]={value:s[l],format:o[l]}),-1!==o[l].indexOf(C)&&(n[1]=s[l]===undefined?{value:"1",format:o[l]}:{value:s[l],format:o[l]}),-1!==o[l].indexOf(b)&&(n[2]=s[l]===undefined?{value:"1",format:o[l]}:{value:s[l],format:o[l]})}else{var h=(t+"").indexOf(k),d=(t+"").indexOf(S),c=(t+"").indexOf(w);0<=h&&(n[0]={value:e.substring(h,h+4),format:t.substring(h,h+4)}),0<=d&&(n[1]={value:e.substring(d,d+2),format:t.substring(d,d+2)}),0<=c&&(n[2]={value:e.substring(c,c+2),format:t.substring(c,c+2)})}return n},oe.prototype.getMonthNumberByMonthName=function(e,t){if(e.value)for(var i=1;i<=12;i++)if(e.value.toLowerCase()===t[i].toLowerCase())return i;return-1},oe.prototype.getNumberByValue=function(e){if(!e)return 1;if(!/^\d+$/.test(e.value))return-1;var t=Number(e.value);return 1===e.format.length&&1!==e.value.length&&t<10||1===e.format.length&&2!==e.value.length&&10<=t?t=-1:2===e.format.length&&2<e.value.length&&(t=-1),t},oe.prototype.parseDefaultMonth=function(e){var t={monthTxt:P,monthNbr:0,year:0};if(e!==P){var i=e.split(e.match(/[^0-9]/)[0]);t.monthNbr=2===i[0].length?Number(i[0]):Number(i[1]),t.year=2===i[0].length?Number(i[1]):Number(i[0])}return t},oe.prototype.isDisabledDate=function(e,t){var i,n,a,r,s,o,l=t.minYear,h=t.maxYear,d=t.disableUntil,c=t.disableSince,u=t.disableWeekends,p=t.disableDates,g=t.disableDateRanges,y=t.disableWeekdays;if(t.enableDates,e.year<l&&12===e.month||e.year>h&&1===e.month)return!0;var m=this.getTimeInMilliseconds(e);if(this.isInitializedDate(d)&&m+864e5-1<this.getTimeInMilliseconds(d))return!0;if(this.isInitializedDate(c)&&m>this.getTimeInMilliseconds(c))return!0;if(u){var v=this.getDayNumber(e);if(0===v||6===v)return!0}var f=this.getDayNumber(e);if(0<y.length)try{for(var D=E(y),b=D.next();!b.done;b=D.next()){var w=b.value;if(f===this.getWeekdayIndex(w))return!0}}catch(O){i={error:O}}finally{try{b&&!b.done&&(n=D["return"])&&n.call(D)}finally{if(i)throw i.error}}try{for(var C=E(p),S=C.next();!S.done;S=C.next())if(!(0!==(R=S.value).year&&R.year!==e.year||0!==R.month&&R.month!==e.month||R.day!==e.day))return!0}catch(V){a={error:V}}finally{try{S&&!S.done&&(r=C["return"])&&r.call(C)}finally{if(a)throw a.error}}try{for(var M=E(g),k=M.next();!k.done;k=M.next()){var R=k.value;if(this.isInitializedDate(R.begin)&&this.isInitializedDate(R.end)&&m>=this.getTimeInMilliseconds(R.begin)&&m<=this.getTimeInMilliseconds(R.end))return!0}}catch(T){s={error:T}}finally{try{k&&!k.done&&(o=M["return"])&&o.call(M)}finally{if(s)throw s.error}}return!1},oe.prototype.isMarkedDate=function(e,t,i){var n,a,r,s;try{for(var o=E(t),l=o.next();!l.done;l=o.next()){var h=l.value;try{for(var d=E(h.dates),c=d.next();!c.done;c=d.next()){var u=c.value;if(!(0!==u.year&&u.year!==e.year||0!==u.month&&u.month!==e.month||u.day!==e.day))return{marked:!0,color:h.color}}}catch(g){r={error:g}}finally{try{c&&!c.done&&(s=d["return"])&&s.call(d)}finally{if(r)throw r.error}}}}catch(y){n={error:y}}finally{try{l&&!l.done&&(a=o["return"])&&a.call(o)}finally{if(n)throw n.error}}if(i&&i.marked){var p=this.getDayNumber(e);if(0===p||6===p)return{marked:!0,color:i.color}}return{marked:!1,color:P}},oe.prototype.isHighlightedDate=function(e,t,i,n){var a,r,s=this.getDayNumber(e);if(t&&0===s||i&&6===s)return!0;try{for(var o=E(n),l=o.next();!l.done;l=o.next()){var h=l.value;if(!(0!==h.year&&h.year!==e.year||0!==h.month&&h.month!==e.month||h.day!==e.day))return!0}}catch(d){a={error:d}}finally{try{l&&!l.done&&(r=o["return"])&&r.call(o)}finally{if(a)throw a.error}}return!1},oe.prototype.getWeekNumber=function(e){var t=new Date(e.year,e.month-1,e.day,0,0,0,0);return t.setDate(t.getDate()+(0===t.getDay()?-3:4-t.getDay())),Math.round((t.getTime()-new Date(t.getFullYear(),0,4).getTime())/864e5/7)+1},oe.prototype.getNowWeekTime=function(e){e.setDate(e.getDate()-(e.getDay()+6)%7);var t={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};return e.setDate(e.getDate()+6),{begin:t,end:{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},oe.prototype.isMonthDisabledByDisableUntil=function(e,t){return this.isInitializedDate(t)&&this.getTimeInMilliseconds(e)<=this.getTimeInMilliseconds(t)},oe.prototype.isMonthDisabledByDisableSince=function(e,t){return this.isInitializedDate(t)&&this.getTimeInMilliseconds(e)>=this.getTimeInMilliseconds(t)},oe.prototype.getDateModel=function(e,t,i,n,a,r,s){void 0===s&&(s=P);var o=null,l=null;return e?o={date:e,jsDate:this.getDate2(e),formatted:s.length?s:this.formatDate(e,i,n),returnFormatted:this.formatDate(e,r,n),epoc:this.getEpocTime(e)}:l={beginDate:t.begin,beginJsDate:this.getDate(t.begin),beginEpoc:this.getEpocTime(t.begin),endDate:t.end,endJsDate:this.getDate(t.end),endEpoc:this.getEpocTime(t.end),formatted:this.formatDate(t.begin,i,n)+a+this.formatDate(t.end,i,n),returnFormatted:this.formatDate(t.begin,r,n)+a+this.formatDate(t.end,r,n)},{isRange:null===e,singleDate:o,dateRange:l}},oe.prototype.formatDate=function(e,t,i){e.month||-1!==t.indexOf(S)||(t=this["delete"](t,S)),e.day||-1!==t.indexOf(w)||(t=this["delete"](t,w));var n=t.replace(k,String(e.year));return n=-1===t.indexOf(C)?n.replace(S,"01"):-1!==t.indexOf(x)?n.replace(x,i[e.month]):-1!==t.indexOf(S)?n.replace(S,this.preZero(e.month||1)):n.replace(C,String(e.month||1)),(n=(n=-1===t.indexOf(w)?n.replace(w,"01"):-1!==t.indexOf(w)?n.replace(w,this.preZero(e.day||1)):n.replace(b,String(e.day||1))).replace("MM","mm").replace("HH",this.preZero(e.hour||0)).replace("mm",this.preZero(e.minute||0)).replace("ss",this.preZero(e.second||0)))&&2<n.length?n:""},oe.prototype["delete"]=function(e,t){var i=e.match(/[^(DdMmYy)]{1,}/g),n=e.indexOf(t);return n<0?e:0===n?i?e.substring(3):e.substring(2):n+2===e.length?i?e.substring(0,e.length-3):e.substring(0,e.length-2):i?e.substring(0,n)+e.substring(n+3):e.substring(0,n)+e.substring(n+2)},oe.prototype.getFormattedDate=function(e){return e.isRange?e.dateRange.formatted:e.singleDate.formatted},oe.prototype.preZero=function(e){return e<10?"0"+Number(e):String(e)},oe.prototype.isInitializedDate=function(e){return e&&0!==e.year&&0!==e.month&&0!==e.day},oe.prototype.isInitializedMonth=function(e){return e&&0!==e.year&&0!==e.month},oe.prototype.isInitializedYear=function(e){return e&&0!==e.year},oe.prototype.isDateEarlier=function(e,t){return this.getTimeInMilliseconds(e)<this.getTimeInMilliseconds(t)},oe.prototype.isDateSameOrEarlier=function(e,t){return this.getTimeInMilliseconds(e)<=this.getTimeInMilliseconds(t)},oe.prototype.isDateSame=function(e,t){return this.getTimeInMilliseconds(e)===this.getTimeInMilliseconds(t)},oe.prototype.isDateRangeBeginOrEndSame=function(e,t){var i=this.getTimeInMilliseconds(t);return this.getTimeInMilliseconds(e.begin)===i||this.getTimeInMilliseconds(e.end)===i},oe.prototype.isDateInRange=function(e,t){return!(!this.isInitializedDate(t.begin)||!this.isInitializedDate(t.end))&&this.isDateSameOrEarlier(t.begin,e)&&this.isDateSameOrEarlier(e,t.end)},oe.prototype.resetDate=function(){return{year:0,month:0,day:0}},oe.prototype.getTimeInMilliseconds=function(e){return this.getDate(e).getTime()},oe.prototype.getDate2=function(e){var t=new Date;return e.year||(e.year=t.getFullYear()),e.month||(e.month=t.getMonth()+1),e.day||(e.day=1),new Date(e.year,e.month-1,e.day,e.hour?e.hour:0,e.minute?e.minute:0,e.second?e.second:0,0)},oe.prototype.getDate=function(e){return new Date(e.year||0,e.month?e.month-1:0,e.day||0,e.hour?e.hour:0,e.minute?e.minute:0,e.second?e.second:0,0)},oe.prototype.getDayNumber=function(e){return new Date(e.year,e.month-1,e.day,e.hour?e.hour:0,e.minute?e.minute:0,e.second?e.second:0,0).getDay()},oe.prototype.getWeekdayIndex=function(e){return this.weekDays.indexOf(e)},oe.prototype.getEpocTime=function(e){return Math.round(this.getTimeInMilliseconds(e)/1e3)},oe.prototype.getKeyCodeFromEvent=function(e){var t=e.key||e.keyCode;return t===u.enter||t===c.enter?c.enter:t===u.esc||t===c.esc?c.esc:t===u.space||t===c.space?c.space:t===u.leftArrow||t===c.leftArrow?c.leftArrow:t===u.upArrow||t===c.upArrow?c.upArrow:t===u.rightArrow||t===c.rightArrow?c.rightArrow:t===u.downArrow||t===c.downArrow?c.downArrow:t===u.tab||t===c.tab?c.tab:t===u.shift||t===c.shift?c.shift:null},oe.prototype.getNearDate=function(e,t,i){var n=this.getTimeInMilliseconds(t),a=this.getTimeInMilliseconds(i),r=this.getTimeInMilliseconds(e);return r-n<a-r?t:i},oe.prototype.disabledHours=function(e,t,i){var n=e.hour,a=t.hour,r=[];if(this.isDateSame({year:i.year,month:i.month,day:i.day},{year:e.year,month:e.month,day:e.day}))for(;0<=n--;)r.push(n);else if(this.isDateSame({year:i.year,month:i.month,day:i.day},{year:t.year,month:t.month,day:t.day}))for(;a++<24;)r.push(a);return r},oe.prototype.disabledMinutes=function(e,t,i,n){var a=t.hour,r=t.minute,s=e.hour,o=e.minute,l=[];if(this.isDateSame({year:n.year,month:n.month,day:n.day},{year:e.year,month:e.month,day:e.day})){if(i==s)for(;0<=o--;)l.push(o)}else if(this.isDateSame({year:n.year,month:n.month,day:n.day},{year:t.year,month:t.month,day:t.day})&&i==a)for(;r++<60;)l.push(r);return l},oe.prototype.disabledSeconds=function(e,t,i,n,a){var r=t.hour,s=t.minute,o=t.second,l=e.hour,h=e.minute,d=e.second,c=[];if(this.isDateSame({year:a.year,month:a.month,day:a.day},{year:e.year,month:e.month,day:e.day})){if(i==l&&n==h)for(;0<=d--;)c.push(d)}else if(this.isDateSame({year:a.year,month:a.month,day:a.day},{year:t.year,month:t.month,day:t.day})&&i==r&&n==s)for(;o++<60;)c.push(o);return c},oe.decorators=[{type:d.Injectable}],oe);function oe(){this.weekDays=[O,_,F,I,N,B,Y]}var le=(he.parseOptions=function(t,i){return i!==undefined&&Object.keys(i).forEach(function(e){i[e]!==undefined&&""!==i[e]&&(t[e]=i[e])}),t.minYear<g.min&&(t.minYear=g.min),t.maxYear>g.max&&(t.maxYear=g.max),t},he.prototype.validate=function(e){var t=!1;if(this.opts.dateRange){var i=this.utilService.isDateValidDateRange(e,this.opts),n=i.begin,a=i.end;t=this.utilService.isInitializedDate(n)&&this.utilService.isInitializedDate(a)}else{var r=this.utilService.isDateValid(e,this.opts);t=this.utilService.isInitializedDate(r)}return t},he.prototype.registerScrollEvent=function(e){this._mouseScrollHandle=e,document.addEventListener("scroll",this._mouseScrollHandle)},he.prototype.removeMouseEvent=function(){var e=document.querySelector(".date-overlay-container");e&&e.removeEventListener("mousewheel",this._mouseWheelHandle),document.removeEventListener("scroll",this._mouseScrollHandle)},he.prototype.appendSelector=function(t){var i=document.querySelector(".date-overlay-container");i?i.hasChildNodes()&&i.childNodes.forEach(function(e){e!==t&&i.removeChild(e)}):((i=document.createElement("div")).classList.add("date-overlay-container"),i.classList.add("overlay-container"),document.body.appendChild(i)),i.addEventListener("mousewheel",this._mouseWheelHandle=function(e){e.target.closest(".calendar-time-picker-select")||e.preventDefault()}),i.appendChild(t)},he.prototype.getSelectorPosition=function(e,t){void 0===t&&(t=null);var i=0,n=0,a=0,r=0,s=this.opts,o=s.selectorHeight,l=s.selectorWidth,h=s.showTime,d=s.dateRange,c=s.showType,u=document.body.getBoundingClientRect(),p=e.getBoundingClientRect();i=p.top-u.top,n=p.left-u.left;var g="bottom";if(r=d&&4!==c?2*this.getSelectorDimension(l):this.getSelectorDimension(l),a=h?this.getSelectorDimension(o)+36:this.getSelectorDimension(o),i+e.offsetHeight+a>window.innerHeight&&0<i-a-2?(i=i-a-2-(h?6:0),g="top"):i=i+e.offsetHeight+2,window.innerHeight-i<a&&(i-=a-(window.innerHeight-p.top-p.height-15),t)){var y=t.location.nativeElement.querySelector(".arrow");y&&(y.style.display="none")}return n+r>u.width&&(n=u.width-r-15),n=0<n?n:0,{top:i-=document.body.scrollTop||document.documentElement.scrollTop,left:n,position:g}},he.prototype.getSelectorDimension=function(e){return Number(e.replace("px",P))},he);function he(e){this._mouseWheelHandle=null,this._mouseScrollHandle=null,this.opts=e,this.utilService=new se}var de=(ce.prototype.getTimeStr=function(e){return this.utilService.preZero(e.getHours())+":"+this.utilService.preZero(e.getMinutes())+":"+this.utilService.preZero(e.getSeconds())},ce.prototype.initialize=function(e,t,i,n,a,r,s,o){this.opts=e,this.selectorPos=i,this.weekDays.length=0;var l=this.opts,h=l.defaultView,d=l.dateRange,c=l.firstDayOfWeek,u=l.dayLabels,p=(l.stylesData,l.yearTxt);if(this.visibleMonth.yearTxt=p,this.visibleMonth_range.yearTxt=p,this.dayIdx=this.weekDayOpts.indexOf(c),-1!==this.dayIdx)for(var g=this.dayIdx,y=0;y<this.weekDayOpts.length;y++)this.weekDays.push(u[this.weekDayOpts[g]]),g=this.weekDayOpts[g]===Y?0:g+1;var m=this.getToday();switch(m=this.utilService.isDisabledDate(m,this.opts)?this.utilService.getNearDate(m,this.opts.disableUntil,this.opts.disableSince):m,h){case T.Month:this.selectedMonth={monthNbr:0,year:m.year},this.selectedMonth_range={monthNbr:0,year:m.year+1};break;case T.Year:this.selectedMonth={monthNbr:0,year:m.year},this.selectedMonth_range={monthNbr:0,year:m.year+10};break;default:this.selectedMonth={monthNbr:m.month,year:m.year},12<=m.month?this.selectedMonth_range={monthNbr:1,year:m.year+1}:this.selectedMonth_range={monthNbr:m.month+this.opts.monthRangeValue,year:m.year}}if(t&&t.length&&(this.selectedMonth=this.utilService.parseDefaultMonth(t),this.selectedMonth_range=this.utilService.parseDefaultMonth(t),12<=this.selectedMonth_range.monthNbr?(this.selectedMonth_range.year++,this.selectedMonth_range.monthNbr=1):this.selectedMonth_range.monthNbr=this.selectedMonth_range.monthNbr+this.opts.monthRangeValue),d){var v=this.utilService.isDateValidDateRange(n,this.opts),f=v.begin,D=v.end;if(this.utilService.isInitializedDate(f)&&this.utilService.isInitializedDate(D)){this.selectedDateRange={begin:f,end:D},R=this.utilService.preZero(f.hour),O=this.utilService.preZero(f.minute),V=this.utilService.preZero(f.second),this.timeVlaue=R+":"+O+":"+V;var b=this.utilService.preZero(D.hour),w=this.utilService.preZero(D.minute),C=this.utilService.preZero(D.second);if(this.timeVlaue_range=b+":"+w+":"+C,this.selectedMonth={monthNbr:f.month,year:f.year},f.month===D.month&&f.year===D.year)if(12<=D.month)this.selectedMonth_range={monthNbr:1,year:D.year+1};else{var S=D.year;h===T.Month&&(S+=1),this.selectedMonth_range={monthNbr:D.month+this.opts.monthRangeValue,year:S}}else h===T.Month&&f.year===D.year?this.selectedMonth_range={monthNbr:D.month,year:D.year+1}:this.selectedMonth_range={monthNbr:D.month,year:D.year};var M=this.utilService.getWeekNumber(f)===this.utilService.getWeekNumber(D)?this.utilService.getWeekNumber(f):0;this.selectedWeek={weekNbr:M,year:f.year}}}else{var k=this.utilService.isDateValid(n,this.opts,!0);if(this.utilService.isInitializedDate(k)){this.selectedDate=k;var R=this.utilService.preZero(k.hour),O=this.utilService.preZero(k.minute),V=this.utilService.preZero(k.second);this.timeVlaue=R+":"+O+":"+V,this.selectedMonth={monthNbr:k.month,year:k.year}}}this.dateChanged=a,this.calendarViewChanged=r,this.rangeDateSelection=s,this.closedByEsc=o,this.setCalendarVisibleMonth(),h===T.Month?(this.onMonthViewBtnClicked(),d&&this.onMonthViewBtnClicked(!0)):h===T.Year&&(this.onYearViewBtnClicked(),d&&this.onYearViewBtnClicked(!0))},ce.prototype.resetDateValue=function(e){e!==p.singleDate&&e!==p.both||(this.selectedDate=this.utilService.resetDate()),e!==p.dateRange&&e!==p.both||(this.selectedDateRange.begin=this.utilService.resetDate(),this.selectedDateRange.end=this.utilService.resetDate())},ce.prototype.resetMonthYearSelect=function(e){e?(this.selectMonth_range=!1,this.selectYear_range=!1):(this.selectMonth=!1,this.selectYear=!1)},ce.prototype.onMonthViewBtnClicked=function(e){this.selectTime=!1,e?(this.selectMonth_range=!this.selectMonth_range,this.selectYear_range=!1,this.selectMonth_range?this.generateMonths(e):this.visibleMonth_range.year=this.selectedMonth_range.year,this.cdr.detectChanges()):(this.selectMonth=!this.selectMonth,this.selectYear=!1,this.selectMonth?this.generateMonths(e):this.visibleMonth.year=this.selectedMonth.year)},ce.prototype.onMonthCellClicked=function(e,t){if(t){var i=this.visibleMonth_range;a=i.year,r=i.monthNbr,s=e.nbr!==r,this.visibleMonth_range={monthTxt:this.opts.monthLabels[e.nbr],monthNbr:e.nbr,year:a,yearTxt:this.opts.yearTxt},this.selectedMonth_range.year=this.visibleMonth_range.year,2===this.opts.showType?this.toSelectMonth(this.visibleMonth_range):(this.generateCalendar(e.nbr,a,s,t),this.selectMonth_range=!1)}else{var n=this.visibleMonth,a=n.year,r=n.monthNbr,s=e.nbr!==r;this.visibleMonth={monthTxt:this.opts.monthLabels[e.nbr],monthNbr:e.nbr,year:a,yearTxt:this.opts.yearTxt},this.selectedMonth.year=this.visibleMonth.year,2===this.opts.showType?this.toSelectMonth(this.visibleMonth):(this.generateCalendar(e.nbr,a,s,t),this.selectMonth=!1)}},ce.prototype.onMonthCellKeyDown=function(e){var t=this.getSourceRowAndColumnFromEvent(event),i=t.sourceRow,n=t.sourceCol,a=this.getTargetFocusRowAndColumn(event,i,n,3,2),r=a.moveFocus,s=a.targetRow,o=a.targetCol;r&&this.focusCellElement(C,s,o)},ce.prototype.onYearViewBtnClicked=function(e){this.selectTime=!1,e?(this.visibleMonth_range.year=this.selectedMonth_range.year,this.selectYear_range?this.generateCalendar(this.visibleMonth_range.monthNbr,this.visibleMonth_range.year,!1,e):this.generateYears(this.visibleMonth_range.year,e),this.selectYear_range=3===this.opts.showType||!this.selectYear_range,2===this.opts.showType?this.selectMonth_range=!this.selectMonth_range:this.selectMonth_range=!1):(this.visibleMonth.year=this.selectedMonth.year,this.selectYear?this.generateCalendar(this.visibleMonth.monthNbr,this.visibleMonth.year,!1,e):this.generateYears(this.visibleMonth.year,e),this.selectYear=3===this.opts.showType||!this.selectYear,2===this.opts.showType?this.selectMonth=!this.selectMonth:this.selectMonth=!1),this.cdr.detectChanges()},ce.prototype.onYearCellClicked=function(e,t){if(t){var i=this.visibleMonth_range;a=i.year,r=i.monthNbr,s=i.monthTxt,o=e.year!==a,this.visibleMonth_range={monthTxt:s,monthNbr:r,year:e.year,yearTxt:this.opts.yearTxt},this.selectedMonth_range.year=this.visibleMonth_range.year,3===this.opts.showType?this.toSelectYear({year:this.visibleMonth_range.year}):2===this.opts.showType?(this.generateMonths(t),this.selectYear_range=!1,this.selectMonth_range=!0):(this.generateCalendar(r,e.year,o,t),this.selectYear_range=!1)}else{var n=this.visibleMonth,a=n.year,r=n.monthNbr,s=n.monthTxt,o=e.year!==a;this.visibleMonth={monthTxt:s,monthNbr:r,year:e.year,yearTxt:this.opts.yearTxt},this.selectedMonth.year=this.visibleMonth.year,3===this.opts.showType?this.toSelectYear({year:this.visibleMonth.year}):2===this.opts.showType?(this.generateMonths(t),this.selectYear=!1,this.selectMonth=!0):(this.generateCalendar(r,e.year,o,t),this.selectYear=!1)}},ce.prototype.onYearCellKeyDown=function(e){var t=this.getSourceRowAndColumnFromEvent(event),i=t.sourceRow,n=t.sourceCol,a=this.getTargetFocusRowAndColumn(event,i,n,4,4),r=a.moveFocus,s=a.targetRow,o=a.targetCol;r&&this.focusCellElement("y",s,o)},ce.prototype.generateMonths=function(e){var t,i=this.getToday(),n=this.opts,a=n.disableUntil,r=n.disableSince;e?(this.months_range.length=0,t=this.visibleMonth_range.year,this.visibleMonth_range.monthNbr):(this.months.length=0,t=this.visibleMonth.year,this.visibleMonth.monthNbr);for(var s=1;s<=12;s+=3){for(var o=[],l=s;l<s+3;l++){var h=this.utilService.isMonthDisabledByDisableUntil({year:t,month:l,day:this.daysInMonth(l,t)},a)||this.utilService.isMonthDisabledByDisableSince({year:t,month:l,day:1},r);o.push({nbr:l,name:this.opts.monthLabels[l],currMonth:l===i.month&&t===i.year,disabled:h,monthObj:{year:t,month:l}})}e?this.months_range.push({row:o,year:t}):this.months.push({row:o,year:t})}this.setMonthViewHeaderBtnDisabledState(t,e)},ce.prototype.generateYears=function(t,e){var i=this.opts,n=i.minYear,a=i.maxYear,r=i.disableUntil,s=i.disableSince,o=t-t%10,l=this.visibleMonth,h=l.year,d=l.monthNbr;e?(this.years_range.length=0,-1<v.flatten(this.years_range).findIndex(function(e){return e.year==t})&&(o=this.years_range[3][2].year)):this.years.length=0;for(var c=this.getToday(),u=o-1;u<o+10;u+=3){for(var p=[],g=u;g<u+3;g++){var y=this.utilService.isMonthDisabledByDisableUntil({year:g,month:d,day:this.daysInMonth(d,g)},r)||this.utilService.isMonthDisabledByDisableSince({year:g,month:d,day:1},s),m=g<n||a<g;p.push({year:g,currYear:g===c.year,selected:g===h,disabled:y||m,yearObj:{year:g}})}e?this.years_range.push(p):this.years.push(p)}e?this.setYearViewHeaderBtnDisabledState(this.years_range[0][1].year,this.years_range[3][1].year,e):this.setYearViewHeaderBtnDisabledState(this.years[0][1].year,this.years[3][1].year,e)},ce.prototype.setCalendarVisibleMonth=function(){var e=this.selectedMonth,t=e.year,i=e.monthNbr;this.visibleMonth={monthTxt:this.opts.monthLabels[i],monthNbr:i,year:t,yearTxt:this.opts.yearTxt},this.opts.dateRange&&(this.visibleMonth_range={monthTxt:this.opts.monthLabels[this.selectedMonth_range.monthNbr],monthNbr:this.selectedMonth_range.monthNbr,year:this.selectedMonth_range.year,yearTxt:this.opts.yearTxt},this.generateCalendar(this.selectedMonth_range.monthNbr,this.selectedMonth_range.year,!0,!0)),this.generateCalendar(i,t,!0,!1)},ce.prototype.onPrevNavigateBtnClicked=function(e,t){t?e?this.selectMonth_range||this.selectYear_range?this.selectMonth_range?(this.visibleMonth_range.year--,this.generateMonths(t)):this.selectYear_range&&this.generateYears(this.years_range[2][2].year-10):this.setDateViewMonth(t,!1):this.selectMonth_range||this.selectYear_range?this.selectMonth_range?(this.visibleMonth_range.year--,this.generateMonths(t)):this.selectYear_range&&this.generateYears(this.years_range[2][2].year-10,t):(this.visibleMonth_range.year--,this.setDateViewMonth(t)):e?this.selectMonth||this.selectYear?this.selectMonth?(this.visibleMonth.year--,this.generateMonths(t)):this.selectYear&&this.generateYears(this.years[2][2].year-10):this.setDateViewMonth(t,!1):this.selectMonth||this.selectYear?this.selectMonth?(this.visibleMonth.year--,this.generateMonths(t)):this.selectYear&&this.generateYears(this.years[2][2].year-10,t):(this.visibleMonth.year--,this.setDateViewMonth(t))},ce.prototype.onNextNavigateBtnClicked=function(e,t){t?e?this.selectMonth_range||this.selectYear_range?this.selectMonth_range?(this.visibleMonth_range.year++,this.generateMonths(t)):this.selectYear_range&&this.generateYears(this.years_range[2][2].year+10,t):this.setDateViewMonth(t,!0):this.selectMonth_range||this.selectYear_range?this.selectMonth_range?(this.visibleMonth_range.year++,this.generateMonths(t)):this.selectYear_range&&this.generateYears(this.years_range[2][2].year+10,t):(this.visibleMonth_range.year++,this.setDateViewMonth(t)):e?this.selectMonth||this.selectYear?this.selectMonth?(this.visibleMonth.year++,this.generateMonths()):this.selectYear&&this.generateYears(this.years[2][2].year+10):this.setDateViewMonth(t,!0):this.selectMonth||this.selectYear?this.selectMonth?(this.visibleMonth.year++,this.generateMonths()):this.selectYear&&this.generateYears(this.years[2][2].year+10):(this.visibleMonth.year++,this.setDateViewMonth(t))},ce.prototype.setDateViewMonth=function(e,t){var i;if(i=t===undefined?0:t?1:-1,e){var n=this.visibleMonth_range;s=n.year,o=n.monthNbr,(a=this.getDate(s,o,1)).setMonth(a.getMonth()+i),l=a.getFullYear(),h=a.getMonth()+1,this.visibleMonth_range={monthTxt:this.opts.monthLabels[h],monthNbr:h,year:l,yearTxt:this.opts.yearTxt},this.generateCalendar(h,l,!0,e)}else{var a,r=this.visibleMonth,s=r.year,o=r.monthNbr;(a=this.getDate(s,o,1)).setMonth(a.getMonth()+i);var l=a.getFullYear(),h=a.getMonth()+1;this.visibleMonth={monthTxt:this.opts.monthLabels[h],monthNbr:h,year:l,yearTxt:this.opts.yearTxt},this.generateCalendar(h,l,!0,e)}},ce.prototype.onCloseSelector=function(e){this.utilService.getKeyCodeFromEvent(e)===c.esc&&this.closedByEsc()},ce.prototype.onDayCellClicked=function(e,t){1===e.cmo?this.onPrevNavigateBtnClicked(!0,t):3===e.cmo&&this.onNextNavigateBtnClicked(!0,t),this.selectDate(e.dateObj),this.resetMonthYearSelect(t)},ce.prototype.onDayCellKeyDown=function(e){var t=this.getSourceRowAndColumnFromEvent(event),i=t.sourceRow,n=t.sourceCol,a=this.getTargetFocusRowAndColumn(event,i,n,5,6),r=a.moveFocus,s=a.targetRow,o=a.targetCol;r&&this.focusCellElement(b,s,o)},ce.prototype.onDayCellMouseEnter=function(e,t){var i,n,a,r,s,o,l,h;if(t)try{for(var d=E(this.dates),c=d.next();!c.done;c=d.next()){var u=c.value;try{for(var p=E(u.week),g=p.next();!g.done;g=p.next())(D=g.value).range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,D.dateObj)&&this.utilService.isDateSameOrEarlier(D.dateObj,e.dateObj)||this.utilService.isDateSameOrEarlier(D.dateObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.dateObj,D.dateObj)}catch(b){a={error:b}}finally{try{g&&!g.done&&(r=p["return"])&&r.call(p)}finally{if(a)throw a.error}}}}catch(w){i={error:w}}finally{try{c&&!c.done&&(n=d["return"])&&n.call(d)}finally{if(i)throw i.error}}else try{for(var y=E(this.dates_range),m=y.next();!m.done;m=y.next()){u=m.value;try{for(var v=E(u.week),f=v.next();!f.done;f=v.next()){var D;(D=f.value).range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,D.dateObj)&&this.utilService.isDateSameOrEarlier(D.dateObj,e.dateObj)||this.utilService.isDateSameOrEarlier(D.dateObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.dateObj,D.dateObj)}}catch(C){l={error:C}}finally{try{f&&!f.done&&(h=v["return"])&&h.call(v)}finally{if(l)throw l.error}}}}catch(S){s={error:S}}finally{try{m&&!m.done&&(o=y["return"])&&o.call(y)}finally{if(s)throw s.error}}},ce.prototype.onDayCellMouseLeave=function(e){var t,i,n,a,r,s,o,l;if(e)try{for(var h=E(this.dates),d=h.next();!d.done;d=h.next()){var c=d.value;try{for(var u=E(c.week),p=u.next();!p.done;p=u.next())p.value.range=!1}catch(f){n={error:f}}finally{try{p&&!p.done&&(a=u["return"])&&a.call(u)}finally{if(n)throw n.error}}}}catch(D){t={error:D}}finally{try{d&&!d.done&&(i=h["return"])&&i.call(h)}finally{if(t)throw t.error}}else try{for(var g=E(this.dates_range),y=g.next();!y.done;y=g.next()){c=y.value;try{for(var m=E(c.week),v=m.next();!v.done;v=m.next())v.value.range=!1}catch(b){o={error:b}}finally{try{v&&!v.done&&(l=m["return"])&&l.call(m)}finally{if(o)throw o.error}}}}catch(w){r={error:w}}finally{try{y&&!y.done&&(s=g["return"])&&s.call(g)}finally{if(r)throw r.error}}},ce.prototype.onMonthCellMouseEnter=function(e,t){var i,n,a,r,s,o,l,h;if(t)try{for(var d=E(this.months),c=d.next();!c.done;c=d.next()){var u=c.value;try{for(var p=E(u.row),g=p.next();!g.done;g=p.next())(D=g.value).range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,D.monthObj)&&this.utilService.isDateSameOrEarlier(D.monthObj,e.monthObj)||this.utilService.isDateSameOrEarlier(D.monthObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.monthObj,D.monthObj)}catch(b){a={error:b}}finally{try{g&&!g.done&&(r=p["return"])&&r.call(p)}finally{if(a)throw a.error}}}}catch(w){i={error:w}}finally{try{c&&!c.done&&(n=d["return"])&&n.call(d)}finally{if(i)throw i.error}}else try{for(var y=E(this.months_range),m=y.next();!m.done;m=y.next()){u=m.value;try{for(var v=E(u.row),f=v.next();!f.done;f=v.next()){var D;(D=f.value).range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,D.monthObj)&&this.utilService.isDateSameOrEarlier(D.monthObj,e.monthObj)||this.utilService.isDateSameOrEarlier(D.monthObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.monthObj,D.monthObj)}}catch(C){l={error:C}}finally{try{f&&!f.done&&(h=v["return"])&&h.call(v)}finally{if(l)throw l.error}}}}catch(S){s={error:S}}finally{try{m&&!m.done&&(o=y["return"])&&o.call(y)}finally{if(s)throw s.error}}},ce.prototype.onMonthCellMouseLeave=function(e){var t,i,n,a,r,s,o,l;if(e)try{for(var h=E(this.months),d=h.next();!d.done;d=h.next()){var c=d.value;try{for(var u=E(c.row),p=u.next();!p.done;p=u.next())p.value.range=!1}catch(f){n={error:f}}finally{try{p&&!p.done&&(a=u["return"])&&a.call(u)}finally{if(n)throw n.error}}}}catch(D){t={error:D}}finally{try{d&&!d.done&&(i=h["return"])&&i.call(h)}finally{if(t)throw t.error}}else try{for(var g=E(this.months),y=g.next();!y.done;y=g.next()){c=y.value;try{for(var m=E(c.row),v=m.next();!v.done;v=m.next())v.value.range=!1}catch(b){o={error:b}}finally{try{v&&!v.done&&(l=m["return"])&&l.call(m)}finally{if(o)throw o.error}}}}catch(w){r={error:w}}finally{try{y&&!y.done&&(s=g["return"])&&s.call(g)}finally{if(r)throw r.error}}},ce.prototype.onYearCellMouseEnter=function(e,t){var i,n,a,r,s,o,l,h;if(t)try{for(var d=E(this.years),c=d.next();!c.done;c=d.next()){var u=c.value;try{for(var p=E(u),g=p.next();!g.done;g=p.next())(D=g.value).range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,D.yearObj)&&this.utilService.isDateSameOrEarlier(D.yearObj,e.yearObj)||this.utilService.isDateSameOrEarlier(D.yearObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.yearObj,D.yearObj)}catch(b){a={error:b}}finally{try{g&&!g.done&&(r=p["return"])&&r.call(p)}finally{if(a)throw a.error}}}}catch(w){i={error:w}}finally{try{c&&!c.done&&(n=d["return"])&&n.call(d)}finally{if(i)throw i.error}}else try{for(var y=E(this.years_range),m=y.next();!m.done;m=y.next()){u=m.value;try{for(var v=E(u),f=v.next();!f.done;f=v.next()){var D;(D=f.value).range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,D.yearObj)&&this.utilService.isDateSameOrEarlier(D.yearObj,e.yearObj)||this.utilService.isDateSameOrEarlier(D.yearObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.yearObj,D.yearObj)}}catch(C){l={error:C}}finally{try{f&&!f.done&&(h=v["return"])&&h.call(v)}finally{if(l)throw l.error}}}}catch(S){s={error:S}}finally{try{m&&!m.done&&(o=y["return"])&&o.call(y)}finally{if(s)throw s.error}}},ce.prototype.onYearCellMouseLeave=function(e){var t,i,n,a,r,s,o,l;if(e)try{for(var h=E(this.years),d=h.next();!d.done;d=h.next()){var c=d.value;try{for(var u=E(c),p=u.next();!p.done;p=u.next())p.value.range=!1}catch(f){n={error:f}}finally{try{p&&!p.done&&(a=u["return"])&&a.call(u)}finally{if(n)throw n.error}}}}catch(D){t={error:D}}finally{try{d&&!d.done&&(i=h["return"])&&i.call(h)}finally{if(t)throw t.error}}else try{for(var g=E(this.years_range),y=g.next();!y.done;y=g.next()){c=y.value;try{for(var m=E(c),v=m.next();!v.done;v=m.next())v.value.range=!1}catch(b){o={error:b}}finally{try{v&&!v.done&&(l=m["return"])&&l.call(m)}finally{if(o)throw o.error}}}}catch(w){r={error:w}}finally{try{y&&!y.done&&(s=g["return"])&&s.call(g)}finally{if(r)throw r.error}}},ce.prototype.onWeekClicked=function(e){var t=this.opts.returnFormat&&-1<this.opts.returnFormat.toLocaleLowerCase().indexOf("hh:mm");this.selectedWeek={weekNbr:e.weekNbr,year:e.year},t&&(e.week[0].dateObj.hour=0,e.week[0].dateObj.minute=0,e.week[0].dateObj.second=0,e.week[6].dateObj.hour=23,e.week[6].dateObj.minute=59,e.week[6].dateObj.second=59),this.selectDate(e.week[0].dateObj),this.selectDate(e.week[6].dateObj)},ce.prototype.getSourceRowAndColumnFromEvent=function(e){var t=0,i=0;if(e.target&&e.target.id){var n=e.target.id.split(R);t=Number(n[1]),i=Number(n[2])}return{sourceRow:t,sourceCol:i}},ce.prototype.getTargetFocusRowAndColumn=function(e,t,i,n,a){var r=!1,s=t,o=i,l=this.utilService.getKeyCodeFromEvent(e);return l===c.upArrow&&0<t?(r=!0,s--):l===c.downArrow&&t<n?(r=!0,s++):l===c.leftArrow&&0<i?(r=!0,o--):l===c.rightArrow&&i<a&&(r=!0,o++),{moveFocus:r,targetRow:s,targetCol:o}},ce.prototype.focusCellElement=function(e,t,i){var n=this.selectorEl.nativeElement.querySelector("."+e+R+t+R+i);n&&n.focus()},ce.prototype.selectDate=function(e){var t=this.opts,i=t.dateFormat,n=t.monthLabels,a=t.dateRangeDatesDelimiter,r=t.closeSelectorOnDateSelect,s=t.showTime,o=t.returnFormat;if(this.opts.dateRange){var l=this.utilService.isInitializedDate(this.selectedDateRange.begin),h=this.utilService.isInitializedDate(this.selectedDateRange.end)&&JSON.stringify(this.selectedDateRange.begin)!==JSON.stringify(this.selectedDateRange.end);if(l&&h)this.selectedDateRange.begin=e,this.selectedDateRange.end=this.utilService.resetDate(),this.rangeDateSelection({isBegin:!0,date:e,jsDate:this.utilService.getDate(e),dateFormat:i,formatted:this.utilService.formatDate(e,i,n),epoc:this.utilService.getEpocTime(e)});else if(l){if(this.utilService.isDateEarlier(e,this.selectedDateRange.begin)){var d=this.selectedDateRange.begin;this.selectedDateRange.end=d,this.rangeDateSelection({isBegin:!1,date:d,jsDate:this.utilService.getDate(d),dateFormat:i,formatted:this.utilService.formatDate(d,i,n),epoc:this.utilService.getEpocTime(d)}),this.selectedDateRange.begin=e,this.rangeDateSelection({isBegin:!0,date:e,jsDate:this.utilService.getDate(e),dateFormat:i,formatted:this.utilService.formatDate(e,i,n),epoc:this.utilService.getEpocTime(e)})}else this.selectedDateRange.end=e,this.rangeDateSelection({isBegin:!1,date:e,jsDate:this.utilService.getDate(e),dateFormat:i,formatted:this.utilService.formatDate(e,i,n),epoc:this.utilService.getEpocTime(e)});this.opts.showTime||this.dateChanged(this.utilService.getDateModel(null,this.selectedDateRange,i,n,a,o),r)}else this.selectedDateRange.begin=e,h||(this.selectedDateRange.end=e),this.rangeDateSelection({isBegin:!0,date:e,jsDate:this.utilService.getDate(e),dateFormat:i,formatted:this.utilService.formatDate(e,i,n),epoc:this.utilService.getEpocTime(e)})}else this.selectedDate=e,this.opts.showTime||this.dateChanged(this.utilService.getDateModel(this.selectedDate,null,i,n,a,o),!s&&r)},ce.prototype.toSelectMonth=function(e){var t=this.opts,i=t.dateFormat,n=t.monthLabels,a=t.dateRangeDatesDelimiter,r=t.closeSelectorOnDateSelect,s=t.showTime,o=t.returnFormat;if(this.opts.dateRange){var l=this.utilService.isInitializedMonth(this.selectedDateRange.begin),h=this.utilService.isInitializedMonth(this.selectedDateRange.end);if(l&&h)this.selectedDateRange.begin={year:e.year,month:e.monthNbr},this.selectedDateRange.end=this.utilService.resetDate(),this.rangeDateSelection({isBegin:!0,date:this.selectedDateRange.begin,jsDate:this.utilService.getDate(this.selectedDateRange.begin),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.begin,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.begin)});else if(l){if(this.utilService.isDateEarlier({year:e.year,month:e.monthNbr},this.selectedDateRange.begin)){var d=this.selectedDateRange.begin;this.selectedDateRange.end=d,this.rangeDateSelection({isBegin:!1,date:d,jsDate:this.utilService.getDate(d),dateFormat:i,formatted:this.utilService.formatDate(d,i,n),epoc:this.utilService.getEpocTime(d)}),this.selectedDateRange.begin={year:e.year,month:e.monthNbr},this.rangeDateSelection({isBegin:!0,date:this.selectedDateRange.begin,jsDate:this.utilService.getDate(this.selectedDateRange.begin),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.begin,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.begin)})}else this.selectedDateRange.end={year:e.year,month:e.monthNbr},this.rangeDateSelection({isBegin:!1,date:this.selectedDateRange.end,jsDate:this.utilService.getDate(this.selectedDateRange.end),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.end,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.end)});this.opts.showTime||this.dateChanged(this.utilService.getDateModel(null,this.selectedDateRange,i,n,a,o),r)}else this.selectedDateRange.begin={year:e.year,month:e.monthNbr},this.rangeDateSelection({isBegin:!0,date:this.selectedDateRange.begin,jsDate:this.utilService.getDate(this.selectedDateRange.begin),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.begin,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.begin)})}else this.selectedMonth=e,this.dateChanged(this.utilService.getDateModel({year:e.year,month:e.monthNbr},null,i,n,a,o),!s&&r)},ce.prototype.toSelectYear=function(e){var t=this.opts,i=t.dateFormat,n=t.monthLabels,a=t.dateRangeDatesDelimiter,r=t.closeSelectorOnDateSelect,s=t.showTime,o=t.returnFormat;if(this.opts.dateRange){var l=this.utilService.isInitializedYear(this.selectedDateRange.begin),h=this.utilService.isInitializedYear(this.selectedDateRange.end);if(l&&h)this.selectedDateRange.begin=e,this.selectedDateRange.end=this.utilService.resetDate(),this.rangeDateSelection({isBegin:!0,date:this.selectedDateRange.begin,jsDate:this.utilService.getDate(this.selectedDateRange.begin),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.begin,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.begin)});else if(l){if(this.utilService.isDateEarlier(e,this.selectedDateRange.begin)){var d=this.selectedDateRange.begin;this.selectedDateRange.end=d,this.rangeDateSelection({isBegin:!1,date:d,jsDate:this.utilService.getDate(d),dateFormat:i,formatted:this.utilService.formatDate(d,i,n),epoc:this.utilService.getEpocTime(d)}),this.selectedDateRange.begin=e,this.rangeDateSelection({isBegin:!0,date:this.selectedDateRange.begin,jsDate:this.utilService.getDate(this.selectedDateRange.begin),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.begin,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.begin)})}else this.selectedDateRange.end=e,this.rangeDateSelection({isBegin:!1,date:this.selectedDateRange.end,jsDate:this.utilService.getDate(this.selectedDateRange.end),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.end,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.end)});this.opts.showTime||this.dateChanged(this.utilService.getDateModel(null,this.selectedDateRange,i,n,a,o),r)}else this.selectedDateRange.begin=e,this.rangeDateSelection({isBegin:!0,date:this.selectedDateRange.begin,jsDate:this.utilService.getDate(this.selectedDateRange.begin),dateFormat:i,formatted:this.utilService.formatDate(this.selectedDateRange.begin,i,n),epoc:this.utilService.getEpocTime(this.selectedDateRange.begin)})}else this.dateChanged(this.utilService.getDateModel(e,null,i,n,a,o),!s&&r)},ce.prototype.monthStartIdx=function(e,t){var i=new Date;i.setDate(1),i.setMonth(t-1),i.setFullYear(e);var n=i.getDay()+this.sundayIdx();return 7<=n?n-7:n},ce.prototype.daysInMonth=function(e,t){return new Date(t,e,0).getDate()},ce.prototype.daysInPrevMonth=function(e,t){var i=this.getDate(t,e,1);return i.setMonth(i.getMonth()-1),this.daysInMonth(i.getMonth()+1,i.getFullYear())},ce.prototype.isCurrDay=function(e,t,i,n,a){return e===a.day&&t===a.month&&i===a.year&&n===f.curr},ce.prototype.getWidth=function(){var e=this.opts.shortcuts&&0<this.opts.shortcuts.length;return this.opts.dateRange&&4!==this.opts.showType?e?"660px":"574px":e?"380px":"287px"},ce.prototype.getToday=function(){var e=new Date;return this.opts.showTime?{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}:{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},ce.prototype.getDayNumber=function(e){return this.getDate(e.year,e.month,e.day).getDay()},ce.prototype.getWeekday=function(e){return this.weekDayOpts[this.getDayNumber(e)]},ce.prototype.getDate=function(e,t,i){return new Date(e,t-1,i,0,0,0,0)},ce.prototype.sundayIdx=function(){return 0<this.dayIdx?7-this.dayIdx:0},ce.prototype.generateCalendar=function(e,t,i,n){n?this.dates_range.length=0:this.dates.length=0;for(var a=this.getToday(),r=this.monthStartIdx(t,e),s=this.daysInMonth(e,t),o=this.daysInPrevMonth(e,t),l=1,h=f.prev,d=1;d<7;d++){var c=[];if(1===d){for(var u=o-r+1;u<=o;u++){var p={year:1===e?t-1:t,month:1===e?12:e-1,day:u};c.push({dateObj:p,cmo:h,currDay:this.isCurrDay(u,e,t,h,a),disabled:this.utilService.isDisabledDate(p,this.opts),markedDate:this.utilService.isMarkedDate(p,this.opts.markDates,this.opts.markWeekends),highlight:this.utilService.isHighlightedDate(p,this.opts.sunHighlight,this.opts.satHighlight,this.opts.highlightDates)})}h=f.curr;var g=7-c.length;for(u=0;u<g;u++)p={year:t,month:e,day:l},c.push({dateObj:p,cmo:h,currDay:this.isCurrDay(l,e,t,h,a),disabled:this.utilService.isDisabledDate(p,this.opts),markedDate:this.utilService.isMarkedDate(p,this.opts.markDates,this.opts.markWeekends),highlight:this.utilService.isHighlightedDate(p,this.opts.sunHighlight,this.opts.satHighlight,this.opts.highlightDates)}),l++}else for(u=1;u<8;u++)s<l&&(l=1,h=f.next),p={year:h===f.next&&12===e?t+1:t,month:h===f.curr?e:h===f.next&&e<12?e+1:1,day:l},c.push({dateObj:p,cmo:h,currDay:this.isCurrDay(l,e,t,h,a),disabled:this.utilService.isDisabledDate(p,this.opts),markedDate:this.utilService.isMarkedDate(p,this.opts.markDates,this.opts.markWeekends),highlight:this.utilService.isHighlightedDate(p,this.opts.sunHighlight,this.opts.satHighlight,this.opts.highlightDates)}),l++;var y=this.opts.showWeekNumbers&&this.opts.firstDayOfWeek===_?this.utilService.getWeekNumber(c[0].dateObj):0;n?this.dates_range.push({week:c,weekNbr:y,year:t}):this.dates.push({week:c,weekNbr:y,year:t})}this.setDateViewHeaderBtnDisabledState(e,t,n),i&&this.calendarViewChanged({year:t,month:e,first:{number:1,weekday:this.getWeekday({year:t,month:e,day:1})},last:{number:s,weekday:this.getWeekday({year:t,month:e,day:s})}})},ce.prototype.setDateViewHeaderBtnDisabledState=function(e,t,i){var n,a,r=this.opts,s=r.disableUntil,o=r.disableSince,l=r.minYear,h=r.maxYear;n=this.utilService.isMonthDisabledByDisableUntil({year:1===e?t-1:t,month:1===e?12:e-1,day:this.daysInMonth(1===e?12:e-1,1===e?t-1:t)},s),a=this.utilService.isMonthDisabledByDisableSince({year:12===e?t+1:t,month:12===e?1:e+1,day:1},o),i?(this.prevViewDisabled_range=1===e&&t===l||n,this.nextViewDisabled_range=12===e&&t===h||a,this.prevDobViewDisabled_range=t===l||n,this.nextDobViewDisabled_range=t===h||a):(this.prevViewDisabled=1===e&&t===l||n,this.nextViewDisabled=12===e&&t===h||a,this.prevDobViewDisabled=t===l||n,this.nextDobViewDisabled=t===h||a)},ce.prototype.setMonthViewHeaderBtnDisabledState=function(e,t){var i,n,a=this.opts,r=a.disableUntil,s=a.disableSince,o=a.minYear,l=a.maxYear;i=this.utilService.isMonthDisabledByDisableUntil({year:e-1,month:12,day:31},r),n=this.utilService.isMonthDisabledByDisableSince({year:e+1,month:1,day:1},s),t?(this.prevViewDisabled_range=e===o||i,this.nextViewDisabled_range=e===l||n,this.prevDobViewDisabled_range=e===o||i,this.nextDobViewDisabled_range=e===l||n):(this.prevViewDisabled=e===o||i,this.nextViewDisabled=e===l||n,this.prevDobViewDisabled=e===o||i,this.nextDobViewDisabled=e===l||n)},ce.prototype.setYearViewHeaderBtnDisabledState=function(e,t,i){var n,a,r=this.opts,s=r.disableUntil,o=r.disableSince,l=r.minYear,h=r.maxYear;n=this.utilService.isMonthDisabledByDisableUntil({year:e-1,month:12,day:31},s),a=this.utilService.isMonthDisabledByDisableSince({year:t+1,month:1,day:1},o),i?(this.prevViewDisabled_range=e<=l||n,this.nextViewDisabled_range=h<=t||a,this.prevDobViewDisabled_range=e<=l||n,this.nextDobViewDisabled_range=h<=t||a):(this.prevViewDisabled=e<=l||n,this.nextViewDisabled=h<=t||a,this.prevDobViewDisabled=e<=l||n,this.nextDobViewDisabled=h<=t||a)},ce.prototype.onContainerClick=function(e){e.stopPropagation()},ce.prototype.onClickTimeBtn=function(e){if(e.stopPropagation(),this.opts.dateRange){var t=this.utilService.isInitializedDate(this.selectedDateRange.begin),i=this.utilService.isInitializedDate(this.selectedDateRange.end);if(!t||!i){var n=new Date;t||(this.selectedDateRange.begin={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()}),n.getFullYear();var a=n.getMonth()+1;12<=a&&(a=1),this.selectedDateRange.end=m({},this.selectedDateRange.begin),this.timeVlaue=this.getTimeStr(n),this.timeVlaue_range=this.getTimeStr(n)}}else this.utilService.isInitializedDate(this.selectedDate)||(n=new Date,this.timeVlaue=this.getTimeStr(n),this.selectedDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()});this.timeVlaue||(n=new Date,this.timeVlaue=this.getTimeStr(n),this.utilService.isInitializedDate(this.selectedDate)||(this.selectedDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()})),this.selectYear&&(this.selectYear=!1),this.selectMonth&&(this.selectMonth=!1),this.selectYear_range&&(this.selectYear_range=!1),this.selectMonth_range&&(this.selectMonth_range=!1),this.selectTime=!this.selectTime,this.cdr.detectChanges()},ce.prototype.getTimeValue=function(e){var t={start:null,end:null};if(this.timeVlaue){var i=this.timeVlaue.replace("时",":").replace("分",":").replace("秒","").split(":");2<=i.length&&(t.start={hour:i[0],minute:i[1],second:i[2]?i[2]:0})}else{var n=new Date,a=n.getHours(),r=n.getMinutes(),s=n.getSeconds();this.opts.dateRange?t.start={hour:0,minute:0,second:0}:t.start={hour:a,minute:r,second:s}}if(e)if(this.timeVlaue_range){var o=this.timeVlaue_range.replace("时",":").replace("分",":").replace("秒","").split(":");2<=o.length&&(t.end={hour:o[0],minute:o[1],second:o[2]?o[2]:0})}else a=23,s=r=59,t.end={hour:a,minute:r,second:s};return t},ce.prototype.onClickOkBtn=function(e){e.stopPropagation();var t=null,i=null,n=null,a=null;if(this.opts.showTime){var r=this.getTimeValue(this.opts.dateRange);t=r.start,i=r.end}var s=this.opts,o=s.dateFormat,l=s.monthLabels,h=s.dateRangeDatesDelimiter,d=s.closeSelectorOnDateSelect,c=s.returnFormat;if(this.opts.dateRange){var u=m({},this.initializedDate(this.selectedDateRange.begin),t);a={begin:u,end:m({},this.initializedDate(this.selectedDateRange.end,u),i)}}else{n=m({},this.initializedDate(this.selectedDate),t);var p=this.utilService.isDisabledDate(n,this.opts),g=this.utilService.isDateSameOrEarlier(n,this.opts.disableUntil);n=p?m({},n,g?this.opts.disableUntil:this.opts.disableSince):n}var y=this.utilService.getDateModel(n,a,o,l,h,c);this.dateChanged(y,d)},ce.prototype.initializedDate=function(e,t){if(void 0===t&&(t={year:0,month:0,day:0}),this.utilService.isInitializedDate(e)||this.utilService.isInitializedDate(t))return this.utilService.isInitializedDate(e)?e:(i=12<t.month+1?t.year+1:t.year,n=12<t.month+1?1:t.month+this.opts.monthRangeValue,e.month||(n=t.month),a=t.day<1||t.day>[31,28,31,30,31,30,31,31,30,31,30,31][n-1]?1:t.day,this.utilService.isDisabledDate({year:i,month:n,day:a},this.opts)?this.opts.disableSince:{year:i,month:n,day:a});var i=(new Date).getFullYear(),n=(new Date).getMonth()+1,a=(new Date).getDate();return this.utilService.isDisabledDate({year:i,month:n,day:a},this.opts)?this.opts.disableUntil:{year:i,month:n,day:a}},ce.prototype.setTime=function(e){var t=this.opts,i=t.dateFormat,n=t.monthLabels,a=t.dateRangeDatesDelimiter,r=t.closeSelectorOnDateSelect,s=t.returnFormat;if(e instanceof Date)if(4===this.opts.showType||this.opts.dateRange)l=this.utilService.getDateModel(null,this.utilService.getNowWeekTime(e),i,n,a,s),this.dateChanged(l,r);else{var o=void 0;o=this.opts.showTime?{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}:{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};var l=this.utilService.getDateModel(o,null,i,n,a,s);this.dateChanged(l,r)}else if(e instanceof Object&&this.opts.dateRange){var h=void 0,d=e.begin,c=e.end;if(!d||!c)return;h=this.opts.showTime?{begin:{year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate(),hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds()},end:{year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate(),hour:c.getHours(),minute:c.getMinutes(),second:c.getSeconds()}}:{begin:{year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate()},end:{year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate()}},l=this.utilService.getDateModel(null,h,i,n,a,s),this.dateChanged(l,r)}else console.warn("参数必须符合要求！")},ce.decorators=[{type:d.Component,args:[{selector:"farris-datepicker-calendar",template:'<div\r\n    class="f-datepicker-container"\r\n    #selectorEl\r\n    [ngStyle]="{\r\n        top: selectorPos.top + \'px\',\r\n        left: selectorPos.left + \'px\',\r\n        width: getWidth()\r\n    }"\r\n    (keyup)="onCloseSelector($event)"\r\n    tabindex="0"\r\n    [ngClass]="\'container-position-\' + selectorPos.position"\r\n    (click)="onContainerClick($event)"\r\n>\r\n    <lib-selection-sidebar\r\n        *ngIf="opts.shortcuts[0]"\r\n        [opts]="opts"\r\n        (setTime)="setTime($event)"\r\n    ></lib-selection-sidebar>\r\n    <div\r\n        class="f-datepicker-content"\r\n        [ngStyle]="{\r\n            \'margin-left\': opts.shortcuts[0] ? \'100px\' : 0\r\n        }"\r\n    >\r\n        <lib-selection-bar\r\n            [opts]="opts"\r\n            [years]="years"\r\n            [visibleMonth]="visibleMonth"\r\n            [selectMonth]="selectMonth"\r\n            [selectYear]="selectYear"\r\n            [prevViewDisabled]="prevViewDisabled"\r\n            [nextViewDisabled]="nextViewDisabled"\r\n            [prevDobViewDisabled]="prevDobViewDisabled"\r\n            [nextDobViewDisabled]="nextDobViewDisabled"\r\n            (prevNavigateBtnClicked)="onPrevNavigateBtnClicked($event)"\r\n            (nextNavigateBtnClicked)="onNextNavigateBtnClicked($event)"\r\n            (monthViewBtnClicked)="onMonthViewBtnClicked()"\r\n            (yearViewBtnClicked)="onYearViewBtnClicked()"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf="!selectMonth && !selectYear && !selectTime"\r\n            [opts]="opts"\r\n            [dates]="dates"\r\n            [weekDays]="weekDays"\r\n            [selectedDate]="selectedDate"\r\n            [selectedDateRange]="selectedDateRange"\r\n            [selectedWeek]="selectedWeek"\r\n            (dayCellClicked)="onDayCellClicked($event)"\r\n            (dayCellKeyDown)="onDayCellKeyDown($event)"\r\n            (onMouseEnter)="onDayCellMouseEnter($event)"\r\n            (onMouseLeave)="onDayCellMouseLeave($event)"\r\n            (weekClicked)="onWeekClicked($event)"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf="selectMonth"\r\n            [opts]="opts"\r\n            [months]="months"\r\n            [selectedDate]="selectedDate"\r\n            [selectedDateRange]="selectedDateRange"\r\n            (monthCellClicked)="onMonthCellClicked($event, false)"\r\n            (monthCellKeyDown)="onMonthCellKeyDown($event)"\r\n            (onMouseEnter)="onMonthCellMouseEnter($event, false)"\r\n            (onMouseLeave)="onMonthCellMouseLeave($event)"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf="selectYear"\r\n            [opts]="opts"\r\n            [years]="years"\r\n            [selectedDate]="selectedDate"\r\n            [selectedDateRange]="selectedDateRange"\r\n            [prevViewDisabled]="prevViewDisabled"\r\n            [nextViewDisabled]="nextViewDisabled"\r\n            (yearCellClicked)="onYearCellClicked($event)"\r\n            (yearCellKeyDown)="onYearCellKeyDown($event)"\r\n            (prevCellClicked)="onPrevNavigateBtnClicked()"\r\n            (nextCellClicked)="onNextNavigateBtnClicked()"\r\n            (onMouseEnter)="onYearCellMouseEnter($event)"\r\n            (onMouseLeave)="onYearCellMouseLeave($event)"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf="selectTime"\r\n            [(ngModel)]="timeVlaue"\r\n            [opened]="true"\r\n            [inDatePicker]="true"\r\n            [disabledHours]="disabledHours"\r\n            [disabledMinutes]="disabledMinutes"\r\n            [disabledSeconds]="disabledSeconds"\r\n            [format]="opts.timeFormat"\r\n        >\r\n        </time-picker-panel>\r\n        \x3c!-- <div class="f-datepicker-commitBtn-wrapper" *ngIf="opts.showTime">\r\n            <button (click)="selectTime=!selectTime" class="f-datepicker-commitBtn">\r\n                {{ selectTime? \'选择日期\' : \'选择时间\' }}\r\n            </button>\r\n            <button (click)="onClickOk()" class="f-datepicker-commitBtn">\r\n                OK\r\n            </button>\r\n        </div> --\x3e\r\n    </div>\r\n    <div class="f-datepicker-content" *ngIf="opts.dateRange && opts.showType !== 4">\r\n        <lib-selection-bar\r\n            [opts]="opts"\r\n            [years]="years_range"\r\n            [visibleMonth]="visibleMonth_range"\r\n            [selectMonth]="selectMonth_range"\r\n            [selectYear]="selectYear_range"\r\n            [prevViewDisabled]="prevViewDisabled_range"\r\n            [nextViewDisabled]="nextViewDisabled_range"\r\n            [prevDobViewDisabled]="prevDobViewDisabled_range"\r\n            [nextDobViewDisabled]="nextDobViewDisabled_range"\r\n            (prevNavigateBtnClicked)="onPrevNavigateBtnClicked($event, true)"\r\n            (nextNavigateBtnClicked)="onNextNavigateBtnClicked($event, true)"\r\n            (monthViewBtnClicked)="onMonthViewBtnClicked(true)"\r\n            (yearViewBtnClicked)="onYearViewBtnClicked(true)"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf="!selectMonth_range && !selectYear_range && !selectTime"\r\n            [opts]="opts"\r\n            [dates]="dates_range"\r\n            [weekDays]="weekDays"\r\n            [selectedDate]="selectedDate"\r\n            [selectedDateRange]="selectedDateRange"\r\n            (dayCellClicked)="onDayCellClicked($event, true)"\r\n            (dayCellKeyDown)="onDayCellKeyDown($event)"\r\n            (onMouseEnter)="onDayCellMouseEnter($event, true)"\r\n            (onMouseLeave)="onDayCellMouseLeave(true)"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf="selectMonth_range"\r\n            [opts]="opts"\r\n            [months]="months_range"\r\n            [selectedDate]="selectedDate"\r\n            [selectedDateRange]="selectedDateRange"\r\n            (monthCellClicked)="onMonthCellClicked($event, true)"\r\n            (monthCellKeyDown)="onMonthCellKeyDown($event)"\r\n            (onMouseEnter)="onMonthCellMouseEnter($event, true)"\r\n            (onMouseLeave)="onMonthCellMouseLeave(true)"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf="selectYear_range"\r\n            [opts]="opts"\r\n            [years]="years_range"\r\n            [selectedDate]="selectedDate"\r\n            [selectedDateRange]="selectedDateRange"\r\n            [prevViewDisabled]="prevViewDisabled"\r\n            [nextViewDisabled]="nextViewDisabled"\r\n            (yearCellClicked)="onYearCellClicked($event, true)"\r\n            (yearCellKeyDown)="onYearCellKeyDown($event)"\r\n            (prevCellClicked)="onPrevNavigateBtnClicked($event, true)"\r\n            (nextCellClicked)="onNextNavigateBtnClicked($event, true)"\r\n            (onMouseEnter)="onYearCellMouseEnter($event, true)"\r\n            (onMouseLeave)="onYearCellMouseLeave(true)"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf="selectTime"\r\n            [(ngModel)]="timeVlaue_range"\r\n            [opened]="true"\r\n            [inDatePicker]="true"\r\n            [disabledHours]="disabledHours"\r\n            [disabledMinutes]="disabledMinutes"\r\n            [disabledSeconds]="disabledSeconds"\r\n            [format]="opts.timeFormat"\r\n            #endTimeRef\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n    <div class="f-datepicker-commitBtn-wrapper" *ngIf="opts.showTime">\r\n        <button\r\n            (click)="onClickTimeBtn($event)"\r\n            class="btn btn-link f-datepicker-select-btn"\r\n        >\r\n            {{\r\n                selectTime\r\n                    ? opts.dateBtnText\r\n                        ? opts.dateBtnText\r\n                        : "Select Date"\r\n                    : opts.timeBtnText\r\n                    ? opts.timeBtnText\r\n                    : "Select Time"\r\n            }}\r\n        </button>\r\n        <button\r\n            (click)="onClickOkBtn($event)"\r\n            class="btn btn-primary f-datepicker-makesure-btn"\r\n        >\r\n            {{ opts.commitBtnText ? opts.commitBtnText : "OK" }}\r\n        </button>\r\n    </div>\r\n    <span class="arrow"></span>\r\n</div>\r\n',providers:[se],encapsulation:d.ViewEncapsulation.None}]}],ce.ctorParameters=function(){return[{type:d.Renderer2},{type:d.ChangeDetectorRef},{type:se}]},ce.propDecorators={selectorEl:[{type:d.ViewChild,args:["selectorEl"]}],styleEl:[{type:d.ViewChild,args:["styleEl"]}],endTimeRef:[{type:d.ViewChild,args:["endTimeRef"]}],position:[{type:d.HostBinding,args:["style.position"]}]},ce);function ce(e,t,i){var r=this;this.renderer=e,this.cdr=t,this.utilService=i,this.position="static",this.visibleMonth={monthTxt:P,monthNbr:0,year:0,yearTxt:P},this.visibleMonth_range={monthTxt:P,monthNbr:0,year:0,yearTxt:P},this.selectedMonth={monthNbr:0,year:0},this.selectedMonth_range={monthNbr:0,year:0},this.selectedDate={year:0,month:0,day:0},this.selectedDateRange={begin:{year:0,month:0,day:0},end:{year:0,month:0,day:0}},this.selectedWeek={weekNbr:0,year:0},this.weekDays=[],this.dates=[],this.dates_range=[],this.months=[],this.months_range=[],this.years=[],this.years_range=[],this.dayIdx=0,this.weekDayOpts=[O,_,F,I,N,B,Y],this.selectMonth=!1,this.selectMonth_range=!1,this.selectYear=!1,this.selectYear_range=!1,this.selectTime=!1,this.selectorPos=null,this.scrollDiff=0,this.prevViewDisabled=!1,this.nextViewDisabled=!1,this.prevDobViewDisabled=!1,this.nextDobViewDisabled=!1,this.prevViewDisabled_range=!1,this.nextViewDisabled_range=!1,this.prevDobViewDisabled_range=!1,this.nextDobViewDisabled_range=!1,this.disabledHours=function(){var e=r.opts.disableUntil,t=r.opts.disableSince,i=r.opts.dateRange?r.selectedDateRange.begin:r.selectedDate;return r.utilService.disabledHours(e,t,i)},this.disabledMinutes=function(e){var t=r.opts.disableUntil,i=r.opts.disableSince,n=r.opts.dateRange?r.selectedDateRange.begin:r.selectedDate;return r.utilService.disabledMinutes(t,i,e,n)},this.disabledSeconds=function(e,t){var i=r.opts.disableUntil,n=r.opts.disableSince,a=r.opts.dateRange?r.selectedDateRange.begin:r.selectedDate;return r.utilService.disabledSeconds(i,n,e,t,a)}}var ue=(pe.prototype.ngOnChanges=function(e){e.hasOwnProperty(K)&&(this.opts=e[K].currentValue),e.hasOwnProperty(U)&&(this.years=e[U].currentValue),e.hasOwnProperty(Z)&&(this.visibleMonth=e[Z].currentValue),e.hasOwnProperty(q)&&(this.selectMonth=e[q].currentValue),e.hasOwnProperty(J)&&(this.selectYear=e[J].currentValue),e.hasOwnProperty(G)&&(this.prevViewDisabled=e[G].currentValue),e.hasOwnProperty(X)&&(this.nextViewDisabled=e[X].currentValue)},pe.prototype.onPrevNavigateBtnClicked=function(e){e.stopPropagation(),this.prevViewDisabled||this.prevNavigateBtnClicked.emit(!0)},pe.prototype.onNextNavigateBtnClicked=function(e){e.stopPropagation(),this.nextViewDisabled||this.nextNavigateBtnClicked.emit(!0)},pe.prototype.onPrevDobNavigateBtnClicked=function(e){e.stopPropagation(),this.prevDobViewDisabled||this.prevNavigateBtnClicked.emit(!1)},pe.prototype.onNextDobNavigateBtnClicked=function(e){e.stopPropagation(),this.nextDobViewDisabled||this.nextNavigateBtnClicked.emit(!1)},pe.prototype.onMonthViewBtnClicked=function(e){e.stopPropagation(),this.monthViewBtnClicked.emit()},pe.prototype.onYearViewBtnClicked=function(e){e.stopPropagation(),this.yearViewBtnClicked.emit()},pe.prototype.onTodayViewBtnClicked=function(e){e.stopPropagation(),this.todayViewBtnClicked.emit()},pe.prototype.getFormateType=function(){var e=this.opts.dateFormat?this.opts.dateFormat.indexOf(k):0;return(this.opts.dateFormat?this.opts.dateFormat.indexOf(S):0)<e?"MM-"+k:k+"-"+S},pe.decorators=[{type:d.Component,args:[{selector:"lib-selection-bar",template:'<div\r\n    class="f-datepicker-header"\r\n    [ngClass]="{ monthYearSelBarBorder: selectMonth || selectYear }"\r\n>\r\n    <div class="f-datepicker-prev-btn">\r\n        <button\r\n            type="button"\r\n            class="f-datepicker-header-btn"\r\n            (click)="onPrevDobNavigateBtnClicked($event)"\r\n            [ngClass]="{\r\n                \'f-datepicker-header-btn-disabled\': prevDobViewDisabled\r\n            }"\r\n        >\r\n            <i class="k-icon k-i-arrow-double-60-left"></i>\r\n        </button>\r\n        <button\r\n            type="button"\r\n            *ngIf="!selectMonth && !selectYear"\r\n            [attr.aria-label]="opts.ariaLabelPrevMonth"\r\n            class="f-datepicker-header-btn"\r\n            (click)="onPrevNavigateBtnClicked($event)"\r\n            [ngClass]="{ \'f-datepicker-header-btn-disabled\': prevViewDisabled }"\r\n        >\r\n            <i class="k-icon k-i-arrow-chevron-left"></i>\r\n        </button>\r\n    </div>\r\n    <div class="f-datepicker-monthYearText">\r\n        <ng-container *ngIf="getFormateType() === \'yyyy-MM\'; else elseTemplate">\r\n            <button\r\n                type="button"\r\n                class="f-datepicker-header-btn"\r\n                (click)="opts.yearSelector && onYearViewBtnClicked($event)"\r\n                tabindex="{{ opts.yearSelector ? \'0\' : \'-1\' }}"\r\n                [disabled]="opts.showType === 3"\r\n                [ngClass]="{\r\n                    \'f-datepicker-yearLabel\': opts.yearSelector,\r\n                    \'f-datepicker-labelBtnNotEdit\': !opts.yearSelector\r\n                }"\r\n            >\r\n                {{\r\n                    !selectYear\r\n                        ? visibleMonth.year + visibleMonth.yearTxt \r\n                        : years[0][1].year + \' - \' + years[3][1].year\r\n                }}\r\n            </button>\r\n            <button\r\n                type="button"\r\n                class="f-datepicker-header-btn"\r\n                *ngIf="!selectYear && opts.showType !== 2"\r\n                (click)="opts.monthSelector && onMonthViewBtnClicked($event)"\r\n                tabindex="{{ opts.monthSelector ? \'0\' : \'-1\' }}"\r\n                [ngClass]="{\r\n                    \'f-datepicker-monthLabel\': opts.monthSelector,\r\n                    \'f-datepicker-labelBtnNotEdit\': !opts.monthSelector\r\n                }"\r\n            >\r\n                {{ visibleMonth.monthTxt }}\r\n            </button>\r\n        </ng-container>\r\n        <ng-template #elseTemplate>\r\n            <button\r\n                type="button"\r\n                class="f-datepicker-header-btn"\r\n                *ngIf="!selectYear"\r\n                (click)="opts.monthSelector && onMonthViewBtnClicked($event)"\r\n                tabindex="{{ opts.monthSelector ? \'0\' : \'-1\' }}"\r\n                [ngClass]="{\r\n                    \'f-datepicker-monthLabel\': opts.monthSelector,\r\n                    \'f-datepicker-labelBtnNotEdit\': !opts.monthSelector\r\n                }"\r\n            >\r\n                {{ visibleMonth.monthTxt }}\r\n            </button>\r\n            <button\r\n                type="button"\r\n                class="f-datepicker-header-btn"\r\n                (click)="opts.yearSelector && onYearViewBtnClicked($event)"\r\n                tabindex="{{ opts.yearSelector ? \'0\' : \'-1\' }}"\r\n                [ngClass]="{\r\n                    \'f-datepicker-yearLabel\': opts.yearSelector,\r\n                    \'f-datepicker-labelBtnNotEdit\': !opts.yearSelector\r\n                }"\r\n            >\r\n                {{\r\n                    !selectYear\r\n                        ? visibleMonth.year + visibleMonth.yearTxt\r\n                        : years[0][1].year + \' - \' + years[3][1].year\r\n                }}\r\n            </button>\r\n        </ng-template>\r\n    </div>\r\n    <div class="f-datepicker-next-btn">\r\n        <button\r\n            type="button"\r\n            *ngIf="!selectMonth && !selectYear"\r\n            [attr.aria-label]="opts.ariaLabelNextMonth"\r\n            class="f-datepicker-header-btn"\r\n            (click)="onNextNavigateBtnClicked($event)"\r\n            [ngClass]="{ \'f-datepicker-header-btn-disabled\': nextViewDisabled }"\r\n        >\r\n            <i class="k-icon k-i-arrow-chevron-right"></i>\r\n        </button>\r\n        <button\r\n            type="button"\r\n            class="f-datepicker-header-btn"\r\n            (click)="onNextDobNavigateBtnClicked($event)"\r\n            [ngClass]="{\r\n                \'f-datepicker-header-btn-disabled\': nextDobViewDisabled\r\n            }"\r\n        >\r\n            <i class="k-icon k-i-arrow-double-60-right"></i>\r\n        </button>\r\n    </div>\r\n</div>\r\n',encapsulation:d.ViewEncapsulation.None}]}],pe.ctorParameters=function(){return[]},pe.propDecorators={opts:[{type:d.Input}],years:[{type:d.Input}],visibleMonth:[{type:d.Input}],selectMonth:[{type:d.Input}],selectYear:[{type:d.Input}],selectToday:[{type:d.Input}],prevViewDisabled:[{type:d.Input}],nextViewDisabled:[{type:d.Input}],prevDobViewDisabled:[{type:d.Input}],nextDobViewDisabled:[{type:d.Input}],prevNavigateBtnClicked:[{type:d.Output}],nextNavigateBtnClicked:[{type:d.Output}],monthViewBtnClicked:[{type:d.Output}],yearViewBtnClicked:[{type:d.Output}],todayViewBtnClicked:[{type:d.Output}]},pe);function pe(){this.prevNavigateBtnClicked=new d.EventEmitter,this.nextNavigateBtnClicked=new d.EventEmitter,this.monthViewBtnClicked=new d.EventEmitter,this.yearViewBtnClicked=new d.EventEmitter,this.todayViewBtnClicked=new d.EventEmitter}var ge=(ye.prototype.ngOnChanges=function(e){e.hasOwnProperty(K)&&(this.opts=e[K].currentValue),e.hasOwnProperty(Q)&&(this.dates=e[Q].currentValue),e.hasOwnProperty(ee)&&(this.weekDays=e[ee].currentValue),e.hasOwnProperty(te)&&(this.selectedDate=e[te].currentValue),e.hasOwnProperty(ie)&&(this.selectedDateRange=e[ie].currentValue)},ye.prototype.onDayCellClicked=function(e,t){t.disabled||4===this.opts.showType||(e.stopPropagation(),this.dayCellClicked.emit(t))},ye.prototype.onDayCellKeyDown=function(e,t){var i=this.utilService.getKeyCodeFromEvent(e);i!==c.tab&&(e.preventDefault(),i===c.enter||i===c.space?this.onDayCellClicked(e,t):this.opts.moveFocusByArrowKeys&&this.dayCellKeyDown.emit(t))},ye.prototype.onWeekClicked=function(e,t){4===this.opts.showType&&(e.stopPropagation(),this.weekClicked.emit(t))},ye.prototype.onDayCellMouseEnter=function(e){var t,i,n,a;if(this.utilService.isInitializedDate(this.selectedDateRange.begin)&&(!this.utilService.isInitializedDate(this.selectedDateRange.end)||JSON.stringify(this.selectedDateRange.begin)===JSON.stringify(this.selectedDateRange.end))){try{for(var r=E(this.dates),s=r.next();!s.done;s=r.next()){var o=s.value;try{for(var l=E(o.week),h=l.next();!h.done;h=l.next()){var d=h.value;d.range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,d.dateObj)&&this.utilService.isDateSameOrEarlier(d.dateObj,e.dateObj)||this.utilService.isDateSameOrEarlier(d.dateObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.dateObj,d.dateObj)}}catch(c){n={error:c}}finally{try{h&&!h.done&&(a=l["return"])&&a.call(l)}finally{if(n)throw n.error}}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(i=r["return"])&&i.call(r)}finally{if(t)throw t.error}}this.onMouseEnter.emit(e)}},ye.prototype.onDayCellMouseLeave=function(){var e,t,i,n;try{for(var a=E(this.dates),r=a.next();!r.done;r=a.next()){var s=r.value;try{for(var o=E(s.week),l=o.next();!l.done;l=o.next())l.value.range=!1}catch(h){i={error:h}}finally{try{l&&!l.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}}}catch(d){e={error:d}}finally{try{r&&!r.done&&(t=a["return"])&&t.call(a)}finally{if(e)throw e.error}}this.onMouseLeave.emit()},ye.prototype.isDateInRange=function(e){return this.utilService.isDateInRange(e,this.selectedDateRange)},ye.prototype.isDateSame=function(e){return this.utilService.isDateSame({year:this.selectedDate.year,month:this.selectedDate.month,day:this.selectedDate.day},e)},ye.prototype.isDateRangeBeginOrEndSame=function(e){var t={begin:{year:this.selectedDateRange.begin.year,month:this.selectedDateRange.begin.month,day:this.selectedDateRange.begin.day},end:{year:this.selectedDateRange.end.year,month:this.selectedDateRange.end.month,day:this.selectedDateRange.end.day}};return this.utilService.isDateRangeBeginOrEndSame(t,e)},ye.decorators=[{type:d.Component,args:[{selector:"lib-day-view",template:'<div class="f-datepicker-table-wrapper">\r\n    <table class="f-datepicker-table" cellpadding="0">\r\n        <thead>\r\n            <tr>\r\n                <th\r\n                    class="f-datepicker-weeknbr-title"\r\n                    *ngIf="opts.showWeekNumbers && opts.firstDayOfWeek === \'mo\'"\r\n                >\r\n                    {{ opts.weekText ? opts.weekText : \'Week\'}}\r\n                </th>\r\n                <th\r\n                    scope="col"\r\n                    *ngFor="let d of weekDays"\r\n                    style="padding-bottom: 8px;padding-top: 4px"\r\n                >\r\n                    {{ d }}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr\r\n                *ngFor="let w of dates; let di = index"\r\n                [ngClass]="{\r\n                    \'f-datepicker-selectWeek\': opts.showType === 4,\r\n                    \'f-datepicker-selectedWeek\':\r\n                        opts.showType === 4 &&\r\n                        w.weekNbr === selectedWeek.weekNbr &&\r\n                        w.year === selectedWeek.year\r\n                }"\r\n                (click)="onWeekClicked($event, w)"\r\n            >\r\n                <td\r\n                    class="f-datepicker-weeknbr"\r\n                    *ngIf="opts.showWeekNumbers && opts.firstDayOfWeek === \'mo\'"\r\n                >\r\n                    <div class="f-datepicker-date">{{ w.weekNbr }}</div>\r\n                </td>\r\n                <td\r\n                    id="d_{{ di }}_{{ i }}"\r\n                    class="d_{{ di }}_{{ i }} "\r\n                    *ngFor="let d of w.week; let i = index"\r\n                    [ngClass]="{\r\n                        \'f-datepicker-range\':\r\n                            opts.showType !== 4 && d.cmo === currMonthId &&\r\n                            ((this.opts.dateRange &&\r\n                                isDateInRange(d.dateObj) &&\r\n                                !isDateRangeBeginOrEndSame(d.dateObj)) ||\r\n                                d.range),\r\n                        \'f-datepicker-no-currmonth\':\r\n                            d.cmo === prevMonthId || d.cmo === nextMonthId,\r\n                        \'f-datepicker-disabled\': d.disabled,\r\n                        \'f-datepicker-singledate\': !d.disabled\r\n                    }"\r\n                    (click)="onDayCellClicked($event, d)"\r\n                    (keydown)="onDayCellKeyDown($event, d)"\r\n                    (mouseenter)="onDayCellMouseEnter(d)"\r\n                    (mouseleave)="onDayCellMouseLeave()"\r\n                    tabindex="0"\r\n                >\r\n                    <span\r\n                        *ngIf="d.markedDate.marked"\r\n                        class="f-datepicker-markdate"\r\n                        [ngStyle]="{ \'background-color\': d.markedDate.color }"\r\n                    ></span>\r\n                    <div\r\n                        class="f-datepicker-date"\r\n                        [ngClass]="{\r\n                            \'f-datepicker-selected\':\r\n                                opts.showType !== 4 &&\r\n                                d.cmo === currMonthId &&\r\n                                ((!this.opts.dateRange &&\r\n                                    isDateSame(d.dateObj)) ||\r\n                                    (this.opts.dateRange &&\r\n                                        isDateRangeBeginOrEndSame(d.dateObj))),\r\n                            \'f-datepicker-current\':\r\n                                d.currDay && opts.markCurrentDay,\r\n                            \'f-datepicker-opacity\':\r\n                                d.highlight &&\r\n                                (d.cmo === prevMonthId ||\r\n                                    d.cmo === nextMonthId ||\r\n                                    d.disabled),\r\n                            \'f-datepicker-highlight\': d.highlight,\r\n                            \'f-datepicker-disabled\': d.disabled\r\n                        }"\r\n                    >\r\n                        {{ d.dateObj.day }}\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n',providers:[se],encapsulation:d.ViewEncapsulation.None}]}],ye.ctorParameters=function(){return[{type:se}]},ye.propDecorators={opts:[{type:d.Input}],dates:[{type:d.Input}],weekDays:[{type:d.Input}],selectedDate:[{type:d.Input}],selectedDateRange:[{type:d.Input}],selectedWeek:[{type:d.Input}],dayCellClicked:[{type:d.Output}],dayCellKeyDown:[{type:d.Output}],weekClicked:[{type:d.Output}],onMouseEnter:[{type:d.Output}],onMouseLeave:[{type:d.Output}]},ye);function ye(e){this.utilService=e,this.dayCellClicked=new d.EventEmitter,this.dayCellKeyDown=new d.EventEmitter,this.weekClicked=new d.EventEmitter,this.onMouseEnter=new d.EventEmitter,this.onMouseLeave=new d.EventEmitter,this.prevMonthId=f.prev,this.currMonthId=f.curr,this.nextMonthId=f.next}var me=(ve.prototype.ngOnChanges=function(e){e.hasOwnProperty(K)&&(this.opts=e[K].currentValue),e.hasOwnProperty(ne)&&(this.months=e[ne].currentValue)},ve.prototype.onMonthCellClicked=function(e,t){e.stopPropagation(),t.disabled||this.monthCellClicked.emit(t)},ve.prototype.onMonthCellKeyDown=function(e,t){var i=this.utilService.getKeyCodeFromEvent(e);i!==c.tab&&(e.preventDefault(),i===c.enter||i===c.space?this.onMonthCellClicked(e,t):this.opts.moveFocusByArrowKeys&&this.monthCellKeyDown.emit(t))},ve.prototype.onMonthCellMouseEnter=function(e){if(this.utilService.isInitializedDate(this.selectedDateRange.begin)&&!this.utilService.isInitializedDate(this.selectedDateRange.end)){for(var t=0;t<this.months.length;t++)for(var i=this.months[t].row,n=0;n<i.length;n++){var a=i[n];a.range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,a.monthObj)&&this.utilService.isDateSameOrEarlier(a.monthObj,e.monthObj)||this.utilService.isDateSameOrEarlier(a.monthObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.monthObj,a.monthObj)}this.onMouseEnter.emit(e)}},ve.prototype.onMonthCellMouseLeave=function(){for(var e=0;e<this.months.length;e++)for(var t=this.months[e].row,i=0;i<t.length;i++)t[i].range=!1;this.onMouseLeave.emit()},ve.prototype.isMonthInRange=function(e){return this.utilService.isDateInRange(e,this.selectedDateRange)},ve.prototype.isMonthSame=function(e){return this.utilService.isDateSame({year:this.selectedDate.year,month:this.selectedDate.month},e)},ve.prototype.isMonthRangeBeginOrEndSame=function(e){return this.utilService.isDateRangeBeginOrEndSame(this.selectedDateRange,e)},ve.decorators=[{type:d.Component,args:[{selector:"lib-month-view",template:'<div class="f-datepicker-table-wrapper">\r\n    <table class="f-datepicker-table">\r\n        <tbody>\r\n            <tr *ngFor="let mr of months; let mi = index">\r\n                <td\r\n                    id="m_{{ mi }}_{{ i }}"\r\n                    class="m_{{ mi }}_{{ i }}"\r\n                    *ngFor="let m of mr.row; let i = index"\r\n                    (click)="onMonthCellClicked($event, m)"\r\n                    (keydown)="onMonthCellKeyDown($event, m)"\r\n                    (mouseenter)="onMonthCellMouseEnter(m)"\r\n                    (mouseleave)="onMonthCellMouseLeave()"\r\n                    tabindex="0"\r\n                    style="width: 33.3%"\r\n                >\r\n                    <div class="f-datepicker-month">\r\n                        <span\r\n                            class="f-datepicker-month-cell"\r\n                            [ngClass]="{\r\n                                \'f-datepicker-current\':\r\n                                    m.currMonth && opts.markCurrentMonth,\r\n                                \'f-datepicker-selected\':\r\n                                    (!this.opts.dateRange &&\r\n                                        isMonthSame(m.monthObj)) ||\r\n                                    (this.opts.dateRange &&\r\n                                        isMonthRangeBeginOrEndSame(m.monthObj)),\r\n                                \'f-datepicker-disabled\': m.disabled,\r\n                                \'f-datepicker-range\':\r\n                                    isMonthInRange(m.monthObj) || m.range\r\n                            }"\r\n                            >{{ m.name }}</span\r\n                        >\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n',providers:[se],encapsulation:d.ViewEncapsulation.None}]}],ve.ctorParameters=function(){return[{type:se}]},ve.propDecorators={opts:[{type:d.Input}],months:[{type:d.Input}],selectedDate:[{type:d.Input}],selectedDateRange:[{type:d.Input}],monthCellClicked:[{type:d.Output}],monthCellKeyDown:[{type:d.Output}],onMouseEnter:[{type:d.Output}],onMouseLeave:[{type:d.Output}]},ve);function ve(e){this.utilService=e,this.months=[],this.monthCellClicked=new d.EventEmitter,this.monthCellKeyDown=new d.EventEmitter,this.onMouseEnter=new d.EventEmitter,this.onMouseLeave=new d.EventEmitter}var fe=(De.prototype.ngOnInit=function(){},De.prototype.ngOnChanges=function(e){e.hasOwnProperty(K)&&(this.opts=e[K].currentValue),e.hasOwnProperty(U)&&(this.years=e[U].currentValue)},De.prototype.onYearCellClicked=function(e,t){e.stopPropagation(),t.disabled||this.yearCellClicked.emit(t)},De.prototype.onYearCellKeyDown=function(e,t){var i=this.utilService.getKeyCodeFromEvent(e);i!==c.tab&&(e.preventDefault(),i===c.enter||i===c.space?this.onYearCellClicked(e,t):this.opts.moveFocusByArrowKeys&&this.yearCellKeyDown.emit(t))},De.prototype.onPrevOrNextYearCellClicked=function(e,t){if(e.stopPropagation(),0===t){if(this.prevViewDisabled)return;this.prevCellClicked.emit(e)}else{if(this.nextViewDisabled)return;this.nextCellClicked.emit(e)}},De.prototype.onMonthCellMouseEnter=function(e){if(this.utilService.isInitializedDate(this.selectedDateRange.begin)&&!this.utilService.isInitializedDate(this.selectedDateRange.end)){for(var t=0;t<this.years.length;t++)for(var i=this.years[t],n=0;n<i.length;n++){var a=i[n];a.range=this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,a.yearObj)&&this.utilService.isDateSameOrEarlier(a.yearObj,e.yearObj)||this.utilService.isDateSameOrEarlier(a.yearObj,this.selectedDateRange.begin)&&this.utilService.isDateSameOrEarlier(e.yearObj,a.yearObj)}this.onMouseEnter.emit(e)}},De.prototype.onMonthCellMouseLeave=function(){for(var e=0;e<this.years.length;e++)for(var t=this.years[e],i=0;i<t.length;i++)t[i].range=!1;this.onMouseLeave.emit()},De.prototype.isMonthInRange=function(e){return this.utilService.isDateInRange(e,this.selectedDateRange)},De.prototype.isMonthSame=function(e){return this.utilService.isDateSame({year:this.selectedDate.year},e)},De.prototype.isMonthRangeBeginOrEndSame=function(e){return this.utilService.isDateSame({year:this.selectedDateRange.begin.year},e)||this.utilService.isDateSame({year:this.selectedDateRange.end.year},e)},De.decorators=[{type:d.Component,args:[{selector:"lib-year-view",template:'<table class="f-datepicker-table-wrapper">\r\n    <tbody class="f-datepicker-table">\r\n        <tr *ngFor="let yr of years; let yi = index">\r\n            <td\r\n                *ngFor="let y of yr; let i = index"\r\n                id="y_{{ yi }}_{{ i }}"\r\n                class="y_{{ yi }}_{{ i }} "\r\n                [ngClass]="{\r\n                    \'f-datepicker-no-currmonth\':\r\n                        (yi === 0 && i === 0) || (yi === 3 && i === 2)\r\n                }"\r\n                (click)="onYearCellClicked($event, y)"\r\n                (keydown)="onYearCellKeyDown($event, y)"\r\n                (mouseenter)="onMonthCellMouseEnter(y)"\r\n                (mouseleave)="onMonthCellMouseLeave()"\r\n                tabindex="0"\r\n            >\r\n                <div class="f-datepicker-year">\r\n                    <span\r\n                        class="f-datepicker-year-cell"\r\n                        [ngClass]="{\r\n                            \'f-datepicker-current\':\r\n                                y.currYear && opts.markCurrentYear,\r\n                            \'f-datepicker-selected\':\r\n                                (!this.opts.dateRange &&\r\n                                    isMonthSame(y.yearObj)) ||\r\n                                (this.opts.dateRange &&\r\n                                    isMonthRangeBeginOrEndSame(y.yearObj)),\r\n                            \'f-datepicker-disabled\': y.disabled,\r\n                            \'f-datepicker-range\':\r\n                                isMonthInRange(y.yearObj) || y.range\r\n                        }"\r\n                        >{{ y.year }}</span\r\n                    >\r\n                </div>\r\n            </td>\r\n            \x3c!-- <ng-container *ngFor="let y of yr; let i = index">\r\n                <ng-container\r\n                    *ngIf="\r\n                        (yi === 0 && i === 0) || (yi === 3 && i === 2);\r\n                        else elseTemplate\r\n                    "\r\n                >\r\n                    <td\r\n                        id="y_{{ yi }}_{{ i }}"\r\n                        class="y_{{ yi }}_{{ i }}"\r\n                        (click)="onPrevOrNextYearCellClicked($event, i)"\r\n                        (keydown)="onPrevOrNextYearCellKeyDown($event, i)"\r\n                        tabindex="0"\r\n                    >\r\n                        <div class="f-datepicker-year">\r\n                            <span\r\n                                class="f-datepicker-year-cell"\r\n                                [ngClass]="{\r\n                                    \'f-datepicker-disabled\':\r\n                                        (i === 0 && this.prevViewDisabled) ||\r\n                                        (i === 2 && this.nextViewDisabled)\r\n                                }"\r\n                                ><i\r\n                                    class="f-icon "\r\n                                    [ngClass]="{\r\n                                        \'k-i-arrow-chevron-left\': i === 0,\r\n                                        \'k-i-arrow-chevron-right\': i === 2\r\n                                    }"\r\n                                ></i>\r\n                            </span>\r\n                        </div>\r\n                    </td>\r\n                </ng-container>\r\n                <ng-template #elseTemplate>\r\n                    <td\r\n                        id="y_{{ yi }}_{{ i }}"\r\n                        class="y_{{ yi }}_{{ i }}"\r\n                        (click)="onYearCellClicked($event, y)"\r\n                        (keydown)="onYearCellKeyDown($event, y)"\r\n                        tabindex="0"\r\n                    >\r\n                        <div class="f-datepicker-year">\r\n                            <span\r\n                                class="f-datepicker-year-cell"\r\n                                [ngClass]="{\r\n                                    \'f-datepicker-current\':\r\n                                        y.currYear && opts.markCurrentYear,\r\n                                    \'f-datepicker-selected\': y.selected,\r\n                                    \'f-datepicker-disabled\': y.disabled\r\n                                }"\r\n                                >{{ y.year }}</span\r\n                            >\r\n                        </div>\r\n                    </td>\r\n                </ng-template>\r\n            </ng-container> --\x3e\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n',providers:[se],encapsulation:d.ViewEncapsulation.None}]}],De.ctorParameters=function(){return[{type:se}]},De.propDecorators={opts:[{type:d.Input}],years:[{type:d.Input}],prevViewDisabled:[{type:d.Input}],nextViewDisabled:[{type:d.Input}],selectedDate:[{type:d.Input}],selectedDateRange:[{type:d.Input}],yearCellClicked:[{type:d.Output}],yearCellKeyDown:[{type:d.Output}],prevCellClicked:[{type:d.Output}],nextCellClicked:[{type:d.Output}],onMouseEnter:[{type:d.Output}],onMouseLeave:[{type:d.Output}]},De);function De(e){this.utilService=e,this.yearCellClicked=new d.EventEmitter,this.yearCellKeyDown=new d.EventEmitter,this.prevCellClicked=new d.EventEmitter,this.nextCellClicked=new d.EventEmitter,this.onMouseEnter=new d.EventEmitter,this.onMouseLeave=new d.EventEmitter}var be={provide:i.NG_VALUE_ACCESSOR,useExisting:d.forwardRef(function(){return Ce}),multi:!0},we={provide:i.NG_VALIDATORS,useExisting:d.forwardRef(function(){return Ce}),multi:!0},Ce=(Se.prototype.onKeyUp=function(e){var t=this.utilService.getKeyCodeFromEvent(e);if(!this.ignoreKeyPress(t))if(t===c.esc)this.closeSelector(l.CloseByEsc);else{var i=this.elem.nativeElement.value,n=!1;if(this.opts.dateRange){var a=this.utilService.isDateValidDateRange(i,this.opts),r=a.begin,s=a.end;n=this.utilService.isInitializedDate(r)&&this.utilService.isInitializedDate(s)}else{var o=this.utilService.isDateValid(i,this.opts);n=this.utilService.isInitializedDate(o)}this.emitInputFieldChanged(i,n)}},Se.prototype.onBlur=function(){var e=this.opts,t=e.inputFieldValidation,i=e.dateRange;if(t){var n=this.elem.nativeElement.value,a=!1;if(i){var r=this.utilService.isDateValidDateRange(n,this.opts),s=r.begin,o=r.end;a=this.utilService.isInitializedDate(s)&&this.utilService.isInitializedDate(o)}else{var l=this.utilService.isDateValid(n,this.opts);a=this.utilService.isInitializedDate(l)}a||this.inputText===n||this.clearDate(),this.onChangeCb(n)}this.onTouchedCb()},Se.prototype.onClick=function(e){!this.opts.closeSelectorOnDocumentClick||this.preventClose||!e.target||null===this.cRef||this.elem.nativeElement===e.target||this.cRef.location.nativeElement.contains(e.target)||this.disabled||this.closeSelector(l.CloseByOutClick)},Se.prototype.ngOnChanges=function(e){if(e.hasOwnProperty("locale")&&this.setLocaleOptions(),e.hasOwnProperty(z)){var t=e[z].currentValue;"object"==typeof t&&(t=t.defMonth),this.defaultMonth=t}e.hasOwnProperty($)&&this.parseOptions(e[$].currentValue)},Se.prototype.ngOnDestroy=function(){this.closeCalendar()},Se.prototype.setLocaleOptions=function(){var t=this,i=this.localeService.getLocaleOptions(this.locale);Object.keys(i).forEach(function(e){t.opts[e]=i[e]})},Se.prototype.parseOptions=function(t){var i=this;t!==undefined&&Object.keys(t).forEach(function(e){t[e]!==undefined&&""!==t[e]&&(i.opts[e]=t[e])}),this.opts.minYear<g.min&&(this.opts.minYear=g.min),this.opts.maxYear>g.max&&(this.opts.maxYear=g.max)},Se.prototype.formatDate=function(e){var t=this.opts,i=t.dateRange,n=t.dateFormat,a=t.monthLabels,r=t.dateRangeDatesDelimiter,s=t.returnFormat;if(i){var o=this.utilService.isDateValidDateRange(e,this.opts);return this.utilService.getDateModel(null,o,n,a,r,s)}var l=this.utilService.isDateValid(e,this.opts);return this.utilService.getDateModel(l,null,n,a,r,s)},Se.prototype.writeValue=function(e){if(!this.disabled)if(e=e&&this.formatDate(e)){if(!1===e.isRange&&e.singleDate){var t=e.singleDate,i=t.date,n=t.formatted;(a=this.utilService.isInitializedDate(i))&&(this.setInputValue(n),this.emitInputFieldChanged(n,a),null!==this.cRef&&this.cRef.instance.resetDateValue(p.dateRange))}else if(!0===e.isRange&&e.dateRange){var a,r=e.dateRange,s=r.beginDate,o=r.endDate;n=r.formatted,s&&o&&(a=this.utilService.isInitializedDate(s)&&this.utilService.isInitializedDate(o))&&(this.setInputValue(n),this.emitInputFieldChanged(n,a),null!==this.cRef&&this.cRef.instance.resetDateValue(p.singleDate))}}else this.setInputValue(P),this.emitInputFieldChanged(P,!1),null!==this.cRef&&this.cRef.instance.resetDateValue(p.both)},Se.prototype.registerOnChange=function(e){this.onChangeCb=e},Se.prototype.registerOnTouched=function(e){this.onTouchedCb=e},Se.prototype.setDisabledState=function(e){this.disabled=e,this.renderer.setProperty(this.elem.nativeElement,H,e),e&&this.closeCalendar()},Se.prototype.validate=function(e){return null},Se.prototype.openCalendar=function(){var i=this;this.disabled||(this.preventClose=!0,this.cdr.detectChanges(),null===this.cRef?(this.cRef=this.vcRef.createComponent(this.cfr.resolveComponentFactory(de)),this.appendSelector(this.cRef.location.nativeElement),this.cRef.instance.initialize(this.opts,this.defaultMonth,this.getSelectorPosition(this.elem.nativeElement),this.elem.nativeElement.value,function(e,t){i.focusToInput(),i.updateModel(e),t&&i.closeSelector(l.CloseByDateSel),i.emitDateChanged(e),i.emitInputFieldChanged(i.utilService.getFormattedDate(e),!0)},function(e){i.emitCalendarChanged(e)},function(e){i.emitRangeDateSelection(e)},function(){i.closeSelector(l.CloseByEsc)}),this.emitCalendarToggle(l.Open),this.cdr.detectChanges()):this.appendSelector(this.cRef.location.nativeElement),this.preventClose=!1)},Se.prototype.closeCalendar=function(){this.closeSelector(l.CloseByCalBtn)},Se.prototype.toggleCalendar=function(e){var t=this;if(e.stopPropagation(),!this.disabled)if(null===this.cRef){document.addEventListener(L,this.onClickWrapper,!0),this.openCalendar();var i=document.querySelector(".date-overlay-container");this.renderer.setStyle(i,"pointer-events","auto")}else{var n=!0;(i=document.querySelector(".date-overlay-container"))&&this.cRef.location&&i.hasChildNodes()&&i.childNodes.forEach(function(e){e===t.cRef.location.nativeElement&&(n=!1)}),n?(this.renderer.setStyle(i,"pointer-events","auto"),this.openCalendar()):(document.removeEventListener(L,this.onClickWrapper),this.closeSelector(l.CloseByCalBtn),this.renderer.setStyle(i,"pointer-events",""))}},Se.prototype.clearDate=function(){this.disabled||(this.setInputValue(P),this.emitDateChanged({isRange:this.opts.dateRange,singleDate:{date:this.utilService.resetDate(),jsDate:null,formatted:P,epoc:0},dateRange:{beginDate:this.utilService.resetDate(),beginJsDate:null,beginEpoc:0,endDate:this.utilService.resetDate(),endJsDate:null,endEpoc:0,formatted:P}}),this.onChangeCb(null),this.onTouchedCb(),this.closeSelector(l.CloseByCalBtn))},Se.prototype.isDateValid=function(){var e=this.elem.nativeElement.value;if(e!==P){var t=this.utilService.isDateValid(e,this.opts);if(this.utilService.isInitializedDate(t))return this.emitInputFieldChanged(e,!0),!0}return this.emitInputFieldChanged(e,!1),!1},Se.prototype.ignoreKeyPress=function(e){return e===c.leftArrow||e===c.rightArrow||e===c.upArrow||e===c.downArrow||e===c.shift},Se.prototype.closeSelector=function(e){if(null!==this.cRef){this.vcRef.remove(this.vcRef.indexOf(this.cRef.hostView)),this.cRef=null,this.cdr.detectChanges(),this.emitCalendarToggle(e);var t=document.querySelector(".date-overlay-container");this.renderer.setStyle(t,"pointer-events","")}},Se.prototype.updateModel=function(e){this.setInputValue(this.utilService.getFormattedDate(e)),this.onChangeCb(this.utilService.getFormattedDate(e)),this.onTouchedCb()},Se.prototype.setInputValue=function(e){this.inputText=e,this.renderer.setProperty(this.elem.nativeElement,"value",e)},Se.prototype.focusToInput=function(){this.opts.focusInputOnDateSelect&&this.elem.nativeElement.focus()},Se.prototype.emitDateChanged=function(e){this.dateChanged.emit(e)},Se.prototype.emitInputFieldChanged=function(e,t){this.inputFieldChanged.emit({value:e,dateFormat:this.opts.dateFormat,valid:t})},Se.prototype.emitCalendarChanged=function(e){this.calendarViewChanged.emit(e)},Se.prototype.emitRangeDateSelection=function(e){this.rangeDateSelection.emit(e)},Se.prototype.emitCalendarToggle=function(e){this.calendarToggle.emit(e)},Se.prototype.jsDateToMyDate=function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},Se.prototype.appendSelector=function(t){var i=document.querySelector(".date-overlay-container");i?i.hasChildNodes()&&i.childNodes.forEach(function(e){e!==t&&i.removeChild(e)}):((i=document.createElement("div")).classList.add("date-overlay-container"),i.classList.add("overlay-container"),document.body.appendChild(i)),i.appendChild(t)},Se.prototype.getSelectorPosition=function(e){var t=0,i=0,n=0,a=0,r=this.opts,s=r.selectorHeight,o=r.selectorWidth,l=r.showTime,h=r.dateRange,d=document.body.getBoundingClientRect(),c=e.getBoundingClientRect();t=c.top-d.top,i=c.left-d.left;var u="bottom";return a=h?2*this.getSelectorDimension(o):this.getSelectorDimension(o),n=l?this.getSelectorDimension(s)+36:this.getSelectorDimension(s),t+e.offsetHeight+n>window.innerHeight&&0<t-n-2?(t=t-n-2,u="top"):t=t+e.offsetHeight+2,i+a>d.width&&(i=d.width-a-15),{top:t,left:i=0<i?i:0,position:u}},Se.prototype.getSelectorDimension=function(e){return Number(e.replace("px",P))},Se.decorators=[{type:d.Directive,args:[{selector:"[farris-datepicker]",exportAs:"farris-datepicker",providers:[se,ae,y,be,we]}]}],Se.ctorParameters=function(){return[{type:ae},{type:se},{type:d.ViewContainerRef},{type:d.ComponentFactoryResolver},{type:d.Renderer2},{type:d.ChangeDetectorRef},{type:d.ElementRef},{type:y},{type:d.NgZone}]},Se.propDecorators={options:[{type:d.Input}],locale:[{type:d.Input}],defaultMonth:[{type:d.Input}],dateChanged:[{type:d.Output}],inputFieldChanged:[{type:d.Output}],calendarViewChanged:[{type:d.Output}],calendarToggle:[{type:d.Output}],rangeDateSelection:[{type:d.Output}],onKeyUp:[{type:d.HostListener,args:[A,["$event"]]}],onBlur:[{type:d.HostListener,args:[W]}]},Se);function Se(e,t,i,n,a,r,s,o,l){var h=this;this.localeService=e,this.utilService=t,this.vcRef=i,this.cfr=n,this.renderer=a,this.cdr=r,this.elem=s,this.config=o,this.zone=l,this.dateChanged=new d.EventEmitter,this.inputFieldChanged=new d.EventEmitter,this.calendarViewChanged=new d.EventEmitter,this.calendarToggle=new d.EventEmitter,this.rangeDateSelection=new d.EventEmitter,this.cRef=null,this.inputText="",this.preventClose=!1,this.disabled=!1,this.onChangeCb=function(){},this.onTouchedCb=function(){},this.onClickWrapper=function(e){h.onClick(e)},this.opts=this.config.getDefaultConfig(),this.parseOptions(this.opts)}var Me={provide:i.NG_VALUE_ACCESSOR,useExisting:d.forwardRef(function(){return ke}),multi:!0},ke=(Object.defineProperty(Re.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){var t=this;if(e){var i=(e=(e=e.replace(/^\s+|\s+$/g,"")).replace(/\s+/g," ")).split(" ");this._dateFormat=i[0],3===i.length?this._timeFormat="h:mm:ss a":this._timeFormat=i[1]}if(this._dateFormat){var n=["yyyy-mm","yyyy/mm","yyyy年mm","mm/yyyy"].find(function(e){return t._dateFormat.includes(e)});n&&(this._dateFormat=this._dateFormat.replace(n,n.replace(/m/g,"M"))),this._timeFormat&&this.showTime&&(this._dateFormat+=" "+this._timeFormat,-1<this._timeFormat.indexOf("时")&&(this._timeFormat=this._timeFormat.replace("时",":").replace("分",":").replace("秒","")))}},enumerable:!0,configurable:!0}),Object.defineProperty(Re.prototype,"minDate",{get:function(){return this._minDate},set:function(e){var t;switch(Object.prototype.toString.call(e)){case"[object Date]":t=e;break;case"[object String]":t=e?new Date(e):new Date(1840,1,1,0,0,0);break;case"[object Null]":case"[object Undefined]":default:t=new Date(1840,1,1,0,0,0)}if(h.isValid(t)){var i=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),r=t.getHours(),s=t.getMinutes(),o=t.getSeconds();this._minDate={year:i,month:n,day:a,hour:r,minute:s,second:o}}},enumerable:!0,configurable:!0}),Object.defineProperty(Re.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){var t;switch(Object.prototype.toString.call(e)){case"[object Date]":t=e;break;case"[object String]":t=e?new Date(e):new Date(1e4,1,1,0,0,0);break;case"[object Null]":case"[object Undefined]":default:t=new Date(1e4,1,1,0,0,0)}if(h.isValid(t)){var i=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),r=t.getHours(),s=t.getMinutes(),o=t.getSeconds();this._maxDate={year:i,month:n,day:a,hour:r,minute:s,second:o}}},enumerable:!0,configurable:!0}),Object.defineProperty(Re.prototype,"beginValue",{get:function(){return this.dateFrom(this._beginValue,!0)},set:function(e){(e=e||"")instanceof Date?(e=this.dateTo(e),this.returnType="Date"):(-1<e.indexOf("T")&&(e=e.replace("T"," ")),this.returnType="String"),this._beginValue=e,this._initFinished&&this.setValue(this._beginValue+this.dateRangeDatesDelimiter+this._endValue)},enumerable:!0,configurable:!0}),Object.defineProperty(Re.prototype,"endValue",{get:function(){return this.dateFrom(this._endValue,!0)},set:function(e){(e=e||"")instanceof Date?(e=this.dateTo(e),this.returnType="Date"):(-1<e.indexOf("T")&&(e=e.replace("T"," ")),this.returnType="String"),this._endValue=e,this._initFinished&&this.setValue(this._beginValue+this.dateRangeDatesDelimiter+this._endValue)},enumerable:!0,configurable:!0}),Object.defineProperty(Re.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e||""},enumerable:!0,configurable:!0}),Re.prototype.ngOnInit=function(){this._ngControl=this.injector.get(i.NgControl,null),this.initPlaceholder(),this.mergeDateOptions(),this._beginValue&&this._endValue&&this.setValue(this._beginValue+this.dateRangeDatesDelimiter+this._endValue),this._initFinished=!0,this.datePicekrService=new le(this.dateOpts)},Re.prototype.initPlaceholder=function(){this.localeService&&(this.locale=this.localeService.getValue("locale"),this.localDateOpts=this.localeConfig.getLocaleOptions(this.locale),this.placeholder=this.placeholder?this.placeholder:this.localDateOpts.placeholder?this.localDateOpts.placeholder:"请选择日期",this.beginPlaceholder||(this.beginPlaceholder=this.localDateOpts.range.begin||this.placeholder),this.endPlaceholder||(this.endPlaceholder=this.localDateOpts.range.end||this.placeholder))},Re.prototype.mergeDateOptions=function(){this.dateOpts=m({},this.defaultConfig,this.buildOptions()),this.dateOpts.dateFormat&&(this._dateFormat||(this.dateFormat=this.dateOpts.dateFormat,this.dateOpts.dateFormat=this.dateFormat)),this.dateOpts.returnFormat&&(this.returnFormat||(this.returnFormat=this.dateOpts.returnFormat))},Re.prototype.ngOnChanges=function(t){var i=this;if(t.locale&&t.locale.isFirstChange()&&(this.localDateOpts=this.localeConfig.getLocaleOptions(this.locale)),t){var n=!1,a=["showTime","showType","dateRange","maxDate","minDate","monthRangeValue"];Object.keys(t).forEach(function(e){t[e].isFirstChange()||!i.dateOpts[e]&&!a.includes(e)||(n=!0)}),n&&(this.dateOpts=m({},this.defaultConfig,this.buildOptions()))}!t.readonly||t.readonly.currentValue||t.readonly.firstChange||this.value||!this.useDefault||this.setDefaultValue()},Re.prototype.ngAfterViewInit=function(){var e=this;this._ngControl&&this._ngControl.control&&(this._updateOn=this._ngControl.control.updateOn),this._timer=setTimeout(function(){e.setDefaultValue()})},Re.prototype.ngOnDestroy=function(){clearTimeout(this._timer),this.closeSelector()},Re.prototype.onMouseEnter=function(e){!this.value||this.readonly||this.disabled||(this.value&&(this.clearIcon.nativeElement.style.visibility=""),this.dateOpts.dateRange?this.dateOpts.showTime?this.isActiveTip=this.el.nativeElement.getBoundingClientRect().width<300:this.isActiveTip=this.el.nativeElement.getBoundingClientRect().width<190:this.dateOpts.showTime?this.isActiveTip=this.el.nativeElement.getBoundingClientRect().width<170:this.isActiveTip=this.el.nativeElement.getBoundingClientRect().width<120)},Re.prototype.onMouseLeave=function(e){this.readonly||this.disabled||(this.clearIcon.nativeElement.style.visibility="hidden")},Re.prototype.onBlur=function(e){var t=this,i=!(this.totalFocus=!1);if(this.value)try{this.value=this.transform(this.value),this._isValid(this.value)||(this.clearDate(),i=!1)}catch(e){this.clearDate(),i=!1}var n=function(){t._valueChangeEmitted||(t.onNgModelChange(t.value,null,!0),t.onModelTouched())};this.editable&&i&&(this.inDatagrid?n():setTimeout(n,250)),this._valueChangeEmitted=!1,this._mousedownEvent(),this._mousedownEvent=null,this.blur.emit()},Re.prototype.onFocus=function(e){this.totalFocus=!0,this.registerMouseDownHandle(),this.focus.emit()},Re.prototype.onInputClick=function(e){e.stopPropagation(),this.readonly||this.disabled||(this.registerMouseDownHandle(),this.toggleCalendar(!1))},Re.prototype.registerMouseDownHandle=function(){var t=this;this._mousedownEvent||(this._mousedownEvent=this.renderer.listen(document,"mousedown",function(e){(e.target.closest(".f-cmp-datepicker")||e.target.closest(".f-datepicker-container")||-1<e.target.className.indexOf("f-icon-date"))&&(t.dateInput&&t.renderer.setStyle(t.dateInput.nativeElement,"unselectable","on"),e.preventDefault())}))},Re.prototype.setDefaultValue=function(){if(!this.readonly&&!this.value&&this.useDefault){var e=new Date,t="";t=this.dateOpts.dateRange?this.dateTo(e)+this.dateRangeDatesDelimiter+this.dateTo(new Date(e.setMonth(e.getMonth()+1))):this.dateTo(e),this.datePicekrService.validate(t)&&(this.value=t,this.onNgModelChange(this.value),this.onModelTouched())}},Re.prototype.clearDate=function(e){void 0===e&&(e=null),e&&e.stopPropagation(),this.disabled||(this._realRangeValue=null,this._realValue=null,this.onDateChanged({isRange:this.dateOpts.dateRange,singleDate:{date:this.utilService.resetDate(),jsDate:null,formatted:P,epoc:0},dateRange:{beginDate:this.utilService.resetDate(),beginJsDate:null,beginEpoc:0,endDate:this.utilService.resetDate(),endJsDate:null,endEpoc:0,formatted:P}}),this.closeSelector(l.CloseByCalBtn),this.onModelChange(null),this.clear.emit(),this.clearIcon&&(this.clearIcon.nativeElement.style.visibility="hidden"))},Re.prototype.onSingleInputNgModelChange=function(e){this.value=e||"",this._realValue=this.value?this.dateFrom(e):"",this.closeSelector()},Re.prototype.onNgModelChange=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!1),this.dateRange||this.showType==V.selectWeek){var n=e?e.split(this.dateRangeDatesDelimiter):["",""],a=this.transform(n[0],this.returnFormat),r=this.transform(n[1],this.returnFormat);this._beginValue=this.transform(n[0]),this._endValue=this.transform(n[1]),e=a&&r?a+this.dateRangeDatesDelimiter+r:"",this._realRangeValue=e,this.onModelChange(e),this.cdr.detectChanges(),this.beginValueChange.emit(this._beginValue),this.endValueChange.emit(this._endValue);var s={date:null,formatted:this.value,returnFormatted:this._realRangeValue,cmpRef:this};this.valueChange.emit(s)}else{if(""===e)return this.value="",void this._onModelChange(null,i);t?(this._realValue=this.getRealReturnFormatted(t),this._onModelChange(this._realValue,i),this.dateInput&&this.dateInput.nativeElement.value!==this.value&&this.renderer.setProperty(this.dateInput.nativeElement,"value",this.value)):this._isValid(e)&&(this._realValue=this.getRealReturnFormatted(t),this.dateInput&&this.renderer.setProperty(this.dateInput.nativeElement,"value",this.value),this._onModelChange(this._realValue,i))}},Re.prototype._onModelChange=function(e,t){if(this._realValue=e,this.onModelChange(e),t){var i={date:this.utilService.isDateValid(this.value,this.dateOpts,!0),formatted:this.value,returnFormatted:e,cmpRef:this};this.valueChange.observers.length&&(this.whenValueChangedThenCloseSelectorPanel&&this.closeSelector(),this.valueChange.emit(i))}},Re.prototype.getRealReturnFormatted=function(e){return e?"Date"===this.returnType?e:this.returnFormat?this.dtService.formatTo(e,this.returnFormat):e:this.dateFrom(this._realValue||this.value)||""},Re.prototype.onDateRangeInputBlur=function(e){this.setValue(this._beginValue+this.dateRangeDatesDelimiter+this._endValue),this.onNgModelChange(this._realRangeValue||this.value)},Re.prototype.openCalendar=function(){var n=this;if(!this.disabled){var e=this._realValue;this.dateRange?e=this._realRangeValue:"Date"===this.returnType&&(e=this.transform(e,this.returnFormat)),null===this.cRef?(this.cRef=this.calendarRef.createComponent(this.cfr.resolveComponentFactory(de)),this.datePicekrService.appendSelector(this.cRef.location.nativeElement),this.datePicekrService.registerScrollEvent(function(){n.closeSelector()}),this.cRef.instance.initialize(this.dateOpts,"",this.datePicekrService.getSelectorPosition(this.el.nativeElement,this.cRef),e,function(e,t){if(n.dateOpts.dateRange&&n.showTime&&e.dateRange.endJsDate<e.dateRange.beginJsDate){var i=n.localDateOpts.message[101];n.notifySer?n.notifySer.warning(i):alert(i)}else n.onDateChanged(e),t&&n.closeSelector(l.CloseByDateSel)},function(e){},function(e){},function(){n.closeSelector(l.CloseByEsc)})):this.datePicekrService.appendSelector(this.cRef.location.nativeElement),this.cRef.changeDetectorRef.detectChanges()}},Re.prototype.closeSelector=function(e){if(null!==this.cRef){this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView)),this.cRef=null;var t=document.querySelector(".date-overlay-container");t.childElementCount&&t.remove(),this.renderer.setStyle(t,"pointer-events","")}this.totalFocus=!1,this.dateOpts.dateRange&&(this.beginFocus=!1,this.endFocus=!1),this.closeCalendarHandler&&(this.closeCalendarHandler(),this.closeCalendarHandler=null),this.datePicekrService&&this.datePicekrService.removeMouseEvent()},Re.prototype.toggleCalendar=function(e,t){var i=this;if(void 0===t&&(t=!0),this.disabled)return this.totalFocus=!1,void(this.dateOpts.dateRange&&(this.beginFocus=!1,this.endFocus=!1));if(null===this.cRef){this.closeCalendarHandler||(this.closeCalendarHandler=this.renderer.listen(document,L,function(){return i.closeSelector(l.CloseByOutClick)})),this.totalFocus=!0,this.openCalendar();var n=document.querySelector(".date-overlay-container");this.renderer.setStyle(n,"pointer-events","auto")}else{var a=!0;(n=document.querySelector(".date-overlay-container"))&&this.cRef.location&&n.hasChildNodes()&&n.childNodes.forEach(function(e){e===i.cRef.location.nativeElement&&(a=!1)}),a?(this.renderer.setStyle(n,"pointer-events","auto"),this.totalFocus=!0,this.openCalendar()):(this.totalFocus=!1,this.dateOpts.dateRange&&(this.beginFocus=!1,this.endFocus=!1),e&&this.closeSelector(l.CloseByCalBtn),t&&this.close.emit())}},Re.prototype.onDateChanged=function(e){var t="";if(e.singleDate){this.value=e.singleDate.formatted,this.formatedValue=e.singleDate.formatted;var i=this.getRealReturnFormatted(e.singleDate.jsDate);t=m({},e.singleDate,{formatted:e.singleDate.formatted,returnFormatted:i});var n=e.singleDate.date,a=n.year,r=n.month,s=n.day,o=n.hour,l=n.minute,h=n.second;if(r&&(-1===this.dateFormat.indexOf("yyyy")||-1===this.dateFormat.indexOf("dd"))){var d=new Date(a||(new Date).getFullYear(),r-1,s||1,o||0,l||0,h||0);e.singleDate.jsDate=d}this.onNgModelChange(i,e.singleDate.jsDate)}else e.dateRange&&(this.value=e.dateRange.formatted,this.formatedValue=e.dateRange.formatted,i=e.dateRange.returnFormatted,t=m({},e.dateRange,{formatted:e.dateRange.formatted,returnFormatted:i}),this.onNgModelChange(i,e.dateRange));this.onModelTouched(),this._valueChangeEmitted=!0,this.valueChange.emit(t)},Re.prototype.buildOptions=function(){var e;this.localDateOpts||(this.localDateOpts=this.localeConfig.getLocaleOptions(this.locale)),this.showType===V.noDateAndMonth&&(this.localDateOpts.dateFormat="yyyy",this.localDateOpts.returnFormat="yyyy");var t=Number(this.showType)===V.all&&this.showTime;switch(e={dateRange:this.dateRange,showTime:t,showType:Number(this.showType),dateFormat:this.dateFormat?this.dateFormat:this.localDateOpts.dateFormat,returnFormat:this.returnFormat?this.returnFormat:this.localDateOpts.returnFormat,minYear:this._minDate.year,maxYear:this._maxDate.year,highlightDates:this.highlightDates,disableDates:this.disableDates,showWeekNumbers:this.showWeekNumbers,disableDateRanges:[{begin:this.disableDateRangesBegin,end:this.disableDateRangesEnd}],disableUntil:this._minDate,disableSince:this._maxDate,disableWeekdays:this.disableWeekdays,markDates:[{dates:this.markDates,color:this.markDatesColor}],markWeekends:{marked:this.isMarkWeekends,color:this.markWeekendsColor},dateRangeDatesDelimiter:this.dateRangeDatesDelimiter,shortcuts:this.shortcuts,timeFormat:this._timeFormat,monthRangeValue:this.monthRangeValue},Number(this.showType)){case V.noDate:e.defaultView=T.Month;break;case V.noDateAndMonth:e.defaultView=T.Year;break;case V.selectWeek:e.showWeekNumbers=!0,e.dateRange=!0,e.firstDayOfWeek="mo"}return m({},this.localDateOpts,e)},Re.prototype.dateTo=function(e){var t,i=this.dateOpts.dateFormat?this.dateOpts.dateFormat:this.defaultConfig.dateFormat,n=this.dateOpts.monthLabels?this.dateOpts.monthLabels:this.defaultConfig.monthLabels,a=this.dateOpts.showTime?this.dateOpts.showTime:this.defaultConfig.showTime,r=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),l=e.getHours(),h=e.getMinutes(),d=e.getSeconds();return a?t={year:r,month:s,day:o,hour:l,minute:h,second:d}:(t={year:r,month:s,day:o},this.originTime={hour:l,minute:h,second:d}),this.utilService.formatDate(t,i,n)},Re.prototype.dateFrom=function(e,t){if(void 0===t&&(t=!1),!e)return"";var D,i=this.dateOpts.dateRange?this.dateOpts.dateRange:this.defaultConfig.dateRange,b=this.dateOpts.dateFormat?this.dateOpts.dateFormat:this.defaultConfig.dateFormat,n=this.dateOpts.dateFormat?this.dateOpts.returnFormat:this.defaultConfig.returnFormat,w=this.dateOpts.showTime?this.dateOpts.showTime:this.defaultConfig.showTime,C=b.match(/[^(DdMmYy)]{1,}/g),a=this.utilService.getDateValue;if(!i&&this.dateOpts.showType!==V.selectWeek||t){if("Date"===this.returnType)return e&&e instanceof Date?e:function S(e,t,i){if(void 0===i&&(i={hour:0,minute:0,second:0}),w){var n=e.split(" ")[0],a=e.split(" ")[1];if(D=t(n,b,C),a){var r=M((a=a.replace(/[时,分]/g,":").replace(/[秒]/,"")).split(":"),3),s=r[0],o=r[1],l=r[2],h=s,d=o,c=l||"";D[3]={value:h,format:"hh"},D[4]={value:d,format:"mm"},c&&(D[5]={value:c,format:"ss"})}}else n=e.split(" ")[0],D=t(n,b,C);var u=Number(D[0]?D[0].value:1970),p=D[0];p.format&&(p.value&&p.value.length===p.format.length||(u=null));var g=Number(D[1]?D[1].value:1)-1,y=Number(D[2]?D[2].value:1),m=D[3]?Number(D[3].value):i.hour,v=D[4]?Number(D[4].value):i.minute,f=D[5]?Number(D[5].value):i.second;return u?new Date(u,g,y,m,v,f):null}(e,a,this.originTime);var r=this.utilService.isDateValid(e,this.dateOpts,!0);return this.utilService.formatDate(r,n,this.defaultConfig.monthLabels)}var s=e.split(this.dateRangeDatesDelimiter)[0],o=e.split(this.dateRangeDatesDelimiter)[1],l=this.utilService.isDateValid(s,this.dateOpts,!0),h=this.utilService.isDateValid(o,this.dateOpts,!0);return l=this.utilService.isInitializedDate(l)?l:this.dateOpts.disableUntil,h=this.utilService.isInitializedDate(h)?h:this.dateOpts.disableSince,this.utilService.formatDate(l,n,this.defaultConfig.monthLabels)+this.dateRangeDatesDelimiter+this.utilService.formatDate(h,n,this.defaultConfig.monthLabels)},Re.prototype.transform=function(e,t){void 0===t&&(t=this.dateOpts.dateFormat),e=e||"";var i=this.dateOpts,n=i.returnFormat,a=(i.dateFormat,i.showTime,null);"string"==typeof e?a=h.parse(e,n,new Date):e instanceof Date&&(a=e);var r=e;if(h.isValid(a)?r=this.dtService.formatTo(a,t):("-"===(e=e.replace(/[年,月]/g,"-").replace(/[日]/,""))[e.length-1]&&(e=e.substr(0,e.length-1)),h.isValid(new Date(e))?r=this.dtService.formatTo(e,t):e=""),e&&""===this.dateFrom(e,!0)){var s=this.utilService.isDateValid(e,Object.assign({},this.dateOpts,{dateFormat:n}));r=this.utilService.formatDate(s,t,this.defaultConfig.monthLabels)}return r},Re.prototype.setValue=function(e){if(this.value!==e)if(this.dateOpts.dateRange){var t=e.split(this.dateRangeDatesDelimiter),i=t[0],n=t[1];this._beginValue=this.transform(i),this._endValue=this.transform(n),this.value=this._beginValue&&this._endValue?this._beginValue+this.dateRangeDatesDelimiter+this._endValue:""}else this.value=this.transform(e)},Re.prototype.updateValue=function(e){if(this.dateOpts.dateRange){var t=e.split(this.dateRangeDatesDelimiter),i=t[0],n=t[1];this._beginValue=this.transform(i),this._endValue=this.transform(n),this.value=this._beginValue&&this._endValue?this._beginValue+this.dateRangeDatesDelimiter+this._endValue:""}else this.value=this.transform(e)},Re.prototype.getValueByType=function(e){if(e instanceof Date)return this.returnType="Date",e;if(e&&e instanceof Object){var t=e.begin,i=e.end,n=t instanceof Date?this.dateTo(t):"",a=t instanceof Date?this.dateTo(i):"";return this.returnType="Object",n&&a?n+this.dateRangeDatesDelimiter+a:""}return e&&"string"==typeof e?(-1<e.indexOf("T")&&(e=e.replace("T"," ")),this.returnType="String",e):""},Re.prototype.writeValue=function(e){this._realValue=e,this.dateRange&&(this._realRangeValue=e),this.setValue(this.getValueByType(e))},Re.prototype.registerOnChange=function(e){this.onModelChange=e},Re.prototype.registerOnTouched=function(e){this.onModelTouched=e},Re.prototype.setDisabledState=function(e){this.disabled=e},Re.prototype.onPrevFocus=function(e){this.beginFocus=!0,1==this.endFocus&&(this.endFocus=!this.endFocus),this.PrevFocus.emit()},Re.prototype.onNextFocus=function(e){this.endFocus=!0,1==this.beginFocus&&(this.beginFocus=!this.beginFocus),this.NextFocus.emit()},Re.prototype._convert2dateString=function(e){if(e){var t=e.replace(/[年,月]/g,"-").replace(/[日,号]/g," ").replace(/[时,点,分,分钟]/g,":").replace("秒","");return"-"===t[t.length-1]&&(t+="01"),":"===t[t.length-1]&&(t=t.substr(0,t.length-1)),t.replace(/^\s+|\s+$/g,"")}return e},Re.prototype._isValid=function(e){if(e=this._convert2dateString(e)){if(-1===this.dateFormat.indexOf("yyyy")||-1===this.dateFormat.indexOf("dd")){var t=h.parse(this.value,this.dateFormat,new Date);if(this._realValue)return"Date"===this.returnType?h.isValid(this._realValue):h.isValid(new Date(this._convert2dateString(this._realValue)));if(r=this.utilService.isDateValid(e,this.dateOpts)){if(r.year||r.month){var i=(new Date).getFullYear(),n=(this.dateOpts.returnFormat||"yyyy-MM-dd").replace("yyyy",""+(r.year||i)).replace("MM",""+r.month).replace("dd","1");return h.isValid(new Date(n))}return!1}return h.isValid(e)}if(/^\d{1,}$/.test(e)&&-1<this.dateFormat.indexOf("yyyyMMdd")){var a=this._isValid2(e);return a.isValided&&(this._realValue=this.getRealReturnFormatted(a.date),this.value=this.transform(a.date)),a.isValided}t=h.parse(e,this.dateFormat,new Date);var r=this.utilService.isDateValid(this.value,this.dateOpts);return h.isValid(t)||this.utilService.isInitializedDate(r)}return!1},Re.prototype._isValid2=function(e){var t=0,i=0,n=0,a=0,r=0,s=0,o=this.dateFormat;if(o.includes("yyyy")){if(!e)return!1;t=+e.slice(0,4),e=e.slice(4)}if(o.includes("MM")){if(!e)return!1;i=e.slice(0,2)-1,e=e.slice(2),i<0&&(i=0)}if(o.includes("dd")){if(!e)return!1;n=+e.slice(0,2),e=e.slice(2)}o.includes("HH")&&e&&(a=+e.slice(0,2),e=e.slice(2)),o.includes("mm")&&e&&(r=+e.slice(0,2),e=e.slice(2)),o.includes("ss")&&e&&(s=+e.slice(0,2));var l=new Date(t,i,n,a,r,s);return{isValided:h.isValid(l),date:l}},Re.decorators=[{type:d.Component,args:[{selector:"farris-datepicker",exportAs:"farris-datepicker",template:'<div class="input-group" [ngClass]="{\r\n        \'f-state-disabled\': disabled,\r\n        \'f-state-readonly\': readonly && !disabled,\r\n        \'f-state-editable\': editable && !disabled && !readonly,\r\n        \'f-state-focus\':totalFocus\r\n    }">\r\n    <ng-container *ngIf="!dateOpts.dateRange; else range">\r\n        <input type="text" class="form-control" [attr.placeholder]="readonly||disabled?\'\':placeholder" name="farris-date" [ngModel]="value"\r\n            (ngModelChange)="onSingleInputNgModelChange($event)" #dateInput autocomplete="off" [readonly]="readonly || !editable"\r\n            [disabled]="disabled" (dateChanged)="onDateChanged($event)" (blur)="onBlur($event)"\r\n            (focus)="onFocus($event)" (click)="onInputClick($event)" style="padding-right: 4px;" farrisPopover\r\n            [popover]="value" [triggers]="\'hover\'" [popActive]="isActiveTip" [showAction]="\'show2\'"\r\n            [container]="\'body\'" (keydown.tab)="closeSelector(3)" />\r\n\r\n    </ng-container>\r\n    <ng-template #range>\r\n        <div class="form-control date-range-wrapper" (click)="onInputClick($event)" (blur)="onBlur($event)"\r\n            (focus)="onFocus($event)" [title]="readonly || !editable|| disabled ?value:\'\'">\r\n            <span class="sub-input-wrapper sub-input-wrapper-begin" [class.f-state-focus]="totalFocus&&beginFocus">\r\n                <input class="sub-input form-control" type="text" [attr.placeholder]="readonly||disabled?\'\':beginPlaceholder"\r\n                    [(ngModel)]="_beginValue" [readonly]="readonly || !editable" [disabled]="disabled"\r\n                    autocomplete="off" (blur)="onDateRangeInputBlur(\'begin\')" (focus)="onPrevFocus($event)"/>\r\n            </span>\r\n            <span class="f-icon f-icon-orientation-arrow sub-input-spliter"></span>\r\n            <span class="sub-input-wrapper sub-input-wrapper-end" [class.f-state-focus]="totalFocus&&endFocus">\r\n                <input class="sub-input form-control" type="text" [attr.placeholder]="readonly||disabled?\'\':endPlaceholder"\r\n                    [(ngModel)]="_endValue" [readonly]="readonly || !editable" [disabled]="disabled" autocomplete="off"\r\n                    (blur)="onDateRangeInputBlur(\'end\')" (focus)="onNextFocus($event)" />\r\n            </span>\r\n        </div>\r\n    </ng-template>\r\n    <div class="input-group-append f-cmp-iconbtn-wrapper" *ngIf="!readonly && !disabled" style="position: relative;">\r\n        <span class="input-group-text input-group-clear datepicker-clear" (click)="clearDate($event)"\r\n            style="visibility: hidden" #clearIcon>\r\n            <i class="f-icon modal_close"></i>\r\n        </span>\r\n        <button type="button" class="btn f-cmp-iconbtn" (click)="onInputClick($event)">\r\n            <span class="f-icon f-icon-date"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<ng-container #calendar>\r\n    <ng-container></ng-container>\r\n</ng-container>',providers:[Me,se,y,a.LocaleService],styles:["\n            :host {\n                display: block;\n            }\n\n            :host .datepicker-clear {\n                position: absolute;\n                height: 100%;\n                right: 0;\n                top: 0;\n                z-index: 100;\n            }\n        "]}]}],Re.ctorParameters=function(){return[{type:d.ElementRef},{type:se},{type:y},{type:d.Injector}]},Re.propDecorators={cls:[{type:d.HostBinding,args:["class"]}],disabled:[{type:d.Input}],readonly:[{type:d.Input}],editable:[{type:d.Input}],dateRange:[{type:d.Input}],showTime:[{type:d.Input}],showType:[{type:d.Input}],locale:[{type:d.Input}],dateFormat:[{type:d.Input}],useDefault:[{type:d.Input}],returnType:[{type:d.Input}],returnFormat:[{type:d.Input}],placeholder:[{type:d.Input}],beginPlaceholder:[{type:d.Input}],endPlaceholder:[{type:d.Input}],whenValueChangedThenCloseSelectorPanel:[{type:d.Input}],minDate:[{type:d.Input}],maxDate:[{type:d.Input}],highlightDates:[{type:d.Input}],disableDateRangesBegin:[{type:d.Input}],disableDateRangesEnd:[{type:d.Input}],disableDates:[{type:d.Input}],disableWeekdays:[{type:d.Input}],markDates:[{type:d.Input}],markDatesColor:[{type:d.Input}],showWeekNumbers:[{type:d.Input}],isMarkWeekends:[{type:d.Input}],markWeekendsColor:[{type:d.Input}],dateRangeDatesDelimiter:[{type:d.Input}],shortcuts:[{type:d.Input}],monthRangeValue:[{type:d.Input}],beginValue:[{type:d.Input}],endValue:[{type:d.Input}],clear:[{type:d.Output}],valueChange:[{type:d.Output}],focus:[{type:d.Output}],blur:[{type:d.Output}],beginValueChange:[{type:d.Output}],endValueChange:[{type:d.Output}],PrevFocus:[{type:d.Output}],NextFocus:[{type:d.Output}],close:[{type:d.Output}],dp:[{type:d.ViewChild,args:[Ce]}],clearIcon:[{type:d.ViewChild,args:["clearIcon"]}],calendarRef:[{type:d.ViewChild,args:["calendar",{read:d.ViewContainerRef}]}],PFocus:[{type:d.ViewChild,args:["onPrevFocus"]}],NFocus:[{type:d.ViewChild,args:["onNextFocus"]}],dateInput:[{type:d.ViewChild,args:["dateInput"]}],onMouseEnter:[{type:d.HostListener,args:["mouseenter",["$event"]]}],onMouseLeave:[{type:d.HostListener,args:["mouseleave",["$event"]]}]},Re);function Re(e,t,i,n){this.el=e,this.utilService=t,this.defaultConfigService=i,this.injector=n,this.cls="f-cmp-datepicker f-cmp-inputgroup",this.disabled=!1,this.readonly=!1,this.editable=!0,this.dateRange=!1,this.showTime=!1,this.showType=V.all,this.locale="zh-cn",this.useDefault=!1,this.returnType="String",this.placeholder="",this.beginPlaceholder="",this.endPlaceholder="",this.whenValueChangedThenCloseSelectorPanel=!0,this.highlightDates=[],this.disableDateRangesBegin={year:0,month:0,day:0},this.disableDateRangesEnd={year:0,month:0,day:0},this.disableDates=[],this.disableWeekdays=[],this.markDates=[],this.markDatesColor="#59a1ff",this.showWeekNumbers=!1,this.isMarkWeekends=!1,this.markWeekendsColor="#59a1ff",this.dateRangeDatesDelimiter="~",this.shortcuts=[],this.monthRangeValue=1,this.clear=new d.EventEmitter,this.valueChange=new d.EventEmitter,this.focus=new d.EventEmitter,this.blur=new d.EventEmitter,this.beginValueChange=new d.EventEmitter,this.endValueChange=new d.EventEmitter,this.PrevFocus=new d.EventEmitter,this.NextFocus=new d.EventEmitter,this.close=new d.EventEmitter,this.cRef=null,this._timeFormat="",this._value="",this._beginValue="",this._endValue="",this._initFinished=!1,this._minDate={year:1840,month:1,day:1,hour:0,minute:0,second:0},this._maxDate={year:1e4,month:1,day:1,hour:0,minute:0,second:0},this.dateOpts={},this.beginFocus=!1,this.endFocus=!1,this.totalFocus=!1,this.isActiveTip=!1,this._realValue=null,this._realRangeValue=null,this.formatedValue="",this.dtService=null,this._updateOn="change",this._valueChangeEmitted=!1,this._mousedownEvent=null,this.closeCalendarHandler=null,this.cdr=null,this.onModelChange=function(e){},this.onModelTouched=function(){},this.defaultConfig=this.defaultConfigService.getDefaultConfig(),this.injector&&(this.localeService=this.injector.get(a.LocaleService),this.dtService=this.injector.get(s.DateTimeHelperService),this.notifySer=this.injector.get(o.NotifyService,null),this.notifySer&&(this.notifySer.config.position="top-center")),this.localeConfig=new ae,this.vcRef=this.injector.get(d.ViewContainerRef,null),this.cfr=this.injector.get(d.ComponentFactoryResolver,null),this.renderer=this.injector.get(d.Renderer2,null),this._applicationRef=this.injector.get(d.ApplicationRef),this.cdr=this.injector.get(d.ChangeDetectorRef)}var Oe=(Ve.decorators=[{type:d.Component,args:[{selector:"lib-selection-sidebar",template:'<div class="f-datepicker-sidebar">\r\n    <button *ngFor="let item of opts.shortcuts" (click)="item.onClick(setTime)">\r\n        {{ item.text }}\r\n    </button>\r\n</div>\r\n',encapsulation:d.ViewEncapsulation.None}]}],Ve.propDecorators={opts:[{type:d.Input}],setTime:[{type:d.Output}]},Ve);function Ve(){this.setTime=new d.EventEmitter}var Te=(Ee.decorators=[{type:d.Component,args:[{selector:"angular-datepicker",template:""}]}],Ee);function Ee(){}var xe=(_e.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,i.FormsModule,n.TimePickerModule,a.LocaleModule,r.PopoverModule.forRoot(),s.DateHelperModule.forRoot(),o.NotifyModule.forRoot()],declarations:[de,Oe,ue,ge,me,fe,ke,Ce,Te],entryComponents:[de],exports:[de,ue,Oe,ge,me,fe,ke,Ce]}]}],_e);function _e(){}e.FarrisDatePickerModule=xe,e.FarrisDatepickerComponent=ke,e.FarrisDatePickerDirective=Ce,e.CalendarComponent=de,e.DayViewComponent=ge,e.MonthViewComponent=me,e.YearViewComponent=fe,e.SelectionBarComponent=ue,e.SelectionSidebarComponent=Oe,e.AngularMyDatePickerComponent=Te,e.DefaultConfigService=y,e.DatepickerLocaleService=ae,e.UtilService=se,e.DatePickerService=le,e.CalToggle=l,e.DefaultView=T,e.KeyCode=c,e.KeyName=u,e.MonthId=f,e.ResetDateType=p,e.ShowType=V,e.Year=g,e.D=b,e.DD=w,e.M=C,e.MM=S,e.MMM=x,e.Y="y",e.YYYY=k,e.DATE_ROW_COUNT=5,e.DATE_COL_COUNT=6,e.MONTH_ROW_COUNT=3,e.MONTH_COL_COUNT=2,e.YEAR_ROW_COUNT=4,e.YEAR_COL_COUNT=4,e.DOT=".",e.UNDER_LINE=R,e.SU=O,e.MO=_,e.TU=F,e.WE=I,e.TH=N,e.FR=B,e.SA=Y,e.DEFAULT_LOCALE=j,e.ZERO_STR="0",e.EMPTY_STR=P,e.CLICK=L,e.KEYUP=A,e.BLUR=W,e.DISABLED=H,e.BODY="body",e.VALUE="value",e.OPTIONS=$,e.DEFAULT_MONTH=z,e.LOCALE="locale",e.OBJECT="object",e.PX="px",e.STYLE="style",e.OPTS=K,e.YEARS=U,e.VISIBLE_MONTH=Z,e.SELECT_MONTH=q,e.SELECT_YEAR=J,e.PREV_VIEW_DISABLED=G,e.NEXT_VIEW_DISABLED=X,e.DATES=Q,e.WEEK_DAYS=ee,e.SELECTED_DATE=te,e.SELECTED_DATE_RANGE=ie,e.MONTHS=ne,e.PREVENT_CLOSE_TIMEOUT=50,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-datepicker.umd.min.js.map