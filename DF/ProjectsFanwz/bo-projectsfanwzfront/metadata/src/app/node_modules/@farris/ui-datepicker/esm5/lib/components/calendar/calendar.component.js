/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding } from '@angular/core';
import { UtilService } from '../../services/public-api';
import { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';
import { DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT, YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR } from '../../constants/constants';
import { TimePickerPanelComponent } from '@farris/ui-time-picker';
import { flatten } from 'lodash-es';
var CalendarComponent = /** @class */ (function () {
    function CalendarComponent(renderer, cdr, utilService) {
        var _this = this;
        this.renderer = renderer;
        this.cdr = cdr;
        this.utilService = utilService;
        this.position = 'static';
        this.visibleMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.visibleMonth_range = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.selectedMonth = { monthNbr: 0, year: 0 };
        this.selectedMonth_range = { monthNbr: 0, year: 0 };
        this.selectedDate = { year: 0, month: 0, day: 0 };
        this.selectedDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };
        this.selectedWeek = { weekNbr: 0, year: 0 };
        this.weekDays = [];
        this.dates = [];
        this.dates_range = [];
        this.months = [];
        this.months_range = [];
        this.years = [];
        this.years_range = [];
        this.dayIdx = 0;
        this.weekDayOpts = [SU, MO, TU, WE, TH, FR, SA];
        this.selectMonth = false;
        this.selectMonth_range = false;
        this.selectYear = false;
        this.selectYear_range = false;
        this.selectTime = false;
        this.selectorPos = null;
        this.scrollDiff = 0;
        this.prevViewDisabled = false;
        this.nextViewDisabled = false;
        this.prevDobViewDisabled = false;
        this.nextDobViewDisabled = false;
        this.prevViewDisabled_range = false;
        this.nextViewDisabled_range = false;
        this.prevDobViewDisabled_range = false;
        this.nextDobViewDisabled_range = false;
        // 禁用日期时间控件中的时间段的小时
        this.disabledHours = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes = (/**
         * @param {?} hour
         * @return {?}
         */
        function (hour) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        function (hour, minute) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
    }
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getTimeStr = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        /** @type {?} */
        var hour = this.utilService.preZero(date.getHours());
        /** @type {?} */
        var minute = this.utilService.preZero(date.getMinutes());
        /** @type {?} */
        var second = this.utilService.preZero(date.getSeconds());
        return hour + ":" + minute + ":" + second;
    };
    /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    CalendarComponent.prototype.initialize = /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    function (opts, defaultMonth, selectorPos, inputValue, dc, cvc, rds, cbe) {
        this.opts = opts;
        this.selectorPos = selectorPos;
        this.weekDays.length = 0;
        var _a = this.opts, defaultView = _a.defaultView, dateRange = _a.dateRange, firstDayOfWeek = _a.firstDayOfWeek, dayLabels = _a.dayLabels, stylesData = _a.stylesData, yearTxt = _a.yearTxt;
        this.visibleMonth.yearTxt = yearTxt;
        this.visibleMonth_range.yearTxt = yearTxt;
        // if (stylesData.styles.length) {
        //     const styleElTemp: any = this.renderer.createElement(STYLE);
        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));
        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);
        // }
        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);
        if (this.dayIdx !== -1) {
            /** @type {?} */
            var idx = this.dayIdx;
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < this.weekDayOpts.length; i++) {
                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);
                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;
            }
        }
        /** @type {?} */
        var today = this.getToday();
        /** @type {?} */
        var isInDisableRange = this.utilService.isDisabledDate(today, this.opts);
        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);
        switch (defaultView) {
            case DefaultView.Month:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };
                break;
            case DefaultView.Year:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };
                break;
            default:
                this.selectedMonth = { monthNbr: today.month, year: today.year };
                if (today.month >= 12) {
                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };
                }
                else {
                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };
                }
                break;
        }
        if (defaultMonth && defaultMonth.length) {
            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);
            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);
            if (this.selectedMonth_range.monthNbr >= 12) {
                this.selectedMonth_range.year++;
                this.selectedMonth_range.monthNbr = 1;
            }
            else {
                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;
            }
        }
        if (!dateRange) {
            // Single date mode
            /** @type {?} */
            var date = this.utilService.isDateValid(inputValue, this.opts, true);
            if (this.utilService.isInitializedDate(date)) {
                this.selectedDate = date;
                /** @type {?} */
                var hour = this.utilService.preZero(date.hour);
                /** @type {?} */
                var minute = this.utilService.preZero(date.minute);
                /** @type {?} */
                var second = this.utilService.preZero(date.second);
                this.timeVlaue = hour + ":" + minute + ":" + second;
                this.selectedMonth = { monthNbr: date.month, year: date.year };
            }
        }
        else {
            // Date range mode
            var _b = this.utilService.isDateValidDateRange(inputValue, this.opts), begin = _b.begin, end = _b.end;
            if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {
                this.selectedDateRange = { begin: begin, end: end };
                /** @type {?} */
                var hour = this.utilService.preZero(begin.hour);
                /** @type {?} */
                var minute = this.utilService.preZero(begin.minute);
                /** @type {?} */
                var second = this.utilService.preZero(begin.second);
                this.timeVlaue = hour + ":" + minute + ":" + second;
                /** @type {?} */
                var _hour = this.utilService.preZero(end.hour);
                /** @type {?} */
                var _minute = this.utilService.preZero(end.minute);
                /** @type {?} */
                var _second = this.utilService.preZero(end.second);
                this.timeVlaue_range = _hour + ":" + _minute + ":" + _second;
                this.selectedMonth = { monthNbr: begin.month, year: begin.year };
                if (begin.month === end.month && begin.year === end.year) {
                    if (end.month >= 12) {
                        this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };
                    }
                    else {
                        /** @type {?} */
                        var endyear = end.year;
                        if (defaultView === DefaultView.Month) {
                            endyear = endyear + 1;
                        }
                        this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };
                    }
                }
                else {
                    if (defaultView === DefaultView.Month && begin.year === end.year) {
                        this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };
                    }
                    else {
                        this.selectedMonth_range = { monthNbr: end.month, year: end.year };
                    }
                }
                /** @type {?} */
                var weekNbr = this.utilService.getWeekNumber(begin) === this.utilService.getWeekNumber(end)
                    ? this.utilService.getWeekNumber(begin)
                    : 0;
                this.selectedWeek = { weekNbr: weekNbr, year: begin.year };
            }
        }
        this.dateChanged = dc;
        this.calendarViewChanged = cvc;
        this.rangeDateSelection = rds;
        this.closedByEsc = cbe;
        this.setCalendarVisibleMonth();
        if (defaultView === DefaultView.Month) {
            this.onMonthViewBtnClicked();
            if (dateRange) {
                this.onMonthViewBtnClicked(true);
            }
        }
        else if (defaultView === DefaultView.Year) {
            this.onYearViewBtnClicked();
            if (dateRange) {
                this.onYearViewBtnClicked(true);
            }
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    CalendarComponent.prototype.resetDateValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === ResetDateType.singleDate || value === ResetDateType.both) {
            this.selectedDate = this.utilService.resetDate();
        }
        if (value === ResetDateType.dateRange || value === ResetDateType.both) {
            this.selectedDateRange.begin = this.utilService.resetDate();
            this.selectedDateRange.end = this.utilService.resetDate();
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.resetMonthYearSelect = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        if (!isSecondCalendar) {
            this.selectMonth = false;
            this.selectYear = false;
        }
        else {
            this.selectMonth_range = false;
            this.selectYear_range = false;
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthViewBtnClicked = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.selectMonth = !this.selectMonth;
            this.selectYear = false;
            if (this.selectMonth) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth.year = this.selectedMonth.year;
            }
        }
        else {
            this.selectMonth_range = !this.selectMonth_range;
            this.selectYear_range = false;
            if (this.selectMonth_range) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth_range.year = this.selectedMonth_range.year;
            }
            this.cdr.detectChanges();
        }
    };
    /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellClicked = /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr;
            /** @type {?} */
            var mc = cell.nbr !== monthNbr;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth = false;
            }
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr;
            /** @type {?} */
            var mc = cell.nbr !== monthNbr;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth_range);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth_range = false;
            }
        }
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, MONTH_ROW_COUNT, MONTH_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(M, targetRow, targetCol);
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearViewBtnClicked = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.visibleMonth.year = this.selectedMonth.year;
            if (!this.selectYear) {
                this.generateYears(this.visibleMonth.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);
            }
            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;
            if (this.opts.showType === 2) {
                this.selectMonth = !this.selectMonth;
            }
            else {
                this.selectMonth = false;
            }
            // this.selectYear = !this.selectYear;
            // this.selectMonth = false;
        }
        else {
            this.visibleMonth_range.year = this.selectedMonth_range.year;
            if (!this.selectYear_range) {
                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);
            }
            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;
            if (this.opts.showType === 2) {
                this.selectMonth_range = !this.selectMonth_range;
            }
            else {
                this.selectMonth_range = false;
            }
        }
        this.cdr.detectChanges();
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellClicked = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr, monthTxt = _a.monthTxt;
            /** @type {?} */
            var yc = cell.year !== year;
            this.visibleMonth = { monthTxt: monthTxt, monthNbr: monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear = false;
                this.selectMonth = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear = false;
            }
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr, monthTxt = _b.monthTxt;
            /** @type {?} */
            var yc = cell.year !== year;
            this.visibleMonth_range = {
                monthTxt: monthTxt,
                monthNbr: monthNbr,
                year: cell.year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth_range.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear_range = false;
                this.selectMonth_range = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear_range = false;
            }
        }
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, YEAR_ROW_COUNT, YEAR_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(Y, targetRow, targetCol);
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateMonths = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        /** @type {?} */
        var today = this.getToday();
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince;
        // tslint:disable-next-line:one-variable-per-declaration
        /** @type {?} */
        var year;
        /** @type {?} */
        var monthNbr;
        if (!isSecondCalendar) {
            this.months.length = 0;
            year = this.visibleMonth.year;
            monthNbr = this.visibleMonth.monthNbr;
        }
        else {
            this.months_range.length = 0;
            year = this.visibleMonth_range.year;
            monthNbr = this.visibleMonth_range.monthNbr;
        }
        for (var i = 1; i <= 12; i += 3) {
            /** @type {?} */
            var row = [];
            for (var j = i; j < i + 3; j++) {
                /** @type {?} */
                var disabled = this.utilService.isMonthDisabledByDisableUntil({ year: year, month: j, day: this.daysInMonth(j, year) }, disableUntil) || this.utilService.isMonthDisabledByDisableSince({ year: year, month: j, day: 1 }, disableSince);
                row.push({
                    nbr: j,
                    name: this.opts.monthLabels[j],
                    currMonth: j === today.month && year === today.year,
                    disabled: disabled,
                    monthObj: { year: year, month: j }
                });
            }
            if (!isSecondCalendar) {
                this.months.push({ row: row, year: year });
            }
            else {
                this.months_range.push({ row: row, year: year });
            }
        }
        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);
    };
    /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateYears = /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (inputYear, isSecondCalendar) {
        var _a = this.opts, minYear = _a.minYear, maxYear = _a.maxYear, disableUntil = _a.disableUntil, disableSince = _a.disableSince;
        /** @type {?} */
        var y = inputYear - (inputYear % 10);
        var _b = this.visibleMonth, year = _b.year, monthNbr = _b.monthNbr;
        if (!isSecondCalendar) {
            this.years.length = 0;
        }
        else {
            this.years_range.length = 0;
            /** @type {?} */
            var allYears = flatten(this.years_range);
            if (allYears.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.year == inputYear; })) > -1) {
                y = this.years_range[3][2].year;
            }
        }
        /** @type {?} */
        var today = this.getToday();
        for (var i = y - 1; i < y + 10; i += 3) {
            /** @type {?} */
            var row = [];
            for (var j = i; j < i + 3; j++) {
                /** @type {?} */
                var disabled = this.utilService.isMonthDisabledByDisableUntil({
                    year: j,
                    month: monthNbr,
                    day: this.daysInMonth(monthNbr, j)
                }, disableUntil) ||
                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);
                /** @type {?} */
                var minMax = j < minYear || j > maxYear;
                row.push({
                    year: j,
                    currYear: j === today.year,
                    selected: j === year,
                    disabled: disabled || minMax,
                    yearObj: { year: j }
                });
            }
            if (!isSecondCalendar) {
                this.years.push(row);
            }
            else {
                this.years_range.push(row);
            }
        }
        if (!isSecondCalendar) {
            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);
        }
        else {
            this.setYearViewHeaderBtnDisabledState(this.years_range[0][1].year, this.years_range[3][1].year, isSecondCalendar);
        }
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.setCalendarVisibleMonth = /**
     * @return {?}
     */
    function () {
        // Sets visible month of calendar
        var _a = this.selectedMonth, year = _a.year, monthNbr = _a.monthNbr;
        this.visibleMonth = {
            monthTxt: this.opts.monthLabels[monthNbr],
            monthNbr: monthNbr,
            year: year,
            yearTxt: this.opts.yearTxt
        };
        // Create current month
        if (this.opts.dateRange) {
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],
                monthNbr: this.selectedMonth_range.monthNbr,
                year: this.selectedMonth_range.year,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);
        }
        this.generateCalendar(monthNbr, year, true, false);
    };
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onPrevNavigateBtnClicked = /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);
                }
            }
        }
    };
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onNextNavigateBtnClicked = /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    CalendarComponent.prototype.setDateViewMonth = /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    function (isSecondCalendar, isNext) {
        /** @type {?} */
        var change;
        if (isNext === undefined) {
            change = 0;
        }
        else {
            change = isNext ? 1 : -1;
        }
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr;
            /** @type {?} */
            var d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            var y = d.getFullYear();
            /** @type {?} */
            var m = d.getMonth() + 1;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr;
            /** @type {?} */
            var d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            var y = d.getFullYear();
            /** @type {?} */
            var m = d.getMonth() + 1;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onCloseSelector = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.esc) {
            this.closedByEsc();
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellClicked = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        this.selectDate(cell.dateObj);
        this.resetMonthYearSelect(isSecondCalendar);
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, DATE_ROW_COUNT, DATE_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(D, targetRow, targetCol);
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_1, _a, e_2, _b, e_3, _c, e_4, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.dates), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var w = _f.value;
                    try {
                        for (var _g = tslib_1.__values(w.week), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var day = _h.value;
                            day.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                                    this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                                    (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.dates_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var w = _k.value;
                    try {
                        for (var _l = tslib_1.__values(w.week), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var day = _m.value;
                            day.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                                    this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                                    (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_5, _a, e_6, _b, e_7, _c, e_8, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.dates), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var w = _f.value;
                    try {
                        for (var _g = tslib_1.__values(w.week), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var day = _h.value;
                            day.range = false;
                        }
                    }
                    catch (e_6_1) { e_6 = { error: e_6_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_6) throw e_6.error; }
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.dates_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var w = _k.value;
                    try {
                        for (var _l = tslib_1.__values(w.week), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var day = _m.value;
                            day.range = false;
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_9, _a, e_10, _b, e_11, _c, e_12, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.months), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var _g = tslib_1.__values(item.row), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var month = _h.value;
                            month.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                                    this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                                    (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                        }
                    }
                    catch (e_10_1) { e_10 = { error: e_10_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_10) throw e_10.error; }
                    }
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.months_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var item = _k.value;
                    try {
                        for (var _l = tslib_1.__values(item.row), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var month = _m.value;
                            month.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                                    this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                                    (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                        }
                    }
                    catch (e_12_1) { e_12 = { error: e_12_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_12) throw e_12.error; }
                    }
                }
            }
            catch (e_11_1) { e_11 = { error: e_11_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_11) throw e_11.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_13, _a, e_14, _b, e_15, _c, e_16, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.months), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var _g = tslib_1.__values(item.row), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var month = _h.value;
                            month.range = false;
                        }
                    }
                    catch (e_14_1) { e_14 = { error: e_14_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_14) throw e_14.error; }
                    }
                }
            }
            catch (e_13_1) { e_13 = { error: e_13_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_13) throw e_13.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.months), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var item = _k.value;
                    try {
                        for (var _l = tslib_1.__values(item.row), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var month = _m.value;
                            month.range = false;
                        }
                    }
                    catch (e_16_1) { e_16 = { error: e_16_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_16) throw e_16.error; }
                    }
                }
            }
            catch (e_15_1) { e_15 = { error: e_15_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_15) throw e_15.error; }
            }
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_17, _a, e_18, _b, e_19, _c, e_20, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.years), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var item_1 = tslib_1.__values(item), item_1_1 = item_1.next(); !item_1_1.done; item_1_1 = item_1.next()) {
                            var year = item_1_1.value;
                            year.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                                    this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                                    (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                        }
                    }
                    catch (e_18_1) { e_18 = { error: e_18_1 }; }
                    finally {
                        try {
                            if (item_1_1 && !item_1_1.done && (_b = item_1.return)) _b.call(item_1);
                        }
                        finally { if (e_18) throw e_18.error; }
                    }
                }
            }
            catch (e_17_1) { e_17 = { error: e_17_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_17) throw e_17.error; }
            }
        }
        else {
            try {
                for (var _g = tslib_1.__values(this.years_range), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var item = _h.value;
                    try {
                        for (var item_2 = tslib_1.__values(item), item_2_1 = item_2.next(); !item_2_1.done; item_2_1 = item_2.next()) {
                            var year = item_2_1.value;
                            year.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                                    this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                                    (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                        }
                    }
                    catch (e_20_1) { e_20 = { error: e_20_1 }; }
                    finally {
                        try {
                            if (item_2_1 && !item_2_1.done && (_d = item_2.return)) _d.call(item_2);
                        }
                        finally { if (e_20) throw e_20.error; }
                    }
                }
            }
            catch (e_19_1) { e_19 = { error: e_19_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                }
                finally { if (e_19) throw e_19.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_21, _a, e_22, _b, e_23, _c, e_24, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.years), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var item_3 = tslib_1.__values(item), item_3_1 = item_3.next(); !item_3_1.done; item_3_1 = item_3.next()) {
                            var year = item_3_1.value;
                            year.range = false;
                        }
                    }
                    catch (e_22_1) { e_22 = { error: e_22_1 }; }
                    finally {
                        try {
                            if (item_3_1 && !item_3_1.done && (_b = item_3.return)) _b.call(item_3);
                        }
                        finally { if (e_22) throw e_22.error; }
                    }
                }
            }
            catch (e_21_1) { e_21 = { error: e_21_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_21) throw e_21.error; }
            }
        }
        else {
            try {
                for (var _g = tslib_1.__values(this.years_range), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var item = _h.value;
                    try {
                        for (var item_4 = tslib_1.__values(item), item_4_1 = item_4.next(); !item_4_1.done; item_4_1 = item_4.next()) {
                            var year = item_4_1.value;
                            year.range = false;
                        }
                    }
                    catch (e_24_1) { e_24 = { error: e_24_1 }; }
                    finally {
                        try {
                            if (item_4_1 && !item_4_1.done && (_d = item_4.return)) _d.call(item_4);
                        }
                        finally { if (e_24) throw e_24.error; }
                    }
                }
            }
            catch (e_23_1) { e_23 = { error: e_23_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                }
                finally { if (e_23) throw e_23.error; }
            }
        }
    };
    /**
     * @param {?} weekData
     * @return {?}
     */
    CalendarComponent.prototype.onWeekClicked = /**
     * @param {?} weekData
     * @return {?}
     */
    function (weekData) {
        /** @type {?} */
        var showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };
        if (showTime) {
            weekData.week[0].dateObj.hour = 0;
            weekData.week[0].dateObj.minute = 0;
            weekData.week[0].dateObj.second = 0;
            weekData.week[6].dateObj.hour = 23;
            weekData.week[6].dateObj.minute = 59;
            weekData.week[6].dateObj.second = 59;
        }
        this.selectDate(weekData.week[0].dateObj);
        this.selectDate(weekData.week[6].dateObj);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.getSourceRowAndColumnFromEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var sourceRow = 0;
        /** @type {?} */
        var sourceCol = 0;
        if (event.target && event.target.id) {
            // value of id is for example: m_0_1 (first number = row, second number = column)
            /** @type {?} */
            var arr = event.target.id.split(UNDER_LINE);
            sourceRow = Number(arr[1]);
            sourceCol = Number(arr[2]);
        }
        return { sourceRow: sourceRow, sourceCol: sourceCol };
    };
    /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    CalendarComponent.prototype.getTargetFocusRowAndColumn = /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    function (event, row, col, rowCount, colCount) {
        /** @type {?} */
        var moveFocus = false;
        /** @type {?} */
        var targetRow = row;
        /** @type {?} */
        var targetCol = col;
        /** @type {?} */
        var keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.upArrow && row > 0) {
            moveFocus = true;
            targetRow--;
        }
        else if (keyCode === KeyCode.downArrow && row < rowCount) {
            moveFocus = true;
            targetRow++;
        }
        else if (keyCode === KeyCode.leftArrow && col > 0) {
            moveFocus = true;
            targetCol--;
        }
        else if (keyCode === KeyCode.rightArrow && col < colCount) {
            moveFocus = true;
            targetCol++;
        }
        return { moveFocus: moveFocus, targetRow: targetRow, targetCol: targetCol };
    };
    /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    CalendarComponent.prototype.focusCellElement = /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    function (type, row, col) {
        /** @type {?} */
        var elem = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);
        if (elem) {
            elem.focus();
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.selectDate = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // Date range
            /** @type {?} */
            var isBeginDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.end) &&
                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);
            if (isBeginDateInitialized && isEndDateInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = date;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else if (!isBeginDateInitialized) {
                // begin date
                this.selectedDateRange.begin = date;
                if (!isEndDateInitialized) {
                    this.selectedDateRange.end = date;
                }
                this.rangeDateSelection({
                    isBegin: true,
                    date: date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = date;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                else {
                    this.selectedDateRange.end = date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            // Single date
            this.selectedDate = date;
            if (!this.opts.showTime) {
                this.dateChanged(this.utilService.getDateModel(this.selectedDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
            }
        }
    };
    /**
     * @param {?} month
     * @return {?}
     */
    CalendarComponent.prototype.toSelectMonth = /**
     * @param {?} month
     * @return {?}
     */
    function (month) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            var isBeginMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.end);
            if (isBeginMonthInitialized && isEndMonthInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginMonthInitialized) {
                // begin date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier({ year: month.year, month: month.monthNbr }, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.selectedMonth = month;
            this.dateChanged(this.utilService.getDateModel({ year: month.year, month: month.monthNbr }, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    };
    /**
     * @param {?} year
     * @return {?}
     */
    CalendarComponent.prototype.toSelectYear = /**
     * @param {?} year
     * @return {?}
     */
    function (year) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            var isBeginYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.end);
            if (isBeginYearInitialized && isEndYearInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = year;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginYearInitialized) {
                // begin date
                this.selectedDateRange.begin = year;
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = year;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = year;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.dateChanged(this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    };
    /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    CalendarComponent.prototype.monthStartIdx = /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    function (y, m) {
        // Month start index
        /** @type {?} */
        var d = new Date();
        d.setDate(1);
        d.setMonth(m - 1);
        d.setFullYear(y);
        /** @type {?} */
        var idx = d.getDay() + this.sundayIdx();
        return idx >= 7 ? idx - 7 : idx;
    };
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    CalendarComponent.prototype.daysInMonth = /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    function (m, y) {
        // Return number of days of current month
        return new Date(y, m, 0).getDate();
    };
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    CalendarComponent.prototype.daysInPrevMonth = /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    function (m, y) {
        // Return number of days of the previous month
        /** @type {?} */
        var d = this.getDate(y, m, 1);
        d.setMonth(d.getMonth() - 1);
        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());
    };
    /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    CalendarComponent.prototype.isCurrDay = /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    function (d, m, y, cmo, today) {
        // Check is a given date the today
        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.getWidth = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;
        if (this.opts.dateRange && this.opts.showType !== 4) {
            return hasShortCuts ? '660px' : '574px';
        }
        else {
            return hasShortCuts ? '380px' : '287px';
        }
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.getToday = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var date = new Date();
        if (this.opts.showTime) {
            return {
                year: date.getFullYear(),
                month: date.getMonth() + 1,
                day: date.getDate(),
                hour: date.getHours(),
                minute: date.getMinutes(),
                second: date.getSeconds()
            };
        }
        else {
            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getDayNumber = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // Get day number: su=0, mo=1, tu=2, we=3 ...
        /** @type {?} */
        var d = this.getDate(date.year, date.month, date.day);
        return d.getDay();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getWeekday = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // Get weekday: su, mo, tu, we ...
        return this.weekDayOpts[this.getDayNumber(date)];
    };
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    CalendarComponent.prototype.getDate = /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    function (year, month, day) {
        // Creates a date object from given year, month and day
        return new Date(year, month - 1, day, 0, 0, 0, 0);
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.sundayIdx = /**
     * @return {?}
     */
    function () {
        // Index of Sunday day
        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;
    };
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateCalendar = /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (m, y, notifyChange, isSecondCalendar) {
        if (!isSecondCalendar) {
            this.dates.length = 0;
        }
        else {
            this.dates_range.length = 0;
        }
        /** @type {?} */
        var today = this.getToday();
        /** @type {?} */
        var monthStart = this.monthStartIdx(y, m);
        /** @type {?} */
        var dInThisM = this.daysInMonth(m, y);
        /** @type {?} */
        var dInPrevM = this.daysInPrevMonth(m, y);
        /** @type {?} */
        var dayNbr = 1;
        /** @type {?} */
        var cmo = MonthId.prev;
        for (var i = 1; i < 7; i++) {
            /** @type {?} */
            var week = [];
            if (i === 1) {
                // First week
                /** @type {?} */
                var pm = dInPrevM - monthStart + 1;
                // Previous month
                for (var j = pm; j <= dInPrevM; j++) {
                    /** @type {?} */
                    var date = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(j, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                }
                cmo = MonthId.curr;
                // Current month
                /** @type {?} */
                var daysLeft = 7 - week.length;
                for (var j = 0; j < daysLeft; j++) {
                    /** @type {?} */
                    var date = { year: y, month: m, day: dayNbr };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            else {
                // Rest of the weeks
                for (var j = 1; j < 8; j++) {
                    if (dayNbr > dInThisM) {
                        // Next month
                        dayNbr = 1;
                        cmo = MonthId.next;
                    }
                    /** @type {?} */
                    var date = {
                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,
                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,
                        day: dayNbr
                    };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            /** @type {?} */
            var weekNbr = this.opts.showWeekNumbers && this.opts.firstDayOfWeek === MO
                ? this.utilService.getWeekNumber(week[0].dateObj)
                : 0;
            if (!isSecondCalendar) {
                this.dates.push({ week: week, weekNbr: weekNbr, year: y });
            }
            else {
                this.dates_range.push({ week: week, weekNbr: weekNbr, year: y });
            }
        }
        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);
        if (notifyChange) {
            // Notify parent
            this.calendarViewChanged({
                year: y,
                month: m,
                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },
                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }
            });
        }
    };
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setDateViewHeaderBtnDisabledState = /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (m, y, isSecondCalendar) {
        /** @type {?} */
        var dpm = false;
        /** @type {?} */
        var dnm = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpm = this.utilService.isMonthDisabledByDisableUntil({
            year: m === 1 ? y - 1 : y,
            month: m === 1 ? 12 : m - 1,
            day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)
        }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    };
    /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setMonthViewHeaderBtnDisabledState = /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (y, isSecondCalendar) {
        /** @type {?} */
        var dpm = false;
        /** @type {?} */
        var dnm = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = y === minYear || dpm;
            this.nextViewDisabled = y === maxYear || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = y === minYear || dpm;
            this.nextViewDisabled_range = y === maxYear || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    };
    /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setYearViewHeaderBtnDisabledState = /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (yp, yn, isSecondCalendar) {
        /** @type {?} */
        var dpy = false;
        /** @type {?} */
        var dny = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);
        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = yp <= minYear || dpy;
            this.nextViewDisabled = yn >= maxYear || dny;
            this.prevDobViewDisabled = yp <= minYear || dpy;
            this.nextDobViewDisabled = yn >= maxYear || dny;
        }
        else {
            this.prevViewDisabled_range = yp <= minYear || dpy;
            this.nextViewDisabled_range = yn >= maxYear || dny;
            this.prevDobViewDisabled_range = yp <= minYear || dpy;
            this.nextDobViewDisabled_range = yn >= maxYear || dny;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onContainerClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onClickTimeBtn = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        if (this.opts.dateRange) {
            /** @type {?} */
            var beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            var endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);
            if (!beginIsInitializedDate || !endIsInitializedDate) {
                /** @type {?} */
                var now = new Date();
                // 直接点击确定显示本月和下月
                if (!beginIsInitializedDate) {
                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
                }
                /** @type {?} */
                var endYear = now.getFullYear();
                /** @type {?} */
                var endmonth = now.getMonth() + 1;
                if (endmonth >= 12) {
                    endYear = endYear + 1;
                    endmonth = 1;
                }
                // else {
                //     endmonth = endmonth + this.opts.monthRangeValue;
                // }
                this.selectedDateRange.end = tslib_1.__assign({}, this.selectedDateRange.begin);
                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };
                // 点击selectTime之前给dateRange赋两个时间值
                this.timeVlaue = this.getTimeStr(now);
                this.timeVlaue_range = this.getTimeStr(now);
            }
        }
        else {
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                /** @type {?} */
                var now = new Date();
                // 点击selectTime之前赋值
                this.timeVlaue = this.getTimeStr(now);
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (!this.timeVlaue) {
            /** @type {?} */
            var now = new Date();
            // 点击selectTime之前赋值
            this.timeVlaue = this.getTimeStr(now);
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (this.selectYear) {
            this.selectYear = false;
        }
        if (this.selectMonth) {
            this.selectMonth = false;
        }
        if (this.selectYear_range) {
            this.selectYear_range = false;
        }
        if (this.selectMonth_range) {
            this.selectMonth_range = false;
        }
        this.selectTime = !this.selectTime;
        this.cdr.detectChanges();
    };
    /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    CalendarComponent.prototype.getTimeValue = /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    function (isDateRange) {
        /** @type {?} */
        var t = { start: null, end: null };
        if (this.timeVlaue) {
            /** @type {?} */
            var timeArr = this.timeVlaue.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
            if (timeArr.length >= 2) {
                t.start = {
                    hour: timeArr[0],
                    minute: timeArr[1],
                    second: timeArr[2] ? timeArr[2] : 0
                };
            }
        }
        else {
            /** @type {?} */
            var nowDate = new Date();
            /** @type {?} */
            var hour = nowDate.getHours();
            /** @type {?} */
            var minute = nowDate.getMinutes();
            /** @type {?} */
            var second = nowDate.getSeconds();
            if (this.opts.dateRange) {
                t.start = { hour: 0, minute: 0, second: 0 };
            }
            else {
                t.start = { hour: hour, minute: minute, second: second };
            }
        }
        if (isDateRange) {
            if (this.timeVlaue_range) {
                /** @type {?} */
                var timeArr_range = this.timeVlaue_range.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
                if (timeArr_range.length >= 2) {
                    t.end = {
                        hour: timeArr_range[0],
                        minute: timeArr_range[1],
                        second: timeArr_range[2] ? timeArr_range[2] : 0
                    };
                }
            }
            else {
                /** @type {?} */
                var hour = 23;
                /** @type {?} */
                var minute = 59;
                /** @type {?} */
                var second = 59;
                t.end = { hour: hour, minute: minute, second: second };
            }
        }
        return t;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onClickOkBtn = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        /** @type {?} */
        var timeObj = null;
        /** @type {?} */
        var timeObj_range = null;
        /** @type {?} */
        var selectedDate = null;
        /** @type {?} */
        var selectedDate_range = null;
        if (this.opts.showTime) {
            var _a = this.getTimeValue(this.opts.dateRange), start = _a.start, end = _a.end;
            timeObj = start;
            timeObj_range = end;
        }
        var _b = this.opts, dateFormat = _b.dateFormat, monthLabels = _b.monthLabels, dateRangeDatesDelimiter = _b.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _b.closeSelectorOnDateSelect, returnFormat = _b.returnFormat;
        if (!this.opts.dateRange) {
            selectedDate = tslib_1.__assign({}, this.initializedDate(this.selectedDate), timeObj);
            /** @type {?} */
            var isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
            /** @type {?} */
            var earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
            selectedDate = !isInDisableRange
                ? selectedDate
                : tslib_1.__assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
        }
        else {
            /** @type {?} */
            var begin = tslib_1.__assign({}, this.initializedDate(this.selectedDateRange.begin), timeObj);
            /** @type {?} */
            var end = tslib_1.__assign({}, this.initializedDate(this.selectedDateRange.end, begin), timeObj_range);
            selectedDate_range = { begin: begin, end: end };
        }
        /** @type {?} */
        var dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    };
    /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    CalendarComponent.prototype.initializedDate = /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    function (date, otherDate) {
        if (otherDate === void 0) { otherDate = { year: 0, month: 0, day: 0 }; }
        /** @type {?} */
        var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {
            /** @type {?} */
            var year = new Date().getFullYear();
            /** @type {?} */
            var month = new Date().getMonth() + 1;
            /** @type {?} */
            var day = new Date().getDate();
            return this.utilService.isDisabledDate({ year: year, month: month, day: day }, this.opts) ? this.opts.disableUntil : { year: year, month: month, day: day };
        }
        else if (!this.utilService.isInitializedDate(date)) {
            /** @type {?} */
            var year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;
            /** @type {?} */
            var month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;
            if (!date.month) {
                month = otherDate.month;
            }
            /** @type {?} */
            var day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;
            return this.utilService.isDisabledDate({ year: year, month: month, day: day }, this.opts) ? this.opts.disableSince : { year: year, month: month, day: day };
        }
        return date;
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.setTime = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, returnFormat = _a.returnFormat;
        if (date instanceof Date) {
            if (this.opts.showType !== 4 && !this.opts.dateRange) {
                /** @type {?} */
                var targetDate = void 0;
                if (this.opts.showTime) {
                    targetDate = {
                        year: date.getFullYear(),
                        month: date.getMonth() + 1,
                        day: date.getDate(),
                        hour: date.getHours(),
                        minute: date.getMinutes(),
                        second: date.getSeconds()
                    };
                }
                else {
                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
                }
                /** @type {?} */
                var dateModel = this.utilService.getDateModel(targetDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
            else {
                // 启用周选择时  快捷按钮参数为单个日期
                /** @type {?} */
                var dateModel = this.utilService.getDateModel(null, this.utilService.getNowWeekTime(date), dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
        }
        else if (date instanceof Object && this.opts.dateRange) {
            /** @type {?} */
            var targetDateRange = void 0;
            var begin = date.begin, end = date.end;
            if (!begin || !end) {
                return;
            }
            if (this.opts.showTime) {
                targetDateRange = {
                    begin: {
                        year: begin.getFullYear(),
                        month: begin.getMonth() + 1,
                        day: begin.getDate(),
                        hour: begin.getHours(),
                        minute: begin.getMinutes(),
                        second: begin.getSeconds()
                    },
                    end: {
                        year: end.getFullYear(),
                        month: end.getMonth() + 1,
                        day: end.getDate(),
                        hour: end.getHours(),
                        minute: end.getMinutes(),
                        second: end.getSeconds()
                    }
                };
            }
            else {
                targetDateRange = {
                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },
                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }
                };
            }
            /** @type {?} */
            var dateModel = this.utilService.getDateModel(null, targetDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
            this.dateChanged(dateModel, closeSelectorOnDateSelect);
        }
        else {
            console.warn('参数必须符合要求！');
        }
    };
    CalendarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-datepicker-calendar',
                    template: "<div\r\n    class=\"f-datepicker-container\"\r\n    #selectorEl\r\n    [ngStyle]=\"{\r\n        top: selectorPos.top + 'px',\r\n        left: selectorPos.left + 'px',\r\n        width: getWidth()\r\n    }\"\r\n    (keyup)=\"onCloseSelector($event)\"\r\n    tabindex=\"0\"\r\n    [ngClass]=\"'container-position-' + selectorPos.position\"\r\n    (click)=\"onContainerClick($event)\"\r\n>\r\n    <lib-selection-sidebar\r\n        *ngIf=\"opts.shortcuts[0]\"\r\n        [opts]=\"opts\"\r\n        (setTime)=\"setTime($event)\"\r\n    ></lib-selection-sidebar>\r\n    <div\r\n        class=\"f-datepicker-content\"\r\n        [ngStyle]=\"{\r\n            'margin-left': opts.shortcuts[0] ? '100px' : 0\r\n        }\"\r\n    >\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClicked($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n        >\r\n        </time-picker-panel>\r\n        <!-- <div class=\"f-datepicker-commitBtn-wrapper\" *ngIf=\"opts.showTime\">\r\n            <button (click)=\"selectTime=!selectTime\" class=\"f-datepicker-commitBtn\">\r\n                {{ selectTime? '\u9009\u62E9\u65E5\u671F' : '\u9009\u62E9\u65F6\u95F4' }}\r\n            </button>\r\n            <button (click)=\"onClickOk()\" class=\"f-datepicker-commitBtn\">\r\n                OK\r\n            </button>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"f-datepicker-content\" *ngIf=\"opts.dateRange && opts.showType !== 4\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [visibleMonth]=\"visibleMonth_range\"\r\n            [selectMonth]=\"selectMonth_range\"\r\n            [selectYear]=\"selectYear_range\"\r\n            [prevViewDisabled]=\"prevViewDisabled_range\"\r\n            [nextViewDisabled]=\"nextViewDisabled_range\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled_range\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled_range\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked(true)\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked(true)\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth_range && !selectYear_range && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates_range\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (dayCellClicked)=\"onDayCellClicked($event, true)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave(true)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth_range\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, true)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave(true)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear_range\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event, true)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave(true)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue_range\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n            #endTimeRef\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" *ngIf=\"opts.showTime\">\r\n        <button\r\n            (click)=\"onClickTimeBtn($event)\"\r\n            class=\"btn btn-link f-datepicker-select-btn\"\r\n        >\r\n            {{\r\n                selectTime\r\n                    ? opts.dateBtnText\r\n                        ? opts.dateBtnText\r\n                        : \"Select Date\"\r\n                    : opts.timeBtnText\r\n                    ? opts.timeBtnText\r\n                    : \"Select Time\"\r\n            }}\r\n        </button>\r\n        <button\r\n            (click)=\"onClickOkBtn($event)\"\r\n            class=\"btn btn-primary f-datepicker-makesure-btn\"\r\n        >\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>\r\n",
                    providers: [UtilService],
                    encapsulation: ViewEncapsulation.None
                }] }
    ];
    /** @nocollapse */
    CalendarComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: UtilService }
    ]; };
    CalendarComponent.propDecorators = {
        selectorEl: [{ type: ViewChild, args: ['selectorEl',] }],
        styleEl: [{ type: ViewChild, args: ['styleEl',] }],
        endTimeRef: [{ type: ViewChild, args: ['endTimeRef',] }],
        position: [{ type: HostBinding, args: ['style.position',] }]
    };
    return CalendarComponent;
}());
export { CalendarComponent };
if (false) {
    /** @type {?} */
    CalendarComponent.prototype.selectorEl;
    /** @type {?} */
    CalendarComponent.prototype.styleEl;
    /** @type {?} */
    CalendarComponent.prototype.endTimeRef;
    /** @type {?} */
    CalendarComponent.prototype.position;
    /** @type {?} */
    CalendarComponent.prototype.opts;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedDate;
    /** @type {?} */
    CalendarComponent.prototype.selectedDateRange;
    /** @type {?} */
    CalendarComponent.prototype.selectedWeek;
    /** @type {?} */
    CalendarComponent.prototype.weekDays;
    /** @type {?} */
    CalendarComponent.prototype.dates;
    /** @type {?} */
    CalendarComponent.prototype.dates_range;
    /** @type {?} */
    CalendarComponent.prototype.months;
    /** @type {?} */
    CalendarComponent.prototype.months_range;
    /** @type {?} */
    CalendarComponent.prototype.years;
    /** @type {?} */
    CalendarComponent.prototype.years_range;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue_range;
    /** @type {?} */
    CalendarComponent.prototype.dayIdx;
    /** @type {?} */
    CalendarComponent.prototype.weekDayOpts;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectYear;
    /** @type {?} */
    CalendarComponent.prototype.selectYear_range;
    /** @type {?} */
    CalendarComponent.prototype.selectTime;
    /** @type {?} */
    CalendarComponent.prototype.dateChanged;
    /** @type {?} */
    CalendarComponent.prototype.calendarViewChanged;
    /** @type {?} */
    CalendarComponent.prototype.rangeDateSelection;
    /** @type {?} */
    CalendarComponent.prototype.closedByEsc;
    /** @type {?} */
    CalendarComponent.prototype.selectorPos;
    /** @type {?} */
    CalendarComponent.prototype.scrollDiff;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.utilService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFNL0gsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RixPQUFPLEVBQ0gsR0FBRyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQzFGLGNBQWMsRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFDeEUsTUFBTSwyQkFBMkIsQ0FBQztBQUNuQyxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNsRSxPQUFPLEVBQUUsT0FBTyxFQUFhLE1BQU0sV0FBVyxDQUFDO0FBQy9DO0lBMEZJLDJCQUFvQixRQUFtQixFQUFVLEdBQXNCLEVBQVUsV0FBd0I7UUFBekcsaUJBQThHO1FBQTFGLGFBQVEsR0FBUixRQUFRLENBQVc7UUFBVSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBL0UxRSxhQUFRLEdBQUcsUUFBUSxDQUFDO1FBR25ELGlCQUFZLEdBQWEsRUFBRSxRQUFRLEVB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LFNBQUMsZ0JBQWdCOztJQW1uRGpDLHdCQUFDO0NBQUEsQUE5bkRELElBOG5EQztTQXhuRFksaUJBQWlCOzs7SUFDMUIsdUNBQWdEOztJQUNoRCxvQ0FBMEM7O0lBQzFDLHVDQUE4RDs7SUFFOUQscUNBQW1EOztJQUVuRCxpQ0FBaUI7O0lBQ2pCLHlDQUEyRjs7SUFDM0YsK0NBQWlHOztJQUNqRywwQ0FBbUQ7O0lBQ25ELGdEQUF5RDs7SUFDekQseUNBQXNEOztJQUN0RCw4Q0FBK0c7O0lBQy9HLHlDQUFnRDs7SUFDaEQscUNBQTZCOztJQUM3QixrQ0FBMkI7O0lBQzNCLHdDQUFpQzs7SUFDakMsbUNBQWdDOztJQUNoQyx5Q0FBc0M7O0lBQ3RDLGtDQUEwQzs7SUFDMUMsd0NBQWdEOztJQUNoRCxzQ0FBa0I7O0lBQ2xCLDRDQUF3Qjs7SUFFeEIsbUNBQVc7O0lBQ1gsd0NBQTBEOztJQUUxRCx3Q0FBb0I7O0lBQ3BCLDhDQUEwQjs7SUFDMUIsdUNBQW1COztJQUNuQiw2Q0FBeUI7O0lBQ3pCLHVDQUFtQjs7SUFFbkIsd0NBQXdEOztJQUN4RCxnREFBMkQ7O0lBQzNELCtDQUF5RDs7SUFDekQsd0NBQXdCOztJQUN4Qix3Q0FBd0M7O0lBQ3hDLHVDQUFlOztJQUVmLDZDQUF5Qjs7SUFDekIsNkNBQXlCOztJQUN6QixnREFBNEI7O0lBQzVCLGdEQUE0Qjs7SUFFNUIsbURBQStCOztJQUMvQixtREFBK0I7O0lBQy9CLHNEQUFrQzs7SUFDbEMsc0RBQWtDOztJQVVsQywwQ0FNQzs7SUFFRCw0Q0FNQzs7SUFFRCw0Q0FNQzs7Ozs7SUFHVyxxQ0FBMkI7Ozs7O0lBQUUsZ0NBQThCOzs7OztJQUFFLHdDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgVmlld0VuY2Fwc3VsYXRpb24sIFZpZXdDaGlsZCwgUmVuZGVyZXIyLCBDaGFuZ2VEZXRlY3RvclJlZiwgSG9zdEJpbmRpbmcgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICAgIElNeURhdGUsIElNeURhdGVSYW5nZSwgSU15TW9udGgsIElNeUNhbGVuZGFyRGF5LCBJTXlDYWxlbmRhck1vbnRoLCBJTXlDYWxlbmRhclllYXIsXHJcbiAgICBJTXlXZWVrLCBJTXlPcHRpb25zLCBJTXlTZWxlY3RvclBvc2l0aW9uLCBJTXlDYWxlbmRhclZpZXdDaGFuZ2VkLCBJTXlSYW5nZURhdGVTZWxlY3Rpb24sIElNeURhdGVNb2RlbCxcclxuICAgIElNeU1vbnRoUm93XHJcbn0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHsgVXRpbFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHsgRGVmYXVsdFZpZXcsIEtleUNvZGUsIE1vbnRoSWQsIFJlc2V0RGF0ZVR5cGUgfSBmcm9tICcuLi8uLi9lbnVtcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHtcclxuICAgIERPVCwgVU5ERVJfTElORSwgRCwgTSwgWSwgREFURV9ST1dfQ09VTlQsIERBVEVfQ09MX0NPVU5ULCBNT05USF9ST1dfQ09VTlQsIE1PTlRIX0NPTF9DT1VOVCxcclxuICAgIFlFQVJfUk9XX0NPVU5ULCBZRUFSX0NPTF9DT1VOVCwgU1UsIE1PLCBUVSwgV0UsIFRILCBGUiwgU0EsIEVNUFRZX1NUUiwgU1RZTEVcclxufSBmcm9tICcuLi8uLi9jb25zdGFudHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgVGltZVBpY2tlclBhbmVsQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS10aW1lLXBpY2tlcic7XHJcbmltcG9ydCB7IGZsYXR0ZW4sIGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGF0ZXBpY2tlci1jYWxlbmRhcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgcHJvdmlkZXJzOiBbVXRpbFNlcnZpY2VdLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXJDb21wb25lbnQge1xyXG4gICAgQFZpZXdDaGlsZCgnc2VsZWN0b3JFbCcpIHNlbGVjdG9yRWw6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdzdHlsZUVsJykgc3R5bGVFbDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2VuZFRpbWVSZWYnKSBlbmRUaW1lUmVmOiBUaW1lUGlja2VyUGFuZWxDb21wb25lbnQ7XHJcblxyXG4gICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5wb3NpdGlvbicpIHBvc2l0aW9uID0gJ3N0YXRpYyc7XHJcblxyXG4gICAgb3B0czogSU15T3B0aW9ucztcclxuICAgIHZpc2libGVNb250aDogSU15TW9udGggPSB7IG1vbnRoVHh0OiBFTVBUWV9TVFIsIG1vbnRoTmJyOiAwLCB5ZWFyOiAwLCB5ZWFyVHh0OiBFTVBUWV9TVFIgfTtcclxuICAgIHZpc2libGVNb250aF9yYW5nZTogSU15TW9udGggPSB7IG1vbnRoVHh0OiBFTVBUWV9TVFIsIG1vbnRoTmJyOiAwLCB5ZWFyOiAwLCB5ZWFyVHh0OiBFTVBUWV9TVFIgfTtcclxuICAgIHNlbGVjdGVkTW9udGg6IElNeU1vbnRoID0geyBtb250aE5icjogMCwgeWVhcjogMCB9O1xyXG4gICAgc2VsZWN0ZWRNb250aF9yYW5nZTogSU15TW9udGggPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiAwIH07XHJcbiAgICBzZWxlY3RlZERhdGU6IElNeURhdGUgPSB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfTtcclxuICAgIHNlbGVjdGVkRGF0ZVJhbmdlOiBJTXlEYXRlUmFuZ2UgPSB7IGJlZ2luOiB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSwgZW5kOiB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSB9O1xyXG4gICAgc2VsZWN0ZWRXZWVrOiBJTXlXZWVrID0geyB3ZWVrTmJyOiAwLCB5ZWFyOiAwIH07XHJcbiAgICB3ZWVrRGF5czogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgZGF0ZXM6IEFycmF5PElNeVdlZWs+ID0gW107XHJcbiAgICBkYXRlc19yYW5nZTogQXJyYXk8SU15V2Vlaz4gPSBbXTtcclxuICAgIG1vbnRoczogQXJyYXk8SU15TW9udGhSb3c+ID0gW107XHJcbiAgICBtb250aHNfcmFuZ2U6IEFycmF5PElNeU1vbnRoUm93PiA9IFtdO1xyXG4gICAgeWVhcnM6IEFycmF5PEFycmF5PElNeUNhbGVuZGFyWWVhcj4+ID0gW107XHJcbiAgICB5ZWFyc19yYW5nZTogQXJyYXk8QXJyYXk8SU15Q2FsZW5kYXJZZWFyPj4gPSBbXTtcclxuICAgIHRpbWVWbGF1ZTogc3RyaW5nO1xyXG4gICAgdGltZVZsYXVlX3JhbmdlOiBzdHJpbmc7XHJcblxyXG4gICAgZGF5SWR4ID0gMDtcclxuICAgIHdlZWtEYXlPcHRzOiBBcnJheTxzdHJpbmc+ID0gW1NVLCBNTywgVFUsIFdFLCBUSCwgRlIsIFNBXTtcclxuXHJcbiAgICBzZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgIHNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgIHNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgIHNlbGVjdFRpbWUgPSBmYWxzZTtcclxuXHJcbiAgICBkYXRlQ2hhbmdlZDogKGRtOiBJTXlEYXRlTW9kZWwsIGNsb3NlOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgY2FsZW5kYXJWaWV3Q2hhbmdlZDogKGN2YzogSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCkgPT4gdm9pZDtcclxuICAgIHJhbmdlRGF0ZVNlbGVjdGlvbjogKHJkczogSU15UmFuZ2VEYXRlU2VsZWN0aW9uKSA9PiB2b2lkO1xyXG4gICAgY2xvc2VkQnlFc2M6ICgpID0+IHZvaWQ7XHJcbiAgICBzZWxlY3RvclBvczogSU15U2VsZWN0b3JQb3NpdGlvbiA9IG51bGw7XHJcbiAgICBzY3JvbGxEaWZmID0gMDtcclxuXHJcbiAgICBwcmV2Vmlld0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICBuZXh0Vmlld0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICBwcmV2RG9iVmlld0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICBuZXh0RG9iVmlld0Rpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgcHJldlZpZXdEaXNhYmxlZF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgbmV4dFZpZXdEaXNhYmxlZF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgcHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgbmV4dERvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IGZhbHNlO1xyXG5cclxuXHJcbiAgICBnZXRUaW1lU3RyKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRIb3VycygpKTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRNaW51dGVzKCkpO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLmdldFNlY29uZHMoKSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2hvdXJ9OiR7bWludXRlfToke3NlY29uZH1gO1xyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pel5pyf5pe26Ze05o6n5Lu25Lit55qE5pe26Ze05q6155qE5bCP5pe2XHJcbiAgICBkaXNhYmxlZEhvdXJzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZEhvdXJzKG1pbiwgbWF4LCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOWIhumSn1xyXG4gICAgZGlzYWJsZWRNaW51dGVzID0gKGhvdXI6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZE1pbnV0ZXMobWluLCBtYXgsIGhvdXIsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pel5pyf5pe26Ze05o6n5Lu25Lit55qE5pe26Ze05q6155qE56eSXHJcbiAgICBkaXNhYmxlZFNlY29uZHMgPSAoaG91cjogbnVtYmVyLCBtaW51dGU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZFNlY29uZHMobWluLCBtYXgsIGhvdXIsIG1pbnV0ZSwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLCBwcml2YXRlIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZSkgeyB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZShcclxuICAgICAgICBvcHRzOiBJTXlPcHRpb25zLFxyXG4gICAgICAgIGRlZmF1bHRNb250aDogc3RyaW5nLFxyXG4gICAgICAgIHNlbGVjdG9yUG9zOiBJTXlTZWxlY3RvclBvc2l0aW9uLFxyXG4gICAgICAgIGlucHV0VmFsdWU6IHN0cmluZyxcclxuICAgICAgICBkYzogKGRtOiBJTXlEYXRlTW9kZWwsIGNsb3NlOiBib29sZWFuKSA9PiB2b2lkLFxyXG4gICAgICAgIGN2YzogKGN2YzogSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCkgPT4gdm9pZCxcclxuICAgICAgICByZHM6IChyZHM6IElNeVJhbmdlRGF0ZVNlbGVjdGlvbikgPT4gdm9pZCxcclxuICAgICAgICBjYmU6ICgpID0+IHZvaWRcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvclBvcyA9IHNlbGVjdG9yUG9zO1xyXG4gICAgICAgIHRoaXMud2Vla0RheXMubGVuZ3RoID0gMDtcclxuICAgICAgICBjb25zdCB7IGRlZmF1bHRWaWV3LCBkYXRlUmFuZ2UsIGZpcnN0RGF5T2ZXZWVrLCBkYXlMYWJlbHMsIHN0eWxlc0RhdGEsIHllYXJUeHQgfSA9IHRoaXMub3B0cztcclxuICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyVHh0ID0geWVhclR4dDtcclxuICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyVHh0ID0geWVhclR4dDtcclxuICAgICAgICAvLyBpZiAoc3R5bGVzRGF0YS5zdHlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHN0eWxlRWxUZW1wOiBhbnkgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoU1RZTEUpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKHN0eWxlRWxUZW1wLCB0aGlzLnJlbmRlcmVyLmNyZWF0ZVRleHQoc3R5bGVzRGF0YS5zdHlsZXMpKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwubmF0aXZlRWxlbWVudCwgc3R5bGVFbFRlbXApO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXlJZHggPSB0aGlzLndlZWtEYXlPcHRzLmluZGV4T2YoZmlyc3REYXlPZldlZWspO1xyXG4gICAgICAgIGlmICh0aGlzLmRheUlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgbGV0IGlkeDogbnVtYmVyID0gdGhpcy5kYXlJZHg7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53ZWVrRGF5T3B0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrRGF5cy5wdXNoKGRheUxhYmVsc1t0aGlzLndlZWtEYXlPcHRzW2lkeF1dKTtcclxuICAgICAgICAgICAgICAgIGlkeCA9IHRoaXMud2Vla0RheU9wdHNbaWR4XSA9PT0gU0EgPyAwIDogaWR4ICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgY29uc3QgaXNJbkRpc2FibGVSYW5nZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUodG9kYXksIHRoaXMub3B0cyk7XHJcbiAgICAgICAgdG9kYXkgPSAhaXNJbkRpc2FibGVSYW5nZSA/IHRvZGF5IDogdGhpcy51dGlsU2VydmljZS5nZXROZWFyRGF0ZSh0b2RheSwgdGhpcy5vcHRzLmRpc2FibGVVbnRpbCwgdGhpcy5vcHRzLmRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoZGVmYXVsdFZpZXcpIHtcclxuICAgICAgICAgICAgY2FzZSBEZWZhdWx0Vmlldy5Nb250aDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEZWZhdWx0Vmlldy5ZZWFyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogMCwgeWVhcjogdG9kYXkueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMCwgeWVhcjogdG9kYXkueWVhciArIDEwIH07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IHRvZGF5Lm1vbnRoLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICBpZiAodG9kYXkubW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAxLCB5ZWFyOiB0b2RheS55ZWFyICsgMSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiB0b2RheS5tb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWUsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVmYXVsdE1vbnRoICYmIGRlZmF1bHRNb250aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0gdGhpcy51dGlsU2VydmljZS5wYXJzZURlZmF1bHRNb250aChkZWZhdWx0TW9udGgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhcnNlRGVmYXVsdE1vbnRoKGRlZmF1bHRNb250aCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIgPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIgPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID0gdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyICsgdGhpcy5vcHRzLm1vbnRoUmFuZ2VWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gU2luZ2xlIGRhdGUgbW9kZVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZChpbnB1dFZhbHVlLCB0aGlzLm9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaG91ciA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLmhvdXIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUubWludXRlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLnNlY29uZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IGAke2hvdXJ9OiR7bWludXRlfToke3NlY29uZH1gO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogZGF0ZS5tb250aCwgeWVhcjogZGF0ZS55ZWFyIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBEYXRlIHJhbmdlIG1vZGVcclxuICAgICAgICAgICAgY29uc3QgeyBiZWdpbiwgZW5kIH0gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkRGF0ZVJhbmdlKGlucHV0VmFsdWUsIHRoaXMub3B0cyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGJlZ2luKSAmJiB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGVuZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UgPSB7IGJlZ2luLCBlbmQgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oYmVnaW4uaG91cik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oYmVnaW4ubWludXRlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhiZWdpbi5zZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9ob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGVuZC5ob3VyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9taW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZW5kLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfc2Vjb25kID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGVuZC5zZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSBgJHtfaG91cn06JHtfbWludXRlfToke19zZWNvbmR9YDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiBiZWdpbi5tb250aCwgeWVhcjogYmVnaW4ueWVhciB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChiZWdpbi5tb250aCA9PT0gZW5kLm1vbnRoICYmIGJlZ2luLnllYXIgPT09IGVuZC55ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZC5tb250aCA+PSAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAxLCB5ZWFyOiBlbmQueWVhciArIDEgfTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5keWVhciA9IGVuZC55ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmR5ZWFyID0gZW5keWVhciArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IGVuZC5tb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWUsIHllYXI6IGVuZHllYXIgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuTW9udGggJiYgYmVnaW4ueWVhciA9PT0gZW5kLnllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogZW5kLm1vbnRoLCB5ZWFyOiBlbmQueWVhciArIDEgfTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiBlbmQubW9udGgsIHllYXI6IGVuZC55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla05iciA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKGJlZ2luKSA9PT0gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIoYmVnaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXZWVrID0geyB3ZWVrTmJyLCB5ZWFyOiBiZWdpbi55ZWFyIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQgPSBkYztcclxuICAgICAgICB0aGlzLmNhbGVuZGFyVmlld0NoYW5nZWQgPSBjdmM7XHJcbiAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24gPSByZHM7XHJcbiAgICAgICAgdGhpcy5jbG9zZWRCeUVzYyA9IGNiZTtcclxuICAgICAgICB0aGlzLnNldENhbGVuZGFyVmlzaWJsZU1vbnRoKCk7XHJcblxyXG4gICAgICAgIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuTW9udGgpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk1vbnRoVmlld0J0bkNsaWNrZWQoKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vbnRoVmlld0J0bkNsaWNrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGRlZmF1bHRWaWV3ID09PSBEZWZhdWx0Vmlldy5ZZWFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25ZZWFyVmlld0J0bkNsaWNrZWQoKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblllYXJWaWV3QnRuQ2xpY2tlZCh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldERhdGVWYWx1ZSh2YWx1ZTogUmVzZXREYXRlVHlwZSk6IHZvaWQge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5zaW5nbGVEYXRlIHx8IHZhbHVlID09PSBSZXNldERhdGVUeXBlLmJvdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgPT09IFJlc2V0RGF0ZVR5cGUuZGF0ZVJhbmdlIHx8IHZhbHVlID09PSBSZXNldERhdGVUeXBlLmJvdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRNb250aFllYXJTZWxlY3QoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoVmlld0J0bkNsaWNrZWQoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdFRpbWUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9ICF0aGlzLnNlbGVjdE1vbnRoO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyID0gdGhpcy5zZWxlY3RlZE1vbnRoLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIgPSB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW9udGhDZWxsQ2xpY2tlZChjZWxsOiBJTXlDYWxlbmRhck1vbnRoLCBpc1NlY29uZENhbGVuZGFyOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWM6IGJvb2xlYW4gPSBjZWxsLm5iciAhPT0gbW9udGhOYnI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1tjZWxsLm5icl0sXHJcbiAgICAgICAgICAgICAgICBtb250aE5icjogY2VsbC5uYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyLFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoLnllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2VsZWN0TW9udGgodGhpcy52aXNpYmxlTW9udGgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKGNlbGwubmJyLCB5ZWFyLCBtYywgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1jOiBib29sZWFuID0gY2VsbC5uYnIgIT09IG1vbnRoTmJyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbY2VsbC5uYnJdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IGNlbGwubmJyLFxyXG4gICAgICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b1NlbGVjdE1vbnRoKHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihjZWxsLm5iciwgeWVhciwgbWMsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW9udGhDZWxsS2V5RG93bihjZWxsOiBJTXlDYWxlbmRhck1vbnRoKSB7XHJcbiAgICAgICAgLy8gTWFrZSBwb3NzaWJsZSB0byBtb3ZlIGZvY3VzIGJ5IGFycm93IGtleXNcclxuICAgICAgICBjb25zdCB7IHNvdXJjZVJvdywgc291cmNlQ29sIH0gPSB0aGlzLmdldFNvdXJjZVJvd0FuZENvbHVtbkZyb21FdmVudChldmVudCk7XHJcbiAgICAgICAgY29uc3QgeyBtb3ZlRm9jdXMsIHRhcmdldFJvdywgdGFyZ2V0Q29sIH0gPSB0aGlzLmdldFRhcmdldEZvY3VzUm93QW5kQ29sdW1uKFxyXG4gICAgICAgICAgICBldmVudCxcclxuICAgICAgICAgICAgc291cmNlUm93LFxyXG4gICAgICAgICAgICBzb3VyY2VDb2wsXHJcbiAgICAgICAgICAgIE1PTlRIX1JPV19DT1VOVCxcclxuICAgICAgICAgICAgTU9OVEhfQ09MX0NPVU5UXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG1vdmVGb2N1cykge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbEVsZW1lbnQoTSwgdGFyZ2V0Um93LCB0YXJnZXRDb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblllYXJWaWV3QnRuQ2xpY2tlZChpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0VGltZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyID0gdGhpcy5zZWxlY3RlZE1vbnRoLnllYXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy52aXNpYmxlTW9udGgueWVhciwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIodGhpcy52aXNpYmxlTW9udGgubW9udGhOYnIsIHRoaXMudmlzaWJsZU1vbnRoLnllYXIsIGZhbHNlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gdGhpcy5vcHRzLnNob3dUeXBlID09PSAzID8gdHJ1ZSA6ICF0aGlzLnNlbGVjdFllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSAhdGhpcy5zZWxlY3RNb250aDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0aGlzLnNlbGVjdFllYXIgPSAhdGhpcy5zZWxlY3RZZWFyO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLm1vbnRoTmJyLCB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLCBmYWxzZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gdGhpcy5vcHRzLnNob3dUeXBlID09PSAzID8gdHJ1ZSA6ICF0aGlzLnNlbGVjdFllYXJfcmFuZ2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSAhdGhpcy5zZWxlY3RNb250aF9yYW5nZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25ZZWFyQ2VsbENsaWNrZWQoY2VsbDogSU15Q2FsZW5kYXJZZWFyLCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyLCBtb250aFR4dCB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB5YzogYm9vbGVhbiA9IGNlbGwueWVhciAhPT0geWVhcjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGggPSB7IG1vbnRoVHh0LCBtb250aE5iciwgeWVhcjogY2VsbC55ZWFyLCB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dCB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGgueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RZZWFyKHsgeWVhcjogdGhpcy52aXNpYmxlTW9udGgueWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCBjZWxsLnllYXIsIHljLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciwgbW9udGhUeHQgfSA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeWM6IGJvb2xlYW4gPSBjZWxsLnllYXIgIT09IHllYXI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQsXHJcbiAgICAgICAgICAgICAgICBtb250aE5icixcclxuICAgICAgICAgICAgICAgIHllYXI6IGNlbGwueWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b1NlbGVjdFllYXIoeyB5ZWFyOiB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobW9udGhOYnIsIGNlbGwueWVhciwgeWMsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25ZZWFyQ2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJZZWFyKSB7XHJcbiAgICAgICAgLy8gTWFrZSBwb3NzaWJsZSB0byBtb3ZlIGZvY3VzIGJ5IGFycm93IGtleXNcclxuICAgICAgICBjb25zdCB7IHNvdXJjZVJvdywgc291cmNlQ29sIH0gPSB0aGlzLmdldFNvdXJjZVJvd0FuZENvbHVtbkZyb21FdmVudChldmVudCk7XHJcbiAgICAgICAgY29uc3QgeyBtb3ZlRm9jdXMsIHRhcmdldFJvdywgdGFyZ2V0Q29sIH0gPSB0aGlzLmdldFRhcmdldEZvY3VzUm93QW5kQ29sdW1uKFxyXG4gICAgICAgICAgICBldmVudCxcclxuICAgICAgICAgICAgc291cmNlUm93LFxyXG4gICAgICAgICAgICBzb3VyY2VDb2wsXHJcbiAgICAgICAgICAgIFlFQVJfUk9XX0NPVU5ULFxyXG4gICAgICAgICAgICBZRUFSX0NPTF9DT1VOVFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChtb3ZlRm9jdXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c0NlbGxFbGVtZW50KFksIHRhcmdldFJvdywgdGFyZ2V0Q29sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0b2RheTogSU15RGF0ZSA9IHRoaXMuZ2V0VG9kYXkoKTtcclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpvbmUtdmFyaWFibGUtcGVyLWRlY2xhcmF0aW9uXHJcbiAgICAgICAgbGV0IHllYXI6IG51bWJlciwgbW9udGhOYnI6IG51bWJlcjtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5tb250aHMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgeWVhciA9IHRoaXMudmlzaWJsZU1vbnRoLnllYXI7XHJcbiAgICAgICAgICAgIG1vbnRoTmJyID0gdGhpcy52aXNpYmxlTW9udGgubW9udGhOYnI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tb250aHNfcmFuZ2UubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgeWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIG1vbnRoTmJyID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UubW9udGhOYnI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMjsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdzogQXJyYXk8SU15Q2FsZW5kYXJNb250aD4gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPCBpICsgMzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZDogYm9vbGVhbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVVbnRpbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyB5ZWFyLCBtb250aDogaiwgZGF5OiB0aGlzLmRheXNJbk1vbnRoKGosIHllYXIpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbnRpbFxyXG4gICAgICAgICAgICAgICAgICAgICkgfHwgdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXIsIG1vbnRoOiBqLCBkYXk6IDEgfSwgZGlzYWJsZVNpbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByb3cucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmJyOiBqLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMub3B0cy5tb250aExhYmVsc1tqXSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyTW9udGg6IGogPT09IHRvZGF5Lm1vbnRoICYmIHllYXIgPT09IHRvZGF5LnllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhPYmo6IHsgeWVhciwgbW9udGg6IGogfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vbnRocy5wdXNoKHsgcm93LCB5ZWFyIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb250aHNfcmFuZ2UucHVzaCh7IHJvdywgeWVhciB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldE1vbnRoVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUoeWVhciwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVZZWFycyhpbnB1dFllYXI6IG51bWJlciwgaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IG1pblllYXIsIG1heFllYXIsIGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGxldCB5OiBudW1iZXIgPSBpbnB1dFllYXIgLSAoaW5wdXRZZWFyICUgMTApO1xyXG5cclxuICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuXHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMueWVhcnMubGVuZ3RoID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnllYXJzX3JhbmdlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFllYXJzID0gZmxhdHRlbjxhbnk+KHRoaXMueWVhcnNfcmFuZ2UpO1xyXG4gICAgICAgICAgICBpZiAoYWxsWWVhcnMuZmluZEluZGV4KG4gPT4gbi55ZWFyID09IGlucHV0WWVhcikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMueWVhcnNfcmFuZ2VbM11bMl0ueWVhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b2RheTogSU15RGF0ZSA9IHRoaXMuZ2V0VG9kYXkoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHkgLSAxOyBpIDwgeSArIDEwOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93OiBBcnJheTxJTXlDYWxlbmRhclllYXI+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgaSArIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQ6IGJvb2xlYW4gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aDogbW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXk6IHRoaXMuZGF5c0luTW9udGgobW9udGhOYnIsIGopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbnRpbFxyXG4gICAgICAgICAgICAgICAgICAgICkgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVNpbmNlKHsgeWVhcjogaiwgbW9udGg6IG1vbnRoTmJyLCBkYXk6IDEgfSwgZGlzYWJsZVNpbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5NYXg6IGJvb2xlYW4gPSBqIDwgbWluWWVhciB8fCBqID4gbWF4WWVhcjtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiBqLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJZZWFyOiBqID09PSB0b2RheS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBqID09PSB5ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBtaW5NYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgeWVhck9iajogeyB5ZWFyOiBqIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFycy5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnllYXJzX3JhbmdlLnB1c2gocm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRZZWFyVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUodGhpcy55ZWFyc1swXVsxXS55ZWFyLCB0aGlzLnllYXJzWzNdWzFdLnllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZVswXVsxXS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZVszXVsxXS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgaXNTZWNvbmRDYWxlbmRhclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDYWxlbmRhclZpc2libGVNb250aCgpOiB2b2lkIHtcclxuICAgICAgICAvLyBTZXRzIHZpc2libGUgbW9udGggb2YgY2FsZW5kYXJcclxuICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnNlbGVjdGVkTW9udGg7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlTW9udGggPSB7XHJcbiAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbbW9udGhOYnJdLFxyXG4gICAgICAgICAgICBtb250aE5icixcclxuICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgY3VycmVudCBtb250aFxyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1t0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnJdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5icixcclxuICAgICAgICAgICAgICAgIHllYXI6IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciwgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXIsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobW9udGhOYnIsIHllYXIsIHRydWUsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBvblByZXZOYXZpZ2F0ZUJ0bkNsaWNrZWQoZXZlbnQ/OiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgLSAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGggJiYgIXRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciAtIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgLSAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgJiYgIXRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciAtIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk5leHROYXZpZ2F0ZUJ0bkNsaWNrZWQoZXZlbnQ/OiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc1syXVsyXS55ZWFyICsgMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciArIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciArIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdNb250aChpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc19yYW5nZVsyXVsyXS55ZWFyICsgMTAsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4sIGlzTmV4dD86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgY2hhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgaWYgKGlzTmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hhbmdlID0gaXNOZXh0ID8gMSA6IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkOiBEYXRlID0gdGhpcy5nZXREYXRlKHllYXIsIG1vbnRoTmJyLCAxKTtcclxuICAgICAgICAgICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgKyBjaGFuZ2UpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeTogbnVtYmVyID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtOiBudW1iZXIgPSBkLmdldE1vbnRoKCkgKyAxO1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGggPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW21dLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IG0sXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB5LFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG0sIHksIHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZSh5ZWFyLCBtb250aE5iciwgMSk7XHJcbiAgICAgICAgICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgY2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHk6IG51bWJlciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbTogbnVtYmVyID0gZC5nZXRNb250aCgpICsgMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1ttXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBtLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtLCB5LCB0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZVNlbGVjdG9yKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBrZXlDb2RlOiBudW1iZXIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldEtleUNvZGVGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLmVzYykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlZEJ5RXNjKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGF5Q2VsbENsaWNrZWQoY2VsbDogSU15Q2FsZW5kYXJEYXksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGNlbGwuY21vID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25QcmV2TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5jbW8gPT09IDMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5leHROYXZpZ2F0ZUJ0bkNsaWNrZWQodHJ1ZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZShjZWxsLmRhdGVPYmopO1xyXG4gICAgICAgIHRoaXMucmVzZXRNb250aFllYXJTZWxlY3QoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXlDZWxsS2V5RG93bihjZWxsOiBJTXlDYWxlbmRhckRheSkge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBEQVRFX1JPV19DT1VOVCxcclxuICAgICAgICAgICAgREFURV9DT0xfQ09VTlRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobW92ZUZvY3VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsRWxlbWVudChELCB0YXJnZXRSb3csIHRhcmdldENvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25EYXlDZWxsTW91c2VFbnRlcihjZWxsOiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB3IG9mIHRoaXMuZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHcud2Vlaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRheS5yYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF5LmRhdGVPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIGNlbGwuZGF0ZU9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5kYXRlT2JqLCBkYXkuZGF0ZU9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB3IG9mIHRoaXMuZGF0ZXNfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHcud2Vlaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRheS5yYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF5LmRhdGVPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIGNlbGwuZGF0ZU9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5kYXRlT2JqLCBkYXkuZGF0ZU9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25EYXlDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uTW9udGhDZWxsTW91c2VFbnRlcihjZWxsOiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubW9udGhzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIGl0ZW0ucm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGgucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIG1vbnRoLm1vbnRoT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKG1vbnRoLm1vbnRoT2JqLCBjZWxsLm1vbnRoT2JqKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLm1vbnRoT2JqLCBtb250aC5tb250aE9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubW9udGhzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIGl0ZW0ucm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGgucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIG1vbnRoLm1vbnRoT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKG1vbnRoLm1vbnRoT2JqLCBjZWxsLm1vbnRoT2JqKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLm1vbnRoT2JqLCBtb250aC5tb250aE9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25Nb250aENlbGxNb3VzZUxlYXZlKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubW9udGhzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIGl0ZW0ucm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGgucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblllYXJDZWxsTW91c2VFbnRlcihjZWxsOiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMueWVhcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeWVhciBvZiBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhci5yYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgeWVhci55ZWFyT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHllYXIueWVhck9iaiwgY2VsbC55ZWFyT2JqKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC55ZWFyT2JqLCB5ZWFyLnllYXJPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIHllYXIueWVhck9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIGNlbGwueWVhck9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwueWVhck9iaiwgeWVhci55ZWFyT2JqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblllYXJDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uV2Vla0NsaWNrZWQod2Vla0RhdGE6IElNeVdlZWspIHtcclxuICAgICAgICBjb25zdCBzaG93VGltZSA9IHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQgJiYgdGhpcy5vcHRzLnJldHVybkZvcm1hdC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoJ2hoOm1tJykgPiAtMTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkV2VlayA9IHsgd2Vla05icjogd2Vla0RhdGEud2Vla05iciwgeWVhcjogd2Vla0RhdGEueWVhciB9O1xyXG5cclxuICAgICAgICBpZiAoc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLmhvdXIgPSAwO1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzBdLmRhdGVPYmoubWludXRlID0gMDtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLnNlY29uZCA9IDA7XHJcblxyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmouaG91ciA9IDIzO1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmoubWludXRlID0gNTk7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbNl0uZGF0ZU9iai5zZWNvbmQgPSA1OTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZSh3ZWVrRGF0YS53ZWVrWzBdLmRhdGVPYmopO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZSh3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmopO1xyXG4gICAgfVxyXG4gICAgZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50OiBhbnkpOiBhbnkge1xyXG4gICAgICAgIGxldCBzb3VyY2VSb3cgPSAwO1xyXG4gICAgICAgIGxldCBzb3VyY2VDb2wgPSAwO1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LmlkKSB7XHJcbiAgICAgICAgICAgIC8vIHZhbHVlIG9mIGlkIGlzIGZvciBleGFtcGxlOiBtXzBfMSAoZmlyc3QgbnVtYmVyID0gcm93LCBzZWNvbmQgbnVtYmVyID0gY29sdW1uKVxyXG4gICAgICAgICAgICBjb25zdCBhcnI6IEFycmF5PHN0cmluZz4gPSBldmVudC50YXJnZXQuaWQuc3BsaXQoVU5ERVJfTElORSk7XHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyA9IE51bWJlcihhcnJbMV0pO1xyXG4gICAgICAgICAgICBzb3VyY2VDb2wgPSBOdW1iZXIoYXJyWzJdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgc291cmNlUm93LCBzb3VyY2VDb2wgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihldmVudDogYW55LCByb3c6IG51bWJlciwgY29sOiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGNvbENvdW50OiBudW1iZXIpOiBhbnkge1xyXG4gICAgICAgIGxldCBtb3ZlRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgdGFyZ2V0Um93OiBudW1iZXIgPSByb3c7XHJcbiAgICAgICAgbGV0IHRhcmdldENvbDogbnVtYmVyID0gY29sO1xyXG5cclxuICAgICAgICBjb25zdCBrZXlDb2RlOiBudW1iZXIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldEtleUNvZGVGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLnVwQXJyb3cgJiYgcm93ID4gMCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRSb3ctLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuZG93bkFycm93ICYmIHJvdyA8IHJvd0NvdW50KSB7XHJcbiAgICAgICAgICAgIG1vdmVGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRhcmdldFJvdysrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5sZWZ0QXJyb3cgJiYgY29sID4gMCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUucmlnaHRBcnJvdyAmJiBjb2wgPCBjb2xDb3VudCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZvY3VzQ2VsbEVsZW1lbnQodHlwZTogc3RyaW5nLCByb3c6IG51bWJlciwgY29sOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBlbGVtOiBhbnkgPSB0aGlzLnNlbGVjdG9yRWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKERPVCArIHR5cGUgKyBVTkRFUl9MSU5FICsgcm93ICsgVU5ERVJfTElORSArIGNvbCk7XHJcbiAgICAgICAgaWYgKGVsZW0pIHtcclxuICAgICAgICAgICAgZWxlbS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3REYXRlKGRhdGU6IElNeURhdGUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAvLyBEYXRlIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCBpc0VuZERhdGVJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpICYmXHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQgJiYgaXNFbmREYXRlSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJvdGggYWxyZWFkeSBzZWxlY3RlZCAtIHNldCBiZWdpbiBkYXRlIGFuZCByZXNldCBlbmQgZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpbkRhdGVJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYmVnaW4gZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRW5kRGF0ZUluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHNlY29uZCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0RGF0ZUVhcmxpZXI6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZUVhcmxpZXIoZGF0ZSwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3REYXRlRWFybGllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRlID0gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IF9kYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IF9kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShfZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKF9kYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUoX2RhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmdsZSBkYXRlXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dUaW1lID8gZmFsc2UgOiBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9TZWxlY3RNb250aChtb250aDogSU15TW9udGgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIG1vbnRoIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmVnaW5Nb250aEluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkTW9udGgodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kTW9udGhJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZE1vbnRoKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5Nb250aEluaXRpYWxpemVkICYmIGlzRW5kTW9udGhJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYm90aCBhbHJlYWR5IHNlbGVjdGVkIC0gc2V0IGJlZ2luIGRhdGUgYW5kIHJlc2V0IGVuZCBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5Nb250aEluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgeWVhcjogbW9udGgueWVhciwgbW9udGg6IG1vbnRoLm1vbnRoTmJyIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IG1vbnRoO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgeyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2hvd1RpbWUgPyBmYWxzZSA6IGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3RcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b1NlbGVjdFllYXIoeWVhcjogeyB5ZWFyOiBudW1iZXIgfSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCBzaG93VGltZSwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gbW9udGggcmFuZ2VcclxuICAgICAgICAgICAgY29uc3QgaXNCZWdpblllYXJJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZFllYXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kWWVhckluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkWWVhcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCk7XHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luWWVhckluaXRpYWxpemVkICYmIGlzRW5kWWVhckluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpblllYXJJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYmVnaW4gZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2Vjb25kIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3REYXRlRWFybGllcjogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlRWFybGllcih5ZWFyLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geWVhcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbCh5ZWFyLCBudWxsLCBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIHJldHVybkZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vbnRoU3RhcnRJZHgoeTogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIC8vIE1vbnRoIHN0YXJ0IGluZGV4XHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZC5zZXREYXRlKDEpO1xyXG4gICAgICAgIGQuc2V0TW9udGgobSAtIDEpO1xyXG4gICAgICAgIGQuc2V0RnVsbFllYXIoeSk7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gZC5nZXREYXkoKSArIHRoaXMuc3VuZGF5SWR4KCk7XHJcbiAgICAgICAgcmV0dXJuIGlkeCA+PSA3ID8gaWR4IC0gNyA6IGlkeDtcclxuICAgIH1cclxuXHJcbiAgICBkYXlzSW5Nb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIGN1cnJlbnQgbW9udGhcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoeSwgbSwgMCkuZ2V0RGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRheXNJblByZXZNb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIHRoZSBwcmV2aW91cyBtb250aFxyXG4gICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeSwgbSwgMSk7XHJcbiAgICAgICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgLSAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXlzSW5Nb250aChkLmdldE1vbnRoKCkgKyAxLCBkLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ3VyckRheShkOiBudW1iZXIsIG06IG51bWJlciwgeTogbnVtYmVyLCBjbW86IG51bWJlciwgdG9kYXk6IElNeURhdGUpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBDaGVjayBpcyBhIGdpdmVuIGRhdGUgdGhlIHRvZGF5XHJcbiAgICAgICAgcmV0dXJuIGQgPT09IHRvZGF5LmRheSAmJiBtID09PSB0b2RheS5tb250aCAmJiB5ID09PSB0b2RheS55ZWFyICYmIGNtbyA9PT0gTW9udGhJZC5jdXJyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICAgIGNvbnN0IGhhc1Nob3J0Q3V0cyA9IHRoaXMub3B0cy5zaG9ydGN1dHMgJiYgdGhpcy5vcHRzLnNob3J0Y3V0cy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlICYmIHRoaXMub3B0cy5zaG93VHlwZSAhPT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzU2hvcnRDdXRzID8gJzY2MHB4JyA6ICc1NzRweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhc1Nob3J0Q3V0cyA/ICczODBweCcgOiAnMjg3cHgnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUb2RheSgpOiBJTXlEYXRlIHtcclxuICAgICAgICBjb25zdCBkYXRlOiBEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICBtb250aDogZGF0ZS5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgICAgIGRheTogZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICBob3VyOiBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICBtaW51dGU6IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBkYXRlLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSwgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsIGRheTogZGF0ZS5nZXREYXRlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF5TnVtYmVyKGRhdGU6IElNeURhdGUpOiBudW1iZXIge1xyXG4gICAgICAgIC8vIEdldCBkYXkgbnVtYmVyOiBzdT0wLCBtbz0xLCB0dT0yLCB3ZT0zIC4uLlxyXG4gICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoLCBkYXRlLmRheSk7XHJcbiAgICAgICAgcmV0dXJuIGQuZ2V0RGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0V2Vla2RheShkYXRlOiBJTXlEYXRlKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBHZXQgd2Vla2RheTogc3UsIG1vLCB0dSwgd2UgLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2Vla0RheU9wdHNbdGhpcy5nZXREYXlOdW1iZXIoZGF0ZSldO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGUoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyLCBkYXk6IG51bWJlcik6IERhdGUge1xyXG4gICAgICAgIC8vIENyZWF0ZXMgYSBkYXRlIG9iamVjdCBmcm9tIGdpdmVuIHllYXIsIG1vbnRoIGFuZCBkYXlcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXksIDAsIDAsIDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHN1bmRheUlkeCgpOiBudW1iZXIge1xyXG4gICAgICAgIC8vIEluZGV4IG9mIFN1bmRheSBkYXlcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXlJZHggPiAwID8gNyAtIHRoaXMuZGF5SWR4IDogMDtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhbGVuZGFyKG06IG51bWJlciwgeTogbnVtYmVyLCBub3RpZnlDaGFuZ2U6IGJvb2xlYW4sIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVzX3JhbmdlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvZGF5OiBJTXlEYXRlID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoU3RhcnQ6IG51bWJlciA9IHRoaXMubW9udGhTdGFydElkeCh5LCBtKTtcclxuICAgICAgICBjb25zdCBkSW5UaGlzTTogbnVtYmVyID0gdGhpcy5kYXlzSW5Nb250aChtLCB5KTtcclxuICAgICAgICBjb25zdCBkSW5QcmV2TTogbnVtYmVyID0gdGhpcy5kYXlzSW5QcmV2TW9udGgobSwgeSk7XHJcblxyXG4gICAgICAgIGxldCBkYXlOYnIgPSAxO1xyXG4gICAgICAgIGxldCBjbW86IG51bWJlciA9IE1vbnRoSWQucHJldjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDc7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWVrOiBBcnJheTxJTXlDYWxlbmRhckRheT4gPSBbXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IHdlZWtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBtID0gZEluUHJldk0gLSBtb250aFN0YXJ0ICsgMTtcclxuICAgICAgICAgICAgICAgIC8vIFByZXZpb3VzIG1vbnRoXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gcG07IGogPD0gZEluUHJldk07IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGU6IElNeURhdGUgPSB7IHllYXI6IG0gPT09IDEgPyB5IC0gMSA6IHksIG1vbnRoOiBtID09PSAxID8gMTIgOiBtIC0gMSwgZGF5OiBqIH07XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vlay5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iajogZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY21vLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyRGF5OiB0aGlzLmlzQ3VyckRheShqLCBtLCB5LCBjbW8sIHRvZGF5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoZGF0ZSwgdGhpcy5vcHRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkRGF0ZTogdGhpcy51dGlsU2VydmljZS5pc01hcmtlZERhdGUoZGF0ZSwgdGhpcy5vcHRzLm1hcmtEYXRlcywgdGhpcy5vcHRzLm1hcmtXZWVrZW5kcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogdGhpcy51dGlsU2VydmljZS5pc0hpZ2hsaWdodGVkRGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc3VuSGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnNhdEhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5oaWdobGlnaHREYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY21vID0gTW9udGhJZC5jdXJyO1xyXG4gICAgICAgICAgICAgICAgLy8gQ3VycmVudCBtb250aFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF5c0xlZnQ6IG51bWJlciA9IDcgLSB3ZWVrLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF5c0xlZnQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGU6IElNeURhdGUgPSB7IHllYXI6IHksIG1vbnRoOiBtLCBkYXk6IGRheU5iciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoZGF5TmJyLCBtLCB5LCBjbW8sIHRvZGF5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoZGF0ZSwgdGhpcy5vcHRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkRGF0ZTogdGhpcy51dGlsU2VydmljZS5pc01hcmtlZERhdGUoZGF0ZSwgdGhpcy5vcHRzLm1hcmtEYXRlcywgdGhpcy5vcHRzLm1hcmtXZWVrZW5kcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogdGhpcy51dGlsU2VydmljZS5pc0hpZ2hsaWdodGVkRGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc3VuSGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnNhdEhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5oaWdobGlnaHREYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5TmJyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXN0IG9mIHRoZSB3ZWVrc1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCA4OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF5TmJyID4gZEluVGhpc00pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV4dCBtb250aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlOYnIgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbW8gPSBNb250aElkLm5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGU6IElNeURhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGNtbyA9PT0gTW9udGhJZC5uZXh0ICYmIG0gPT09IDEyID8geSArIDEgOiB5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogY21vID09PSBNb250aElkLmN1cnIgPyBtIDogY21vID09PSBNb250aElkLm5leHQgJiYgbSA8IDEyID8gbSArIDEgOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGRheU5iclxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vlay5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iajogZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY21vLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyRGF5OiB0aGlzLmlzQ3VyckRheShkYXlOYnIsIG0sIHksIGNtbywgdG9kYXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZShkYXRlLCB0aGlzLm9wdHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWREYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmlzTWFya2VkRGF0ZShkYXRlLCB0aGlzLm9wdHMubWFya0RhdGVzLCB0aGlzLm9wdHMubWFya1dlZWtlbmRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0OiB0aGlzLnV0aWxTZXJ2aWNlLmlzSGlnaGxpZ2h0ZWREYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zdW5IaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc2F0SGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLmhpZ2hsaWdodERhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBkYXlOYnIrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB3ZWVrTmJyOiBudW1iZXIgPVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRzLnNob3dXZWVrTnVtYmVycyAmJiB0aGlzLm9wdHMuZmlyc3REYXlPZldlZWsgPT09IE1PXHJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIod2Vla1swXS5kYXRlT2JqKVxyXG4gICAgICAgICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVzLnB1c2goeyB3ZWVrLCB3ZWVrTmJyLCB5ZWFyOiB5IH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlc19yYW5nZS5wdXNoKHsgd2Vlaywgd2Vla05iciwgeWVhcjogeSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXREYXRlVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUobSwgeSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcblxyXG4gICAgICAgIGlmIChub3RpZnlDaGFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gTm90aWZ5IHBhcmVudFxyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyVmlld0NoYW5nZWQoe1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiBtLFxyXG4gICAgICAgICAgICAgICAgZmlyc3Q6IHsgbnVtYmVyOiAxLCB3ZWVrZGF5OiB0aGlzLmdldFdlZWtkYXkoeyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiAxIH0pIH0sXHJcbiAgICAgICAgICAgICAgICBsYXN0OiB7IG51bWJlcjogZEluVGhpc00sIHdlZWtkYXk6IHRoaXMuZ2V0V2Vla2RheSh7IHllYXI6IHksIG1vbnRoOiBtLCBkYXk6IGRJblRoaXNNIH0pIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGVWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZShtOiBudW1iZXIsIHk6IG51bWJlciwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGxldCBkcG0gPSBmYWxzZTtcclxuICAgICAgICBsZXQgZG5tID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZGlzYWJsZVVudGlsLCBkaXNhYmxlU2luY2UsIG1pblllYXIsIG1heFllYXIgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgZHBtID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVVbnRpbChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogbSA9PT0gMSA/IHkgLSAxIDogeSxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiBtID09PSAxID8gMTIgOiBtIC0gMSxcclxuICAgICAgICAgICAgICAgIGRheTogdGhpcy5kYXlzSW5Nb250aChtID09PSAxID8gMTIgOiBtIC0gMSwgbSA9PT0gMSA/IHkgLSAxIDogeSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlzYWJsZVVudGlsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBkbm0gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVNpbmNlKFxyXG4gICAgICAgICAgICB7IHllYXI6IG0gPT09IDEyID8geSArIDEgOiB5LCBtb250aDogbSA9PT0gMTIgPyAxIDogbSArIDEsIGRheTogMSB9LFxyXG4gICAgICAgICAgICBkaXNhYmxlU2luY2VcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSAobSA9PT0gMSAmJiB5ID09PSBtaW5ZZWFyKSB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZCA9IChtID09PSAxMiAmJiB5ID09PSBtYXhZZWFyKSB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSAobSA9PT0gMSAmJiB5ID09PSBtaW5ZZWFyKSB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZF9yYW5nZSA9IChtID09PSAxMiAmJiB5ID09PSBtYXhZZWFyKSB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9udGhWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZSh5OiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHBtID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRubSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRwbSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoeyB5ZWFyOiB5IC0gMSwgbW9udGg6IDEyLCBkYXk6IDMxIH0sIGRpc2FibGVVbnRpbCk7XHJcbiAgICAgICAgZG5tID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IHkgKyAxLCBtb250aDogMSwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICAgICAgdGhpcy5wcmV2RG9iVmlld0Rpc2FibGVkID0geSA9PT0gbWluWWVhciB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dERvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1heFllYXIgfHwgZG5tO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICAgICAgdGhpcy5wcmV2RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWluWWVhciB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dERvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1heFllYXIgfHwgZG5tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRZZWFyVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUoeXA6IG51bWJlciwgeW46IG51bWJlciwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGxldCBkcHkgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZG55ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZGlzYWJsZVVudGlsLCBkaXNhYmxlU2luY2UsIG1pblllYXIsIG1heFllYXIgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgZHB5ID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVVbnRpbCh7IHllYXI6IHlwIC0gMSwgbW9udGg6IDEyLCBkYXk6IDMxIH0sIGRpc2FibGVVbnRpbCk7XHJcbiAgICAgICAgZG55ID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IHluICsgMSwgbW9udGg6IDEsIGRheTogMSB9LCBkaXNhYmxlU2luY2UpO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHlwIDw9IG1pblllYXIgfHwgZHB5O1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5biA+PSBtYXhZZWFyIHx8IGRueTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkX3JhbmdlID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHlwIDw9IG1pblllYXIgfHwgZHB5O1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5biA+PSBtYXhZZWFyIHx8IGRueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkNvbnRhaW5lckNsaWNrKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgb25DbGlja1RpbWVCdG4oZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZElzSW5pdGlhbGl6ZWREYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCk7XHJcbiAgICAgICAgICAgIGlmICghYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSB8fCAhZW5kSXNJbml0aWFsaXplZERhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyDnm7TmjqXngrnlh7vnoa7lrprmmL7npLrmnKzmnIjlkozkuIvmnIhcclxuICAgICAgICAgICAgICAgIGlmICghYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBlbmRZZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kbW9udGggPSBub3cuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kbW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRZZWFyID0gZW5kWWVhciArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kbW9udGggPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZW5kbW9udGggPSBlbmRtb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHsgLi4udGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiB9O1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IGVuZFllYXIsIG1vbnRoOiBlbmRtb250aCwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN57uZZGF0ZVJhbmdl6LWL5Lik5Liq5pe26Ze05YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN6LWL5YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVWbGF1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN6LWL5YC8XHJcbiAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gdGhpcy5nZXRUaW1lU3RyKG5vdyk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0geyB5ZWFyOiBub3cuZ2V0RnVsbFllYXIoKSwgbW9udGg6IG5vdy5nZXRNb250aCgpICsgMSwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdFRpbWUgPSAhdGhpcy5zZWxlY3RUaW1lO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFRpbWVWYWx1ZShpc0RhdGVSYW5nZSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSB7IHN0YXJ0OiBudWxsLCBlbmQ6IG51bGwgfTtcclxuICAgICAgICBpZiAodGhpcy50aW1lVmxhdWUpIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZUFyciA9IHRoaXMudGltZVZsYXVlLnJlcGxhY2UoJ+aXticsICc6JykucmVwbGFjZSgn5YiGJywgJzonKS5yZXBsYWNlKCfnp5InLCAnJykuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgaWYgKHRpbWVBcnIubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgICAgIHQuc3RhcnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG91cjogdGltZUFyclswXSxcclxuICAgICAgICAgICAgICAgICAgICBtaW51dGU6IHRpbWVBcnJbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiB0aW1lQXJyWzJdID8gdGltZUFyclsyXSA6IDBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBub3dEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgY29uc3QgaG91ciA9IG5vd0RhdGUuZ2V0SG91cnMoKTtcclxuICAgICAgICAgICAgY29uc3QgbWludXRlID0gbm93RGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IG5vd0RhdGUuZ2V0U2Vjb25kcygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHQuc3RhcnQgPSB7IGhvdXI6IDAsIG1pbnV0ZTogMCwgc2Vjb25kOiAwIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0LnN0YXJ0ID0geyBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNEYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZVZsYXVlX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lQXJyX3JhbmdlID0gdGhpcy50aW1lVmxhdWVfcmFuZ2UucmVwbGFjZSgn5pe2JywgJzonKS5yZXBsYWNlKCfliIYnLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVBcnJfcmFuZ2UubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0LmVuZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogdGltZUFycl9yYW5nZVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiB0aW1lQXJyX3JhbmdlWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IHRpbWVBcnJfcmFuZ2VbMl0gPyB0aW1lQXJyX3JhbmdlWzJdIDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gMjM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW51dGUgPSA1OTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IDU5O1xyXG4gICAgICAgICAgICAgICAgdC5lbmQgPSB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvbkNsaWNrT2tCdG4oZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgbGV0IHRpbWVPYmogPSBudWxsO1xyXG4gICAgICAgIGxldCB0aW1lT2JqX3JhbmdlID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VsZWN0ZWREYXRlID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VsZWN0ZWREYXRlX3JhbmdlID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gdGhpcy5nZXRUaW1lVmFsdWUodGhpcy5vcHRzLmRhdGVSYW5nZSk7XHJcbiAgICAgICAgICAgIHRpbWVPYmogPSBzdGFydDtcclxuICAgICAgICAgICAgdGltZU9ial9yYW5nZSA9IGVuZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmICghdGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGUgPSB7IC4uLnRoaXMuaW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlKSwgLi4udGltZU9iaiB9O1xyXG4gICAgICAgICAgICBjb25zdCBpc0luRGlzYWJsZVJhbmdlID0gdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZShzZWxlY3RlZERhdGUsIHRoaXMub3B0cyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVhcmxpZXIgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoc2VsZWN0ZWREYXRlLCB0aGlzLm9wdHMuZGlzYWJsZVVudGlsKTtcclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSA9ICFpc0luRGlzYWJsZVJhbmdlXHJcbiAgICAgICAgICAgICAgICA/IHNlbGVjdGVkRGF0ZVxyXG4gICAgICAgICAgICAgICAgOiB7IC4uLnNlbGVjdGVkRGF0ZSwgLi4uKGVhcmxpZXIgPyB0aGlzLm9wdHMuZGlzYWJsZVVudGlsIDogdGhpcy5vcHRzLmRpc2FibGVTaW5jZSkgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpbiA9IHsgLi4udGhpcy5pbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksIC4uLnRpbWVPYmogfTtcclxuICAgICAgICAgICAgY29uc3QgZW5kID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCwgYmVnaW4pLCAuLi50aW1lT2JqX3JhbmdlIH07XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZV9yYW5nZSA9IHsgYmVnaW4sIGVuZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGUsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZV9yYW5nZSxcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplZERhdGUoZGF0ZTogSU15RGF0ZSwgb3RoZXJEYXRlOiBJTXlEYXRlID0geyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0pOiBJTXlEYXRlIHtcclxuICAgICAgICBjb25zdCBkYXlzSW5Nb250aDogQXJyYXk8bnVtYmVyPiA9IFszMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcclxuICAgICAgICBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkgJiYgIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUob3RoZXJEYXRlKSkge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZSh7IHllYXIsIG1vbnRoLCBkYXkgfSwgdGhpcy5vcHRzKSA/IHRoaXMub3B0cy5kaXNhYmxlVW50aWwgOiB7IHllYXIsIG1vbnRoLCBkYXkgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBvdGhlckRhdGUubW9udGggKyAxID4gMTIgPyBvdGhlckRhdGUueWVhciArIDEgOiBvdGhlckRhdGUueWVhcjtcclxuICAgICAgICAgICAgbGV0IG1vbnRoID0gb3RoZXJEYXRlLm1vbnRoICsgMSA+IDEyID8gMSA6IG90aGVyRGF0ZS5tb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZS5tb250aCkge1xyXG4gICAgICAgICAgICAgICAgbW9udGggPSBvdGhlckRhdGUubW9udGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gb3RoZXJEYXRlLmRheSA8IDEgfHwgb3RoZXJEYXRlLmRheSA+IGRheXNJbk1vbnRoW21vbnRoIC0gMV0gPyAxIDogb3RoZXJEYXRlLmRheTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoeyB5ZWFyLCBtb250aCwgZGF5IH0sIHRoaXMub3B0cykgPyB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlIDogeyB5ZWFyLCBtb250aCwgZGF5IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpbWUoZGF0ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlICE9PSA0ICYmICF0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGF0ZTogSU15RGF0ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogZGF0ZS5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0geyB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLCBkYXk6IGRhdGUuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWQr+eUqOWRqOmAieaLqeaXtiAg5b+r5o235oyJ6ZKu5Y+C5pWw5Li65Y2V5Liq5pel5pyfXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXROb3dXZWVrVGltZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiB0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXREYXRlUmFuZ2U6IElNeURhdGVSYW5nZTtcclxuICAgICAgICAgICAgY29uc3QgeyBiZWdpbiwgZW5kIH0gPSBkYXRlO1xyXG4gICAgICAgICAgICBpZiAoIWJlZ2luIHx8ICFlbmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlUmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogYmVnaW4uZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGJlZ2luLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGJlZ2luLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogYmVnaW4uZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBiZWdpbi5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogYmVnaW4uZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogZW5kLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBlbmQuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogZW5kLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogZW5kLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogZW5kLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBlbmQuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGVSYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogeyB5ZWFyOiBiZWdpbi5nZXRGdWxsWWVhcigpLCBtb250aDogYmVnaW4uZ2V0TW9udGgoKSArIDEsIGRheTogYmVnaW4uZ2V0RGF0ZSgpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB7IHllYXI6IGVuZC5nZXRGdWxsWWVhcigpLCBtb250aDogZW5kLmdldE1vbnRoKCkgKyAxLCBkYXk6IGVuZC5nZXREYXRlKCkgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ+WPguaVsOW/hemhu+espuWQiOimgeaxgu+8gScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=