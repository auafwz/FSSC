/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, TemplateRef, ElementRef, ViewChild, ViewContainerRef, ViewEncapsulation, Renderer2 } from '@angular/core';
var TooltipComponent = /** @class */ (function () {
    function TooltipComponent(el, render) {
        this.el = el;
        this.render = render;
        this.contentIsString = true;
        this._tipWidth = '';
        this._tipCls = '';
        /* 位置 */
        this.placement = 'top';
        /* 位置样式 */
        this.positionStyle = {};
    }
    Object.defineProperty(TooltipComponent.prototype, "content", {
        get: /**
         * @return {?}
         */
        function () {
            return this.nfContent;
        },
        /* 普通文本内容 */
        set: /* 普通文本内容 */
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value instanceof TemplateRef) {
                this.contentIsString = false;
                this.contentViewf.createEmbeddedView(value);
            }
            else {
                this.contentIsString = true;
                this.nfContent = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TooltipComponent.prototype, "tipWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tipWidth;
        },
        /**因为表单生成没有排除factory,不能使用模板 */
        set: /**
         * 因为表单生成没有排除factory,不能使用模板
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._tipWidth) {
                if (value) {
                    this.render.setStyle(this.innerNode.nativeElement, 'width', value);
                    this.render.setStyle(this.innerNode.nativeElement, 'max-width', 'none');
                }
                else {
                    this.render.removeStyle(this.innerNode.nativeElement, 'width');
                    this.render.removeStyle(this.innerNode.nativeElement, 'max-width');
                }
                this._tipWidth = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TooltipComponent.prototype, "tipCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tipCls;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._tipCls) {
                //移除旧样式
                this._tipCls && this.render.removeClass(this.el.nativeElement, this._tipCls);
                //追加新样式
                value && this.render.addClass(this.el.nativeElement, value);
                this._tipCls = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TooltipComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    TooltipComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this.hostBoundingClientRect) {
            this.judgeWidth();
            this.calculatePosition(this.hostBoundingClientRect);
        }
    };
    /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     */
    /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     * @return {?}
     */
    TooltipComponent.prototype.judgeWidth = /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     * @return {?}
     */
    function () {
        if (this.innerNode.nativeElement.scrollHeight > this.innerNode.nativeElement.clientHeight) {
            this.render.addClass(this.innerNode.nativeElement, 'tooltip-inner-lg');
        }
    };
    /* 计算tooltip最新位置 */
    /* 计算tooltip最新位置 */
    /**
     * @param {?} hostPosition
     * @return {?}
     */
    TooltipComponent.prototype.calculatePosition = /* 计算tooltip最新位置 */
    /**
     * @param {?} hostPosition
     * @return {?}
     */
    function (hostPosition) {
        /** @type {?} */
        var top = 0;
        /** @type {?} */
        var left = 0;
        /** @type {?} */
        var tooltipSize = this.tooltipNode.nativeElement.getBoundingClientRect();
        /** @type {?} */
        var arrowSize = this.arrowNode.nativeElement.getBoundingClientRect();
        if (this.placement === 'top') {
            top = hostPosition.top - tooltipSize.height - 2;
            left = hostPosition.left + (hostPosition.width - tooltipSize.width) / 2;
        }
        else if (this.placement === 'left') {
            top = hostPosition.top + (hostPosition.height - tooltipSize.height) / 2;
            left = hostPosition.left - tooltipSize.width - 2;
        }
        else if (this.placement === 'right') {
            top = hostPosition.top + (hostPosition.height - tooltipSize.height) / 2;
            left = hostPosition.right + 2;
        }
        else if (this.placement === 'bottom') {
            top = hostPosition.bottom + arrowSize.height + 2;
            left = hostPosition.left + (hostPosition.width - tooltipSize.width) / 2;
        }
        else if (this.placement === 'top-left') {
            top = hostPosition.top - tooltipSize.height - 2;
            left = hostPosition.left;
            this.arrowNode.nativeElement.style.left = '10%';
        }
        else if (this.placement === 'top-right') {
            top = hostPosition.top - tooltipSize.height - 2;
            left = hostPosition.right - tooltipSize.width;
            this.arrowNode.nativeElement.style.right = '10%';
        }
        else if (this.placement === 'right-top') {
            top = hostPosition.top;
            left = hostPosition.right + 2;
            this.arrowNode.nativeElement.style.top = '10%';
        }
        else if (this.placement === 'right-bottom') {
            top = hostPosition.bottom - tooltipSize.height;
            left = hostPosition.right + 2;
            this.arrowNode.nativeElement.style.bottom = '10%';
        }
        else if (this.placement === 'bottom-left') {
            top = hostPosition.bottom + arrowSize.height + 2;
            left = hostPosition.left;
            this.arrowNode.nativeElement.style.left = '10%';
        }
        else if (this.placement === 'bottom-right') {
            top = hostPosition.bottom + arrowSize.height + 2;
            left = hostPosition.right - tooltipSize.width;
            this.arrowNode.nativeElement.style.right = '10%';
        }
        else if (this.placement === 'left-top') {
            top = hostPosition.top;
            left = hostPosition.left - tooltipSize.width - 2;
            this.arrowNode.nativeElement.style.top = '10%';
        }
        else if (this.placement === 'left-bottom') {
            top = hostPosition.bottom - tooltipSize.height;
            left = hostPosition.left - tooltipSize.width - 2;
            this.arrowNode.nativeElement.style.bottom = '10%';
        }
        this.tooltipNode.nativeElement.style.top = top + 'px';
        this.tooltipNode.nativeElement.style.left = left + 'px';
    };
    /*
    *12个位置名解析
    * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
    */
    /*
        *12个位置名解析
        * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
        */
    /**
     * @return {?}
     */
    TooltipComponent.prototype.offsetDirection = /*
        *12个位置名解析
        * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
        */
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var placement = this.placement;
        if (placement.indexOf('-') !== -1) {
            /** @type {?} */
            var index = placement.indexOf('-');
            return placement.substring(0, index);
        }
        return placement;
    };
    TooltipComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-tooltip',
                    template: "<div #tooltipEle [class]=\"('bs-tooltip-'+offsetDirection())+' tooltip show'\">\r\n    <div #arrowEle class=\"arrow\"></div>\r\n    <div #innerEle class=\"tooltip-inner\">\r\n        <div #contentViewf class=\"tooltip-tmpl\">\r\n            <div *ngIf=\"contentIsString\" class=\"tooltip-text\" [innerHtml]=\"nfContent|tooltipHtml\"></div>\r\n            <ng-container *ngIf=\"!contentIsString\"> {{nfContent}}</ng-container>\r\n        </div>       \r\n    </div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".bs-tooltip-bottom .arrow,.bs-tooltip-top .arrow{left:50%}.bs-tooltip-left .arrow,.bs-tooltip-right .arrow{top:25%}"]
                }] }
    ];
    /** @nocollapse */
    TooltipComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    TooltipComponent.propDecorators = {
        contentViewf: [{ type: ViewChild, args: ['contentViewf', { read: ViewContainerRef },] }],
        tooltipNode: [{ type: ViewChild, args: ['tooltipEle', { read: ElementRef },] }],
        arrowNode: [{ type: ViewChild, args: ['arrowEle', { read: ElementRef },] }],
        innerNode: [{ type: ViewChild, args: ['innerEle', { read: ElementRef },] }],
        content: [{ type: Input }],
        tipWidth: [{ type: Input }],
        tipCls: [{ type: Input }],
        placement: [{ type: Input }]
    };
    return TooltipComponent;
}());
export { TooltipComponent };
if (false) {
    /** @type {?} */
    TooltipComponent.prototype.contentViewf;
    /** @type {?} */
    TooltipComponent.prototype.tooltipNode;
    /** @type {?} */
    TooltipComponent.prototype.arrowNode;
    /** @type {?} */
    TooltipComponent.prototype.innerNode;
    /** @type {?} */
    TooltipComponent.prototype.contentIsString;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype._tipWidth;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype._tipCls;
    /** @type {?} */
    TooltipComponent.prototype.placement;
    /** @type {?} */
    TooltipComponent.prototype.hostBoundingClientRect;
    /** @type {?} */
    TooltipComponent.prototype.nfContent;
    /** @type {?} */
    TooltipComponent.prototype.positionStyle;
    /** @type {?} */
    TooltipComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHRpcC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRvb2x0aXAvIiwic291cmNlcyI6WyJsaWIvdG9vbHRpcC1jb21wb25lbnQvdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQ3pDLFNBQVMsRUFBRSxnQkFBZ0IsRUFBZSxpQkFBaUIsRUFBaUIsU0FBUyxFQUN4RixNQUFNLGVBQWUsQ0FBQztBQUV2QjtJQXdFSSwwQkFDVyxFQUFjLEVBQ2IsTUFBaUI7UUFEbEIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNiLFdBQU0sR0FBTixNQUFNLENBQVc7UUEzRDdCLG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBZWYsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQWtCZixZQUFPLEdBQUcsRUFBRSxDQUFDOztRQWVaLGNBQVMsR0FBRyxLQUFLLENBQUM7O1FBTzNCLGtCQUFhLEdBQUcsRUFBRSxDQUFDO0lBTW5CLENBQUM7SUEzREQsc0JBQ0kscUNBQU87Ozs7UUFTWDtZQUNJLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUMxQixDQUFDO1FBYkQsWUFBWTs7Ozs7O1FBQ1osVUFDWSxLQUFnQztZQUN4QyxJQUFJLEtBQUssWUFBWSxXQUFXLEVBQUU7Z0JBQzlCLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO2dCQUM3QixJQUFJLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQy9DO2lCQUFNO2dCQUNILElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO2dCQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQzthQUMxQjtRQUNMLENBQUM7OztPQUFBO0lBTUQsc0JBQ0ksc0NBQVE7Ozs7UUFZWjtZQUNJLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUMx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Q0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ3hDO1FBQ0QsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQzs7Z0JBaEtKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsZ0JBQWdCO29CQUMxQixzZUFBdUM7b0JBRXZDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOztpQkFDeEM7Ozs7Z0JBVGtDLFVBQVU7Z0JBQ21DLFNBQVM7OzsrQkFZcEYsU0FBUyxTQUFDLGNBQWMsRUFBRSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRTs4QkFFcEQsU0FBUyxTQUFDLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7NEJBQzVDLFNBQVMsU0FBQyxVQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFOzRCQUMxQyxTQUFTLFNBQUMsVUFBVSxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRTswQkFJMUMsS0FBSzsyQkFlTCxLQUFLO3lCQWlCTCxLQUFLOzRCQWNMLEtBQUs7O0lBa0dWLHVCQUFDO0NBQUEsQUFqS0QsSUFpS0M7U0ExSlksZ0JBQWdCOzs7SUFFekIsd0NBQXNGOztJQUV0Rix1Q0FBdUU7O0lBQ3ZFLHFDQUFtRTs7SUFDbkUscUNBQW1FOztJQUVuRSwyQ0FBdUI7Ozs7O0lBZXZCLHFDQUF1Qjs7Ozs7SUFrQnZCLG1DQUFxQjs7SUFlckIscUNBQTJCOztJQUUzQixrREFBNEI7O0lBRTVCLHFDQUFxQzs7SUFHckMseUNBQW1COztJQUdmLDhCQUFxQjs7Ozs7SUFDckIsa0NBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgSW5wdXQsIFRlbXBsYXRlUmVmLCBFbGVtZW50UmVmLCBPbkluaXQsXHJcbiAgICBWaWV3Q2hpbGQsIFZpZXdDb250YWluZXJSZWYsIEhvc3RCaW5kaW5nLCBWaWV3RW5jYXBzdWxhdGlvbiwgU2ltcGxlQ2hhbmdlcywgUmVuZGVyZXIyLCBOZ1pvbmVcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXRvb2x0aXAnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3Rvb2x0aXAuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdG9vbHRpcC5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2x0aXBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NvbnRlbnRWaWV3ZicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSBjb250ZW50Vmlld2Y6IFZpZXdDb250YWluZXJSZWY7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgndG9vbHRpcEVsZScsIHsgcmVhZDogRWxlbWVudFJlZiB9KSB0b29sdGlwTm9kZTogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Fycm93RWxlJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIGFycm93Tm9kZTogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2lubmVyRWxlJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIGlubmVyTm9kZTogRWxlbWVudFJlZjtcclxuXHJcbiAgICBjb250ZW50SXNTdHJpbmcgPSB0cnVlO1xyXG4gICAgLyog5pmu6YCa5paH5pys5YaF5a65ICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGNvbnRlbnQodmFsdWU6IHN0cmluZyB8IFRlbXBsYXRlUmVmPGFueT4pIHtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRJc1N0cmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRWaWV3Zi5jcmVhdGVFbWJlZGRlZFZpZXcodmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudElzU3RyaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5uZkNvbnRlbnQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZkNvbnRlbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF90aXBXaWR0aCA9ICcnO1xyXG4gICAgLyoq5Zug5Li66KGo5Y2V55Sf5oiQ5rKh5pyJ5o6S6ZmkZmFjdG9yeSzkuI3og73kvb/nlKjmqKHmnb8gKi9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdGlwV2lkdGgodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5fdGlwV2lkdGgpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudCwgJ3dpZHRoJywgdmFsdWUpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQsICdtYXgtd2lkdGgnLCAnbm9uZScpOyBcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLmlubmVyTm9kZS5uYXRpdmVFbGVtZW50LCAnd2lkdGgnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQsICdtYXgtd2lkdGgnKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdGlwV2lkdGggPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdGlwV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpcFdpZHRoO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfdGlwQ2xzID0gJyc7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHRpcENscyh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLl90aXBDbHMpIHtcclxuICAgICAgICAgICAgLy/np7vpmaTml6fmoLflvI9cclxuICAgICAgICAgICAgdGhpcy5fdGlwQ2xzICYmIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcy5fdGlwQ2xzKTtcclxuICAgICAgICAgICAgLy/ov73liqDmlrDmoLflvI9cclxuICAgICAgICAgICAgdmFsdWUgJiYgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpcENscyA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB0aXBDbHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpcENscztcclxuICAgIH1cclxuICAgIC8qIOS9jee9riAqL1xyXG4gICAgQElucHV0KCkgcGxhY2VtZW50ID0gJ3RvcCc7XHJcblxyXG4gICAgaG9zdEJvdW5kaW5nQ2xpZW50UmVjdDogYW55O1xyXG5cclxuICAgIG5mQ29udGVudDogc3RyaW5nIHwgVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICAvKiDkvY3nva7moLflvI8gKi9cclxuICAgIHBvc2l0aW9uU3R5bGUgPSB7fTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMlxyXG4gICAgKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG9zdEJvdW5kaW5nQ2xpZW50UmVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmp1ZGdlV2lkdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVQb3NpdGlvbih0aGlzLmhvc3RCb3VuZGluZ0NsaWVudFJlY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6KeE5YiZ5Yik5pat6buY6K6k5qC35byP5LiL5Ye6546w5rua5Yqo5p2h77yM5bC65a+45LuO6buY6K6k5Y+Y5oiQ5aSn5Y+3XHJcbiAgICAgKi9cclxuICAgIGp1ZGdlV2lkdGgoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gdGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudCwgJ3Rvb2x0aXAtaW5uZXItbGcnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiDorqHnrpd0b29sdGlw5pyA5paw5L2N572uICovXHJcbiAgICBjYWxjdWxhdGVQb3NpdGlvbihob3N0UG9zaXRpb246IGFueSkge1xyXG4gICAgICAgIGxldCB0b3AgPSAwO1xyXG4gICAgICAgIGxldCBsZWZ0ID0gMDtcclxuICAgICAgICBjb25zdCB0b29sdGlwU2l6ZSA9IHRoaXMudG9vbHRpcE5vZGUubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCBhcnJvd1NpemUgPSB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnBsYWNlbWVudCA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCAtIHRvb2x0aXBTaXplLmhlaWdodCAtIDI7XHJcbiAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdCArIChob3N0UG9zaXRpb24ud2lkdGggLSB0b29sdGlwU2l6ZS53aWR0aCkgLyAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGFjZW1lbnQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wICsgKGhvc3RQb3NpdGlvbi5oZWlnaHQgLSB0b29sdGlwU2l6ZS5oZWlnaHQpIC8gMjtcclxuICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0IC0gdG9vbHRpcFNpemUud2lkdGggLSAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGFjZW1lbnQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCArIChob3N0UG9zaXRpb24uaGVpZ2h0IC0gdG9vbHRpcFNpemUuaGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ucmlnaHQgKyAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGFjZW1lbnQgPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi5ib3R0b20gKyBhcnJvd1NpemUuaGVpZ2h0ICsgMjtcclxuICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0ICsgKGhvc3RQb3NpdGlvbi53aWR0aCAtIHRvb2x0aXBTaXplLndpZHRoKSAvIDI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYWNlbWVudCA9PT0gJ3RvcC1sZWZ0Jykge1xyXG4gICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wIC0gdG9vbHRpcFNpemUuaGVpZ2h0IC0gMjtcclxuICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSAnMTAlJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxhY2VtZW50ID09PSAndG9wLXJpZ2h0Jykge1xyXG4gICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24udG9wIC0gdG9vbHRpcFNpemUuaGVpZ2h0IC0gMjtcclxuICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCAtIHRvb2x0aXBTaXplLndpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLnJpZ2h0ID0gJzEwJSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYWNlbWVudCA9PT0gJ3JpZ2h0LXRvcCcpIHtcclxuICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcDtcclxuICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCArIDI7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gJzEwJSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYWNlbWVudCA9PT0gJ3JpZ2h0LWJvdHRvbScpIHtcclxuICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLmJvdHRvbSAtIHRvb2x0aXBTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCArIDI7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzEwJSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYWNlbWVudCA9PT0gJ2JvdHRvbS1sZWZ0Jykge1xyXG4gICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24uYm90dG9tICsgYXJyb3dTaXplLmhlaWdodCArIDI7XHJcbiAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdDtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzEwJSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYWNlbWVudCA9PT0gJ2JvdHRvbS1yaWdodCcpIHtcclxuICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLmJvdHRvbSArIGFycm93U2l6ZS5oZWlnaHQgKyAyO1xyXG4gICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLnJpZ2h0IC0gdG9vbHRpcFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUucmlnaHQgPSAnMTAlJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxhY2VtZW50ID09PSAnbGVmdC10b3AnKSB7XHJcbiAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi50b3A7XHJcbiAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdCAtIHRvb2x0aXBTaXplLndpZHRoIC0gMjtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAnMTAlJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxhY2VtZW50ID09PSAnbGVmdC1ib3R0b20nKSB7XHJcbiAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi5ib3R0b20gLSB0b29sdGlwU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdCAtIHRvb2x0aXBTaXplLndpZHRoIC0gMjtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS5ib3R0b20gPSAnMTAlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50b29sdGlwTm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IHRvcCArICdweCc7XHJcbiAgICAgICAgdGhpcy50b29sdGlwTm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JztcclxuICAgIH1cclxuXHJcbiAgICAvKiBcclxuICAgICoxMuS4quS9jee9ruWQjeino+aekCBcclxuICAgICog5Zug6KGo5Y2V55Sf5oiQ5rKh5pyJ5o6S6ZmkZmFjdG9yeSzogIzkuJTkvb/nlKjkuoZbY2xhc3NdLOWPquiDveWcqOatpOWkhOWPmOabtFxyXG4gICAgKi9cclxuICAgIG9mZnNldERpcmVjdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwbGFjZW1lbnQgPSB0aGlzLnBsYWNlbWVudDtcclxuICAgICAgICBpZiAocGxhY2VtZW50LmluZGV4T2YoJy0nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwbGFjZW1lbnQuaW5kZXhPZignLScpO1xyXG4gICAgICAgICAgICByZXR1cm4gcGxhY2VtZW50LnN1YnN0cmluZygwLCBpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwbGFjZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuIl19