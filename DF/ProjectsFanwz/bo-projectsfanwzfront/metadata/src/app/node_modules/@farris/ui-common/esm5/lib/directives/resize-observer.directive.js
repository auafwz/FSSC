/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Directive, Output, ElementRef, EventEmitter, Input } from '@angular/core';
import ResizeObserver from 'resize-observer-polyfill';
/** @type {?} */
var entriesMap = new WeakMap();
var ɵ0 = /**
 * @param {?} entries
 * @return {?}
 */
function (entries) {
    var e_1, _a;
    try {
        for (var entries_1 = tslib_1.__values(entries), entries_1_1 = entries_1.next(); !entries_1_1.done; entries_1_1 = entries_1.next()) {
            var entry = entries_1_1.value;
            if (entriesMap.has(entry.target)) {
                /** @type {?} */
                var comp = entriesMap.get(entry.target);
                comp._resizeCallback(entry);
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (entries_1_1 && !entries_1_1.done && (_a = entries_1.return)) _a.call(entries_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
};
/** @type {?} */
var ro = new ResizeObserver((ɵ0));
var ResizeObserverDirective = /** @class */ (function () {
    function ResizeObserverDirective(el) {
        this.el = el;
        this.resize = new EventEmitter();
    }
    /**
     * @param {?} entry
     * @return {?}
     */
    ResizeObserverDirective.prototype._resizeCallback = /**
     * @param {?} entry
     * @return {?}
     */
    function (entry) {
        entry['bindintClientRect'] = entry.target.getBoundingClientRect();
        // console.log(entry.contentRect, entry.bindintClientRect);
        this.resize.emit(entry);
    };
    /**
     * @return {?}
     */
    ResizeObserverDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var target = this.target ? this.target.nativeElement : this.el.nativeElement;
        entriesMap.set(target, this);
        ro.observe(target);
    };
    /**
     * @return {?}
     */
    ResizeObserverDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var target = this.el.nativeElement;
        ro.unobserve(target);
        entriesMap.delete(target);
    };
    ResizeObserverDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[resizeObserver]'
                },] }
    ];
    /** @nocollapse */
    ResizeObserverDirective.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    ResizeObserverDirective.propDecorators = {
        target: [{ type: Input, args: ['resizeObserver',] }],
        resize: [{ type: Output }]
    };
    return ResizeObserverDirective;
}());
export { ResizeObserverDirective };
if (false) {
    /** @type {?} */
    ResizeObserverDirective.prototype.target;
    /** @type {?} */
    ResizeObserverDirective.prototype.resize;
    /** @type {?} */
    ResizeObserverDirective.prototype.el;
}
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplLW9ic2VydmVyLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktY29tbW9uLyIsInNvdXJjZXMiOlsibGliL2RpcmVjdGl2ZXMvcmVzaXplLW9ic2VydmVyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBcUIsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RyxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQzs7SUFHaEQsVUFBVSxHQUFHLElBQUksT0FBTyxFQUFFOzs7OztBQUVGLFVBQUEsT0FBTzs7O1FBQ2pDLEtBQW9CLElBQUEsWUFBQSxpQkFBQSxPQUFPLENBQUEsZ0NBQUEscURBQUU7WUFBeEIsSUFBTSxLQUFLLG9CQUFBO1lBQ1osSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRTs7b0JBQ3hCLElBQUksR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7Z0JBQ3pDLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDL0I7U0FDSjs7Ozs7Ozs7O0FBQ0wsQ0FBQzs7SUFQSyxFQUFFLEdBQUcsSUFBSSxjQUFjLE1BTzNCO0FBRUY7SUFRSSxpQ0FBbUIsRUFBYztRQUFkLE9BQUUsR0FBRixFQUFFLENBQVk7UUFGdkIsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFHdEMsQ0FBQzs7Ozs7SUFHRCxpREFBZTs7OztJQUFmLFVBQWdCLEtBQUs7UUFDakIsS0FBSyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQ2xFLDJEQUEyRDtRQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixDQUFDOzs7O0lBRUQsMENBQVE7OztJQUFSOztZQUNVLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhO1FBQy9FLFVBQVUsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzdCLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdkIsQ0FBQzs7OztJQUVELDZDQUFXOzs7SUFBWDs7WUFDVSxNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhO1FBQ3BDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckIsVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QixDQUFDOztnQkE1QkosU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSxrQkFBa0I7aUJBQy9COzs7O2dCQWpCMkIsVUFBVTs7O3lCQW1CakMsS0FBSyxTQUFDLGdCQUFnQjt5QkFFdEIsTUFBTTs7SUF3QlgsOEJBQUM7Q0FBQSxBQTlCRCxJQThCQztTQTNCWSx1QkFBdUI7OztJQUNoQyx5Q0FBNEM7O0lBRTVDLHlDQUFzQzs7SUFFMUIscUNBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBPdXRwdXQsIEVsZW1lbnRSZWYsIE9uRGVzdHJveSwgT25Jbml0LCBFdmVudEVtaXR0ZXIsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xyXG5cclxuXHJcbmNvbnN0IGVudHJpZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuY29uc3Qgcm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZW50cmllcyA9PiB7XHJcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcclxuICAgICAgICBpZiAoZW50cmllc01hcC5oYXMoZW50cnkudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb21wID0gZW50cmllc01hcC5nZXQoZW50cnkudGFyZ2V0KTtcclxuICAgICAgICAgICAgY29tcC5fcmVzaXplQ2FsbGJhY2soZW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW3Jlc2l6ZU9ic2VydmVyXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFJlc2l6ZU9ic2VydmVyRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG4gICAgQElucHV0KCdyZXNpemVPYnNlcnZlcicpIHRhcmdldDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAT3V0cHV0KCkgcmVzaXplID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbDogRWxlbWVudFJlZikge1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfcmVzaXplQ2FsbGJhY2soZW50cnkpIHtcclxuICAgICAgICBlbnRyeVsnYmluZGludENsaWVudFJlY3QnXSA9IGVudHJ5LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlbnRyeS5jb250ZW50UmVjdCwgZW50cnkuYmluZGludENsaWVudFJlY3QpO1xyXG4gICAgICAgIHRoaXMucmVzaXplLmVtaXQoZW50cnkpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMudGFyZ2V0ID8gIHRoaXMudGFyZ2V0Lm5hdGl2ZUVsZW1lbnQgOiB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgZW50cmllc01hcC5zZXQodGFyZ2V0LCB0aGlzKTtcclxuICAgICAgICByby5vYnNlcnZlKHRhcmdldCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHJvLnVub2JzZXJ2ZSh0YXJnZXQpO1xyXG4gICAgICAgIGVudHJpZXNNYXAuZGVsZXRlKHRhcmdldCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==