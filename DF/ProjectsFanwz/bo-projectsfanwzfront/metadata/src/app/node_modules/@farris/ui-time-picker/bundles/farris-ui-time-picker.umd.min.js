!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/animations"),require("rxjs/operators"),require("rxjs"),require("date-fns"),require("@farris/ui-locale"),require("@angular/common"),require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@farris/ui-time-picker",["exports","@angular/animations","rxjs/operators","rxjs","date-fns","@farris/ui-locale","@angular/common","@angular/core","@angular/forms"],t):t((e.farris=e.farris||{},e.farris["ui-time-picker"]={}),e.ng.animations,e.rxjs.operators,e.rxjs,e.dateFns,e.i1,e.ng.common,e.ng.core,e.ng.forms)}(this,function(e,t,i,n,s,r,o,u,a){"use strict";var l=function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function h(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,r=i.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=r.next()).done;)o.push(n.value)}catch(u){s={error:u}}finally{try{n&&!n.done&&(i=r["return"])&&i.call(r)}finally{if(s)throw s.error}}return o}var c=(d.prototype.updateHostClass=function(e,t){this.removeClass(e,this.classMap,this.renderer),this.classMap=l({},t),this.addClass(e,this.classMap,this.renderer)},d.prototype.removeClass=function(e,t,i){for(var n in t)t.hasOwnProperty(n)&&i.removeClass(e,n)},d.prototype.addClass=function(e,t,i){for(var n in t)t.hasOwnProperty(n)&&t[n]&&i.addClass(e,n)},d.decorators=[{type:u.Injectable}],d.ctorParameters=function(){return[{type:u.RendererFactory2}]},d);function d(e){this.classMap={},this.renderer=e.createRenderer(null,null)}var p=(f.SLOW="0.3s",f.BASE="0.2s",f.FAST="0.1s",f);function f(){}var m=(y.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)",y.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)",y.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)",y.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)",y.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)",y.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)",y.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)",y.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)",y.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)",y.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)",y.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)",y.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)",y.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)",y.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)",y);function y(){}var b=p.BASE+" "+m.EASE_OUT_QUINT,g=p.BASE+" "+m.EASE_IN_QUINT,v=t.trigger("slideMotion",[t.state("bottom",t.style({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"})),t.state("top",t.style({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 100%"})),t.transition("void => bottom",[t.style({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"}),t.animate(b)]),t.transition("bottom => void",[t.animate(g,t.style({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"}))]),t.transition("void => top",[t.style({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"}),t.animate(b)]),t.transition("top => void",[t.animate(g,t.style({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"}))])]);function _(e){return!!e}function E(e,t){if(void 0===t&&(t="hh:mm:ss"),e&&t)return-1===t.indexOf("ss")&&3===e.split(":").length&&(t+=":ss"),s.parse(e,t,new Date)}function C(e,t,i){return void 0===t&&(t="hh:mm:ss"),void 0===i&&(i="AM"),!e||isNaN(e.getTime())?"":s.format(e,t)}function S(e){return null!=e}var H=["moz","ms","webkit"];var O=function F(){if("undefined"==typeof window)return function(){return 0};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);var e=H.filter(function(e){return e+"RequestAnimationFrame"in window})[0];return e?window[e+"RequestAnimationFrame"]:function t(){var s=0;return function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-s)),n=setTimeout(function(){e(t+i)},i);return s=t+i,n}}()}();var R=(x.prototype.keyup=function(){this.changed()},x.prototype.blur=function(){this.touched()},x.prototype.changed=function(){if(this._onChange){var e=function t(e){if(e)return new Date("1970-01-01 "+e)}(this.elementRef.nativeElement.value);this._onChange(e)}},x.prototype.touched=function(){this._onTouch&&this._onTouch()},x.prototype.setRange=function(){this.elementRef.nativeElement.focus(),this.elementRef.nativeElement.setSelectionRange(0,this.elementRef.nativeElement.value.length)},x.prototype.writeValue=function(e){this.elementRef.nativeElement.value=function i(e,t){return s.format(e,t)}(e,this.nzTime)},x.prototype.registerOnChange=function(e){this._onChange=e},x.prototype.registerOnTouched=function(e){this._onTouch=e},x.decorators=[{type:u.Directive,args:[{selector:"input[format]",exportAs:"format",providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:x,multi:!0}]}]}],x.ctorParameters=function(){return[{type:u.ElementRef}]},x.propDecorators={nzTime:[{type:u.Input}],keyup:[{type:u.HostListener,args:["keyup"]}],blur:[{type:u.HostListener,args:["blur"]}]},x);function x(e){this.elementRef=e}var I=(P.prototype.setValueByStep=function(e,t){var i=Math.floor(e/t);return t*(i=t/2<e%t?i+1:i)},P.prototype.setDefaultValueIfNil=function(){S(this._value)||(this._value=new Date(this.defaultOpenValue))},P.prototype.setMinutes=function(e,t){return t||(this.setDefaultValueIfNil(),this.minutes=e),this},P.prototype.setHours=function(e,t){return t||(this.setDefaultValueIfNil(),this.hours=e),this},P.prototype.setSeconds=function(e,t){return t||(this.setDefaultValueIfNil(),this.seconds=e),this},P.prototype.setUse12Hours=function(e){return this._use12Hours=e,this},Object.defineProperty(P.prototype,"changes",{get:function(){return this._changes.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,S(this._value)&&s.isValid(this._value)?(this._hours=this._value.getHours(),this._minutes=this._value.getMinutes(),this._seconds=this._value.getSeconds(),this._use12Hours&&S(this._hours)&&(this._selected12Hours=12<=this._hours?"PM":"AM")):this._clear())},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e)},enumerable:!0,configurable:!0}),P.prototype.setValue=function(e,t){return S(t)&&(this._use12Hours=t),this.value=e,this},P.prototype.clear=function(){this._clear(),this.update()},Object.defineProperty(P.prototype,"isEmpty",{get:function(){return!(S(this._hours)||S(this._minutes)||S(this._seconds))},enumerable:!0,configurable:!0}),P.prototype._clear=function(){this._hours=undefined,this._minutes=undefined,this._seconds=undefined,this._selected12Hours=undefined,this._value=undefined},P.prototype.update=function(){this.isEmpty?this._value=undefined:(S(this._hours)?this._value.setHours(this.hours):this._hours=this.defaultHours,S(this._minutes)?this._value.setMinutes(this.minutes):this._minutes=this.defaultMinutes,S(this._seconds)?this._value.setSeconds(this.seconds):this._seconds=this.defaultSeconds,this._use12Hours&&(S(this._selected12Hours)||(this._selected12Hours=this.default12Hours),"PM"===this.selected12Hours&&this._hours<12&&(this._hours+=12,this._value.setHours(this._hours)),"AM"===this.selected12Hours&&12<=this._hours&&(this._hours-=12,this._value.setHours(this._hours))),this._value=new Date(this._value)),this.changed()},P.prototype.changed=function(){this._changes.next(this._value)},Object.defineProperty(P.prototype,"viewHours",{get:function(){return this._use12Hours&&S(this._hours)?this.calculateViewHour(this._hours):this._hours},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"realHours",{get:function(){return this._hours},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"hours",{get:function(){return this._hours},set:function(e){e!==this._hours&&(this._use12Hours?"PM"===this.selected12Hours&&12!==e?this._hours=e+12:"AM"===this.selected12Hours&&12===e?this._hours=0:this._hours=e:this._hours=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"minutes",{get:function(){return this._minutes},set:function(e){e!==this._minutes&&(this._minutes=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"seconds",{get:function(){return this._seconds},set:function(e){e!==this._seconds&&(this._seconds=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"selected12Hours",{get:function(){return this._selected12Hours},set:function(e){e.toUpperCase()!==this._selected12Hours&&(this._selected12Hours=e.toUpperCase(),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"defaultOpenValue",{get:function(){return this._defaultOpenValue.setHours(this.setValueByStep(this._defaultOpenValue.getHours(),this.hourStep)),this._defaultOpenValue.setMinutes(this.setValueByStep(this._defaultOpenValue.getMinutes(),this.minuteStep)),this._defaultOpenValue.setSeconds(this.setValueByStep(this._defaultOpenValue.getSeconds(),this.secondStep)),this._defaultOpenValue},set:function(e){this._defaultOpenValue!==e&&(this._defaultOpenValue=e,this.update())},enumerable:!0,configurable:!0}),P.prototype.setDefaultOpenValue=function(e){return this.defaultOpenValue=e,this},Object.defineProperty(P.prototype,"defaultViewHours",{get:function(){var e=this.defaultOpenValue.getHours();return this._use12Hours&&S(e)?this.calculateViewHour(e):e},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"defaultRealHours",{get:function(){return this.defaultOpenValue.getHours()},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"defaultHours",{get:function(){return this.defaultOpenValue.getHours()},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"defaultMinutes",{get:function(){return this.defaultOpenValue.getMinutes()},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"defaultSeconds",{get:function(){return this.defaultOpenValue.getSeconds()},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"default12Hours",{get:function(){return 12<=this.defaultOpenValue.getHours()?"PM":"AM"},enumerable:!0,configurable:!0}),P.prototype.calculateViewHour=function(e){var t=this._selected12Hours||this.default12Hours;return"PM"===t&&12<e?e-12:"AM"===t&&0===e?12:e},P);function P(){this._seconds=undefined,this._hours=undefined,this._minutes=undefined,this._selected12Hours=undefined,this._use12Hours=!1,this._defaultOpenValue=new Date,this._changes=new n.Subject,this.hourStep=1,this.minuteStep=1,this.secondStep=1}function w(e,i,n){return void 0===i&&(i=1),void 0===n&&(n=0),i=Math.ceil(i),new Array(Math.ceil(e/i)).fill(0).map(function(e,t){return(t+n)*i})}var M=(Object.defineProperty(V.prototype,"use12Hours",{get:function(){return this._use12Hours},set:function(e){this._use12Hours=!!e,this._use12Hours?this.format=this.format?(this.format+"").replace(/H/g,"h"):"":this.format=this.format?(this.format+"").replace(/h/g,"H"):""},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(e){S(e)&&(this._allowEmpty=e)},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"opened",{get:function(){return this._opened},set:function(e){this._opened=e,this.opened&&(this.initPosition(),this.selectInputRange())},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"defaultOpenValue",{get:function(){return this._defaultOpenValue},set:function(e){S(e)&&(this._defaultOpenValue=e,this.time.setDefaultOpenValue(this.defaultOpenValue))},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"disabledHours",{get:function(){return this._disabledHours},set:function(e){this._disabledHours=e,this._disabledHours&&this.buildHours()},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"disabledMinutes",{get:function(){return this._disabledMinutes},set:function(e){S(e)&&(this._disabledMinutes=e,this.buildMinutes())},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"disabledSeconds",{get:function(){return this._disabledSeconds},set:function(e){S(e)&&(this._disabledSeconds=e,this.buildSeconds())},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"format",{get:function(){return this._format},set:function(e){if(S(e)){this._format=e,this.enabledColumns=0;var t=new Set(e);this.hourEnabled=t.has("H")||t.has("h"),this.minuteEnabled=t.has("m"),this.secondEnabled=t.has("s"),this.hourEnabled&&this.enabledColumns++,this.minuteEnabled&&this.enabledColumns++,this.secondEnabled&&this.enabledColumns++,this.use12Hours&&(this.enabledColumns++,this.build12Hours()),this.panelWidth=66*this.enabledColumns,this.cdr.markForCheck()}},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"hourStep",{get:function(){return this._hourStep},set:function(e){S(e)&&(this._hourStep=e,this.time.hourStep=e,this.buildHours())},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"minuteStep",{get:function(){return this._minuteStep},set:function(e){S(e)&&(this._minuteStep=e,this.time.minuteStep=e,this.buildMinutes())},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"secondStep",{get:function(){return this._secondStep},set:function(e){S(e)&&(this._secondStep=e,this.time.secondStep=e,this.buildSeconds())},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"value",{get:function(){return this._value=this.time.text,this._value},set:function(e){if(S(e)){this.time.text=e;var t=E(this.time.text,this.format);this.time.setValue(t,this.use12Hours),this.buildTimes(),this.cdr.markForCheck()}else this.time.setUse12Hours(this.use12Hours)},enumerable:!0,configurable:!0}),V.prototype.selectInputRange=function(){this.timeValueAccessorDirective&&this.timeValueAccessorDirective.setRange()},V.prototype.buildHours=function(){var t=this,e=24,i=this.disabledHours&&this.disabledHours(),n=0;if(this.use12Hours&&(e=12,i=i&&("PM"===this.time.selected12Hours?i.filter(function(e){return 12<=e}).map(function(e){return 12<e?e-12:e}):i.filter(function(e){return e<12||24===e}).map(function(e){return 24===e||0===e?12:e})),n=1),this.hourRange=w(e,this.hourStep,n).map(function(e){return{index:e,disabled:t.disabledHours&&-1!==i.indexOf(e)}}),this.use12Hours&&12===this.hourRange[this.hourRange.length-1].index){var s=function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}(this.hourRange);s.unshift(s[s.length-1]),s.splice(s.length-1,1),this.hourRange=s}this.hourRange=this.hourRange.filter(function(e){return!(t.hideDisabledOptions&&e.disabled)})},V.prototype.buildMinutes=function(){var t=this;this.minuteRange=w(60,this.minuteStep).map(function(e){return{index:e,disabled:t.disabledMinutes&&-1!==t.disabledMinutes(t.time.hours).indexOf(e)}}),this.minuteRange=this.minuteRange.filter(function(e){return!(t.hideDisabledOptions&&e.disabled)})},V.prototype.buildSeconds=function(){var t=this;this.secondRange=w(60,this.secondStep).map(function(e){return{index:e,disabled:t.disabledSeconds&&-1!==t.disabledSeconds(t.time.hours,t.time.minutes).indexOf(e)}}),this.secondRange=this.secondRange.filter(function(e){return!(t.hideDisabledOptions&&e.disabled)})},V.prototype.build12Hours=function(){var t=this,e=this._format.includes("A");this.use12HoursRange=[{index:0,value:e?"AM":"am"},{index:1,value:e?"PM":"pm"}],this.use12HoursRange=this.use12HoursRange.filter(function(e){return!t.hideDisabledOptions})},V.prototype.buildTimes=function(){this.buildHours(),this.buildMinutes(),this.buildSeconds(),this.build12Hours()},V.prototype.selectHour=function(e,t){e.stopPropagation(),this.time.setHours(t.index,t.disabled),this.scrollToSelected(this.hourListElement.nativeElement,t.index,120,"hour"),this._disabledMinutes&&this.buildMinutes(),(this._disabledSeconds||this._disabledMinutes)&&this.buildSeconds()},V.prototype.selectMinute=function(e,t){e.stopPropagation(),this.time.setMinutes(t.index,t.disabled),this.scrollToSelected(this.minuteListElement.nativeElement,t.index,120,"minute"),this._disabledSeconds&&this.buildSeconds()},V.prototype.selectSecond=function(e,t){e.stopPropagation(),this.time.setSeconds(t.index,t.disabled),this.scrollToSelected(this.secondListElement.nativeElement,t.index,120,"second")},V.prototype.select12Hours=function(e,t){e.stopPropagation(),this.time.selected12Hours=t.value,this._disabledHours&&this.buildHours(),this._disabledMinutes&&this.buildMinutes(),this._disabledSeconds&&this.buildSeconds(),this.scrollToSelected(this.use12HoursListElement.nativeElement,t.index,120,"12-hour")},V.prototype.scrollToSelected=function(e,t,i,n){void 0===i&&(i=0);var s=this.translateIndex(t,n),r=e.children[0].children[s]||e.children[0].children[0];this.scrollTo(e,r.offsetTop,i)},V.prototype.translateIndex=function(e,t){if("hour"===t){var i=this.disabledHours&&this.disabledHours();return this.calcIndex(i,this.hourRange.map(function(e){return e.index}).indexOf(e))}if("minute"===t){var n=this.disabledMinutes&&this.disabledMinutes(this.time.hours);return this.calcIndex(n,this.minuteRange.map(function(e){return e.index}).indexOf(e))}if("second"!==t)return this.calcIndex([],this.use12HoursRange.map(function(e){return e.index}).indexOf(e));var s=this.disabledSeconds&&this.disabledSeconds(this.time.hours,this.time.minutes);return this.calcIndex(s,this.secondRange.map(function(e){return e.index}).indexOf(e))},V.prototype.scrollTo=function(e,t,i){var n=this;if(i<=0)e.scrollTop=t;else{var s=(t-e.scrollTop)/i*10;O(function(){e.scrollTop=e.scrollTop+s,e.scrollTop!==t&&n.scrollTo(e,t,i-10)})}},V.prototype.calcIndex=function(e,i){return e&&e.length&&this.hideDisabledOptions?i-e.reduce(function(e,t){return e+(t<i?1:0)},0):i},V.prototype.changed=function(){this.onChange&&this.onChange(this.time.text)},V.prototype.touched=function(){this.onTouch&&this.onTouch()},V.prototype.setClassMap=function(){var e;this.updateCls.updateHostClass(this.element.nativeElement,((e={})[""+this.prefixCls]=!0,e[this.prefixCls+"-column-"+this.enabledColumns]=!this.inDatePicker,e[this.prefixCls+"-narrow"]=this.enabledColumns<3,e[this.prefixCls+"-placement-bottomLeft"]=!this.inDatePicker,e))},V.prototype.isSelectedHour=function(e){return e.index===this.time.viewHours||!S(this.time.viewHours)&&e.index===this.time.defaultViewHours},V.prototype.isSelectedMinute=function(e){return e.index===this.time.minutes||!S(this.time.minutes)&&e.index===this.time.defaultMinutes},V.prototype.isSelectedSecond=function(e){return e.index===this.time.seconds||!S(this.time.seconds)&&e.index===this.time.defaultSeconds},V.prototype.isSelected12Hours=function(e){return e.value.toUpperCase()===this.time.selected12Hours||!S(this.time.selected12Hours)&&e.value.toUpperCase()===this.time.default12Hours},V.prototype.initPosition=function(){if(this.hourEnabled&&this.hourListElement&&(S(this.time.viewHours)?this.scrollToSelected(this.hourListElement.nativeElement,this.time.viewHours,0,"hour"):this.scrollToSelected(this.hourListElement.nativeElement,this.time.defaultViewHours,0,"hour")),this.minuteEnabled&&this.minuteListElement&&(S(this.time.minutes)?this.scrollToSelected(this.minuteListElement.nativeElement,this.time.minutes,0,"minute"):this.scrollToSelected(this.minuteListElement.nativeElement,this.time.defaultMinutes,0,"minute")),this.secondEnabled&&this.secondListElement&&(S(this.time.seconds)?this.scrollToSelected(this.secondListElement.nativeElement,this.time.seconds,0,"second"):this.scrollToSelected(this.secondListElement.nativeElement,this.time.defaultSeconds,0,"second")),this.use12Hours&&this.use12HoursListElement){var e="AM"===(S(this.time.selected12Hours)?this.time.selected12Hours:this.time.default12Hours)?0:1;this.scrollToSelected(this.use12HoursListElement.nativeElement,e,0,"12-hour")}},V.prototype.ngOnInit=function(){var e=this;this.inDatePicker&&(this.prefixCls="calendar-time-picker"),this.time.changes.pipe(i.takeUntil(this.unsubscribe$)).subscribe(function(){e.time.hours,e.time.minutes,e.time.seconds,e.time.text=C(e.time.value,e.format,e.time.selected12Hours),e.changed(),e.touched(),e.valueChange.emit(e.time.text)}),this.buildTimes(),this.setClassMap()},V.prototype.ngAfterViewInit=function(){this.opened&&this.initPosition()},V.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},V.prototype.ngOnChanges=function(e){var t=e.use12Hours;t&&!t.previousValue&&t.currentValue&&(this.build12Hours(),this.enabledColumns++)},V.prototype.writeValue=function(e){this.time.text=e;var t=E(this.time.text,this.format);this.time.setValue(t,this.use12Hours),e&&this.opened&&this.initPosition(),this.buildTimes(),this.cdr.markForCheck()},V.prototype.registerOnChange=function(e){this.onChange=e},V.prototype.registerOnTouched=function(e){this.onTouch=e},V.prototype.hmsCls=function(e,t){var i="",n=" "+this.prefixCls+"-select-option-selected ",s=" "+this.prefixCls+"-select-option-disabled ";return("h"===t?this.isSelectedHour(e):"m"===t?this.isSelectedMinute(e):"r"===t?this.isSelected12Hours(e):this.isSelectedSecond(e))&&(i+=n),"r"===t||e.disabled&&(i+=s),i},V.decorators=[{type:u.Component,args:[{encapsulation:u.ViewEncapsulation.None,changeDetection:u.ChangeDetectionStrategy.OnPush,selector:"time-picker-panel",exportAs:"timePickerPanel",template:'<div class="{{ inDatePicker ? prefixCls + \'-panel\' : \'\' }}">\r\n    <div class="{{ prefixCls }}-inner {{ inDatePicker ? prefixCls + \'-column-\' + enabledColumns : \'\'}}">\r\n        <div class="{{ prefixCls }}-combobox" [style.width]="use12Hours? panelWidth+\'px\' : \'100%\'  ">\r\n            <div *ngIf="hourEnabled" #hourListElement class="{{ prefixCls }}-select">\r\n                <ul>\r\n                    <li  *ngFor="let hour of hourRange;trackBy: trackByItems;" (click)="selectHour($event,hour)" [class]="hmsCls(hour, \'h\')">\r\n                        {{ hour.index | number: \'2.0-0\':\'en-US\' }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div *ngIf="minuteEnabled" #minuteListElement class="{{ prefixCls }}-select">\r\n                <ul>\r\n                    <li *ngFor="let minute of minuteRange;trackBy: trackByItems" (click)="selectMinute($event,minute)" [class]="hmsCls(minute, \'m\')">\r\n                        {{ minute.index | number: \'2.0-0\':\'en-US\' }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div *ngIf="secondEnabled" #secondListElement class="{{ prefixCls }}-select">\r\n                <ul>\r\n                    <li *ngFor="let second of secondRange;trackBy: trackByItems" (click)="selectSecond($event,second)" [class]="hmsCls(second, \'s\')">\r\n                        {{ second.index | number: \'2.0-0\':\'en-US\' }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div *ngIf="use12Hours" #use12HoursListElement class="{{ prefixCls }}-select" >\r\n                <ul>\r\n                    <li *ngFor="let range of use12HoursRange; trackBy: trackByItems" (click)="select12Hours($event, range)" [class]="hmsCls(range, \'r\')">\r\n                        {{ range.value }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="{{ prefixCls }}-addon" *ngIf="addOn">\r\n            <ng-template [ngTemplateOutlet]="addOn"></ng-template>\r\n        </div>\r\n    </div>\r\n</div>',providers:[c,{provide:a.NG_VALUE_ACCESSOR,useExisting:V,multi:!0}]}]}],V.ctorParameters=function(){return[{type:u.ElementRef},{type:c},{type:u.ChangeDetectorRef}]},V.propDecorators={timeValueAccessorDirective:[{type:u.ViewChild,args:[R]}],hourListElement:[{type:u.ViewChild,args:["hourListElement"]}],minuteListElement:[{type:u.ViewChild,args:["minuteListElement"]}],secondListElement:[{type:u.ViewChild,args:["secondListElement"]}],use12HoursListElement:[{type:u.ViewChild,args:["use12HoursListElement"]}],inDatePicker:[{type:u.Input}],addOn:[{type:u.Input}],hideDisabledOptions:[{type:u.Input}],clearText:[{type:u.Input}],placeholder:[{type:u.Input}],use12Hours:[{type:u.Input}],allowEmpty:[{type:u.Input}],opened:[{type:u.Input}],defaultOpenValue:[{type:u.Input}],disabledHours:[{type:u.Input}],disabledMinutes:[{type:u.Input}],disabledSeconds:[{type:u.Input}],format:[{type:u.Input}],hourStep:[{type:u.Input}],minuteStep:[{type:u.Input}],secondStep:[{type:u.Input}],value:[{type:u.Input}],valueChange:[{type:u.Output}]},V);function V(e,t,i){this.element=e,this.updateCls=t,this.cdr=i,this._hourStep=1,this._minuteStep=1,this._secondStep=1,this.unsubscribe$=new n.Subject,this._format="HH:mm:ss",this._defaultOpenValue=new Date,this._opened=!1,this._allowEmpty=!0,this._value="",this.prefixCls="time-picker-panel",this.time=new I,this.hourEnabled=!0,this.minuteEnabled=!0,this.secondEnabled=!0,this.enabledColumns=3,this.inDatePicker=!1,this.hideDisabledOptions=!1,this.panelWidth=0,this.valueChange=new u.EventEmitter,this._use12Hours=!1,this.trackByItems=function(e,t){return e}}var T=(k.prototype.getLocaleConfig=function(){var e=this.localeService.getValue("locale");return e&&this.localeConfig[e]?this.localeConfig[e]:this.localeConfig.ZH_CN},k.decorators=[{type:u.Injectable,args:[{providedIn:"root"}]}],k.ctorParameters=function(){return[{type:r.LocaleService}]},k.ngInjectableDef=u.defineInjectable({factory:function(){return new k(u.inject(r.LocaleService))},token:k,providedIn:"root"}),k);function k(e){this.localeService=e,this.localeConfig={ZH_CN:{placeholder:"请选择时间"},EN_US:{placeholder:"Please select a time"}}}var A=0,D=(Object.defineProperty(j.prototype,"use12Hours",{get:function(){return this._use12Hours},set:function(e){this._use12Hours=!!e,e&&this.format?this.format=this.format.replace(/H/g,"h"):!e&&this.format&&(this.format=this.format.replace(/h/g,"H")),this._use12Hours&&(this.format&&-1!==this.format.indexOf("a")||(this.format="hh:mm:ss a"))},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"hideDisabledOptions",{get:function(){return this._hideDisabledOptions},set:function(e){this._hideDisabledOptions=_(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(e){this._allowEmpty=_(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"autoFocus",{get:function(){return this._autoFocus},set:function(e){this._autoFocus=_(e),this.updateAutoFocus()},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=_(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=_(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"editable",{get:function(){return this._editable},set:function(e){this._editable=_(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this._onChange&&this._onChange(this.value)},enumerable:!0,configurable:!0}),j.prototype.ngOnInit=function(){},j.prototype.ngOnChanges=function(e){!e.use12Hours||this.format&&-1!==this.format.indexOf("a")||(this.format="hh:mm:ss a")},j.prototype.ngAfterViewInit=function(){var e=this;this.isInit=!0,this.updateAutoFocus(),document.body.querySelector(".time-picker-overlay")?(this.overlayRef=document.body.querySelector(".time-picker-overlay"),this.overlayPanelRef=this.renderer.createElement("div"),this.renderer.addClass(this.overlayPanelRef,"overlay-panel-"+A++),this.renderer.appendChild(this.overlayRef,this.overlayPanelRef)):(this.overlayRef=this.renderer.createElement("div"),this.overlayPanelRef=this.renderer.createElement("div"),this.renderer.addClass(this.overlayRef,"time-picker-overlay"),this.renderer.addClass(this.overlayPanelRef,"overlay-panel-"+A++),this.renderer.appendChild(this.overlayRef,this.overlayPanelRef),document.body.appendChild(this.overlayRef)),this.overlayRef.addEventListener("click",function(e){e.stopPropagation()}),this.timeInput.nativeElement.addEventListener("blur",function(){e.onBlur()})},j.prototype.ngOnDestroy=function(){this.timeInput.nativeElement.removeEventListener("blur",this.onBlur)},j.prototype.onMouseEnter=function(e){!this.timeInput.nativeElement.value||this.readonly||this.disabled||(e.target.querySelector(".input-group-clear").style.display="")},j.prototype.onMouseLeave=function(e){this.readonly||this.disabled||(e.target.querySelector(".input-group-clear").style.display="none")},j.prototype.open=function(e){var t=this;e.stopPropagation(),this.disabled||!this.editable&&this.readonly||(this.isOpen?this.close():(this.creatPanel(),this.isOpen=!0,this.openChange.emit(this.isOpen),this.renderer.appendChild(this.overlayPanelRef,this.cRef.location.nativeElement),this.renderer.setStyle(this.overlayRef,"display","block"),this.documentClickEvent=this.registerMouseDownEvent(),setTimeout(function(){t.setPosition(),t.renderer.addClass(t.cRef.location.nativeElement,"f-area-show")},10)))},j.prototype.close=function(){for(this.isOpen=!1,this.cRef.instance.opened=!1,this.renderer.removeClass(this.cRef.location.nativeElement,"f-area-show");this.overlayPanelRef.lastChild;)this.overlayPanelRef.removeChild(this.overlayPanelRef.lastChild);this.openChange.emit(this.isOpen),this.focus(),this.removeDocumentListener(),this.cRef&&(this.cRef.destroy(),this.cRef=null)},j.prototype.registerMouseDownEvent=function(){var t=this,e=function(e){e.target===t.overlayPanelRef.parentElement&&(t.renderer.setStyle(t.overlayRef,"display","none"),t.close())};return document.body.addEventListener("mousedown",e,!0),document.body.addEventListener("mousewheel",e,!0),function(){document.body.removeEventListener("mousedown",e,!0),document.body.removeEventListener("mousewheel",e,!0)}},j.prototype.removeDocumentListener=function(){this.documentClickEvent&&(this.documentClickEvent(),this.documentClickEvent=null)},j.prototype.creatPanel=function(){var t=this;null===this.cRef?(this.vcRef.clear(),this.cRef=this.vcRef.createComponent(this.cfr.resolveComponentFactory(M)),this.cRef.location.nativeElement.classList.add("f-area-hide"),this.cRef.changeDetectorRef.detectChanges(),this.cRef.instance.format=this.format,this.cRef.instance.hourStep=this.hourStep,this.cRef.instance.minuteStep=this.minuteStep,this.cRef.instance.secondStep=this.secondStep,this.cRef.instance.disabledHours=this.disabledHours,this.cRef.instance.disabledMinutes=this.disabledMinutes,this.cRef.instance.disabledSeconds=this.disabledSeconds,this.cRef.instance.hideDisabledOptions=this.hideDisabledOptions,this.cRef.instance.use12Hours=this.use12Hours,this.cRef.instance.opened=this.isOpen,this.cRef.instance.defaultOpenValue=this.defaultOpenValue,this.cRef.instance.value=this.value,this.cRef.instance.valueChange.subscribe(function(e){t.value=e,t.cdr.detectChanges(),t.valueChange.emit(e)})):this.cRef.instance.value=this.value},j.prototype.setPosition=function(){var e=this.element.nativeElement.getBoundingClientRect(),t=e.top,i=e.left,n=e.height,s=e.width;t+194+30>window.innerHeight?this.renderer.setStyle(this.cRef.location.nativeElement,"top",t-194+"px"):this.renderer.setStyle(this.cRef.location.nativeElement,"top",t+n+"px");var r=this.cRef.instance.panelWidth;if(window.innerWidth-i<r){var o=window.innerWidth-i-s;this.renderer.setStyle(this.cRef.location.nativeElement,"right",o+"px")}else this.renderer.setStyle(this.cRef.location.nativeElement,"left",i+"px");this.cRef.instance.opened=!0},j.prototype.updateAutoFocus=function(){},j.prototype.onClickClearBtn=function(){this.value=null,this.cRef.instance.time.clear()},j.prototype.focus=function(){this.timeInput.nativeElement&&this.timeInput.nativeElement.focus()},j.prototype.blur=function(){this.timeInput.nativeElement&&this.timeInput.nativeElement.blur()},j.prototype.onBlur=function(){if(this.value){var e=E(this.value,this.format);this.cRef&&(this.cRef.instance.value=this.value),this.value=C(e,this.format),this.changeFlag&&(this.valueChange.emit(this.value),this.changeFlag=!1),this._onTouched&&this._onTouched(this.value)}},j.prototype.onValueChange=function(e){this.changeFlag=!0},j.prototype.onClear=function(){this.clear.emit(),this.value="",this.cRef&&this.cRef.instance&&this.cRef.instance.time.clear(),this._onTouched&&this._onTouched(this.value),this.cdr.detectChanges()},j.prototype.writeValue=function(e){this._value=e,this.cdr.markForCheck()},j.prototype.registerOnChange=function(e){this._onChange=e},j.prototype.registerOnTouched=function(e){this._onTouched=e},j.prototype.setDisabledState=function(e){this.disabled=e,this.cdr.markForCheck()},j.decorators=[{type:u.Component,args:[{encapsulation:u.ViewEncapsulation.None,changeDetection:u.ChangeDetectionStrategy.OnPush,selector:"farris-time-picker",exportAs:"timePicker",template:'\x3c!-- <input-group\r\n    [groupText]="groupIcon"\r\n    #inputgroup\r\n    [disabled]="disabled"\r\n    [readonly]="readonly"\r\n    [editable]="editable"\r\n    [(ngModel)]="value"\r\n    (valueChange)="onValueChange($event)"\r\n    [enableClear]="true"\r\n    (clickHandle)="open()"\r\n    (clear)="onClear()"\r\n    [placeholder]="placeholder"\r\n></input-group> --\x3e\r\n<div\r\n    class="input-group"\r\n    [ngClass]="{\r\n        \'f-state-disabled\': disabled,\r\n        \'f-state-readonly\': readonly && !disabled,\r\n        \'f-state-editable\': editable && !disabled && !readonly\r\n    }"\r\n>\r\n    <input\r\n        type="text"\r\n        class="form-control"\r\n        [attr.placeholder]="disabled || readonly?\'\':placeholder"\r\n        name="farris-time-picker"\r\n        [(ngModel)]="value"\r\n        (ngModelChange)="onValueChange($event)"\r\n        #timeInput\r\n        autocomplete="off"\r\n        [readonly]="readonly || !editable"\r\n        [disabled]="disabled"\r\n        (click)="open($event)"\r\n    />\r\n    <div class="input-group-append f-cmp-iconbtn-wrapper" *ngIf="!readonly && !disabled">\r\n        <span class="input-group-text input-group-clear f-cmp-iconbtn" (click)="onClear()"  style="display: none;padding:0px 4px;">\r\n            <i class="f-icon modal_close"></i>\r\n        </span>\r\n\r\n        <span class="input-group-text f-cmp-iconbtn" (click)="open($event)" style="padding:0px 4px;padding-top: 2px;">\r\n            <i class="f-icon f-icon-timepicker" style="font-size:0.85rem"></i>\r\n        </span>\r\n    </div>\r\n</div>\r\n',animations:[v],providers:[c,{provide:a.NG_VALUE_ACCESSOR,useExisting:j,multi:!0}]}]}],j.ctorParameters=function(){return[{type:u.ElementRef},{type:u.Renderer2},{type:u.ViewContainerRef},{type:u.ComponentFactoryResolver},{type:u.ChangeDetectorRef},{type:T}]},j.propDecorators={timeInput:[{type:u.ViewChild,args:["timeInput"]}],hostCls:[{type:u.HostBinding,args:["class.f-component-timepicker"]}],display:[{type:u.HostBinding,args:["style.display"]}],hourStep:[{type:u.Input}],minuteStep:[{type:u.Input}],secondStep:[{type:u.Input}],clearText:[{type:u.Input}],popupClassName:[{type:u.Input}],placeholder:[{type:u.Input}],addOn:[{type:u.Input}],defaultOpenValue:[{type:u.Input}],disabledHours:[{type:u.Input}],disabledMinutes:[{type:u.Input}],disabledSeconds:[{type:u.Input}],format:[{type:u.Input}],isOpen:[{type:u.Input}],use12Hours:[{type:u.Input}],openChange:[{type:u.Output}],valueChange:[{type:u.Output}],clear:[{type:u.Output}],hideDisabledOptions:[{type:u.Input}],allowEmpty:[{type:u.Input}],autoFocus:[{type:u.Input}],disabled:[{type:u.Input}],readonly:[{type:u.Input}],editable:[{type:u.Input}],onMouseEnter:[{type:u.HostListener,args:["mouseenter",["$event"]]}],onMouseLeave:[{type:u.HostListener,args:["mouseleave",["$event"]]}]},j);function j(e,t,i,n,s,r){if(this.element=e,this.renderer=t,this.vcRef=i,this.cfr=n,this.cdr=s,this.localeService=r,this.hostCls=!0,this._disabled=!1,this._readonly=!1,this._editable=!0,this._allowEmpty=!0,this._autoFocus=!1,this._hideDisabledOptions=!1,this.cRef=null,this.isInit=!1,this.groupIcon='<i class="f-icon f-icon-timepicker"></i>',this.display="block",this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.clearText="clear",this.popupClassName="",this.defaultOpenValue=new Date,this.format="HH:mm:ss",this.isOpen=!1,this.openChange=new u.EventEmitter,this.valueChange=new u.EventEmitter,this.clear=new u.EventEmitter,this._use12Hours=!1,this.changeFlag=!1,this.localeService){var o=this.localeService.getLocaleConfig();this.placeholder=this.placeholder!==undefined?this.placeholder:o.placeholder?o.placeholder:"请选择时间"}}var L=(N.decorators=[{type:u.NgModule,args:[{declarations:[D,M,R],entryComponents:[M],exports:[M,D],imports:[o.CommonModule,a.FormsModule]}]}],N);function N(){}e.TimePickerComponent=D,e.TimePickerModule=L,e.TimePickerPanelComponent=M,e.TimeValueAccessorDirective=R,e.AnimationDuration=p,e.AnimationCurves=m,e.slideMotion=v,e.UpdateHostClassService=c,e.TimePickerLocaleService=T,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-time-picker.umd.min.js.map