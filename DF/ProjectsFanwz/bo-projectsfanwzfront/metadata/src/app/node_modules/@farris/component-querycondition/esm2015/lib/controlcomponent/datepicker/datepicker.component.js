/**
 * @fileoverview added by tsickle
 * Generated from: lib/controlcomponent/datepicker/datepicker.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Injector, EventEmitter, Output } from '@angular/core';
import { SolutionService } from '../../service/solution.service';
import { ControlType } from '../../entity/controltype';
import { ShowType } from '@farris/ui-datepicker';
export class DatePickerComponent {
    /**
     * @param {?} injector
     */
    constructor(injector) {
        this.injector = injector;
        /**
         * 某个字段发生值变化事件时，需要同步清空的字段，可能不是当前字段
         */
        this.changeFields = [];
        this.conditionChange = new EventEmitter();
        // true显示时间 false不显示
        this.showType = ShowType.all; // 显示类型，默认显示全部1；不显示日期，用于选择年月模式2；不显示日期及月份，用于选择年模式3；用于周选择4。
        // 显示类型，默认显示全部1；不显示日期，用于选择年月模式2；不显示日期及月份，用于选择年模式3；用于周选择4。
        this.maxDate = '';
        this.minDate = '';
        this.editable = false;
        this.dateRangeDatesDelimiter = '~';
        this.solutionService = this.injector.get(SolutionService);
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes['changeFields'] && changes['changeFields'].currentValue && !changes['changeFields'].firstChange) {
            /** @type {?} */
            const isChange = changes['changeFields'].currentValue.some((/**
             * @param {?} field
             * @return {?}
             */
            field => field == this.item.fieldCode));
            if (isChange) {
                if (this.dateRange) {
                    this.beginValue = this.item.value && this.item.value.startTime ? this.item.value.startTime.toString().trim() : '';
                    this.endValue = this.item.value && this.item.value.endTime ? this.item.value.endTime.toString().trim() : '';
                    this.bindValue = this.item.value.getOriginalValue();
                }
                else {
                    this.bindValue = this.item.value.getOriginalValue();
                }
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.testId = this.solutionService.getGuid();
        // const controlType = this.item.control.getControlType();
        switch (this.controlType) {
            case ControlType.DateRange:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy-MM-dd';
                this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM-dd';
                this.dateRange = true;
                break;
            case ControlType.SingleDate:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy-MM-dd';
                this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM-dd';
                this.dateRange = false;
                break;
            case ControlType.SingleYear:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy';
                this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy';
                this.showType = ShowType.noDateAndMonth;
                this.dateRange = false;
                break;
            case ControlType.DateTimeRange:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy-MM-dd HH:mm:ss';
                if (this.item.control.enableCustomFormat) {
                    // 使用自定义格式
                    this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM-dd HH:mm:ss';
                }
                else {
                    // 未启用自定义格式
                    this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM-dd';
                    this.dateFormat = this.dateFormat + ' HH:mm:ss';
                }
                this.showTime = true;
                this.dateRange = true;
                break;
            case ControlType.SingleMonth:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy-MM';
                this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM';
                this.showType = ShowType.noDate;
                this.dateRange = false;
                break;
            case ControlType.MonthRange:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy-MM';
                this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM';
                this.showType = ShowType.noDate;
                this.dateRange = true;
                break;
            case ControlType.SingleDateTime:
                this.returnFormat = this.item.control.returnFormat ? this.item.control.returnFormat : 'yyyy-MM-dd HH:mm:ss';
                if (this.item.control.enableCustomFormat) {
                    // 使用自定义格式
                    this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM-dd HH:mm:ss';
                }
                else {
                    // 未启用自定义格式
                    this.dateFormat = this.item.control.format ? this.item.control.format : 'yyyy-MM-dd';
                    this.dateFormat = this.dateFormat + ' HH:mm:ss';
                }
                this.showTime = true;
                this.dateRange = false;
                break;
        }
        // 更新条件
        this.updateParamsByCondition();
        this.placeholder = this.item.placeHolder ? this.item.placeHolder : this.item.control.placeholder;
        if (this.dateRange) {
            this.beginValue = this.item.value && this.item.value.startTime ? this.item.value.startTime.toString().trim() : '';
            this.endValue = this.item.value && this.item.value.endTime ? this.item.value.endTime.toString().trim() : '';
            this.beginPlaceHolder = this.item.beginPlaceHolder ? this.item.beginPlaceHolder : this.placeholder;
            this.endPlaceHolder = this.item.endPlaceHolder ? this.item.endPlaceHolder : this.placeholder;
            this.bindValue = this.item.value.getOriginalValue();
        }
        else {
            this.bindValue = this.item.value.getOriginalValue();
        }
        if (this.item.control.weekSelect && this.controlType == ControlType.DateRange) {
            this.showType = ShowType.selectWeek;
        }
        // 
        this.solutionService.getControlConfigState().subscribe((/**
         * @param {?} simpleConditions
         * @return {?}
         */
        (simpleConditions) => {
            //简单条件
            /** @type {?} */
            let findSimpleCondition = simpleConditions.find((/**
             * @param {?} item
             * @return {?}
             */
            item => item['fieldCode'] == this.item['fieldCode']));
            if (findSimpleCondition) {
                this.updateParamsByCondition(findSimpleCondition);
            }
        }));
    }
    /**
     * @private
     * @param {?=} condition
     * @return {?}
     */
    updateParamsByCondition(condition = null) {
        /** @type {?} */
        let conditionControl = null;
        conditionControl = condition ? condition.control : this.item.control;
        switch (this.controlType) {
            case ControlType.SingleYear:
                this.maxDate = conditionControl.hasOwnProperty('maxDate') ? conditionControl['maxDate'] : this.maxDate;
                this.minDate = conditionControl.hasOwnProperty('minDate') ? conditionControl['minDate'] : this.minDate;
                break;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onDateChange(event) {
        this.item.value.setOriginalValue({
            formatted: event.returnFormatted,
            delimiter: this.dateRangeDatesDelimiter
        });
        this.conditionChange.emit();
    }
    /**
     * @param {?} field
     * @return {?}
     */
    getConditionItemTitle(field) {
        return this.solutionService.getConditionItemTitle(field);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    beginValueChange($event) {
        // this.beginValue = $event;
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    endValueChange($event) {
        // this.endValue = $event;
    }
}
DatePickerComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-solution-datepicker',
                template: "<div class=\"farris-group-wrap\" id=\"{{item.id}}\">\r\n    <div class=\"form-group farris-form-group  common-group\"  [ngClass]=\"{'q-state-readonly':item.readonly,'datepicker-range-group':dateRange}\">\r\n        <label class=\"col-form-label\" *ngIf=\"item\" title=\"{{getConditionItemTitle(item)}}\">\r\n            <span class=\"farris-label-info text-danger\" *ngIf=\"item.control.isRequired()\">*</span>\r\n            <span class=\"farris-label-text\">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class=\"farris-input-wrap\">\r\n            <farris-datepicker *ngIf=\"!dateRange\"\r\n                [(ngModel)]=\"bindValue\"\r\n                [dateRange]=\"dateRange\"\r\n                [placeholder]=\"placeholder\"\r\n                [returnFormat]=\"returnFormat\"\r\n                [dateFormat]=\"dateFormat\"\r\n                [editable]=\"editable\"\r\n                [showType]=\"showType\"\r\n                [showTime]=\"showTime\"\r\n                [readonly]=\"item.readonly\"\r\n                (valueChange)=\"onDateChange($event)\"\r\n                [maxDate]=\"maxDate\"\r\n                [minDate]=\"minDate\"\r\n                id=\"{{testId}}\"\r\n            >\r\n            </farris-datepicker>\r\n            <farris-datepicker *ngIf=\"dateRange\"\r\n                [dateRange]=\"dateRange\"\r\n                [placeholder]=\"placeholder\"      \r\n                [beginPlaceholder]=\"beginPlaceHolder\"\r\n                [endPlaceholder]=\"endPlaceHolder\"\r\n                [returnFormat]=\"returnFormat\"\r\n                [dateFormat]=\"dateFormat\"\r\n                [editable]=\"editable\"\r\n                [showType]=\"showType\"\r\n                [showTime]=\"showTime\"\r\n                [readonly]=\"item.readonly\"\r\n                [(ngModel)]=\"bindValue\"\r\n                (valueChange)=\"onDateChange($event)\"\r\n                id=\"{{testId}}\"\r\n            >\r\n            </farris-datepicker>\r\n        </div>\r\n    </div>\r\n</div>\r\n"
            }] }
];
/** @nocollapse */
DatePickerComponent.ctorParameters = () => [
    { type: Injector }
];
DatePickerComponent.propDecorators = {
    item: [{ type: Input }],
    controlType: [{ type: Input }],
    changeFields: [{ type: Input }],
    conditionChange: [{ type: Output, args: ['conditionChange',] }]
};
if (false) {
    /** @type {?} */
    DatePickerComponent.prototype.item;
    /** @type {?} */
    DatePickerComponent.prototype.controlType;
    /**
     * 某个字段发生值变化事件时，需要同步清空的字段，可能不是当前字段
     * @type {?}
     */
    DatePickerComponent.prototype.changeFields;
    /** @type {?} */
    DatePickerComponent.prototype.conditionChange;
    /** @type {?} */
    DatePickerComponent.prototype.solutionService;
    /** @type {?} */
    DatePickerComponent.prototype.dateRange;
    /** @type {?} */
    DatePickerComponent.prototype.showTime;
    /** @type {?} */
    DatePickerComponent.prototype.showType;
    /** @type {?} */
    DatePickerComponent.prototype.maxDate;
    /** @type {?} */
    DatePickerComponent.prototype.minDate;
    /** @type {?} */
    DatePickerComponent.prototype.disableDates;
    /** @type {?} */
    DatePickerComponent.prototype.placeholder;
    /** @type {?} */
    DatePickerComponent.prototype.dateFormat;
    /** @type {?} */
    DatePickerComponent.prototype.returnFormat;
    /** @type {?} */
    DatePickerComponent.prototype.returnType;
    /** @type {?} */
    DatePickerComponent.prototype.disabled;
    /** @type {?} */
    DatePickerComponent.prototype.readonly;
    /** @type {?} */
    DatePickerComponent.prototype.editable;
    /** @type {?} */
    DatePickerComponent.prototype.dateRangeDatesDelimiter;
    /** @type {?} */
    DatePickerComponent.prototype.bindValue;
    /** @type {?} */
    DatePickerComponent.prototype.beginValue;
    /** @type {?} */
    DatePickerComponent.prototype.endValue;
    /** @type {?} */
    DatePickerComponent.prototype.testId;
    /** @type {?} */
    DatePickerComponent.prototype.beginPlaceHolder;
    /** @type {?} */
    DatePickerComponent.prototype.endPlaceHolder;
    /**
     * @type {?}
     * @private
     */
    DatePickerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXBpY2tlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2NvbXBvbmVudC1xdWVyeWNvbmRpdGlvbi8iLCJzb3VyY2VzIjpbImxpYi9jb250cm9sY29tcG9uZW50L2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBcUIsUUFBUSxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBRW5ILE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUVqRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBTWpELE1BQU0sT0FBTyxtQkFBbUI7Ozs7SUFrQzlCLFlBQW9CLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENBQVU7Ozs7UUF6QjdCLGlCQUFZLEdBQWtCLEVBQUUsQ0FBQztRQUVmLG9CQUFlLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7UUFLaEUsYUFBUSxHQUFXLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyx5REFBeUQ7O1FBQzFGLFlBQU8sR0FBeUIsRUFBRSxDQUFDO1FBQ25DLFlBQU8sR0FBeUIsRUFBRSxDQUFDO1FBUW5DLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFDMUIsNEJBQXVCLEdBQVcsR0FBRyxDQUFDO1FBUXBDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDNUQsQ0FBQzs7Ozs7SUFFRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxXQUFXLEVBQUU7O2tCQUNyRyxRQUFRLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJOzs7O1lBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUM7WUFDakcsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO29CQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7b0JBQ2xILElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDNUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2lCQUNyRDtxQkFBTTtvQkFDTCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7aUJBQ3JEO2FBQ0Y7U0FDRjtJQUNILENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzdDLDBEQUEwRDtRQUMxRCxRQUFRLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDeEIsS0FBSyxXQUFXLENBQUMsU0FBUztnQkFDeEIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQSxDQUFDLENBQUEsWUFBWSxDQUFDO2dCQUMvRixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7Z0JBQ3JGLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO2dCQUN0QixNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsVUFBVTtnQkFDekIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQSxDQUFDLENBQUEsWUFBWSxDQUFDO2dCQUMvRixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7Z0JBQ3JGLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2dCQUN2QixNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsVUFBVTtnQkFDekIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQSxDQUFDLENBQUEsTUFBTSxDQUFDO2dCQUN6RixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7Z0JBQy9FLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQztnQkFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7Z0JBQ3ZCLE1BQU07WUFDUixLQUFLLFdBQVcsQ0FBQyxhQUFhO2dCQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQSxDQUFDLENBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFBLENBQUMsQ0FBQSxxQkFBcUIsQ0FBQztnQkFDeEcsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBQztvQkFDdEMsVUFBVTtvQkFDVixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQztpQkFDL0Y7cUJBQUk7b0JBQ0YsV0FBVztvQkFDWCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7b0JBQ3JGLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7aUJBQ2xEO2dCQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dCQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztnQkFDdEIsTUFBTTtZQUNSLEtBQUssV0FBVyxDQUFDLFdBQVc7Z0JBQzFCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFBLENBQUMsQ0FBQSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUEsQ0FBQyxDQUFBLFNBQVMsQ0FBQztnQkFDNUYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO2dCQUNsRixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2dCQUN2QixNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsVUFBVTtnQkFDekIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQSxDQUFDLENBQUEsU0FBUyxDQUFDO2dCQUM1RixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7Z0JBQ2xGLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztnQkFDaEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7Z0JBQ3RCLE1BQU07WUFDUixLQUFLLFdBQVcsQ0FBQyxjQUFjO2dCQUM3QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQSxDQUFDLENBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFBLENBQUMsQ0FBQSxxQkFBcUIsQ0FBQztnQkFDeEcsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBQztvQkFDdEMsVUFBVTtvQkFDVixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQztpQkFDL0Y7cUJBQUk7b0JBQ0YsV0FBVztvQkFDWCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7b0JBQ3JGLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7aUJBQ2xEO2dCQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dCQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztnQkFDdkIsTUFBTTtTQUNUO1FBQ0QsT0FBTztRQUNQLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO1FBQy9CLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDakcsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNsSCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDNUcsSUFBSSxDQUFDLGdCQUFnQixHQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxXQUFXLENBQUM7WUFDN0YsSUFBSSxDQUFDLGNBQWMsR0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQSxDQUFDLENBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUEsQ0FBQyxDQUFBLElBQUksQ0FBQyxXQUFXLENBQUM7WUFDdkYsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQ3JEO2FBQU07WUFDTCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7U0FDckQ7UUFFRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLFdBQVcsQ0FBQyxTQUFTLEVBQUU7WUFDN0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDO1NBQ3JDO1FBRUQsR0FBRztRQUNILElBQUksQ0FBQyxlQUFlLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxTQUFTOzs7O1FBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFOzs7Z0JBRXRFLG1CQUFtQixHQUFHLGdCQUFnQixDQUFDLElBQUk7Ozs7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDO1lBQ3BHLElBQUksbUJBQW1CLEVBQUU7Z0JBQ3ZCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2FBQ25EO1FBQ0gsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDOzs7Ozs7SUFDTyx1QkFBdUIsQ0FBQyxTQUFTLEdBQUcsSUFBSTs7WUFDMUMsZ0JBQWdCLEdBQUcsSUFBSTtRQUMzQixnQkFBZ0IsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3JFLFFBQVEsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUN4QixLQUFLLFdBQVcsQ0FBQyxVQUFVO2dCQUN6QixJQUFJLENBQUMsT0FBTyxHQUFHLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ3ZHLElBQUksQ0FBQyxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDdkcsTUFBTTtTQUNUO0lBQ0gsQ0FBQzs7Ozs7SUFDRCxZQUFZLENBQUMsS0FBVTtRQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztZQUMvQixTQUFTLEVBQUUsS0FBSyxDQUFDLGVBQWU7WUFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyx1QkFBdUI7U0FDeEMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM5QixDQUFDOzs7OztJQUVELHFCQUFxQixDQUFDLEtBQXFCO1FBQ3pDLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzRCxDQUFDOzs7OztJQUVELGdCQUFnQixDQUFDLE1BQU07UUFDdEIsNEJBQTRCO0lBQzdCLENBQUM7Ozs7O0lBRUQsY0FBYyxDQUFDLE1BQU07UUFDcEIsMEJBQTBCO0lBQzNCLENBQUM7OztZQTFLRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLHlCQUF5QjtnQkFDbkMsMi9EQUEwQzthQUMzQzs7OztZQVY2QyxRQUFROzs7bUJBYW5ELEtBQUs7MEJBRUwsS0FBSzsyQkFLTCxLQUFLOzhCQUVMLE1BQU0sU0FBQyxpQkFBaUI7Ozs7SUFUekIsbUNBQW1COztJQUVuQiwwQ0FBNkI7Ozs7O0lBSzdCLDJDQUEwQzs7SUFFMUMsOENBQWdFOztJQUVoRSw4Q0FBaUM7O0lBQ2pDLHdDQUFtQjs7SUFDbkIsdUNBQWtCOztJQUNsQix1Q0FBZ0M7O0lBQ2hDLHNDQUFtQzs7SUFDbkMsc0NBQW1DOztJQUNuQywyQ0FBNkQ7O0lBQzdELDBDQUFvQjs7SUFDcEIseUNBQW1COztJQUNuQiwyQ0FBcUI7O0lBQ3JCLHlDQUFtQjs7SUFDbkIsdUNBQWtCOztJQUNsQix1Q0FBa0I7O0lBQ2xCLHVDQUEwQjs7SUFDMUIsc0RBQXNDOztJQUN0Qyx3Q0FBa0I7O0lBQ2xCLHlDQUFnQjs7SUFDaEIsdUNBQWM7O0lBQ2QscUNBQWU7O0lBQ2YsK0NBQXdCOztJQUN4Qiw2Q0FBc0I7Ozs7O0lBQ1YsdUNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBPbkNoYW5nZXMsIEluamVjdG9yLCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBRdWVyeUNvbmRpdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0eS9xdWVyeWNvbmRpdGlvbic7XHJcbmltcG9ydCB7IFNvbHV0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2Uvc29sdXRpb24uc2VydmljZSc7XHJcblxyXG5pbXBvcnQgeyBDb250cm9sVHlwZSB9IGZyb20gJy4uLy4uL2VudGl0eS9jb250cm9sdHlwZSc7XHJcbmltcG9ydCB7IFNob3dUeXBlIH0gZnJvbSAnQGZhcnJpcy91aS1kYXRlcGlja2VyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLXNvbHV0aW9uLWRhdGVwaWNrZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9kYXRlcGlja2VyLmNvbXBvbmVudC5odG1sJyxcclxufSlcclxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgLy8g6L+H5ruk5p2h5Lu2XHJcbiAgQElucHV0KCkgaXRlbTogYW55O1xyXG4gIC8vIFxyXG4gIEBJbnB1dCgpIGNvbnRyb2xUeXBlOiBudW1iZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIOafkOS4quWtl+auteWPkeeUn+WAvOWPmOWMluS6i+S7tuaXtu+8jOmcgOimgeWQjOatpea4heepuueahOWtl+aute+8jOWPr+iDveS4jeaYr+W9k+WJjeWtl+autVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGNoYW5nZUZpZWxkczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cclxuICBAT3V0cHV0KCdjb25kaXRpb25DaGFuZ2UnKSBjb25kaXRpb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIHNvbHV0aW9uU2VydmljZTogU29sdXRpb25TZXJ2aWNlO1xyXG4gIGRhdGVSYW5nZTogYm9vbGVhbjsgLy8gdHJ1ZeWMuumXtCBmYWxzZeWNlVxyXG4gIHNob3dUaW1lOiBib29sZWFuOyAvLyB0cnVl5pi+56S65pe26Ze0IGZhbHNl5LiN5pi+56S6XHJcbiAgc2hvd1R5cGU6IG51bWJlciA9IFNob3dUeXBlLmFsbDsgLy8g5pi+56S657G75Z6L77yM6buY6K6k5pi+56S65YWo6YOoMe+8m+S4jeaYvuekuuaXpeacn++8jOeUqOS6jumAieaLqeW5tOaciOaooeW8jzLvvJvkuI3mmL7npLrml6XmnJ/lj4rmnIjku73vvIznlKjkuo7pgInmi6nlubTmqKHlvI8z77yb55So5LqO5ZGo6YCJ5oupNOOAglxyXG4gIG1heERhdGU6IHN0cmluZyB8IERhdGUgfCBudWxsID0gJyc7XHJcbiAgbWluRGF0ZTogc3RyaW5nIHwgRGF0ZSB8IG51bGwgPSAnJztcclxuICBkaXNhYmxlRGF0ZXM6IHsgeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyLCBkYXk6IG51bWJlciB9W107XHJcbiAgcGxhY2Vob2xkZXI6IHN0cmluZztcclxuICBkYXRlRm9ybWF0OiBzdHJpbmc7IC8vIOaYvuekuuWAvOaXpeacn+agvOW8j+WMllxyXG4gIHJldHVybkZvcm1hdDogc3RyaW5nOyAvLyDov5Tlm57lgLzml6XmnJ/moLzlvI/ljJZcclxuICByZXR1cm5UeXBlOiBzdHJpbmc7IC8vIOi/lOWbnuWAvOexu+Wei++8jOi/lOWbnuWAvOexu+Wei+m7mOiupOaDheWGteS4i+aYr+WSjOi+k+WFpeWAvOexu+Wei+ebuOWQjO+8jOS9huaYr+WmguaenOi+k+WFpeWAvOS4um51bGznrYnpnZ7ms5XlgLzvvIzpu5jorqTkuLpTdHJpbmfvvIzlpoLmnpzmg7PmlLnkuLpEYXRl77yM5a6a5LmJ6K+l5a2X5q6144CCXHJcbiAgZGlzYWJsZWQ6IGJvb2xlYW47XHJcbiAgcmVhZG9ubHk6IGJvb2xlYW47XHJcbiAgZWRpdGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcjogc3RyaW5nID0gJ34nO1xyXG4gIGJpbmRWYWx1ZTogc3RyaW5nO1xyXG4gIGJlZ2luVmFsdWU6IGFueTtcclxuICBlbmRWYWx1ZTogYW55O1xyXG4gIHRlc3RJZDogc3RyaW5nO1xyXG4gIGJlZ2luUGxhY2VIb2xkZXI6c3RyaW5nO1xyXG4gIGVuZFBsYWNlSG9sZGVyOnN0cmluZztcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3Rvcikge1xyXG4gICAgdGhpcy5zb2x1dGlvblNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChTb2x1dGlvblNlcnZpY2UpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKGNoYW5nZXNbJ2NoYW5nZUZpZWxkcyddICYmIGNoYW5nZXNbJ2NoYW5nZUZpZWxkcyddLmN1cnJlbnRWYWx1ZSAmJiAhY2hhbmdlc1snY2hhbmdlRmllbGRzJ10uZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgY29uc3QgaXNDaGFuZ2UgPSBjaGFuZ2VzWydjaGFuZ2VGaWVsZHMnXS5jdXJyZW50VmFsdWUuc29tZShmaWVsZCA9PiBmaWVsZCA9PSB0aGlzLml0ZW0uZmllbGRDb2RlKTtcclxuICAgICAgaWYgKGlzQ2hhbmdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICB0aGlzLmJlZ2luVmFsdWUgPSB0aGlzLml0ZW0udmFsdWUgJiYgdGhpcy5pdGVtLnZhbHVlLnN0YXJ0VGltZSA/IHRoaXMuaXRlbS52YWx1ZS5zdGFydFRpbWUudG9TdHJpbmcoKS50cmltKCkgOiAnJztcclxuICAgICAgICAgIHRoaXMuZW5kVmFsdWUgPSB0aGlzLml0ZW0udmFsdWUgJiYgdGhpcy5pdGVtLnZhbHVlLmVuZFRpbWUgPyB0aGlzLml0ZW0udmFsdWUuZW5kVGltZS50b1N0cmluZygpLnRyaW0oKSA6ICcnO1xyXG4gICAgICAgICAgdGhpcy5iaW5kVmFsdWUgPSB0aGlzLml0ZW0udmFsdWUuZ2V0T3JpZ2luYWxWYWx1ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmJpbmRWYWx1ZSA9IHRoaXMuaXRlbS52YWx1ZS5nZXRPcmlnaW5hbFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMudGVzdElkID0gdGhpcy5zb2x1dGlvblNlcnZpY2UuZ2V0R3VpZCgpO1xyXG4gICAgLy8gY29uc3QgY29udHJvbFR5cGUgPSB0aGlzLml0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpO1xyXG4gICAgc3dpdGNoICh0aGlzLmNvbnRyb2xUeXBlKSB7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuRGF0ZVJhbmdlOlxyXG4gICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wucmV0dXJuRm9ybWF0P3RoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdDoneXl5eS1NTS1kZCc7XHJcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0ID8gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0IDogJ3l5eXktTU0tZGQnO1xyXG4gICAgICAgIHRoaXMuZGF0ZVJhbmdlID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBDb250cm9sVHlwZS5TaW5nbGVEYXRlOlxyXG4gICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wucmV0dXJuRm9ybWF0P3RoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdDoneXl5eS1NTS1kZCc7XHJcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0ID8gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0IDogJ3l5eXktTU0tZGQnO1xyXG4gICAgICAgIHRoaXMuZGF0ZVJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlWWVhcjpcclxuICAgICAgICB0aGlzLnJldHVybkZvcm1hdCA9IHRoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdD90aGlzLml0ZW0uY29udHJvbC5yZXR1cm5Gb3JtYXQ6J3l5eXknO1xyXG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHRoaXMuaXRlbS5jb250cm9sLmZvcm1hdCA/IHRoaXMuaXRlbS5jb250cm9sLmZvcm1hdCA6ICd5eXl5JztcclxuICAgICAgICB0aGlzLnNob3dUeXBlID0gU2hvd1R5cGUubm9EYXRlQW5kTW9udGg7XHJcbiAgICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBDb250cm9sVHlwZS5EYXRlVGltZVJhbmdlOlxyXG4gICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wucmV0dXJuRm9ybWF0P3RoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdDoneXl5eS1NTS1kZCBISDptbTpzcyc7XHJcbiAgICAgICAgaWYodGhpcy5pdGVtLmNvbnRyb2wuZW5hYmxlQ3VzdG9tRm9ybWF0KXtcclxuICAgICAgICAgIC8vIOS9v+eUqOiHquWumuS5ieagvOW8j1xyXG4gICAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0ID8gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0IDogJ3l5eXktTU0tZGQgSEg6bW06c3MnO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgIC8vIOacquWQr+eUqOiHquWumuS5ieagvOW8j1xyXG4gICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHRoaXMuaXRlbS5jb250cm9sLmZvcm1hdCA/IHRoaXMuaXRlbS5jb250cm9sLmZvcm1hdCA6ICd5eXl5LU1NLWRkJztcclxuICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSB0aGlzLmRhdGVGb3JtYXQgKyAnIEhIOm1tOnNzJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93VGltZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kYXRlUmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIENvbnRyb2xUeXBlLlNpbmdsZU1vbnRoOlxyXG4gICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wucmV0dXJuRm9ybWF0P3RoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdDoneXl5eS1NTSc7XHJcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0ID8gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0IDogJ3l5eXktTU0nO1xyXG4gICAgICAgIHRoaXMuc2hvd1R5cGUgPSBTaG93VHlwZS5ub0RhdGU7XHJcbiAgICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBDb250cm9sVHlwZS5Nb250aFJhbmdlOlxyXG4gICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wucmV0dXJuRm9ybWF0P3RoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdDoneXl5eS1NTSc7XHJcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0ID8gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0IDogJ3l5eXktTU0nO1xyXG4gICAgICAgIHRoaXMuc2hvd1R5cGUgPSBTaG93VHlwZS5ub0RhdGU7XHJcbiAgICAgICAgdGhpcy5kYXRlUmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIENvbnRyb2xUeXBlLlNpbmdsZURhdGVUaW1lOlxyXG4gICAgICAgIHRoaXMucmV0dXJuRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wucmV0dXJuRm9ybWF0P3RoaXMuaXRlbS5jb250cm9sLnJldHVybkZvcm1hdDoneXl5eS1NTS1kZCBISDptbTpzcyc7XHJcbiAgICAgICAgaWYodGhpcy5pdGVtLmNvbnRyb2wuZW5hYmxlQ3VzdG9tRm9ybWF0KXtcclxuICAgICAgICAgIC8vIOS9v+eUqOiHquWumuS5ieagvOW8j1xyXG4gICAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0ID8gdGhpcy5pdGVtLmNvbnRyb2wuZm9ybWF0IDogJ3l5eXktTU0tZGQgSEg6bW06c3MnO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgIC8vIOacquWQr+eUqOiHquWumuS5ieagvOW8j1xyXG4gICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHRoaXMuaXRlbS5jb250cm9sLmZvcm1hdCA/IHRoaXMuaXRlbS5jb250cm9sLmZvcm1hdCA6ICd5eXl5LU1NLWRkJztcclxuICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSB0aGlzLmRhdGVGb3JtYXQgKyAnIEhIOm1tOnNzJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93VGltZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIC8vIOabtOaWsOadoeS7tlxyXG4gICAgdGhpcy51cGRhdGVQYXJhbXNCeUNvbmRpdGlvbigpO1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMuaXRlbS5wbGFjZUhvbGRlciA/IHRoaXMuaXRlbS5wbGFjZUhvbGRlciA6IHRoaXMuaXRlbS5jb250cm9sLnBsYWNlaG9sZGVyO1xyXG4gICAgaWYgKHRoaXMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgIHRoaXMuYmVnaW5WYWx1ZSA9IHRoaXMuaXRlbS52YWx1ZSAmJiB0aGlzLml0ZW0udmFsdWUuc3RhcnRUaW1lID8gdGhpcy5pdGVtLnZhbHVlLnN0YXJ0VGltZS50b1N0cmluZygpLnRyaW0oKSA6ICcnO1xyXG4gICAgICB0aGlzLmVuZFZhbHVlID0gdGhpcy5pdGVtLnZhbHVlICYmIHRoaXMuaXRlbS52YWx1ZS5lbmRUaW1lID8gdGhpcy5pdGVtLnZhbHVlLmVuZFRpbWUudG9TdHJpbmcoKS50cmltKCkgOiAnJztcclxuICAgICAgdGhpcy5iZWdpblBsYWNlSG9sZGVyPXRoaXMuaXRlbS5iZWdpblBsYWNlSG9sZGVyP3RoaXMuaXRlbS5iZWdpblBsYWNlSG9sZGVyOnRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgIHRoaXMuZW5kUGxhY2VIb2xkZXI9dGhpcy5pdGVtLmVuZFBsYWNlSG9sZGVyP3RoaXMuaXRlbS5lbmRQbGFjZUhvbGRlcjp0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICB0aGlzLmJpbmRWYWx1ZSA9IHRoaXMuaXRlbS52YWx1ZS5nZXRPcmlnaW5hbFZhbHVlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJpbmRWYWx1ZSA9IHRoaXMuaXRlbS52YWx1ZS5nZXRPcmlnaW5hbFZhbHVlKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh0aGlzLml0ZW0uY29udHJvbC53ZWVrU2VsZWN0ICYmIHRoaXMuY29udHJvbFR5cGUgPT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlKSB7XHJcbiAgICAgIHRoaXMuc2hvd1R5cGUgPSBTaG93VHlwZS5zZWxlY3RXZWVrO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcclxuICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLmdldENvbnRyb2xDb25maWdTdGF0ZSgpLnN1YnNjcmliZSgoc2ltcGxlQ29uZGl0aW9ucykgPT4ge1xyXG4gICAgICAvL+eugOWNleadoeS7tlxyXG4gICAgICBsZXQgZmluZFNpbXBsZUNvbmRpdGlvbiA9IHNpbXBsZUNvbmRpdGlvbnMuZmluZChpdGVtID0+IGl0ZW1bJ2ZpZWxkQ29kZSddID09IHRoaXMuaXRlbVsnZmllbGRDb2RlJ10pO1xyXG4gICAgICBpZiAoZmluZFNpbXBsZUNvbmRpdGlvbikge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGFyYW1zQnlDb25kaXRpb24oZmluZFNpbXBsZUNvbmRpdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBwcml2YXRlIHVwZGF0ZVBhcmFtc0J5Q29uZGl0aW9uKGNvbmRpdGlvbiA9IG51bGwpIHtcclxuICAgIGxldCBjb25kaXRpb25Db250cm9sID0gbnVsbDtcclxuICAgIGNvbmRpdGlvbkNvbnRyb2wgPSBjb25kaXRpb24gPyBjb25kaXRpb24uY29udHJvbCA6IHRoaXMuaXRlbS5jb250cm9sO1xyXG4gICAgc3dpdGNoICh0aGlzLmNvbnRyb2xUeXBlKSB7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlWWVhcjpcclxuICAgICAgICB0aGlzLm1heERhdGUgPSBjb25kaXRpb25Db250cm9sLmhhc093blByb3BlcnR5KCdtYXhEYXRlJykgPyBjb25kaXRpb25Db250cm9sWydtYXhEYXRlJ10gOiB0aGlzLm1heERhdGU7XHJcbiAgICAgICAgdGhpcy5taW5EYXRlID0gY29uZGl0aW9uQ29udHJvbC5oYXNPd25Qcm9wZXJ0eSgnbWluRGF0ZScpID8gY29uZGl0aW9uQ29udHJvbFsnbWluRGF0ZSddIDogdGhpcy5taW5EYXRlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkRhdGVDaGFuZ2UoZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5pdGVtLnZhbHVlLnNldE9yaWdpbmFsVmFsdWUoe1xyXG4gICAgICBmb3JtYXR0ZWQ6IGV2ZW50LnJldHVybkZvcm1hdHRlZCxcclxuICAgICAgZGVsaW1pdGVyOiB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyXHJcbiAgICB9KTtcclxuICAgIHRoaXMuY29uZGl0aW9uQ2hhbmdlLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIGdldENvbmRpdGlvbkl0ZW1UaXRsZShmaWVsZDogUXVlcnlDb25kaXRpb24pIHtcclxuICAgIHJldHVybiB0aGlzLnNvbHV0aW9uU2VydmljZS5nZXRDb25kaXRpb25JdGVtVGl0bGUoZmllbGQpO1xyXG4gIH1cclxuXHJcbiAgYmVnaW5WYWx1ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgLy8gdGhpcy5iZWdpblZhbHVlID0gJGV2ZW50O1xyXG4gIH1cclxuXHJcbiAgZW5kVmFsdWVDaGFuZ2UoJGV2ZW50KSB7XHJcbiAgIC8vIHRoaXMuZW5kVmFsdWUgPSAkZXZlbnQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==