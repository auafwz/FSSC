/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/bill-tracker/bill-tracker.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Inject, LOCALE_ID, Input, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef, Optional, ApplicationRef, Injector, ComponentFactoryResolver, ReflectiveInjector } from '@angular/core';
import { BillTrackerGraphComponent } from '../bill-tracker-graph/bill-tracker-graph.component';
import { BillTrackerDataService } from '../../services/bill-tracker-data.service';
import { BillTrackerArgs } from '../../config/bill-tracker-args';
import { BillTrackerDataComponent } from '../bill-tracker-data/bill-tracker-data.component';
import { BsModalService } from '@farris/ui-modal';
import { LoadingService } from "@farris/ui-loading";
import { MessagerService } from "@farris/ui-messager";
import { NotifyService } from "@farris/ui-notify";
import { BillTrackerDataInfoService } from '../../services/bill-tracker-data-info.service';
import { BillTrackerDirection } from '../../config/bill-tracker-direction';
import { Events } from '../../mxgraph-ext/Events';
import { BillTrackerInternalUiService } from '../../services/bill-tracker-internal-ui.service';
import { mxEvent } from '../../../ref/mxgraph';
var BillTrackerComponent = /** @class */ (function () {
    function BillTrackerComponent(args, localeId, dataService, notify, messager, loading, modal, cdf, vcr, appr, inj, cfr) {
        this.localeId = localeId;
        this.dataService = dataService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.cdf = cdf;
        this.vcr = vcr;
        this.appr = appr;
        this.inj = inj;
        this.cfr = cfr;
        this.defaultDataWrapperHeight = 180;
        this.showData = false;
        this.dataFullScreen = false;
        this.billTrackerArgs = args;
        this.dataInfoService = new BillTrackerDataInfoService();
        this.newBTS = this.dataInfoService.isNewBTS(this.billTrackerArgs.canTrackingResult.billTrackingSettings);
        /** @type {?} */
        var inject = ReflectiveInjector.resolveAndCreate([
            BillTrackerInternalUiService
        ], this.inj);
        this.internalUiService = inject.get(BillTrackerInternalUiService, null);
        this.defaultDataWrapperHeight = args && args.gridOptions && args.gridOptions.defaultHeight ? args.gridOptions.defaultHeight : this.defaultDataWrapperHeight;
    }
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.paintGraph();
        }), 0);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.paintGraph = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.billGraph.paint();
        this.graphZoomScale = this.billGraph.getZoomScale();
        this.billGraph.graph.view.addListener(mxEvent.SCALE, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            // console.log(sender, evt);
            _this.graphZoomScale = _this.billGraph.getZoomScale();
        }));
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    BillTrackerComponent.prototype.selectHandler = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        if (cell) {
            /** @type {?} */
            var billInfo = cell.billInfo;
            /** @type {?} */
            var billDataInfo = cell.billDataInfo;
            if (billInfo == this.lastBillInfo && billDataInfo == this.lastBillDataInfo && this.showData == true) {
                return;
            }
            /** @type {?} */
            var args = this.dataService.buildGetMainEntityDataArgs(billInfo, billDataInfo);
            this.billData.showDataGrid(args, billInfo, billDataInfo, null);
            this.showData = true;
            this.lastBillInfo = billInfo;
            this.lastBillDataInfo = billDataInfo;
        }
        else {
            this.billData.clearDataRegion();
            this.showData = false;
        }
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BillTrackerComponent.prototype.stateChangeHandler = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        if (evt.type == Events.CLICK_FIRST_SUMMARY) {
            this.openBillDetail(evt.data);
        }
    };
    /**
     * @param {?} modalRef
     * @return {?}
     */
    BillTrackerComponent.prototype.setModalRef = /**
     * @param {?} modalRef
     * @return {?}
     */
    function (modalRef) {
        this.modalRef = modalRef;
        if (this.billGraph != null) {
            this.billGraph.setModalRef(modalRef);
        }
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BillTrackerComponent.prototype.resetGraphHeight = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        var _this = this;
        ((/** @type {?} */ (evt.host))).style.top = '';
        ((/** @type {?} */ (evt.host))).style.left = '';
        this.graphContainerER.nativeElement.style.height = this.mainContainerER.nativeElement.clientHeight - evt.size.height + "px";
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.billGraph.refresh();
        }));
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.expandDataRegion = /**
     * @return {?}
     */
    function () {
        this.dataFullScreen = true;
        this.divDataWrapperER.nativeElement.style.height = '100%';
        this.divDataWrapperER.nativeElement.style.top = '0';
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.collapseDataRegion = /**
     * @return {?}
     */
    function () {
        this.dataFullScreen = false;
        this.divDataWrapperER.nativeElement.style.height = this.defaultDataWrapperHeight + "px";
        this.divDataWrapperER.nativeElement.style.top = null;
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BillTrackerComponent.prototype.onRzResized = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphZoomIn = /**
     * @return {?}
     */
    function () {
        this.billGraph.zoomIn();
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphZoomOut = /**
     * @return {?}
     */
    function () {
        this.billGraph.zoomOut();
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphZoomActual = /**
     * @return {?}
     */
    function () {
        this.billGraph.zoomActual();
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphPrint = /**
     * @return {?}
     */
    function () {
        this.billGraph.print();
    };
    /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpand = /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    function (direction, all) {
        if (all === void 0) { all = false; }
        this.billGraph.expand(direction, all);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandUpAll = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Up, true);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandUp = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Up, false);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandDown = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Down, false);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandDownAll = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Down, true);
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    BillTrackerComponent.prototype.openBillDetail = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        this.internalUiService.openBillDetail(cell.billInfo, cell.billDataInfo);
    };
    BillTrackerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-bill-tracker',
                    template: "<div class=\"g-main\" style=\"height: 100%; background-color: #ffffff;\" #mainContainer>\r\n    <div class=\"bill-tracker-toolbar-wrapper\" *ngIf=\"modalRef!=null\">\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUpAll()\">\r\n            {{'expandUpAll'|billTrackerLocale}}\r\n        </button>\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUp()\">\r\n            {{'expandUp'|billTrackerLocale}}\r\n        </button>\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDown()\">\r\n            {{'expandDown'|billTrackerLocale}}\r\n        </button>\r\n        <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDownAll()\">\r\n            {{'expandDownAll'|billTrackerLocale}}\r\n        </button>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomOut()\">\r\n            <i class=\"f-icon f-icon-minus\" title=\"{{'zoomOut' | billTrackerLocale}}\"></i>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-input\">\r\n            <input *ngIf=\"false\" type=\"text\" style=\"border: 0; width: 30px; text-align: right;\" readonly\r\n                [(ngModel)]=\"graphZoomScale\">\r\n            <span style=\"border: 0; width: 30px; text-align: right;\">{{graphZoomScale}}</span>\r\n            <span>%</span>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomIn()\">\r\n            <i class=\"f-icon f-icon-add\" title=\"{{'zoomIn' | billTrackerLocale}}\"></i>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomActual()\">\r\n            <i class=\"f-icon f-icon-reset\" title=\"{{'zoomReset' | billTrackerLocale}}\"></i>\r\n        </div>\r\n        <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphPrint()\" *ngIf=\"false\">\r\n            <i class=\"f-icon f-icon-print\" title=\"{{'print' | billTrackerLocale}}\"></i>\r\n        </div>\r\n    </div>\r\n    <div class=\"bill-tracker-graph-wrapper\" #graphContainer>\r\n        <lib-bill-tracker-graph #billGraph [billTrackerArgs]=\"billTrackerArgs\" (select)=\"selectHandler($event)\"\r\n            (stateChange)=\"stateChangeHandler($event)\">\r\n        </lib-bill-tracker-graph>\r\n    </div>\r\n</div>\r\n<!-- todo: \u5206\u5272\u6761\u6682\u672A\u52A0\u6700\u5927\u9AD8\u5EA6\u9650\u5236 -->\r\n<div #divDataWrapper class=\"bill-tracker-data-wrapper\" [style.height]=\"defaultDataWrapperHeight + 'px'\"\r\n    [style.display]=\"showData ? null : 'none'\" ngResizable rzAspectRatio=\"false\" [rzHandles]=\"'n'\" [rzMinHeight]=\"40\"\r\n    (rzStop)=\"onRzResized($event)\">\r\n    <div class=\"bill-tracker-divider-wrapper\">\r\n        <div class=\"bill-tracker-divider bill-tracker-divider-transparent bill-tracker-divider-img\">\r\n        </div>\r\n    </div>\r\n    <div class=\"bill-tracker-fold-wrapper\">\r\n        <div class=\"bill-tracker-fold-icon\">\r\n            <i class=\"f-icon f-icon-arrow-seek-up\" *ngIf=\"dataFullScreen==false\" (click)=\"expandDataRegion()\"></i>\r\n            <i class=\"f-icon f-icon-arrow-seek-down\" *ngIf=\"dataFullScreen==true\" (click)=\"collapseDataRegion()\"></i>\r\n        </div>\r\n    </div>\r\n    <div #divDataTable class=\"bill-tracker-data-table-wrapper\">\r\n        <lib-bill-tracker-data #billData></lib-bill-tracker-data>\r\n    </div>\r\n</div>",
                    providers: [
                        BillTrackerDataService
                    ],
                    changeDetection: ChangeDetectionStrategy.Default,
                    styles: [".bill-tracker-divider{position:relative;height:1px}.bill-tracker-divider-transparent:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:1px;background-color:#e9ecf3}.bill-tracker-divider-transparent:hover:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:1px;background-color:#3f65ff}.bill-tracker-divider-img:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator.svg);background-repeat:no-repeat}.bill-tracker-divider-img:hover:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator-hover.svg);background-repeat:no-repeat}.bill-tracker-graph-wrapper{height:100%;position:relative}.bill-tracker-data-wrapper{z-index:2;overflow-y:auto;position:absolute;left:0;width:100%;bottom:0;height:200px;background-color:#fff;border-top:1px solid #e9ecf3}.bill-tracker-data-table-wrapper{position:relative;width:100%;padding-top:6px}.bill-tracker-fold-wrapper{z-index:1;position:absolute;right:0;top:0;width:2rem;height:2rem}.bill-tracker-fold-icon{display:inline-flex;width:1.5em;height:1.5em;line-height:1.5em;text-align:center;color:#848c9a;background:#fff;border-radius:1.5em;border:1px solid #e9ecf3;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden;margin:.5em .5em 0 0}.bill-tracker-fold-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-wrapper{z-index:1;position:absolute;right:0;top:0;display:flex;margin-right:14px;margin-top:14px;background-color:#fff}.bill-tracker-toolbar-icon{background:#fff;width:22px;height:22px;line-height:22px;text-align:center;color:#595d63;border:1px solid #e8ebf2;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);border-radius:22px;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden}.bill-tracker-toolbar-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-btn:hover{background-color:#fff}"]
                }] }
    ];
    /** @nocollapse */
    BillTrackerComponent.ctorParameters = function () { return [
        { type: BillTrackerArgs },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: BillTrackerDataService },
        { type: NotifyService },
        { type: MessagerService },
        { type: LoadingService },
        { type: BsModalService },
        { type: ChangeDetectorRef },
        { type: ViewContainerRef },
        { type: ApplicationRef },
        { type: Injector, decorators: [{ type: Optional }] },
        { type: ComponentFactoryResolver, decorators: [{ type: Optional }] }
    ]; };
    BillTrackerComponent.propDecorators = {
        billGraph: [{ type: ViewChild, args: ["billGraph",] }],
        billGraphVCR: [{ type: ViewChild, args: ["billGraph", { read: ViewContainerRef },] }],
        mainContainerER: [{ type: ViewChild, args: ["mainContainer",] }],
        graphContainerER: [{ type: ViewChild, args: ["graphContainer",] }],
        billData: [{ type: ViewChild, args: ["billData",] }],
        billDataVCR: [{ type: ViewChild, args: ["billData", { read: ViewContainerRef },] }],
        divDataTableER: [{ type: ViewChild, args: ["divDataTable",] }],
        divDataWrapperER: [{ type: ViewChild, args: ["divDataWrapper",] }],
        billTrackerArgs: [{ type: Input, args: ["billTrackerArgs",] }]
    };
    return BillTrackerComponent;
}());
export { BillTrackerComponent };
if (false) {
    /** @type {?} */
    BillTrackerComponent.prototype.billGraph;
    /** @type {?} */
    BillTrackerComponent.prototype.billGraphVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.mainContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.graphContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.billData;
    /** @type {?} */
    BillTrackerComponent.prototype.billDataVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataTableER;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataWrapperER;
    /** @type {?} */
    BillTrackerComponent.prototype.modalRef;
    /** @type {?} */
    BillTrackerComponent.prototype.billTrackerArgs;
    /** @type {?} */
    BillTrackerComponent.prototype.defaultDataWrapperHeight;
    /** @type {?} */
    BillTrackerComponent.prototype.showData;
    /** @type {?} */
    BillTrackerComponent.prototype.dataFullScreen;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillDataInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.graphZoomScale;
    /** @type {?} */
    BillTrackerComponent.prototype.newBTS;
    /** @type {?} */
    BillTrackerComponent.prototype.dataInfoService;
    /** @type {?} */
    BillTrackerComponent.prototype.internalUiService;
    /** @type {?} */
    BillTrackerComponent.prototype.localeId;
    /** @type {?} */
    BillTrackerComponent.prototype.dataService;
    /** @type {?} */
    BillTrackerComponent.prototype.notify;
    /** @type {?} */
    BillTrackerComponent.prototype.messager;
    /** @type {?} */
    BillTrackerComponent.prototype.loading;
    /** @type {?} */
    BillTrackerComponent.prototype.modal;
    /** @type {?} */
    BillTrackerComponent.prototype.cdf;
    /** @type {?} */
    BillTrackerComponent.prototype.vcr;
    /** @type {?} */
    BillTrackerComponent.prototype.appr;
    /** @type {?} */
    BillTrackerComponent.prototype.inj;
    /** @type {?} */
    BillTrackerComponent.prototype.cfr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9jb21wb25lbnRzL2JpbGwtdHJhY2tlci9iaWxsLXRyYWNrZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBaUIsS0FBSyxFQUFFLFVBQVUsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsUSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxvREFBb0QsQ0FBQztBQUMvRixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDakUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFHNUYsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQzNGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxpREFB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QUFnQzs7SUFDaEMsbUNBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDaGlsZCwgSW5qZWN0LCBMT0NBTEVfSUQsIEFmdGVyVmlld0luaXQsIElucHV0LCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIFZpZXdDb250YWluZXJSZWYsIE9wdGlvbmFsLCBBcHBsaWNhdGlvblJlZiwgSW5qZWN0b3IsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgUmVmbGVjdGl2ZUluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyR3JhcGhDb21wb25lbnQgfSBmcm9tICcuLi9iaWxsLXRyYWNrZXItZ3JhcGgvYmlsbC10cmFja2VyLWdyYXBoLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItZGF0YS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJBcmdzIH0gZnJvbSAnLi4vLi4vY29uZmlnL2JpbGwtdHJhY2tlci1hcmdzJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEYXRhQ29tcG9uZW50IH0gZnJvbSAnLi4vYmlsbC10cmFja2VyLWRhdGEvYmlsbC10cmFja2VyLWRhdGEuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQmlsbERhdGFJbmZvIH0gZnJvbSAnLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL0JpbGxEYXRhSW5mbyc7XHJcbmltcG9ydCB7IEJpbGxJbmZvIH0gZnJvbSAnLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL0JpbGxJbmZvJztcclxuaW1wb3J0IHsgQnNNb2RhbFJlZiwgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1sb2FkaW5nXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLW1lc3NhZ2VyXCI7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1ub3RpZnlcIjtcclxuaW1wb3J0IHsgSVJlc2l6ZUV2ZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kcmFnZ2FibGUnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRhdGFJbmZvU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2JpbGwtdHJhY2tlci1kYXRhLWluZm8uc2VydmljZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGlyZWN0aW9uIH0gZnJvbSAnLi4vLi4vY29uZmlnL2JpbGwtdHJhY2tlci1kaXJlY3Rpb24nO1xyXG5pbXBvcnQgeyBFdmVudHMgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9FdmVudHMnO1xyXG5pbXBvcnQgeyBCaWxsQ2VsbCB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L0JpbGxDZWxsJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2JpbGwtdHJhY2tlci1pbnRlcm5hbC11aS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgbXhFdmVudCB9IGZyb20gJy4uLy4uLy4uL3JlZi9teGdyYXBoJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLWJpbGwtdHJhY2tlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2JpbGwtdHJhY2tlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYmlsbC10cmFja2VyLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIEJpbGxUcmFja2VyRGF0YVNlcnZpY2VcclxuICBdLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuRGVmYXVsdFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmlsbFRyYWNrZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIEBWaWV3Q2hpbGQoXCJiaWxsR3JhcGhcIilcclxuICBiaWxsR3JhcGg6IEJpbGxUcmFja2VyR3JhcGhDb21wb25lbnQ7XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJiaWxsR3JhcGhcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgYmlsbEdyYXBoVkNSOiBWaWV3Q29udGFpbmVyUmVmO1xyXG5cclxuICBAVmlld0NoaWxkKFwibWFpbkNvbnRhaW5lclwiKVxyXG4gIG1haW5Db250YWluZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJncmFwaENvbnRhaW5lclwiKVxyXG4gIGdyYXBoQ29udGFpbmVyRVI6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+O1xyXG5cclxuICBAVmlld0NoaWxkKFwiYmlsbERhdGFcIilcclxuICBiaWxsRGF0YTogQmlsbFRyYWNrZXJEYXRhQ29tcG9uZW50O1xyXG5cclxuICBAVmlld0NoaWxkKFwiYmlsbERhdGFcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgYmlsbERhdGFWQ1I6IFZpZXdDb250YWluZXJSZWY7XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJkaXZEYXRhVGFibGVcIilcclxuICBkaXZEYXRhVGFibGVFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJkaXZEYXRhV3JhcHBlclwiKVxyXG4gIGRpdkRhdGFXcmFwcGVyRVI6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+O1xyXG5cclxuICBtb2RhbFJlZjogQnNNb2RhbFJlZjtcclxuXHJcbiAgQElucHV0KFwiYmlsbFRyYWNrZXJBcmdzXCIpXHJcbiAgYmlsbFRyYWNrZXJBcmdzOiBCaWxsVHJhY2tlckFyZ3M7XHJcblxyXG4gIGRlZmF1bHREYXRhV3JhcHBlckhlaWdodDogbnVtYmVyIHwgc3RyaW5nID0gMTgwO1xyXG4gIHNob3dEYXRhOiBib29sZWFuID0gZmFsc2U7XHJcbiAgZGF0YUZ1bGxTY3JlZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuICBsYXN0QmlsbEluZm86IEJpbGxJbmZvO1xyXG4gIGxhc3RCaWxsRGF0YUluZm86IEJpbGxEYXRhSW5mbztcclxuICBncmFwaFpvb21TY2FsZTogbnVtYmVyO1xyXG5cclxuICBuZXdCVFM6IGJvb2xlYW47XHJcbiAgZGF0YUluZm9TZXJ2aWNlOiBCaWxsVHJhY2tlckRhdGFJbmZvU2VydmljZTtcclxuICBpbnRlcm5hbFVpU2VydmljZTogQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBhcmdzOiBCaWxsVHJhY2tlckFyZ3MsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHVibGljIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGF0YVNlcnZpY2U6IEJpbGxUcmFja2VyRGF0YVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1lc3NhZ2VyOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbG9hZGluZzogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICBwdWJsaWMgbW9kYWw6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHVibGljIGNkZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwdWJsaWMgdmNyOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgcHVibGljIGFwcHI6IEFwcGxpY2F0aW9uUmVmLFxyXG4gICAgQE9wdGlvbmFsKCkgcHVibGljIGluajogSW5qZWN0b3IsXHJcbiAgICBAT3B0aW9uYWwoKSBwdWJsaWMgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgKSB7XHJcblxyXG4gICAgdGhpcy5iaWxsVHJhY2tlckFyZ3MgPSBhcmdzO1xyXG4gICAgdGhpcy5kYXRhSW5mb1NlcnZpY2UgPSBuZXcgQmlsbFRyYWNrZXJEYXRhSW5mb1NlcnZpY2UoKTtcclxuICAgIHRoaXMubmV3QlRTID0gdGhpcy5kYXRhSW5mb1NlcnZpY2UuaXNOZXdCVFModGhpcy5iaWxsVHJhY2tlckFyZ3MuY2FuVHJhY2tpbmdSZXN1bHQuYmlsbFRyYWNraW5nU2V0dGluZ3MpO1xyXG5cclxuICAgIGNvbnN0IGluamVjdCA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtcclxuICAgICAgQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZVxyXG4gICAgXSwgdGhpcy5pbmopO1xyXG4gICAgdGhpcy5pbnRlcm5hbFVpU2VydmljZSA9IGluamVjdC5nZXQoQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQgPSBhcmdzICYmIGFyZ3MuZ3JpZE9wdGlvbnMgJiYgYXJncy5ncmlkT3B0aW9ucy5kZWZhdWx0SGVpZ2h0ID8gYXJncy5ncmlkT3B0aW9ucy5kZWZhdWx0SGVpZ2h0IDogdGhpcy5kZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuXHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5wYWludEdyYXBoKCk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIHBhaW50R3JhcGgoKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC5wYWludCgpO1xyXG4gICAgdGhpcy5ncmFwaFpvb21TY2FsZSA9IHRoaXMuYmlsbEdyYXBoLmdldFpvb21TY2FsZSgpO1xyXG4gICAgdGhpcy5iaWxsR3JhcGguZ3JhcGgudmlldy5hZGRMaXN0ZW5lcihteEV2ZW50LlNDQUxFLCAoc2VuZGVyLCBldnQpID0+IHtcclxuICAgICAgLy8gY29uc29sZS5sb2coc2VuZGVyLCBldnQpO1xyXG4gICAgICB0aGlzLmdyYXBoWm9vbVNjYWxlID0gdGhpcy5iaWxsR3JhcGguZ2V0Wm9vbVNjYWxlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEhhbmRsZXIoY2VsbCkge1xyXG4gICAgaWYgKGNlbGwpIHtcclxuICAgICAgY29uc3QgYmlsbEluZm86IEJpbGxJbmZvID0gY2VsbC5iaWxsSW5mbztcclxuICAgICAgY29uc3QgYmlsbERhdGFJbmZvOiBCaWxsRGF0YUluZm8gPSBjZWxsLmJpbGxEYXRhSW5mbztcclxuXHJcbiAgICAgIGlmIChiaWxsSW5mbyA9PSB0aGlzLmxhc3RCaWxsSW5mbyAmJiBiaWxsRGF0YUluZm8gPT0gdGhpcy5sYXN0QmlsbERhdGFJbmZvICYmIHRoaXMuc2hvd0RhdGEgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYXJncyA9IHRoaXMuZGF0YVNlcnZpY2UuYnVpbGRHZXRNYWluRW50aXR5RGF0YUFyZ3MoYmlsbEluZm8sIGJpbGxEYXRhSW5mbyk7XHJcbiAgICAgIHRoaXMuYmlsbERhdGEuc2hvd0RhdGFHcmlkKGFyZ3MsIGJpbGxJbmZvLCBiaWxsRGF0YUluZm8sIG51bGwpO1xyXG5cclxuICAgICAgdGhpcy5zaG93RGF0YSA9IHRydWU7XHJcbiAgICAgIHRoaXMubGFzdEJpbGxJbmZvID0gYmlsbEluZm87XHJcbiAgICAgIHRoaXMubGFzdEJpbGxEYXRhSW5mbyA9IGJpbGxEYXRhSW5mbztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYmlsbERhdGEuY2xlYXJEYXRhUmVnaW9uKCk7XHJcbiAgICAgIHRoaXMuc2hvd0RhdGEgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRlQ2hhbmdlSGFuZGxlcihldnQ6IHtcclxuICAgIHR5cGU6IGFueSxcclxuICAgIGRhdGE/OiBhbnlcclxuICB9KSB7XHJcbiAgICBpZiAoZXZ0LnR5cGUgPT0gRXZlbnRzLkNMSUNLX0ZJUlNUX1NVTU1BUlkpIHtcclxuICAgICAgdGhpcy5vcGVuQmlsbERldGFpbChldnQuZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRNb2RhbFJlZihtb2RhbFJlZjogQnNNb2RhbFJlZikge1xyXG4gICAgdGhpcy5tb2RhbFJlZiA9IG1vZGFsUmVmO1xyXG5cclxuICAgIGlmICh0aGlzLmJpbGxHcmFwaCAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMuYmlsbEdyYXBoLnNldE1vZGFsUmVmKG1vZGFsUmVmKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0R3JhcGhIZWlnaHQoZXZ0OiBJUmVzaXplRXZlbnQpIHtcclxuICAgIChldnQuaG9zdCBhcyBIVE1MRWxlbWVudCkuc3R5bGUudG9wID0gJyc7XHJcbiAgICAoZXZ0Lmhvc3QgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIHRoaXMuZ3JhcGhDb250YWluZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMubWFpbkNvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gZXZ0LnNpemUuaGVpZ2h0fXB4YDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmJpbGxHcmFwaC5yZWZyZXNoKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGV4cGFuZERhdGFSZWdpb24oKSB7XHJcbiAgICB0aGlzLmRhdGFGdWxsU2NyZWVuID0gdHJ1ZTtcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICcwJztcclxuICB9XHJcblxyXG4gIGNvbGxhcHNlRGF0YVJlZ2lvbigpIHtcclxuICAgIHRoaXMuZGF0YUZ1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gbnVsbDtcclxuICB9XHJcblxyXG4gIG9uUnpSZXNpemVkKGV2dDogSVJlc2l6ZUV2ZW50KSB7XHJcblxyXG4gIH1cclxuXHJcbiAgZ3JhcGhab29tSW4oKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC56b29tSW4oKTtcclxuICB9XHJcblxyXG4gIGdyYXBoWm9vbU91dCgpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnpvb21PdXQoKTtcclxuICB9XHJcblxyXG4gIGdyYXBoWm9vbUFjdHVhbCgpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnpvb21BY3R1YWwoKTtcclxuICB9XHJcblxyXG4gIGdyYXBoUHJpbnQoKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC5wcmludCgpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhFeHBhbmQoZGlyZWN0aW9uOiBCaWxsVHJhY2tlckRpcmVjdGlvbiwgYWxsOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLmV4cGFuZChkaXJlY3Rpb24sIGFsbCk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZFVwQWxsKCkge1xyXG4gICAgdGhpcy5ncmFwaEV4cGFuZChCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZFVwKCkge1xyXG4gICAgdGhpcy5ncmFwaEV4cGFuZChCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhFeHBhbmREb3duKCkge1xyXG4gICAgdGhpcy5ncmFwaEV4cGFuZChCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZERvd25BbGwoKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24sIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgb3BlbkJpbGxEZXRhaWwoY2VsbDogQmlsbENlbGwpIHtcclxuICAgIHRoaXMuaW50ZXJuYWxVaVNlcnZpY2Uub3BlbkJpbGxEZXRhaWwoY2VsbC5iaWxsSW5mbywgY2VsbC5iaWxsRGF0YUluZm8pO1xyXG4gIH1cclxufVxyXG4iXX0=