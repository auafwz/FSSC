/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-06 08:31:57
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-08-15 16:06:58
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, Input, ViewChild, Renderer2, ElementRef, Output, EventEmitter, TemplateRef } from '@angular/core';
import { Observable } from 'rxjs';
import { AngularDraggableDirective } from '@farris/ui-draggable';
import { ModalDirective } from '@farris/ui-modal';
import { ContentChild } from '@angular/core';
var DialogComponent = /** @class */ (function () {
    function DialogComponent(render2, el) {
        this.render2 = render2;
        this.el = el;
        /**
         * 窗口标题
         */
        this.title = '我是标题';
        /**
         * 标题图标
         */
        this.iconCls = undefined;
        /**
         * 宽度
         */
        this.width = 300;
        /**
         * 高度
         */
        this.height = 200;
        this.minWidth = 100;
        this.minHeight = 100;
        this.maxWidth = null;
        this.maxHeight = null;
        /**
         * 显示底部按钮区域，默认显示
         */
        this.showButtons = true;
        /**
         * 显示右上角关闭按钮，默认显示
         */
        this.showCloseButton = true;
        /**
         * 显示最大化按钮，默认显示
         */
        this.showMaxButton = true;
        /**
         * 显示最小化按钮，默认不显示, 显示出来也没有用
         */
        this.showMinButton = false;
        /**
         * 启用拖拽改变尺寸大小
         */
        this.resizable = true;
        /**
         * 启用拖动窗口
         */
        this.draggable = true;
        /**
         * 按钮对齐方式
         */
        this.buttonAlign = 'center';
        this.scrollConfig = {};
        this.opened = new EventEmitter();
        this.closed = new EventEmitter();
        this.resized = new EventEmitter();
        this.resizing = new EventEmitter();
        this.maxed = new EventEmitter();
        this.widthChange = new EventEmitter();
        this.heightChange = new EventEmitter();
        this.enableScroll = true;
        /**
         * 标题栏高度
         */
        this.dialogHeaderHeight = 38;
        /**
         * 按钮区高度
         */
        this.dialogFooterHeight = 50;
        this.parentElement = null;
        this.isMax = false; // 是否最大窗口
        // 记录上次的高度
        this.hostId = '';
    }
    /**
     * @return {?}
     */
    DialogComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.hostId = "farris-dialog_" + new Date().getTime();
        this.render2.setProperty(this.el.nativeElement, 'id', this.hostId);
        if (!this.beforeOpen) {
            this.beforeOpen = (/**
             * @return {?}
             */
            function () { return true; });
        }
        if (!this.beforeClose) {
            this.beforeClose = (/**
             * @return {?}
             */
            function () { return true; });
        }
        this.modal.onShown.subscribe((/**
         * @return {?}
         */
        function () {
            // const zindex = this.modal.backdrop.location.nativeElement;
            // this.render2.setStyle(this.el.nativeElement, 'position', 'absolute');
            // this.render2.setStyle(this.el.nativeElement, 'z-index', '1041');
            _this.opened.emit();
        }));
        this.modal.onHidden.subscribe((/**
         * @return {?}
         */
        function () { return _this.closed.emit(); }));
        this.checkDialogSize();
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.parentElement) {
                _this.parentElement.appendChild(_this.el.nativeElement);
            }
            else {
                document.body.appendChild(_this.el.nativeElement);
            }
        }), 100);
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    DialogComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.destroy();
        }), 150);
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.dlgHeaderLineHeight = this.getDialogHeaderLineHeight();
        this.resetPosition();
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.destroy = /**
     * @return {?}
     */
    function () {
        if (!this.parentElement) {
            if (document.body.querySelector("#" + this.hostId)) {
                document.body.removeChild(this.el.nativeElement);
            }
        }
        else {
            if (this.parentElement.querySelector("#" + this.hostId)) {
                this.parentElement.removeChild(this.el.nativeElement);
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    DialogComponent.prototype.getDialogHeaderLineHeight = /**
     * @private
     * @return {?}
     */
    function () {
        return this.modalHeader.nativeElement.getBoundingClientRect().height;
        // const paddingTop = parseInt(modalHeaderStyles.paddingTop.replace('px', ''), 10);
        // const paddingBottom = parseInt(modalHeaderStyles.paddingBottom.replace('px', ''), 10);
        // return this.modalHeader.nativeElement.get
    };
    Object.defineProperty(DialogComponent.prototype, "size", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var contentHeight = this.height - this.dialogHeaderHeight;
            if (this.showButtons) {
                contentHeight = contentHeight - this.dialogFooterHeight;
            }
            return {
                width: this.width,
                height: this.height,
                contentHeight: contentHeight,
                contentWidth: this.width
            };
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    DialogComponent.prototype._checkDialogSize = /**
     * @private
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    function (width, height) {
        // 可视区域尺寸
        /** @type {?} */
        var winSize = {
            width: document.body.offsetWidth,
            height: window.innerHeight
        };
        if (this.parentElement) {
            winSize.width = this.parentElement.offsetWidth;
            winSize.height = this.parentElement.offsetHeight;
        }
        if (winSize.width && winSize.width < width) {
            width = winSize.width;
        }
        if (winSize.height && winSize.height < height) {
            height = winSize.height;
        }
        return {
            width: width,
            height: height
        };
    };
    /**
     * @private
     * @return {?}
     */
    DialogComponent.prototype.checkDialogSize = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newSize = this._checkDialogSize(this.width, this.height);
        if (this.width !== newSize.width) {
            this.width = newSize.width - 20;
            this.widthChange.emit(this.width);
        }
        if (this.height !== newSize.height) {
            this.height = newSize.height - 20;
            this.heightChange.emit(this.height);
        }
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.updateModalBodyHeight = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var contentEl = this.el.nativeElement.querySelector('.modal-body');
        /** @type {?} */
        var contentHeight = this.size.contentHeight;
        this.render2.setStyle(contentEl, 'height', contentHeight + 'px');
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.resetPosition = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var marginLeft = Number.parseInt('' + -this.width / 2) + 'px';
        /** @type {?} */
        var marginTop = Number.parseInt('' + -this.height / 2) + 'px';
        /** @type {?} */
        var dialogEl = this.el.nativeElement.querySelector('.modal-dialog');
        /** @type {?} */
        var contentEl = this.el.nativeElement.querySelector('.modal-body');
        /** @type {?} */
        var footerEl = this.el.nativeElement.querySelector('.modal-footer');
        this.render2.setStyle(dialogEl, 'margin-left', marginLeft);
        this.render2.setStyle(dialogEl, 'margin-top', marginTop);
        /** @type {?} */
        var contentHeight = this.size.contentHeight;
        this.render2.setStyle(contentEl, 'height', contentHeight + 'px');
        this.render2.setStyle(contentEl, 'overflow', 'hidden');
        this.render2.setStyle(dialogEl, 'transform', 'translate3d(0px, 0px, 0px)');
    };
    /**
     * @private
     * @param {?} flag
     * @return {?}
     */
    DialogComponent.prototype.openDialog = /**
     * @private
     * @param {?} flag
     * @return {?}
     */
    function (flag) {
        if (flag) {
            this.resetPosition();
            this.draggbar.resetPosition();
            this.modal.show();
        }
    };
    /**
     * @private
     * @param {?} canClose
     * @return {?}
     */
    DialogComponent.prototype.closeDialog = /**
     * @private
     * @param {?} canClose
     * @return {?}
     */
    function (canClose) {
        if (canClose) {
            this.modal.hide();
        }
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.show = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var result = this.beforeOpen();
        if (typeof result === 'boolean') {
            this.openDialog(result);
        }
        else {
            if (result instanceof Observable) {
                result.subscribe((/**
                 * @param {?} flag
                 * @return {?}
                 */
                function (flag) {
                    _this.openDialog(flag);
                }));
            }
            else {
                if (result instanceof Promise) {
                    result.then((/**
                     * @param {?} flag
                     * @return {?}
                     */
                    function (flag) {
                        _this.openDialog(flag);
                    }));
                }
            }
        }
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    DialogComponent.prototype.close = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if ($event) {
            $event.stopPropagation();
        }
        /** @type {?} */
        var result = this.beforeClose();
        if (typeof result === 'boolean') {
            this.closeDialog(result);
        }
        else {
            if (result instanceof Observable) {
                result.subscribe((/**
                 * @param {?} flag
                 * @return {?}
                 */
                function (flag) {
                    _this.closeDialog(flag);
                }));
            }
            else {
                if (result instanceof Promise) {
                    result.then((/**
                     * @param {?} flag
                     * @return {?}
                     */
                    function (flag) {
                        _this.closeDialog(flag);
                    }));
                }
            }
        }
    };
    /**
     * @param {?} size
     * @return {?}
     */
    DialogComponent.prototype.reSize = /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        if (size.width) {
            this.width = size.width;
        }
        if (size.height) {
            this.height = size.height;
        }
        this.resetPosition();
        this.draggbar.resetPosition();
        this.widthChange.emit(this.width);
        this.heightChange.emit(this.height);
        this.resized.emit({ size: { width: this.width, height: this.height } });
    };
    /**
     * @param {?} opts
     * @return {?}
     */
    DialogComponent.prototype.onResizing = /**
     * @param {?} opts
     * @return {?}
     */
    function (opts) {
        opts.size.width = opts.size.width < 100 ? 100 : opts.size.width;
        opts.size.height = opts.size.height < 100 ? 100 : opts.size.height;
        this.width = opts.size.width;
        this.height = opts.size.height;
        this.resizing.emit(opts);
    };
    /**
     * @param {?} opts
     * @return {?}
     */
    DialogComponent.prototype.resizeStop = /**
     * @param {?} opts
     * @return {?}
     */
    function (opts) {
        opts.size.width = opts.size.width < 100 ? 100 : opts.size.width;
        opts.size.height = opts.size.height < 100 ? 100 : opts.size.height;
        this.width = opts.size.width;
        this.height = opts.size.height;
        this.updateModalBodyHeight();
        this.widthChange.emit(this.width);
        this.heightChange.emit(this.height);
        this.resized.emit(opts);
    };
    /**
     * @param {?} el
     * @return {?}
     */
    DialogComponent.prototype.dropdown = /**
     * @param {?} el
     * @return {?}
     */
    function (el) {
        // const rect = el.getBoundingClientRect();
        // this.render2.removeStyle(el, 'margin-top');
        // this.render2.removeStyle(el, 'margin-left');
        // this.render2.setStyle(el, 'top', `${rect.top}px`);
        // this.render2.setStyle(el, 'left', `${rect.left}px`);
        // this.render2.removeStyle(el, 'transform');
        // this.render2.removeStyle(el, '-webkit-transform');
        // this.render2.removeStyle(el, '-ms-transform');
        // this.render2.removeStyle(el, '-moz-transform');
        // this.render2.removeStyle(el, '-o-transform');
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.maxDialog = /**
     * @return {?}
     */
    function () {
        // console.log(`${document.scrollingElement.clientWidth}`)
        this.originalWidth = this.width;
        this.originalHeight = this.height;
        this.width = (document.scrollingElement ? document.scrollingElement : document.documentElement)['clientWidth'] - 20;
        this.height = (document.scrollingElement ? document.scrollingElement : document.documentElement)['clientHeight'] - 20;
        this.draggable = false;
        this.resizable = false;
        this.isMax = true;
        this.resetPosition();
        this.resized.emit({ size: { width: this.width, height: this.height } });
        this.maxed.emit({ size: { width: this.width, height: this.height } });
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.revertDialog = /**
     * @return {?}
     */
    function () {
        this.isMax = false;
        this.width = this.originalWidth;
        this.height = this.originalHeight;
        this.draggable = true;
        this.resizable = true;
        this.resetPosition();
        this.draggbar.resetPosition();
        this.resized.emit({ size: { width: this.width, height: this.height } });
        this.maxed.emit({ size: { width: this.width, height: this.height } });
    };
    /**
     * @return {?}
     */
    DialogComponent.prototype.changeDialogSize = /**
     * @return {?}
     */
    function () {
        if (this.isMax) {
            this.revertDialog();
        }
        else {
            this.maxDialog();
        }
    };
    DialogComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-dialog',
                    template: "<div #backdropEl class=\"modal fade farris-modal\" bsModal #staticModal=\"bs-modal\" [config]=\"{backdrop: 'static'}\"\r\n    tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"dialog-static-name\">\r\n    <div [ngDraggable]=\"draggable\" [ngResizable]=\"resizable\" rzHandles=\"all\" [handle]=\"header\"\r\n        (rzStop)=\"resizeStop($event)\" (rzResizing)=\"onResizing($event)\" (stopped)=\"dropdown($event)\"\r\n        [rzMinWidth]=\"minWidth\" [rzMaxWidth]=\"maxWidth\" [rzMinHeight]=\"minHeight\" [rzMaxHeight]=\"maxHeight\"\r\n        [inBounds]=\"true\" [bounds]=\"backdropEl\" class=\"modal-dialog\" [style.width]=\"width + 'px'\"\r\n        [style.height]=\"height + 'px'\">\r\n        <div #modalContent class=\"modal-content\">\r\n            <div #header class=\"modal-header\">\r\n                <div class=\"modal-title\">\r\n                    <span *ngIf=\"iconCls\" [class]=\"iconCls\"></span>\r\n                    <span class=\"modal-title-label\">{{ title }}</span>\r\n                </div>\r\n                <div class=\"actions\">\r\n\r\n                    <ul>\r\n                        <li *ngIf=\"toolTemplate\">\r\n                            <ng-template [ngTemplateOutlet]=\"toolTemplate\">\r\n\r\n                            </ng-template>\r\n                        </li>\r\n                        <li *ngIf=\"showMinButton\" class=\"f-btn-icon f-bare\"><span class=\"f-icon modal_minimize\"></span>\r\n                        </li>\r\n                        <li *ngIf=\"showMaxButton\" (click)=\"changeDialogSize()\" class=\"f-btn-icon f-bare\"><span\r\n                                class=\"f-icon modal_maximize\" [class.modalrevert]=\"isMax\"></span></li>\r\n                        <li *ngIf=\"showCloseButton\" (click)=\"close($event)\" class=\"f-btn-icon f-bare\"><span\r\n                                class=\"f-icon modal_close\"></span></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <perfect-scrollbar [disabled]=\"!enableScroll\" [config]=\"scrollConfig\">\r\n                    <ng-content></ng-content>\r\n                </perfect-scrollbar>\r\n            </div>\r\n\r\n            <div class=\"modal-footer\" *ngIf=\"showButtons\" [style.textAlign]=\"buttonAlign\">\r\n                <ng-container [ngTemplateOutlet]=\"buttons\"></ng-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DialogComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef }
    ]; };
    DialogComponent.propDecorators = {
        title: [{ type: Input }],
        iconCls: [{ type: Input }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        minWidth: [{ type: Input }],
        minHeight: [{ type: Input }],
        maxWidth: [{ type: Input }],
        maxHeight: [{ type: Input }],
        showButtons: [{ type: Input }],
        showCloseButton: [{ type: Input }],
        showMaxButton: [{ type: Input }],
        showMinButton: [{ type: Input }],
        resizable: [{ type: Input }],
        draggable: [{ type: Input }],
        buttonAlign: [{ type: Input }],
        scrollConfig: [{ type: Input }],
        beforeOpen: [{ type: Input }],
        beforeClose: [{ type: Input }],
        modal: [{ type: ViewChild, args: [ModalDirective,] }],
        draggbar: [{ type: ViewChild, args: [AngularDraggableDirective,] }],
        opened: [{ type: Output }],
        closed: [{ type: Output }],
        resized: [{ type: Output }],
        resizing: [{ type: Output }],
        maxed: [{ type: Output }],
        widthChange: [{ type: Output }],
        heightChange: [{ type: Output }],
        enableScroll: [{ type: Input }],
        buttons: [{ type: Input }],
        dialogHeaderHeight: [{ type: Input }],
        dialogFooterHeight: [{ type: Input }],
        parentElement: [{ type: Input }],
        toolTemplate: [{ type: ContentChild, args: ['toolTemplate',] }],
        modalContent: [{ type: ViewChild, args: ['modalContent',] }],
        modalHeader: [{ type: ViewChild, args: ['header',] }]
    };
    return DialogComponent;
}());
export { DialogComponent };
if (false) {
    /**
     * 窗口标题
     * @type {?}
     */
    DialogComponent.prototype.title;
    /**
     * 标题图标
     * @type {?}
     */
    DialogComponent.prototype.iconCls;
    /**
     * 宽度
     * @type {?}
     */
    DialogComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    DialogComponent.prototype.height;
    /** @type {?} */
    DialogComponent.prototype.minWidth;
    /** @type {?} */
    DialogComponent.prototype.minHeight;
    /** @type {?} */
    DialogComponent.prototype.maxWidth;
    /** @type {?} */
    DialogComponent.prototype.maxHeight;
    /**
     * 显示底部按钮区域，默认显示
     * @type {?}
     */
    DialogComponent.prototype.showButtons;
    /**
     * 显示右上角关闭按钮，默认显示
     * @type {?}
     */
    DialogComponent.prototype.showCloseButton;
    /**
     * 显示最大化按钮，默认显示
     * @type {?}
     */
    DialogComponent.prototype.showMaxButton;
    /**
     * 显示最小化按钮，默认不显示, 显示出来也没有用
     * @type {?}
     */
    DialogComponent.prototype.showMinButton;
    /**
     * 启用拖拽改变尺寸大小
     * @type {?}
     */
    DialogComponent.prototype.resizable;
    /**
     * 启用拖动窗口
     * @type {?}
     */
    DialogComponent.prototype.draggable;
    /**
     * 按钮对齐方式
     * @type {?}
     */
    DialogComponent.prototype.buttonAlign;
    /** @type {?} */
    DialogComponent.prototype.scrollConfig;
    /** @type {?} */
    DialogComponent.prototype.beforeOpen;
    /** @type {?} */
    DialogComponent.prototype.beforeClose;
    /** @type {?} */
    DialogComponent.prototype.modal;
    /** @type {?} */
    DialogComponent.prototype.draggbar;
    /** @type {?} */
    DialogComponent.prototype.opened;
    /** @type {?} */
    DialogComponent.prototype.closed;
    /** @type {?} */
    DialogComponent.prototype.resized;
    /** @type {?} */
    DialogComponent.prototype.resizing;
    /** @type {?} */
    DialogComponent.prototype.maxed;
    /** @type {?} */
    DialogComponent.prototype.widthChange;
    /** @type {?} */
    DialogComponent.prototype.heightChange;
    /** @type {?} */
    DialogComponent.prototype.enableScroll;
    /** @type {?} */
    DialogComponent.prototype.buttons;
    /**
     * 标题栏高度
     * @type {?}
     */
    DialogComponent.prototype.dialogHeaderHeight;
    /**
     * 按钮区高度
     * @type {?}
     */
    DialogComponent.prototype.dialogFooterHeight;
    /** @type {?} */
    DialogComponent.prototype.parentElement;
    /** @type {?} */
    DialogComponent.prototype.toolTemplate;
    /** @type {?} */
    DialogComponent.prototype.isMax;
    /** @type {?} */
    DialogComponent.prototype.dlgHeaderLineHeight;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.originalWidth;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.originalHeight;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.hostId;
    /** @type {?} */
    DialogComponent.prototype.modalContent;
    /** @type {?} */
    DialogComponent.prototype.modalHeader;
    /**
     * @type {?}
     * @private
     */
    DialogComponent.prototype.render2;
    /** @type {?} */
    DialogComponent.prototype.el;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9nLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZGlhbG9nLyIsInNvdXJjZXMiOlsibGliL2RpYWxvZy9kaWFsb2cuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVFBLE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQzlDLFVBQVUsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFFaEQsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUVsQyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNqRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU3QztJQWtGSSx5QkFBb0IsT0FBa0IsRUFBUyxFQUFjO1FBQXpDLFlBQU8sR0FBUCxPQUFPLENBQVc7UUFBUyxPQUFFLEdBQUYsRUFBRSxDQUFZOzs7O1FBMUVwRCxVQUFLLEdBQUcsTUFBTSxDQUFDOzs7O1FBR2YsWUFBTyxHQUFXLFNBQVMsQ0FBQzs7OztRQUc1QixVQUFLLEdBQUcsR0FBRyxDQUFDOzs7O1FBRVosV0FBTSxHQUFHLEdBQUcsQ0FBQztRQUViLGFBQVEsR0FBRyxHQUFHLENBQUM7UUFFZixjQUFTLEdBQUcsR0FBRyxDQUFDO1FBRWhCLGFBQVEsR0FBVyxJQUFJLENBQUM7UUFDeEIsY0FBUyxHQUFXLElBQUksQ0FBQzs7OztRQUd6QixnQkFBVyxHQUFHLElBQUksQ0FBQzs7OztRQUVuQixvQkFBZSxHQUFHLElBQUksQ0FBQzs7OztRQUV2QixrQkFBYSxHQUFHLElBQUksQ0FBQzs7OztRQUVyQixrQkFBYSxHQUFHLEtBQUssQ0FBQzs7OztRQUd0QixjQUFTLEdBQUcsSUFBSSxDQUFDOzs7O1FB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Ozs7O0lBR3hCLGtDQUFxQzs7Ozs7SUFHckMsZ0NBQXFCOzs7OztJQUVyQixpQ0FBc0I7O0lBRXRCLG1DQUF3Qjs7SUFFeEIsb0NBQXlCOztJQUV6QixtQ0FBaUM7O0lBQ2pDLG9DQUFrQzs7Ozs7SUFHbEMsc0NBQTRCOzs7OztJQUU1QiwwQ0FBZ0M7Ozs7O0lBRWhDLHdDQUE4Qjs7Ozs7SUFFOUIsd0NBQStCOzs7OztJQUcvQixvQ0FBMEI7Ozs7O0lBRTFCLG9DQUEwQjs7Ozs7SUFHMUIsc0NBQWdDOztJQUNoQyx1Q0FBMkI7O0lBRTNCLHFDQUFvRTs7SUFDcEUsc0NBQXFFOztJQUVyRSxnQ0FBaUQ7O0lBQ2pELG1DQUEwRTs7SUFFMUUsaUNBQXNDOztJQUN0QyxpQ0FBc0M7O0lBQ3RDLGtDQUF1Qzs7SUFDdkMsbUNBQXdDOztJQUN4QyxnQ0FBcUM7O0lBQ3JDLHNDQUEyQzs7SUFDM0MsdUNBQTRDOztJQUU1Qyx1Q0FBNkI7O0lBRTdCLGtDQUFtQzs7Ozs7SUFHbkMsNkNBQWlDOzs7OztJQUdqQyw2Q0FBaUM7O0lBR2pDLHdDQUE4Qjs7SUFHOUIsdUNBQTZEOztJQUM3RCxnQ0FBYzs7SUFDZCw4Q0FBeUI7Ozs7O0lBRXpCLHdDQUE4Qjs7Ozs7SUFDOUIseUNBQStCOzs7OztJQUUvQixpQ0FBb0I7O0lBQ3BCLHVDQUFvRDs7SUFDcEQsc0NBQTZDOzs7OztJQUVqQyxrQ0FBMEI7O0lBQUUsNkJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOS0wOC0wNiAwODozMTo1N1xyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0wOC0xNSAxNjowNjo1OFxyXG4gKiBAUVE6IDEwNTU4MTgyMzlcclxuICogQFZlcnNpb246IHYwLjAuMVxyXG4gKi9cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBSZW5kZXJlcjIsXHJcbiAgICBFbGVtZW50UmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVGVtcGxhdGVSZWYsXHJcbiAgICBBZnRlclZpZXdJbml0LCBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMsIE9uRGVzdHJveVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgQW5ndWxhckRyYWdnYWJsZURpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktZHJhZ2dhYmxlJztcclxuaW1wb3J0IHsgTW9kYWxEaXJlY3RpdmUgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgQ29udGVudENoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRpYWxvZycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGlhbG9nLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2RpYWxvZy5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIERpYWxvZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIC8qKiDnqpflj6PmoIfpopggKi9cclxuICAgIEBJbnB1dCgpIHRpdGxlID0gJ+aIkeaYr+agh+mimCc7XHJcblxyXG4gICAgLyoqIOagh+mimOWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgaWNvbkNsczogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKiDlrr3luqYgKi9cclxuICAgIEBJbnB1dCgpIHdpZHRoID0gMzAwO1xyXG4gICAgLyoqIOmrmOW6piAqL1xyXG4gICAgQElucHV0KCkgaGVpZ2h0ID0gMjAwO1xyXG5cclxuICAgIEBJbnB1dCgpIG1pbldpZHRoID0gMTAwO1xyXG5cclxuICAgIEBJbnB1dCgpIG1pbkhlaWdodCA9IDEwMDtcclxuXHJcbiAgICBASW5wdXQoKSBtYXhXaWR0aDogbnVtYmVyID0gbnVsbDtcclxuICAgIEBJbnB1dCgpIG1heEhlaWdodDogbnVtYmVyID0gbnVsbDtcclxuXHJcbiAgICAvKiog5pi+56S65bqV6YOo5oyJ6ZKu5Yy65Z+f77yM6buY6K6k5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93QnV0dG9ucyA9IHRydWU7XHJcbiAgICAvKiog5pi+56S65Y+z5LiK6KeS5YWz6Zet5oyJ6ZKu77yM6buY6K6k5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93Q2xvc2VCdXR0b24gPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuuacgOWkp+WMluaMiemSru+8jOm7mOiupOaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd01heEJ1dHRvbiA9IHRydWU7XHJcbiAgICAvKiog5pi+56S65pyA5bCP5YyW5oyJ6ZKu77yM6buY6K6k5LiN5pi+56S6LCDmmL7npLrlh7rmnaXkuZ/msqHmnInnlKggKi9cclxuICAgIEBJbnB1dCgpIHNob3dNaW5CdXR0b24gPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5ZCv55So5ouW5ou95pS55Y+Y5bC65a+45aSn5bCPICovXHJcbiAgICBASW5wdXQoKSByZXNpemFibGUgPSB0cnVlO1xyXG4gICAgLyoqIOWQr+eUqOaLluWKqOeql+WPoyAqL1xyXG4gICAgQElucHV0KCkgZHJhZ2dhYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5oyJ6ZKu5a+56b2Q5pa55byPICovXHJcbiAgICBASW5wdXQoKSBidXR0b25BbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgQElucHV0KCkgc2Nyb2xsQ29uZmlnID0ge307XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlT3BlbjogKCkgPT4gT2JzZXJ2YWJsZTxhbnk+IHwgUHJvbWlzZTxhbnk+IHwgYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZUNsb3NlOiAoKSA9PiBPYnNlcnZhYmxlPGFueT4gfCBQcm9taXNlPGFueT4gfCBib29sZWFuO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoTW9kYWxEaXJlY3RpdmUpIG1vZGFsOiBNb2RhbERpcmVjdGl2ZTtcclxuICAgIEBWaWV3Q2hpbGQoQW5ndWxhckRyYWdnYWJsZURpcmVjdGl2ZSkgZHJhZ2diYXI6IEFuZ3VsYXJEcmFnZ2FibGVEaXJlY3RpdmU7XHJcblxyXG4gICAgQE91dHB1dCgpIG9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjbG9zZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcmVzaXplZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByZXNpemluZyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBtYXhlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSB3aWR0aENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBoZWlnaHRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQElucHV0KCkgZW5hYmxlU2Nyb2xsID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBidXR0b25zOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAgIC8qKiDmoIfpopjmoI/pq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGRpYWxvZ0hlYWRlckhlaWdodCA9IDM4O1xyXG5cclxuICAgIC8qKiDmjInpkq7ljLrpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGRpYWxvZ0Zvb3RlckhlaWdodCA9IDUwO1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBwYXJlbnRFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAvKiB0ZW1wbGF0ZSAqL1xyXG4gICAgQENvbnRlbnRDaGlsZCgndG9vbFRlbXBsYXRlJykgdG9vbFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgaXNNYXggPSBmYWxzZTsgLy8g5piv5ZCm5pyA5aSn56qX5Y+jXHJcbiAgICBkbGdIZWFkZXJMaW5lSGVpZ2h0OiBhbnk7XHJcblxyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbFdpZHRoOiBudW1iZXI7ICAvLyDorrDlvZXkuIrmrKHnmoTlrr3luqZcclxuICAgIHByaXZhdGUgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcjsgLy8g6K6w5b2V5LiK5qyh55qE6auY5bqmXHJcblxyXG4gICAgcHJpdmF0ZSBob3N0SWQgPSAnJztcclxuICAgIEBWaWV3Q2hpbGQoJ21vZGFsQ29udGVudCcpIG1vZGFsQ29udGVudDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2hlYWRlcicpIG1vZGFsSGVhZGVyOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyMjogUmVuZGVyZXIyLCBwdWJsaWMgZWw6IEVsZW1lbnRSZWYpIHsgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuaG9zdElkID0gYGZhcnJpcy1kaWFsb2dfJHtuZXcgRGF0ZSgpLmdldFRpbWUoKX1gO1xyXG4gICAgICAgIHRoaXMucmVuZGVyMi5zZXRQcm9wZXJ0eSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdpZCcsIHRoaXMuaG9zdElkKTtcclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlT3Blbikge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZU9wZW4gPSAoKSA9PiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUNsb3NlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlQ2xvc2UgPSAoKSA9PiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tb2RhbC5vblNob3duLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IHppbmRleCA9IHRoaXMubW9kYWwuYmFja2Ryb3AubG9jYXRpb24ubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgLy8gdGhpcy5yZW5kZXIyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJyk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyMi5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICd6LWluZGV4JywgJzEwNDEnKTtcclxuICAgICAgICAgICAgdGhpcy5vcGVuZWQuZW1pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm1vZGFsLm9uSGlkZGVuLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNsb3NlZC5lbWl0KCkpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrRGlhbG9nU2l6ZSgpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICB9LCAxNTApO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICB0aGlzLmRsZ0hlYWRlckxpbmVIZWlnaHQgPSB0aGlzLmdldERpYWxvZ0hlYWRlckxpbmVIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuaG9zdElkfWApKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuaG9zdElkfWApKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERpYWxvZ0hlYWRlckxpbmVIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kYWxIZWFkZXIubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgLy8gY29uc3QgcGFkZGluZ1RvcCA9IHBhcnNlSW50KG1vZGFsSGVhZGVyU3R5bGVzLnBhZGRpbmdUb3AucmVwbGFjZSgncHgnLCAnJyksIDEwKTtcclxuICAgICAgICAvLyBjb25zdCBwYWRkaW5nQm90dG9tID0gcGFyc2VJbnQobW9kYWxIZWFkZXJTdHlsZXMucGFkZGluZ0JvdHRvbS5yZXBsYWNlKCdweCcsICcnKSwgMTApO1xyXG4gICAgICAgIC8vIHJldHVybiB0aGlzLm1vZGFsSGVhZGVyLm5hdGl2ZUVsZW1lbnQuZ2V0XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNpemUoKSB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLmhlaWdodCAtIHRoaXMuZGlhbG9nSGVhZGVySGVpZ2h0O1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50SGVpZ2h0IC0gdGhpcy5kaWFsb2dGb290ZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBjb250ZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICBjb250ZW50V2lkdGg6IHRoaXMud2lkdGhcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NoZWNrRGlhbG9nU2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICAvLyDlj6/op4bljLrln5/lsLrlr7hcclxuICAgICAgICBjb25zdCB3aW5TaXplID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHdpblNpemUud2lkdGggPSB0aGlzLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIHdpblNpemUuaGVpZ2h0ID0gdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3aW5TaXplLndpZHRoICYmIHdpblNpemUud2lkdGggPCB3aWR0aCkge1xyXG4gICAgICAgICAgICB3aWR0aCA9IHdpblNpemUud2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAod2luU2l6ZS5oZWlnaHQgJiYgd2luU2l6ZS5oZWlnaHQgPCBoZWlnaHQpIHtcclxuICAgICAgICAgICAgaGVpZ2h0ID0gd2luU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrRGlhbG9nU2l6ZSgpIHtcclxuICAgICAgICBjb25zdCBuZXdTaXplID0gdGhpcy5fY2hlY2tEaWFsb2dTaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbmV3U2l6ZS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gbmV3U2l6ZS53aWR0aCAtIDIwO1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoQ2hhbmdlLmVtaXQodGhpcy53aWR0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT09IG5ld1NpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gbmV3U2l6ZS5oZWlnaHQgLSAyMDtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHRDaGFuZ2UuZW1pdCh0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1vZGFsQm9keUhlaWdodCgpIHtcclxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJvZHknKTtcclxuICAgICAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gdGhpcy5zaXplLmNvbnRlbnRIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGNvbnRlbnRFbCwgJ2hlaWdodCcsIGNvbnRlbnRIZWlnaHQgKyAncHgnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldFBvc2l0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbkxlZnQgPSBOdW1iZXIucGFyc2VJbnQoJycgKyAtdGhpcy53aWR0aCAvIDIpICsgJ3B4JztcclxuICAgICAgICBjb25zdCBtYXJnaW5Ub3AgPSBOdW1iZXIucGFyc2VJbnQoJycgKyAtdGhpcy5oZWlnaHQgLyAyKSArICdweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpYWxvZ0VsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1kaWFsb2cnKTtcclxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJvZHknKTtcclxuICAgICAgICBjb25zdCBmb290ZXJFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZm9vdGVyJyk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShkaWFsb2dFbCwgJ21hcmdpbi1sZWZ0JywgbWFyZ2luTGVmdCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGRpYWxvZ0VsLCAnbWFyZ2luLXRvcCcsIG1hcmdpblRvcCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLnNpemUuY29udGVudEhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGNvbnRlbnRFbCwgJ2hlaWdodCcsIGNvbnRlbnRIZWlnaHQgKyAncHgnKTtcclxuICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoY29udGVudEVsLCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShkaWFsb2dFbCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3BlbkRpYWxvZyhmbGFnOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2diYXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbG9zZURpYWxvZyhjYW5DbG9zZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChjYW5DbG9zZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmJlZm9yZU9wZW4oKTtcclxuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZyhyZXN1bHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuc3Vic2NyaWJlKChmbGFnOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuRGlhbG9nKGZsYWcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKChmbGFnOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZyhmbGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgkZXZlbnQ/OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCRldmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmVmb3JlQ2xvc2UoKTtcclxuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnN1YnNjcmliZSgoZmxhZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coZmxhZyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKGZsYWc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhmbGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZVNpemUoc2l6ZTogeyB3aWR0aD86IG51bWJlciwgaGVpZ2h0PzogbnVtYmVyIH0pIHtcclxuICAgICAgICBpZiAoc2l6ZS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gc2l6ZS53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmRyYWdnYmFyLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLndpZHRoQ2hhbmdlLmVtaXQodGhpcy53aWR0aCk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRDaGFuZ2UuZW1pdCh0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoeyBzaXplOiB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH0gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemluZyhvcHRzOiBhbnkpIHtcclxuICAgICAgICBvcHRzLnNpemUud2lkdGggPSBvcHRzLnNpemUud2lkdGggPCAxMDAgPyAxMDAgOiBvcHRzLnNpemUud2lkdGg7XHJcbiAgICAgICAgb3B0cy5zaXplLmhlaWdodCA9IG9wdHMuc2l6ZS5oZWlnaHQgPCAxMDAgPyAxMDAgOiBvcHRzLnNpemUuaGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLndpZHRoID0gb3B0cy5zaXplLndpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gb3B0cy5zaXplLmhlaWdodDtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nLmVtaXQob3B0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplU3RvcChvcHRzOiBhbnkpIHtcclxuICAgICAgICBvcHRzLnNpemUud2lkdGggPSBvcHRzLnNpemUud2lkdGggPCAxMDAgPyAxMDAgOiBvcHRzLnNpemUud2lkdGg7XHJcbiAgICAgICAgb3B0cy5zaXplLmhlaWdodCA9IG9wdHMuc2l6ZS5oZWlnaHQgPCAxMDAgPyAxMDAgOiBvcHRzLnNpemUuaGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLndpZHRoID0gb3B0cy5zaXplLndpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gb3B0cy5zaXplLmhlaWdodDtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1vZGFsQm9keUhlaWdodCgpO1xyXG5cclxuICAgICAgICB0aGlzLndpZHRoQ2hhbmdlLmVtaXQodGhpcy53aWR0aCk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRDaGFuZ2UuZW1pdCh0aGlzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzaXplZC5lbWl0KG9wdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyb3Bkb3duKGVsOiBhbnkpIHtcclxuICAgICAgICAvLyBjb25zdCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXIyLnJlbW92ZVN0eWxlKGVsLCAnbWFyZ2luLXRvcCcpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJ21hcmdpbi1sZWZ0Jyk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXIyLnNldFN0eWxlKGVsLCAndG9wJywgYCR7cmVjdC50b3B9cHhgKTtcclxuICAgICAgICAvLyB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoZWwsICdsZWZ0JywgYCR7cmVjdC5sZWZ0fXB4YCk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJ3RyYW5zZm9ybScpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJy13ZWJraXQtdHJhbnNmb3JtJyk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXIyLnJlbW92ZVN0eWxlKGVsLCAnLW1zLXRyYW5zZm9ybScpO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShlbCwgJy1tb3otdHJhbnNmb3JtJyk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXIyLnJlbW92ZVN0eWxlKGVsLCAnLW8tdHJhbnNmb3JtJyk7XHJcbiAgICB9XHJcblxyXG4gICAgbWF4RGlhbG9nKCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGAke2RvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuY2xpZW50V2lkdGh9YClcclxuICAgICAgICB0aGlzLm9yaWdpbmFsV2lkdGggPSB0aGlzLndpZHRoO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxIZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgICAgICB0aGlzLndpZHRoID0gKGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQ/ZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpWydjbGllbnRXaWR0aCddICAtIDIwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gKGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQ/ZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpWydjbGllbnRIZWlnaHQnXSAtIDIwO1xyXG5cclxuICAgICAgICB0aGlzLmRyYWdnYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzaXphYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaXNNYXggPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMucmVzaXplZC5lbWl0KHsgc2l6ZTogeyB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodCB9IH0pO1xyXG4gICAgICAgIHRoaXMubWF4ZWQuZW1pdCh7IHNpemU6IHsgd2lkdGg6IHRoaXMud2lkdGgsIGhlaWdodDogdGhpcy5oZWlnaHQgfSB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXZlcnREaWFsb2coKSB7XHJcbiAgICAgICAgdGhpcy5pc01heCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLm9yaWdpbmFsV2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLm9yaWdpbmFsSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlc2l6YWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5kcmFnZ2Jhci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoeyBzaXplOiB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH0gfSk7XHJcbiAgICAgICAgdGhpcy5tYXhlZC5lbWl0KHsgc2l6ZTogeyB3aWR0aDogdGhpcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmhlaWdodCB9IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZURpYWxvZ1NpemUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNYXgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXZlcnREaWFsb2coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1heERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=