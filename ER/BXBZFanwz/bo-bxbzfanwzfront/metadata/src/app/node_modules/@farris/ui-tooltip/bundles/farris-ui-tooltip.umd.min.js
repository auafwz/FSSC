!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/platform-browser"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@farris/ui-tooltip",["exports","rxjs","@angular/platform-browser","@angular/core","@angular/common"],e):e((t.farris=t.farris||{},t.farris["ui-tooltip"]={}),t.rxjs,t.ng.platformBrowser,t.ng.core,t.ng.common)}(this,function(t,e,n,i,o){"use strict";var r=(s.prototype.catchAttention=function(t,e){var n=this;if(void 0===e&&(e=600),t&&0<t.length){for(var i=[],o=0;o<t.length;o++){var r;(r="string"==typeof t[o].idOrEl?document.getElementById(t[o].idOrEl):t[o].idOrEl)&&(i.push(r),this.renderer.addClass(r,"f-catch-attention-debounce"))}this.ngZone.runOutsideAngular(function(){setTimeout(function(){for(var t=0;t<i.length;t++)n.renderer.removeClass(i[t],"f-catch-attention-debounce")},e)})}},s.prototype.ngOnInit=function(){},s.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[{type:i.RendererFactory2},{type:i.NgZone}]},s.ngInjectableDef=i.defineInjectable({factory:function(){return new s(i.inject(i.RendererFactory2),i.inject(i.NgZone))},token:s,providedIn:"root"}),s);function s(t,e){this.ngZone=e,this.renderer=t.createRenderer(null,null)}var l=(p.prototype.ngOnInit=function(){},p.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],p.ctorParameters=function(){return[]},p.ngInjectableDef=i.defineInjectable({factory:function(){return new p},token:p,providedIn:"root"}),p);function p(){this.placement$=new e.Subject,this.show$=new e.Subject,this.calPosition$=new e.Subject}var a=(Object.defineProperty(h.prototype,"content",{get:function(){return this.nfContent},set:function(t){t instanceof i.TemplateRef?(this.contentIsString=!1,this.contentViewf.createEmbeddedView(t)):(this.contentIsString=!0,this.nfContent=t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"tipWidth",{get:function(){return this._tipWidth},set:function(t){t!=this._tipWidth&&(t?(this.render.setStyle(this.innerNode.nativeElement,"width",t),this.render.setStyle(this.innerNode.nativeElement,"max-width","none")):(this.render.removeStyle(this.innerNode.nativeElement,"width"),this.render.removeStyle(this.innerNode.nativeElement,"max-width")),this._tipWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"tipCls",{get:function(){return this._tipCls},set:function(t){t!=this._tipCls&&(this._tipCls&&this.render.removeClass(this.el.nativeElement,this._tipCls),t&&this.render.addClass(this.el.nativeElement,t),this._tipCls=t)},enumerable:!0,configurable:!0}),h.prototype.ngOnInit=function(){},h.prototype.ngAfterViewInit=function(){this.hostBoundingClientRect&&(this.judgeWidth(),this.calculatePosition(this.hostBoundingClientRect))},h.prototype.judgeWidth=function(){this.innerNode.nativeElement.scrollHeight>this.innerNode.nativeElement.clientHeight&&this.render.addClass(this.innerNode.nativeElement,"tooltip-inner-lg")},h.prototype.calculatePosition=function(t){var e=0,n=0,i=this.tooltipNode.nativeElement.getBoundingClientRect(),o=this.arrowNode.nativeElement.getBoundingClientRect();"top"===this.placement?(e=t.top-i.height-2,n=t.left+(t.width-i.width)/2):"left"===this.placement?(e=t.top+(t.height-i.height)/2,n=t.left-i.width-2):"right"===this.placement?(e=t.top+(t.height-i.height)/2,n=t.right+2):"bottom"===this.placement?(e=t.bottom+o.height+2,n=t.left+(t.width-i.width)/2):"top-left"===this.placement?(e=t.top-i.height-2,n=t.left,this.arrowNode.nativeElement.style.left="10%"):"top-right"===this.placement?(e=t.top-i.height-2,n=t.right-i.width,this.arrowNode.nativeElement.style.right="10%"):"right-top"===this.placement?(e=t.top,n=t.right+2,this.arrowNode.nativeElement.style.top="10%"):"right-bottom"===this.placement?(e=t.bottom-i.height,n=t.right+2,this.arrowNode.nativeElement.style.bottom="10%"):"bottom-left"===this.placement?(e=t.bottom+o.height+2,n=t.left,this.arrowNode.nativeElement.style.left="10%"):"bottom-right"===this.placement?(e=t.bottom+o.height+2,n=t.right-i.width,this.arrowNode.nativeElement.style.right="10%"):"left-top"===this.placement?(e=t.top,n=t.left-i.width-2,this.arrowNode.nativeElement.style.top="10%"):"left-bottom"===this.placement&&(e=t.bottom-i.height,n=t.left-i.width-2,this.arrowNode.nativeElement.style.bottom="10%"),this.tooltipNode.nativeElement.style.top=e+"px",this.tooltipNode.nativeElement.style.left=n+"px"},h.prototype.offsetDirection=function(){var t=this.placement;if(-1===t.indexOf("-"))return t;var e=t.indexOf("-");return t.substring(0,e)},h.decorators=[{type:i.Component,args:[{selector:"farris-tooltip",template:'<div #tooltipEle [class]="(\'bs-tooltip-\'+offsetDirection())+\' tooltip show\'">\r\n    <div #arrowEle class="arrow"></div>\r\n    <div #innerEle class="tooltip-inner">\r\n        <div #contentViewf class="tooltip-tmpl">\r\n            <div *ngIf="contentIsString" class="tooltip-text" [innerHtml]="nfContent|tooltipHtml"></div>\r\n            <ng-container *ngIf="!contentIsString"> {{nfContent}}</ng-container>\r\n        </div>       \r\n    </div>\r\n</div>',encapsulation:i.ViewEncapsulation.None,styles:[".bs-tooltip-bottom .arrow,.bs-tooltip-top .arrow{left:50%}.bs-tooltip-left .arrow,.bs-tooltip-right .arrow{top:25%}"]}]}],h.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2}]},h.propDecorators={contentViewf:[{type:i.ViewChild,args:["contentViewf",{read:i.ViewContainerRef}]}],tooltipNode:[{type:i.ViewChild,args:["tooltipEle",{read:i.ElementRef}]}],arrowNode:[{type:i.ViewChild,args:["arrowEle",{read:i.ElementRef}]}],innerNode:[{type:i.ViewChild,args:["innerEle",{read:i.ElementRef}]}],content:[{type:i.Input}],tipWidth:[{type:i.Input}],tipCls:[{type:i.Input}],placement:[{type:i.Input}]},h);function h(t,e){this.el=t,this.render=e,this.contentIsString=!0,this._tipWidth="",this._tipCls="",this.placement="top",this.positionStyle={}}var c=(Object.defineProperty(d.prototype,"enableTooltip",{get:function(){return this.tooltipEnable},set:function(t){"string"==typeof t&&""==t?this.enableOrDisable(!0):this.enableOrDisable(t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"trigger",{get:function(){return this.triggerMode},set:function(t){t&&t!==this.triggerMode&&(this.triggerMode=t,this.unbindEvent(),this.bindEvent())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"disable",{get:function(){return!this.tooltipEnable},set:function(t){this.enableOrDisable(!t)},enumerable:!0,configurable:!0}),d.prototype.ngOnInit=function(){this.bindEvent()},d.prototype.ngAfterViewInit=function(){},d.prototype.ngOnDestroy=function(){this.unbindEvent(),this.removeTooltip()},d.prototype.enableOrDisable=function(t){this.tooltipEnable=t,this.tooltipEnable?this.bindEvent():this.unbindEvent()},d.prototype.bindEvent=function(){var e=this;this.tooltipEnable&&(this.hasBindEvent||("click"===this.trigger?this.clickEvent=this.render.listen(this.el.nativeElement,"click",function(t){t.stopPropagation(),e.appendTooltip(),e.clickOutEvent=e.render.listen(document,"click",function(){e.removeTooltip(),e.clickOutEvent()})}):"focus"===this.trigger?(this.focusDownEvent=this.render.listen(this.el.nativeElement,"mousedown",function(t){t.preventDefault(),e.appendTooltip()}),this.focusUpEvent=this.render.listen(this.el.nativeElement,"mouseup",function(t){t.stopPropagation(),e.removeTooltip()})):(this.mouseenterEvent=this.render.listen(this.el.nativeElement,"mouseenter",function(t){t.stopPropagation(),e.appendTooltip()}),this.mouseleaveEvent=this.render.listen(this.el.nativeElement,"mouseleave",function(t){t.stopPropagation(),e.removeTooltip()})),this.hasBindEvent=!0))},d.prototype.unbindEvent=function(){this.mouseenterEvent&&this.mouseenterEvent(),this.mouseleaveEvent&&this.mouseleaveEvent(),this.clickEvent&&this.clickEvent(),this.clickOutEvent&&this.clickOutEvent(),this.focusDownEvent&&this.focusDownEvent(),this.focusUpEvent&&this.focusUpEvent(),this.hasBindEvent=!1},d.prototype.removeTooltip=function(){this.tooltip&&(this.render.removeChild(document.body,this.tooltip.el.nativeElement),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this._componentRef.destroy(),this.viewContainerRef.clear(),this.tooltip=null,this._componentRef=null)},d.prototype.appendTooltip=function(){this.showTip&&(this.generateTooltip(),this.updateViewProps(this.placement,this.content,this.el.nativeElement.getBoundingClientRect()))},d.prototype.updateViewProps=function(t,e,n){this.tooltip.placement=t,this.tooltip.content=e,this.tooltip.hostBoundingClientRect=n,this.tooltip.tipCls=this.tipCls,this.tooltip.tipWidth=this.tipWidth,this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges()},d.prototype.generateTooltip=function(){this._componentRef=this.viewContainerRef.createComponent(this.componentFactory),this.tooltip=this._componentRef.instance,this.render.removeChild(this.render.parentNode(this.el.nativeElement),this.tooltip.el.nativeElement),this.render.appendChild(document.body,this.tooltip.el.nativeElement)},d.decorators=[{type:i.Directive,args:[{selector:"[farrisTooltip]"}]}],d.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2},{type:i.ViewContainerRef},{type:i.ComponentFactoryResolver}]},d.propDecorators={enableTooltip:[{type:i.Input,args:["farrisTooltip"]}],text:[{type:i.Input}],tipCls:[{type:i.Input}],tipWidth:[{type:i.Input}],placement:[{type:i.Input}],trigger:[{type:i.Input}],disable:[{type:i.Input}],showTip:[{type:i.Input}],content:[{type:i.Input}]},d);function d(t,e,n,i){this.el=t,this.render=e,this.viewContainerRef=n,this.resolver=i,this.tooltipEnable=!0,this.text="",this.tipCls="",this.tipWidth="",this.placement="top",this.triggerMode="hover",this.showTip=!0,this.hasBindEvent=!1,this.componentFactory=this.resolver.resolveComponentFactory(a)}var u=(Object.defineProperty(f.prototype,"enableTips",{get:function(){return this._enableTips},set:function(t){this._enableTips!==t&&(this._enableTips=t,this.changeEventBind())},enumerable:!0,configurable:!0}),f.prototype.createCloneEl=function(){var n=this;if(this.el.nativeElement){var i=window.getComputedStyle(this.el.nativeElement);this.cloneEl=this.render.createElement("span"),this.cloneEl.innerText=i.value,["line-height","letter-spacing","font-size","font-family","font-style","font-weight","border","padding","height"].forEach(function(t,e){n.cloneEl.style[t]=i.getPropertyValue(t)}),this.render.addClass(this.cloneEl,"f-dir-hidden-el"),this.render.appendChild(document.body,this.cloneEl)}},f.prototype.ngAfterViewInit=function(){this.changeEventBind()},f.prototype.changeEventBind=function(){var t=this;this.enableTips?this.ngzone.runOutsideAngular(function(){t.mouseEnterListener=t.onMouseEnterHandler.bind(t),t.el.nativeElement.addEventListener("mouseenter",t.mouseEnterListener),t.mouseLeaveListener=t.onMouseLeaveHandler.bind(t),t.el.nativeElement.addEventListener("mouseleave",t.mouseLeaveListener)}):this.mouseEnterListener&&(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.mouseEnterListener=null,this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.mouseLeaveListener=null)},f.prototype.ngOnDestroy=function(){this.cloneEl&&this.render.removeChild(document.body,this.cloneEl)},f.prototype.onMouseEnterHandler=function(){this.changeTitle()},f.prototype.onMouseLeaveHandler=function(){this.render.setAttribute(this.el.nativeElement,"title","")},f.prototype.changeTitle=function(){var t=this;this.cloneEl||this.createCloneEl(),this.tipsText=this.el.nativeElement.value,this.cloneEl.innerText=this.tipsText,this.ngzone.runOutsideAngular(function(){setTimeout(function(){t.cloneEl.getBoundingClientRect().width>t.el.nativeElement.getBoundingClientRect().width?t.render.setAttribute(t.el.nativeElement,"title",t.tipsText):t.onMouseLeaveHandler()},0)})},f.decorators=[{type:i.Directive,args:[{selector:"[f-input-tips]"}]}],f.ctorParameters=function(){return[{type:i.ElementRef},{type:i.NgZone},{type:i.Renderer2}]},f.propDecorators={enableTips:[{type:i.Input,args:["f-input-tips"]}]},f);function f(t,e,n){this.el=t,this.ngzone=e,this.render=n,this.cloneEl=null,this.tipsText="",this._enableTips=!0}var m=(v.prototype.transform=function(t){return this._sanitizer.sanitize(i.SecurityContext.HTML,this._sanitizer.bypassSecurityTrustHtml(t))},v.decorators=[{type:i.Pipe,args:[{name:"tooltipHtml"}]}],v.ctorParameters=function(){return[{type:n.DomSanitizer}]},v);function v(t){this._sanitizer=t}var g=(E.decorators=[{type:i.NgModule,args:[{declarations:[c,a,u,m],imports:[o.CommonModule],providers:[r],entryComponents:[a],exports:[c,a,u]}]}],E);function E(){}t.AttentionService=r,t.TooltipService=l,t.FarrisTooltipDirective=c,t.FInputTipsDirective=u,t.tooltipHtmlPipe=m,t.TooltipComponent=a,t.FarrisTooltipModule=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-tooltip.umd.min.js.map