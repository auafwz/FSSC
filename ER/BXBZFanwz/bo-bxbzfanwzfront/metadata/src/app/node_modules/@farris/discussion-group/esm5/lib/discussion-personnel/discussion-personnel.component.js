/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, Renderer2, NgZone, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';
import { of } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { LocaleService } from '@farris/ui-locale';
var DiscussionPersonnelComponent = /** @class */ (function () {
    function DiscussionPersonnelComponent(renderer, elementRef, ngZone, http, cd, injector) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.ngZone = ngZone;
        this.http = http;
        this.cd = cd;
        this.injector = injector;
        // 操作列表或者分组所需要的主键字段
        this.listIdField = "id";
        // 列表中显示的字段
        this.listDisplayText = "userName";
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        this.openDialog = new EventEmitter();
        this.ougUsers = new EventEmitter();
        // 右侧项
        this.selections = [];
        this.selectedSections = [];
        this.selectedUsers = [];
        // 最重要显示的人员信息
        this.finalText = '';
        this.sectionDataTree = [];
        this.sectionDataTiled = [];
        this.currentSectionData = [];
        this.currentSection = {};
        this.currentSectionPerson = {};
        this.currentSectionId = '';
        this.sectionCrumbs = [];
        this.pageSize = 20;
        this.showSearchList = false;
        this.crumbsEllipsis = false;
        this.searchUserList = {};
        this.selectEmployee = "选择员工";
        this.placeholder = "请输入员工姓名搜索";
        this.allOrg = "全部组织";
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        this.localeService = this.injector.get(LocaleService);
    }
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // let sectionDataTrees = this.initsectionData(this.sectionData,'');
        this.allOrg = this.localeService.getValue('discussionGroup.allOrg');
        /** @type {?} */
        var sectionDataTrees = this.initSectionData(this.sectionData, '');
        // this.sectionSort(sectionDataTrees);
        // if(sectionDataTrees.length>1){
        /** @type {?} */
        var sectionParent = [
            {
                data: {
                    id: 'discussionParent',
                    code: 'parent',
                    name: this.allOrg,
                    layer: 0,
                    parentId: "",
                    sortOrder: 1,
                    path: "",
                },
                children: [],
                personnels: {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                },
                parent: null,
                parents: [],
                parentsArr: [],
                checked: false
            }
        ];
        sectionParent[0].children = sectionDataTrees;
        sectionParent[0].children.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
        this.initSectionTree(sectionParent[0].children);
        this.sectionDataTree = sectionParent;
        // }
        // else{
        //     this.sectionDataTree = sectionDataTrees;
        // }
        //console.log(this.sectionDataTree);
        if (this.sectionDataTree && this.sectionDataTree.length) {
            this.sectionDataTiled = this.tileSectionData(this.sectionDataTree);
        }
        //console.log(this.sectionDataTiled);
        this.currentSection = this.sectionDataTree[0];
        this.sectionCrumbs = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children[0]['parentsArr'] : [];
        this.currentSectionData = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children : [];
        this.currentSectionId = this.sectionDataTree[0].data.id;
        this.getPersonnel(this.currentSectionId, 0).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            if (d.hasOwnProperty("users")) {
                _this.sectionDataTree[0].personnels = d;
                _this.currentSectionPerson = _this.sectionDataTree[0].personnels;
                // console.log('cur',this.currentSectionPerson);
            }
        }));
        this.selectEmployee = this.localeService.getValue('discussionGroup.selectEmployee');
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
        // console.log(this.sectionDataTiled);
    };
    /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initSectionTree = /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    function (data, parentId, parentName) {
        var _this = this;
        if (parentId === void 0) { parentId = "discussionParent"; }
        if (parentName === void 0) { parentName = this.allOrg; }
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var par = {
                    id: parentId,
                    name: parentName
                };
                item.parentsArr.unshift(par);
                item.parents.unshift(parentId);
                if (item.children.length) {
                    _this.initSectionTree(item.children);
                }
            }));
        }
    };
    /**
     * 初始化分组数据
     */
    /**
     * 初始化分组数据
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initSectionData = /**
     * 初始化分组数据
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @return {?}
     */
    function (data, parentId, parentIdField, idField) {
        if (parentIdField === void 0) { parentIdField = 'parentId'; }
        if (idField === void 0) { idField = 'id'; }
        /** @type {?} */
        var nodes = new Map();
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var unattached = [];
        if (data && data.length) {
            data.forEach((/**
             * @param {?} t
             * @return {?}
             */
            function (t) {
                /** @type {?} */
                var node = {
                    data: t,
                    children: [],
                    personnels: {},
                    parent: null,
                    parents: [],
                    parentsArr: [],
                    checked: false
                };
                /** @type {?} */
                var id = t[idField];
                nodes.set(id, node);
                /** @type {?} */
                var PID = t[parentIdField];
                if (PID === parentId || PID === null) {
                    result.push(node);
                }
                else {
                    /** @type {?} */
                    var parent_1 = nodes.get(PID);
                    // console.log(parent);
                    if (parent_1) {
                        /** @type {?} */
                        var par = {
                            id: PID,
                            name: parent_1.data.name
                        };
                        node['parent'] = PID;
                        node['parents'] = tslib_1.__spread(parent_1.parents, [PID]);
                        node['parentsArr'] = tslib_1.__spread(parent_1.parentsArr, [par]);
                        parent_1.children.push(node);
                        parent_1.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
                    }
                    else {
                        unattached.push(node);
                    }
                }
            }));
            if (unattached.length) {
                unattached.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    /** @type {?} */
                    var pid = n.data[parentIdField];
                    /** @type {?} */
                    var parent = nodes.get(pid);
                    if (parent) {
                        parent.children.push(n);
                        parent.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
                    }
                }));
            }
        }
        return result;
    };
    /**
     * @param {?} nodes
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.tileSectionData = /**
     * @param {?} nodes
     * @return {?}
     */
    function (nodes) {
        /** @type {?} */
        var r = [];
        this.getAllNodes(nodes, r);
        return r;
    };
    /**
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getAllNodes = /**
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    function (nodes, r) {
        var _this = this;
        nodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            r.push(n);
            if (n.children.length) {
                _this.getAllNodes(n.children, r);
            }
        }));
    };
    /**
     * 点击下级
     * @param section
     */
    /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.sectionNext = /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if (JSON.stringify(section.personnels) === '{}' && !section.hasOwnProperty('noPersonnel')) {
            section.personnels = {
                count: 0,
                pageCount: 0,
                pageIndex: 1,
                pageSize: 0,
                totalCount: 0,
                users: []
            };
            this.getPersonnel(section.data.id, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    section.personnels.count = d['count'];
                    section.personnels.pageCount = d['pageCount'];
                    section.personnels.pageIndex = d['pageIndex'];
                    section.personnels.pageSize = d['pageSize'];
                    section.personnels.totalCount = d['totalCount'];
                    section.personnels['users'] = tslib_1.__spread(section.personnels['users'], d['users']);
                }
                else {
                    section['noPersonnel'] = true;
                }
                _this.getNextData(section);
            }));
        }
        else {
            this.getNextData(section);
        }
    };
    /**
     * 获取下级数据
     * @param section
     */
    /**
     * 获取下级数据
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getNextData = /**
     * 获取下级数据
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if ((section.children && section.children.length) || (JSON.stringify(section.personnels) !== '{}')) {
            /** @type {?} */
            var sec = this.getSectionById(section.data.id);
            if (sec) {
                /** @type {?} */
                var secChecked_1 = sec['checked'];
                sec['disabled'] = secChecked_1 ? true : false;
                if (!sec['indeterminate']) {
                    if (sec.children && sec.children.length) {
                        sec.children.forEach((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            item['checked'] = secChecked_1;
                            item['indeterminate'] = false;
                            // item['disabled'] = sec['disabled'];
                        }));
                    }
                    ;
                    if (section.personnels['users'] && section.personnels['users'].length) {
                        section.personnels['users'].forEach((/**
                         * @param {?} user
                         * @return {?}
                         */
                        function (user) {
                            user['checked'] = secChecked_1;
                            user['indeterminate'] = false;
                            // user['disabled'] = sec['disabled'];
                        }));
                    }
                }
            }
            /** @type {?} */
            var secParent = {
                id: sec.data.id,
                name: sec.data.name
            };
            /** @type {?} */
            var secCrumbs = tslib_1.__spread(sec['parentsArr'], [secParent]);
            this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : secCrumbs;
            this.currentSectionData = sec.children.length ? sec.children : [];
            this.currentSection = sec;
            this.currentSectionId = sec.data.id;
            this.currentSectionPerson = sec.personnels;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.initCrumbsList();
            }), 0);
            // console.log(this.currentSection);
            this.cd.detectChanges();
        }
        else {
            this.currentSectionPerson = [];
        }
    };
    /**
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getPersonnel = /**
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (ougId, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        // let data = {};
        if (this.orgUrl) {
            /** @type {?} */
            var url = this.orgUrl + "?orgId=" + ougId + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            return this.http.get(url);
            // if(ougId == 'langchao'){
            //     return this.http.get('assets/data/discussionPerson.json');
            // }
            // else if(ougId == 'guoji'){
            //     return this.http.get('assets/data/discussionPerson2.json');
            // }
            // else if(ougId == 'yanfa'){
            //     return this.http.get('assets/data/discussionPerson3.json');
            // }
            // else{
            //     return of(true);
            // }
        }
        else {
            return of(true);
        }
        // return data;
    };
    /**
     * @param {?} id
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getSectionById = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var section = this.sectionDataTiled.find((/**
         * @param {?} sec
         * @return {?}
         */
        function (sec) {
            return sec.data.id == id;
        }));
        return section;
    };
    /**
     * 点击面包屑
     * @param crumbs
     */
    /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.crumbsClick = /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    function (crumbs) {
        var _this = this;
        if (crumbs.id == this.currentSectionId)
            return;
        /** @type {?} */
        var sec = this.getSectionById(crumbs.id);
        this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : [];
        this.currentSectionData = sec.children.length ? sec.children : [];
        this.currentSectionId = sec.data.id;
        this.currentSectionPerson = sec.personnels;
        this.currentSection = sec;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.initCrumbsList();
        }), 0);
    };
    /**
     * 部门或人员状态变化
     * @param event
     * @param section
     */
    /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleClick = /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    function (event, section, type) {
        var _this = this;
        if (this.currentSection.disabled)
            return;
        event.stopPropagation();
        section.checked = !section.checked;
        section['indeterminate'] = false;
        this.setSectionDataChecked();
        if (section.checked) {
            /** @type {?} */
            var selectedData = {
                parent: this.currentSection,
                data: section
            };
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    return;
                }
                else {
                    this.selectedUsers.push(selectedData);
                }
            }
            else if (type == 'section') {
                this.addSection(section);
            }
        }
        else {
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    this.selectedUsers.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    function (item, index) {
                        if (item['data'][_this.listIdField] === section[_this.listIdField]) {
                            _this.selectedUsers.splice(index, 1);
                        }
                    }));
                }
            }
            else if (type == 'section') {
                this.removeSection(section);
            }
        }
        // console.log(this.selectedUsers,this.selectedSections);
    };
    /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleSearchClick = /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    function (event, user) {
        var _this = this;
        event.stopPropagation();
        user.checked = !user.checked;
        if (user.checked) {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                return;
            }
            else {
                /** @type {?} */
                var selectedData = {
                    parent: null,
                    data: user
                };
                this.selectedUsers.push(selectedData);
            }
        }
        else {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                this.selectedUsers.forEach((/**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */
                function (item, index) {
                    if (item['data'][_this.listIdField] === user[_this.listIdField]) {
                        _this.selectedUsers.splice(index, 1);
                    }
                }));
            }
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.setSectionDataChecked = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var curChecked = false;
        /** @type {?} */
        var sec = this.currentSection;
        /** @type {?} */
        var secArray = [];
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            secArray = secArray.concat(sec.children, sec.personnels['users']);
            /** @type {?} */
            var secCheckedList = secArray.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.hasOwnProperty('checked') && item['checked']) {
                    return item;
                }
            }));
            /** @type {?} */
            var secIndeList = sec.children.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.hasOwnProperty('indeterminate') && item['indeterminate']) {
                    return item;
                }
            }));
            this.currentSection['indeterminate'] = (secIndeList && secIndeList.length) ? true : false;
            if (secCheckedList && secCheckedList.length) {
                if (secCheckedList.length == secArray.length && sec.personnels.pageIndex >= sec.personnels.pageCount - 1) {
                    curChecked = true;
                }
                else {
                    this.currentSection['indeterminate'] = true;
                }
            }
            else {
                curChecked = false;
            }
            this.currentSection['checked'] = curChecked;
            // console.log(this.currentSection);
        }
        if (this.currentSection.parents.length > 0 && this.currentSection['indeterminate']) {
            this.currentSection.parents.forEach((/**
             * @param {?} par
             * @return {?}
             */
            function (par) {
                /** @type {?} */
                var parSec = _this.getSectionById(par);
                if (parSec) {
                    parSec['indeterminate'] = _this.currentSection['indeterminate'];
                }
            }));
        }
    };
    /**
     * @param {?=} status
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.setChildDisabledStatus = /**
     * @param {?=} status
     * @return {?}
     */
    function (status) {
        if (status === void 0) { status = true; }
        /** @type {?} */
        var sec = this.currentSection;
        // sec['disabled'] = status;
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            sec.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item['disabled'] = status;
            }));
            // sec['childDisabled'] = status;
            sec.personnels['users'].forEach((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                user['disabled'] = status;
            }));
        }
    };
    /**
     * 人员查看更多
     */
    /**
     * 人员查看更多
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getMoreData = /**
     * 人员查看更多
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.currentSectionId) {
            /** @type {?} */
            var sec_1 = this.getSectionById(this.currentSectionId);
            if (sec_1) {
                this.getPersonnel(this.currentSectionId, sec_1.personnels.pageIndex + 1).subscribe((/**
                 * @param {?} d
                 * @return {?}
                 */
                function (d) {
                    if (d.hasOwnProperty("users")) {
                        sec_1.personnels.pageIndex = d['pageIndex'];
                        sec_1.personnels['users'] = tslib_1.__spread(sec_1.personnels['users'], d['users']);
                        if (sec_1.personnels['users'].length) {
                            if (sec_1['checked']) {
                                sec_1.personnels['users'].forEach((/**
                                 * @param {?} user
                                 * @return {?}
                                 */
                                function (user) {
                                    user['checked'] = sec_1['checked'];
                                }));
                            }
                        }
                        // this.setSectionDataChecked();
                    }
                    _this.cd.detectChanges();
                }));
            }
        }
    };
    /**
     * 全选
     * @param event
     */
    /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleClickAll = /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.currentSection.disabled)
            return;
        if (this.currentSection) {
            this.currentSection['checked'] = !this.currentSection['checked'];
            this.currentSection['indeterminate'] = false;
            /** @type {?} */
            var curChecked_1 = this.currentSection['checked'];
            this.currentSection.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item['checked'] = curChecked_1;
            }));
            if (JSON.stringify(this.currentSection.personnels) != '{}' && this.currentSection['personnels']['users'].length) {
                this.currentSection['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    user['checked'] = curChecked_1;
                }));
            }
            if (curChecked_1) {
                this.addSection(this.currentSection);
            }
            else {
                this.removeSection(this.currentSection);
            }
        }
    };
    /**
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.addSection = /**
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            return;
        }
        else {
            this.selectedSections.push(section);
        }
    };
    /**
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.removeSection = /**
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            this.selectedSections.forEach((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                if (item['data'][_this.listIdField] === section['data'][_this.listIdField]) {
                    _this.selectedSections.splice(index, 1);
                }
            }));
        }
    };
    /**
     * 搜索用户
     */
    /**
     * 搜索用户
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.searchUser = /**
     * 搜索用户
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.searchText) {
            this.showSearchList = true;
            this.getSearchData(this.searchText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    _this.searchUserList = d;
                }
            }));
        }
        else {
            this.showSearchList = false;
        }
    };
    /**
     * 搜索人员查看更多
     */
    /**
     * 搜索人员查看更多
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getMoreSearchData = /**
     * 搜索人员查看更多
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.searchText && this.personSearchUrl) {
            this.getSearchData(this.searchText, this.searchUserList.pageIndex + 1).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    _this.searchUserList.pageIndex = d['pageIndex'];
                    _this.searchUserList['users'] = tslib_1.__spread(_this.searchUserList['users'], d['users']);
                }
            }));
        }
    };
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getSearchData = /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (text, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        if (this.personSearchUrl) {
            /** @type {?} */
            var url = this.personSearchUrl + "?param=" + text + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    };
    /**
     * 选中人员或组织删除
     * @param data
     * @param type
     */
    /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.selectionRemove = /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    function (data, type) {
        var _this = this;
        if (!data)
            return;
        if (type == 'user') {
            /** @type {?} */
            var index = this.selectedUsers.findIndex((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                return user.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedUsers.splice(index, 1);
            }
            data.data['checked'] = false;
        }
        else if (type == 'section') {
            /** @type {?} */
            var index = this.selectedSections.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedSections.splice(index, 1);
            }
            data['checked'] = false;
        }
        /** @type {?} */
        var dataParent = null;
        if (type == 'section') {
            dataParent = this.getSectionById(data.parent);
        }
        else if (type == 'user') {
            dataParent = this.getSectionById(data.parent.data.id);
        }
        if (dataParent) {
            dataParent['checked'] = false;
            if ((dataParent.children && dataParent.children.length) || (dataParent.personnels.users && dataParent.personnels.users.length)) {
                /** @type {?} */
                var childrens = dataParent.children.filter((/**
                 * @param {?} child
                 * @return {?}
                 */
                function (child) {
                    return child['checked'];
                }));
                /** @type {?} */
                var users = dataParent.personnels.users.filter((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    return user['checked'];
                }));
                if ((childrens && childrens.length) || (users && users.length)) {
                    dataParent['indeterminate'] = true;
                }
                else {
                    dataParent['indeterminate'] = false;
                }
                if (dataParent.parents.length > 0) {
                    dataParent.parents.forEach((/**
                     * @param {?} par
                     * @return {?}
                     */
                    function (par) {
                        /** @type {?} */
                        var parSec = _this.getSectionById(par);
                        if ((parSec.children && parSec.children.length) || (parSec.personnels.users && parSec.personnels.users.length)) {
                            /** @type {?} */
                            var parchildrens = parSec.children.filter((/**
                             * @param {?} child
                             * @return {?}
                             */
                            function (child) {
                                return child['checked'];
                            }));
                            /** @type {?} */
                            var parusers = parSec.personnels.users.filter((/**
                             * @param {?} user
                             * @return {?}
                             */
                            function (user) {
                                return user['checked'];
                            }));
                            if ((parchildrens && parchildrens.length) || (parusers && parusers.length)) {
                                parSec['indeterminate'] = true;
                            }
                            else {
                                if (dataParent['indeterminate']) {
                                    parSec['indeterminate'] = dataParent['indeterminate'];
                                }
                                else {
                                    parSec['indeterminate'] = false;
                                }
                            }
                        }
                    }));
                }
            }
        }
    };
    /**
     * 删除右侧全部数据
     */
    /**
     * 删除右侧全部数据
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.moveAllToLeft = /**
     * 删除右侧全部数据
     * @return {?}
     */
    function () {
        this.selectedUsers.forEach((/**
         * @param {?} user
         * @return {?}
         */
        function (user) {
            user.data['checked'] = false;
        }));
        this.selectedSections.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item['checked'] = false;
        }));
        this.sectionDataTiled.forEach((/**
         * @param {?} sec
         * @return {?}
         */
        function (sec) {
            sec['indeterminate'] = false;
            sec['checked'] = false;
            sec['disabled'] = false;
            if (JSON.stringify(sec.personnels) != '{}' && sec['personnels']['users'].length) {
                sec['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    user['checked'] = false;
                }));
            }
        }));
        this.selectedUsers = [];
        this.selectedSections = [];
        this.cd.markForCheck();
    };
    /**
     *
     * @param numberType 0：取消；1：确定
     */
    /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.returnResult = /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    function (numberType) {
        this.finalText = '';
        if (numberType) {
            // console.log(this.selectedUsers,this.selectedSections);
            this.selectionsChange.emit({
                info: 'confirm',
                data: {
                    users: this.selectedUsers,
                    section: this.selectedSections
                }
            });
            // this.selections.forEach(item => {
            //     this.finalText += item[this.listDisplayText] + '；';
            // })
        }
        else {
            this.selectionsChange.emit({
                info: 'cancel',
                data: {
                    users: [],
                    section: []
                }
            });
        }
        this.moveAllToLeft();
        this.searchText = '';
        this.searchUser();
        this.personnelDialog.close();
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initCrumbsList = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var crumbsListWidth = this.crumbsList.nativeElement.offsetWidth - 30;
        /** @type {?} */
        var crumbsListItems = this.crumbsList.nativeElement.children;
        // console.log(crumbsListItems);
        /** @type {?} */
        var crumbsListItemWidth = 0;
        if (crumbsListItems && crumbsListItems.length) {
            for (var i = crumbsListItems.length - 1; i >= 0; i--) {
                // console.log(crumbsListItems[i]);
                this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                /** @type {?} */
                var width = crumbsListItems[i].offsetWidth;
                crumbsListItemWidth += width;
                if (crumbsListItemWidth >= crumbsListWidth) {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'none');
                }
                else {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                }
                // console.log(width,crumbsListItemWidth,crumbsListWidth,i);
            }
        }
        ;
        // console.log(crumbsListItemWidth,crumbsListWidth);
        if (crumbsListItemWidth >= crumbsListWidth) {
            this.crumbsEllipsis = true;
        }
        else {
            this.crumbsEllipsis = false;
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.crumbsMore = /**
     * @return {?}
     */
    function () {
        if (this.sectionCrumbs && this.sectionCrumbs.length) {
            this.crumbsClick(this.sectionCrumbs[0]);
        }
    };
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype._isInArray = /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[field]; })) ? true : false;
    };
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype._isSelectedInArray = /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item['data'][field]; })) ? true : false;
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.closeDialog = /**
     * @return {?}
     */
    function () {
        this.moveAllToLeft();
        this.searchText = '';
        this.searchUser();
    };
    DiscussionPersonnelComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-discussion-personnel',
                    template: "<div class=\"farris-discussion-personnel-wrapper\">\r\n    <button class=\"btn btn-link\" (click)=\"personnelDialog.show()\">{{ 'discussionGroup.advancedQuery' | locale }}</button>\r\n</div>\r\n<ng-template #buttonRef>\r\n    <button class=\"btn btn-secondary\" (click)=\"returnResult(0)\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n    <button class=\"btn btn-primary\" (click)=\"returnResult(1)\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n</ng-template>\r\n<farris-dialog #personnelDialog [buttons]=\"buttonRef\" [width]=\"690\" [height]=\"520\" [resizable]=\"false\" [title]=\"selectEmployee\" (closed)=\"closeDialog()\">\r\n    <div class=\"f-discussion-dialog-content\">\r\n        <div class=\"f-discussion-dialog-content-left col-6 d-flex flex-column\">\r\n            <div class=\"f-discussion-personnel-search\">\r\n                <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"searchText\" (valueChange)=\"searchUser()\" (enterHandle)=\"searchUser()\" (clickHandle)=\"searchUser()\"></input-group>\r\n            </div>\r\n            <div class=\"f-discussion-tab-content f-utils-fill d-flex flex-column\">\r\n                <div class=\"f-discussion-personnel-content f-utils-fill d-flex flex-column\" [ngClass]=\"{'f-discussion-personnel-content-hide': showSearchList}\">\r\n                    <div class=\"f-discussion-personnel-crumbs d-flex\">\r\n                        <ul class=\"crumbs-list d-flex\" #crumbsList [ngClass]=\"{'crumbs-list-padding': crumbsEllipsis}\" *ngIf=\"sectionCrumbs && sectionCrumbs.length\">\r\n                            <li class=\"crumbs-list-item\" *ngFor=\"let crumbs of sectionCrumbs;let first = first;let last = last;\" (click)=\"crumbsClick(crumbs)\"  \r\n                            [ngClass]=\"{'crumbs-list-item-disabled': !(first || !last)}\">\r\n                                <span class=\"crumbs-text\">{{crumbs.name}}</span>\r\n                                <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\" *ngIf=\"first || !last\"></span>\r\n                            </li>\r\n                        </ul>\r\n                        <div class=\"crumbs-list-ellipsis crumbs-list-item\" *ngIf=\"crumbsEllipsis\" (click)=\"crumbsMore()\">\r\n                            <span class=\"crumbs-text\">...</span>\r\n                            <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-discussion-section-content f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <ul class=\"f-discussion-section-list\">\r\n                                <!-- <li class=\"section-list-item\" *ngIf=\"currentSectionData.length || currentSectionPerson.users.length\" (click)=\"handleClickAll($event)\">\r\n                                    <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"currentSection.checked\" [disabled]=\"currentSection.disabled\" [indeterminate]=\"currentSection.indeterminate\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\">\r\n                                        \u5168\u9009\r\n                                    </div>\r\n                                </li> -->\r\n                                <li class=\"section-list-item\" *ngFor=\"let section of currentSectionData\">\r\n                                    <div class=\"custom-control custom-checkbox custom-control-inline section-list-item-checkbox\" (click)=\"handleClick($event,section,'section')\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"section.checked\" [indeterminate]=\"section.indeterminate\" [disabled]=\"currentSection.disabled\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\" [title]=\"section.data.name\" (click)=\"handleClick($event,section,'section')\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-next\" (click)=\"sectionNext(section)\">\r\n                                        {{ 'discussionGroup.next' | locale }}\r\n                                    </div>\r\n                                </li>\r\n                                <ng-container *ngIf=\"currentSectionPerson\">\r\n                                    <li class=\"section-list-item person-list-item\" *ngFor=\"let person of currentSectionPerson.users\" (click)=\"handleClick($event,person,'user')\">\r\n                                        <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                            <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"person.checked\" [disabled]=\"currentSection.disabled\">\r\n                                            <label class=\"custom-control-label\"></label>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-img\">\r\n                                            <img [src]=\"person.imgData\" alt=\"\" *ngIf=\"person.imgData\">\r\n                                            <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!person.imgData\" [innerHTML]=\"person | avatarHtml\"></div>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-content f-utils-fill\">\r\n                                            <div class=\"section-list-item-name\" [title]=\"person.name\">\r\n                                                {{person.name}}\r\n                                            </div>\r\n                                            <div class=\"section-list-item-tip\">\r\n                                                <!-- {{person.email}} -->\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">{{sectionCrumbs[sectionCrumbs.length - 2].name}}</span>\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">/</span>\r\n                                                <span>{{sectionCrumbs[sectionCrumbs.length - 1].name}}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- \u4EBA\u5458\u5217\u8868 -->\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\" *ngIf=\"currentSectionPerson['users'] && currentSectionPerson['users'].length\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"currentSectionPerson.pageIndex < currentSectionPerson.pageCount-1\" (click)=\"getMoreData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                        <!-- <span class=\"section-page-end section-page-text\"  *ngIf=\"currentSectionPerson.pageIndex >= currentSectionPerson.pageCount-1\">\u52A0\u8F7D\u5B8C\u6210</span> -->\r\n                                    </div>\r\n                                </ng-container>\r\n                            </ul>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!currentSectionData.length &&(currentSectionPerson.users && !currentSectionPerson.users.length)\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-personnel-search-list f-utils-fill\" [hidden]=\"!showSearchList\">\r\n                    <perfect-scrollbar>\r\n                        <ul class=\"f-discussion-section-list\" *ngIf=\"searchUserList && searchUserList.users && searchUserList.users.length\">\r\n                            <li class=\"section-list-item person-list-item\" *ngFor=\"let user of searchUserList.users\" (click)=\"handleSearchClick($event,user)\">\r\n                                <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                    <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"user.checked\">\r\n                                    <label class=\"custom-control-label\"></label>\r\n                                </div>\r\n                                <div class=\"person-list-item-img\">\r\n                                    <img [src]=\"user.imgData\" alt=\"\" *ngIf=\"user.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.imgData\" [innerHTML]=\"user | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"person-list-item-content f-utils-fill\">\r\n                                    <div class=\"section-list-item-name\" [title]=\"user.name\">\r\n                                        {{user.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-tip\">\r\n                                        <span [innerHTML]=\"user | getOrgText:sectionData\"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                            <div class=\"f-discussion-person-list-page\">\r\n                                <span class=\"section-page-more section-page-text\" *ngIf=\"searchUserList.pageIndex < searchUserList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                            </div>\r\n                        </ul>\r\n                        <div class=\"f-discussion-section-list-empty\" *ngIf=\"!searchUserList.users || !searchUserList.users.length\">\r\n                            <span class=\"f-icon f-icon-top_my\"></span>\r\n                            <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                        </div>\r\n                    </perfect-scrollbar>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-discussion-dialog-content-right f-utils-fill d-flex flex-column\">\r\n            <div class=\"f-discussion-selected-personnel f-utils-fill d-flex flex-column\">\r\n                <div class=\"f-discussion-selected-personnel-header\">\r\n                    <div class=\"f-discussion-selected-personnel-header-text\">\r\n                        <span>{{ 'discussionGroup.selected' | locale }}</span>(<span>{{ 'discussionGroup.people' | locale }}</span><span>{{selectedUsers.length}}</span><span>{{ 'discussionGroup.per' | locale }}</span>\uFF0C<span>{{ 'discussionGroup.section' | locale }}</span><span>{{selectedSections.length}}</span><span>{{ 'discussionGroup.pcs' | locale }}</span>)\r\n                    </div>\r\n                    <div class=\"f-discussion-selected-personnel-header-btn\" (click)=\"moveAllToLeft()\">\r\n                        <button class=\"btn btn-link\">{{ 'discussionGroup.emptySelected' | locale }}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-selected-personnel-content f-utils-fill d-flex flex-column\">\r\n                    <div class=\"f-discussion-selected-list f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let user of selectedUsers\">\r\n                                <div class=\"f-discussion-personnel-item-avatar\">\r\n                                    <img [src]=\"user.data.imgData\" alt=\"\" *ngIf=\"user.data.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.data.imgData\" [innerHTML]=\"user.data | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{user.data.name}}\r\n                                    </div>\r\n                                    <div class=\"f-discussion-selected-item-tip\" *ngIf=\"user.parent\">\r\n                                        <span *ngIf=\"user.parent.parentsArr.length>=1\">{{user.parent.parentsArr[user.parent.parentsArr.length - 1].name}}</span>\r\n                                            <span *ngIf=\"user.parent.parentsArr.length>=1\">/</span>\r\n                                            <span>{{user.parent.data.name}}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(user,'user')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let section of selectedSections\">\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(section,'section')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!selectedUsers.length && !selectedSections.length\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyRight' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</farris-dialog>\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DiscussionPersonnelComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef },
        { type: NgZone },
        { type: HttpClient },
        { type: ChangeDetectorRef },
        { type: Injector }
    ]; };
    DiscussionPersonnelComponent.propDecorators = {
        listIdField: [{ type: Input }],
        listDisplayText: [{ type: Input }],
        sectionData: [{ type: Input }],
        orgUrl: [{ type: Input }],
        personSearchUrl: [{ type: Input }],
        personnelDialog: [{ type: ViewChild, args: ['personnelDialog',] }],
        selectionsChange: [{ type: Output }],
        lineDataChange: [{ type: Output }],
        openDialog: [{ type: Output }],
        ougUsers: [{ type: Output }],
        crumbsList: [{ type: ViewChild, args: ['crumbsList',] }]
    };
    return DiscussionPersonnelComponent;
}());
export { DiscussionPersonnelComponent };
if (false) {
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listIdField;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listDisplayText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personnelDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.openDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.ougUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedSections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.finalText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTree;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTiled;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSection;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionPerson;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionId;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionCrumbs;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsEllipsis;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchUserList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectEmployee;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.allOrg;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.localeService;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1wZXJzb25uZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tcGVyc29ubmVsL2Rpc2N1c3Npb24tcGVyc29ubmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBZSxNQUFNLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuSyxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRTFCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQ7SUFzREksc0NBQ1ksUUFBbUIsRUFDbkIsVUFBc0IsRUFDdEIsTUFBYyxFQUNkLElBQWdCLEVBQ2hCLEVBQXFCLEVBQ3JCLFFBQWtCO1FBTGxCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN0QixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsU0FBSSxHQUFKLElBQUksQ0FBWTtRQUNoQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUNyQixhQUFRLEdBQVIsUUFBUSxDQUFVOztRQXBEckIsZ0JBQVcsR0FBVyxJQUFJLENBQUM7O1FBRTNCLG9CQUFlLEdBQVcsVUFBVSxDQUFDOzs7O1FBU3BDLHFCQUFnQixHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7O1FBRTNDLG1CQUFjLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUN6QyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNyQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVB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Qjs7SUFDdkIsdURBQWdDOztJQUVoQyx1REFBOEM7O0lBSTlDLHdEQUFxRDs7SUFFckQsc0RBQW1EOztJQUNuRCxrREFBK0M7O0lBQy9DLGdEQUE2Qzs7SUFFN0Msa0RBQStDOztJQUcvQyxrREFBdUI7O0lBQ3ZCLHdEQUE0Qjs7SUFDNUIscURBQXlCOztJQUV6QixrREFBa0I7O0lBRWxCLGlEQUF1Qjs7SUFFdkIsdURBQWdDOztJQUNoQyx3REFBaUM7O0lBQ2pDLDBEQUFtQzs7SUFDbkMsc0RBQXdCOztJQUN4Qiw0REFBOEI7O0lBQzlCLHdEQUE2Qjs7SUFDN0IscURBQThCOztJQUM5QixnREFBcUI7O0lBRXJCLHNEQUErQjs7SUFDL0Isc0RBQStCOztJQUMvQixzREFBd0I7O0lBRXhCLHNEQUErQjs7SUFDL0IsbURBQWlDOztJQUNqQyw4Q0FBdUI7Ozs7O0lBQ3ZCLHFEQUFxQzs7SUFDckMsaURBQXlEOzs7OztJQUVyRCxnREFBMkI7Ozs7O0lBQzNCLGtEQUE4Qjs7Ozs7SUFDOUIsOENBQXNCOzs7OztJQUN0Qiw0Q0FBd0I7Ozs7O0lBQ3hCLDBDQUE2Qjs7Ozs7SUFDN0IsZ0RBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgTmdab25lLCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBUeXBlIH0gZnJvbSAnLi90eXBlJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZmFycmlzLWRpc2N1c3Npb24tcGVyc29ubmVsJyxcclxuICB0ZW1wbGF0ZVVybDonLi9kaXNjdXNzaW9uLXBlcnNvbm5lbC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOlsnLi9kaXNjdXNzaW9uLXBlcnNvbm5lbC5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGlzY3Vzc2lvblBlcnNvbm5lbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgLy8g5pON5L2c5YiX6KGo5oiW6ICF5YiG57uE5omA6ZyA6KaB55qE5Li76ZSu5a2X5q61XHJcbiAgICBASW5wdXQoKSBsaXN0SWRGaWVsZDogc3RyaW5nID0gXCJpZFwiO1xyXG4gICAgLy8g5YiX6KGo5Lit5pi+56S655qE5a2X5q61XHJcbiAgICBASW5wdXQoKSBsaXN0RGlzcGxheVRleHQ6IHN0cmluZyA9IFwidXNlck5hbWVcIjtcclxuICAgIEBJbnB1dCgpIHNlY3Rpb25EYXRhOmFueVtdO1xyXG4gICAgQElucHV0KCkgb3JnVXJsOnN0cmluZztcclxuICAgIEBJbnB1dCgpIHBlcnNvblNlYXJjaFVybDpzdHJpbmc7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgncGVyc29ubmVsRGlhbG9nJykgcGVyc29ubmVsRGlhbG9nO1xyXG4gICAgLy8g5paw5bu66L+Y5piv57u05oqk6Ieq5a6a5LmJ6KeS6ImyXHJcbiAgICAvLyBAT3V0cHV0KCkgY3VzdG9tR3JvdXBDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8vIOWvueWkluaatOmcsuaVsOaNrlxyXG4gICAgQE91dHB1dCgpIHNlbGVjdGlvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8vIOmAieS4reeahOihjFxyXG4gICAgQE91dHB1dCgpIGxpbmVEYXRhQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgb3BlbkRpYWxvZyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIG91Z1VzZXJzID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY3J1bWJzTGlzdCcpIGNydW1ic0xpc3Q6RWxlbWVudFJlZjtcclxuXHJcbiAgICAvLyDlj7PkvqfpoblcclxuICAgIHNlbGVjdGlvbnM6IGFueVtdID0gW107XHJcbiAgICBzZWxlY3RlZFNlY3Rpb25zOmFueVtdID0gW107XHJcbiAgICBzZWxlY3RlZFVzZXJzOmFueVtdID0gW107XHJcbiAgICAvLyDmkJzntKLmlofmnKxcclxuICAgIHNlYXJjaFRleHQ6IHN0cmluZ1xyXG4gICAgLy8g5pyA6YeN6KaB5pi+56S655qE5Lq65ZGY5L+h5oGvXHJcbiAgICBmaW5hbFRleHQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIHNlY3Rpb25EYXRhVHJlZTpBcnJheTxhbnk+ID0gW107XHJcbiAgICBzZWN0aW9uRGF0YVRpbGVkOkFycmF5PGFueT4gPSBbXTtcclxuICAgIGN1cnJlbnRTZWN0aW9uRGF0YTpBcnJheTxhbnk+ID0gW107XHJcbiAgICBjdXJyZW50U2VjdGlvbjphbnkgPSB7fTtcclxuICAgIGN1cnJlbnRTZWN0aW9uUGVyc29uOmFueSA9IHt9O1xyXG4gICAgY3VycmVudFNlY3Rpb25JZDpzdHJpbmcgPSAnJztcclxuICAgIHNlY3Rpb25DcnVtYnM6QXJyYXk8YW55PiA9IFtdO1xyXG4gICAgcGFnZVNpemU6bnVtYmVyID0gMjA7XHJcblxyXG4gICAgc2hvd1NlYXJjaExpc3Q6Ym9vbGVhbiA9IGZhbHNlO1xyXG4gICAgY3J1bWJzRWxsaXBzaXM6Ym9vbGVhbiA9IGZhbHNlO1xyXG4gICAgc2VhcmNoVXNlckxpc3Q6YW55ID0ge307XHJcblxyXG4gICAgc2VsZWN0RW1wbG95ZWU6c3RyaW5nID0gXCLpgInmi6nlkZjlt6VcIjtcclxuICAgIHBsYWNlaG9sZGVyOnN0cmluZyA9IFwi6K+36L6T5YWl5ZGY5bel5aeT5ZCN5pCc57SiXCI7XHJcbiAgICBhbGxPcmc6c3RyaW5nID0gXCLlhajpg6jnu4Tnu4dcIjtcclxuICAgIHByaXZhdGUgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIGdyb3VwSWNvbiA9ICc8c3BhbiBjbGFzcz1cImYtaWNvbiBmLWljb24tc2VhcmNoXCI+PC9zcGFuPic7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy8gbGV0IHNlY3Rpb25EYXRhVHJlZXMgPSB0aGlzLmluaXRzZWN0aW9uRGF0YSh0aGlzLnNlY3Rpb25EYXRhLCcnKTtcclxuICAgICAgICB0aGlzLmFsbE9yZyA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLmFsbE9yZycpO1xyXG4gICAgICAgIGxldCBzZWN0aW9uRGF0YVRyZWVzID0gdGhpcy5pbml0U2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YSwnJyk7XHJcbiAgICAgICAgLy8gdGhpcy5zZWN0aW9uU29ydChzZWN0aW9uRGF0YVRyZWVzKTtcclxuICAgICAgICAvLyBpZihzZWN0aW9uRGF0YVRyZWVzLmxlbmd0aD4xKXtcclxuICAgICAgICAgICAgbGV0IHNlY3Rpb25QYXJlbnQgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOidkaXNjdXNzaW9uUGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZToncGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbGxPcmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVyOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbm5lbHM6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDowLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlQ291bnQ6MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4OjEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50c0FyciA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6ZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgc2VjdGlvblBhcmVudFswXS5jaGlsZHJlbiA9IHNlY3Rpb25EYXRhVHJlZXM7XHJcbiAgICAgICAgICAgIHNlY3Rpb25QYXJlbnRbMF0uY2hpbGRyZW4uc29ydCgoYSwgYik6bnVtYmVyID0+IGEuZGF0YVsnc29ydE9yZGVyJ10gLSBiLmRhdGFbJ3NvcnRPcmRlciddKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0U2VjdGlvblRyZWUoc2VjdGlvblBhcmVudFswXS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUcmVlID0gc2VjdGlvblBhcmVudDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZWxzZXtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZWN0aW9uRGF0YVRyZWUgPSBzZWN0aW9uRGF0YVRyZWVzO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2VjdGlvbkRhdGFUcmVlKTtcclxuICAgICAgICBpZih0aGlzLnNlY3Rpb25EYXRhVHJlZSAmJiB0aGlzLnNlY3Rpb25EYXRhVHJlZS5sZW5ndGgpe1xyXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25EYXRhVGlsZWQgPSB0aGlzLnRpbGVTZWN0aW9uRGF0YSh0aGlzLnNlY3Rpb25EYXRhVHJlZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zZWN0aW9uRGF0YVRpbGVkKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF07XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uQ3J1bWJzID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0uY2hpbGRyZW4ubGVuZ3RoP3RoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLmNoaWxkcmVuWzBdWydwYXJlbnRzQXJyJ106W107XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbkRhdGEgPSB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbi5sZW5ndGg/dGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0uY2hpbGRyZW46W107XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbklkID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0uZGF0YS5pZDtcclxuICAgICAgICB0aGlzLmdldFBlcnNvbm5lbCh0aGlzLmN1cnJlbnRTZWN0aW9uSWQsMCkuc3Vic2NyaWJlKChkOmFueSk9PntcclxuICAgICAgICAgICAgaWYoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLnBlcnNvbm5lbHMgPSBkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblBlcnNvbiA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY3VyJyx0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdEVtcGxveWVlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAuc2VsZWN0RW1wbG95ZWUnKTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAucGxhY2Vob2xkZXInKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25EYXRhVGlsZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRTZWN0aW9uVHJlZShkYXRhLHBhcmVudElkPVwiZGlzY3Vzc2lvblBhcmVudFwiLCAgcGFyZW50TmFtZSA9IHRoaXMuYWxsT3JnKXtcclxuICAgICAgICBpZihkYXRhICYmIGRhdGEubGVuZ3RoKXtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDpwYXJlbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOnBhcmVudE5hbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpdGVtLnBhcmVudHNBcnIudW5zaGlmdChwYXIpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5wYXJlbnRzLnVuc2hpZnQocGFyZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbS5jaGlsZHJlbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlY3Rpb25UcmVlKGl0ZW0uY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJbliIbnu4TmlbDmja5cclxuICAgICAqL1xyXG4gICAgaW5pdFNlY3Rpb25EYXRhKGRhdGEsIHBhcmVudElkLCBwYXJlbnRJZEZpZWxkID0gJ3BhcmVudElkJywgaWRGaWVsZCA9ICdpZCcpIHtcclxuICAgICAgICBjb25zdCBub2RlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCB1bmF0dGFjaGVkID0gW107XHJcbiAgICAgICAgaWYoZGF0YSAmJiBkYXRhLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaCh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdCxcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyc29ubmVsczp7fSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50c0FyciA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0W2lkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgbm9kZXMuc2V0KGlkLCBub2RlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFBJRCA9IHRbcGFyZW50SWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoUElEID09PSBwYXJlbnRJZCB8fCBQSUQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZXMuZ2V0KFBJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDpQSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOnBhcmVudC5kYXRhLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsncGFyZW50J10gPSBQSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbJ3BhcmVudHMnXSA9IFsuLi5wYXJlbnQucGFyZW50cywgUElEXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsncGFyZW50c0FyciddID0gWy4uLnBhcmVudC5wYXJlbnRzQXJyLCBwYXJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnNvcnQoKGEsIGIpOm51bWJlciA9PiBhLmRhdGFbJ3NvcnRPcmRlciddIC0gYi5kYXRhWydzb3J0T3JkZXInXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5hdHRhY2hlZC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmKHVuYXR0YWNoZWQubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIHVuYXR0YWNoZWQuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaWQgPSBuLmRhdGFbcGFyZW50SWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZXMuZ2V0KHBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnNvcnQoKGEsIGIpOm51bWJlciA9PiBhLmRhdGFbJ3NvcnRPcmRlciddIC0gYi5kYXRhWydzb3J0T3JkZXInXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIHRpbGVTZWN0aW9uRGF0YShub2Rlcyl7XHJcbiAgICAgICAgbGV0IHIgPSBbXTtcclxuICAgICAgICB0aGlzLmdldEFsbE5vZGVzKG5vZGVzLHIpO1xyXG4gICAgICAgIHJldHVybiByO1xyXG4gICAgfVxyXG4gICAgZ2V0QWxsTm9kZXMoIG5vZGVzLCByKSB7XHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChuID0+e1xyXG4gICAgICAgICAgICByLnB1c2gobik7XHJcbiAgICAgICAgICAgIGlmIChuLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBbGxOb2RlcyhuLmNoaWxkcmVuLCByKTtcclxuICAgICAgICAgICAgfSAgXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75LiL57qnXHJcbiAgICAgKiBAcGFyYW0gc2VjdGlvbiBcclxuICAgICAqL1xyXG4gICAgc2VjdGlvbk5leHQoc2VjdGlvbil7XHJcbiAgICAgICAgaWYoSlNPTi5zdHJpbmdpZnkoc2VjdGlvbi5wZXJzb25uZWxzKSA9PT0gJ3t9JyAmJiAhc2VjdGlvbi5oYXNPd25Qcm9wZXJ0eSgnbm9QZXJzb25uZWwnKSl7XHJcbiAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscyA9IHtcclxuICAgICAgICAgICAgICAgIGNvdW50OjAsXHJcbiAgICAgICAgICAgICAgICBwYWdlQ291bnQ6MCxcclxuICAgICAgICAgICAgICAgIHBhZ2VJbmRleDoxLFxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6MCxcclxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6MCxcclxuICAgICAgICAgICAgICAgIHVzZXJzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmdldFBlcnNvbm5lbChzZWN0aW9uLmRhdGEuaWQsMCkuc3Vic2NyaWJlKChkOmFueSk9PntcclxuICAgICAgICAgICAgICAgIGlmKGQuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLmNvdW50ID0gZFsnY291bnQnXTtcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMucGFnZUNvdW50ID0gZFsncGFnZUNvdW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLnBhZ2VJbmRleCA9IGRbJ3BhZ2VJbmRleCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscy5wYWdlU2l6ZSA9IGRbJ3BhZ2VTaXplJ107XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLnRvdGFsQ291bnQgPSBkWyd0b3RhbENvdW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddID0gWy4uLnNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXSwuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblsnbm9QZXJzb25uZWwnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE5leHREYXRhKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLmdldE5leHREYXRhKHNlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiL57qn5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gc2VjdGlvbiBcclxuICAgICAqL1xyXG4gICAgZ2V0TmV4dERhdGEoc2VjdGlvbil7XHJcbiAgICAgICAgaWYoKHNlY3Rpb24uY2hpbGRyZW4gJiYgc2VjdGlvbi5jaGlsZHJlbi5sZW5ndGgpIHx8IChKU09OLnN0cmluZ2lmeShzZWN0aW9uLnBlcnNvbm5lbHMpICE9PSAne30nKSl7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQoc2VjdGlvbi5kYXRhLmlkKTtcclxuICAgICAgICAgICAgaWYoc2VjKXtcclxuICAgICAgICAgICAgICAgIGxldCBzZWNDaGVja2VkID0gc2VjWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICBzZWNbJ2Rpc2FibGVkJ10gPSBzZWNDaGVja2VkP3RydWU6ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZighc2VjWydpbmRldGVybWluYXRlJ10pe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNlYy5jaGlsZHJlbiAmJiBzZWMuY2hpbGRyZW4ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWydjaGVja2VkJ10gPSBzZWNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVtWydkaXNhYmxlZCddID0gc2VjWydkaXNhYmxlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXSAmJiBzZWN0aW9uLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyWydjaGVja2VkJ10gPSBzZWNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VyWydkaXNhYmxlZCddID0gc2VjWydkaXNhYmxlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHNlY1BhcmVudCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOnNlYy5kYXRhLmlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTpzZWMuZGF0YS5uYW1lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBzZWNDcnVtYnMgPSBbLi4uc2VjWydwYXJlbnRzQXJyJ10sc2VjUGFyZW50XTtcclxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uQ3J1bWJzID0gc2VjLmNoaWxkcmVuLmxlbmd0aD9zZWMuY2hpbGRyZW5bMF1bJ3BhcmVudHNBcnInXTpzZWNDcnVtYnM7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25EYXRhID0gc2VjLmNoaWxkcmVuLmxlbmd0aD9zZWMuY2hpbGRyZW46W107XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24gPSBzZWM7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25JZCA9IHNlYy5kYXRhLmlkO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uID0gc2VjLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0Q3J1bWJzTGlzdCgpO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50U2VjdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFBlcnNvbm5lbChvdWdJZDpzdHJpbmcscGFnZUluZGV4Om51bWJlcixwYWdlU2l6ZTpudW1iZXIgPSB0aGlzLnBhZ2VTaXplKXtcclxuICAgICAgICAvLyBsZXQgZGF0YSA9IHt9O1xyXG4gICAgICAgIGlmKHRoaXMub3JnVXJsKXtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcmdVcmx9P29yZ0lkPSR7b3VnSWR9JnBhZ2VTaXplPSR7cGFnZVNpemV9JnBhZ2VJbmRleD0ke3BhZ2VJbmRleH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgICAgICAvLyBpZihvdWdJZCA9PSAnbGFuZ2NoYW8nKXtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9kaXNjdXNzaW9uUGVyc29uLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKG91Z0lkID09ICdndW9qaScpe1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24yLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKG91Z0lkID09ICd5YW5mYScpe1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24zLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNle1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VjdGlvbkJ5SWQoaWQpe1xyXG4gICAgICAgIGxldCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uRGF0YVRpbGVkLmZpbmQoc2VjPT57XHJcbiAgICAgICAgICAgIHJldHVybiBzZWMuZGF0YS5pZCA9PSBpZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc2VjdGlvbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog54K55Ye76Z2i5YyF5bGRXHJcbiAgICAgKiBAcGFyYW0gY3J1bWJzIFxyXG4gICAgICovXHJcbiAgICBjcnVtYnNDbGljayhjcnVtYnMpe1xyXG4gICAgICAgIGlmKGNydW1icy5pZCA9PSB0aGlzLmN1cnJlbnRTZWN0aW9uSWQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBzZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKGNydW1icy5pZCk7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uQ3J1bWJzID0gc2VjLmNoaWxkcmVuLmxlbmd0aD9zZWMuY2hpbGRyZW5bMF1bJ3BhcmVudHNBcnInXTpbXTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uRGF0YSA9IHNlYy5jaGlsZHJlbi5sZW5ndGg/c2VjLmNoaWxkcmVuOltdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25JZCA9IHNlYy5kYXRhLmlkO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25QZXJzb24gPSBzZWMucGVyc29ubmVscztcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uID0gc2VjO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRDcnVtYnNMaXN0KCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmDqOmXqOaIluS6uuWRmOeKtuaAgeWPmOWMllxyXG4gICAgICogQHBhcmFtIGV2ZW50IFxyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUNsaWNrKGV2ZW50LHNlY3Rpb24sdHlwZSkge1xyXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFNlY3Rpb24uZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBzZWN0aW9uLmNoZWNrZWQgPSAhc2VjdGlvbi5jaGVja2VkO1xyXG4gICAgICAgIHNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbkRhdGFDaGVja2VkKCk7XHJcbiAgICAgICAgaWYoc2VjdGlvbi5jaGVja2VkKXtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHBhcmVudDp0aGlzLmN1cnJlbnRTZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZGF0YTpzZWN0aW9uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmKHR5cGUgPT0gJ3VzZXInKXtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMucHVzaChzZWxlY3RlZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSAnc2VjdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTZWN0aW9uKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGlmKHR5cGUgPT0gJ3VzZXInKXtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0gPT09IHNlY3Rpb25bdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZih0eXBlID09ICdzZWN0aW9uJyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNlY3Rpb24oc2VjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RlZFVzZXJzLHRoaXMuc2VsZWN0ZWRTZWN0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU2VhcmNoQ2xpY2soZXZlbnQsdXNlcil7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdXNlci5jaGVja2VkID0gIXVzZXIuY2hlY2tlZDtcclxuICAgICAgICBpZih1c2VyLmNoZWNrZWQpe1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNTZWxlY3RlZEluQXJyYXkodXNlclt0aGlzLmxpc3RJZEZpZWxkXSwgdGhpcy5saXN0SWRGaWVsZCwgdGhpcy5zZWxlY3RlZFVzZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDpudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6dXNlclxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5wdXNoKHNlbGVjdGVkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2VsZWN0ZWRJbkFycmF5KHVzZXJbdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRVc2VycykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0gPT09IHVzZXJbdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldFNlY3Rpb25EYXRhQ2hlY2tlZCgpe1xyXG4gICAgICAgIGxldCBjdXJDaGVja2VkOmJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBsZXQgc2VjID0gdGhpcy5jdXJyZW50U2VjdGlvbjtcclxuICAgICAgICBsZXQgc2VjQXJyYXk6YW55ID0gW107XHJcbiAgICAgICAgaWYoc2VjLmNoaWxkcmVuIHx8IChzZWMucGVyc29ubmVsc1sndXNlcnMnXSAmJiBzZWMucGVyc29ubmVsc1sndXNlcnMnXS5sZW5ndGgpKXtcclxuICAgICAgICAgICAgc2VjQXJyYXkgPSBzZWNBcnJheS5jb25jYXQoc2VjLmNoaWxkcmVuLHNlYy5wZXJzb25uZWxzWyd1c2VycyddKTtcclxuICAgICAgICAgICAgbGV0IHNlY0NoZWNrZWRMaXN0ID0gc2VjQXJyYXkuZmlsdGVyKGl0ZW09PntcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKSAmJiBpdGVtWydjaGVja2VkJ10pe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHNlY0luZGVMaXN0ID0gc2VjLmNoaWxkcmVuLmZpbHRlcihpdGVtPT57XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtLmhhc093blByb3BlcnR5KCdpbmRldGVybWluYXRlJykgJiYgaXRlbVsnaW5kZXRlcm1pbmF0ZSddKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddID0gKHNlY0luZGVMaXN0ICYmIHNlY0luZGVMaXN0Lmxlbmd0aCk/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgaWYoc2VjQ2hlY2tlZExpc3QgJiYgc2VjQ2hlY2tlZExpc3QubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGlmKHNlY0NoZWNrZWRMaXN0Lmxlbmd0aCA9PSBzZWNBcnJheS5sZW5ndGggJiYgc2VjLnBlcnNvbm5lbHMucGFnZUluZGV4ID49IHNlYy5wZXJzb25uZWxzLnBhZ2VDb3VudC0xKXtcclxuICAgICAgICAgICAgICAgICAgICBjdXJDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgY3VyQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXSA9IGN1ckNoZWNrZWQ7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5jdXJyZW50U2VjdGlvbi5wYXJlbnRzLmxlbmd0aD4wICYmIHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSl7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24ucGFyZW50cy5mb3JFYWNoKHBhciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJTZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKHBhcik7XHJcbiAgICAgICAgICAgICAgICBpZihwYXJTZWMpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhclNlY1snaW5kZXRlcm1pbmF0ZSddID0gdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2hpbGREaXNhYmxlZFN0YXR1cyhzdGF0dXM6Ym9vbGVhbiA9IHRydWUpe1xyXG4gICAgICAgIGxldCBzZWMgPSB0aGlzLmN1cnJlbnRTZWN0aW9uO1xyXG4gICAgICAgIC8vIHNlY1snZGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICBpZihzZWMuY2hpbGRyZW4gfHwgKHNlYy5wZXJzb25uZWxzWyd1c2VycyddICYmIHNlYy5wZXJzb25uZWxzWyd1c2VycyddLmxlbmd0aCkpe1xyXG4gICAgICAgICAgICBzZWMuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1bJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBzZWNbJ2NoaWxkRGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJbJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6uuWRmOafpeeci+abtOWkmlxyXG4gICAgICovXHJcbiAgICBnZXRNb3JlRGF0YSgpe1xyXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFNlY3Rpb25JZCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQodGhpcy5jdXJyZW50U2VjdGlvbklkKTtcclxuICAgICAgICAgICAgaWYoc2VjKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGVyc29ubmVsKHRoaXMuY3VycmVudFNlY3Rpb25JZCwgc2VjLnBlcnNvbm5lbHMucGFnZUluZGV4ICsgMSkuc3Vic2NyaWJlKChkOmFueSk9PntcclxuICAgICAgICAgICAgICAgICAgICBpZihkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWMucGVyc29ubmVscy5wYWdlSW5kZXggPSBkWydwYWdlSW5kZXgnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10gPSBbLi4uc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10sLi4uZFsndXNlcnMnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlYy5wZXJzb25uZWxzWyd1c2VycyddLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWNbJ2NoZWNrZWQnXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gc2VjWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRTZWN0aW9uRGF0YUNoZWNrZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgIlcclxuICAgICAqIEBwYXJhbSBldmVudCBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ2xpY2tBbGwoZXZlbnQpe1xyXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFNlY3Rpb24uZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBpZih0aGlzLmN1cnJlbnRTZWN0aW9uKXtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnY2hlY2tlZCddID0gIXRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBjdXJDaGVja2VkID0gdGhpcy5jdXJyZW50U2VjdGlvblsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtWydjaGVja2VkJ10gPSBjdXJDaGVja2VkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYoSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50U2VjdGlvbi5wZXJzb25uZWxzKSAhPSAne30nICYmIHRoaXMuY3VycmVudFNlY3Rpb25bJ3BlcnNvbm5lbHMnXVsndXNlcnMnXS5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsncGVyc29ubmVscyddWyd1c2VycyddLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGN1ckNoZWNrZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTZWN0aW9uKHRoaXMuY3VycmVudFNlY3Rpb24pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VjdGlvbih0aGlzLmN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRTZWN0aW9uKHNlY3Rpb24pe1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMucHVzaChzZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZW1vdmVTZWN0aW9uKHNlY3Rpb24pe1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdID09PSBzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si55So5oi3XHJcbiAgICAgKi9cclxuICAgIHNlYXJjaFVzZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hEYXRhKHRoaXMuc2VhcmNoVGV4dCwwKS5zdWJzY3JpYmUoZD0+e1xyXG4gICAgICAgICAgICAgICAgaWYoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJMaXN0ID0gZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1NlYXJjaExpc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0ouS6uuWRmOafpeeci+abtOWkmlxyXG4gICAgICovXHJcbiAgICBnZXRNb3JlU2VhcmNoRGF0YSgpe1xyXG4gICAgICAgIGlmKHRoaXMuc2VhcmNoVGV4dCAmJiB0aGlzLnBlcnNvblNlYXJjaFVybCl7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2VhcmNoRGF0YSh0aGlzLnNlYXJjaFRleHQsdGhpcy5zZWFyY2hVc2VyTGlzdC5wYWdlSW5kZXggKyAxKS5zdWJzY3JpYmUoZD0+e1xyXG4gICAgICAgICAgICAgICAgaWYoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJMaXN0LnBhZ2VJbmRleCA9IGRbJ3BhZ2VJbmRleCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoVXNlckxpc3RbJ3VzZXJzJ10gPSBbLi4udGhpcy5zZWFyY2hVc2VyTGlzdFsndXNlcnMnXSwuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFNlYXJjaERhdGEodGV4dDpzdHJpbmcscGFnZUluZGV4Om51bWJlcixwYWdlU2l6ZTpudW1iZXIgPSB0aGlzLnBhZ2VTaXplKXtcclxuICAgICAgICBpZih0aGlzLnBlcnNvblNlYXJjaFVybCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMucGVyc29uU2VhcmNoVXJsfT9wYXJhbT0ke3RleHR9JnBhZ2VTaXplPSR7cGFnZVNpemV9JnBhZ2VJbmRleD0ke3BhZ2VJbmRleH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgICAgICAvL3JldHVybiB0aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9kaXNjdXNzaW9uUGVyc29uMy5qc29uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInkuK3kurrlkZjmiJbnu4Tnu4fliKDpmaRcclxuICAgICAqIEBwYXJhbSBkYXRhIFxyXG4gICAgICogQHBhcmFtIHR5cGUgXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdGlvblJlbW92ZShkYXRhOiBhbnksIHR5cGU6c3RyaW5nKSB7XHJcbiAgICAgICAgaWYoIWRhdGEpIHJldHVybjtcclxuICAgICAgICBpZih0eXBlID09ICd1c2VyJyl7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRVc2Vycy5maW5kSW5kZXgodXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlci5kYXRhLmlkID09IGRhdGEuZGF0YS5pZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID49IDAgKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YVsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSAnc2VjdGlvbicpe1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZmluZEluZGV4KGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YS5pZCA9PSBkYXRhLmRhdGEuaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZihpbmRleCA+PSAwICl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRhWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRhdGFQYXJlbnQgPSBudWxsO1xyXG4gICAgICAgIGlmKHR5cGUgPT0gJ3NlY3Rpb24nKXtcclxuICAgICAgICAgICAgZGF0YVBhcmVudCA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQoZGF0YS5wYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT0gJ3VzZXInKXtcclxuICAgICAgICAgICAgZGF0YVBhcmVudCA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQoZGF0YS5wYXJlbnQuZGF0YS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGRhdGFQYXJlbnQpe1xyXG4gICAgICAgICAgICBkYXRhUGFyZW50WydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYoKGRhdGFQYXJlbnQuY2hpbGRyZW4gJiYgZGF0YVBhcmVudC5jaGlsZHJlbi5sZW5ndGgpIHx8IChkYXRhUGFyZW50LnBlcnNvbm5lbHMudXNlcnMgJiYgZGF0YVBhcmVudC5wZXJzb25uZWxzLnVzZXJzLmxlbmd0aCkgKXtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbnMgPSBkYXRhUGFyZW50LmNoaWxkcmVuLmZpbHRlcihjaGlsZD0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZFsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdXNlcnMgPSBkYXRhUGFyZW50LnBlcnNvbm5lbHMudXNlcnMuZmlsdGVyKHVzZXI9PntcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlclsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmKChjaGlsZHJlbnMgJiYgY2hpbGRyZW5zLmxlbmd0aCkgfHwgKHVzZXJzICYmIHVzZXJzLmxlbmd0aCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFQYXJlbnRbJ2luZGV0ZXJtaW5hdGUnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFQYXJlbnRbJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZGF0YVBhcmVudC5wYXJlbnRzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhUGFyZW50LnBhcmVudHMuZm9yRWFjaChwYXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJTZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKHBhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChwYXJTZWMuY2hpbGRyZW4gJiYgcGFyU2VjLmNoaWxkcmVuLmxlbmd0aCkgfHwgKHBhclNlYy5wZXJzb25uZWxzLnVzZXJzICYmIHBhclNlYy5wZXJzb25uZWxzLnVzZXJzLmxlbmd0aCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmNoaWxkcmVucyA9IHBhclNlYy5jaGlsZHJlbi5maWx0ZXIoY2hpbGQ9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnVzZXJzID0gcGFyU2VjLnBlcnNvbm5lbHMudXNlcnMuZmlsdGVyKHVzZXI9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlclsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChwYXJjaGlsZHJlbnMgJiYgcGFyY2hpbGRyZW5zLmxlbmd0aCkgfHwgKHBhcnVzZXJzICYmIHBhcnVzZXJzLmxlbmd0aCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhclNlY1snaW5kZXRlcm1pbmF0ZSddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YVBhcmVudFsnaW5kZXRlcm1pbmF0ZSddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyU2VjWydpbmRldGVybWluYXRlJ10gPSBkYXRhUGFyZW50WydpbmRldGVybWluYXRlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhclNlY1snaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIoOmZpOWPs+S+p+WFqOmDqOaVsOaNrlxyXG4gICAgICovXHJcbiAgICBtb3ZlQWxsVG9MZWZ0KCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5mb3JFYWNoKHVzZXI9PntcclxuICAgICAgICAgICAgdXNlci5kYXRhWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZm9yRWFjaChpdGVtPT57XHJcbiAgICAgICAgICAgIGl0ZW1bJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUaWxlZC5mb3JFYWNoKHNlYyA9PiB7XHJcbiAgICAgICAgICAgIHNlY1snaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlY1snY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlY1snZGlzYWJsZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZihKU09OLnN0cmluZ2lmeShzZWMucGVyc29ubmVscykgIT0gJ3t9JyAmJiBzZWNbJ3BlcnNvbm5lbHMnXVsndXNlcnMnXS5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgc2VjWydwZXJzb25uZWxzJ11bJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG51bWJlclR5cGUgMO+8muWPlua2iO+8mzHvvJrnoa7lrppcclxuICAgICAqL1xyXG4gICAgcmV0dXJuUmVzdWx0KG51bWJlclR5cGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZmluYWxUZXh0ID0gJyc7XHJcbiAgICAgICAgaWYgKG51bWJlclR5cGUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RlZFVzZXJzLHRoaXMuc2VsZWN0ZWRTZWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgICAgIGluZm86ICdjb25maXJtJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyczogdGhpcy5zZWxlY3RlZFVzZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IHRoaXMuc2VsZWN0ZWRTZWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmZpbmFsVGV4dCArPSBpdGVtW3RoaXMubGlzdERpc3BsYXlUZXh0XSArICfvvJsnO1xyXG4gICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgICAgIGluZm86ICdjYW5jZWwnLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiBbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb3ZlQWxsVG9MZWZ0KCk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzb25uZWxEaWFsb2cuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0Q3J1bWJzTGlzdCgpe1xyXG4gICAgICAgIGNvbnN0IGNydW1ic0xpc3RXaWR0aCA9IHRoaXMuY3J1bWJzTGlzdC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoIC0gMzA7XHJcbiAgICAgICAgY29uc3QgY3J1bWJzTGlzdEl0ZW1zID0gdGhpcy5jcnVtYnNMaXN0Lm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW47XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY3J1bWJzTGlzdEl0ZW1zKTtcclxuICAgICAgICBsZXQgY3J1bWJzTGlzdEl0ZW1XaWR0aCA9IDA7XHJcbiAgICAgICAgaWYoY3J1bWJzTGlzdEl0ZW1zICYmIGNydW1ic0xpc3RJdGVtcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY3J1bWJzTGlzdEl0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjcnVtYnNMaXN0SXRlbXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjcnVtYnNMaXN0SXRlbXNbaV0sJ2Rpc3BsYXknLCdmbGV4Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBjcnVtYnNMaXN0SXRlbXNbaV0ub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjcnVtYnNMaXN0SXRlbVdpZHRoICs9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgaWYoY3J1bWJzTGlzdEl0ZW1XaWR0aCA+PSBjcnVtYnNMaXN0V2lkdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY3J1bWJzTGlzdEl0ZW1zW2ldLCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNydW1ic0xpc3RJdGVtc1tpXSwnZGlzcGxheScsJ2ZsZXgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHdpZHRoLGNydW1ic0xpc3RJdGVtV2lkdGgsY3J1bWJzTGlzdFdpZHRoLGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhjcnVtYnNMaXN0SXRlbVdpZHRoLGNydW1ic0xpc3RXaWR0aCk7XHJcbiAgICAgICAgaWYoY3J1bWJzTGlzdEl0ZW1XaWR0aCA+PSBjcnVtYnNMaXN0V2lkdGgpe1xyXG4gICAgICAgICAgICB0aGlzLmNydW1ic0VsbGlwc2lzID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuY3J1bWJzRWxsaXBzaXMgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcnVtYnNNb3JlKCl7XHJcbiAgICAgICAgaWYodGhpcy5zZWN0aW9uQ3J1bWJzICYmIHRoaXMuc2VjdGlvbkNydW1icy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB0aGlzLmNydW1ic0NsaWNrKHRoaXMuc2VjdGlvbkNydW1ic1swXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9pc0luQXJyYXkodmFsdWU6IHN0cmluZywgZmllbGQ6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliY0y5Liq5Y+C5pWw5b+F5aGrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5maW5kKGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRdKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfaXNTZWxlY3RlZEluQXJyYXkodmFsdWU6IHN0cmluZywgZmllbGQ6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliY0y5Liq5Y+C5pWw5b+F5aGrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5maW5kKGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bJ2RhdGEnXVtmaWVsZF0pID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlRGlhbG9nKCl7XHJcbiAgICAgICAgdGhpcy5tb3ZlQWxsVG9MZWZ0KCk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hVc2VyKCk7XHJcbiAgICB9XHJcbn0iXX0=