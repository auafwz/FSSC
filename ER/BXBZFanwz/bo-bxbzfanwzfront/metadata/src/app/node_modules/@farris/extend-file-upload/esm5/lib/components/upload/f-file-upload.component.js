/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/upload/f-file-upload.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, HostBinding, ViewChild, EventEmitter, Output, ContentChild, ElementRef } from '@angular/core';
import { FFileSelectDirective, FFileDropDirective, FFileUploadDirective } from '../../directive/index';
import { FFileUtils } from '../../utils/index';
import { FFileUploadAPIService, FFileUploaderService } from '../../service/index';
import { NotifyService } from '@farris/ui-notify';
import { Observable, Subject } from 'rxjs';
import { trigger, style, state, animate, transition } from '@angular/animations';
import { NgZone } from '@angular/core';
var FFileUploadComponent = /** @class */ (function () {
    function FFileUploadComponent(uploadAPISer, fileUploaderSer, notifyService, ngZone) {
        var _this = this;
        this.uploadAPISer = uploadAPISer;
        this.fileUploaderSer = fileUploaderSer;
        this.notifyService = notifyService;
        this.ngZone = ngZone;
        this.cls = true;
        // 启用图片预览
        this.enableImagePreview = true;
        // 启用立即上传
        this.uploadImmediately = false;
        // 上传完成后隐藏
        this.uploadedThenHide = true;
        // 禁用状态
        this.disabled = false;
        this.tVisible = true;
        // 需要重置,通过不断的赋值来改变
        this.needReset = new Subject();
        // 启用拖拽
        this.enableDrop = false;
        this.dropText = "可将文件拖拽此处";
        // 启用选择文件按钮
        this.enableSelect = true;
        this.selectText = "点击上传";
        // 启用多选
        this.multiple = true;
        // 已经上传文件
        this.uploadedCount = 0;
        // 宽度阈值，当宽度超过760时候，没有附件上传时，宽度是固定值，有附件上传时，有最大宽度值
        this.widthThreshold = 760;
        // 上传和删除对外抛出的事件
        this.fUploadDoneEvent = new EventEmitter();
        this.fUploadRemovedEvent = new EventEmitter();
        // 允许上传的文件类型
        this.allowedContentTypes = '*';
        // 默认不限制附件上传个数
        this.maxUploads = 0;
        // 单位KB，默认是12M
        this.maxFileSize = '12MB';
        this.selfUploadOpts = {};
        // 控制是否显示追加附件的面板
        this.showAppendPanel = false;
        // 显示loading
        this.showLoading = false;
        this.settings = {
            disabled: this.disabled,
            visible: this.visible
        };
        this.files = [];
        this.uploadSelectInput = new EventEmitter();
        this.uploadDragInput = new EventEmitter();
        // 重置
        this.needReset.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.reset();
        }));
    }
    Object.defineProperty(FFileUploadComponent.prototype, "visibleState", {
        // 不可见
        get: 
        // 不可见
        /**
         * @return {?}
         */
        function () {
            return !this.visible;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "selfDirectiveDefine", {
        // 自定义样式
        get: 
        // 自定义样式
        /**
         * @return {?}
         */
        function () {
            if (this.fFileUploadDir) {
                return true;
            }
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "uploading", {
        get: /**
         * @return {?}
         */
        function () {
            return this.files.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "visible", {
        get: /**
         * @return {?}
         */
        function () {
            return this.tVisible;
        },
        // 是否可见
        set: 
        // 是否可见
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.tVisible = value;
            if (!value) {
                this.reset();
            }
        },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(FFileUploadComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            return this.selfUploadOpts;
        },
        // 上传配置项
        set: 
        // 上传配置项
        /**
         * @param {?} uploadOpts
         * @return {?}
         */
        function (uploadOpts) {
            if (uploadOpts) {
                if (uploadOpts.hasOwnProperty('allowedContentTypes')) {
                    this.allowedContentTypes = uploadOpts.allowedContentTypes.join(',');
                    this.allowedContentTypes = this.allowedContentTypes == '' ? '*' : this.allowedContentTypes;
                }
                if (uploadOpts.hasOwnProperty('maxUploads')) {
                    this.maxUploads = uploadOpts.maxUploads;
                }
                if (uploadOpts.hasOwnProperty('maxFileSize')) {
                    this.maxFileSize = FFileUtils.humanizeBytes(1024 * 1024 * uploadOpts.maxFileSize);
                }
                this.selfUploadOpts = Object.assign(this.selfUploadOpts, uploadOpts);
            }
        },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(FFileUploadComponent.prototype, "extendServerConfig", {
        /**
        * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置
        */
        set: /**
         * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置
         * @param {?} config
         * @return {?}
         */
        function (config) {
            if (config) {
                this.fileUploaderSer.setExtendServerConfig(config);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FFileUploadComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // 模板的情况下只能是立即上传
        if (this.fFileUploadDir) {
            this.uploadImmediately = true;
        }
        this.computeWidthThreshold();
    };
    /**
    * 视图初始化后
    */
    /**
     * 视图初始化后
     * @return {?}
     */
    FFileUploadComponent.prototype.ngAfterViewInit = /**
     * 视图初始化后
     * @return {?}
     */
    function () {
    };
    /**
     * 触发绑定
     */
    /**
     * 触发绑定
     * @param {?} ev
     * @return {?}
     */
    FFileUploadComponent.prototype.triggerFileSelect = /**
     * 触发绑定
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        ev && ev.stopPropagation();
        // 禁用时
        if (this.disabled) {
            return false;
        }
        this.fileUpload.elementRef.nativeElement.click();
    };
    /**
     * 选择附件按钮，处理抛出事件
     * @param output
     */
    /**
     * 选择附件按钮，处理抛出事件
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.selectUploadOutput = /**
     * 选择附件按钮，处理抛出事件
     * @param {?} output
     * @return {?}
     */
    function (output) {
        this.uploadOutputHandler(output);
    };
    /**
     * 拖拽区域处理抛出事件
     * @param output
     */
    /**
     * 拖拽区域处理抛出事件
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.dropUploadOutput = /**
     * 拖拽区域处理抛出事件
     * @param {?} output
     * @return {?}
     */
    function (output) {
        if (this.enableSelect) {
            return;
        }
        // 暂不处理拖拽的事件
        if (output.type !== 'dragOver' && output.type !== 'dragOut' && output.type !== 'drop') {
            this.uploadOutputHandler(output);
        }
    };
    /**
     * allAddedToQueue 选中文件追加到队列
     * @param output
     */
    /**
     * allAddedToQueue 选中文件追加到队列
     * @private
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.uploadOutputHandler = /**
     * allAddedToQueue 选中文件追加到队列
     * @private
     * @param {?} output
     * @return {?}
     */
    function (output) {
        // 显示追加面板
        if (this.showAppendPanel) {
            this.showAppendPanel = false;
        }
        if (output.type === 'addedToQueue' && typeof output.file !== 'undefined') {
            this.files.push({ type: output.type, file: output.file });
            // 如果启用立即上传
            if (this.uploadImmediately) {
                this.showLoading = true;
                this.startUpload(output.file);
            }
        }
        else if (output.type === 'start') {
            // 开始上传
            this.updateFilesState(output, '');
        }
        else if (output.type == 'done') {
            // 上传完成
            this.updateFilesState(output, 'done');
            this.fUploadDoneEvent.emit(FFileUtils.changeUploadFileToFileExtend(output.files));
            this.hideAfterLoaded(output);
            // 隐藏正在加载
            if (this.uploadImmediately && this.showLoading && this.allFileUploaded()) {
                this.showLoading = false;
            }
        }
        else if (output.type === 'cancelled' || output.type === 'removed' || output.type == 'error') {
            // 删除或者移除文件
            this.files = this.files.filter((/**
             * @param {?} fileOutput
             * @return {?}
             */
            function (fileOutput) {
                return output.files.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return fileOutput.file.id == item.id; })) < 0;
            }));
            // 隐藏正在加载
            if (this.uploadImmediately && this.showLoading && this.allFileUploaded()) {
                this.showLoading = false;
            }
            this.showNotify(output);
        }
        else if (output.type === 'rejected' && typeof output.file !== 'undefined') {
            // 上传被拒绝
            this.showNotify(output);
            // 隐藏正在加载
            if (this.uploadImmediately && this.showLoading && this.allFileUploaded()) {
                this.showLoading = false;
            }
        }
    };
    /**
     * @private
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.showNotify = /**
     * @private
     * @param {?} output
     * @return {?}
     */
    function (output) {
        /** @type {?} */
        var notifyType = 'warning';
        if (output.type == 'cancelled' || output.type == 'removed') {
            notifyType = 'success';
        }
        /** @type {?} */
        var message = output.hasOwnProperty('message') ? output['message'] : '';
        this.notifyService[notifyType]((/** @type {?} */ ({
            msg: message, timeout: 3000
        })));
    };
    // 判断是否所有文件都已上传
    // 判断是否所有文件都已上传
    /**
     * @private
     * @return {?}
     */
    FFileUploadComponent.prototype.allFileUploaded = 
    // 判断是否所有文件都已上传
    /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var findNotDoneIndex = this.files.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var doneTypes = ['done', 'cancelled', 'removed'];
            /** @type {?} */
            var findTypeIndex = doneTypes.findIndex((/**
             * @param {?} type
             * @return {?}
             */
            function (type) {
                return type == item.type;
            }));
            return findTypeIndex == -1;
        }));
        return findNotDoneIndex == -1 ? true : false;
    };
    /**
     * 更新附件的状态
     * @param output
     * @param eventType
     */
    /**
     * 更新附件的状态
     * @private
     * @param {?} output
     * @param {?} eventType
     * @return {?}
     */
    FFileUploadComponent.prototype.updateFilesState = /**
     * 更新附件的状态
     * @private
     * @param {?} output
     * @param {?} eventType
     * @return {?}
     */
    function (output, eventType) {
        var _this = this;
        /** @type {?} */
        var startFiles = [];
        if (output.hasOwnProperty('files') && output.files.length > 0) {
            // 此处更新界面可能有性能问题
            startFiles = output.files;
        }
        else if (typeof output.file !== 'undefined') {
            startFiles = [output.file];
        }
        eventType = eventType ? eventType : output.type;
        startFiles.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var index = _this.files.findIndex((/**
             * @param {?} fileOutput
             * @return {?}
             */
            function (fileOutput) { return typeof item !== 'undefined' && fileOutput.file.id === item.id; }));
            // 变更状态
            if (index > -1) {
                _this.files[index] = { type: eventType, file: item };
            }
        }));
    };
    /**单个文件上传 */
    /**
     * 单个文件上传
     * @param {?} file
     * @return {?}
     */
    FFileUploadComponent.prototype.startUpload = /**
     * 单个文件上传
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /**
         * Todo:后续可以从上传区块上取内容进行扩展
         * @type {?}
         */
        var event = this.uploadAPISer.getAssignAPI('upload', { file: file, type: 'upload', data: this.extendDatas });
        this.inputUploadEventEmit(event);
    };
    /**
     * 上传所有
     */
    /**
     * 上传所有
     * @return {?}
     */
    FFileUploadComponent.prototype.startUploadAll = /**
     * 上传所有
     * @return {?}
     */
    function () {
        /**
         *  Todo：后续，如果每个数据不一样，此处的数据得重新归集
         * @type {?}
         */
        var event = this.uploadAPISer.getAssignAPI('uploadAll', { type: 'uploadAll', files: [], data: this.extendDatas });
        this.inputUploadEventEmit(event);
    };
    /**
     * 已上传隐藏属性
     */
    /**
     * 已上传隐藏属性
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.hideAfterLoaded = /**
     * 已上传隐藏属性
     * @param {?} output
     * @return {?}
     */
    function (output) {
        var _this = this;
        //上传完成后删除
        if (this.uploadedThenHide) {
            // this.ngZone.runOutsideAngular(() => {
            setTimeout((/**
             * @return {?}
             */
            function () {
                // 删除或者移除文件
                /** @type {?} */
                var ids = output.files.map((/**
                 * @param {?} fileItem
                 * @return {?}
                 */
                function (fileItem) { return fileItem.id; }));
                _this.files = _this.files.filter((/**
                 * @param {?} fileOutput
                 * @return {?}
                 */
                function (fileOutput) {
                    /** @type {?} */
                    var tIndex = ids.findIndex((/**
                     * @param {?} tId
                     * @return {?}
                     */
                    function (tId) { return tId == fileOutput.file.id; }));
                    return tIndex > -1 ? false : true;
                }));
                /** @type {?} */
                var event = _this.uploadAPISer.getAssignAPI('hide', { type: 'hide', id: ids.join(',') });
                _this.inputUploadEventEmit(event);
            }), 1000);
            // });
        }
    };
    /**
     * 取消上传
     */
    /**
     * 取消上传
     * @param {?} id
     * @return {?}
     */
    FFileUploadComponent.prototype.cancelUpload = /**
     * 取消上传
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var event = this.uploadAPISer.getAssignAPI('cancel', { id: id, type: 'cancel' });
        this.inputUploadEventEmit(event);
    };
    /**
     * 删除已上传文件
     */
    /**
     * 删除已上传文件
     * @return {?}
     */
    FFileUploadComponent.prototype.removelAllUpload = /**
     * 删除已上传文件
     * @return {?}
     */
    function () {
        /** @type {?} */
        var event = this.uploadAPISer.getAssignAPI('removeAll', { type: 'removeAll', files: [] });
        this.inputUploadEventEmit(event);
    };
    /**
     * 删除已上传文件
    */
    /**
     * 删除已上传文件
     * @param {?} id
     * @return {?}
     */
    FFileUploadComponent.prototype.removeFile = /**
     * 删除已上传文件
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var event = this.uploadAPISer.getAssignAPI('remove', { id: id, type: 'remove' });
        this.inputUploadEventEmit(event);
    };
    /** */
    /**
     *
     * @param bytes
     */
    /** */
    /**
     *
     * @param {?} bytes
     * @return {?}
     */
    FFileUploadComponent.prototype.formateBytes = /** */
    /**
     *
     * @param {?} bytes
     * @return {?}
     */
    function (bytes) {
        return FFileUtils.humanizeBytes(bytes);
    };
    /**
     * 判断是图片
     * @param type
     */
    /**
     * 判断是图片
     * @param {?} type
     * @return {?}
     */
    FFileUploadComponent.prototype.isImage = /**
     * 判断是图片
     * @param {?} type
     * @return {?}
     */
    function (type) {
        return type.indexOf('image') > -1;
    };
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     */
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     * @return {?}
     */
    FFileUploadComponent.prototype.judgeContentTypeLimit = 
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tTypes = this.allowedContentTypes.split(',');
        /** @type {?} */
        var hasAllIndex = tTypes.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item == '*';
        }));
        return hasAllIndex == -1;
    };
    /**
     * 判断是否有文件大小的限制
     */
    /**
     * 判断是否有文件大小的限制
     * @return {?}
     */
    FFileUploadComponent.prototype.judegeFileSizeLimit = /**
     * 判断是否有文件大小的限制
     * @return {?}
     */
    function () {
        return this.maxFileSize != '0 Byte';
    };
    /**
     * 追加
     */
    /**
     * 追加
     * @param {?} ev
     * @return {?}
     */
    FFileUploadComponent.prototype.appendNewFiles = /**
     * 追加
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        //启用拖拽
        if (this.enableDrop) {
            this.showAppendPanel = true;
        }
        else {
            ev && ev.stopPropagation();
            this.triggerFileSelect(ev);
        }
    };
    /**
     * 关闭追加面板
     */
    /**
     * 关闭追加面板
     * @return {?}
     */
    FFileUploadComponent.prototype.closeAppendPanel = /**
     * 关闭追加面板
     * @return {?}
     */
    function () {
        this.showAppendPanel = false;
    };
    /**
     * 统一触发 附件选择和拖拽附件的事件
     * @param ev
     */
    /**
     * 统一触发 附件选择和拖拽附件的事件
     * @private
     * @param {?} ev
     * @return {?}
     */
    FFileUploadComponent.prototype.inputUploadEventEmit = /**
     * 统一触发 附件选择和拖拽附件的事件
     * @private
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        // 如果文件上传启用
        if (this.enableSelect) {
            this.uploadSelectInput.emit(ev);
        }
        else {
            this.uploadDragInput.emit(ev);
        }
    };
    // 重置方法
    // 重置方法
    /**
     * @return {?}
     */
    FFileUploadComponent.prototype.reset = 
    // 重置方法
    /**
     * @return {?}
     */
    function () {
        this.files = [];
        // 如果文件上传启用
        if (this.enableSelect) {
            this.fileUpload && this.fileUpload.reset();
        }
        else {
            this.fileDropUpload && this.fileDropUpload.reset();
        }
        this.computeWidthThreshold();
    };
    /**
     * 计算阈值
     */
    /**
     * 计算阈值
     * @private
     * @return {?}
     */
    FFileUploadComponent.prototype.computeWidthThreshold = /**
     * 计算阈值
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        //
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var self = _this;
            setTimeout((/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var tNeedComputedCls = false;
                if (self.fFileUploadDir || !self.visible) {
                    tNeedComputedCls = false;
                }
                // 计算元素
                /** @type {?} */
                var assistEl = self.fFileUploadAssist ? self.fFileUploadAssist.nativeElement : null;
                // 超过阈值
                if (assistEl && assistEl.getBoundingClientRect().width > self.widthThreshold) {
                    tNeedComputedCls = true;
                }
                else {
                    tNeedComputedCls = false;
                }
                if (assistEl) {
                    /** @type {?} */
                    var actionFun = tNeedComputedCls ? 'add' : 'remove';
                    assistEl.parentElement.classList[actionFun]('ffileupload-default');
                }
            }), 0);
        }));
    };
    FFileUploadComponent.decorators = [
        { type: Component, args: [{
                    selector: 'f-file-upload',
                    template: "<div class=\"ffileupload--assist\" #uploadAssist></div>\r\n<ng-container *ngIf=\"visible\">    \r\n    <ng-container *ngIf=\"enableSelect\">\r\n        <input type=\"file\" class=\"ffileupload--browser\" [disabled]=\"disabled\" FFileSelect [options]=\"options\"\r\n            (uploadOutput)=\"selectUploadOutput($event)\" [uploadInput]=\"uploadSelectInput\" [multiple]=\"multiple\"\r\n            [accept]=\"allowedContentTypes\"  [uploadedCount]=\"uploadedCount\">\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!fFileUploadDir\">\r\n        <ng-container *ngIf=\"enableDrop\">\r\n            <div class=\"ffileupload--drop-wrapper\"\r\n                [ngClass]=\"{'drop-wrapper--append':files.length>0,'drop-wrapper--append-show':showAppendPanel}\">\r\n                <div class=\"action-wrapper--is-upload drop-wrapper--header\" [ngClass]=\"showAppendPanel?'':'d-none'\">\r\n                    <div class=\"action-wrapper--header-left\">\r\n                        <button type=\"button\" class=\"btn btn-link mr-2\" (click)=\"closeAppendPanel()\">\u8FD4\u56DE</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"drop-wrapper--drop-area\" FFileDrop [options]=\"options\"\r\n                    (uploadOutput)=\"dropUploadOutput($event)\" [uploadInput]=\"uploadDragInput\" [disabled]=\"disabled\" [uploadedCount]=\"uploadedCount\">\r\n\r\n                    <button type=\"button\" class=\"btn-upload-icon\" [disabled]=\"disabled\" (click)=\"triggerFileSelect($event)\">\r\n                        <i class=\"f-icon f-icon-upload_big\"></i>\r\n                    </button>\r\n                    <div class=\"drop-wrapper--action\" *ngIf=\"!disabled\">\r\n                        <label class=\"drop-wrapper--action-label\">\r\n                            {{dropText}}\r\n                        </label> \u6216 <button type=\"button\" class=\"drop-wrapper--action-select\" [disabled]=\"disabled\"\r\n                            (click)=\"triggerFileSelect($event)\">{{selectText}}</button>\r\n                    </div>\r\n                    <ng-container *ngTemplateOutlet=\"beforeUploadSupportInfo\"></ng-container>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"files.length>0\">\r\n                <ng-container *ngTemplateOutlet=\"afterSelectHeader\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!enableDrop&&enableSelect\">\r\n            <div class=\"ffileupload--action-wrapper\" [ngClass]=\"{'select-wrapper--append':files.length>0}\">\r\n                <ng-container *ngIf=\"files.length==0;else afterSelectHeader\">\r\n                    <div class=\"action-wrapper--before-upload\">\r\n                        <button type=\"button\" class=\"btn-upload-icon\" [disabled]=\"disabled\"\r\n                            (click)=\"triggerFileSelect($event)\">\r\n                            <i class=\"f-icon f-icon-upload_big\"></i>\r\n                        </button>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n        </ng-container>\r\n    </ng-container>\r\n    <div *ngIf=\"fFileUploadDir&&fFileUploadDir.templateRef\" (click)=\"triggerFileSelect($event)\">\r\n        <ng-container [ngTemplateOutlet]=\"fFileUploadDir.templateRef\" [ngTemplateOutletContext]=\"{'disabled':disabled,'settings':settings,'uploadedCount':uploadedCount}\"></ng-container>\r\n    </div>\r\n    <!--\u5F53\u9009\u4E2D\u6587\u4EF6\u4E4B\u540E\u9690\u85CF-->\r\n    <ng-container *ngIf=\"!fFileUploadDir&&!enableDrop&&enableSelect&&files.length==0\">\r\n        <ng-container *ngTemplateOutlet=\"beforeUploadSupportInfo\"></ng-container>\r\n    </ng-container>\r\n    <!-- <div class=\"ffileupload--common-action\" *ngIf=\"files.length>0\">\r\n    <span class=\"common-action--info\">\u5171<span class=\"text-info mx-1\">{{files.length}}</span>\u4E2A\u6587\u4EF6</span>\r\n   <button type=\"button\" class=\"btn btn-link\" *ngIf=\"!uploadImmediately\">\u4E0A\u4F20\u6240\u6709</button>\r\n</div> -->\r\n    <ul class=\"ffileupload--list\" *ngIf=\"!uploadImmediately\">\r\n        <ng-container *ngFor=\"let fileItem of files\">\r\n            <!-- <ng-container *ngIf=\"!uploadImmediately||fileItem.type!='done'\"> -->\r\n            <li class=\"ffileupload--item\" [@hideUploaded]=\"uploadImmediately&&fileItem.type=='done'?'hide':''\">\r\n                <fieldset class=\"ffileupload--file-wrapper\">\r\n                    <legend>{{fileItem['file'].id}}</legend>\r\n                    <input type=\"hidden\" name=\"ffileupload\" [value]=\"fileItem['file'].nativeFile.name\" />\r\n                    <div class=\"ffileupload--file\"\r\n                        [ngClass]=\"isImage(fileItem['file'].type)?'ffileupload--file-imgpreview':'ffileupload--file-panel'\">\r\n                        <div class=\"ffileupload--action\">\r\n                            <div class=\"ffileupload--action-basic\">\r\n                                <div class=\"action-basic--info\">\r\n                                    <div class=\"action-basic--info-title\" [title]=\"fileItem['file'].nativeFile.name\">{{fileItem['file'].nativeFile.name}}</div>\r\n                                    <div class=\"action-basic--info-byte\">{{formateBytes(fileItem['file'].size)}}</div>\r\n                                </div>\r\n                                <ng-container [ngSwitch]=\"fileItem.type\">\r\n                                    <ng-container *ngSwitchCase=\"'done'\">\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>\u5DF2\u4E0A\u4F20</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn action-btn--done\" title=\"\u5DF2\u4E0A\u4F20\"><i\r\n                                                    class=\"f-icon f-icon-checkmark\"></i></span>\r\n                                            <span class=\"action-basic--action-btn\" title=\"\u5220\u9664\"\r\n                                                (click)=\"removeFile(fileItem['file'].id)\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_delete\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"'start'\">\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>\u4E0A\u4F20\u4E2D</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn uploadpreview-btn--primary\"><i\r\n                                                    class=\"ffile-spin f-icon f-icon-refresh\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>\u5F85\u4E0A\u4F20</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn uploadpreview-btn--primary\" title=\"\u4E0A\u4F20\"\r\n                                                (click)=\"startUpload(fileItem['file'])\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_upload\"></i></span>\r\n                                            <span class=\"action-basic--action-btn\" title=\"\u79FB\u9664\"\r\n                                                (click)=\"cancelUpload(fileItem['file'].id)\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_delete\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n                            </div>\r\n                        </div>\r\n                        <ng-container *ngIf=\"enableImagePreview&&isImage(fileItem['file'].type)\">\r\n                            <f-file-view-image [file]=\"fileItem['file'].nativeFile\"></f-file-view-image>\r\n                        </ng-container>\r\n                    </div>\r\n                </fieldset>\r\n            </li>\r\n            <!-- </ng-container> -->\r\n        </ng-container>\r\n    </ul>\r\n    <div class=\"ffile-load-wrapper\" *ngIf=\"showLoading\">\r\n        <div class=\"loader\"></div>\r\n    </div>\r\n</ng-container>\r\n<ng-template #afterSelectHeader>\r\n    <div class=\"action-wrapper--is-upload\">\r\n        <div class=\"action-wrapper--header-title\"><span class=\"common-action--info\">\u5F85\u4E0A\u4F20<span\r\n                    class=\"mx-1\">{{files.length}}</span>\u4E2A\u6587\u4EF6</span></div>\r\n        <div class=\"action-wrapper--header-right\">\r\n            <button type=\"button\" class=\"btn btn-secondary btn-icontext\" (click)=\"appendNewFiles($event)\">\r\n                <span class=\"f-icon f-icon-add\"></span>\u7EE7\u7EED\u6DFB\u52A0\r\n            </button>\r\n        </div>\r\n        <div class=\"action-wrapper--header-left\">\r\n            <button type=\"button\" class=\"btn btn-primary  mr-2\" (click)=\"startUploadAll()\">\u6279\u91CF\u4E0A\u4F20</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" (click)=\"removelAllUpload()\">\u53D6\u6D88\u4E0A\u4F20</button>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #beforeUploadSupportInfo>\r\n    <div class=\"ffileupload--support-info\">\r\n        <ul class=\"support-info--wrapper\">\r\n            <li *ngIf=\"judgeContentTypeLimit()\">\r\n                <span>\u652F\u6301\u7C7B\u578B\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{allowedContentTypes}}</span>\r\n            </li>\r\n            <li *ngIf=\"judegeFileSizeLimit()\">\r\n                <span>\u5355\u4E2A\u6587\u4EF6\u9650\u5236\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{maxFileSize}}</span>\r\n            </li>\r\n            <li *ngIf=\"maxUploads>0\">\r\n                <span>\u6587\u4EF6\u603B\u6570\u9650\u5236\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{maxUploads}}\u4E2A</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</ng-template>",
                    providers: [FFileUploaderService],
                    animations: [
                        trigger('hideUploaded', [
                            state('show', style({ opacity: 1, height: '*' })),
                            state('hide', style({ opacity: 0, height: 0 })),
                            // transition('* => void', [
                            //   style({ opacity: 1}),
                            //   animate(200, style({ opacity: 0}))
                            // ])
                            transition('* => hide', animate('0.5s'))
                        ])
                    ],
                    styles: [":host{position:relative;display:block;padding:10px;background:#fafcfd;max-width:100%;max-height:100%;outline:0;border:1px dashed #d8dfed;border-radius:3px;font-size:13px;-webkit-transition:height .2s linear;transition:height .2s linear}:host.ffileupload-unvisible{display:none!important}:host.ffileupload-selfdefine{background:0 0;border:none;padding:0}.ffileupload--browser{position:absolute;margin:0;padding:0;left:1em;top:1.75em;width:calc(100% - 2em);opacity:0;font-size:0}:host.ffileupload-default{width:435px}:host.ffileupload-uploading{width:654px}.ffileupload--assist{width:100%;height:0;opacity:0}.drop-wrapper--drop-area{text-align:center;padding:10px 0 0}.drop-wrapper--action{padding:10px 16px 6px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#6a6f79;-webkit-box-pack:center;justify-content:center}.drop-wrapper--drop-area .ffileupload--support-info{padding-top:0}.drop-wrapper--action-label{margin:0}.drop-wrapper--action-select{color:#1e5fb3;margin:0;padding:0 4px;box-shadow:none;outline:0;background:0 0;border:none}.ffileupload--action{cursor:pointer}.drop-wrapper--header{margin-bottom:.5rem!important}.drop-wrapper--append{position:absolute;top:0;left:0;right:0;z-index:100;height:0;background:rgba(250,250,250,.9);border-radius:1rem;overflow:hidden;-webkit-transition:height .2s linear;transition:height .2s linear}.drop-wrapper--append-show{padding:10px;height:210px}.action-wrapper--before-upload{padding:.5rem;text-align:center}.ffileupload--action-wrapper .btn-upload-icon,.ffileupload--drop-wrapper .btn-upload-icon{border:none;outline:0;box-shadow:none;color:#ccd5e1;background:0 0;margin:0 auto .5rem 0;cursor:pointer;padding:0}.ffileupload--action-wrapper .btn-upload-icon:disabled,.ffileupload--drop-wrapper .btn-upload-icon:disabled{cursor:default;opacity:.4}.ffileupload--action-wrapper .btn-upload-icon:hover,.ffileupload--drop-wrapper .btn-upload-icon:hover{color:#1e5fb3}.ffileupload--action-wrapper .btn-upload-icon:disabled:hover,.ffileupload--drop-wrapper .btn-upload-icon:disabled:hover{color:#ccd5e1}.btn-upload-icon .f-icon{font-size:36px;height:36px}.action-wrapper--is-upload{padding:4px 10px 16px;text-align:center;font-size:14px;margin:0 -10px;clear:both;overflow:hidden;position:relative}.action-wrapper--header-title{float:left}.action-wrapper--header-right{text-align:right;float:right;position:relative;z-index:100}.action-wrapper--header-left{float:left;position:relative;z-index:100}.ffileupload--item{margin:0 .625rem .625rem 0;list-style:none;width:100%;max-width:308px}.ffileupload--support-info{padding:0 .5rem .5rem;line-height:1.6;color:#b4bccc;text-align:center}.support-info--wrapper{padding:0;margin:0 auto}.support-info--wrapper li{padding:0;margin:0 4px 0 0;list-style:none;display:inline-block;word-break:break-all}.ffileupload--file-wrapper{border:none;margin:0;padding:0;min-width:0;height:100%;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;position:relative}.ffileupload--file-wrapper>legend{position:absolute;overflow:hidden;height:1px;width:1px;padding:0;border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);white-space:nowrap}.ffileupload--file{position:static;display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;color:#2d2f33;border-radius:3px;overflow:hidden;background:#fff;border:1px solid #e5e8ed;box-shadow:0 2px 4px 0 rgba(220,227,237,.53);max-height:200px;height:100%;box-sizing:content-box}.f-file-view-image{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:100%;width:100%;pointer-events:none;will-change:transform,opacity;border-radius:1rem;min-height:6rem}.ffileupload--action-basic{display:-webkit-box;display:flex;padding:6px 10px;-webkit-box-align:center;align-items:center;min-height:66px}.ffileupload--list{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap;margin-right:-.625rem}.action-basic--info{-webkit-box-flex:1;flex:1 1 auto;white-space:nowrap;overflow:hidden}.action-basic--state{background:#e6f8f9;position:absolute;right:0;top:0;font-size:12px;color:#62c8ca;height:28px;width:56px;border-radius:0 0 0 50px/0 0 0 28px;text-align:right;line-height:24px;padding:0 6px 0 0}.action-basic--info-title{margin:0 0 4px;text-overflow:ellipsis;overflow:hidden}.action-basic--info-byte{color:rgba(45,47,51,.45)}.action-basic--action-btn{text-align:center;background:#c7d4ee;height:18px;width:18px;border-radius:9px;display:inline-block;line-height:18px;-webkit-transition:box-shadow .25s ease-in;transition:box-shadow .25s ease-in}.action-basic--action-btn:hover{box-shadow:0 0 0 .125em rgba(43,135,255,.2);background:#2b87ff}.action-btn--done{background:#51bd78!important;color:#fff}.action-basic--action-btn .f-icon{color:#fff;font-size:12px}.ffileupload--file-panel .ffileupload--action{width:100%}.action-basic--action{position:absolute;right:12px;bottom:14px}.action-basic--action-btn+.action-basic--action-btn{margin-left:12px}.ffileupload--common-action{border-top:1px solid #eaeaea;text-align:center;font-size:14px;margin:0 -10px;padding:4px}.common-action--info{margin:0 16px 0 0;display:inline-block}.common-action--info span{font-size:17px;font-weight:600}.ffileupload--file-imgpreview .ffileupload--action-basic{width:100%;height:100%;position:absolute;z-index:80;background:rgba(255,255,255,.8)}.ffile-spin{-webkit-animation:2s linear infinite fa-spin;animation:2s linear infinite ffile-spin}@-webkit-keyframes ffile-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes ffile-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.ffile-load-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;background:rgba(255,255,255,.4)}.ffile-load-wrapper .loader,.ffile-load-wrapper .loader:after,.ffile-load-wrapper .loader:before{background:#2a87ff;-webkit-animation:1s ease-in-out infinite ffile-load-spin;animation:1s ease-in-out infinite ffile-load-spin;width:2px;height:6px}.ffile-load-wrapper .loader{color:#2a87ff;text-indent:-200em;margin:0 auto;position:relative;font-size:12px;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.ffile-load-wrapper .loader:after,.ffile-load-wrapper .loader:before{position:absolute;top:0;content:''}.ffile-load-wrapper .loader:before{left:-6px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.ffile-load-wrapper .loader:after{left:6px}.ffileupload-default-size{width:432px}@-webkit-keyframes ffile-load-spin{0%,100%,80%{box-shadow:0 0;height:10px}40%{box-shadow:0 -6px;height:18px}}@keyframes ffile-load-spin{0%,100%,80%{box-shadow:0 0;height:10px}40%{box-shadow:0 -6px;height:18px}}"]
                }] }
    ];
    /** @nocollapse */
    FFileUploadComponent.ctorParameters = function () { return [
        { type: FFileUploadAPIService },
        { type: FFileUploaderService },
        { type: NotifyService },
        { type: NgZone }
    ]; };
    FFileUploadComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class.ffileupload',] }],
        visibleState: [{ type: HostBinding, args: ['class.ffileupload-unvisible',] }],
        selfDirectiveDefine: [{ type: HostBinding, args: ['class.ffileupload-selfdefine',] }],
        uploading: [{ type: HostBinding, args: ['class.ffileupload-uploading',] }],
        fFileUploadAssist: [{ type: ViewChild, args: ["uploadAssist",] }],
        fFileUploadDir: [{ type: ContentChild, args: [FFileUploadDirective,] }],
        fileUpload: [{ type: ViewChild, args: [FFileSelectDirective,] }],
        fileDropUpload: [{ type: ViewChild, args: [FFileDropDirective,] }],
        enableImagePreview: [{ type: Input }],
        uploadImmediately: [{ type: Input }],
        uploadedThenHide: [{ type: Input }],
        disabled: [{ type: Input }],
        visible: [{ type: Input }],
        needReset: [{ type: Input }],
        enableDrop: [{ type: Input }],
        dropText: [{ type: Input }],
        enableSelect: [{ type: Input }],
        selectText: [{ type: Input }],
        multiple: [{ type: Input }],
        uploadedCount: [{ type: Input }],
        extendDatas: [{ type: Input }],
        widthThreshold: [{ type: Input }],
        fUploadDoneEvent: [{ type: Output }],
        fUploadRemovedEvent: [{ type: Output }],
        options: [{ type: Input }],
        extendServerConfig: [{ type: Input }]
    };
    return FFileUploadComponent;
}());
export { FFileUploadComponent };
if (false) {
    /** @type {?} */
    FFileUploadComponent.prototype.cls;
    /** @type {?} */
    FFileUploadComponent.prototype.fFileUploadAssist;
    /** @type {?} */
    FFileUploadComponent.prototype.fFileUploadDir;
    /** @type {?} */
    FFileUploadComponent.prototype.fileUpload;
    /** @type {?} */
    FFileUploadComponent.prototype.fileDropUpload;
    /** @type {?} */
    FFileUploadComponent.prototype.enableImagePreview;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadImmediately;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadedThenHide;
    /** @type {?} */
    FFileUploadComponent.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.tVisible;
    /** @type {?} */
    FFileUploadComponent.prototype.needReset;
    /** @type {?} */
    FFileUploadComponent.prototype.enableDrop;
    /** @type {?} */
    FFileUploadComponent.prototype.dropText;
    /** @type {?} */
    FFileUploadComponent.prototype.enableSelect;
    /** @type {?} */
    FFileUploadComponent.prototype.selectText;
    /** @type {?} */
    FFileUploadComponent.prototype.multiple;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadedCount;
    /** @type {?} */
    FFileUploadComponent.prototype.extendDatas;
    /** @type {?} */
    FFileUploadComponent.prototype.widthThreshold;
    /** @type {?} */
    FFileUploadComponent.prototype.fUploadDoneEvent;
    /** @type {?} */
    FFileUploadComponent.prototype.fUploadRemovedEvent;
    /** @type {?} */
    FFileUploadComponent.prototype.allowedContentTypes;
    /** @type {?} */
    FFileUploadComponent.prototype.maxUploads;
    /** @type {?} */
    FFileUploadComponent.prototype.maxFileSize;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.selfUploadOpts;
    /** @type {?} */
    FFileUploadComponent.prototype.files;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadSelectInput;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadDragInput;
    /** @type {?} */
    FFileUploadComponent.prototype.showAppendPanel;
    /** @type {?} */
    FFileUploadComponent.prototype.showLoading;
    /** @type {?} */
    FFileUploadComponent.prototype.settings;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.uploadAPISer;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.fileUploaderSer;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.ngZone;
    /* Skipping unhandled member: ;*/
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZi1maWxlLXVwbG9hZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2V4dGVuZC1maWxlLXVwbG9hZC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3VwbG9hZC9mLWZpbGUtdXBsb2FkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUNoSixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsa0JBQWtCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUV2RyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFFLHFCQUFxQixFQUFFLG9CQUFvQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbEYsT0FBTyxFQUFFLGFBQWEsRUFBaUIsTUFBTSxtQkFBbUIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUzQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkM7SUE2SUUsOEJBQW9CLFlBQW1DLEVBQVUsZUFBcUMsRUFBVSxhQUE0QixFQUFVLE1BQWM7UUFBcEssaUJBUUM7UUFSbUIsaUJBQVksR0FBWixZQUFZLENBQXVCO1FBQVUsb0JBQWUsR0FBZixlQUFlLENBQXNCO1FBQVUsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBdkhsSSxRQUFHLEdBQUcsSUFBSSxDQUFDOztRQXdCcEMsdUJB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QiwwQ0FBNkI7O0lBRTdCLHdDQUF5Qjs7SUFFekIsNkNBQTJCOztJQUUzQiwyQ0FHRTs7SUFFRiw4Q0FBOEI7O0lBRTlCLGdEQUFxRTs7SUFDckUsbURBQXdFOztJQUd4RSxtREFBMEI7O0lBRTFCLDBDQUFlOztJQUVmLDJDQUFxQjs7Ozs7SUFFckIsOENBQTZDOztJQStCN0MscUNBQXNCOztJQUV0QixpREFBNkM7O0lBRTdDLCtDQUEyQzs7SUFFM0MsK0NBQXdCOztJQUV4QiwyQ0FBb0I7O0lBRXBCLHdDQUdFOzs7OztJQUVVLDRDQUEyQzs7Ozs7SUFBRSwrQ0FBNkM7Ozs7O0lBQUUsNkNBQW9DOzs7OztJQUFFLHNDQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgSG9zdEJpbmRpbmcsIFZpZXdDaGlsZCwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIENvbnRlbnRDaGlsZCwgRWxlbWVudFJlZiwgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGRmlsZVNlbGVjdERpcmVjdGl2ZSwgRkZpbGVEcm9wRGlyZWN0aXZlLCBGRmlsZVVwbG9hZERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZS9pbmRleCc7XHJcbmltcG9ydCB7IFVwbG9hZE91dHB1dCwgVXBsb2FkSW5wdXQsIFVwbG9hZEZpbGUsIFVwbG9hZGVyT3B0aW9ucywgRlVwbG9hZEZpbGVFeHRlbmQsIERvY01ldGFQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL21vZGVsL2luZGV4JztcclxuaW1wb3J0IHsgRkZpbGVVdGlscyB9IGZyb20gJy4uLy4uL3V0aWxzL2luZGV4JztcclxuaW1wb3J0IHsgRkZpbGVVcGxvYWRBUElTZXJ2aWNlLCBGRmlsZVVwbG9hZGVyU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvaW5kZXgnO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlLCBOb3RpZnlPcHRpb25zIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcblxyXG5pbXBvcnQgeyB0cmlnZ2VyLCBzdHlsZSwgc3RhdGUsIGFuaW1hdGUsIHRyYW5zaXRpb24gfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcclxuaW1wb3J0IHsgTmdab25lIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZi1maWxlLXVwbG9hZCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2YtZmlsZS11cGxvYWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2YtZmlsZS11cGxvYWQuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW0ZGaWxlVXBsb2FkZXJTZXJ2aWNlXSxcclxuICBhbmltYXRpb25zOiBbXHJcbiAgICB0cmlnZ2VyKCdoaWRlVXBsb2FkZWQnLCBbXHJcbiAgICAgIHN0YXRlKCdzaG93Jywgc3R5bGUoXHJcbiAgICAgICAgeyBvcGFjaXR5OiAxLCBoZWlnaHQ6ICcqJyB9XHJcbiAgICAgICkpLFxyXG4gICAgICBzdGF0ZSgnaGlkZScsIHN0eWxlKFxyXG4gICAgICAgIHsgb3BhY2l0eTogMCwgaGVpZ2h0OiAwIH1cclxuICAgICAgKSksXHJcbiAgICAgIC8vIHRyYW5zaXRpb24oJyogPT4gdm9pZCcsIFtcclxuICAgICAgLy8gICBzdHlsZSh7IG9wYWNpdHk6IDF9KSxcclxuICAgICAgLy8gICBhbmltYXRlKDIwMCwgc3R5bGUoeyBvcGFjaXR5OiAwfSkpXHJcbiAgICAgIC8vIF0pXHJcbiAgICAgIHRyYW5zaXRpb24oJyogPT4gaGlkZScsIGFuaW1hdGUoJzAuNXMnKSlcclxuICAgIF0pXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRkZpbGVVcGxvYWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MuZmZpbGV1cGxvYWQnKSBjbHMgPSB0cnVlO1xyXG4gIC8vIOS4jeWPr+ingVxyXG4gIEBIb3N0QmluZGluZygnY2xhc3MuZmZpbGV1cGxvYWQtdW52aXNpYmxlJykgZ2V0IHZpc2libGVTdGF0ZSgpIHtcclxuICAgIHJldHVybiAhdGhpcy52aXNpYmxlO1xyXG4gIH1cclxuICAvLyDoh6rlrprkuYnmoLflvI9cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZmaWxldXBsb2FkLXNlbGZkZWZpbmUnKSBnZXQgc2VsZkRpcmVjdGl2ZURlZmluZSgpIHtcclxuICAgIGlmICh0aGlzLmZGaWxlVXBsb2FkRGlyKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZmaWxldXBsb2FkLXVwbG9hZGluZycpIGdldCB1cGxvYWRpbmcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5maWxlcy5sZW5ndGggPiAwO1xyXG4gIH1cclxuXHJcbiAgLy8g5LiN6IO95ZyoQ29uc3RydWN06YeM6L+95YqgZWxcclxuICBAVmlld0NoaWxkKFwidXBsb2FkQXNzaXN0XCIpIGZGaWxlVXBsb2FkQXNzaXN0OiBFbGVtZW50UmVmO1xyXG4gIC8vIOiHquWumuS5ieaMh+S7pFxyXG4gIEBDb250ZW50Q2hpbGQoRkZpbGVVcGxvYWREaXJlY3RpdmUpIGZGaWxlVXBsb2FkRGlyOiBhbnk7XHJcbiAgLy8gXHJcbiAgQFZpZXdDaGlsZChGRmlsZVNlbGVjdERpcmVjdGl2ZSkgZmlsZVVwbG9hZDogRkZpbGVTZWxlY3REaXJlY3RpdmU7XHJcbiAgQFZpZXdDaGlsZChGRmlsZURyb3BEaXJlY3RpdmUpIGZpbGVEcm9wVXBsb2FkOiBGRmlsZURyb3BEaXJlY3RpdmU7XHJcbiAgLy8g5ZCv55So5Zu+54mH6aKE6KeIXHJcbiAgQElucHV0KCkgZW5hYmxlSW1hZ2VQcmV2aWV3ID0gdHJ1ZTtcclxuICAvLyDlkK/nlKjnq4vljbPkuIrkvKBcclxuICBASW5wdXQoKSB1cGxvYWRJbW1lZGlhdGVseSA9IGZhbHNlO1xyXG4gIC8vIOS4iuS8oOWujOaIkOWQjumakOiXj1xyXG4gIEBJbnB1dCgpIHVwbG9hZGVkVGhlbkhpZGUgPSB0cnVlO1xyXG4gIC8vIOemgeeUqOeKtuaAgVxyXG4gIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSB0VmlzaWJsZSA9IHRydWU7XHJcbiAgLy8g5piv5ZCm5Y+v6KeBXHJcbiAgQElucHV0KClcclxuICBzZXQgdmlzaWJsZSh2YWx1ZSkge1xyXG4gICAgdGhpcy50VmlzaWJsZSA9IHZhbHVlO1xyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCB2aXNpYmxlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudFZpc2libGU7XHJcbiAgfVxyXG4gIC8vIOmcgOimgemHjee9rizpgJrov4fkuI3mlq3nmoTotYvlgLzmnaXmlLnlj5hcclxuICBASW5wdXQoKSBuZWVkUmVzZXQ6IE9ic2VydmFibGU8YW55PiA9IG5ldyBTdWJqZWN0KCk7O1xyXG4gIC8vIOWQr+eUqOaLluaLvVxyXG4gIEBJbnB1dCgpIGVuYWJsZURyb3AgPSBmYWxzZTtcclxuICBASW5wdXQoKSBkcm9wVGV4dCA9IFwi5Y+v5bCG5paH5Lu25ouW5ou95q2k5aSEXCJcclxuICAvLyDlkK/nlKjpgInmi6nmlofku7bmjInpkq5cclxuICBASW5wdXQoKSBlbmFibGVTZWxlY3QgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHNlbGVjdFRleHQgPSBcIueCueWHu+S4iuS8oFwiO1xyXG4gIC8vIOWQr+eUqOWkmumAiVxyXG4gIEBJbnB1dCgpIG11bHRpcGxlID0gdHJ1ZTtcclxuICAvLyDlt7Lnu4/kuIrkvKDmlofku7ZcclxuICBASW5wdXQoKSB1cGxvYWRlZENvdW50ID0gMDtcclxuICAvLyDlhazlhbHnmoTmianlsZXmlbDmja5cclxuICBASW5wdXQoKSBleHRlbmREYXRhczoge1xyXG4gICAgW2tleTogc3RyaW5nXTogYW55LFxyXG4gICAgZXh0UHJvcGVydHk/OiBEb2NNZXRhUHJvcGVydHkgfCBudWxsIC8vXHJcbiAgfTtcclxuICAvLyDlrr3luqbpmIjlgLzvvIzlvZPlrr3luqbotoXov4c3NjDml7blgJnvvIzmsqHmnInpmYTku7bkuIrkvKDml7bvvIzlrr3luqbmmK/lm7rlrprlgLzvvIzmnInpmYTku7bkuIrkvKDml7bvvIzmnInmnIDlpKflrr3luqblgLxcclxuICBASW5wdXQoKSB3aWR0aFRocmVzaG9sZCA9IDc2MDtcclxuICAvLyDkuIrkvKDlkozliKDpmaTlr7nlpJbmipvlh7rnmoTkuovku7ZcclxuICBAT3V0cHV0KCkgZlVwbG9hZERvbmVFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8RlVwbG9hZEZpbGVFeHRlbmRbXT4oKTtcclxuICBAT3V0cHV0KCkgZlVwbG9hZFJlbW92ZWRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8RlVwbG9hZEZpbGVFeHRlbmRbXT4oKTtcclxuXHJcbiAgLy8g5YWB6K645LiK5Lyg55qE5paH5Lu257G75Z6LXHJcbiAgYWxsb3dlZENvbnRlbnRUeXBlcyA9ICcqJztcclxuICAvLyDpu5jorqTkuI3pmZDliLbpmYTku7bkuIrkvKDkuKrmlbBcclxuICBtYXhVcGxvYWRzID0gMDtcclxuICAvLyDljZXkvY1LQu+8jOm7mOiupOaYrzEyTVxyXG4gIG1heEZpbGVTaXplID0gJzEyTUInO1xyXG5cclxuICBwcml2YXRlIHNlbGZVcGxvYWRPcHRzOiBVcGxvYWRlck9wdGlvbnMgPSB7fTtcclxuICAvLyDkuIrkvKDphY3nva7poblcclxuICBASW5wdXQoKVxyXG4gIHNldCBvcHRpb25zKHVwbG9hZE9wdHM6IFVwbG9hZGVyT3B0aW9ucykge1xyXG4gICAgaWYgKHVwbG9hZE9wdHMpIHtcclxuICAgICAgaWYgKHVwbG9hZE9wdHMuaGFzT3duUHJvcGVydHkoJ2FsbG93ZWRDb250ZW50VHlwZXMnKSkge1xyXG4gICAgICAgIHRoaXMuYWxsb3dlZENvbnRlbnRUeXBlcyA9IHVwbG9hZE9wdHMuYWxsb3dlZENvbnRlbnRUeXBlcy5qb2luKCcsJyk7XHJcbiAgICAgICAgdGhpcy5hbGxvd2VkQ29udGVudFR5cGVzID0gdGhpcy5hbGxvd2VkQ29udGVudFR5cGVzID09ICcnID8gJyonIDogdGhpcy5hbGxvd2VkQ29udGVudFR5cGVzO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh1cGxvYWRPcHRzLmhhc093blByb3BlcnR5KCdtYXhVcGxvYWRzJykpIHtcclxuICAgICAgICB0aGlzLm1heFVwbG9hZHMgPSB1cGxvYWRPcHRzLm1heFVwbG9hZHM7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVwbG9hZE9wdHMuaGFzT3duUHJvcGVydHkoJ21heEZpbGVTaXplJykpIHtcclxuICAgICAgICB0aGlzLm1heEZpbGVTaXplID0gRkZpbGVVdGlscy5odW1hbml6ZUJ5dGVzKDEwMjQgKiAxMDI0ICogdXBsb2FkT3B0cy5tYXhGaWxlU2l6ZSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZWxmVXBsb2FkT3B0cyA9IE9iamVjdC5hc3NpZ24odGhpcy5zZWxmVXBsb2FkT3B0cywgdXBsb2FkT3B0cyk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBnZXQgb3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGZVcGxvYWRPcHRzO1xyXG4gIH1cclxuICAvKipcclxuICAqIOavj+S4que7hOWPr+S7peiuvue9rueJueauiuacjeWKoeWPguaVsO+8jOadpeimhueblum7mOiupOeahOe7n+S4gOaooeWdl+e6p+mFjee9rlxyXG4gICovXHJcbiAgQElucHV0KClcclxuICBzZXQgZXh0ZW5kU2VydmVyQ29uZmlnKGNvbmZpZzogYW55KSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgIHRoaXMuZmlsZVVwbG9hZGVyU2VyLnNldEV4dGVuZFNlcnZlckNvbmZpZyhjb25maWcpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyDorrDlvZXmlofku7bkuKrmlbBcclxuICBmaWxlczogVXBsb2FkT3V0cHV0W107XHJcbiAgLy8g5qCH6K6w6YCa6L+H6YCJ5oup5oyJ6ZKu5aSE55CG55qE5LqL5Lu2XHJcbiAgdXBsb2FkU2VsZWN0SW5wdXQ6IEV2ZW50RW1pdHRlcjxVcGxvYWRJbnB1dD47XHJcbiAgLy8g5qCH6K6w6YCa6L+H5ouW5ou95aSE55CG55qE5LqL5Lu2XHJcbiAgdXBsb2FkRHJhZ0lucHV0OiBFdmVudEVtaXR0ZXI8VXBsb2FkSW5wdXQ+O1xyXG4gIC8vIOaOp+WItuaYr+WQpuaYvuekuui/veWKoOmZhOS7tueahOmdouadv1xyXG4gIHNob3dBcHBlbmRQYW5lbCA9IGZhbHNlO1xyXG4gIC8vIOaYvuekumxvYWRpbmdcclxuICBzaG93TG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICBzZXR0aW5ncyA9IHtcclxuICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLFxyXG4gICAgdmlzaWJsZTogdGhpcy52aXNpYmxlXHJcbiAgfTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB1cGxvYWRBUElTZXI6IEZGaWxlVXBsb2FkQVBJU2VydmljZSwgcHJpdmF0ZSBmaWxlVXBsb2FkZXJTZXI6IEZGaWxlVXBsb2FkZXJTZXJ2aWNlLCBwcml2YXRlIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2UsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHtcclxuICAgIHRoaXMuZmlsZXMgPSBbXTtcclxuICAgIHRoaXMudXBsb2FkU2VsZWN0SW5wdXQgPSBuZXcgRXZlbnRFbWl0dGVyPFVwbG9hZElucHV0PigpO1xyXG4gICAgdGhpcy51cGxvYWREcmFnSW5wdXQgPSBuZXcgRXZlbnRFbWl0dGVyPFVwbG9hZElucHV0PigpO1xyXG4gICAgLy8g6YeN572uXHJcbiAgICB0aGlzLm5lZWRSZXNldC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICAvLyDmqKHmnb/nmoTmg4XlhrXkuIvlj6rog73mmK/nq4vljbPkuIrkvKBcclxuICAgIGlmICh0aGlzLmZGaWxlVXBsb2FkRGlyKSB7XHJcbiAgICAgIHRoaXMudXBsb2FkSW1tZWRpYXRlbHkgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb21wdXRlV2lkdGhUaHJlc2hvbGQoKTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICog6KeG5Zu+5Yid5aeL5YyW5ZCOXHJcbiAgKi9cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcblxyXG4gIH1cclxuICAvKipcclxuICAgKiDop6blj5Hnu5HlrppcclxuICAgKi9cclxuICB0cmlnZ2VyRmlsZVNlbGVjdChldikge1xyXG4gICAgZXYgJiYgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAvLyDnpoHnlKjml7ZcclxuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMuZmlsZVVwbG9hZC5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6YCJ5oup6ZmE5Lu25oyJ6ZKu77yM5aSE55CG5oqb5Ye65LqL5Lu2XHJcbiAgICogQHBhcmFtIG91dHB1dCBcclxuICAgKi9cclxuICBzZWxlY3RVcGxvYWRPdXRwdXQob3V0cHV0OiBVcGxvYWRPdXRwdXQpOiB2b2lkIHtcclxuICAgIHRoaXMudXBsb2FkT3V0cHV0SGFuZGxlcihvdXRwdXQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmi5bmi73ljLrln5/lpITnkIbmipvlh7rkuovku7ZcclxuICAgKiBAcGFyYW0gb3V0cHV0IFxyXG4gICAqL1xyXG4gIGRyb3BVcGxvYWRPdXRwdXQob3V0cHV0OiBVcGxvYWRPdXRwdXQpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmVuYWJsZVNlbGVjdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyDmmoLkuI3lpITnkIbmi5bmi73nmoTkuovku7ZcclxuICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2RyYWdPdmVyJyAmJiBvdXRwdXQudHlwZSAhPT0gJ2RyYWdPdXQnICYmIG91dHB1dC50eXBlICE9PSAnZHJvcCcpIHtcclxuICAgICAgdGhpcy51cGxvYWRPdXRwdXRIYW5kbGVyKG91dHB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGFsbEFkZGVkVG9RdWV1ZSDpgInkuK3mlofku7bov73liqDliLDpmJ/liJdcclxuICAgKiBAcGFyYW0gb3V0cHV0IFxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBsb2FkT3V0cHV0SGFuZGxlcihvdXRwdXQ6IFVwbG9hZE91dHB1dCk6IHZvaWQge1xyXG5cclxuICAgIC8vIOaYvuekuui/veWKoOmdouadv1xyXG4gICAgaWYgKHRoaXMuc2hvd0FwcGVuZFBhbmVsKSB7XHJcbiAgICAgIHRoaXMuc2hvd0FwcGVuZFBhbmVsID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG91dHB1dC50eXBlID09PSAnYWRkZWRUb1F1ZXVlJyAmJiB0eXBlb2Ygb3V0cHV0LmZpbGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMuZmlsZXMucHVzaCh7IHR5cGU6IG91dHB1dC50eXBlLCBmaWxlOiBvdXRwdXQuZmlsZSB9KTtcclxuICAgICAgLy8g5aaC5p6c5ZCv55So56uL5Y2z5LiK5LygXHJcbiAgICAgIGlmICh0aGlzLnVwbG9hZEltbWVkaWF0ZWx5KSB7XHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdGFydFVwbG9hZChvdXRwdXQuZmlsZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdzdGFydCcpIHtcclxuICAgICAgLy8g5byA5aeL5LiK5LygXHJcbiAgICAgIHRoaXMudXBkYXRlRmlsZXNTdGF0ZShvdXRwdXQsICcnKTtcclxuICAgIH0gZWxzZSBpZiAob3V0cHV0LnR5cGUgPT0gJ2RvbmUnKSB7XHJcbiAgICAgIC8vIOS4iuS8oOWujOaIkFxyXG4gICAgICB0aGlzLnVwZGF0ZUZpbGVzU3RhdGUob3V0cHV0LCAnZG9uZScpO1xyXG4gICAgICB0aGlzLmZVcGxvYWREb25lRXZlbnQuZW1pdChGRmlsZVV0aWxzLmNoYW5nZVVwbG9hZEZpbGVUb0ZpbGVFeHRlbmQob3V0cHV0LmZpbGVzKSk7XHJcbiAgICAgIHRoaXMuaGlkZUFmdGVyTG9hZGVkKG91dHB1dCk7XHJcbiAgICAgIC8vIOmakOiXj+ato+WcqOWKoOi9vVxyXG4gICAgICBpZiAodGhpcy51cGxvYWRJbW1lZGlhdGVseSAmJiB0aGlzLnNob3dMb2FkaW5nICYmIHRoaXMuYWxsRmlsZVVwbG9hZGVkKCkpIHtcclxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnY2FuY2VsbGVkJyB8fCBvdXRwdXQudHlwZSA9PT0gJ3JlbW92ZWQnIHx8IG91dHB1dC50eXBlID09ICdlcnJvcicpIHtcclxuICAgICAgLy8g5Yig6Zmk5oiW6ICF56e76Zmk5paH5Lu2XHJcbiAgICAgIHRoaXMuZmlsZXMgPSB0aGlzLmZpbGVzLmZpbHRlcigoZmlsZU91dHB1dDogVXBsb2FkT3V0cHV0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5maWxlcy5maW5kSW5kZXgoaXRlbSA9PiBmaWxlT3V0cHV0LmZpbGUuaWQgPT0gaXRlbS5pZCkgPCAwO1xyXG4gICAgICB9KTtcclxuICAgICAgLy8g6ZqQ6JeP5q2j5Zyo5Yqg6L29XHJcbiAgICAgIGlmICh0aGlzLnVwbG9hZEltbWVkaWF0ZWx5ICYmIHRoaXMuc2hvd0xvYWRpbmcgJiYgdGhpcy5hbGxGaWxlVXBsb2FkZWQoKSkge1xyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNob3dOb3RpZnkob3V0cHV0KTtcclxuICAgIH0gZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWplY3RlZCcgJiYgdHlwZW9mIG91dHB1dC5maWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAvLyDkuIrkvKDooqvmi5Lnu51cclxuICAgICAgdGhpcy5zaG93Tm90aWZ5KG91dHB1dCk7XHJcbiAgICAgIC8vIOmakOiXj+ato+WcqOWKoOi9vVxyXG4gICAgICBpZiAodGhpcy51cGxvYWRJbW1lZGlhdGVseSAmJiB0aGlzLnNob3dMb2FkaW5nICYmIHRoaXMuYWxsRmlsZVVwbG9hZGVkKCkpIHtcclxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBzaG93Tm90aWZ5KG91dHB1dCkge1xyXG4gICAgbGV0IG5vdGlmeVR5cGUgPSAnd2FybmluZyc7XHJcbiAgICBpZiAob3V0cHV0LnR5cGUgPT0gJ2NhbmNlbGxlZCcgfHwgb3V0cHV0LnR5cGUgPT0gJ3JlbW92ZWQnKSB7XHJcbiAgICAgIG5vdGlmeVR5cGUgPSAnc3VjY2Vzcyc7XHJcbiAgICB9XHJcbiAgICBsZXQgbWVzc2FnZSA9IG91dHB1dC5oYXNPd25Qcm9wZXJ0eSgnbWVzc2FnZScpID8gb3V0cHV0WydtZXNzYWdlJ10gOiAnJztcclxuICAgIHRoaXMubm90aWZ5U2VydmljZVtub3RpZnlUeXBlXSg8Tm90aWZ5T3B0aW9ucz57XHJcbiAgICAgIG1zZzogbWVzc2FnZSwgdGltZW91dDogMzAwMFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vIOWIpOaWreaYr+WQpuaJgOacieaWh+S7tumDveW3suS4iuS8oFxyXG4gIHByaXZhdGUgYWxsRmlsZVVwbG9hZGVkKCkge1xyXG4gICAgbGV0IGZpbmROb3REb25lSW5kZXggPSB0aGlzLmZpbGVzLmZpbmRJbmRleChpdGVtID0+IHtcclxuICAgICAgbGV0IGRvbmVUeXBlcyA9IFsnZG9uZScsICdjYW5jZWxsZWQnLCAncmVtb3ZlZCddO1xyXG4gICAgICBsZXQgZmluZFR5cGVJbmRleCA9IGRvbmVUeXBlcy5maW5kSW5kZXgodHlwZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT0gaXRlbS50eXBlO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGZpbmRUeXBlSW5kZXggPT0gLTE7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmaW5kTm90RG9uZUluZGV4ID09IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmm7TmlrDpmYTku7bnmoTnirbmgIFcclxuICAgKiBAcGFyYW0gb3V0cHV0IFxyXG4gICAqIEBwYXJhbSBldmVudFR5cGUgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVGaWxlc1N0YXRlKG91dHB1dDogVXBsb2FkT3V0cHV0LCBldmVudFR5cGUpIHtcclxuICAgIGxldCBzdGFydEZpbGVzID0gW107XHJcbiAgICBpZiAob3V0cHV0Lmhhc093blByb3BlcnR5KCdmaWxlcycpICYmIG91dHB1dC5maWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIOatpOWkhOabtOaWsOeVjOmdouWPr+iDveacieaAp+iDvemXrumimFxyXG4gICAgICBzdGFydEZpbGVzID0gb3V0cHV0LmZpbGVzO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3V0cHV0LmZpbGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHN0YXJ0RmlsZXMgPSBbb3V0cHV0LmZpbGVdXHJcbiAgICB9XHJcbiAgICBldmVudFR5cGUgPSBldmVudFR5cGUgPyBldmVudFR5cGUgOiBvdXRwdXQudHlwZTtcclxuICAgIHN0YXJ0RmlsZXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmlsZXMuZmluZEluZGV4KGZpbGVPdXRwdXQgPT4gdHlwZW9mIGl0ZW0gIT09ICd1bmRlZmluZWQnICYmIGZpbGVPdXRwdXQuZmlsZS5pZCA9PT0gaXRlbS5pZCk7XHJcbiAgICAgIC8vIOWPmOabtOeKtuaAgVxyXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIHRoaXMuZmlsZXNbaW5kZXhdID0geyB0eXBlOiBldmVudFR5cGUsIGZpbGU6IGl0ZW0gfTtcclxuICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKuWNleS4quaWh+S7tuS4iuS8oCAqL1xyXG4gIHN0YXJ0VXBsb2FkKGZpbGU6IFVwbG9hZEZpbGUpOiB2b2lkIHtcclxuICAgIC8qKlxyXG4gICAgKiBUb2RvOuWQjue7reWPr+S7peS7juS4iuS8oOWMuuWdl+S4iuWPluWGheWuuei/m+ihjOaJqeWxlVxyXG4gICAgKi9cclxuICAgIGNvbnN0IGV2ZW50OiBVcGxvYWRJbnB1dCA9IHRoaXMudXBsb2FkQVBJU2VyLmdldEFzc2lnbkFQSSgndXBsb2FkJywgeyBmaWxlOiBmaWxlLCB0eXBlOiAndXBsb2FkJywgZGF0YTogdGhpcy5leHRlbmREYXRhcyB9KTtcclxuICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDkuIrkvKDmiYDmnIlcclxuICAgKi9cclxuICBzdGFydFVwbG9hZEFsbCgpOiB2b2lkIHtcclxuICAgIC8qKlxyXG4gICAgICogIFRvZG/vvJrlkI7nu63vvIzlpoLmnpzmr4/kuKrmlbDmja7kuI3kuIDmoLfvvIzmraTlpITnmoTmlbDmja7lvpfph43mlrDlvZLpm4ZcclxuICAgICAqL1xyXG4gICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKCd1cGxvYWRBbGwnLCB7IHR5cGU6ICd1cGxvYWRBbGwnLCBmaWxlczogW10sIGRhdGE6IHRoaXMuZXh0ZW5kRGF0YXMgfSk7XHJcbiAgICB0aGlzLmlucHV0VXBsb2FkRXZlbnRFbWl0KGV2ZW50KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5bey5LiK5Lyg6ZqQ6JeP5bGe5oCnXHJcbiAgICovXHJcbiAgaGlkZUFmdGVyTG9hZGVkKG91dHB1dDogVXBsb2FkT3V0cHV0KTogdm9pZCB7XHJcbiAgICAvL+S4iuS8oOWujOaIkOWQjuWIoOmZpFxyXG4gICAgaWYgKHRoaXMudXBsb2FkZWRUaGVuSGlkZSkge1xyXG4gICAgICAvLyB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vIOWIoOmZpOaIluiAheenu+mZpOaWh+S7tlxyXG4gICAgICAgIGxldCBpZHMgPSBvdXRwdXQuZmlsZXMubWFwKGZpbGVJdGVtID0+IGZpbGVJdGVtLmlkKTtcclxuICAgICAgICB0aGlzLmZpbGVzID0gdGhpcy5maWxlcy5maWx0ZXIoKGZpbGVPdXRwdXQ6IFVwbG9hZE91dHB1dCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHRJbmRleCA9IGlkcy5maW5kSW5kZXgodElkID0+IHRJZCA9PSBmaWxlT3V0cHV0LmZpbGUuaWQpO1xyXG4gICAgICAgICAgcmV0dXJuIHRJbmRleCA+IC0xID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBldmVudDogVXBsb2FkSW5wdXQgPSB0aGlzLnVwbG9hZEFQSVNlci5nZXRBc3NpZ25BUEkoJ2hpZGUnLCB7IHR5cGU6ICdoaWRlJywgaWQ6IGlkcy5qb2luKCcsJykgfSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dFVwbG9hZEV2ZW50RW1pdChldmVudCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgICAvLyB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Y+W5raI5LiK5LygXHJcbiAgICovXHJcbiAgY2FuY2VsVXBsb2FkKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGNvbnN0IGV2ZW50OiBVcGxvYWRJbnB1dCA9IHRoaXMudXBsb2FkQVBJU2VyLmdldEFzc2lnbkFQSSgnY2FuY2VsJywgeyBpZDogaWQsIHR5cGU6ICdjYW5jZWwnIH0pO1xyXG4gICAgdGhpcy5pbnB1dFVwbG9hZEV2ZW50RW1pdChldmVudCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWIoOmZpOW3suS4iuS8oOaWh+S7tlxyXG4gICAqL1xyXG4gIHJlbW92ZWxBbGxVcGxvYWQoKTogdm9pZCB7XHJcbiAgICBjb25zdCBldmVudDogVXBsb2FkSW5wdXQgPSB0aGlzLnVwbG9hZEFQSVNlci5nZXRBc3NpZ25BUEkoJ3JlbW92ZUFsbCcsIHsgdHlwZTogJ3JlbW92ZUFsbCcsIGZpbGVzOiBbXSB9KTtcclxuICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG5cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yig6Zmk5bey5LiK5Lyg5paH5Lu2XHJcbiAgKi9cclxuICByZW1vdmVGaWxlKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGNvbnN0IGV2ZW50OiBVcGxvYWRJbnB1dCA9IHRoaXMudXBsb2FkQVBJU2VyLmdldEFzc2lnbkFQSSgncmVtb3ZlJywgeyBpZDogaWQsIHR5cGU6ICdyZW1vdmUnIH0pO1xyXG4gICAgdGhpcy5pbnB1dFVwbG9hZEV2ZW50RW1pdChldmVudCk7XHJcbiAgfVxyXG4gIC8qKiAqL1xyXG4gIC8qKlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBieXRlcyBcclxuICAgKi9cclxuICBmb3JtYXRlQnl0ZXMoYnl0ZXMpIHtcclxuICAgIHJldHVybiBGRmlsZVV0aWxzLmh1bWFuaXplQnl0ZXMoYnl0ZXMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDliKTmlq3mmK/lm77niYdcclxuICAgKiBAcGFyYW0gdHlwZSBcclxuICAgKi9cclxuICBpc0ltYWdlKHR5cGUpIHtcclxuICAgIHJldHVybiB0eXBlLmluZGV4T2YoJ2ltYWdlJykgPiAtMTtcclxuICB9XHJcbiAgLy8gaW5Qcm9ncmVzcyhwcm9ncmVzcykge1xyXG4gIC8vICAgY29uc29sZS5sb2coJ+i/m+WFpWluUHJvZ3Jlc3MnKTtcclxuICAvLyAgIGlmIChwcm9ncmVzcy5kYXRhLnBlcmNlbnRhZ2UgPT0gMTAwKSB7XHJcbiAgLy8gICAgIHJldHVybiAnZG9uZSdcclxuICAvLyAgIH1cclxuICAvLyAgIGlmIChwcm9ncmVzcy5kYXRhLnBlcmNlbnRhZ2UgPT0gMCkge1xyXG4gIC8vICAgICByZXR1cm4gJ3VwbG9hZGknO1xyXG4gIC8vICAgfVxyXG4gIC8vICAgcmV0dXJuICdwcm9ncmVzcyc7XHJcbiAgLy8gfVxyXG5cclxuICAvKipcclxuICAgKiDmmK/lkKbliKTmlq3mnInnsbvlnovpmZDliLZcclxuICAgKi9cclxuICBqdWRnZUNvbnRlbnRUeXBlTGltaXQoKSB7XHJcbiAgICBsZXQgdFR5cGVzID0gdGhpcy5hbGxvd2VkQ29udGVudFR5cGVzLnNwbGl0KCcsJyk7XHJcbiAgICBsZXQgaGFzQWxsSW5kZXggPSB0VHlwZXMuZmluZEluZGV4KGl0ZW0gPT4ge1xyXG4gICAgICByZXR1cm4gaXRlbSA9PSAnKic7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBoYXNBbGxJbmRleCA9PSAtMTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yik5pat5piv5ZCm5pyJ5paH5Lu25aSn5bCP55qE6ZmQ5Yi2XHJcbiAgICovXHJcbiAganVkZWdlRmlsZVNpemVMaW1pdCgpIHtcclxuICAgIHJldHVybiB0aGlzLm1heEZpbGVTaXplICE9ICcwIEJ5dGUnXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOi/veWKoFxyXG4gICAqL1xyXG4gIGFwcGVuZE5ld0ZpbGVzKGV2KSB7XHJcbiAgICAvL+WQr+eUqOaLluaLvVxyXG4gICAgaWYgKHRoaXMuZW5hYmxlRHJvcCkge1xyXG4gICAgICB0aGlzLnNob3dBcHBlbmRQYW5lbCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBldiAmJiBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy50cmlnZ2VyRmlsZVNlbGVjdChldik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWFs+mXrei/veWKoOmdouadv1xyXG4gICAqL1xyXG4gIGNsb3NlQXBwZW5kUGFuZWwoKSB7XHJcbiAgICB0aGlzLnNob3dBcHBlbmRQYW5lbCA9IGZhbHNlO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDnu5/kuIDop6blj5Eg6ZmE5Lu26YCJ5oup5ZKM5ouW5ou96ZmE5Lu255qE5LqL5Lu2XHJcbiAgICogQHBhcmFtIGV2IFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5wdXRVcGxvYWRFdmVudEVtaXQoZXY6IFVwbG9hZElucHV0KSB7XHJcbiAgICAvLyDlpoLmnpzmlofku7bkuIrkvKDlkK/nlKhcclxuICAgIGlmICh0aGlzLmVuYWJsZVNlbGVjdCkge1xyXG4gICAgICB0aGlzLnVwbG9hZFNlbGVjdElucHV0LmVtaXQoZXYpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51cGxvYWREcmFnSW5wdXQuZW1pdChldik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOmHjee9ruaWueazlVxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5maWxlcyA9IFtdO1xyXG4gICAgLy8g5aaC5p6c5paH5Lu25LiK5Lyg5ZCv55SoXHJcbiAgICBpZiAodGhpcy5lbmFibGVTZWxlY3QpIHtcclxuICAgICAgdGhpcy5maWxlVXBsb2FkICYmIHRoaXMuZmlsZVVwbG9hZC5yZXNldCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5maWxlRHJvcFVwbG9hZCAmJiB0aGlzLmZpbGVEcm9wVXBsb2FkLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbXB1dGVXaWR0aFRocmVzaG9sZCgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDorqHnrpfpmIjlgLxcclxuICAgKi9cclxuICBwcml2YXRlIGNvbXB1dGVXaWR0aFRocmVzaG9sZCgpIHtcclxuICAgIC8vXHJcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgbGV0IHROZWVkQ29tcHV0ZWRDbHMgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc2VsZi5mRmlsZVVwbG9hZERpciB8fCAhc2VsZi52aXNpYmxlKSB7XHJcbiAgICAgICAgICB0TmVlZENvbXB1dGVkQ2xzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiuoeeul+WFg+e0oFxyXG4gICAgICAgIGxldCBhc3Npc3RFbCA9IHNlbGYuZkZpbGVVcGxvYWRBc3Npc3QgPyBzZWxmLmZGaWxlVXBsb2FkQXNzaXN0Lm5hdGl2ZUVsZW1lbnQgOiBudWxsO1xyXG4gICAgICAgIC8vIOi2hei/h+mYiOWAvFxyXG4gICAgICAgIGlmIChhc3Npc3RFbCAmJiBhc3Npc3RFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IHNlbGYud2lkdGhUaHJlc2hvbGQpIHtcclxuICAgICAgICAgIHROZWVkQ29tcHV0ZWRDbHMgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0TmVlZENvbXB1dGVkQ2xzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhc3Npc3RFbCkge1xyXG4gICAgICAgICAgbGV0IGFjdGlvbkZ1biA9IHROZWVkQ29tcHV0ZWRDbHMgPyAnYWRkJyA6ICdyZW1vdmUnO1xyXG4gICAgICAgICAgYXNzaXN0RWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3RbYWN0aW9uRnVuXSgnZmZpbGV1cGxvYWQtZGVmYXVsdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl19