/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
* @Author: 疯狂秀才(lucas huang)
* @Date: 2018-11-23 11:23:12
* @LastEditors: 疯狂秀才(Lucas Huang)
* @LastEditTime: 2020-10-20 20:18:26
* @Company: Inspur
* @Version: v0.3.x
*/
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2 } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { of, Subject } from 'rxjs';
import { LocaleService } from '@farris/ui-locale';
import { MessagerService } from '@farris/ui-messager';
import { LoadingService } from '@farris/ui-loading';
import { DataTableComponent } from '@farris/ui-datatable';
import { TreeTableComponent } from '@farris/ui-treetable';
import { LayoutPanelComponent } from '@farris/ui-layout';
import { CommonUtils, FarrisComponentInstanceService } from '@farris/ui-common';
import { ShortcutsService } from '@farris/ui-shortcuts';
import { InputGroupComponent } from '@farris/ui-input-group';
import { NotifyService } from '@farris/ui-notify';
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType } from './lookup-displaytype';
import { LookupComponent } from './lookup.component';
import { lookupGridDefaults, displayInfoDefault } from './lookup-grid-options';
import { ServerSideToken } from './http/ILookupHttpService';
import { LookupDefaultMapping } from './lookup-defaut-mapping';
import { LookupUtils } from './utils';
import { PersonalConfigService } from './lookup-presonalConfig.service';
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService } from './services';
import { map } from 'rxjs/operators';
import { EventManager } from '@angular/platform-browser';
/** @type {?} */
export var LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return LookupGridComponent; })),
    multi: true
};
var LookupGridComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LookupGridComponent, _super);
    function LookupGridComponent(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        var _this = _super.call(this, injector, el, changeDetector) || this;
        _this.injector = injector;
        _this.cfr = cfr;
        _this.el = el;
        _this.utils = utils;
        _this.defaultMapping = defaultMapping;
        _this.changeDetector = changeDetector;
        _this.shortcuts = shortcuts;
        _this.lookupUtils = lookupUtils;
        _this.zone = zone;
        _this.render2 = render2;
        _this.groupIcon = INPUT_GROUP_ICON;
        _this._displayType = '';
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        _this.customDisplayType = false;
        _this.viewType = 'text';
        /**
         * 启用清空按钮
         */
        _this.enableClear = true;
        /**
         * 服务器端排序
         */
        _this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        _this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        _this.singleSelect = true;
        /**
         * 多选分隔符
         */
        _this.multipleChoiceSeparator = ',';
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        _this.beUri = '';
        /**
         * 显示过滤工具条
         */
        _this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        _this.pagination = true;
        /**
         * 当前页索引，从 0开始
         */
        _this.pageIndex = 1;
        /**
         * 每页记录数
         */
        _this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        _this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        _this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息
         */
        _this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        _this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        _this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        _this.nosearch = false;
        // 收藏列表
        _this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        _this.enableCascade = false;
        /**
         * 级联控制默认值： enable, up, down, disable
         */
        _this.cascadeStatus = 'enable';
        _this.placeholder = '';
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        _this.showSelected = false;
        /**
         * 应用收藏夹
         */
        _this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        _this.favoriteDataFrom = 'remote';
        /**
         * 使用提示,快捷选择
         */
        _this.useTip = false;
        /**
         * 记录窗口大小
         */
        _this.isRecordSize = false;
        // 是否启用选中value值对应的行数据
        _this.enableToSelect = true;
        _this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        _this.expandLevel = -1;
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        _this.loadTreeDataType = 'default';
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        _this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        _this.navSelectedIds = '';
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        _this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        _this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        _this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        _this.displayFields = '';
        _this.displayTextSeparator = '_';
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        _this.helpId = '';
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        _this.textAlign = 'left';
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        _this.enableTitle = true;
        _this.useExtendInfo = false;
        _this.extInfoFields = '';
        _this.extendInfo = '';
        /**
         * IDE 设计器自定义格式化 2103
         */
        _this.customFormatter = null;
        _this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        _this.okHandler = null;
        /**
         * 自定义取消事件
         */
        _this.cancelHandler = null;
        _this.tagboxHeight = 'auto';
        /**
         * 启用获取所有子级数据的功能
         */
        _this.enableGetAllChildNodes = true;
        _this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: 'ArrowRight',
            /**
             * 确认选择数据
             */
            confirm: 'Enter',
            /**
             * 搜索框焦点
             */
            searchFocus: 'F3',
            /**
             * 选中上一条
             */
            moveUp: 'ArrowUp',
            /**
             * 选中下一条
             */
            moveDown: 'ArrowDown',
            /**
             * 展开节点
             */
            expand: 'ArrowRight',
            /**
             * 折叠节点
             */
            collapse: 'ArrowLeft',
            /**
             * 下一页
             */
            nextPager: 'PageDown',
            /**
             * 上一页
             */
            prevPager: 'PageUp'
        };
        _this.selectedData = new EventEmitter();
        _this.clear = new EventEmitter();
        _this.search = new EventEmitter();
        // 帮助文本框中值变化事件
        _this.valueChanged = new EventEmitter();
        _this.loadSuccess = new EventEmitter();
        _this.pagerChanged = new EventEmitter();
        _this.expandTreeNode = new EventEmitter();
        _this.textChanged = new EventEmitter();
        _this.checkedChange = new EventEmitter();
        _this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        _this.containerMargin = { top: 0, bottom: 5, left: 10, right: 10 };
        _this.containerStyle = {
            marginLeft: _this.containerMargin.left + 'px',
            marginRight: _this.containerMargin.right + 'px',
            marginTop: _this.containerMargin.top + 'px',
            marginBottom: _this.containerMargin.bottom + 'px'
        };
        _this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        _this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        _this.navLookupDialogMinWidth = 960;
        _this.navigationFilter = null;
        _this.subscriptions = [];
        _this.isTextChange = false;
        _this.isTabChanged = false;
        _this.displayInfo = Object.assign({}, displayInfoDefault);
        _this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        _this.personalConf = {};
        _this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        _this._searchState = null;
        _this.allData = [];
        _this.allColumnsTitle = '所有列';
        _this.mustWriteSomething = '请输入关键字后查询。';
        _this.mustChoosAdatarow = '请选择一条记录！';
        _this.addFavoriteSuccess = '收藏成功。';
        _this.delFavoriteSuccess = '移除收藏成功。';
        _this.searching = false;
        /**
         * 临时存储查询结果集
         */
        _this._searchResult = null;
        _this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        _this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        _this.selectedColumns = [];
        _this.activeTab = 'datalist';
        _this.favHelper = null;
        _this.ttEventMgr = null;
        _this.multiSelMgr = null;
        _this.httpMgr = null;
        _this.lookupCmpMgr = null;
        _this.dialogMgr = null;
        _this.selectionMgr = null;
        _this.dtEventMgr = null;
        _this.lookupSelectionSer = null;
        _this.controlId = '';
        _this.savingFaoriteData = false;
        _this.isReady = false;
        _this.showTagboxClearButton = false;
        _this.hasError = false;
        _this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        _this.selectedIds = [];
        _this.farrisInstances = null;
        _this.createInstance();
        _this.currentSelectedItems = _this.lookupSelectionSer.selected$;
        _this.eventManager = _this.injector.get(EventManager);
        _this.farrisInstances = _this.injector.get(FarrisComponentInstanceService, null);
        return _this;
    }
    Object.defineProperty(LookupGridComponent.prototype, "displayType", {
        get: /**
         * @return {?}
         */
        function () {
            return this._displayType;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                /** @type {?} */
                var types = Object.values(LookupGridDisplayType);
                /** @type {?} */
                var i = types.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n === val.toUpperCase(); }));
                if (i > -1) {
                    /** @type {?} */
                    var keys = Object.keys(LookupGridDisplayType);
                    this._displayType = LookupGridDisplayType[keys[i]];
                }
            }
            else {
                this._displayType = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "gridOptions", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.useFavorite && this.columns && this.columns.length > 0 && !this.columns.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.field === FAVORITE_FIELD_NAME; }))) {
                this.columns.push({
                    field: FAVORITE_FIELD_NAME, title: '', width: 40, align: 'center',
                    formatter: this.favHelper.favoriteColumnFormatter
                });
            }
            this._gridOptions = Object.assign(this._gridOptions, {
                singleSelect: this.singleSelect,
                idField: this.idField,
                uri: this.uri,
                showFilterBar: this.showFilterBar,
                pagination: this.pagination,
                pageIndex: this.pageIndex,
                pageSize: this.pageSize,
                pageList: this.pageList,
                total: this.total,
                items: this.items,
                columns: this.columns,
                resizableColumns: true,
                fixedHeader: true,
                hover: true,
                treeInfo: this.treeInfo
            });
            return this._gridOptions;
        },
        set: /**
         * @param {?} opts
         * @return {?}
         */
        function (opts) {
            this._gridOptions = Object.assign({}, this._gridOptions, opts);
            this.selectedColumns = this.multiSelMgr.initSelectedColumns();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var selectItems = this.lookupSelectionSer.getSelections();
            if (this.singleSelect) {
                return selectItems[0];
            }
            else {
                return selectItems;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "usePersionalConf", {
        get: /**
         * @return {?}
         */
        function () {
            return this.useFavorite || this.useTip || this.isRecordSize;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupGridComponent.prototype, "displayTextList", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.displayText) {
                return this.displayText.split(this.multipleChoiceSeparator);
            }
            return [];
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnInit.call(this);
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue('lookup.allColumns');
        this.mustWriteSomething = this.localService.getValue('lookup.mustWriteSomething');
        this.mustChoosAdatarow = this.localService.getValue('lookup.mustChoosAdatarow');
        this.addFavoriteSuccess = this.localService.getValue('lookup.favoriteInfo.addFav') || this.addFavoriteSuccess;
        this.delFavoriteSuccess = this.localService.getValue('lookup.favoriteInfo.cancelFav') || this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            var jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnDestroy.call(this);
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    LookupGridComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) { };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        onTextChanged.bind(this)();
        if (this.viewType === 'text') {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, 'keydown.F2', this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                var el = this.tagbox.nativeElement.querySelector('.multi-more');
                /** @type {?} */
                var tbh = this.tagboxHeight;
                if (tbh !== 'auto') {
                    tbh += 'px';
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, 'maxHeight', this.maxTagboxHeight + "px");
                    }
                }
                this.render2.setStyle(el, 'height', tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.createInstance = /**
     * @private
     * @return {?}
     */
    function () {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.showDialog = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        function (pr) {
            _this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    };
    /** 判断是否为双列表帮助 */
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    LookupGridComponent.prototype.isDoublleList = /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    function () {
        return (this.displayType === LookupGridDisplayType.NavList || this.displayType === LookupGridDisplayType.NavTreeList);
    };
    /** 判断是否显示为树帮助 */
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    LookupGridComponent.prototype.isTree = /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    function () {
        return this.displayType.toUpperCase() === LookupGridDisplayType.TreeList;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    LookupGridComponent.prototype.onResized = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupGridComponent.prototype.onResizing = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight()
            });
        }
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupGridComponent.prototype.onMaxDialog = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight()
            });
        }
        this.dialogMaxed.emit(pos.size);
    };
    /**
     * @param {?=} size
     * @return {?}
     */
    LookupGridComponent.prototype.resizeCmp = /**
     * @param {?=} size
     * @return {?}
     */
    function (size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        var _size = {
            width: size.width - this.containerMargin.left - this.containerMargin.right,
            height: this.dialogMgr.getHeight()
        };
        if (this.useFavorite && this.favoritesComponentRef) {
            this.favoritesComponentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({ size: this.dialog.size });
        }
        if (this.isDoublleList()) {
            _size.width = size.width - this.leftPanel.width - 27;
        }
        this.componentRef.instance.resize(_size);
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.checkGridOptions = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.gridOptions.idField) {
            console.warn('未设置主键字段 idField');
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            function () {
                return of(true);
            });
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.getComponentType = /**
     * @return {?}
     */
    function () {
        if (!this.displayType) {
            this.displayType = 'LIST';
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
                return TreeTableComponent;
        }
    };
    /**
     * @param {?=} msg
     * @return {?}
     */
    LookupGridComponent.prototype.showLoading = /**
     * @param {?=} msg
     * @return {?}
     */
    function (msg) {
        if (msg === void 0) { msg = ''; }
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            var opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts['message'] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.closeLoading = /**
     * @return {?}
     */
    function () {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    };
    /**
     * @param {?} resdata
     * @return {?}
     */
    LookupGridComponent.prototype.getSearchColumns = /**
     * @param {?} resdata
     * @return {?}
     */
    function (resdata) {
        /** @type {?} */
        var cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            function (sf) {
                /** @type {?} */
                var c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) { return col.field.toLowerCase() === sf.value.toLowerCase(); }));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols.filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.searchField; })).map((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                return {
                    label: col.title,
                    value: col.field
                };
            }));
        }
        return [];
    };
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.initOptions = /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        var _this = this;
        /** @type {?} */
        var obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            if (resData.columns && resData.columns.length) {
                this.columns = resData.columns;
            }
            this.setLookupTitleText(resData);
            if (this.isDoublleList() && this.dialogWidth < this.navLookupDialogMinWidth && !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                this.displayType = resData.displayType || this.displayType || 'LIST';
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() && resData.navigation && !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    function (col) {
                        if (_this.customNavFormatter[col.field]) {
                            col.formatter = _this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions['rowStyler'] = this.customNavFormatter.rowStyler;
                    this.navigationOptions['cellStyler'] = this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    var _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== 'default') {
                        _nav_treeinfo_loadtype = this.loadTreeDataType === 'loadall' ? 'all' : 'async';
                    }
                    this.navigationOptions.treeInfo.loadDataType = _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                if (_this.customFormatter[col.field]) {
                    col.formatter = _this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler = this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler = this.customFormatter.cellStyler;
            }
        }
        this.changeDetector.detectChanges();
        return obser;
    };
    /**
     * 设置帮助窗口标题
     */
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.setLookupTitleText = /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== '此处显示帮助标题') {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.showGetAllChildrenCheckbox = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes = this.treeInfo.loadDataType !== 'all' && this.treeInfo.layerType === 'pathcode';
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.initData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    _this.isShow = false;
                    if (_this.dialog) {
                        _this.dialog.close();
                    }
                    return;
                }
                _this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                function () {
                    _this.selectedColumns = _this.multiSelMgr.initSelectedColumns();
                    _this.favoriteColumns = _this.favHelper.getFavoriteColumns();
                    if (_this.usePersionalConf) {
                        if (!_this.personalConfigService.getPersonalData()) {
                            _this.personalConfigService.savePersonalConfig(_this.personalConf);
                        }
                    }
                    if (!_this.isTabChanged) {
                        _this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (_this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (_this.navSelectedIds || _this.selectFirstInNav) {
                            _this.loadDataWhenOpen = false;
                        }
                    }
                    _this.loadData(data);
                    if (_this.isTree()) {
                        if (_this.activeTab === 'datalist') {
                            /** @type {?} */
                            var tt = (/** @type {?} */ (_this.componentRef.instance));
                            if (tt.loadDataType === 'all' && tt.searchData.value) {
                                if (_this.items && _this.items.length) {
                                    tt.toggleExpand(_this.items[0], true);
                                }
                            }
                        }
                        _this.showGetAllChildrenCheckbox();
                    }
                    _this.isTextChange = false;
                    _this._searchResult = null; // 清空临时查询 结果
                    _this.closeLoading();
                    // this.isReady$.next(true);
                    _this.isReady = true;
                    _this.changeDetector.detectChanges();
                    _this.lookupinitializationSubject.next();
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                // this.isReady$.next(true);
                _this.closeLoading();
                _this._searchResult = null; // 清空临时查询 结果
                _this.isTextChange = false;
                _this.hasError = true;
                _this.changeDetector.detectChanges();
                if (typeof err === 'string') {
                    _this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            _this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                _this.messagerService.error(err.error.Message);
                            }
                            else {
                                _this.messagerService.error('应用服务器错误,请联系系统管理员！');
                            }
                        }
                    }
                    console.log(err);
                }
            })
        };
        /** @type {?} */
        var p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1
            }
        };
        /** @type {?} */
        var t = 'all';
        if (this.isTextChange) {
            p = {
                search: {
                    field: '*',
                    value: this.displayText
                }
            };
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            var vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p['selectedInfo'] = {
                    selected: true,
                    selectedIds: vals
                };
            }
            else {
                if (this['selectedIds']) {
                    p['selectedInfo'] = {
                        selected: true,
                        selectedIds: this['selectedIds']
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        function (restData) {
            if (restData) {
                restData.selectedItems = restData['selectedData'] || [];
            }
            else {
                if (restData && typeof restData === 'object') {
                    restData.selectedItems = [];
                }
            }
            return restData;
        }))).subscribe(observer);
    };
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    LookupGridComponent.prototype.loadData = /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    function (resData, rebindEvent) {
        if (rebindEvent === void 0) { rebindEvent = true; }
        if (this.activeTab === 'datalist') {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === 'favorite') {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    };
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    LookupGridComponent.prototype.loadFavData = /**
     * @private
     * @param {?} result
     * @return {?}
     */
    function (result) {
        var _this = this;
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree) {
                this.setTreeInfo(result);
            }
            if (this.isTree()) {
                /** @type {?} */
                var treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                var treeData = this.treeNodeHelper.flatTreeNodes(treeNodes).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    n.data['_addtional_'] = n['addtional'];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    };
    /**
     * @param {?=} resData
     * @return {?}
     */
    LookupGridComponent.prototype.loadDataTableData = /**
     * @param {?=} resData
     * @return {?}
     */
    function (resData) {
        if (resData) {
            if (this.gridOptions) {
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList && (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    };
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    LookupGridComponent.prototype.updateDataTable = /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    function (opts) {
        if (opts) {
            /** @type {?} */
            var dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    };
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    LookupGridComponent.prototype.setTreeInfo = /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    function (resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        var _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            var onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            var _osl = 'no';
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? 'yes' : 'no';
            }
            _treeInfo = tslib_1.__assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        if (this.gridOptions.treeInfo) {
            /** @type {?} */
            var treeInfo = this.gridOptions.treeInfo;
            if (treeInfo) {
                if (treeInfo.onlySelectLeaf === undefined || treeInfo.onlySelectLeaf === null) {
                    treeInfo.onlySelectLeaf = 'no';
                }
                if (typeof treeInfo.onlySelectLeaf === 'boolean') {
                    treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? 'yes' : 'no';
                }
                // 20210902
                if (this.loadTreeDataType === 'default') {
                    treeInfo.loadDataType = _treeInfo.loadDataType;
                }
                else {
                    treeInfo.loadDataType = this.loadTreeDataType === 'loadall' ? 'all' : 'async';
                }
                if (treeInfo.onlySelectLeaf !== 'default') {
                    _treeInfo = Object.assign(_treeInfo, treeInfo);
                }
            }
        }
        this.treeInfo = _treeInfo;
    };
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    LookupGridComponent.prototype.loadTreeTableData = /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    function (resData, rebindEvent) {
        var _this = this;
        if (rebindEvent === void 0) { rebindEvent = true; }
        /** @type {?} */
        var items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            var treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo['treeDataIsInit']) {
                if (treeInfo.layerType.toLowerCase() === 'pathcode') {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, '', treeInfo.dataField + "." + treeInfo.parentField, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            var tt_1 = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt_1.loadDataType = this.treeInfo.loadDataType;
            }
            /** @type {?} */
            var isLoadAllTreeData = (/**
             * @return {?}
             */
            function () {
                if (_this.loadTreeDataType === 'default') {
                    return tt_1.loadDataType === 'all';
                }
                else {
                    return _this.loadTreeDataType === 'loadall';
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            var isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt_1.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt_1.loadData(this.items);
            }
            tt_1.resize();
        }
    };
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     */
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    LookupGridComponent.prototype.checkNodeCanBeSelect = /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    function (nodes, isAllTreeData) {
        var _this = this;
        if (isAllTreeData === void 0) { isAllTreeData = false; }
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            function (node) {
                if (node.hasOwnProperty('addtional')) {
                    node.selectable = !node['addtional'];
                }
                if (node.children && node.children.length) {
                    _this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    };
    /**
     * @param {?} val
     * @return {?}
     */
    LookupGridComponent.prototype.onChanges = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = true;
            if (this.nosearch) {
                this.setModelValue(val);
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    LookupGridComponent.prototype.onClear = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = true; }
        this.isTextChange = false;
        this.displayText = '';
        this.displayValue = '';
        this.originalText = '';
        this.extendInfo = '';
        this.setModelValue('');
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                var bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    LookupGridComponent.prototype.clearValue = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = true; }
        this.onClear(emit);
    };
    /**
     * @param {?=} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.selectItem = /**
     * @param {?=} rowData
     * @return {?}
     */
    function (rowData) {
        var _this = this;
        /** @type {?} */
        var selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        // 如果定义自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                var bsdResult = this.beforeSelectData({ instance: this, data: selectedRow });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        _this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    console.error('帮助数据选中前事件未返回值或返回类型非Observable, 请检查');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    };
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    LookupGridComponent.prototype.getParentPathCode = /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        /** @type {?} */
        var maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        function (arr, fn) { return Math.max.apply(Math, tslib_1.__spread(arr.map(typeof fn === 'function' ? fn : (/**
         * @param {?} val
         * @return {?}
         */
        function (val) { return val[fn]; })))); });
        var _a = this.treeInfo, dataField = _a.dataField, pathField = _a.pathField, layerField = _a.layerField;
        /** @type {?} */
        var maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x[dataField][layerField]; }));
        var _loop_1 = function (i) {
            /** @type {?} */
            var _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[dataField][layerField] === i; }));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    /** @type {?} */
                    var patchCode = r[dataField][pathField];
                    /** @type {?} */
                    var _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n[dataField][pathField] !== patchCode && n[dataField][pathField].indexOf(patchCode) === 0; }));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n[dataField][pathField] !== patchCode; }));
                    }
                }));
            }
        };
        for (var i = 1; i <= maxLayer; i++) {
            _loop_1(i);
        }
        return rows;
    };
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype._beforeSelectDataCallBack = /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    function (e, selectedRow) {
        var _this = this;
        /** @type {?} */
        var canSelect = e;
        /** @type {?} */
        var message = '';
        if (typeof e === 'boolean') {
            canSelect = e;
        }
        else {
            if (typeof e === 'object') {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            var selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree() &&
                this.treeInfo.loadDataType !== 'all' && this.treeInfo.layerType === 'pathcode' &&
                this.isGetAllChidlNodes) {
                // const parentsIds = selectedRow.map(n => n[this.treeInfo.dataField][this.treeInfo.pathField]);
                /** @type {?} */
                var parentsIds = this.getParentPathCode(selectedRow);
                if (parentsIds && parentsIds.length) {
                    parentsIds = parentsIds.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n[_this.treeInfo.dataField][_this.treeInfo.pathField]; }));
                    this.showLoading();
                    selectedRows$ = this.httpMgr.getData({ parentsIds: parentsIds }, 'allChildren').pipe(map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        /** @type {?} */
                        var items = r.items ? r.items.map((/**
                         * @param {?} d
                         * @return {?}
                         */
                        function (d) { return d.data; })) : [];
                        /** @type {?} */
                        var allitems = tslib_1.__spread(selectedRow, items);
                        /** @type {?} */
                        var ids = allitems.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n[_this.idField]; }));
                        ids = Array.from(new Set(ids));
                        return ids.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return allitems.find((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) { return a[_this.idField] === n; })); }));
                    })));
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            function (rows) {
                _this.closeLoading();
                _this.updateControlValue(rows);
                if (!_this.useTip || !rows) {
                    return;
                }
                if (_this.useTip) {
                    _this.personalConfigService.updateQueckSelected(rows, _this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, '', true, (/**
                     * @return {?}
                     */
                    function () {
                        _this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.updateControlValue = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this['inDatagrid'] && selectedRow) {
                /** @type {?} */
                var selectItems = Array.isArray(selectedRow) ? selectedRow : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.updateBindData = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        var _this = this;
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData_1 = this.ngControl.formDirective.form.bindingData;
            if (bindingData_1) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField].split(',').forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var val = selectedRow.map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) {
                            return _this.utils.getValue(helpField, r);
                        })).join(_this.multipleChoiceSeparator);
                        _this.utils.setValue(bindingData_1, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    };
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    LookupGridComponent.prototype.getExtendInfoFields = /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    function (isHelpData) {
        var _this = this;
        if (isHelpData === void 0) { isHelpData = true; }
        if (!this.extInfoFields) {
            console.warn("\u672A\u8BBE\u7F6E\u6269\u5C55\u5B57\u6BB5\u3002");
            return [];
        }
        /** @type {?} */
        var tipFieldArr = this.extInfoFields.split(',');
        if (isHelpData) {
            /** @type {?} */
            var extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            function (tf) {
                /** @type {?} */
                var mapKey = Object.keys(_this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                function (k) {
                    return _this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    console.warn("\u5728\u5E2E\u52A9\u6620\u5C04\u5B57\u6BB5\u4E2D\u672A\u627E\u5230" + tf);
                    return '';
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.onUpdateExtendInfo = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    };
    // 选中帮助数据后，更新扩展信息
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    LookupGridComponent.prototype.updateExtendInfo = 
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    function (data, isHelpData) {
        var _this = this;
        if (isHelpData === void 0) { isHelpData = true; }
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    var tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return _this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join('，');
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                var extendInfoFields_1 = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields_1 && extendInfoFields_1.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        var tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            return _this.getExtendInfoText(n, extendInfoFields_1);
                        }));
                        this.extendInfo = tipString.join('，');
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields_1);
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    LookupGridComponent.prototype.getExtendInfoText = /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    function (itemData, fields) {
        var _this = this;
        if (fields === void 0) { fields = null; }
        if (typeof this.extInfoFormatter === 'function') {
            return this.extInfoFormatter({ bindingData: itemData, instance: this });
        }
        else {
            /** @type {?} */
            var tipString_1 = [];
            /** @type {?} */
            var tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            function (t) {
                var _a;
                /** @type {?} */
                var tfv = _this.utils.getValue(t, itemData);
                tipString_1.push(tfv);
                return _a = {}, _a[t] = tfv, _a;
            }));
            return tipString_1.join(' ');
        }
    };
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    LookupGridComponent.prototype.getDisplayText = /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    function (rows) {
        var _this = this;
        /** @type {?} */
        var df = this.displayFields ? this.displayFields.split(',') : [this.textField];
        /** @type {?} */
        var txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        function (r) {
            /** @type {?} */
            var t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                t.push(_this.utils.getValue(n, r));
            }));
            return t.join(_this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join('');
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) { return '[' + t + ']'; })).join(',');
            }
            else {
                return txtArr.join(',');
            }
        }
    };
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    LookupGridComponent.prototype.setDisplayText = /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        var _this = this;
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, datatable: (/** @type {?} */ (this.componentRef.instance)) });
                }
                else {
                    /** @type {?} */
                    var tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return _this.utils.getValue(_this.textField, r);
                    })).join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, datatable: (/** @type {?} */ (this.componentRef.instance)) });
                    }
                    else {
                        /** @type {?} */
                        var tt = (/** @type {?} */ (this.componentRef.instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    return _this.utils.getValue(_this.valueField, r);
                })).join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    };
    /**
     * @param {?} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.runDictPickedEvent = /**
     * @param {?} rowData
     * @return {?}
     */
    function (rowData) {
        var _this = this;
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                if (_this.okButton) {
                    _this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === 'boolean') {
                    if (v) {
                        _this.closeDialog(rowData);
                    }
                }
                else if (typeof v === 'object' && v.closeDialog !== undefined && !v.closeDialog) {
                    if (v.message) {
                        _this.messagerService.warning(v.message);
                    }
                    else {
                        _this.closeDialog(rowData);
                    }
                }
                else {
                    _this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.focusToInput = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.inputGroup && _this.inputGroup.textbox) {
                    _this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    };
    /**
     * @param {?=} rowData
     * @return {?}
     */
    LookupGridComponent.prototype.closeDialog = /**
     * @param {?=} rowData
     * @return {?}
     */
    function (rowData) {
        if (rowData === void 0) { rowData = null; }
        this.isShow = false;
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        this.focusToInput();
    };
    /**
     * @return {?}
     */
    LookupGridComponent.prototype.cancelSelect = /**
     * @return {?}
     */
    function () {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    };
    /**
     * @param {?} v
     * @return {?}
     */
    LookupGridComponent.prototype.setModelValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    };
    // 数据列表，收藏， 已选数据 tab 页切换
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    LookupGridComponent.prototype.onTabChange = 
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        var _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({ tabIndex: e.tabIndex });
        if (this.activeTab === 'datalist') {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if (!this.items || !this.items.length) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === 'favorite') {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems || !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.resizeCmp();
            if (_this.isTree()) {
                /** @type {?} */
                var y = _this.componentRef.instance.state.scrollY;
                _this.componentRef.instance.scrollToY(y, 0);
                if (_this.enableCascade) {
                    _this.ttEventMgr.cascadeValueChanged(_this.cascadeStatus);
                }
                _this.selectionMgr.selectCurrentValue();
            }
        }));
    };
    //#region  Tag View ----------------------------------------------------------------------
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    LookupGridComponent.prototype.registerMouseEventForTagView = 
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    function () {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener('mouseenter', this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener('mouseleave', this.onTagboxMouseLeave.bind(this));
        }
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    LookupGridComponent.prototype.toggleClearIcon = /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    function (event, isShow) {
        if (isShow === void 0) { isShow = false; }
        /** @type {?} */
        var str = isShow ? '' : 'none';
        /** @type {?} */
        var clearIcon = event.target.querySelector('.input-group-clear');
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagboxMouseEnter = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    LookupGridComponent.prototype.onTagboxMouseLeave = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.toggleClearIcon(event);
    };
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    LookupGridComponent.prototype.onRemoveSelectItem = /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    function ($event, txt) {
        // console.log($event, txt);
        $event.stopPropagation();
        /** @type {?} */
        var textArray = Array.from(this.displayTextList);
        /** @type {?} */
        var removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            var vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex: removedIndex, instance: this });
    };
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    LookupGridComponent.prototype.updateOtherFieldDataWhenTagremoved = /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    function (removedIndex) {
        var _this = this;
        /** @type {?} */
        var helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        var textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            var bindingData_2 = this.ngControl.formDirective.form.bindingData;
            if (bindingData_2.setValue) {
                /** @type {?} */
                var bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                var pathArr_1 = [];
                if (bindingPath) {
                    pathArr_1 = bindingPath.split('/').filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n !== ''; }));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField].split(',').forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var fieldPaths = pathArr_1.concat(formField.split('.'));
                        /** @type {?} */
                        var val = bindingData_2.getValue(fieldPaths);
                        /** @type {?} */
                        var valArr = val.split(_this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        var newVal = valArr.join(_this.multipleChoiceSeparator);
                        bindingData_2.setValue(pathArr_1.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    _this.mapFields[helpField].split(',').forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    function (formField) {
                        /** @type {?} */
                        var val = _this.utils.getValue(formField, _this.bindingData);
                        /** @type {?} */
                        var valArr = val.split(_this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        var newVal = valArr.join(_this.multipleChoiceSeparator);
                        _this.utils.setValue(_this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    };
    //#endregion
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    LookupGridComponent.prototype.onAllChildNodesClick = 
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    };
    LookupGridComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-lookup-grid',
                    template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n></input-group>\r\n\r\n\r\n<div  #tagbox  class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\"  title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n>\r\n    <div [ngStyle]=\"containerStyle\" [style.height.px]=\"dialogHeight - 46 - 56\">\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\"\r\n            [enableSelected]=\"showSelected && !singleSelect\" [selectedTotal]=\"(currentSelectedItems | async)?.length\">\r\n            <div datalist style=\"position: relative;\" [style.height.px]=\"useFavorite ? dialogHeight - 46 - 56 - 40 : dialogHeight - 46 - 56\">\r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\">\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"10\" [showBorder]=\"false\" >\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\">\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                \r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites [style.height.px]=\"dialogHeight - 46 - 56 - 40\" style=\"position: relative; \"  *ngIf=\"useFavorite\" >\r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n            <div selected [style.height.px]=\"dialogHeight - 46 - 5 -40\" style=\"position: relative;\"  *ngIf=\"showSelected\" >\r\n                <farris-datatable #multiSelectDT\r\n                    [height]=\"gridOptions?.height\"\r\n                    [pagination]=\"false\" [fill]=\"true\"\r\n                    [columns]=\"selectedColumns\"\r\n                    [data]=\"currentSelectedItems | async\"\r\n                    [remoteSort]=\"false\"\r\n                    (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                >\r\n                </farris-datatable>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n    \r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && enableCascade && displayType==='TREELIST' && singleSelect === false\">\r\n        <select class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\">\r\n            <option value=\"enable\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n            <option value=\"up\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n            <option value=\"down\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n            <option value=\"disable\" >{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option>\r\n        </select>\r\n\r\n        <button class=\"btn btn-link\" style=\"display: inline-block;margin-left: 10px;padding-left: 0;\"\r\n            *ngIf=\"enableGetAllChildNodes\" (click)=\"onAllChildNodesClick($event)\">\r\n            <span class=\"f-icon f-icon-checkbox\"[class.f-icon-checkbox-checked]=\"isGetAllChidlNodes\"\r\n                style=\"margin-right: 5px; font-size: 14px;color: #0089FF;\"></span>{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</button>\r\n\r\n    </div>\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\"  class=\"btn btn-primary btn-lg\" (click)=\"selectItem()\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                    providers: [LOOKUPGRID_VALUE_ACCESSOR, ShortcutsService, LookupDefaultMapping, LookupUtils, PersonalConfigService],
                    encapsulation: ViewEncapsulation.None,
                    exportAs: 'lookup',
                    styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}"]
                }] }
    ];
    /** @nocollapse */
    LookupGridComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ElementRef },
        { type: CommonUtils },
        { type: LookupDefaultMapping },
        { type: ChangeDetectorRef },
        { type: ShortcutsService },
        { type: LookupUtils },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    LookupGridComponent.propDecorators = {
        customDisplayType: [{ type: Input }],
        viewType: [{ type: Input }],
        displayType: [{ type: Input }],
        enableClear: [{ type: Input }],
        remoteSort: [{ type: Input }],
        condition: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        singleSelect: [{ type: Input }],
        multipleChoiceSeparator: [{ type: Input }],
        idField: [{ type: Input }],
        uri: [{ type: Input }],
        beUri: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        pagination: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pageList: [{ type: Input }],
        total: [{ type: Input }],
        columns: [{ type: Input }],
        remoteSearch: [{ type: Input }],
        searchOnServer: [{ type: Input }],
        nosearch: [{ type: Input }],
        maxLength: [{ type: Input }],
        mappingFn: [{ type: Input }],
        items: [{ type: Input }],
        favoriteItems: [{ type: Input }],
        customData: [{ type: Input }],
        bindingData: [{ type: Input }],
        treeInfo: [{ type: Input }],
        enableCascade: [{ type: Input }],
        cascadeStatus: [{ type: Input }],
        placeholder: [{ type: Input }],
        showSelected: [{ type: Input }],
        useFavorite: [{ type: Input }],
        favoriteDataFrom: [{ type: Input }],
        useTip: [{ type: Input }],
        isRecordSize: [{ type: Input }],
        userId: [{ type: Input }],
        enableToSelect: [{ type: Input }],
        enableFindText: [{ type: Input }],
        expandLevel: [{ type: Input }],
        loadTreeDataType: [{ type: Input }],
        loadDataWhenOpen: [{ type: Input }],
        navSelectedIds: [{ type: Input }],
        selectFirstInNav: [{ type: Input }],
        enableFullTree: [{ type: Input }],
        displayFormatter: [{ type: Input }],
        displayFields: [{ type: Input }],
        displayTextSeparator: [{ type: Input }],
        helpId: [{ type: Input }],
        textAlign: [{ type: Input }],
        enableTitle: [{ type: Input }],
        useExtendInfo: [{ type: Input }],
        extInfoFields: [{ type: Input }],
        extInfoFormatter: [{ type: Input }],
        extendInfo: [{ type: Input }],
        customFormatter: [{ type: Input }],
        customNavFormatter: [{ type: Input }],
        okHandler: [{ type: Input }],
        cancelHandler: [{ type: Input }],
        tagboxHeight: [{ type: Input }],
        maxTagboxHeight: [{ type: Input }],
        enableGetAllChildNodes: [{ type: Input }],
        shortcutKey: [{ type: Input }],
        beforeSelectData: [{ type: Input }],
        selectedData: [{ type: Output }],
        clear: [{ type: Output }],
        search: [{ type: Output }],
        valueChanged: [{ type: Output }],
        loadSuccess: [{ type: Output }],
        pagerChanged: [{ type: Output }],
        expandTreeNode: [{ type: Output }],
        textChanged: [{ type: Output }],
        checkedChange: [{ type: Output }],
        tagRemoved: [{ type: Output }],
        gridOptions: [{ type: Input }],
        contentContainer: [{ type: ViewChild, args: ['contentContainer', { read: ViewContainerRef },] }],
        favoritesContainer: [{ type: ViewChild, args: ['favoritesContainer', { read: ViewContainerRef },] }],
        leftContainer: [{ type: ViewChild, args: ['leftContainer', { read: ViewContainerRef },] }],
        centerContainer: [{ type: ViewChild, args: ['centerContainer', { read: ViewContainerRef },] }],
        multiSelectDT: [{ type: ViewChild, args: ['multiSelectDT',] }],
        inputGroup: [{ type: ViewChild, args: ['inputgroup',] }],
        leftPanel: [{ type: ViewChild, args: ['leftPanel',] }],
        tagbox: [{ type: ViewChild, args: ['tagbox',] }],
        okButton: [{ type: ViewChild, args: ['okbtn',] }]
    };
    return LookupGridComponent;
}(LookupComponent));
export { LookupGridComponent };
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 0开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable, up, down, disable
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /** @type {?} */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /** @type {?} */
    LookupGridComponent.prototype.search;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelectDT;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.render2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFTQSxPQUFPLEVBQ0gsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQTRCLFlBQVksRUFBVSxRQUFRLEVBQ3JGLHdCQUF3QixFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxpQkFBaUIsRUFDdEUsZ0JBQWdCLEVBQUUsVUFBVSxFQUFzQixVQUFVLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFDbEYsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkQsT0FBTyxFQUE0QixFQUFFLEVBQUUsT0FBTyxFQUFtQixNQUFNLE1BQU0sQ0FBQztBQUU5RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxjQUFjLEVBQW9CLE1BQU0sb0JBQW9CLENBQUM7QUFDdEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGtCQUFrQixFQUFZLE1BQU0sc0JBQXNCLENBQUM7QUFDcEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDekQsT0FBTyxFQUFFLFdBQVcsRUFBRSw4QkFBOEIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWhGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztB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QiwwQ0FBaUI7Ozs7O0lBQ2pCLDhDQUErRDs7SUFFM0QsdUNBQXlCOztJQUFFLGtDQUFvQzs7SUFDL0QsaUNBQXFCOztJQUFFLG9DQUF5Qjs7Ozs7SUFDaEQsNkNBQTRDOztJQUFFLDZDQUF3Qzs7SUFDdEYsd0NBQWtDOztJQUFFLDBDQUErQjs7Ozs7SUFDbkUsbUNBQW9COzs7OztJQUFFLHNDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiogQEF1dGhvcjog55av54uC56eA5omNKGx1Y2FzIGh1YW5nKVxyXG4qIEBEYXRlOiAyMDE4LTExLTIzIDExOjIzOjEyXHJcbiogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMCAyMDoxODoyNlxyXG4qIEBDb21wYW55OiBJbnNwdXJcclxuKiBAVmVyc2lvbjogdjAuMy54XHJcbiovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIEV2ZW50RW1pdHRlciwgT25Jbml0LCBJbmplY3RvcixcclxuICAgIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgT3V0cHV0LCBDaGFuZ2VEZXRlY3RvclJlZiwgVmlld0VuY2Fwc3VsYXRpb24sIEFmdGVyVmlld0luaXQsXHJcbiAgICBWaWV3Q29udGFpbmVyUmVmLCBmb3J3YXJkUmVmLCBDb21wb25lbnRSZWYsIFR5cGUsIEVsZW1lbnRSZWYsIE5nWm9uZSwgUmVuZGVyZXIyLCBPbkRlc3Ryb3ksIEhvc3RMaXN0ZW5lclxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgb2YsIFN1YmplY3QsIEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgSVJlc2l6ZUV2ZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kcmFnZ2FibGUnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UsIExvYWRpbmdDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBEYXRhVGFibGVDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGF0YWJsZSc7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCwgVHJlZU5vZGUgfSBmcm9tICdAZmFycmlzL3VpLXRyZWV0YWJsZSc7XHJcbmltcG9ydCB7IExheW91dFBhbmVsQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sYXlvdXQnO1xyXG5pbXBvcnQgeyBDb21tb25VdGlscywgRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBFbnRpdHlGaWx0ZXIgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi90eXBlcyc7XHJcbmltcG9ydCB7IFNob3J0Y3V0c1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLXNob3J0Y3V0cyc7XHJcbmltcG9ydCB7IElucHV0R3JvdXBDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWlucHV0LWdyb3VwJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuXHJcbmltcG9ydCB7IEZBVk9SSVRFX0ZJRUxEX05BTUUsIElOUFVUX0dST1VQX0lDT04sIExvb2t1cEdyaWREaXNwbGF5VHlwZSwgRXh0SW5mb0Zvcm1hdHRlciwgQ3VzdG9tRGF0YUZvcm1hdHRlciB9IGZyb20gJy4vbG9va3VwLWRpc3BsYXl0eXBlJztcclxuaW1wb3J0IHsgTG9va3VwQ29tcG9uZW50IH0gZnJvbSAnLi9sb29rdXAuY29tcG9uZW50JztcclxuaW1wb3J0IHtcclxuICAgIExvb2t1cEdyaWRPcHRpb25zLCBsb29rdXBHcmlkRGVmYXVsdHMsIExvb2t1cEdyaWRSZXN1bHQsIE5hdmlnYXRpb25PcHRpb25zLCBEaXNwbGF5SW5mbyxcclxuICAgIGRpc3BsYXlJbmZvRGVmYXVsdCwgUGlja2luZ1Jlc3VsdCwgVHJlZUluZm8sIExPQURfREFUQV9UWVBFLCBPTkxZX1NFTEVDVF9MRUFGLCBQZXJzb25hbENvbmZpZ1xyXG59IGZyb20gJy4vbG9va3VwLWdyaWQtb3B0aW9ucyc7XHJcbmltcG9ydCB7IElMb29rdXBIdHRwU2VydmljZSwgU2VydmVyU2lkZVRva2VuIH0gZnJvbSAnLi9odHRwL0lMb29rdXBIdHRwU2VydmljZSc7XHJcbmltcG9ydCB7IE5hdmlnYXRpb25GaWx0ZXIgfSBmcm9tICcuL2h0dHAvUmVtb3RlUGFyYW1zJztcclxuaW1wb3J0IHsgTG9va3VwTGVmdENvbXBvbmVudCB9IGZyb20gJy4vbG9va3VwLWxlZnQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTG9va3VwRGVmYXVsdE1hcHBpbmcgfSBmcm9tICcuL2xvb2t1cC1kZWZhdXQtbWFwcGluZyc7XHJcbmltcG9ydCB7IExvb2t1cFV0aWxzIH0gZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCB7IFBlcnNvbmFsQ29uZmlnU2VydmljZSB9IGZyb20gJy4vbG9va3VwLXByZXNvbmFsQ29uZmlnLnNlcnZpY2UnO1xyXG5pbXBvcnQge1xyXG4gICAgVXRpbFNlcnZpY2UsIFRyZWVOb2RlSGVscGVyLCBGYXZvcml0ZUhlbHBlciwgU2VsZWN0aW9uTWFuYWdlciwgRGF0YVRhYmxlRXZlbnRNYW5hZ2VyLCBUcmVlVGFibGVFdmVudE1hbmFnZXIsXHJcbiAgICBNdWx0aVNlbGVjdGlvbk1hbmFnZXIsIExvb2t1cEh0dHBNYW5hZ2VyLCBMb29rdXBDb21wb25lbnRNYW5hZ2VyLCBMb29rdXBEaWFsb2dNYW5hZ2VyLCBvblRleHRDaGFuZ2VkLCBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlXHJcbn0gZnJvbSAnLi9zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IGNhdGNoRXJyb3IsIG1hcCwgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XHJcblxyXG5leHBvcnQgY29uc3QgTE9PS1VQR1JJRF9WQUxVRV9BQ0NFU1NPUjogYW55ID0ge1xyXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMb29rdXBHcmlkQ29tcG9uZW50KSxcclxuICAgIG11bHRpOiB0cnVlXHJcbn07XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWxvb2t1cC1ncmlkJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9sb29rdXAtZ3JpZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9sb29rdXAtZ3JpZC5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgcHJvdmlkZXJzOiBbTE9PS1VQR1JJRF9WQUxVRV9BQ0NFU1NPUiwgU2hvcnRjdXRzU2VydmljZSwgTG9va3VwRGVmYXVsdE1hcHBpbmcsIExvb2t1cFV0aWxzLCBQZXJzb25hbENvbmZpZ1NlcnZpY2VdLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIGV4cG9ydEFzOiAnbG9va3VwJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgTG9va3VwR3JpZENvbXBvbmVudCBleHRlbmRzIExvb2t1cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG4gICAgZ3JvdXBJY29uID0gSU5QVVRfR1JPVVBfSUNPTjtcclxuICAgIF9kaXNwbGF5VHlwZSA9ICcnO1xyXG5cclxuICAgIC8qKiDkvb/nlKjooajljZXorr7orqHlmajkuK3nmoTmmL7npLrnsbvlnovjgILlkKbliJnkvb/nlKjlhYPmlbDmja7orr7nva7nmoTmmL7npLrnsbvlnovjgIIg6buY6K6k77yaZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGN1c3RvbURpc3BsYXlUeXBlID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSB2aWV3VHlwZTogJ3RleHQnIHwgJ3RhZycgPSAndGV4dCc7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGRpc3BsYXlUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwbGF5VHlwZTtcclxuICAgIH1cclxuICAgIHNldCBkaXNwbGF5VHlwZSh2YWw6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgY29uc3QgdHlwZXMgPSBPYmplY3QudmFsdWVzKExvb2t1cEdyaWREaXNwbGF5VHlwZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0eXBlcy5maW5kSW5kZXgobiA9PiBuID09PSB2YWwudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGxheVR5cGUgPSBMb29rdXBHcmlkRGlzcGxheVR5cGVba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwbGF5VHlwZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So5riF56m65oyJ6ZKuICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVDbGVhciA9IHRydWU7XHJcbiAgICAvKiog5pyN5Yqh5Zmo56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBjb25kaXRpb246IEVudGl0eUZpbHRlcjtcclxuXHJcbiAgICAvKiog5qCR6KGo5pi+56S65YWo6YCJ5aSN6YCJ5qGG44CCIOm7mOiupOS4jeaYvuekuiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0NoZWNrQWxsID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOWkmumAiSAqL1xyXG4gICAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDlpJrpgInliIbpmpTnrKYgKi9cclxuICAgIEBJbnB1dCgpIG11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yID0gJywnO1xyXG4gICAgLyoqIOS4u+mUruWtl+autSAqL1xyXG4gICAgQElucHV0KCkgaWRGaWVsZD86IHN0cmluZztcclxuICAgIC8qKiDlj6/ku6XkuLrlhYPmlbDmja5JROOAgXdlYmFwaVVSTCAqL1xyXG4gICAgQElucHV0KCkgdXJpPzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCRSBSRVNUIFJVSVxyXG4gICAgICogLSDmraTlpITorr7nva7lkI4gdXJpIOWkseaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBiZVVyaSA9ICcnO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmmL7npLrov4fmu6Tlt6XlhbfmnaFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0ZpbHRlckJhciA9IHRydWU7XHJcbiAgICAvKiog5piv5ZCm5ZCv55So5YiG6aG1ICovXHJcbiAgICBASW5wdXQoKSBwYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIC8qKiDlvZPliY3pobXntKLlvJXvvIzku44gMOW8gOWniyAqL1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgICAvKiog5Y+v55So5YiG6aG16K6w5b2V5pWw5YiX6KGoICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdCA9IFsxMCwgMjAsIDMwLCA1MCwgMTAwXTtcclxuICAgIC8qKiDmgLvorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHRvdGFsID0gMDtcclxuICAgIC8qKiDlj6/mi5bliqjliJcgKi9cclxuICAgIC8vIEBJbnB1dCgpIHJlc2l6YWJsZUNvbHVtbnMgPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuuWIl+S/oeaBryAqL1xyXG4gICAgQElucHV0KCkgY29sdW1uczogYW55W10gPSBbXTtcclxuXHJcbiAgICAvKiog5biu5Yqp5p+l6K+i5piv5ZCm5Li66L+c56uv5p+l6K+iICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTZWFyY2ggPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmlofmnKzlj5jljJblkI7vvIzov5vooYzmnI3liqHlmajnq6/mn6Xor6IgKi9cclxuICAgIEBJbnB1dCgpIHNlYXJjaE9uU2VydmVyID0gdHJ1ZTtcclxuICAgIC8qKiDkuI3ov5vooYzmnI3liqHlmajmn6Xor6LvvIzmnInllaXnrpfllaUgKi9cclxuICAgIEBJbnB1dCgpIG5vc2VhcmNoID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhYHorrjovpPlhaXnmoTlrZfnrKbmnIDlpKfplb/luqbjgIJcclxuICAgICAqIOS7u+aEj+i+k+WFpeaXtu+8jOatpOWxnuaAp+acieaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBtYXhMZW5ndGg7XHJcblxyXG4gICAgQElucHV0KCkgbWFwcGluZ0ZuOiAocm93RGF0YSwgbWFwRmllbGRzLCBiaW5kaW5nRGF0YT86IGFueSkgPT4gdm9pZDtcclxuICAgIC8qKiDmlbDmja7liJfooaggKi9cclxuICAgIEBJbnB1dCgpIGl0ZW1zOiBhbnk7XHJcbiAgICAvLyDmlLbol4/liJfooahcclxuICAgIEBJbnB1dCgpIGZhdm9yaXRlSXRlbXM6IGFueVtdID0gW107XHJcbiAgICAvKiog6Ieq5a6a5LmJ5pWw5o2uICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EYXRhOiBhbnk7XHJcblxyXG4gICAgLyoqIOe7keWumuWAvOaJgOWcqOeahOWvueixoSAqL1xyXG4gICAgQElucHV0KCkgYmluZGluZ0RhdGE6IHt9O1xyXG5cclxuICAgIEBJbnB1dCgpIHRyZWVJbmZvOiBUcmVlSW5mbztcclxuICAgIC8qKiDmmK/lkKblkK/nlKjnuqfogZTpgInmi6nmjqfliLbpgInpobkgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNhc2NhZGUgPSBmYWxzZTtcclxuICAgIC8qKiDnuqfogZTmjqfliLbpu5jorqTlgLzvvJogZW5hYmxlLCB1cCwgZG93biwgZGlzYWJsZSAqL1xyXG4gICAgQElucHV0KCkgY2FzY2FkZVN0YXR1czogJ2VuYWJsZScgfCAndXAnIHwgJ2Rvd24nIHwgJ2Rpc2FibGUnID0gJ2VuYWJsZSc7XHJcblxyXG4gICAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAnJztcclxuXHJcbiAgICAvKiog5pi+56S65bey6YCJ6K6w5b2V5YiX6KGo44CCIOm7mOiupOS4uiBmYWxzZSDkuI3mmL7npLogKi9cclxuICAgIEBJbnB1dCgpIHNob3dTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlupTnlKjmlLbol4/lpLkgKi9cclxuICAgIEBJbnB1dCgpIHVzZUZhdm9yaXRlID0gZmFsc2U7XHJcbiAgICAvKiog5pS26JeP5pWw5o2u5p2l6Ieq5LqO77yaIGxvY2FsZTog5pys5Zyw5a2Y5YKo77yMIHJlbW90ZTog5pyN5Yqh5Zmo56uv5a2Y5YKoICovXHJcbiAgICBASW5wdXQoKSBmYXZvcml0ZURhdGFGcm9tOiAnbG9jYWxlJyB8ICdyZW1vdGUnID0gJ3JlbW90ZSc7XHJcbiAgICAvKiog5L2/55So5o+Q56S6LOW/q+aNt+mAieaLqSAqL1xyXG4gICAgQElucHV0KCkgdXNlVGlwID0gZmFsc2U7XHJcbiAgICAvKiog6K6w5b2V56qX5Y+j5aSn5bCPICovXHJcbiAgICBASW5wdXQoKSBpc1JlY29yZFNpemUgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5b+r6YCf6YCJ5oupICovXHJcbiAgICBASW5wdXQoKSB1c2VySWQ6IHN0cmluZztcclxuXHJcbiAgICAvLyDmmK/lkKblkK/nlKjpgInkuK12YWx1ZeWAvOWvueW6lOeahOihjOaVsOaNrlxyXG4gICAgQElucHV0KCkgZW5hYmxlVG9TZWxlY3QgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGVuYWJsZUZpbmRUZXh0ID0gZmFsc2U7XHJcbiAgICAvKiogLTE6IOS4jeWxleW8gO+8myAwOiDlhajpg6jlsZXlvIDvvJs+MDog5bGV5byA5Yiw5oyH5a6a57qn5pWwICovXHJcbiAgICBASW5wdXQoKSBleHBhbmRMZXZlbCA9IC0xO1xyXG4gICAgLyoqIOagkeW9ouW4ruWKqeaVsOaNruWKoOi9veaWueW8j++8miBkZWZhdWx0OiDlhoXnva7lj5bmlbDvvJsgbG9hZGFsbDog5Yqg6L295omA5pyJIGxheWVybG9hZO+8muWIhuWxguWKoOi9vSAqL1xyXG4gICAgQElucHV0KCkgbG9hZFRyZWVEYXRhVHlwZTogJ2RlZmF1bHQnIHwgJ2xvYWRhbGwnIHwgJ2xheWVybG9hZCcgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgLyoqIOeql+WPo+aJk+W8gOWQjueri+WNs+WKoOi9veaVsOaNru+8jOm7mOiupOS4uiB0cnVlICovXHJcbiAgICBASW5wdXQoKSBsb2FkRGF0YVdoZW5PcGVuID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvvOiIquWIl+ihqO+8jOagkeWIl+ihqOWcqOW4ruWKqeaJk+W8gOWQjumAieS4reeahOaVsOaNrjtcclxuICAgICAqIOiuvue9ruWQju+8jGBzZWxlY3RGaXJzdEluTmF2YCDlpLHmlYjvvIFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbmF2U2VsZWN0ZWRJZHMgPSAnJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvvOiIquW4ruWKqe+8jOmAieS4reesrDHmnaHmlbDmja7vvIzpu5jorqTkuLogZmFsc2U7XHJcbiAgICAgKiDms6jmhI/vvJrlvZNgbmF2U2VsZWN0ZWRJZHNg5LiN5Li656m65pe277yM5q2k5bGe5oCn5aSx5pWI44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdEZpcnN0SW5OYXYgPSBmYWxzZTtcclxuXHJcblxyXG4gICAgLyoqIOWQr+eUqOaehOmAoOWujOaVtOagkei/h+a7pCAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRnVsbFRyZWUgPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmmL7npLrmlofmnKzoh6rlrprkuYnlh73mlbAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGb3JtYXR0ZXI6ICh2YWx1ZTogc3RyaW5nLCBkYXRhOiBhbnksIGluc3RhbmNlOiBhbnkpID0+IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIC8qKiDmmL7npLrmlofmnKzlrZfmrrXpm4blkIjvvIzku6Ug6Iux5paHIOmAl+WPt+malOW8gCAqL1xyXG4gICAgQElucHV0KCkgZGlzcGxheUZpZWxkcyA9ICcnO1xyXG4gICAgQElucHV0KCkgZGlzcGxheVRleHRTZXBhcmF0b3IgPSAnXyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDluK7liqnlhYPmlbDmja5JRO+8jOS4jeS4uuepuuaXtuiwg+eUqOaMh+WumueahFVSSVxyXG4gICAgICogL2FwaS9ydW50aW1lL2JjYy92MS4wL2hlbHAvZGF0YS97aGVscElkfVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBoZWxwSWQgPSAnJztcclxuICAgIC8qKiDmlofmnKzlr7npvZDmlrnlvI/vvJsgbGVmdCB8IGNlbnRlciB8IHJpZ2h0OyDpu5jorqQgbGVmdCAqL1xyXG4gICAgQElucHV0KCkgdGV4dEFsaWduID0gJ2xlZnQnO1xyXG5cclxuICAgIC8qKiDpvKDmoIfmu5Hov4fovpPlhaXmoYbml7bmmL7npLrovpPlhaXmoYblhoXnmoTmlofmnKzkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRpdGxlID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHVzZUV4dGVuZEluZm8gPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGV4dEluZm9GaWVsZHMgPSAnJztcclxuICAgIEBJbnB1dCgpIGV4dEluZm9Gb3JtYXR0ZXI6IEV4dEluZm9Gb3JtYXR0ZXI7XHJcbiAgICBASW5wdXQoKSBleHRlbmRJbmZvID0gJyc7XHJcbiAgICAvKiogSURFIOiuvuiuoeWZqOiHquWumuS5ieagvOW8j+WMliAyMTAzICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21Gb3JtYXR0ZXI6IEN1c3RvbURhdGFGb3JtYXR0ZXIgPSBudWxsO1xyXG4gICAgQElucHV0KCkgY3VzdG9tTmF2Rm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuXHJcbiAgICAvKiog6Ieq5a6a5LmJ56Gu5a6a5LqL5Lu2ICovXHJcbiAgICBASW5wdXQoKSBva0hhbmRsZXIgPSBudWxsO1xyXG4gICAgLyoqIOiHquWumuS5ieWPlua2iOS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgY2FuY2VsSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICAgQElucHV0KCkgdGFnYm94SGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgQElucHV0KCkgbWF4VGFnYm94SGVpZ2h0O1xyXG5cclxuICAgIC8qKiDlkK/nlKjojrflj5bmiYDmnInlrZDnuqfmlbDmja7nmoTlip/og70gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUdldEFsbENoaWxkTm9kZXMgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3J0Y3V0S2V5ID0ge1xyXG4gICAgICAgIC8qKiDmiZPlvIDluK7liqnnqpflj6MgKi9cclxuICAgICAgICBvcGVuOiAnQXJyb3dSaWdodCcsXHJcbiAgICAgICAgLyoqIOehruiupOmAieaLqeaVsOaNriAqL1xyXG4gICAgICAgIGNvbmZpcm06ICdFbnRlcicsXHJcbiAgICAgICAgLyoqIOaQnOe0ouahhueEpueCuSAqL1xyXG4gICAgICAgIHNlYXJjaEZvY3VzOiAnRjMnLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIrkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlVXA6ICdBcnJvd1VwJyxcclxuICAgICAgICAvKiog6YCJ5Lit5LiL5LiA5p2hICovXHJcbiAgICAgICAgbW92ZURvd246ICdBcnJvd0Rvd24nLFxyXG4gICAgICAgIC8qKiDlsZXlvIDoioLngrkgKi9cclxuICAgICAgICBleHBhbmQ6ICdBcnJvd1JpZ2h0JyxcclxuICAgICAgICAvKiog5oqY5Y+g6IqC54K5ICovXHJcbiAgICAgICAgY29sbGFwc2U6ICdBcnJvd0xlZnQnLFxyXG4gICAgICAgIC8qKiDkuIvkuIDpobUgKi9cclxuICAgICAgICBuZXh0UGFnZXI6ICdQYWdlRG93bicsXHJcbiAgICAgICAgLyoqIOS4iuS4gOmhtSAqL1xyXG4gICAgICAgIHByZXZQYWdlcjogJ1BhZ2VVcCdcclxuICAgIH07XHJcblxyXG4gICAgLyoqIOaVsOaNrumAieaLqeWQju+8jOWAvOaYoOWwhOWJjeinpuWPkVxyXG4gICAgICog6L+U5ZueIE9ic2VydmFibGVcclxuICAgICAqICAgICAgY2FuU2VsZWN0OiA8Ym9vbGVhbj4gIOaYr+WQpuWFgeiuuOmAieaLqVxyXG4gICAgICogICAgICBtZXNzYWdlOiA8c3RyaW5nPiDkuI3lhYHorrjpgInmi6nml7bnmoTmj5DnpLrkv6Hmga9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYmVmb3JlU2VsZWN0RGF0YTogKHA6IHsgaW5zdGFuY2U6IGFueTsgZGF0YTogYW55IH0pID0+IE9ic2VydmFibGU8eyBjYW5TZWxlY3Q6IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZyB9IHwgYm9vbGVhbj47XHJcblxyXG4gICAgQE91dHB1dCgpIHNlbGVjdGVkRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjbGVhciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWFyY2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyDluK7liqnmlofmnKzmoYbkuK3lgLzlj5jljJbkuovku7ZcclxuICAgIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgbG9hZFN1Y2Nlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VyQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kVHJlZU5vZGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgdGV4dENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHsgZGF0YTogYW55LCBpc0NoZWNrOiBib29sZWFuIH0+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIHRhZ1JlbW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOWGheWuueS4reeVmeeZvei+uei3nSAqL1xyXG4gICAgY29udGFpbmVyTWFyZ2luID0geyB0b3A6IDAsIGJvdHRvbTogNSwgbGVmdDogMTAsIHJpZ2h0OiAxMCB9O1xyXG5cclxuICAgIGNvbnRhaW5lclN0eWxlID0ge1xyXG4gICAgICAgIG1hcmdpbkxlZnQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLmxlZnQgKyAncHgnLFxyXG4gICAgICAgIG1hcmdpblJpZ2h0OiB0aGlzLmNvbnRhaW5lck1hcmdpbi5yaWdodCArICdweCcsXHJcbiAgICAgICAgbWFyZ2luVG9wOiB0aGlzLmNvbnRhaW5lck1hcmdpbi50b3AgKyAncHgnLFxyXG4gICAgICAgIG1hcmdpbkJvdHRvbTogdGhpcy5jb250YWluZXJNYXJnaW4uYm90dG9tICsgJ3B4J1xyXG4gICAgfTtcclxuXHJcbiAgICBfZ3JpZE9wdGlvbnM6IExvb2t1cEdyaWRPcHRpb25zID0gbG9va3VwR3JpZERlZmF1bHRzO1xyXG5cclxuICAgIGdldCBncmlkT3B0aW9ucygpIHtcclxuICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiB0aGlzLmNvbHVtbnMgJiYgdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDAgJiYgIXRoaXMuY29sdW1ucy5maW5kKGl0ZW0gPT4gaXRlbS5maWVsZCA9PT0gRkFWT1JJVEVfRklFTERfTkFNRSkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6IEZBVk9SSVRFX0ZJRUxEX05BTUUsIHRpdGxlOiAnJywgd2lkdGg6IDQwLCBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IHRoaXMuZmF2SGVscGVyLmZhdm9yaXRlQ29sdW1uRm9ybWF0dGVyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5fZ3JpZE9wdGlvbnMsIHtcclxuICAgICAgICAgICAgc2luZ2xlU2VsZWN0OiB0aGlzLnNpbmdsZVNlbGVjdCxcclxuICAgICAgICAgICAgaWRGaWVsZDogdGhpcy5pZEZpZWxkLFxyXG4gICAgICAgICAgICB1cmk6IHRoaXMudXJpLFxyXG4gICAgICAgICAgICBzaG93RmlsdGVyQmFyOiB0aGlzLnNob3dGaWx0ZXJCYXIsXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHRoaXMucGFnaW5hdGlvbixcclxuICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgICAgICB0b3RhbDogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuY29sdW1ucyxcclxuICAgICAgICAgICAgcmVzaXphYmxlQ29sdW1uczogdHJ1ZSxcclxuICAgICAgICAgICAgZml4ZWRIZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIGhvdmVyOiB0cnVlLFxyXG4gICAgICAgICAgICB0cmVlSW5mbzogdGhpcy50cmVlSW5mb1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JpZE9wdGlvbnMob3B0cykge1xyXG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fZ3JpZE9wdGlvbnMsIG9wdHMpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID0gdGhpcy5tdWx0aVNlbE1nci5pbml0U2VsZWN0ZWRDb2x1bW5zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY29udGVudENvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSBjb250ZW50Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZmF2b3JpdGVzQ29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGZhdm9yaXRlc0NvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2xlZnRDb250YWluZXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgbGVmdENvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2NlbnRlckNvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSBjZW50ZXJDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdtdWx0aVNlbGVjdERUJykgbXVsdGlTZWxlY3REVDogRGF0YVRhYmxlQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZCgnaW5wdXRncm91cCcpIGlucHV0R3JvdXA6IElucHV0R3JvdXBDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdsZWZ0UGFuZWwnKSBsZWZ0UGFuZWw6IExheW91dFBhbmVsQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZCgndGFnYm94JykgdGFnYm94OiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ29rYnRuJykgb2tCdXR0b246IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgY29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8YW55PjtcclxuICAgIGxlZnRDb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxMb29rdXBMZWZ0Q29tcG9uZW50PjtcclxuICAgIGZhdm9yaXRlc0NvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcblxyXG4gICAgcHVibGljIGh0dHA6IElMb29rdXBIdHRwU2VydmljZTtcclxuICAgIHB1YmxpYyBtZXNzYWdlclNlcnZpY2U6IE1lc3NhZ2VyU2VydmljZTtcclxuICAgIHB1YmxpYyBsb2FkaW5nU2VydmljZTogTG9hZGluZ1NlcnZpY2U7XHJcbiAgICBsb2FkaW5nOiBMb2FkaW5nQ29tcG9uZW50O1xyXG4gICAgLy8gZGF0YUZpZWxkTWFwczogYW55O1xyXG4gICAgbmF2aWdhdGlvbk9wdGlvbnM6IE5hdmlnYXRpb25PcHRpb25zO1xyXG5cclxuICAgIC8vIOWvvOiIquW4ruWKqeW3puWImeWuveW6plxyXG4gICAgbGVmdFBhbmVsV2lkdGggPSAzMjA7XHJcbiAgICAvLyDlr7zoiKrluK7liqnnqpflj6PmnIDlsI/lrr3luqZcclxuICAgIG5hdkxvb2t1cERpYWxvZ01pbldpZHRoID0gOTYwO1xyXG5cclxuICAgIG5hdmlnYXRpb25GaWx0ZXI6IE5hdmlnYXRpb25GaWx0ZXIgPSBudWxsO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgICBkaWFsb2dPcGVuZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAgIGRpYWxvZ0Nsb3NlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIGlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgaXNUYWJDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgZGlzcGxheUluZm86IERpc3BsYXlJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgZGlzcGxheUluZm9EZWZhdWx0KTtcclxuXHJcbiAgICB0YWJDaGFuZ2VTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgLy8g5pqC5a2Y6KGM54K55Ye75pWw5o2uICDnlKjkuo7mlLbol49cclxuICAgIHBlcnNvbmFsQ29uZjogUGVyc29uYWxDb25maWcgPSB7fTtcclxuICAgIGZhdm9yaXRlQ29sdW1uczogYW55W10gPSBbXTtcclxuICAgIC8qKiDkuLTml7bmn6Xor6Llj4LmlbAgKi9cclxuICAgIF9zZWFyY2hTdGF0ZSA9IG51bGw7XHJcbiAgICBhbGxEYXRhOiBhbnkgPSBbXTtcclxuICAgIGdldCBzZWxlY3Rpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuZ2V0U2VsZWN0aW9ucygpO1xyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0SXRlbXNbMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB1c2VQZXJzaW9uYWxDb25mKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZUZhdm9yaXRlIHx8IHRoaXMudXNlVGlwIHx8IHRoaXMuaXNSZWNvcmRTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkaXNwbGF5VGV4dExpc3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVRleHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheVRleHQuc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHBlcnNvbmFsQ29uZmlnU2VydmljZTogUGVyc29uYWxDb25maWdTZXJ2aWNlO1xyXG4gICAgcHVibGljIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZTtcclxuICAgIHB1YmxpYyB0cmVlTm9kZUhlbHBlcjogVHJlZU5vZGVIZWxwZXI7XHJcbiAgICBwdWJsaWMgbG9jYWxTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgcHVibGljIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2U7XHJcbiAgICBhbGxDb2x1bW5zVGl0bGUgPSAn5omA5pyJ5YiXJztcclxuICAgIG11c3RXcml0ZVNvbWV0aGluZyA9ICfor7fovpPlhaXlhbPplK7lrZflkI7mn6Xor6LjgIInO1xyXG4gICAgbXVzdENob29zQWRhdGFyb3cgPSAn6K+36YCJ5oup5LiA5p2h6K6w5b2V77yBJztcclxuICAgIGFkZEZhdm9yaXRlU3VjY2VzcyA9ICfmlLbol4/miJDlip/jgIInO1xyXG4gICAgZGVsRmF2b3JpdGVTdWNjZXNzID0gJ+enu+mZpOaUtuiXj+aIkOWKn+OAgic7XHJcblxyXG4gICAgc2VhcmNoaW5nID0gZmFsc2U7XHJcbiAgICAvKiog5Li05pe25a2Y5YKo5p+l6K+i57uT5p6c6ZuGICovXHJcbiAgICBfc2VhcmNoUmVzdWx0ID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBpbml0aWFsaXphdGlvblN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIC8qKiDlpJrpgInml7bvvIzpgInkuK3nmoTmlbDmja4gKi9cclxuICAgIGN1cnJlbnRTZWxlY3RlZEl0ZW1zOiBPYnNlcnZhYmxlPGFueT4gPSBvZihbXSk7XHJcbiAgICAvKiog5bey6YCJ5pWw5o2u5YiX5L+h5oGvICovXHJcbiAgICBzZWxlY3RlZENvbHVtbnMgPSBbXTtcclxuICAgIGFjdGl2ZVRhYjogc3RyaW5nIHwgJ2RhdGFsaXN0JyB8ICdmYXZvcml0ZScgfCAnc2VsZWN0ZWQnID0gJ2RhdGFsaXN0JztcclxuXHJcbiAgICBmYXZIZWxwZXI6IEZhdm9yaXRlSGVscGVyID0gbnVsbDtcclxuICAgIHR0RXZlbnRNZ3I6IFRyZWVUYWJsZUV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICBtdWx0aVNlbE1ncjogTXVsdGlTZWxlY3Rpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGh0dHBNZ3I6IExvb2t1cEh0dHBNYW5hZ2VyID0gbnVsbDtcclxuICAgIGxvb2t1cENtcE1ncjogTG9va3VwQ29tcG9uZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICBkaWFsb2dNZ3I6IExvb2t1cERpYWxvZ01hbmFnZXIgPSBudWxsO1xyXG4gICAgc2VsZWN0aW9uTWdyOiBTZWxlY3Rpb25NYW5hZ2VyID0gbnVsbDtcclxuICAgIGR0RXZlbnRNZ3I6IERhdGFUYWJsZUV2ZW50TWFuYWdlciA9IG51bGw7XHJcblxyXG4gICAgbG9va3VwU2VsZWN0aW9uU2VyOiBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICBjb250cm9sSWQgPSAnJztcclxuICAgIHNhdmluZ0Zhb3JpdGVEYXRhID0gZmFsc2U7XHJcbiAgICBpc1JlYWR5ID0gZmFsc2U7XHJcbiAgICBzaG93VGFnYm94Q2xlYXJCdXR0b24gPSBmYWxzZTtcclxuICAgIGhhc0Vycm9yID0gZmFsc2U7XHJcblxyXG4gICAgaXNHZXRBbGxDaGlkbE5vZGVzID0gZmFsc2U7XHJcbiAgICBldmVudE1hbmFnZXI6IEV2ZW50TWFuYWdlcjtcclxuICAgIC8qKiDpgInkuK3orrDlvZVJRO+8jOiHquWumuS5ieW4ruWKqeWPluaVsOaXtuS9v+eUqCAqL1xyXG4gICAgc2VsZWN0ZWRJZHMgPSBbXTtcclxuICAgIHByaXZhdGUgZmFycmlzSW5zdGFuY2VzOiBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGluamVjdG9yOiBJbmplY3RvciwgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZiwgcHVibGljIHV0aWxzOiBDb21tb25VdGlscyxcclxuICAgICAgICBwcml2YXRlIGRlZmF1bHRNYXBwaW5nOiBMb29rdXBEZWZhdWx0TWFwcGluZywgcHVibGljIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwdWJsaWMgc2hvcnRjdXRzOiBTaG9ydGN1dHNTZXJ2aWNlLCBwdWJsaWMgbG9va3VwVXRpbHM6IExvb2t1cFV0aWxzLFxyXG4gICAgICAgIHByaXZhdGUgem9uZTogTmdab25lLCBwcml2YXRlIHJlbmRlcjI6IFJlbmRlcmVyMlxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoaW5qZWN0b3IsIGVsLCBjaGFuZ2VEZXRlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkSXRlbXMgPSB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5zZWxlY3RlZCQ7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmluamVjdG9yLmdldChFdmVudE1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzID0gdGhpcy5pbmplY3Rvci5nZXQoRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tHcmlkT3B0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheUluZm8udGl0bGUgPSB0aGlzLnRpdGxlO1xyXG4gICAgICAgIC8qKiDkvKDpgJLkuIrkuIvmlocgKi9cclxuICAgICAgICBpZiAodGhpcy5odHRwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cC5jb250ZXh0ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hbGxDb2x1bW5zVGl0bGUgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwLmFsbENvbHVtbnMnKTtcclxuICAgICAgICB0aGlzLm11c3RXcml0ZVNvbWV0aGluZyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXAubXVzdFdyaXRlU29tZXRoaW5nJyk7XHJcbiAgICAgICAgdGhpcy5tdXN0Q2hvb3NBZGF0YXJvdyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXAubXVzdENob29zQWRhdGFyb3cnKTtcclxuICAgICAgICB0aGlzLmFkZEZhdm9yaXRlU3VjY2VzcyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXAuZmF2b3JpdGVJbmZvLmFkZEZhdicpIHx8IHRoaXMuYWRkRmF2b3JpdGVTdWNjZXNzO1xyXG4gICAgICAgIHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzID0gdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cC5mYXZvcml0ZUluZm8uY2FuY2VsRmF2JykgfHwgdGhpcy5kZWxGYXZvcml0ZVN1Y2Nlc3M7XHJcblxyXG4gICAgICAgIHRoaXMuZGlhbG9nTWdyLm9uRGlhbG9nQ3JlYXRlZCgpO1xyXG4gICAgICAgIC8vIOWIneWni+WMluS4quaAp+WMlumFjee9rlxyXG4gICAgICAgIGlmICh0aGlzLnVzZVBlcnNpb25hbENvbmYpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIuaW5pdFBlcnNvbmFsSW5mbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRXh0ZW5kSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0ZW5kSW5mbyhqc29uRGF0YSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICBpZiAobikge1xyXG4gICAgICAgICAgICAgICAgbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTWdyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHsgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBvblRleHRDaGFuZ2VkLmJpbmQodGhpcykoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNob3J0Y3V0cy5hZGQoe1xyXG4gICAgICAgICAgICAvLyAgICAga2V5OiAnRjInLFxyXG4gICAgICAgICAgICAvLyAgICAgdGFyZ2V0OiB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAvLyAgICAgY29tbWFuZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygpO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLmxpc3Rlbih0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LCAna2V5ZG93bi5GMicsIHRoaXMuc2hvd0RpYWxvZy5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTW91c2VFdmVudEZvclRhZ1ZpZXcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhZ2JveEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPSB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tdWx0aS1tb3JlJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGJoID0gdGhpcy50YWdib3hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGJoICE9PSAnYXV0bycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YmggKz0gJ3B4JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4VGFnYm94SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShlbCwgJ21heEhlaWdodCcsIGAke3RoaXMubWF4VGFnYm94SGVpZ2h0fXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShlbCwgJ2hlaWdodCcsIHRiaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmFkZCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUluc3RhbmNlKCkge1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IHRoaXMuaW5qZWN0b3IuZ2V0KFNlcnZlclNpZGVUb2tlbiwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChNZXNzYWdlclNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2FkaW5nU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTm90aWZ5U2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoUGVyc29uYWxDb25maWdTZXJ2aWNlLCBudWxsKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIgPSBuZXcgTG9va3VwU2VsZWN0aW9uU2VydmljZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy51dGlsU2VydmljZSA9IG5ldyBVdGlsU2VydmljZSh0aGlzKTtcclxuICAgICAgICB0aGlzLmxvY2FsU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVIZWxwZXIgPSBuZXcgVHJlZU5vZGVIZWxwZXIodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZmF2SGVscGVyID0gbmV3IEZhdm9yaXRlSGVscGVyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudHRFdmVudE1nciA9IG5ldyBUcmVlVGFibGVFdmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5tdWx0aVNlbE1nciA9IG5ldyBNdWx0aVNlbGVjdGlvbk1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5odHRwTWdyID0gbmV3IExvb2t1cEh0dHBNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubG9va3VwQ21wTWdyID0gbmV3IExvb2t1cENvbXBvbmVudE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dNZ3IgPSBuZXcgTG9va3VwRGlhbG9nTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nciA9IG5ldyBTZWxlY3Rpb25NYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZHRFdmVudE1nciA9IG5ldyBEYXRhVGFibGVFdmVudE1hbmFnZXIodGhpcyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNob3dEaWFsb2coKTogYW55IHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLmluaXREaXNwbGF5VmFsdWUoKTtcclxuICAgICAgICB0aGlzLmRpY3RQaWNraW5nU3Vic2NyaXB0aW9uID0gdGhpcy5kaWN0UGlja2luZyh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzXHJcbiAgICAgICAgfSkuc3Vic2NyaWJlKChwcjogUGlja2luZ1Jlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ01nci5jYW5PcGVuRGlhbG9nKHByKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDliKTmlq3mmK/lkKbkuLrlj4zliJfooajluK7liqkgKi9cclxuICAgIGlzRG91YmxsZUxpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3QgfHwgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIC8qKiDliKTmlq3mmK/lkKbmmL7npLrkuLrmoJHluK7liqkgKi9cclxuICAgIGlzVHJlZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5VHlwZS50b1VwcGVyQ2FzZSgpID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemVkKGU6IGFueSkge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKGUuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoZS5zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6aW5nKHBvczogSVJlc2l6ZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZy5lbWl0KHBvcy5zaXplKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNtcChwb3Muc2l6ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmxlZnRQYW5lbC53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTWF4RGlhbG9nKHBvczogSVJlc2l6ZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAocG9zLnNpemUpO1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnRQYW5lbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmxlZnRQYW5lbC53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpYWxvZ01heGVkLmVtaXQocG9zLnNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZUNtcChzaXplPzogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudFJlZiB8fCAhdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzaXplKSB7XHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLmRpYWxvZy5zaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBfc2l6ZSA9IHtcclxuICAgICAgICAgICAgd2lkdGg6IHNpemUud2lkdGggLSB0aGlzLmNvbnRhaW5lck1hcmdpbi5sZWZ0IC0gdGhpcy5jb250YWluZXJNYXJnaW4ucmlnaHQsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5kaWFsb2dNZ3IuZ2V0SGVpZ2h0KClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoX3NpemUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc1JlY29yZFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmYuc2l6ZSA9IHRoaXMuZGlhbG9nLnNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVBlcnNvbmFsQ29uZmlnKHsgc2l6ZTogdGhpcy5kaWFsb2cuc2l6ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgIF9zaXplLndpZHRoID0gc2l6ZS53aWR0aCAtIHRoaXMubGVmdFBhbmVsLndpZHRoIC0gMjc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoX3NpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tHcmlkT3B0aW9ucygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZ3JpZE9wdGlvbnMuaWRGaWVsZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ+acquiuvue9ruS4u+mUruWtl+autSBpZEZpZWxkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlU2VsZWN0RGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVNlbGVjdERhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbXBvbmVudFR5cGUoKTogVHlwZTxhbnk+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9ICdMSVNUJztcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLkxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3Q6XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93TG9hZGluZyhtc2cgPSAnJykge1xyXG4gICAgICAgIGlmICh0aGlzLmRpYWxvZyAmJiB0aGlzLmRpYWxvZy5tb2RhbENvbnRlbnQgJiYgIXRoaXMubG9hZGluZykge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmRpYWxvZy5tb2RhbENvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBkZWxheTogMjAwLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKG1zZykge1xyXG4gICAgICAgICAgICAgICAgb3B0c1snbWVzc2FnZSddID0gbXNnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3cob3B0cyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlTG9hZGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlYXJjaENvbHVtbnMocmVzZGF0YTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgY29scyA9IHJlc2RhdGEuY29sdW1ucyB8fCB0aGlzLmNvbHVtbnM7XHJcbiAgICAgICAgaWYgKHJlc2RhdGEuc2VhcmNoRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNkYXRhLnNlYXJjaEZpZWxkcy5tYXAoc2YgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbHMuZmluZChjb2wgPT4gY29sLmZpZWxkLnRvTG93ZXJDYXNlKCkgPT09IHNmLnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZi5sYWJlbCA9IGMudGl0bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Y7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29scykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29scy5maWx0ZXIoYyA9PiBjLnNlYXJjaEZpZWxkKS5tYXAoY29sID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNvbC50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sLmZpZWxkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGluaXRPcHRpb25zKHJlc0RhdGE6IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBsZXQgb2JzZXIgPSBvZih0cnVlKTtcclxuICAgICAgICB0aGlzLmdyaWRPcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyhyZXNEYXRhKTtcclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAocmVzRGF0YS5jb2x1bW5zICYmIHJlc0RhdGEuY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHJlc0RhdGEuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRMb29rdXBUaXRsZVRleHQocmVzRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgdGhpcy5kaWFsb2dXaWR0aCA8IHRoaXMubmF2TG9va3VwRGlhbG9nTWluV2lkdGggJiYgIXRoaXMuaXNSZWNvcmRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gdGhpcy5uYXZMb29rdXBEaWFsb2dNaW5XaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLnJlU2l6ZSh7IHdpZHRoOiB0aGlzLmRpYWxvZ1dpZHRoIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VzdG9tRGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPSByZXNEYXRhLmRpc3BsYXlUeXBlIHx8IHRoaXMuZGlzcGxheVR5cGUgfHwgJ0xJU1QnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVDb21wb25lbnRXaXRoU2VydmVyRGF0YShyZXNEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHJlc0RhdGEubmF2aWdhdGlvbiAmJiAhdGhpcy5sZWZ0Q29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zID0gcmVzRGF0YS5uYXZpZ2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5ob3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyh0aGlzLm5hdmlnYXRpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjb2x1bW5zIGZvcm1hdHRlclxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyW2NvbC5maWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5mb3JtYXR0ZXIgPSB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcltjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNbJ3Jvd1N0eWxlciddID0gdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIucm93U3R5bGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNbJ2NlbGxTdHlsZXInXSA9IHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyLmNlbGxTdHlsZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gMjAyMTA5MjYg5qCR5a+86Iiq5biu5Yqp5LitIOW3puS+p+agkeaUr+aMgeWIhuWxguWKoOi9vVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlID0gdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy50cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSAhPT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uYXZfdHJlZWluZm9fbG9hZHR5cGUgPSB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09ICdsb2FkYWxsJyA/ICdhbGwnIDogJ2FzeW5jJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy50cmVlSW5mby5sb2FkRGF0YVR5cGUgPSBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG9ic2VyID0gdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlTGVmdENvbXBvbmVudCh0aGlzLm5hdmlnYXRpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUNvbnRlbnQodGhpcy5ncmlkT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUZhdm9yaXRlQ29tcG9uZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1RleHRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc2VhcmNoRGF0YS52YWx1ZSA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgY29sdW1ucyBmb3JtYXR0ZXJcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlcltjb2wuZmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLmZvcm1hdHRlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyLnJvd1N0eWxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uucm93U3R5bGVyID0gdGhpcy5jdXN0b21Gb3JtYXR0ZXIucm93U3R5bGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXIuY2VsbFN0eWxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuY2VsbFN0eWxlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyLmNlbGxTdHlsZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHJldHVybiBvYnNlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruW4ruWKqeeql+WPo+agh+mimFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldExvb2t1cFRpdGxlVGV4dChyZXNEYXRhOiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEuZGlzcGxheUluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyA9IHJlc0RhdGEuZGlzcGxheUluZm87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlpoLmnpzoh6rlrprkuYnmoIfpopjvvIzlsIbku6XmraTmoIfpopjkuLrlh4bjgILlkKbliJnliqDovb3mnI3liqHlmajnq6/ov5Tlm57nmoTmlbDmja5cclxuICAgICAgICBpZiAodGhpcy50aXRsZSAmJiB0aGlzLnRpdGxlICE9PSAn5q2k5aSE5pi+56S65biu5Yqp5qCH6aKYJykge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlJbmZvICYmIHJlc0RhdGEudGl0bGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc3BsYXlJbmZvLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gcmVzRGF0YS50aXRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dHZXRBbGxDaGlsZHJlbkNoZWNrYm94KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVHJlZSgpICYmIHRoaXMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVHZXRBbGxDaGlsZE5vZGVzID0gdGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGUgIT09ICdhbGwnICYmIHRoaXMudHJlZUluZm8ubGF5ZXJUeXBlID09PSAncGF0aGNvZGUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0RGF0YSgpIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgbmV4dDogKGRhdGE6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOacjeWKoeWZqOerr+WPkeeUn+mUmeivr++8jOi/lOWbnk5VTEwg5pe277yM55u05o6l5YWz6Zet56qX5Y+jXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdE9wdGlvbnMoZGF0YSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ29sdW1ucyA9IHRoaXMubXVsdGlTZWxNZ3IuaW5pdFNlbGVjdGVkQ29sdW1ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVDb2x1bW5zID0gdGhpcy5mYXZIZWxwZXIuZ2V0RmF2b3JpdGVDb2x1bW5zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVBlcnNpb25hbENvbmYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS5nZXRQZXJzb25hbERhdGEoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2Uuc2F2ZVBlcnNvbmFsQ29uZmlnKHRoaXMucGVyc29uYWxDb25mKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUYWJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmxvYWRTZWxlY3Rpb25zKGRhdGEuc2VsZWN0ZWRJdGVtcyB8fCBbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a+86Iiq5biu5Yqp5pe277yM6K6+572u5bem5L6n6YCJ5Lit5pWw5o2u5pe277yM5LiN5Yqg6L295Li75pWw5o2u5YiX6KGo44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hdlNlbGVjdGVkSWRzIHx8IHRoaXMuc2VsZWN0Rmlyc3RJbk5hdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVdoZW5PcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09ICdkYXRhbGlzdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR0LmxvYWREYXRhVHlwZSA9PT0gJ2FsbCcgJiYgdHQuc2VhcmNoRGF0YS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0LnRvZ2dsZUV4cGFuZCh0aGlzLml0ZW1zWzBdLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXN1bHQgPSBudWxsOyAvLyDmuIXnqbrkuLTml7bmn6Xor6Ig57uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmlzUmVhZHkkLm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cGluaXRpYWxpemF0aW9uU3ViamVjdC5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pc1JlYWR5JC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdCA9IG51bGw7IC8vIOa4heepuuS4tOaXtuafpeivoiDnu5PmnpxcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5NZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yLk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcign5bqU55So5pyN5Yqh5Zmo6ZSZ6K+vLOivt+iBlOezu+ezu+e7n+euoeeQhuWRmO+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgcDogYW55ID0ge1xyXG4gICAgICAgICAgICBwYWdlSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUgfHwgMjAsXHJcbiAgICAgICAgICAgICAgICBwYWdlSW5kZXg6IDFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgdDogTE9BRF9EQVRBX1RZUEUgPSAnYWxsJztcclxuICAgICAgICBpZiAodGhpcy5pc1RleHRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgcCA9IHtcclxuICAgICAgICAgICAgICAgIHNlYXJjaDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiAnKicsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuZGlzcGxheVRleHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pc1RhYkNoYW5nZWQgJiYgdGhpcy5lbmFibGVUb1NlbGVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWxzID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0U2VsZWN0ZWRJZHMoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHMgJiYgdmFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHBbJ3NlbGVjdGVkSW5mbyddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiB2YWxzXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbJ3NlbGVjdGVkSWRzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBwWydzZWxlY3RlZEluZm8nXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiB0aGlzWydzZWxlY3RlZElkcyddXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmh0dHBNZ3IubG9va3VwUmVxdWVzdChwLCB0KS5waXBlKFxyXG4gICAgICAgICAgICBtYXAoKHJlc3REYXRhOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN0RGF0YS5zZWxlY3RlZEl0ZW1zID0gcmVzdERhdGFbJ3NlbGVjdGVkRGF0YSddIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdERhdGEgJiYgdHlwZW9mIHJlc3REYXRhID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0RGF0YS5zZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3REYXRhO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkuc3Vic2NyaWJlKG9ic2VydmVyKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQsIHJlYmluZEV2ZW50ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2RhdGFsaXN0Jykge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLnVwZGF0ZUZhdm9yaXRlc1N0YXR1cyhyZXNEYXRhLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5MaXN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFUYWJsZURhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYmluZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHRFdmVudE1nci5iaW5kRGF0YVRhYmxlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlVGFibGVEYXRhKHJlc0RhdGEsIHJlYmluZEV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUYWIgPT09ICdmYXZvcml0ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkRmF2RGF0YShyZXNEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmAieS4reaVsOaNrlxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZEZhdkRhdGEocmVzdWx0OiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgLy8g5Yqg6L295pS26JeP5pWw5o2uXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRyZWVJbmZvKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmVlTm9kZXMgPSB0aGlzLmZhdkhlbHBlci5pbml0RmF2b3JpdGVUcmVlRGF0YShyZXN1bHQuaXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZURhdGEgPSB0aGlzLnRyZWVOb2RlSGVscGVyLmZsYXRUcmVlTm9kZXModHJlZU5vZGVzKS5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5kYXRhWydfYWRkdGlvbmFsXyddID0gblsnYWRkdGlvbmFsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuaW5pdEZhdm9yaXRlSXRlbXModHJlZURhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVzQ29tcG9uZW50UmVmLmluc3RhbmNlLnNjcm9sbFRvWSgxKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmluaXRGYXZvcml0ZUl0ZW1zKHJlc3VsdC5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLmxvYWRGYXZvcml0ZXNEYXRhKHJlc3VsdCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YVRhYmxlRGF0YShyZXNEYXRhPzogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gcmVzRGF0YS5pdGVtcztcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXNEYXRhLnRvdGFsIHx8IHJlc0RhdGEuaXRlbXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNEYXRhLnBhZ2VJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc0RhdGEucGFnZUluZm8ucGFnZUxpc3QgJiYgKCF0aGlzLnBhZ2VMaXN0IHx8ICF0aGlzLnBhZ2VMaXN0Lmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlTGlzdCA9IHJlc0RhdGEucGFnZUluZm8ucGFnZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IHJlc0RhdGEucGFnZUluZm8uZW5hYmxlUGFnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRPcHRpb25zID0gcmVzRGF0YSBhcyBMb29rdXBHcmlkT3B0aW9ucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhVGFibGUodGhpcy5ncmlkT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVEYXRhVGFibGUob3B0czogYW55KSB7XHJcbiAgICAgICAgaWYgKG9wdHMpIHtcclxuICAgICAgICAgICAgY29uc3QgZHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBEYXRhVGFibGVDb21wb25lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWR0LmNvbHVtbnMgfHwgZHQuY29sdW1ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGR0LmNvbHVtbnMgPSB0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGR0LmFsbENvbHVtbnNUaXRsZSA9IHRoaXMuYWxsQ29sdW1uc1RpdGxlO1xyXG4gICAgICAgICAgICBkdC5zZWFyY2hGaWVsZHMgPSBvcHRzLnNlYXJjaEZpZWxkcztcclxuICAgICAgICAgICAgZHQucGFnaW5hdGlvbiA9IG9wdHMucGFnaW5hdGlvbjtcclxuICAgICAgICAgICAgZHQucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICBkdC5yZW1vdGVTb3J0ID0gdGhpcy5yZW1vdGVTb3J0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgZHQubG9hZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBvcHRzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5ncmlkT3B0aW9ucy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRoaXMuZ3JpZE9wdGlvbnMudG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5ncmlkT3B0aW9ucy5pdGVtc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkdC5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxvYWRTdWNjZXNzLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRUcmVlSW5mbyhyZXNEYXRhKSB7XHJcbiAgICAgICAgaWYgKCFyZXNEYXRhKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgICBsZXQgX3RyZWVJbmZvID0gbnVsbDtcclxuICAgICAgICBpZiAocmVzRGF0YS50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBvbmx5U2VsZWN0TGVhZiA9IHJlc0RhdGEudHJlZUluZm8ub25seVNlbGVjdExlYWY7XHJcbiAgICAgICAgICAgIGxldCBfb3NsOiBPTkxZX1NFTEVDVF9MRUFGID0gJ25vJztcclxuICAgICAgICAgICAgaWYgKG9ubHlTZWxlY3RMZWFmICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIF9vc2wgPSBvbmx5U2VsZWN0TGVhZiA/ICd5ZXMnIDogJ25vJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdHJlZUluZm8gPSB7IC4uLnJlc0RhdGEudHJlZUluZm8sIG9ubHlTZWxlY3RMZWFmOiBfb3NsIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICh0cmVlSW5mbykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9PT0gdW5kZWZpbmVkIHx8IHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPSAnbm8nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID0gdHJlZUluZm8ub25seVNlbGVjdExlYWYgPyAneWVzJyA6ICdubyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gMjAyMTA5MDJcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9IF90cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9IHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gJ2xvYWRhbGwnID8gJ2FsbCcgOiAnYXN5bmMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiAhPT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RyZWVJbmZvID0gT2JqZWN0LmFzc2lnbihfdHJlZUluZm8sIHRyZWVJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHJlZUluZm8gPSBfdHJlZUluZm87XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkVHJlZVRhYmxlRGF0YShyZXNEYXRhPzogTG9va3VwR3JpZFJlc3VsdCwgcmViaW5kRXZlbnQgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSByZXNEYXRhID8gcmVzRGF0YS5pdGVtcyA6IHRoaXMuZ3JpZE9wdGlvbnMuaXRlbXM7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIGlmIChyZXNEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VHJlZUluZm8ocmVzRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICghdHJlZUluZm9bJ3RyZWVEYXRhSXNJbml0J10pIHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmVlSW5mby5sYXllclR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3BhdGhjb2RlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmxvb2t1cFV0aWxzLm1ha2VUcmVlKHRoaXMuaXRlbXMsIHRyZWVJbmZvKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMubG9va3VwVXRpbHMubWFrZVRyZWVXaXRoUGFyZW50SUQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHt0cmVlSW5mby5kYXRhRmllbGR9LiR7dHJlZUluZm8ucGFyZW50RmllbGR9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGluc3RhbmNlb2YgVHJlZVRhYmxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpZiAodGhpcy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdHQubG9hZERhdGFUeXBlID0gdGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaXNMb2FkQWxsVHJlZURhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHQubG9hZERhdGFUeXBlID09PSAnYWxsJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gJ2xvYWRhbGwnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYmluZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0RXZlbnRNZ3IuYmluZFRyZWV0YWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaXNMb2FkQWxsID0gaXNMb2FkQWxsVHJlZURhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIC8qKiDlrozmlbTmoJHoioLngrnmo4Dmn6UgQnkgTHVjYXMgMjAyMDAzMDIgKi9cclxuICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuY2hlY2tOb2RlQ2FuQmVTZWxlY3QodGhpcy5pdGVtcywgaXNMb2FkQWxsKTtcclxuICAgICAgICAgICAgdHQua2VlcFNlbGVjdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIudXBkYXRlRmF2b3JpdGVzU3RhdHVzKHRoaXMuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkRGF0YVdoZW5PcGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0dC5sb2FkRGF0YSh0aGlzLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0dC5yZXNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjmnoTlrozmlbTmoJHkuK3vvIzmnInpg6jliIboioLngrnlm6DkuLrmnaHku7booqvov4fmu6TvvIzkuLrmmL7npLrlrozmlbTmoJHvvIxcclxuICAgICAqIOi/meS6m+iKgueCueWcqOi/kOihjOaXtuaYr+S4jeWFgeiuuOiiq+mAieS4reeahCwg6L+U5Zue5paw55qE6IqC54K55pWw57uEXHJcbiAgICAgKiBCeSBMdWNhcyAyMDIwMDMwMlxyXG4gICAgICovXHJcbiAgICBjaGVja05vZGVDYW5CZVNlbGVjdChub2RlcywgaXNBbGxUcmVlRGF0YSA9IGZhbHNlKTogVHJlZU5vZGVbXSB7XHJcbiAgICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlOiBUcmVlTm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaGFzT3duUHJvcGVydHkoJ2FkZHRpb25hbCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3RhYmxlID0gIW5vZGVbJ2FkZHRpb25hbCddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja05vZGVDYW5CZVNlbGVjdChub2RlLmNoaWxkcmVuLCBpc0FsbFRyZWVEYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWxsVHJlZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5sZWFmID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VzKHZhbCkge1xyXG4gICAgICAgIGlmICghdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGVhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9zZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh2YWwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkLmVtaXQodmFsKTtcclxuICAgICAgICAgICAgdGhpcy50ZXh0Q2hhbmdlZC5lbWl0KHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xlYXIoZW1pdCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSAnJztcclxuICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKCcnKTtcclxuICAgICAgICBpZiAodGhpcy5tYXBwaW5nRm4pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBwaW5nRm4obnVsbCwgdGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0TWFwcGluZy5sb29rdXBGaWVsZE1hcChudWxsLCB0aGlzLm1hcEZpZWxkcywgYmluZGluZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubXVsdGlTZWxNZ3IuY2xlYXIoKTtcclxuICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJWYWx1ZShlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMub25DbGVhcihlbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RJdGVtKHJvd0RhdGE/OiBhbnkpIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgIGlmIChyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gcm93RGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFJvdyA9IHRoaXMuc2VsZWN0aW9ucztcclxuXHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdGVkUm93KSAmJiAhc2VsZWN0ZWRSb3cubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlpoLmnpzlrprkuYnoh6rlrprkuYnlpITnkIbnoa7lrprkuovku7bvvIzliJnnlLHoh6rlrprkuYnkuovku7blpITnkIblkI7pnaLnmoTpgLvovpFcclxuICAgICAgICBpZiAodGhpcy5va0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5va0hhbmRsZXIoeyBkYXRhOiBzZWxlY3RlZFJvdywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVNlbGVjdERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJzZFJlc3VsdCA9IHRoaXMuYmVmb3JlU2VsZWN0RGF0YSh7IGluc3RhbmNlOiB0aGlzLCBkYXRhOiBzZWxlY3RlZFJvdyB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChic2RSZXN1bHQgJiYgYnNkUmVzdWx0LnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJzZFJlc3VsdC5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayhlLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfluK7liqnmlbDmja7pgInkuK3liY3kuovku7bmnKrov5Tlm57lgLzmiJbov5Tlm57nsbvlnovpnZ5PYnNlcnZhYmxlLCDor7fmo4Dmn6UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayh0cnVlLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UGFyZW50UGF0aENvZGUocm93cykge1xyXG4gICAgICAgIGNvbnN0IG1heEJ5ID0gKGFyciwgZm4pID0+IE1hdGgubWF4KC4uLmFyci5tYXAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nID8gZm4gOiB2YWwgPT4gdmFsW2ZuXSkpO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRhdGFGaWVsZCwgcGF0aEZpZWxkLCBsYXllckZpZWxkIH0gPSB0aGlzLnRyZWVJbmZvO1xyXG4gICAgICAgIGNvbnN0IG1heExheWVyID0gbWF4Qnkocm93cywgeCA9PiB4W2RhdGFGaWVsZF1bbGF5ZXJGaWVsZF0pO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBtYXhMYXllcjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9yb3dzID0gcm93cy5maWx0ZXIobiA9PiBuW2RhdGFGaWVsZF1bbGF5ZXJGaWVsZF0gPT09IGkpO1xyXG4gICAgICAgICAgICBpZiAoX3Jvd3MgJiYgX3Jvd3MubGVuZ3RoICYmIF9yb3dzLmxlbmd0aCA8IHJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBfcm93cy5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoQ29kZSA9IHJbZGF0YUZpZWxkXVtwYXRoRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yb3dzMiA9IHJvd3MuZmlsdGVyKG4gPT4gbltkYXRhRmllbGRdW3BhdGhGaWVsZF0gIT09IHBhdGNoQ29kZSAmJiBuW2RhdGFGaWVsZF1bcGF0aEZpZWxkXS5pbmRleE9mKHBhdGNoQ29kZSkgPT09IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfcm93czIgJiYgX3Jvd3MyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzID0gcm93cy5maWx0ZXIobiA9PiBuW2RhdGFGaWVsZF1bcGF0aEZpZWxkXSAhPT0gcGF0Y2hDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJvd3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYmVmb3JlU2VsZWN0RGF0YUNhbGxCYWNrKGUsIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgbGV0IGNhblNlbGVjdCA9IGU7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnJztcclxuICAgICAgICBpZiAodHlwZW9mIGUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICBjYW5TZWxlY3QgPSBlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIGNhblNlbGVjdCA9IGUuY2FuU2VsZWN0O1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGUubWVzc2FnZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhblNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLm11c3RDaG9vc0FkYXRhcm93O1xyXG4gICAgICAgICAgICBjYW5TZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYW5TZWxlY3QpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkUm93cyQgPSBvZihzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIC8vIOWkmumAiSDmoJHluK7liqkg5byC5q2l5Yqg6L29IOWIhue6p+eggSDlvIDlkK/lkIzmraXpgInmi6kg5oiW5YyF5ZCr5LiL57qnXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5lbmFibGVDYXNjYWRlICYmIHRoaXMuaXNUcmVlKCkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlICE9PSAnYWxsJyAmJiB0aGlzLnRyZWVJbmZvLmxheWVyVHlwZSA9PT0gJ3BhdGhjb2RlJyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0dldEFsbENoaWRsTm9kZXMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IHBhcmVudHNJZHMgPSBzZWxlY3RlZFJvdy5tYXAobiA9PiBuW3RoaXMudHJlZUluZm8uZGF0YUZpZWxkXVt0aGlzLnRyZWVJbmZvLnBhdGhGaWVsZF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRzSWRzID0gdGhpcy5nZXRQYXJlbnRQYXRoQ29kZShzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50c0lkcyAmJiBwYXJlbnRzSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHNJZHMgPSBwYXJlbnRzSWRzLm1hcChuID0+IG5bdGhpcy50cmVlSW5mby5kYXRhRmllbGRdW3RoaXMudHJlZUluZm8ucGF0aEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93cyQgPSB0aGlzLmh0dHBNZ3IuZ2V0RGF0YSh7IHBhcmVudHNJZHMgfSwgJ2FsbENoaWxkcmVuJykucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwKChyOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IHIuaXRlbXMgPyByLml0ZW1zLm1hcChkID0+IGQuZGF0YSkgOiBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbGl0ZW1zID0gWy4uLnNlbGVjdGVkUm93LCAuLi5pdGVtc107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWRzID0gYWxsaXRlbXMubWFwKG4gPT4gblt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20obmV3IFNldChpZHMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHMubWFwKG4gPT4gYWxsaXRlbXMuZmluZChhID0+IGFbdGhpcy5pZEZpZWxkXSA9PT0gbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93cyQuc3Vic2NyaWJlKChyb3dzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sVmFsdWUocm93cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXNlVGlwIHx8ICFyb3dzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlVGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UudXBkYXRlUXVlY2tTZWxlY3RlZChyb3dzLCB0aGlzLmxvY2FsU2VydmljZS5sb2NhbGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RpZnlTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLndhcm5pbmcobWVzc2FnZSwgJycsIHRydWUsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuZWwubmF0aXZlRWxlbWVudC5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ29udHJvbFZhbHVlKHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheVRleHQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBwaW5nRm4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwcGluZ0ZuKHNlbGVjdGVkUm93LCB0aGlzLm1hcEZpZWxkcywgdGhpcy5iaW5kaW5nRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMgJiYgdGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1hcHBpbmcubG9va3VwRmllbGRNYXAoc2VsZWN0ZWRSb3csIHRoaXMubWFwRmllbGRzLCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodGhpcy5kaXNwbGF5VGV4dCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzWydpbkRhdGFncmlkJ10gJiYgc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW1zID0gQXJyYXkuaXNBcnJheShzZWxlY3RlZFJvdykgPyBzZWxlY3RlZFJvdyA6IFtzZWxlY3RlZFJvd107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJpbmREYXRhKHNlbGVjdEl0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YS5lbWl0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgdGhpcy5ydW5EaWN0UGlja2VkRXZlbnQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MQnV0dG9uRWxlbWVudCkuYmx1cigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLndhcm5pbmcodGhpcy5tdXN0Q2hvb3NBZGF0YXJvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQmluZERhdGEoc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICBpZiAoIXRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbCAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAoYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc2VsZWN0ZWRSb3cubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoaGVscEZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlscy5zZXRWYWx1ZShiaW5kaW5nRGF0YSwgZm9ybUZpZWxkLCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgYmluZGluZ1BhdGggPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ1BhdGg7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgLy8gICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChmb3JtRmllbGQuc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGZvcm1GaWVsZCwgcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJpbmRpbmdEYXRhLnNldFZhbHVlKHBhdGhBcnIuY29uY2F0KGZpZWxkUGF0aHMpLCB2YWwsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAvLyAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF0uc3BsaXQoJywnKS5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKHRoaXMuYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgdmFsKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldEV4dGVuZEluZm9GaWVsZHMoaXNIZWxwRGF0YSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXh0SW5mb0ZpZWxkcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYOacquiuvue9ruaJqeWxleWtl+auteOAgmApO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRpcEZpZWxkQXJyID0gdGhpcy5leHRJbmZvRmllbGRzLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgIGlmIChpc0hlbHBEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRlbmRJbmZvRmllbGRzID0gW107XHJcbiAgICAgICAgICAgIGV4dGVuZEluZm9GaWVsZHMgPSB0aXBGaWVsZEFyci5tYXAodGYgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFwS2V5ID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpLmZpbmQoayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwRmllbGRzW2tdID09PSB0ZjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXBLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwS2V5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYOWcqOW4ruWKqeaYoOWwhOWtl+auteS4reacquaJvuWIsCR7dGZ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZEluZm9GaWVsZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGlwRmllbGRBcnI7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGVFeHRlbmRJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IGpzb25EYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUV4dGVuZEluZm8oanNvbkRhdGEsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDpgInkuK3luK7liqnmlbDmja7lkI7vvIzmm7TmlrDmianlsZXkv6Hmga9cclxuICAgIHByaXZhdGUgdXBkYXRlRXh0ZW5kSW5mbyhkYXRhOiBhbnksIGlzSGVscERhdGEgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXh0SW5mb0Zvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXBTdHJpbmcgPSBkYXRhLm1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXh0ZW5kSW5mb1RleHQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGlwU3RyaW5nLmpvaW4oJ++8jCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aGlzLmdldEV4dGVuZEluZm9UZXh0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5kSW5mb0ZpZWxkcyA9IHRoaXMuZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRJbmZvRmllbGRzICYmIGV4dGVuZEluZm9GaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gZGF0YS5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChuLCBleHRlbmRJbmZvRmllbGRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRpcFN0cmluZy5qb2luKCfvvIwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aGlzLmdldEV4dGVuZEluZm9UZXh0KGRhdGEsIGV4dGVuZEluZm9GaWVsZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEV4dGVuZEluZm9UZXh0KGl0ZW1EYXRhLCBmaWVsZHMgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmV4dEluZm9Gb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0SW5mb0Zvcm1hdHRlcih7IGJpbmRpbmdEYXRhOiBpdGVtRGF0YSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcFZhbHVlcyA9IGZpZWxkcy5tYXAodCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZnYgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHQsIGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgICAgIHRpcFN0cmluZy5wdXNoKHRmdik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBbdF06IHRmdiB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRpcFN0cmluZy5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlzcGxheVRleHQocm93czogYW55KSB7XHJcbiAgICAgICAgY29uc3QgZGYgPSB0aGlzLmRpc3BsYXlGaWVsZHMgPyB0aGlzLmRpc3BsYXlGaWVsZHMuc3BsaXQoJywnKSA6IFt0aGlzLnRleHRGaWVsZF07XHJcbiAgICAgICAgY29uc3QgdHh0QXJyID0gcm93cy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcclxuICAgICAgICAgICAgZGYuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIHQucHVzaCh0aGlzLnV0aWxzLmdldFZhbHVlKG4sIHIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0LmpvaW4odGhpcy5kaXNwbGF5VGV4dFNlcGFyYXRvcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHh0QXJyLmpvaW4oJycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlGaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eHRBcnIubWFwKHQgPT4gJ1snICsgdCArICddJykuam9pbignLCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR4dEFyci5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXREaXNwbGF5VGV4dChzZWxlY3RlZFJvdzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy50ZXh0RmllbGQsIHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIodGhpcy5kaXNwbGF5VGV4dCwgW3NlbGVjdGVkUm93XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBsb29rdXA6IHRoaXMsIGRhdGF0YWJsZTogdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50IH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKHRoaXMuZGlzcGxheVRleHQsIFtzZWxlY3RlZFJvd10sIHsgbG9va3VwOiB0aGlzLCB0cmVlOiB0dCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KFtzZWxlY3RlZFJvd10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gc2VsZWN0ZWRSb3dbdGhpcy52YWx1ZUZpZWxkXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRSb3cubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5Rm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy50ZXh0RmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIodGhpcy5kaXNwbGF5VGV4dCwgc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGxvb2t1cDogdGhpcywgZGF0YXRhYmxlOiB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBEYXRhVGFibGVDb21wb25lbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIodGhpcy5kaXNwbGF5VGV4dCwgc2VsZWN0ZWRSb3csIHsgbG9va3VwOiB0aGlzLCB0cmVlOiB0dCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLnZhbHVlRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgfSkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcnVuRGljdFBpY2tlZEV2ZW50KHJvd0RhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpY3RQaWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2tCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2tCdXR0b24ubmF0aXZlRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaWN0UGlja2VkU3Vic2NyaXB0aW9uID0gdGhpcy5kaWN0UGlja2VkKHJvd0RhdGEpLnN1YnNjcmliZSgodjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5va0J1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2tCdXR0b24ubmF0aXZlRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdvYmplY3QnICYmIHYuY2xvc2VEaWFsb2cgIT09IHVuZGVmaW5lZCAmJiAhdi5jbG9zZURpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2Lm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyh2Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2cocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZvY3VzVG9JbnB1dCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0R3JvdXAgJiYgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlRGlhbG9nKHJvd0RhdGEgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXVsdGlTZWxNZ3Iuc2F2ZShyb3dEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZm9jdXNUb0lucHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsU2VsZWN0KCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghdGhpcy5ub3NlYXJjaCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5vcmlnaW5hbFRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxIYW5kbGVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRNb2RlbFZhbHVlKHYpIHtcclxuICAgICAgICBpZiAodGhpcy5vbk1vZGVsQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb2RlbENoYW5nZSh2KTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQuZW1pdCh2KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pWw5o2u5YiX6KGo77yM5pS26JeP77yMIOW3sumAieaVsOaNriB0YWIg6aG15YiH5o2iXHJcbiAgICBvblRhYkNoYW5nZShlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IGUudGFiSW5kZXg7XHJcbiAgICAgICAgdGhpcy5wZXJzb25hbENvbmYudGFiSW5kZXggPSB0aGlzLmFjdGl2ZVRhYjtcclxuICAgICAgICBjb25zdCBfZmlyc3RDaGFuZ2UgPSB0aGlzLmlzVGFiQ2hhbmdlZDtcclxuICAgICAgICB0aGlzLmlzVGFiQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UudXBkYXRlUGVyc29uYWxDb25maWcoeyB0YWJJbmRleDogZS50YWJJbmRleCB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAnZGF0YWxpc3QnKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgIXRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVMZWZ0Q29tcG9uZW50KHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXRlbXMgfHwgIXRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWVUYWJsZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhVGFibGVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHRFdmVudE1nci5iaW5kRGF0YVRhYmxlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3dHZXRBbGxDaGlsZHJlbkNoZWNrYm94KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAnZmF2b3JpdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZhdm9yaXRlSXRlbXMgfHwgIXRoaXMuZmF2b3JpdGVJdGVtcy5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZUl0ZW1zLmxlbmd0aCAhPT0gdGhpcy5mYXZIZWxwZXIuZ2V0RmF2b3JpdElkcygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghX2ZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLl9sb2FkRmF2b3JpdGVEYXRhKHRoaXMuZmF2b3JpdGVJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ21wKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc3RhdGUuc2Nyb2xsWTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNjcm9sbFRvWSh5LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVDYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dEV2ZW50TWdyLmNhc2NhZGVWYWx1ZUNoYW5nZWQodGhpcy5jYXNjYWRlU3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gIFRhZyBWaWV3IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJNb3VzZUV2ZW50Rm9yVGFnVmlldygpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVDbGVhcikge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAnbW91c2VlbnRlcicsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVGFnYm94TW91c2VFbnRlci5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICdtb3VzZWxlYXZlJyxcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWdib3hNb3VzZUxlYXZlLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHIgPSBpc1Nob3cgPyAnJyA6ICdub25lJztcclxuICAgICAgICBjb25zdCBjbGVhckljb24gPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLmlucHV0LWdyb3VwLWNsZWFyJyk7XHJcbiAgICAgICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICAgICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhZ2JveE1vdXNlRW50ZXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VGV4dCAmJiB0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VGFnYm94Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUYWdib3hDbGVhckJ1dHRvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNsZWFySWNvbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWdib3hNb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlU2VsZWN0SXRlbSgkZXZlbnQsIHR4dCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCRldmVudCwgdHh0KTtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGV4dEFycmF5ID0gQXJyYXkuZnJvbSh0aGlzLmRpc3BsYXlUZXh0TGlzdCk7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlZEluZGV4ID0gdGhpcy5kaXNwbGF5VGV4dExpc3QuaW5kZXhPZih0eHQpO1xyXG4gICAgICAgIHRleHRBcnJheS5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGV4dEFycmF5LmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VmFsdWUpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFscyA9IHRoaXMuZGlzcGxheVZhbHVlLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB2YWxzLnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHZhbHMuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU90aGVyRmllbGREYXRhV2hlblRhZ3JlbW92ZWQocmVtb3ZlZEluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGFnUmVtb3ZlZC5lbWl0KHsgcmVtb3ZlZEluZGV4LCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU90aGVyRmllbGREYXRhV2hlblRhZ3JlbW92ZWQocmVtb3ZlZEluZGV4KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgY29uc3QgdGV4dEZpZWxkSW5kZXggPSBoZWxwRmllbGRzLmluZGV4T2YodGhpcy50ZXh0RmllbGQpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhLnNldFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nUGF0aCA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nUGF0aDtcclxuICAgICAgICAgICAgICAgIGxldCBwYXRoQXJyOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aEFyciA9IGJpbmRpbmdQYXRoLnNwbGl0KCcvJykuZmlsdGVyKG4gPT4gbiAhPT0gJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRQYXRocyA9IHBhdGhBcnIuY29uY2F0KGZvcm1GaWVsZC5zcGxpdCgnLicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYmluZGluZ0RhdGEuZ2V0VmFsdWUoZmllbGRQYXRocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbEFyciA9IHZhbC5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsQXJyLnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWwgPSB2YWxBcnIuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ0RhdGEuc2V0VmFsdWUocGF0aEFyci5jb25jYXQoZmllbGRQYXRocyksIG5ld1ZhbCwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dEZpZWxkSW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuc3BsaWNlKHRleHRGaWVsZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsID0gdmFsQXJyLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuc2V0VmFsdWUodGhpcy5iaW5kaW5nRGF0YSwgZm9ybUZpZWxkLCBuZXdWYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBvbkFsbENoaWxkTm9kZXNDbGljaygkZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuaXNHZXRBbGxDaGlkbE5vZGVzID0gIXRoaXMuaXNHZXRBbGxDaGlkbE5vZGVzO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==