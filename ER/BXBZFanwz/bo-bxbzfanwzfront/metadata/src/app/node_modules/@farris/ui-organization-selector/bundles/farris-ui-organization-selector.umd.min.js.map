{"version":3,"sources":["ng://@farris/ui-organization-selector/utils/api.service.ts","ng://@farris/ui-organization-selector/utils/favorites.tool.ts","ng://@farris/ui-organization-selector/utils/state.mgr.tool.ts","ng://@farris/ui-organization-selector/utils/common.tool.ts","ng://@farris/ui-organization-selector/utils/index.type.ts","ng://@farris/ui-organization-selector/lib/organization-selector.component.ts","ng://@farris/ui-organization-selector/lib/tab-organization/to.component.ts","ng://@farris/ui-organization-selector/lib/selections/sl.component.ts","ng://@farris/ui-organization-selector/assets/resource.ts","ng://@farris/ui-organization-selector/lib/search/srp.component.ts","ng://@farris/ui-organization-selector/lib/tab-favorites/favorites.component.ts","ng://@farris/ui-organization-selector/lib/tab-group/group.component.ts","ng://@farris/ui-organization-selector/lib/append-group-org/appendorg.component.ts","ng://@farris/ui-organization-selector/lib/organization-selector.module.ts"],"names":["ApiService","prototype","getOrganization","param","options","headers","HttpHeaders","Content-Type","this","http","post","absUrl","getOrgGroups","absOrgType","get","groupApiUrl","getGroupMembers","groupId","of","url","saveGroup","groupInfo","Injectable","HttpClient","FavoritesTool","curdRecentContactsOrFavorites","actionToken","absRfQueryUrl","absRfModifyUrl","Object","defineProperty","subject","asObservable","setFavoritesList","value","next","getFavoritesList","bizId","busNum","objectValue","toggleFavorites","e","object","_this","id","idField","action","favoritesList","findIndex","item","deleteList","addList","subscribe","push","filter","cancelBubble","stopPropagation","clearFavoritesList","length","ids","map","val","Subject","StateMgrTool","slSubject","emitSelections","changeType","from","CommonUtil","newGuid","replace","c","r","Math","random","toString","field","array","Error","ChangeType","OrganizationSelectorComponent","writeValue","obj","finalText","split","multipleChoiceSeparator","registerOnChange","fn","onModelChange","registerOnTouched","onModelTouched","setDisabledState","isDisabled","ngOnInit","initDialogHeight","listenSelectionsChange","initTabs","initGroupSearch","ngControl","injector","NgControl","ngAfterViewInit","listenWindowResize","ngOnChanges","changes","orgIdsChange","orgIds","currentValue","assembleDataByOrgIds","ngOnDestroy","selectionsSub","unsubscribe","selections","stateMgr","mapFields2Component","keys","mapFields","includes","primaryField","formDirective","form","bindingData","setValue","bindingPath","pathArr","n","multiPath","fieldPaths","concat","getValue","console","warn","multiSelect","idList","getOrgAllPath","getCurUser","apiService","res","data","assembleFinalText","forEach","index","formatedName","formatFn","displayField","slice","uuid","dialogId","windowInnerHeight","window","innerHeight","dialogHeight","selectionsSubject","_.cloneDeep","cdRef","detectChanges","showTabIds","indexOf","favoritesTabId","enableFavorites","groupTabId","enableGroup","groupTitleStream","pipe","debounceTime","distinctUntilChanged","validGroupTitle","dialogElement","document","querySelector","targetElement","addEventListener","height","innerHeight_1","marginTop","render","setStyle","initFavorites","favoritesTool","result","resData","orgData","showFarrisDialog","isShow","ngZone","runOutsideAngular","setTimeout","dialog","show","clearAll","join","inputClear","emit","removeItem","splice","tagRemoved","deleteItem","deleteIndex","clearSeletions","onSearch","searchText","hideSearchPanel","onSearchToken","clearSearch","listenSearchText","code","listenClosePanelChange","closeGroupDialog","groupDialogOpend","editingGroupId","groupTitle","groupNote","groupDialogTitle","listenGroupTitle","listenOpenGroup","listenGroupChange","title","description","groupCode","substring","addIds","selection","body","Number","updateNameOrNote","switchMap","log","libOrgGroup","selectedGroupId","deleteIds","tap","currentTabId","assembleData","returnResult","type","confirmToken","selectionsChange","close","changeTabs","nextId","organizationTabId","Component","args","selector","template","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","Renderer2","Injector","NgZone","HostBinding","Input","ViewChild","Output","baseCls","width","showInput","placeholder","searchPlaceholder","readonly","absUserOrgUrl","groupExtendUrl","enableHierarchicalLoading","notGetStopOrg","layer","cascadeCheck","cascadeDown","cascadeUp","showCheckAll","keepSelect","selectedLimit","activeTabId","searchPageSize","draggable","EventEmitter","originalSelections","lookupIcon","searchIcon","selectionsShow","farrisDialogbeforeClose","ChangeDetectorRef","OrganizationComponent","favoritesSub","treeTableCols","orgNameCell","favoritesCell","favoritesSubject","setFavorites","treeListData","farrisTree","clearCheckeds","clearSelections","tickSelections","inTreeList","unCheckedNode","unSelectNode","checkedNode","selectNode","initLoad","hlAssembleData","i","inFavorites","children","setSelections","checkAll","checkeds_1","checkeds","unCheckAll","changeSelections","originalEvent","toggleChecked","toggleSelected","instance","selected","checkedOrgs","cdr","layerList","selectable","originalTreeData","curAbsUser","orgAllPathInfo","dataToTree","defaultOrgPath","loadData","checkedNodes","msgService","plainSource","expandedPath","treeSource","dealData","parents","treeData","pathList","maxLength","pathLength","a","path","newDatas","newsDataObj","orgId","name","orgAllPath","expanded","isDetail","leaf","parent","parentPath","parentLayer","itemPath","itemLayer","targetPath","substr","listenTreeExpand","getOrganizationByParentNode","parentNode","parentID","newDatas_1","nodes","appendChildren","nodeExpanded","arr","expandTreeNode","node","expandNode","MessagerService","locationOrgText","beforeClickNode","rowNode","isSelected","Array","withAllSub","isChecked","beforeCheckAll","SelectionComponent","pageIndex","datas","items","pageSize","moreText","openGroupDialog","openedChange","trackByFn","loadMore","currentPageIndex","currentItems","noDataImg","SearchComponent","loadSearchResult","itemTotalCount","totalItems","unSelectLine","selectLine","perPageItems","turnOverPage","dir","num","pageTotal","switchPage","beforePageIndexChange","inputEl","maxNumber","target","currentPageNumber","closePanel","closePanelChange","toggleAll","allChecked","toggleOne","checked","preventDefault","codeOrName","ceil","pageInfo","startIndex","endIndex","indexId","_insertOneIntoSelections","isAllChecked","setChecked","itemIndex","count","cloneSelections","allIndexId","FavoritesComponent","loadFavoritesList","deleteFromFavorites","GroupComponent","getGroupList","updateGroup","primaryIds","appendOrg","currentOrgs","org","getOrgsByGroup","currentGroupType","toggleGroupOrgDialog","deleteGroup","formMessageService","confirm","groupIdField","publicToken","editGroup","groupChange","removeOrg","groupType","personalToken","showGroupOrgDialog","formLoadingService","groupData","personal","total","it","hide","resPublic","publicGroup","resPersonal","privateGroup","public","firstPublicGroup","firstPersonalGroup","toggleVisible","publicVisible","personalVisible","FormMessageService","FormLoadingService","userIdField","personnelList","groupPersonnels","AppendGroupOrgComponent","orgName","orgTree","tickCheckedNodes","OrganizationSelectorModule","NgModule","declarations","imports","CommonModule","InputGroupModule","TreeTableModule","FarrisDialogModule","FarrisTabsModule","PerfectScrollbarModule","FormsModule","ReactiveFormsModule","MessagerModule","forRoot","AvatarModule","CommandServicesModule","exports","entryComponents"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { OrgRequestParam, SaveGroupReqeustParam } from './index.type';\r\nimport { of } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ApiService {\r\n\r\n  absUrl: string;\r\n  groupApiUrl: string;\r\n  constructor(\r\n    private http: HttpClient\r\n  ) { }\r\n\r\n  /**\r\n    * \r\n    * @returns observable\r\n    */\r\n  getOrganization(param: OrgRequestParam) {\r\n    const options = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    };\r\n    return this.http.post(this.absUrl + '/org', param, options);\r\n  }\r\n\r\n  getOrgGroups(absOrgType: string) {\r\n    const options = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    };\r\n    return this.http.get(this.groupApiUrl + '/' + absOrgType, options);\r\n  }\r\n\r\n  getGroupMembers(groupId: string, absOrgType: string) {\r\n    const options = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    };\r\n    if (!groupId) {\r\n      return of(null);\r\n    }\r\n    const url = this.groupApiUrl + '/' + groupId + '/absOrgType/' + absOrgType;\r\n    return this.http.get(url, options);\r\n  }\r\n\r\n  saveGroup(groupInfo: SaveGroupReqeustParam) {\r\n    const options = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    };\r\n    return this.http.post(this.groupApiUrl, groupInfo, options);\r\n  }\r\n}\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of, Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class FavoritesTool {\r\n\r\n    absOrgType = 'System_organization';\r\n    busNum = 'common';\r\n    idField = 'userId';\r\n    favoritesList = [];\r\n    absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';\r\n    absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';\r\n    private subject = new Subject<any>();\r\n\r\n    constructor(private http: HttpClient) {\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param param any\r\n     * @returns observable\r\n     */\r\n    curdRecentContactsOrFavorites(actionToken: string, param: any) {\r\n        let url = this.absRfQueryUrl;\r\n        if (actionToken === 'modify') {\r\n            url = this.absRfModifyUrl;\r\n        }\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url, param, options);\r\n    }\r\n\r\n    get favoritesSubject(): Observable<any> {\r\n        return this.subject.asObservable();\r\n    }\r\n\r\n    setFavoritesList(value: any) {\r\n        this.subject.next(value);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    getFavoritesList(): Observable<any> {\r\n        const param: any = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'CollectOrg'\r\n        };\r\n        return this.curdRecentContactsOrFavorites('query', param);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param e \r\n     * @param id \r\n     * @returns Observable\r\n     */\r\n    toggleFavorites(e: any, object: any) {\r\n        const id = object[this.idField];\r\n        let action = 'add';\r\n        const param: any = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'CollectOrg'\r\n        };\r\n        if (this.favoritesList.findIndex(item => item[this.idField] === id) !== -1) {\r\n            param.deleteList = [id];\r\n            action = 'delete';\r\n        } else {\r\n            param.addList = [id];\r\n        }\r\n        this.curdRecentContactsOrFavorites('modify', param).subscribe(() => {\r\n            if (action === 'add') {\r\n                const index = this.favoritesList.findIndex(item => item[this.idField] === id);\r\n                if (index === -1) {\r\n                    this.favoritesList.push(object);\r\n                }\r\n            } else {\r\n                this.favoritesList = this.favoritesList.filter(item => item[this.idField] !== id);\r\n            }\r\n            this.setFavoritesList(this.favoritesList);\r\n        });\r\n        e.cancelBubble = true;\r\n        e.stopPropagation();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    clearFavoritesList() {\r\n        if (!this.favoritesList.length) {\r\n            this.setFavoritesList(this.favoritesList);\r\n            return;\r\n        }\r\n        const ids = this.favoritesList.map(item => item[this.idField]);\r\n        const param: any = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'CollectOrg',\r\n            addList: [],\r\n            deleteList: ids\r\n        };\r\n\r\n        this.curdRecentContactsOrFavorites('modify', param).subscribe((val) => {\r\n            this.favoritesList = [];\r\n            this.setFavoritesList(this.favoritesList);\r\n        });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { ChangeType, OrgRequestParam, Param } from './index.type';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class StateMgrTool {\r\n\r\n  private slSubject = new Subject<Param>();\r\n\r\n  constructor(\r\n    private http: HttpClient\r\n  ) { }\r\n\r\n  get selectionsSubject(): Observable<Param> {\r\n    return this.slSubject.asObservable();\r\n  }\r\n\r\n  emitSelections(value: any, changeType: ChangeType, from: string = 'other') {\r\n    this.slSubject.next({\r\n      value,\r\n      changeType,\r\n      from\r\n    });\r\n  }\r\n\r\n}\r\n","export class CommonUtil {\r\n    static newGuid() {\r\n        const res = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            // tslint:disable-next-line:no-bitwise\r\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n        return res;\r\n    }\r\n    /**\r\n     * \r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns \r\n     */\r\n    static findIndex(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error('2');\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n}\r\n","export interface OrgRequestParam {\r\n    absOrgType: string; // \r\n    layer?: number; // \r\n    codeOrName?: string; // \r\n    name?: string; // \r\n    parentID?: string; // id\r\n    isSearchTree?: boolean; // false\r\n    getCurUser?: boolean;   // true\r\n    notGetStopOrg?: boolean; // true\r\n    id?: string; // id,\r\n    idList?: string[]; // id\r\n    getAllParentOrg?: boolean; // ()true\r\n    getOrgAllPath?: boolean;   //\r\n    getOrgAllPathInfo?: boolean;  //id()\r\n    withAllSub?: boolean; // idfalse\r\n    layerList?: number[]; // \r\n}\r\n\r\nexport enum ChangeType {\r\n    Append = 'Append',\r\n    Remove = 'Remove',\r\n    ValueChanged = 'ValueChanged'\r\n}\r\n\r\nexport interface Param {\r\n    value: any;\r\n    changeType: ChangeType,\r\n    from: string\r\n}\r\n\r\nexport interface Organization {\r\n    orgId: string;\r\n    code: string;\r\n    name: string;\r\n    orgAllPath: string;\r\n    path: string;\r\n    layer: number;\r\n    checked?: boolean;\r\n    indexId?: string;\r\n}\r\n\r\nexport interface Group {\r\n    public: Array<GroupItem>;\r\n    personal: Array<GroupItem>;\r\n}\r\n\r\nexport interface GroupItem {\r\n    id: string;\r\n    title: string;\r\n    index?: string;\r\n    description?: string;\r\n    total: number;\r\n    avatar?: string;\r\n    checked?: boolean;\r\n}\r\n\r\n\r\nexport interface SaveGroupReqeustParam {\r\n    groupId?: string;\r\n    groupCode?: string;\r\n    title?: string;\r\n    description?: string;\r\n    absOrgType?: string;\r\n    addIds?: Array<string>;\r\n    deleteIds?: Array<string>;\r\n    changeType: Number;\r\n}","import { AfterViewInit, Component, EventEmitter, forwardRef, HostBinding, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewChild, ChangeDetectorRef } from '@angular/core';\r\nimport { ControlValueAccessor, NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ApiService } from '../utils/api.service';\r\nimport { CommonUtil } from '../utils/common.tool';\r\nimport { FavoritesTool } from '../utils/favorites.tool';\r\nimport { ChangeType, OrgRequestParam, SaveGroupReqeustParam } from '../utils/index.type';\r\nimport { StateMgrTool } from '../utils/state.mgr.tool';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport * as _ from 'lodash-es';\r\nimport { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\r\nimport { result } from 'lodash';\r\nimport { GroupComponent } from './tab-group/group.component';\r\nimport { OrganizationComponent } from './tab-organization/to.component';\r\nimport { FavoritesComponent } from './tab-favorites/favorites.component';\r\n\r\n@Component({\r\n  selector: 'farris-organization-selector',\r\n  templateUrl: './organization-selector.component.html',\r\n  styleUrls: ['./organization-selector.component.css'],\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => OrganizationSelectorComponent),\r\n      multi: true\r\n    },\r\n    FavoritesTool, ApiService, StateMgrTool\r\n  ]\r\n})\r\nexport class OrganizationSelectorComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy, ControlValueAccessor {\r\n\r\n  @HostBinding('class.f-organization-selector') baseCls = true;\r\n  @HostBinding('style.width') @Input() width = '100%';\r\n  @ViewChild('farrisDialog') dialog: DialogComponent;\r\n  @ViewChild('libOrgGroup') libOrgGroup: GroupComponent;\r\n  @ViewChild('libOrgTree') libOrgTree: OrganizationComponent;\r\n  @ViewChild('libOrgFavorites') libOrgFavorites: FavoritesComponent;\r\n  // input\r\n  @Input() showInput = true;\r\n  // \r\n  @Input() busNum = 'common';\r\n  @Input() multiSelect = true;\r\n  @Input() placeholder = '';\r\n  @Input() searchPlaceholder = '';\r\n  @Input() readonly = false;\r\n  // url\r\n  @Input() absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';\r\n  @Input() absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';\r\n  @Input() absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';\r\n  @Input() groupApiUrl = \"/api/runtime/sys/v1.0/org-group\";\r\n  @Input() groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend-org.js';\r\n  /**\r\n   * \r\n   *  System_organization     \r\n   * Administrative_organization    \r\n   * absOrgType {string}\r\n   * PersonnelSelectorComponent\r\n   */\r\n  @Input() absOrgType = 'System_organization';\r\n  // \r\n  @Input() enableHierarchicalLoading = true;\r\n  // \r\n  @Input() notGetStopOrg = true;\r\n  @Input() primaryField = 'orgId';\r\n  @Input() displayField = 'name';\r\n  @Input() orgIds: string[] = [];\r\n  // \r\n  @Input() layer = 1;\r\n  // \r\n  @Input() cascadeCheck = true;\r\n  // \r\n  @Input() cascadeDown = true;\r\n  // \r\n  @Input() cascadeUp = false;\r\n  // \r\n  @Input() showCheckAll = false;\r\n  @Input() keepSelect = false;\r\n  // \r\n  @Input() formatFn: (obj: any) => string;\r\n  // \r\n  @Input() selectedLimit = 50;\r\n  @Input() showTabIds = 'organization,favorites';\r\n  @Input() activeTabId = 'organization';\r\n  // 50\r\n  @Input() searchPageSize = 50;\r\n  /** , farris form{  } */\r\n  @Input() mapFields: { [sourceField: string]: string };\r\n  /**  */\r\n  @Input() multipleChoiceSeparator = ',';\r\n  @Input() draggable = true;\r\n  @Output() selectionsChange = new EventEmitter<any>();\r\n  // \r\n  @Output() inputClear = new EventEmitter<any>();\r\n  // \r\n  @Output() tagRemoved = new EventEmitter<any>();\r\n\r\n  selections = [];\r\n  originalSelections = [];\r\n  finalText = [];\r\n  lookupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n  searchIcon = '<span class=\"k-icon k-i-search\"></span>';\r\n  organizationTabId = 'organization';\r\n  groupTabId = 'group';\r\n  favoritesTabId = 'favorites';\r\n  dialogHeight = 548;\r\n  dialogId = 'dialogId';\r\n  isShow = false;\r\n  private selectionsSub: Subscription;\r\n  private confirmToken = false;\r\n  hideSearchPanel = true;\r\n  searchText = '';\r\n  onSearchToken: any;\r\n  enableFavorites: boolean;\r\n  enableGroup: boolean;\r\n  groupDialogOpend = false;\r\n  groupDialogTitle = '';\r\n  groupTitle: string;\r\n  groupNote: string;\r\n  validGroupTitle = true;\r\n  private groupTitleStream: Subject<string> = new Subject<string>();\r\n  public ngControl: any;\r\n  selectionsShow = false;\r\n  private editingGroupId: string;\r\n  private cdRef: ChangeDetectorRef;\r\n  private currentTabId: string;\r\n\r\n  farrisDialogbeforeClose = () => {\r\n    this.isShow = false;\r\n    if (this.confirmToken) {\r\n      this.originalSelections = _.cloneDeep(this.selections);\r\n    } else {\r\n      this.selections = _.cloneDeep(this.originalSelections);\r\n    }\r\n    this.hideSearchPanel = true;\r\n    this.confirmToken = false;\r\n    return true;\r\n  }\r\n\r\n  onModelChange: any = (val?: any) => { };\r\n  onModelTouched: any = (val?: any) => { };\r\n\r\n  constructor(\r\n    private render: Renderer2,\r\n    private injector: Injector,\r\n    private favoritesTool: FavoritesTool,\r\n    private apiService: ApiService,\r\n    private ngZone: NgZone,\r\n    private stateMgr: StateMgrTool\r\n  ) {\r\n    this.apiService.absUrl = this.absUserOrgUrl;\r\n    this.apiService.groupApiUrl = this.groupApiUrl;\r\n    this.cdRef = this.injector.get(ChangeDetectorRef);\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    if (!!obj && typeof obj === 'string') {\r\n      this.finalText = obj.split(this.multipleChoiceSeparator);\r\n    } else {\r\n      this.finalText = [];\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onModelTouched = fn;\r\n  }\r\n\r\n  setDisabledState?(isDisabled: boolean): void {\r\n    throw new Error('Method not implemented.');\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initDialogHeight();\r\n    this.listenSelectionsChange();\r\n    this.initTabs();\r\n    this.initGroupSearch();\r\n    this.ngControl = this.injector.get(NgControl, null);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.listenWindowResize();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const orgIdsChange = changes.orgIds;\r\n    if (orgIdsChange && orgIdsChange.currentValue) {\r\n      this.assembleDataByOrgIds(orgIdsChange.currentValue);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.selectionsSub.unsubscribe();\r\n  }\r\n\r\n  private emitSelections(selections: any, changeType = ChangeType.ValueChanged) {\r\n    this.stateMgr.emitSelections(selections, changeType);\r\n  }\r\n\r\n  // id\r\n  private mapFields2Component() {\r\n    const helpFields = Object.keys(this.mapFields);\r\n    if (!helpFields.includes(this.primaryField)) {\r\n      console.warn('');\r\n      return;\r\n    }\r\n    if (\r\n      this.ngControl &&\r\n      this.ngControl.formDirective &&\r\n      this.ngControl.formDirective.form &&\r\n      this.ngControl.formDirective.form.bindingData\r\n    ) {\r\n      const bindingData = this.ngControl.formDirective.form.bindingData;\r\n      if (bindingData.setValue) {\r\n        const bindingPath = this.ngControl.formDirective.form.bindingPath;\r\n        let pathArr: string[] = [];\r\n        if (bindingPath) {\r\n          pathArr = bindingPath.split('/').filter(n => n !== '');\r\n        }\r\n        const multiPath = this.mapFields[this.primaryField].split(this.multipleChoiceSeparator);\r\n        const fieldPaths = pathArr.concat(multiPath[0].split('.'));\r\n        const ids = bindingData.getValue(fieldPaths);\r\n        if (!ids) {\r\n          this.emitSelections([]);\r\n          return;\r\n        }\r\n        this.assembleDataByOrgIds(ids.split(this.multipleChoiceSeparator));\r\n      }\r\n    }\r\n  }\r\n\r\n  // id\r\n  // ngOnChanges()mapFields2Component()\r\n  private assembleDataByOrgIds(ids: string[]) {\r\n    if (!ids || ids.length === 0) {\r\n      return;\r\n    }\r\n    if (ids && ids.length > 1 && !this.multiSelect) {\r\n      console.warn('~');\r\n      return;\r\n    }\r\n    const param: OrgRequestParam = {\r\n      absOrgType: this.absOrgType,\r\n      idList: ids,\r\n      getOrgAllPath: true,\r\n      getCurUser: false\r\n    };\r\n    this.apiService.getOrganization(param).subscribe((res: any) => {\r\n      if (res && res.data) {\r\n        this.selections = res.data;\r\n        if (!this.mapFields) {\r\n          this.assembleFinalText();\r\n        } else {\r\n          this.emitSelections(this.selections);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // input\r\n  // mapFieldsassembleDataByOrgIds()clearAll()removeItem()returnResult()\r\n  private assembleFinalText() {\r\n    this.finalText = [];\r\n    this.selections.forEach((item, index) => {\r\n      const formatedName = this.formatFn && this.formatFn(item);\r\n      const finalText = formatedName ? formatedName : item[this.displayField];\r\n      this.finalText.push(finalText);\r\n    });\r\n    this.finalText = this.finalText.slice();\r\n  }\r\n\r\n  // id\r\n  // ngOnInit()\r\n  initDialogHeight() {\r\n    const uuid = CommonUtil.newGuid();\r\n    this.dialogId += uuid;\r\n    const windowInnerHeight = window.innerHeight;\r\n    this.dialogHeight = windowInnerHeight - 60;\r\n    if (this.dialogHeight > 680) {\r\n      this.dialogHeight = 680;\r\n    }\r\n  }\r\n\r\n  // selectionsvalueChangeappendremove\r\n  // ngOnInit()\r\n  listenSelectionsChange() {\r\n    this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(data => {\r\n      if (data.changeType === ChangeType.ValueChanged) {\r\n        this.selections = _.cloneDeep(data.value);\r\n      } else if (data.changeType === ChangeType.Remove) {\r\n        this.selections = this.selections.filter(item => item[this.primaryField] !== data.value[this.primaryField]);\r\n      } else if (data.changeType === ChangeType.Append) {\r\n        CommonUtil.findIndex(data.value[this.primaryField], this.primaryField, this.selections) === -1 ? this.selections.push(data.value) : null;\r\n      }\r\n      this.cdRef.detectChanges();\r\n    });\r\n  }\r\n\r\n  // showTabIds\r\n  // ngOnInit()\r\n  private initTabs() {\r\n    if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {\r\n      this.enableFavorites = true;\r\n    } else {\r\n      this.enableFavorites = false;\r\n    }\r\n\r\n    // \r\n    // const allTabIdsArray = this.showTabIds.split(',').filter(item => item !== this.groupTabId);\r\n    // this.showTabIds = allTabIdsArray.join(',');\r\n    if (this.showTabIds.indexOf(this.groupTabId) !== -1) {\r\n      this.enableGroup = true;\r\n    } else {\r\n      this.enableGroup = false;\r\n    }\r\n    // \r\n    /*\r\n    if (this.enableGroup) {\r\n      const ccwork = window.top.document.createElement(\"script\")\r\n      ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();\r\n      window.document.head.appendChild(ccwork);\r\n    }\r\n    */\r\n  }\r\n\r\n  // \r\n  // ngOnInit()\r\n  private initGroupSearch() {\r\n    if (this.enableGroup) {\r\n      this.groupTitleStream.pipe(\r\n        debounceTime(500),\r\n        distinctUntilChanged()\r\n      ).subscribe(data => {\r\n        if (!!data) {\r\n          this.validGroupTitle = true;\r\n        } else {\r\n          this.validGroupTitle = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // \r\n  // ngAfterViewInit()\r\n  listenWindowResize() {\r\n    const dialogElement = document.querySelector('#' + this.dialogId);\r\n    let targetElement = null;\r\n    if (!!dialogElement) {\r\n      targetElement = dialogElement.querySelector('.modal-dialog');\r\n    }\r\n    window.addEventListener('resize', () => {\r\n      if (!!targetElement) {\r\n        let height = window.innerHeight - 60;\r\n        if (height > 680) {\r\n          height = 680;\r\n        }\r\n        this.dialogHeight = height;\r\n        const innerHeight = height + 'px';\r\n        const marginTop = '-' + height / 2 + 'px';\r\n        this.render.setStyle(targetElement, 'height', innerHeight);\r\n        this.render.setStyle(targetElement, 'margin-top', marginTop);\r\n      }\r\n    });\r\n  }\r\n\r\n  // \r\n  // showFarrisDialog()\r\n  private initFavorites() {\r\n    this.favoritesTool.absOrgType = this.absOrgType;\r\n    this.favoritesTool.busNum = this.busNum;\r\n    this.favoritesTool.idField = this.primaryField;\r\n    this.favoritesTool.absRfQueryUrl = this.absRfQueryUrl;\r\n    this.favoritesTool.absRfModifyUrl = this.absRfModifyUrl;\r\n    this.favoritesTool.getFavoritesList().subscribe((result) => {\r\n      const resData = result ? (result as any).orgData : [];\r\n      this.favoritesTool.favoritesList = resData;\r\n      this.favoritesTool.setFavoritesList(resData);\r\n    });\r\n  }\r\n\r\n  // \r\n  showFarrisDialog() {\r\n    this.isShow = true;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      setTimeout(() => {\r\n        this.dialog.show();\r\n        if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {\r\n          this.initFavorites();\r\n        }\r\n        if (this.mapFields) {\r\n          this.mapFields2Component();\r\n          return;\r\n        }\r\n        this.stateMgr.emitSelections(this.selections, ChangeType.ValueChanged);\r\n      });\r\n    })\r\n  }\r\n\r\n  // input\r\n  clearAll() {\r\n    this.selections = [];\r\n    this.assembleFinalText();\r\n    this.onModelChange(this.finalText.join());\r\n    this.onModelTouched(this.finalText.join());\r\n    this.emitSelections([]);\r\n    this.inputClear.emit();\r\n  }\r\n\r\n  // input\r\n  removeItem(data: any, index: number) {\r\n    this.selections.splice(index, 1);\r\n    this.assembleFinalText();\r\n    // udt\r\n    this.onModelChange(this.finalText.join());\r\n    this.onModelTouched(this.finalText.join());\r\n    this.emitSelections(data, ChangeType.Remove);\r\n    this.tagRemoved.emit({\r\n      deleteItem: data,\r\n      deleteIndex: index,\r\n      selections: this.selections\r\n    });\r\n  }\r\n\r\n  // \r\n  clearSeletions() {\r\n    this.stateMgr.emitSelections([], ChangeType.ValueChanged);\r\n  }\r\n\r\n  // \r\n  onSearch() {\r\n    if (!!this.searchText) {\r\n      this.hideSearchPanel = false;\r\n      this.onSearchToken = CommonUtil.newGuid();\r\n    }\r\n  }\r\n\r\n  // \r\n  clearSearch() {\r\n    this.hideSearchPanel = true;\r\n    this.onSearchToken = false;\r\n  }\r\n\r\n  // \r\n  listenSearchText(e) {\r\n    if (e.code === 'Backspace' || e.code === 'Delete') {\r\n      if (!this.searchText) {\r\n        this.clearSearch();\r\n      }\r\n    }\r\n  }\r\n\r\n  // true\r\n  listenClosePanelChange(e) {\r\n    this.hideSearchPanel = e;\r\n  }\r\n\r\n  // \r\n  closeGroupDialog() {\r\n    this.groupDialogOpend = false;\r\n    this.editingGroupId = null;\r\n    this.groupTitle = null;\r\n    this.groupNote = null;\r\n    this.groupDialogTitle = '';\r\n  }\r\n\r\n  // keyup\r\n  listenGroupTitle(e) {\r\n    this.groupTitleStream.next(this.groupTitle);\r\n  }\r\n\r\n  // \r\n  listenOpenGroup(e) {\r\n    this.groupDialogOpend = e;\r\n  }\r\n\r\n  // \r\n  listenGroupChange(item: any) {\r\n    this.groupDialogOpend = true;\r\n    this.editingGroupId = item.id;\r\n    this.groupTitle = item.title;\r\n    this.groupNote = item.description;\r\n    this.groupDialogTitle = '';\r\n}\r\n\r\n  // \r\n  saveGroup() {\r\n    if (!this.groupTitle) {\r\n      this.validGroupTitle = false;\r\n      return;\r\n    }\r\n    const groupId = CommonUtil.newGuid();\r\n    let groupCode = 'orgGroup_private_';\r\n    groupCode += Math.random().toString(16).substring(2, 10);\r\n    const addIds = [];\r\n    this.selections.forEach(selection => {\r\n      addIds.push(selection[this.primaryField]);\r\n    });\r\n    this.groupDialogOpend = false;\r\n    const body: SaveGroupReqeustParam = {\r\n      groupId,\r\n      groupCode,\r\n      title: this.groupTitle,\r\n      description: this.groupNote,\r\n      absOrgType: this.absOrgType,\r\n      changeType: Number(1)\r\n    };\r\n    if (this.editingGroupId) {\r\n      body.groupId = this.editingGroupId;\r\n      body.changeType = Number(2);\r\n      delete body.groupCode;\r\n      this.updateNameOrNote(body);\r\n      return;\r\n    }\r\n    const newGroup$ = this.apiService.saveGroup(body);\r\n    newGroup$.pipe(\r\n      switchMap(\r\n        () => {\r\n          console.log('');\r\n          this.libOrgGroup.selectedGroupId = groupId;\r\n          const addOrgsInNewGroup$ = this.apiService.saveGroup({\r\n            groupId,\r\n            addIds,\r\n            deleteIds: [],\r\n            changeType: Number(3)\r\n          });\r\n          return addOrgsInNewGroup$.pipe(\r\n            tap(\r\n              (data) => {\r\n                if(data) {\r\n                  console.log('');\r\n                  if(this.currentTabId == this.groupTabId) {\r\n                    this.libOrgGroup.assembleData();\r\n                  }\r\n                }\r\n              }\r\n            )\r\n          );\r\n        }\r\n      )\r\n    ).subscribe();\r\n  }\r\n\r\n  private updateNameOrNote(param: SaveGroupReqeustParam) {\r\n    const updateInfo$ = this.apiService.saveGroup(param);\r\n    updateInfo$.pipe(\r\n      tap(\r\n        (data) => {\r\n          if(data) {\r\n            console.log('');\r\n            this.editingGroupId = null;\r\n            this.groupTitle = null;\r\n            this.groupNote = null;\r\n            this.groupDialogTitle = '';\r\n            this.libOrgGroup.assembleData();\r\n          }\r\n        }\r\n      )\r\n    ).subscribe();\r\n  }\r\n\r\n  // 10\r\n  returnResult(type: number) {\r\n    let finalText = '';\r\n    if (!!type) {\r\n      this.confirmToken = true;\r\n      this.assembleFinalText();\r\n      finalText = this.finalText.join();\r\n      if (this.selections && this.selections.length) {\r\n        this.selectionsChange.emit({\r\n          selections: this.selections\r\n        });\r\n        this.onModelChange(finalText);\r\n        this.onModelTouched(finalText);\r\n      } else {\r\n        this.onModelChange(finalText);\r\n        this.onModelTouched(finalText);\r\n        this.selectionsChange.emit({\r\n          selections: this.selections\r\n        });\r\n      }\r\n    }\r\n    this.orgIds = [];\r\n    this.dialog.close();\r\n    this.isShow = false;\r\n  }\r\n\r\n  changeTabs(e: any) {\r\n    if (e.nextId === this.groupTabId) {\r\n      this.currentTabId = this.groupTabId;\r\n      this.libOrgGroup.selections = _.cloneDeep(this.selections);\r\n      this.libOrgGroup.assembleData();\r\n    } else if(e.nextId === this.favoritesTabId) {\r\n      this.currentTabId = this.favoritesTabId;\r\n      // this.libOrgFavorites.selections = _.cloneDeep(this.selections);\r\n      // this.libOrgFavorites.assembleData();\r\n    } else if(e.nextId === this.organizationTabId) {\r\n      this.currentTabId = this.organizationTabId;\r\n      // this.libOrgTree.selections = _.cloneDeep(this.selections);\r\n      // this.libOrgTree.assembleData();\r\n    }\r\n  }\r\n}\r\n","import {\r\n    Component, Input, EventEmitter, Output, OnInit, AfterViewInit, SimpleChanges, OnChanges, ChangeDetectorRef, Optional, Injector, ViewChild, TemplateRef, HostBinding, NgZone, OnDestroy\r\n} from '@angular/core';\r\nimport { ApiService } from '../../utils/api.service';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { forkJoin, of } from 'rxjs';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { ChangeType, OrgRequestParam } from '../../utils/index.type';\r\nimport { CommonUtil } from '../../utils/common.tool';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { StateMgrTool } from '../../utils/state.mgr.tool';\r\nimport { Subscription } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n    selector: 'lib-org',\r\n    templateUrl: './to.component.html',\r\n    styleUrls: ['./to.component.css'],\r\n})\r\nexport class OrganizationComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n\r\n    @Input() enableFavorites: boolean;\r\n    @HostBinding('class.f-utils-fill-flex-column') baseCls = true;\r\n    @ViewChild('farristree') farrisTree: TreeTableComponent;\r\n    @ViewChild('orgNameCell') orgNameCell: TemplateRef<any>;\r\n    @ViewChild('favoritesCell') favoritesCell: TemplateRef<any>;\r\n    @Input() primaryField = 'orgId';\r\n    @Input() enableHierarchicalLoading: boolean;\r\n    @Input() notGetStopOrg: boolean;\r\n    @Input() layer: number;\r\n    @Input() multiSelect: boolean;\r\n    @Input() absOrgType: any;\r\n    @Input() cascadeCheck: boolean;\r\n    @Input() cascadeUp: boolean;\r\n    @Input() cascadeDown: boolean;\r\n    @Input() showCheckAll: boolean;\r\n    @Input() keepSelect: boolean;\r\n    @Input() pathLength = 4;\r\n    // id, idselections---todo\r\n    @Input() orgIds: string[];\r\n    @Input() selectedLimit: number;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n\r\n    private selectionsSub: Subscription;\r\n    private favoritesSub: Subscription;\r\n    originalTreeData = [];\r\n    locationOrgText = '';\r\n    treeListData: TreeNode[] = [];\r\n    treeTableCols = [];\r\n    selections = [];\r\n    favoritesList = [];\r\n    initLoad = true;\r\n    checkedOrgs = [];\r\n\r\n    beforeClickNode = (e) => {\r\n        if (!this.enableHierarchicalLoading) {\r\n            return of(true);\r\n        }\r\n        if (!this.multiSelect) {\r\n            if (e.rowNode.isSelected) {\r\n                this.setSelections([]);\r\n            } else {\r\n                this.setSelections(new Array(e.rowNode.node.data), ChangeType.ValueChanged, 'other');\r\n            }\r\n            return of(false);\r\n        }\r\n\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getCurUser: false,\r\n            parentID: e.rowNode.id,\r\n            withAllSub: true,\r\n            getOrgAllPath: true\r\n        };\r\n        return this.apiService.getOrganization(param).pipe(\r\n            switchMap(\r\n                (data: any) => {\r\n                    if (data['data'].length > this.selectedLimit && !e.rowNode.isChecked) {\r\n                        this.msgService.show('warning', `${this.selectedLimit}~`, true);\r\n                        return of(false)\r\n                    }\r\n                    if (!e.rowNode.isChecked) {\r\n                        // todo selection\r\n                        data.data.forEach(item => {\r\n                            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) === -1) {\r\n                                this.setSelections(item, ChangeType.Append, 'other');\r\n                            }\r\n                        })\r\n                    } else {\r\n                        this.selections.forEach((selection, index) => {\r\n                            data.data.forEach(item => {\r\n                                if (selection[this.primaryField] === item[this.primaryField]) {\r\n                                    this.setSelections(item, ChangeType.Remove, 'other');\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                    this.cdr.detectChanges();\r\n                    return of(false);\r\n                }\r\n            )\r\n        );\r\n    };\r\n\r\n    beforeCheckAll = (e) => {\r\n        if (!this.enableHierarchicalLoading) {\r\n            return of(true);\r\n        }\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getCurUser: false,\r\n            parentID: e.instance.data[0].id,\r\n            withAllSub: true,\r\n            getOrgAllPath: true\r\n        };\r\n        return this.apiService.getOrganization(param).pipe(\r\n            switchMap(\r\n                (data: any) => {\r\n                    if (data['data'].length > this.selectedLimit) {\r\n                        this.msgService.show('warning', `${this.selectedLimit}~`, true);\r\n                        return of(false)\r\n                    }\r\n                    this.setSelections(data['data'], ChangeType.ValueChanged, 'other');\r\n                    return of(true);\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        private cdr: ChangeDetectorRef,\r\n        private favoritesTool: FavoritesTool,\r\n        private injector: Injector,\r\n        private ngZone: NgZone,\r\n        private stateMgr: StateMgrTool,\r\n        private msgService: MessagerService\r\n    ) {\r\n        this.cdr = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.favoritesSub.unsubscribe();\r\n        this.selectionsSub.unsubscribe();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.treeTableCols = [\r\n            { field: 'name', title: '', template: this.orgNameCell },\r\n            { field: 'code', title: '' }\r\n        ];\r\n        if (this.enableFavorites) {\r\n            this.treeTableCols.push({\r\n                field: '',\r\n                title: '',\r\n                template: this.favoritesCell\r\n            });\r\n            this.treeTableCols[0].width = 300;\r\n            this.treeTableCols[1].width = 300;\r\n        }\r\n        this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(data => {\r\n            this.favoritesList = data;\r\n            this.setFavorites(this.treeListData);\r\n            this.farrisTree.detectChanges();\r\n        });\r\n        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(data => {\r\n            if (data.changeType === ChangeType.ValueChanged) {\r\n                this.selections = _.cloneDeep(data.value);\r\n                if (this.selections.length === 0) {\r\n                    this.farrisTree.clearCheckeds();\r\n                    this.farrisTree.clearSelections();\r\n                    this.farrisTree.detectChanges();\r\n                }\r\n                if (data.from === 'other') {\r\n                    this.tickSelections();\r\n                }\r\n            } else if (data.changeType === ChangeType.Remove) {\r\n                this.selections = this.selections.filter(item => item[this.primaryField] !== data.value[this.primaryField]);\r\n                if (this.multiSelect) {\r\n                    this.inTreeList(this.treeListData, data.value);\r\n                    if (!!data.value.inTreeList) {\r\n                        this.farrisTree.unCheckedNode(data.value[this.primaryField]);\r\n                    }\r\n                } else {\r\n                    this.farrisTree.unSelectNode(data.value[this.primaryField]);\r\n                }\r\n            } else if (data.changeType === ChangeType.Append) {\r\n                CommonUtil.findIndex(data.value[this.primaryField], this.primaryField, this.selections) === -1 ? this.selections.push(data.value) : null;\r\n                if (this.multiSelect) {\r\n                    this.inTreeList(this.treeListData, data.value);\r\n                    if (!!data.value.inTreeList) {\r\n                        this.farrisTree.checkedNode(data.value[this.primaryField]);\r\n                    }\r\n                } else {\r\n                    this.farrisTree.selectNode(data.value[this.primaryField]);\r\n                }\r\n            }\r\n            if (this.initLoad) {\r\n                if(this.enableHierarchicalLoading) {\r\n                    this.hlAssembleData();\r\n                } else {\r\n                    this.assembleData();\r\n                }\r\n                this.initLoad = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        /*\r\n        const orgIdsChange = changes.orgIds;\r\n        if (orgIdsChange && orgIdsChange.currentValue) {\r\n            this.checkedOrgs = orgIdsChange.currentValue;\r\n        }\r\n        */\r\n    }\r\n\r\n    // \r\n    private setFavorites(treeListData: TreeNode[]) {\r\n        for (let i = 0; i < treeListData.length; i++) {\r\n            if (CommonUtil.findIndex(treeListData[i].id, this.primaryField, this.favoritesList) === -1) {\r\n                treeListData[i].data.inFavorites = false;\r\n            } else {\r\n                treeListData[i].data.inFavorites = true;\r\n            }\r\n            if (treeListData[i].children.length) {\r\n                this.setFavorites(treeListData[i].children);\r\n            }\r\n        }\r\n    }\r\n\r\n    private setSelections(selections: any, changeType = ChangeType.ValueChanged, from: string = 'tree') {\r\n        this.stateMgr.emitSelections(selections, changeType, from);\r\n    }\r\n\r\n    // \r\n    checkAll() {\r\n        if (!this.enableHierarchicalLoading) {\r\n            const checkeds = [];\r\n            this.farrisTree.checkeds.forEach(item => {\r\n                checkeds.push(item.data);\r\n            })\r\n            this.setSelections(checkeds);\r\n        }\r\n    }\r\n\r\n    // \r\n    unCheckAll() {\r\n        this.setSelections([]);\r\n    }\r\n\r\n    // \r\n    // todo beforeUnCheckAll\r\n    changeSelections(e: any) {\r\n        if (!this.enableHierarchicalLoading && !!e.originalEvent) {\r\n            this.multiSelect ? this.toggleChecked(e) : this.toggleSelected(e);\r\n        }\r\n    }\r\n\r\n    toggleChecked(e: any) {\r\n        let checkeds = [];\r\n        e && e.instance && e.instance.checkeds.forEach(item => {\r\n            checkeds.push(item.data);\r\n        });\r\n        this.setSelections(checkeds);\r\n    }\r\n\r\n    toggleSelected(e: any) {\r\n        let selected = [];\r\n        e && e.instance && e.instance.selections.forEach(item => {\r\n            selected.push(item.data);\r\n        });\r\n        this.setSelections(selected);\r\n    }\r\n\r\n    // id\r\n    private assembleDataByOrgIds(ids: string[]){\r\n        if(!ids || ids.length === 0) {\r\n            return;\r\n        }\r\n        if(ids && ids.length > 0 && !this.multiSelect){\r\n            console.warn('~');\r\n            return;\r\n        }\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            idList: ids,\r\n            getCurUser: false,\r\n            getOrgAllPath: true,\r\n        };\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (res && res.data && res.data.length > 0) {\r\n                this.checkedOrgs = res.data;\r\n                res.data.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) === -1) {\r\n                        this.setSelections(item, ChangeType.Append, 'other');\r\n                    }\r\n                });\r\n                this.tickSelections();\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    hlAssembleData() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getOrgAllPath: true\r\n        };\r\n        const layerList = [];\r\n        let layer = this.layer;\r\n        while (layer > 0) {\r\n            layerList.push(layer);\r\n            layer -= 1;\r\n        }\r\n        param.layerList = layerList;\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (!res || !res.data) {\r\n                return;\r\n            }\r\n            if(this.orgIds.length == 0){\r\n                res.data.forEach(item => {\r\n                    item.selectable = true;\r\n                });\r\n            }\r\n            if (this.enableFavorites) {\r\n                res.data.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.favoritesList) === -1) {\r\n                        item.inFavorites = false;\r\n                    } else {\r\n                        item.inFavorites = true;\r\n                    }\r\n                });\r\n            }\r\n            this.originalTreeData = res.data;\r\n            if (res && res.curAbsUser && res.curAbsUser.orgAllPathInfo) {\r\n                const curUserOrgPath = res.curAbsUser.orgAllPathInfo;\r\n                curUserOrgPath.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, res.data) === -1) {\r\n                        res.data.push(item);\r\n                    }\r\n                });\r\n            }\r\n            this.treeListData = this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);\r\n            this.farrisTree.loadData(this.treeListData);\r\n            /*\r\n            if(this.checkedOrgs && this.checkedOrgs.length) {\r\n                this.assembleDataByOrgIds(this.checkedOrgs);\r\n                return;\r\n            }\r\n            */\r\n            this.tickSelections();\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n    // \r\n    assembleData() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getOrgAllPath: true\r\n        };\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (!res || !res.data) {\r\n                return;\r\n            }\r\n            if (this.enableFavorites) {\r\n                res.data.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.favoritesList) === -1) {\r\n                        item.inFavorites = false;\r\n                    } else {\r\n                        item.inFavorites = true;\r\n                    }\r\n                });\r\n            }\r\n            this.originalTreeData = res.data;\r\n            this.treeListData = this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);\r\n            this.farrisTree.loadData(this.treeListData);\r\n            /*\r\n            if(this.checkedOrgs && this.checkedOrgs.length) {\r\n                this.assembleDataByOrgIds(this.checkedOrgs);\r\n                return;\r\n            }\r\n            */\r\n            this.tickSelections();\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n    // \r\n    private inTreeList(treeListData: TreeNode[], item: any) {\r\n        for (let i = 0; i < treeListData.length; i++) {\r\n            if (treeListData[i].id === item[this.primaryField]) {\r\n                item.inTreeList = true;\r\n                break;\r\n            }\r\n            if (treeListData[i].children.length) {\r\n                this.inTreeList(treeListData[i].children, item);\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    private tickSelections() {\r\n        const ids = [];\r\n        this.selections.forEach(item => {\r\n            this.inTreeList(this.treeListData, item);\r\n            if (!!item.inTreeList) {\r\n                ids.push(item[this.primaryField]);\r\n            }\r\n        });\r\n\r\n        /*\r\n        if(this.checkedOrgs && this.checkedOrgs.length) {\r\n            this.checkedOrgs.forEach(orgId => {\r\n                if(CommonUtil.findIndex(orgId, this.primaryField, this.selections) === -1) {\r\n                    ids.push(orgId);\r\n                }\r\n            });\r\n        }\r\n        */\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                if (!ids.length) {\r\n                    return;\r\n                }\r\n                if (this.multiSelect) {\r\n                    this.farrisTree.checkedNodes(ids, true, true);\r\n                } else {\r\n                    if (ids.length > 1) {\r\n                        this.msgService.show('warning', `${ids.length}~`, true);\r\n                        return;\r\n                    }\r\n                    this.farrisTree.clearSelections();\r\n                    this.farrisTree.detectChanges();\r\n                    this.farrisTree.selectNode(ids.join());\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    /**\r\n    * \r\n    * @param plainSource \r\n    * @param layer \r\n    * @returns \r\n    */\r\n    private dataToTree(plainSource: any, layer: number, expandedPath: string = '') {\r\n        const treeSource = this.dealData(plainSource, expandedPath);\r\n        const parents = treeSource.filter(item => {\r\n            return item.data.layer === layer;\r\n        });\r\n        this.treeData(parents, treeSource, 1);\r\n        return parents;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    private dealData(data: any[], expandedPath: string = '') {\r\n        const pathList = [];\r\n        if(expandedPath != '') {\r\n            let maxLength = expandedPath.length / this.pathLength;\r\n            if (this.enableHierarchicalLoading) {\r\n                maxLength -= 1;\r\n            }\r\n            for (let a = 0; a < maxLength; a++) {\r\n                pathList.push({ path: expandedPath.substring(0, 4 * (a + 1)) });\r\n            }\r\n        }\r\n        const newDatas = [];\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const newsDataObj: any = {\r\n                    data: {\r\n                        orgId: item[this.primaryField],\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        code: item.code,\r\n                        layer: Number(item.layer),\r\n                        orgAllPath: item.orgAllPath,\r\n                        inFavorites: item.inFavorites\r\n                    },\r\n                    expanded: true,\r\n                    children: []\r\n                };\r\n                // let expanded = [];\r\n                // if (this.enableHierarchicalLoading) {\r\n                //     this.nodeExpanded(newsDataObj, this.treeListData, expanded);\r\n                // }\r\n                if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {\r\n                    newsDataObj.expanded = true;\r\n                } else {\r\n                    newsDataObj.expanded = false;\r\n                    if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                        newsDataObj.leaf = false;\r\n                    }\r\n                }\r\n                // todo \r\n                //if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {\r\n                    //newsDataObj.leaf = false;\r\n                   // newsDataObj.expanded = false;\r\n                //}\r\n                newDatas.push(newsDataObj);\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param parents \r\n     * @param treeSource \r\n     * @param layer \r\n     */\r\n    treeData(parents: any, treeSource: any, layer: number) {\r\n        parents.forEach(parent => {\r\n            const parentPath = parent['data']['path'];\r\n            const parentLayer = parent['data']['layer'];\r\n            treeSource.forEach(item => {\r\n                if (item && item['data'] && item['data']['path']) {\r\n                    const itemPath = item['data']['path'];\r\n                    const itemLayer = item['data']['layer'];\r\n                    let targetPath: string;\r\n                    if (itemPath && itemPath.length > parentPath.length) {\r\n                        targetPath = itemPath.substr(0, Number(layer) * 4);\r\n                    }\r\n                    if (parentPath === targetPath && parentLayer === itemLayer - 1) {\r\n                        parent['children'].push(item);\r\n                    }\r\n                    if (parentPath === targetPath) {\r\n                        this.treeData([item], treeSource, Number(layer) + 1);\r\n                    }\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    // \r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    // \r\n    listenTreeExpand(obj: any) {\r\n        // todo \r\n        if (this.enableHierarchicalLoading && obj.children.length === 0) {\r\n            this.getOrganizationByParentNode(obj);\r\n        }\r\n    }\r\n\r\n    // \r\n    getOrganizationByParentNode(parentNode: any) {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            parentID: parentNode.id,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getCurUser: false,\r\n            getOrgAllPath: true\r\n        };\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (res && res.data) {\r\n                const newDatas = [];\r\n                res.data.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.originalTreeData) === -1) {\r\n                        item.selectable = true;\r\n                        this.originalTreeData.push(item);\r\n                    }\r\n                    if (this.enableFavorites) {\r\n                        item.inFavorites = true;\r\n                        if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.favoritesList) === -1) {\r\n                            item.inFavorites = false;\r\n                        }\r\n                    }\r\n                    newDatas.push(item);\r\n                });\r\n                const nodes = this.dealData(newDatas);\r\n                this.farrisTree.appendChildren(nodes, parentNode);\r\n                this.farrisTree.detectChanges();\r\n                this.tickSelections();\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    private nodeExpanded(item: any, arr: TreeNode[], expanded: boolean[]): void {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (item.data.id === arr[i].data.id) {\r\n                expanded[0] = arr[i].expanded;\r\n            } else if (arr[i].children.length) {\r\n                this.nodeExpanded(item, arr[i].children, expanded);\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    private expandTreeNode(treeData: any, path: any[], layer: number) {\r\n        treeData.forEach(node => {\r\n            if (path.includes(node.data.path)) {\r\n                this.farrisTree.expandNode(node.data.id);\r\n            }\r\n            if (node.data.layer < layer && node.children.length) {\r\n                this.expandTreeNode(node.children, path, layer);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","import {\r\n    Component, Input, EventEmitter, Output, OnInit, AfterViewInit, SimpleChanges, OnChanges, ChangeDetectorRef, Injector, NgZone, OnDestroy\r\n} from '@angular/core';\r\nimport { ApiService } from '../../utils/api.service';\r\nimport * as _ from 'lodash-es';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { ChangeType, OrgRequestParam } from '../../utils/index.type';\r\nimport { CommonUtil } from '../../utils/common.tool';\r\nimport { StateMgrTool } from '../../utils/state.mgr.tool';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'lib-selection',\r\n    templateUrl: './sl.component.html',\r\n    styleUrls: ['./sl.component.css'],\r\n})\r\nexport class SelectionComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n\r\n    @Input() primaryField: string;\r\n    @Input() enableGroup: boolean;\r\n    @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n    datas = [];\r\n    items = [];\r\n    pageIndex = 0;\r\n    pageSize = 5;\r\n    moreText = '~';\r\n    selectionsSub: Subscription;\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        private cdr: ChangeDetectorRef,\r\n        private favoritesTool: FavoritesTool,\r\n        private injector: Injector,\r\n        private ngZone: NgZone,\r\n        private stateMgr: StateMgrTool\r\n    ) {\r\n        this.cdr = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.selectionsSub.unsubscribe();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(data => {\r\n            this.pageIndex = 0;\r\n            if (data.changeType === ChangeType.ValueChanged) {\r\n                this.datas = _.cloneDeep(data.value);\r\n            } else if (data.changeType === ChangeType.Remove) {\r\n                this.datas = this.datas.filter(item => item[this.primaryField] !== data.value[this.primaryField]);\r\n            } else if (data.changeType === ChangeType.Append) {\r\n                if (CommonUtil.findIndex(data.value[this.primaryField], this.primaryField, this.datas) === -1) {\r\n                    this.datas.push(data.value);\r\n                }\r\n            }\r\n            this.items = this.datas.slice(this.pageIndex, this.pageSize);\r\n            if (this.items.length < this.datas.length) {\r\n                this.moreText = '';\r\n            } else {\r\n                this.moreText = '~';\r\n            }\r\n            this.cdr.detectChanges();\r\n        })\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n\r\n    }\r\n\r\n    openGroupDialog() {\r\n        this.openedChange.emit(true);\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n    loadMore() {\r\n        if (this.pageIndex < this.datas.length) {\r\n            this.pageIndex += 1;\r\n            const currentPageIndex = this.pageIndex * this.pageSize;\r\n            const currentItems = this.datas.slice(currentPageIndex, currentPageIndex + this.pageSize)\r\n            this.items = this.items.concat(currentItems);\r\n            if (this.items.length && this.items.length === this.datas.length) {\r\n                this.moreText = '~';\r\n            }\r\n            this.cdr.detectChanges;\r\n        }\r\n    }\r\n\r\n    removeItem(e: any, data: any, i: any) {\r\n        this.stateMgr.emitSelections(data, ChangeType.Remove);\r\n        if(i !== 0) {\r\n            e.stopPropagation();\r\n            e.cancelBubble = true;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","// tslint:disable-next-line:max-line-length\r\nconst noDataImg = 'url(data:image/png;base64,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)';\r\n// tslint:disable-next-line:max-line-length\r\nconst defaultProfilePicture = 'data:image/png;base64,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';\r\n\r\n\r\n\r\nexport { noDataImg, defaultProfilePicture };\r\n","import {\r\n    Component, Input, EventEmitter, Output, OnInit, AfterViewInit, ChangeDetectorRef, Optional, OnDestroy, Injector\r\n} from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { Subscription } from 'rxjs';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { ApiService } from '../../utils/api.service';\r\nimport { CommonUtil } from '../../utils/common.tool';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { ChangeType, OrgRequestParam } from '../../utils/index.type';\r\nimport { StateMgrTool } from '../../utils/state.mgr.tool';\r\n\r\n@Component({\r\n    selector: 'lib-search',\r\n    templateUrl: './srp.component.html',\r\n    styleUrls: ['./srp.component.css'],\r\n})\r\nexport class SearchComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() primaryField: string;\r\n    @Input() multiSelect: boolean;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() searchText: string;\r\n    @Input() absOrgType: string;\r\n    @Input() notGetStopOrg: boolean;\r\n    @Input() pageSize: number;\r\n    @Input() set onSearch(value: any) {\r\n        if (!!value) {\r\n            this.loadSearchResult();\r\n        } else {\r\n            this.itemTotalCount = 0;\r\n            this.totalItems = [];\r\n        }\r\n    }\r\n    @Output() closePanelChange = new EventEmitter<boolean>();\r\n\r\n    allChecked = false;\r\n    columns: any;\r\n    selections: any[] = [];\r\n\r\n    cloneSelections = [];\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    totalItems = [];\r\n    perPageItems = [];\r\n    favoritesList = [];\r\n    pageIndex = 1;\r\n    pageTotal: number = 0;\r\n    itemTotalCount = 0;\r\n\r\n    private selectionsSub: Subscription;\r\n    private favoritesSub: Subscription;\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        private favoritesTool: FavoritesTool,\r\n        private stateMgr: StateMgrTool,\r\n        private cdr: ChangeDetectorRef,\r\n        private injector: Injector\r\n    ) {\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.selectionsSub.unsubscribe();\r\n        if (this.enableFavorites) {\r\n            this.favoritesSub.unsubscribe();\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.enableFavorites) {\r\n            this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                this.setFavorites();\r\n            });\r\n        }\r\n        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(data => {\r\n            if (data.changeType === ChangeType.ValueChanged) {\r\n                this.selections = _.cloneDeep(data.value);\r\n                this.toggleChecked();\r\n            } else if (data.changeType === ChangeType.Remove) {\r\n                this.unSelectLine(data.value);\r\n            } else if (data.changeType === ChangeType.Append) {\r\n                this.selectLine(data.value);\r\n            }\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    private setFavorites() {\r\n        this.perPageItems.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            } else {\r\n                item.inFavorites = false;\r\n            }\r\n        })\r\n    }\r\n\r\n    turnOverPage(dir: string, num: number) {\r\n        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {\r\n            return;\r\n        }\r\n        this.pageIndex = this.pageIndex + num;\r\n        this.switchPage({ pageIndex: this.pageIndex });\r\n    }\r\n\r\n    beforePageIndexChange(inputEl: KeyboardEvent, maxNumber) {\r\n        const target = inputEl.target as any;\r\n        const currentPageNumber = Number(target.value);\r\n        if (currentPageNumber > maxNumber) {\r\n            target.value = maxNumber;\r\n        } else {\r\n            if (currentPageNumber < 1) {\r\n                target.value = 1;\r\n            }\r\n        }\r\n        this.pageIndex = Number(target.value);\r\n    }\r\n\r\n    closePanel() {\r\n        this.totalItems = [];\r\n        this.perPageItems = [];\r\n        this.itemTotalCount = 0;\r\n        this.pageTotal = 0;\r\n        this.closePanelChange.emit(true);\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.emitSelections(this.selections, ChangeType.ValueChanged);\r\n    }\r\n\r\n    toggleOne(data, e) {\r\n        if (data.checked) {\r\n            if (this.multiSelect) {\r\n                this.emitSelections(data, ChangeType.Remove);\r\n            } else {\r\n                this.emitSelections([]);\r\n            }\r\n        } else {\r\n            if (this.multiSelect) {\r\n                this.emitSelections(data, ChangeType.Append);\r\n            } else {\r\n                this.emitSelections(new Array(data));\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    loadSearchResult() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getCurUser: false,\r\n            getOrgAllPath: true,\r\n            codeOrName: this.searchText\r\n        };\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (!res || !res.data) {\r\n                return;\r\n            }\r\n            this.itemTotalCount = res.data.length;\r\n            this.totalItems = res.data;\r\n            this.pageTotal = Math.ceil(this.itemTotalCount / this.pageSize);\r\n            this.switchPage({ pageIndex: 1 });\r\n            this.toggleChecked();\r\n        });\r\n    }\r\n\r\n    switchPage(pageInfo: { pageIndex: number }) {\r\n        if (!pageInfo || pageInfo.pageIndex < 1) {\r\n            return;\r\n        }\r\n        let startIndex = (pageInfo.pageIndex - 1) * this.pageSize;\r\n        let endIndex = startIndex + this.pageSize;\r\n        this.perPageItems = this.totalItems.slice(startIndex, endIndex);\r\n        this.perPageItems.forEach(res => {\r\n            const indexId = CommonUtil.newGuid();\r\n            res.checked = false;\r\n            res.inFavorites = false;\r\n            res.indexId = indexId;\r\n            if (CommonUtil.findIndex(res[this.primaryField], this.primaryField, this.selections) !== -1) {\r\n                res.checked = true;\r\n            }\r\n            if (CommonUtil.findIndex(res[this.primaryField], this.primaryField, this.favoritesList) !== -1) {\r\n                res.inFavorites = true;\r\n            }\r\n        });\r\n        this.perPageItems = this.perPageItems.slice();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param dataArr \r\n     */\r\n    checkAll() {\r\n        this.perPageItems.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param dataArr \r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.perPageItems.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.primaryField] === selection[this.primaryField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     */\r\n    private selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.selections = [];\r\n            this.perPageItems.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     */\r\n    private unSelectLine(data: any) {\r\n        const index = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        this.setChecked(data, false);\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private setChecked(data: any, checked: boolean) {\r\n        const itemIndex = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.perPageItems);\r\n        if (itemIndex > -1) {\r\n            this.perPageItems[itemIndex].checked = checked;\r\n        }\r\n    }\r\n\r\n    private emitSelections(selections: any, changeType = ChangeType.ValueChanged) {\r\n        this.stateMgr.emitSelections(selections, changeType);\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     * @param collection \r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // \r\n        if (CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.setChecked(data, true);\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    toggleChecked() {\r\n        this.perPageItems.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.perPageItems.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.primaryField] === selection[this.primaryField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.perPageItems.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import {\r\n    Component, Input, OnInit, AfterViewInit, ChangeDetectorRef, Optional, OnDestroy, Injector\r\n} from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { Subscription } from 'rxjs';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { ApiService } from '../../utils/api.service';\r\nimport { CommonUtil } from '../../utils/common.tool';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { ChangeType, Organization, OrgRequestParam } from '../../utils/index.type';\r\nimport { StateMgrTool } from '../../utils/state.mgr.tool';\r\n\r\n@Component({\r\n    selector: 'lib-favorites',\r\n    templateUrl: './favorites.component.html',\r\n    styleUrls: ['./favorites.component.css'],\r\n})\r\nexport class FavoritesComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() primaryField: string;\r\n    @Input() multiSelect: boolean;\r\n\r\n    allChecked = false;\r\n    selections: any[] = [];\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    items = [];\r\n    favoritesList = [];\r\n\r\n    private selectionsSub: Subscription;\r\n    private favoritesSub: Subscription;\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        private favoritesTool: FavoritesTool,\r\n        private stateMgr: StateMgrTool,\r\n        private cdr: ChangeDetectorRef,\r\n        private injector: Injector\r\n    ) {\r\n        this.allIndexId = CommonUtil.newGuid();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.selectionsSub.unsubscribe();\r\n        this.favoritesSub.unsubscribe();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(data => {\r\n            this.favoritesList = data;\r\n            this.loadFavoritesList();\r\n        });\r\n        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(data => {\r\n            if (data.changeType === ChangeType.ValueChanged) {\r\n                this.selections = _.cloneDeep(data.value);\r\n                this.toggleChecked();\r\n            } else if (data.changeType === ChangeType.Remove) {\r\n                this.unSelectLine(data.value);\r\n            } else if (data.changeType === ChangeType.Append) {\r\n                this.selectLine(data.value);\r\n            }\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    assembleData() {\r\n        this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(data => {\r\n            this.favoritesList = data;\r\n            this.loadFavoritesList();\r\n        });\r\n    }\r\n\r\n    deleteFromFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    toggleAll(e: any) {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    toggleOne(data, e) {\r\n        if (data.checked) {\r\n            if (this.multiSelect) {\r\n                this.emitSelections(data, ChangeType.Remove);\r\n            } else {\r\n                this.emitSelections([]);\r\n            }\r\n        } else {\r\n            if (this.multiSelect) {\r\n                this.emitSelections(data, ChangeType.Append);\r\n            } else {\r\n                this.emitSelections(new Array(data));\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    loadFavoritesList() {\r\n        this.items = [];\r\n        this.favoritesList.forEach(res => {\r\n            const indexId = CommonUtil.newGuid();\r\n            const item: Organization = {\r\n                orgId: res.orgId,\r\n                code: res.code,\r\n                name: res.name,\r\n                orgAllPath: res.orgAllPath,\r\n                path: res.path,\r\n                layer: Number(res.layer),\r\n                indexId\r\n            };\r\n            if (CommonUtil.findIndex(res[this.primaryField], this.primaryField, this.selections) !== -1) {\r\n                item.checked = true;\r\n            }\r\n            this.items.push(item);\r\n        });\r\n        this.items = this.items.slice();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param dataArr \r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) === -1) {\r\n                this.emitSelections(item, ChangeType.Append);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param dataArr \r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        const checkeds = this.items.filter(item => item.checked);\r\n        checkeds.forEach(item => {\r\n            this.emitSelections(item, ChangeType.Remove);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     */\r\n    private selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     */\r\n     private unSelectLine(data: any) {\r\n        const index = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        this.setChecked(data, false);\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private setChecked(data: any, checked: boolean) {\r\n        const itemIndex = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.items);\r\n        if (itemIndex > -1) {\r\n            this.items[itemIndex].checked = checked;\r\n        }\r\n    }\r\n\r\n    private emitSelections(selections: any, changeType = ChangeType.ValueChanged) {\r\n        this.stateMgr.emitSelections(selections, changeType);\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     * @param collection \r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // \r\n        if (CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.setChecked(data, true);\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.primaryField] === selection[this.primaryField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Inject, Injector, Input, OnDestroy, OnInit, Optional, Output, ViewChild } from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { Subscription } from 'rxjs';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { ApiService } from '../../utils/api.service';\r\nimport { CommonUtil } from '../../utils/common.tool';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { ChangeType, Group, GroupItem } from '../../utils/index.type';\r\nimport { StateMgrTool } from '../../utils/state.mgr.tool';\r\nimport { tap, switchMap } from 'rxjs/operators';\r\nimport { AppendGroupOrgComponent } from '../append-group-org/appendorg.component';\r\nimport { FormMessageService, FormLoadingService } from '@farris/command-services';\r\n\r\n@Component({\r\n    selector: 'lib-group',\r\n    templateUrl: './group.component.html',\r\n    styleUrls: ['./group.component.css']\r\n})\r\nexport class GroupComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @ViewChild('appendOrg') appendOrg: AppendGroupOrgComponent;\r\n    @Input() primaryField = 'orgId';\r\n    @Input() multiSelect: any;\r\n    @Input() absOrgType: string;\r\n    @Input() busNum: string;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() notGetStopOrg: boolean;\r\n    @Input() groupApiUrl: string;\r\n    @Input() enableHierarchicalLoading: boolean;\r\n    @Input() cascadeCheck: boolean;\r\n    @Input() cascadeDown: boolean;\r\n    @Input() cascadeUp: boolean;\r\n    @Input() keepSelect: boolean;\r\n    @Input() layer: number;\r\n    @Input() selectedLimit: number;\r\n    @Input() showCheckAll: boolean; \r\n    @Output() groupChange = new EventEmitter<any>();\r\n\r\n    groupIdField = 'id';\r\n    userIdField = 'userId';\r\n    selections: any[] = [];\r\n    noDataImg = noDataImg;\r\n    allChecked = false;\r\n    items = [];\r\n    favoritesList = [];\r\n    groupData: Group = { public: [], personal: [] };\r\n    personnelList = [];\r\n    groupPersonnels = [];\r\n    publicVisible = true;\r\n    personalVisible = true;\r\n    publicToken = 'public';\r\n    personalToken = 'personal';\r\n    selectedGroupId: string;\r\n    allIndexId: string;\r\n    showGroupOrgDialog = false;\r\n    currentGroupType = 'public';\r\n    private selectionsSub: Subscription;\r\n    private favoritesSub: Subscription;\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        private favoritesTool: FavoritesTool,\r\n        private stateMgr: StateMgrTool,\r\n        private cdr: ChangeDetectorRef,\r\n        private injector: Injector,\r\n        private formMessageService: FormMessageService,\r\n        private formLoadingService: FormLoadingService\r\n    ) {\r\n        this.allIndexId = CommonUtil.newGuid();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.enableFavorites) {\r\n            this.favoritesSub.unsubscribe();\r\n        }\r\n        this.selectionsSub.unsubscribe();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.enableFavorites) {\r\n            this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                this.setFavorites();\r\n            });\r\n        }\r\n        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(data => {\r\n            if (data.changeType === ChangeType.ValueChanged) {\r\n                this.selections = _.cloneDeep(data.value);\r\n                this.toggleChecked();\r\n            } else if (data.changeType === ChangeType.Remove) {\r\n                this.unSelectLine(data.value);\r\n            } else if (data.changeType === ChangeType.Append) {\r\n                this.selectLine(data.value);\r\n            }\r\n            this.cdr.detectChanges();\r\n        });\r\n        this.getGroupList();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    assembleData() {\r\n        this.getGroupList();\r\n    }\r\n\r\n    // \r\n    updateGroup() {\r\n        const addList: any[] = [];\r\n        const primaryIds = this.items.map(item => { return item[this.primaryField]}).join();\r\n        this.appendOrg.currentOrgs.forEach(org => {\r\n            if(primaryIds.indexOf(org[this.primaryField]) === -1) {\r\n                addList.push(org[this.primaryField]);\r\n            }\r\n        });\r\n        const addOrgsInCurrentGroup$ = this.apiService.saveGroup({\r\n            groupId: this.selectedGroupId,\r\n            addIds: addList,\r\n            deleteIds: [],\r\n            changeType: Number(3)\r\n        });\r\n        addOrgsInCurrentGroup$.pipe(\r\n            tap(\r\n                (data) => {\r\n                    if(data) {\r\n                        console.log('');\r\n                        this.getOrgsByGroup({ id: this.selectedGroupId }, this.currentGroupType);\r\n                        this.toggleGroupOrgDialog(false);\r\n                    }\r\n                }\r\n            )\r\n        ).subscribe();\r\n    }\r\n\r\n    // \r\n    deleteGroup(e: MouseEvent, item: GroupItem) {\r\n        this.formMessageService.confirm(\"\").pipe(\r\n            switchMap((result: boolean) => {\r\n                if(!!result) {\r\n                    if (item[this.groupIdField] === this.selectedGroupId) {\r\n                        this.selectedGroupId = null;\r\n                        this.currentGroupType = this.publicToken;\r\n                    }\r\n                    const deleteGroup$ = this.apiService.saveGroup({\r\n                        groupId: item[this.groupIdField],\r\n                        changeType: Number(4)\r\n                    });\r\n                    return deleteGroup$.pipe(\r\n                        tap(\r\n                            (data) => {\r\n                                if(data) {\r\n                                    console.log('');\r\n                                    this.getGroupList();\r\n                                    e.stopPropagation();\r\n                                    e.cancelBubble = true;\r\n                                }\r\n                            }\r\n                        )\r\n                    )\r\n                } else {\r\n                    return;\r\n                }\r\n            })\r\n        ).subscribe();\r\n    }\r\n\r\n    // \r\n    editGroup(e: MouseEvent, item: GroupItem) {\r\n        this.selectedGroupId = item[this.groupIdField];\r\n        this.groupChange.next(item);\r\n        e.stopPropagation();\r\n        e.cancelBubble = true;\r\n    }\r\n\r\n    // \r\n    removeOrg(e: any, data: any) {\r\n        this.formMessageService.confirm(\"\").pipe(\r\n            switchMap((result: boolean) => {\r\n                if(!!result) {\r\n                    const deleteOrg$ = this.apiService.saveGroup({\r\n                        groupId: this.selectedGroupId,\r\n                        addIds: [],\r\n                        deleteIds: [data[this.primaryField]],\r\n                        changeType: Number(3)\r\n                    });\r\n                    return deleteOrg$.pipe(\r\n                        tap(\r\n                            (data) => {\r\n                                if(data) {\r\n                                    console.log('');\r\n                                    this.getOrgsByGroup({ id: this.selectedGroupId }, this.currentGroupType);\r\n                                    e.stopPropagation();\r\n                                    e.cancelBubble = true;\r\n                                }\r\n                            }\r\n                        )\r\n                    )\r\n                } else {\r\n                    return;\r\n                }\r\n            })\r\n        ).subscribe();   \r\n    }\r\n\r\n    // \r\n    private setChecked(data: any, checked: boolean) {\r\n        const itemIndex = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.items);\r\n        if (itemIndex > -1) {\r\n            this.items[itemIndex].checked = checked;\r\n        }\r\n    }\r\n\r\n    // \r\n    private setFavorites() {\r\n        this.items.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            } else {\r\n                item.inFavorites = false;\r\n            }\r\n        })\r\n    }\r\n\r\n    // \r\n    toggleGroupOrgDialog(show: boolean, groupType = this.personalToken) {\r\n        if (groupType === this.personalToken) {\r\n            this.showGroupOrgDialog = show;\r\n        }\r\n    }\r\n\r\n    // \r\n    getOrgsByGroup(item: any, groupType = this.publicToken) {\r\n        this.formLoadingService.show();\r\n        this.currentGroupType = groupType;\r\n        this.allChecked = false;\r\n        this.selectedGroupId = item[this.groupIdField];\r\n        // const helpExtend = window && (window as any).orgHelpExtend;\r\n        // helpExtend.getDataByGroupId(item[this.groupIdField], this.absOrgType).then(data => {\r\n\r\n        // });\r\n        this.apiService.getGroupMembers(item[this.groupIdField], this.absOrgType).subscribe((data: any) => {\r\n            this.items = data ? data : [];\r\n            this.groupData.personal.forEach(item => {\r\n                if (item[this.groupIdField] === this.selectedGroupId && item.total !== this.items.length) {\r\n                    item.total = this.items.length;\r\n                }\r\n            });\r\n            this.items.forEach(it => {\r\n                if (CommonUtil.findIndex(it[this.primaryField], this.primaryField, this.favoritesList) !== -1) {\r\n                    it.inFavorites = true;\r\n                } else {\r\n                    it.inFavorites = false;\r\n                }\r\n                it.indexId = Math.random().toString(16).substring(2);\r\n                // it.displayName = !!this.showUserCode ? ('[' + it.code + ']' + it.name) : it.name;\r\n            });\r\n            this.toggleChecked();\r\n            this.setFavorites();\r\n            this.formLoadingService.hide();\r\n        });\r\n    }\r\n\r\n    // \r\n    getGroupList() {\r\n        this.apiService.getOrgGroups(this.absOrgType).subscribe((data: any) => {\r\n            const resPublic = data && data.publicGroup;\r\n            const resPersonal = data && data.privateGroup;\r\n            this.groupData.public = resPublic ? resPublic : [];\r\n            this.groupData.personal = resPersonal ? resPersonal : [];\r\n            const firstPublicGroup = resPublic[0] && resPublic[0][this.groupIdField];\r\n            const firstPersonalGroup = resPersonal[0] && resPersonal[0][this.groupIdField];\r\n            this.selectedGroupId = this.selectedGroupId ? this.selectedGroupId : firstPublicGroup;\r\n            this.selectedGroupId = this.selectedGroupId ? this.selectedGroupId : firstPersonalGroup;\r\n            if (!!this.selectedGroupId) {\r\n                if (this.groupData.public.findIndex(item => item[this.groupIdField] === this.selectedGroupId) !== -1) {\r\n                    this.currentGroupType = this.publicToken;\r\n                } else if (this.groupData.personal.findIndex(item => item[this.groupIdField] === this.selectedGroupId) !== -1) {\r\n                    this.currentGroupType = this.personalToken;\r\n                }\r\n                this.getOrgsByGroup({ id: this.selectedGroupId }, this.currentGroupType);\r\n            }\r\n        })\r\n    }\r\n\r\n    // \r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    // \r\n    toggleVisible(e, type: string) {\r\n        if (type === this.publicToken) {\r\n            this.publicVisible = !this.publicVisible;\r\n        } else if (type === this.personalToken) {\r\n            this.personalVisible = !this.personalVisible;\r\n        }\r\n        e.stopPropagation();\r\n        e.cancelBubble = true;\r\n    }\r\n\r\n    toggleAll(e: any) {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    toggleOne(data, e) {\r\n        if (data.checked) {\r\n            if (this.multiSelect) {\r\n                this.emitSelections(data, ChangeType.Remove);\r\n            } else {\r\n                this.emitSelections([]);\r\n            }\r\n        } else {\r\n            if (this.multiSelect) {\r\n                this.emitSelections(data, ChangeType.Append);\r\n            } else {\r\n                this.emitSelections(new Array(data));\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param dataArr \r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) === -1) {\r\n                this.emitSelections(item, ChangeType.Append);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param dataArr \r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        const checkeds = this.items.filter(item => item.checked);\r\n        checkeds.forEach(item => {\r\n            this.emitSelections(item, ChangeType.Remove);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        this.setChecked(data, false);\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private emitSelections(selections: any, changeType = ChangeType.ValueChanged) {\r\n        this.stateMgr.emitSelections(selections, changeType);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param data \r\n     * @param collection \r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // \r\n        if (CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.setChecked(data, true);\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.primaryField] === selection[this.primaryField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import {\r\n    Component, Input, EventEmitter, Output, OnInit, AfterViewInit, SimpleChanges, OnChanges, ChangeDetectorRef, Optional, Injector, ViewChild, TemplateRef, HostBinding, NgZone, OnDestroy\r\n} from '@angular/core';\r\nimport { ApiService } from '../../utils/api.service';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { forkJoin, of } from 'rxjs';\r\nimport { ChangeType, OrgRequestParam } from '../../utils/index.type';\r\nimport { CommonUtil } from '../../utils/common.tool';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { Subscription } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n    selector: 'append-group-org',\r\n    templateUrl: './appendorg.component.html',\r\n    styleUrls: ['./appendorg.component.css'],\r\n})\r\nexport class AppendGroupOrgComponent implements OnInit, AfterViewInit, OnChanges {\r\n\r\n    @HostBinding('class.f-utils-fill-flex-column') baseCls = true;\r\n    @ViewChild('orgTree') orgTree: TreeTableComponent;\r\n    @ViewChild('orgName') orgName: TemplateRef<any>;\r\n    @Input() primaryField = 'orgId';\r\n    @Input() enableHierarchicalLoading: boolean;\r\n    @Input() notGetStopOrg: boolean;\r\n    @Input() layer: number;\r\n    @Input() multiSelect: boolean;\r\n    @Input() absOrgType: any;\r\n    @Input() cascadeCheck: boolean;\r\n    @Input() cascadeDown: boolean;\r\n    @Input() cascadeUp: boolean;\r\n    @Input() keepSelect: boolean;\r\n    @Input() showCheckAll: boolean;\r\n    @Input() selectedLimit: number;\r\n    @Input() pathLength = 4;\r\n    \r\n    originalTreeData = [];\r\n    treeListData: TreeNode[] = [];\r\n    treeTableCols = [];\r\n    currentOrgs: any[];\r\n    initLoad = true;\r\n\r\n    beforeClickNode = (e) => {\r\n        if (!this.enableHierarchicalLoading) {\r\n            return of(true);\r\n        }\r\n        if (!this.multiSelect) {\r\n            if (e.rowNode.isSelected) {\r\n                this.currentOrgs = [];\r\n            } else {\r\n                this.currentOrgs = new Array(e.rowNode.node.data);\r\n            }\r\n            return of(false);\r\n        }\r\n\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getCurUser: false,\r\n            parentID: e.rowNode.id,\r\n            withAllSub: true,\r\n            getOrgAllPath: true\r\n        };\r\n        return this.apiService.getOrganization(param).pipe(\r\n            switchMap(\r\n                (data: any) => {\r\n                    if (data['data'].length > this.selectedLimit && !e.rowNode.isChecked) {\r\n                        this.msgService.show('warning', `${this.selectedLimit}~`, true);\r\n                        return of(false)\r\n                    }\r\n                    if (!e.rowNode.isChecked) {\r\n                        data.data.forEach(item => {\r\n                            if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.currentOrgs) === -1) {\r\n                                this.currentOrgs.push(item);\r\n                            }\r\n                        })\r\n                    } else {\r\n                        this.currentOrgs.forEach((org, index) => {\r\n                            data.data.forEach(item => {\r\n                                if (org[this.primaryField] === item[this.primaryField]) {\r\n                                    this.currentOrgs.splice(index, 1);\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                    this.cdr.detectChanges();\r\n                    return of(false);\r\n                }\r\n            )\r\n        );\r\n    };\r\n\r\n    constructor(\r\n        private apiService: ApiService,\r\n        private cdr: ChangeDetectorRef,\r\n        private injector: Injector,\r\n        private ngZone: NgZone,\r\n        private msgService: MessagerService\r\n    ) {\r\n        this.cdr = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.treeTableCols = [\r\n            { field: 'name', title: '', template: this.orgName },\r\n            { field: 'code', title: '' }\r\n        ];\r\n        if (this.initLoad) {\r\n            if(this.enableHierarchicalLoading) {\r\n                this.hlAssembleData();\r\n            } else {\r\n                this.assembleData();\r\n            }\r\n            this.initLoad = false;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n\r\n    }\r\n\r\n    // \r\n    changeSelections(e: any) {\r\n        if (!this.enableHierarchicalLoading && !!e.originalEvent) {\r\n            this.multiSelect ? this.toggleChecked(e) : this.toggleSelected(e);\r\n        }\r\n    }\r\n\r\n    toggleChecked(e: any) {\r\n        const checkeds = [];\r\n        e && e.instance && e.instance.checkeds.forEach(item => {\r\n            checkeds.push(item.data);\r\n        });\r\n        this.currentOrgs = _.cloneDeep(checkeds);\r\n        if(this.currentOrgs.length == 0) {\r\n            this.orgTree.clearCheckeds();\r\n            this.orgTree.clearSelections();\r\n            this.orgTree.detectChanges();\r\n        }\r\n    }\r\n\r\n    toggleSelected(e: any) {\r\n        const selected = [];\r\n        e && e.instance && e.instance.selections.forEach(item => {\r\n            selected.push(item.data);\r\n        });\r\n        this.currentOrgs = _.cloneDeep(selected);\r\n        if(this.currentOrgs.length == 0) {\r\n            this.orgTree.clearCheckeds();\r\n            this.orgTree.clearSelections();\r\n            this.orgTree.detectChanges();\r\n        }\r\n    }\r\n\r\n    // \r\n    hlAssembleData() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getOrgAllPath: true\r\n        };\r\n        const layerList = [];\r\n        let layer = this.layer;\r\n        while (layer > 0) {\r\n            layerList.push(layer);\r\n            layer -= 1;\r\n        }\r\n        param.layerList = layerList;\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (!res || !res.data) {\r\n                return;\r\n            }\r\n            this.originalTreeData = res.data;\r\n            if (res && res.curAbsUser && res.curAbsUser.orgAllPathInfo) {\r\n                const curUserOrgPath = res.curAbsUser.orgAllPathInfo;\r\n                curUserOrgPath.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, res.data) === -1) {\r\n                        res.data.push(item);\r\n                    }\r\n                });\r\n            }\r\n            this.treeListData = this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);\r\n            this.orgTree.loadData(this.treeListData);\r\n            //this.tickCheckedNodes();\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n    // \r\n    assembleData() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getOrgAllPath: true\r\n        };\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (!res || !res.data) {\r\n                return;\r\n            }\r\n            this.originalTreeData = res.data;\r\n            this.treeListData = this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);\r\n            this.orgTree.loadData(this.treeListData);\r\n            // this.tickCheckedNodes();\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n\r\n    // \r\n    private inTreeList(treeListData: TreeNode[], item: any) {\r\n        for (let i = 0; i < treeListData.length; i++) {\r\n            if (treeListData[i].id === item[this.primaryField]) {\r\n                item.inTreeList = true;\r\n                break;\r\n            }\r\n            if (treeListData[i].children.length) {\r\n                this.inTreeList(treeListData[i].children, item);\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    private tickCheckedNodes() {\r\n        const ids = [];\r\n        this.currentOrgs.forEach(item => {\r\n            this.inTreeList(this.treeListData, item);\r\n            if (!!item.inTreeList) {\r\n                ids.push(item[this.primaryField]);\r\n            }\r\n        });\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                if (!ids.length) {\r\n                    return;\r\n                }\r\n                if (this.multiSelect) {\r\n                    this.orgTree.checkedNodes(ids, true, true);\r\n                } else {\r\n                    if (ids.length > 1) {\r\n                        this.msgService.show('warning', `${ids.length}~`, true);\r\n                        return;\r\n                    }\r\n                    this.orgTree.clearSelections();\r\n                    this.orgTree.detectChanges();\r\n                    this.orgTree.selectNode(ids.join());\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    /**\r\n    * \r\n    * @param plainSource \r\n    * @param layer \r\n    * @returns \r\n    */\r\n    private dataToTree(plainSource: any, layer: number, expandedPath: string = '') {\r\n        const treeSource = this.dealData(plainSource, expandedPath);\r\n        const parents = treeSource.filter(item => {\r\n            return item.data.layer === layer;\r\n        });\r\n        this.treeData(parents, treeSource, 1);\r\n        return parents;\r\n    }\r\n\r\n    // \r\n    private dealData(data: any[], expandedPath: string = '') {\r\n        const pathList = [];\r\n        if(expandedPath != '') {\r\n            let maxLength = expandedPath.length / this.pathLength;\r\n            if (this.enableHierarchicalLoading) {\r\n                maxLength -= 1;\r\n            }\r\n            for (let a = 0; a < maxLength; a++) {\r\n                pathList.push({ path: expandedPath.substring(0, 4 * (a + 1)) });\r\n            }\r\n        }\r\n        const newDatas = [];\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const newsDataObj: any = {\r\n                    data: {\r\n                        orgId: item[this.primaryField],\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        code: item.code,\r\n                        layer: Number(item.layer),\r\n                        orgAllPath: item.orgAllPath,\r\n                        inFavorites: item.inFavorites\r\n                    },\r\n                    expanded: true,\r\n                    children: []\r\n                };\r\n                // let expanded = [];\r\n                // if (this.enableHierarchicalLoading) {\r\n                //     this.nodeExpanded(newsDataObj, this.treeListData, expanded);\r\n                // }\r\n                if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {\r\n                    newsDataObj.expanded = true;\r\n                } else {\r\n                    newsDataObj.expanded = false;\r\n                    if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                        newsDataObj.leaf = false;\r\n                    }\r\n                }\r\n                // todo \r\n                //if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {\r\n                    //newsDataObj.leaf = false;\r\n                   // newsDataObj.expanded = false;\r\n                //}\r\n                newDatas.push(newsDataObj);\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param parents \r\n     * @param treeSource \r\n     * @param layer \r\n     */\r\n    treeData(parents: any, treeSource: any, layer: number) {\r\n        parents.forEach(parent => {\r\n            const parentPath = parent['data']['path'];\r\n            const parentLayer = parent['data']['layer'];\r\n            treeSource.forEach(item => {\r\n                if (item && item['data'] && item['data']['path']) {\r\n                    const itemPath = item['data']['path'];\r\n                    const itemLayer = item['data']['layer'];\r\n                    let targetPath: string;\r\n                    if (itemPath && itemPath.length > parentPath.length) {\r\n                        targetPath = itemPath.substr(0, Number(layer) * 4);\r\n                    }\r\n                    if (parentPath === targetPath && parentLayer === itemLayer - 1) {\r\n                        parent['children'].push(item);\r\n                    }\r\n                    if (parentPath === targetPath) {\r\n                        this.treeData([item], treeSource, Number(layer) + 1);\r\n                    }\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    // \r\n    listenTreeExpand(obj: any) {\r\n        // \r\n        if (this.enableHierarchicalLoading && obj.children.length === 0) {\r\n            this.getOrganizationByParentNode(obj);\r\n        }\r\n    }\r\n\r\n    // \r\n    getOrganizationByParentNode(parentNode: any) {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            parentID: parentNode.id,\r\n            notGetStopOrg: this.notGetStopOrg,\r\n            getCurUser: false,\r\n            getOrgAllPath: true\r\n        };\r\n        this.apiService.getOrganization(param).subscribe((res: any) => {\r\n            if (res && res.data) {\r\n                const newDatas = [];\r\n                res.data.forEach(item => {\r\n                    if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.originalTreeData) === -1) {\r\n                        item.selectable = true;\r\n                        this.originalTreeData.push(item);\r\n                    }\r\n                    newDatas.push(item);\r\n                });\r\n                const nodes = this.dealData(newDatas);\r\n                this.orgTree.appendChildren(nodes, parentNode);\r\n                this.orgTree.detectChanges();\r\n                //this.tickCheckedNodes();\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    private nodeExpanded(item: any, arr: TreeNode[], expanded: boolean[]): void {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (item.data.id === arr[i].data.id) {\r\n                expanded[0] = arr[i].expanded;\r\n            } else if (arr[i].children.length) {\r\n                this.nodeExpanded(item, arr[i].children, expanded);\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    private expandTreeNode(treeData: any, path: any[], layer: number) {\r\n        treeData.forEach(node => {\r\n            if (path.includes(node.data.path)) {\r\n                this.orgTree.expandNode(node.data.id);\r\n            }\r\n            if (node.data.layer < layer && node.children.length) {\r\n                this.expandTreeNode(node.children, path, layer);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { MessagerModule } from \"@farris/ui-messager\";\r\nimport { AvatarModule } from '@farris/ui-avatar';\r\n\r\nimport { OrganizationSelectorComponent } from './organization-selector.component';\r\nimport { OrganizationComponent } from '../lib/tab-organization/to.component';\r\nimport { SelectionComponent } from '../lib/selections/sl.component';\r\nimport { SearchComponent } from './search/srp.component';\r\nimport { FavoritesComponent } from './tab-favorites/favorites.component';\r\nimport { GroupComponent } from './tab-group/group.component';\r\nimport { AppendGroupOrgComponent } from './append-group-org/appendorg.component';\r\nimport { CommandServicesModule } from '@farris/command-services';\r\n\r\n@NgModule({\r\n  declarations: [OrganizationSelectorComponent, OrganizationComponent, SelectionComponent, SearchComponent, FavoritesComponent, GroupComponent, AppendGroupOrgComponent],\r\n  imports: [\r\n    CommonModule,\r\n    InputGroupModule,\r\n    TreeTableModule,\r\n    FarrisDialogModule,\r\n    FarrisTabsModule,\r\n    PerfectScrollbarModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MessagerModule.forRoot(),\r\n    AvatarModule,\r\n    CommandServicesModule\r\n  ],\r\n  exports: [OrganizationSelectorComponent],\r\n  entryComponents: [OrganizationSelectorComponent],\r\n  providers: []\r\n})\r\nexport class OrganizationSelectorModule { }\r\n"]}