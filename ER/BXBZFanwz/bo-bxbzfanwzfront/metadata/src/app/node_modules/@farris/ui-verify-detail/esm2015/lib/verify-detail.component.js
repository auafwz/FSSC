/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { LocaleService } from '@farris/ui-locale';
export class VerifyDetailComponent {
    /**
     * @param {?} localeService
     */
    constructor(localeService) {
        this.localeService = localeService;
        //@Input() maxHeight:number;
        //@Input() validatorList;
        //表单验证分组信息
        //@Input() tabList:tabListItem[];
        //表单验证默认显示的分组信息
        this.showType = '';
        //是否默认显示验证信息列表
        this.showList = false;
        //验证信息点击
        this.validatorClick = new EventEmitter();
        //验证详情显示隐藏事件
        this.listshowChange = new EventEmitter();
        //showList = false;
        //处理后带分组的表单验证信息
        this.errorLists = [];
        //默认传入的表单验证信息数组
        this._validatorList = [];
        //列表部分最大高度
        this._maxHeight = 60;
    }
    //最大高度
    /**
     * @param {?} num
     * @return {?}
     */
    set maxHeight(num) {
        if (num < 50)
            return;
        this._maxHeight = num - 50;
    }
    /**
     * @return {?}
     */
    get maxHeight() {
        return this._maxHeight;
    }
    /**
     * @param {?} item
     * @return {?}
     */
    set tabList(item) {
        if (item) {
            this._tablist = item;
        }
        else {
            /** @type {?} */
            const allTitle = this.localeService.getValue('verifyDetail.vertifyTypeAll');
            /** @type {?} */
            const errorTitle = this.localeService.getValue('verifyDetail.vertifyTypeError');
            /** @type {?} */
            const emptyTitle = this.localeService.getValue('verifyDetail.vertifyTypeEmpty');
            this._tablist = [
                {
                    id: 'vertifyType1',
                    type: 'all',
                    title: allTitle
                },
                {
                    id: 'vertifyType2',
                    type: 'error',
                    title: errorTitle
                },
                {
                    id: 'vertifyType3',
                    type: 'empty',
                    title: emptyTitle
                }
            ];
        }
    }
    /**
     * @return {?}
     */
    get tabList() {
        return this._tablist;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    set validatorList(obj) {
        this._validatorList = obj;
        this.errorLists = [];
        if (this.tabList && this.tabList.length) {
            this.tabList.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item.active = false;
            }));
            //判断默认展示的类型
            /** @type {?} */
            let hasTab = this.tabList.find((/**
             * @param {?} tab
             * @return {?}
             */
            (tab) => {
                return tab.type === this.showType;
            }));
            if (this.showType === '' || !hasTab) {
                this.showType = this.tabList[0].type;
            }
            this.tabList.forEach((/**
             * @param {?} tab
             * @return {?}
             */
            tab => {
                /** @type {?} */
                const tabType = tab.type;
                if (tabType === 'all') {
                    /** @type {?} */
                    let listObj = {
                        'list': obj,
                        'show': false,
                        'type': tabType
                    };
                    tab.length = listObj.list.length;
                    this.errorLists.push(listObj);
                }
                else {
                    /** @type {?} */
                    let hasType = this.errorLists.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    (item) => {
                        return item.type === tabType;
                    }));
                    if (hasType) {
                        /** @type {?} */
                        let valList = obj.filter((/**
                         * @param {?} error
                         * @return {?}
                         */
                        error => {
                            return error.type === tabType;
                        }));
                        if (valList && valList.length) {
                            hasType.list = valList;
                        }
                    }
                    else {
                        /** @type {?} */
                        let listObj = {
                            'list': [],
                            'show': false,
                            'type': tabType
                        };
                        /** @type {?} */
                        let valList = obj.filter((/**
                         * @param {?} error
                         * @return {?}
                         */
                        error => {
                            return error.type === tabType;
                        }));
                        if (valList && valList.length) {
                            listObj.list = valList;
                        }
                        tab.length = listObj.list.length;
                        this.errorLists.push(listObj);
                    }
                }
            }));
            /** @type {?} */
            let tabObj = this.tabList.find((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                return item.type === this.showType;
            }));
            if (tabObj) {
                tabObj.active = true;
            }
        }
        /** @type {?} */
        let showObj = this.errorLists.find((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item.type === this.showType;
        }));
        if (showObj) {
            showObj.show = true;
        }
    }
    ;
    /**
     * @return {?}
     */
    get validatorList() {
        return this._validatorList;
    }
    /**
     * @return {?}
     */
    ngOnInit() { }
    //显示详情
    /**
     * @return {?}
     */
    show() {
        this.showList = !this.showList;
        this.listshowChange.emit(this.showList);
    }
    /**
     * 点击分组切换
     * @param {?} tab
     * @return {?}
     */
    showListContent(tab) {
        if (tab.length <= 0) {
            return;
        }
        this.tabList.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.active = false;
        }));
        tab.active = true;
        this.errorLists.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            if (item.type === tab.type) {
                item.show = true;
            }
            else {
                item.show = false;
            }
        }));
    }
    /**
     * 点击关闭按钮
     * @return {?}
     */
    close() {
        this.showList = false;
        this.listshowChange.emit(false);
    }
    /**
     * 点击表单验证列表事件
     * @param {?} item
     * @return {?}
     */
    errorClick(item) {
        this.validatorClick.emit(item);
    }
}
VerifyDetailComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-verify-detail',
                template: "\r\n<div class=\"f-verify-detail\" *ngIf=\"validatorList.length > 0\">\r\n    <div class=\"f-verify-detail-content\">\r\n        <div class=\"f-verify-nums\" (click)=\"show()\">\r\n            <span class=\"nums-icon f-icon f-icon-warning\"></span>\r\n            <span class=\"nums-count\">{{validatorList.length}}</span>\r\n        </div>\r\n        <div class=\"f-verify-form-main\" [hidden]=\"!showList\">\r\n            <div class=\"f-verify-form-content\">\r\n                <div class=\"f-verify-form-content-arrow\"></div>\r\n                <div class=\"f-verify-form-content-list\">\r\n                    <div class=\"f-verify-forms-title\">\r\n                        <div class=\"title-tabs\">\r\n                            <div class=\"btn-group\">\r\n                                <button class=\"btn btn-secondary\" *ngFor=\"let tab of tabList\" [ngClass]=\"{'active': tab.active,'disabled': (tab.length<=0)}\" (click)=\"showListContent(tab)\">{{tab.title}} <span>{{tab.length}}</span></button>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"f-verify-close\" (click)=\"close()\">\r\n                            <span class=\"f-icon f-icon-close\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-verify-forms-list\" [ngStyle]=\"{'max-height': maxHeight+'px'}\">\r\n                        <ng-container *ngFor=\"let list of errorLists\">\r\n                            <ul class=\"f-verify-list-content\" *ngIf=\"list.list.length > 0\" [ngClass]=\"{'active': list.show}\">\r\n                                <li class=\"f-verify-list\" *ngFor=\"let item of list.list\" (click)=\"errorClick(item)\">\r\n                                    <span class=\"f-icon f-icon-close-outline list-icon list-error\" [ngClass]=\"{'list-warning': item.type === 'warn'}\"></span>\r\n                                    <div class=\"list-con\">\r\n                                        <p class=\"list-title\">{{item.title}}</p>\r\n                                        <p class=\"list-msg\">{{item.msg}}</p>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n      ",
                styles: [".f-verify-detail{position:absolute;left:14px;bottom:16px;z-index:900}.f-verify-detail .f-verify-detail-content{position:relative}.f-verify-detail .f-verify-detail-content .f-verify-form-main{position:absolute;padding-bottom:.5rem;left:0;bottom:1.75rem;width:28.125rem}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content{background-color:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:.125rem;width:100%}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-arrow{display:block;position:absolute;left:1.125rem;bottom:.25rem;width:.625rem;height:.625rem;background:0 0;border-style:solid;border-width:.3125rem;box-shadow:2px 2px 5px rgba(0,0,0,.08);-webkit-transform:translateX(-50%) rotate(45deg);transform:translateX(-50%) rotate(45deg);border-color:transparent #fff #fff transparent}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list{position:relative}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-title{padding:.75rem .875rem}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-title .title-tabs .btn-group .btn.active{color:#fff;background:#388fff;border-color:#388fff}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-close{position:absolute;right:.75rem;top:.625rem;color:rgba(0,0,0,.25);font-size:.75rem;cursor:pointer;width:1.25rem;height:1.25rem;line-height:1.25rem;text-align:center}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list{overflow-y:auto}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list-content{display:none}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list-content.active{display:block}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list{cursor:pointer;position:relative;border-top:1px solid #e9e9e9;padding:.5rem .875rem .5rem 2.5rem}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list .list-icon{position:absolute;left:.875rem;top:.75rem;font-size:.875rem}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list .list-icon.list-error{color:#f5222d}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list .list-icon.list-warning{color:#faad14}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list .list-con p{margin-bottom:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list .list-con .list-title{font-size:.875rem;color:rgba(0,0,0,.75);line-height:1.375rem}.f-verify-detail .f-verify-detail-content .f-verify-form-main .f-verify-form-content .f-verify-form-content-list .f-verify-forms-list .f-verify-list .list-con .list-msg{font-size:.75rem;color:rgba(0,0,0,.45);line-height:1.25rem}.f-verify-detail .f-verify-nums{padding:.125rem .5rem;background:#fde5e5;box-shadow:0 1px 6px 0 rgba(0,0,0,.15);border-radius:2px;cursor:pointer}.f-verify-detail .f-verify-nums .nums-icon{margin-right:.25rem;color:#f5222d;vertical-align:middle}.f-verify-detail .f-verify-nums .nums-count{font-size:.875rem;line-height:1.25rem;color:#f5222d}"]
            }] }
];
/** @nocollapse */
VerifyDetailComponent.ctorParameters = () => [
    { type: LocaleService }
];
VerifyDetailComponent.propDecorators = {
    showType: [{ type: Input }],
    showList: [{ type: Input }],
    validatorClick: [{ type: Output, args: ['validatorClick',] }],
    listshowChange: [{ type: Output, args: ['listshowChange',] }],
    maxHeight: [{ type: Input }],
    tabList: [{ type: Input }],
    validatorList: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    VerifyDetailComponent.prototype.showType;
    /** @type {?} */
    VerifyDetailComponent.prototype.showList;
    /** @type {?} */
    VerifyDetailComponent.prototype.validatorClick;
    /** @type {?} */
    VerifyDetailComponent.prototype.listshowChange;
    /** @type {?} */
    VerifyDetailComponent.prototype.errorLists;
    /** @type {?} */
    VerifyDetailComponent.prototype._validatorList;
    /** @type {?} */
    VerifyDetailComponent.prototype._maxHeight;
    /** @type {?} */
    VerifyDetailComponent.prototype._tablist;
    /** @type {?} */
    VerifyDetailComponent.prototype.localeService;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVyaWZ5LWRldGFpbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXZlcmlmeS1kZXRhaWwvIiwic291cmNlcyI6WyJsaWIvdmVyaWZ5LWRldGFpbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0UsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBUWxELE1BQU0sT0FBTyxxQkFBcUI7Ozs7SUEySWhDLFlBQW1CLGFBQTRCO1FBQTVCLGtCQUFhLEdBQWIsYUFBYSxDQUFlOzs7Ozs7UUFwSXRDLGFBQVEsR0FBVSxFQUFFLENBQUM7O1FBRXJCLGFBQVEsR0FBVyxLQUFLLENBQUE7O1FBRVAsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDOztRQUVwQyxtQkFBYyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7OztRQUc5RCxlQUFVLEdBQW9CLEVBQUUsQ0FBQzs7UUFFakMsbUJBQWMsR0FBdUIsRUFBRSxDQUFDOztRQUV4QyxlQUFVLEdBQVUsRUFBRSxDQUFDO0lBdUg0QixDQUFDOzs7Ozs7SUFwSHBELElBQ0ksU0FBUyxDQUFDLEdBQUc7UUFDZixJQUFHLEdBQUcsR0FBQyxFQUFFO1lBQUUsT0FBTztRQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsR0FBQyxFQUFFLENBQUM7SUFDM0IsQ0FBQzs7OztJQUNELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDOzs7OztJQUVELElBQ0ksT0FBTyxDQUFDLElBQUk7UUFDZCxJQUFHLElBQUksRUFBQztZQUNOLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQ3RCO2FBQ0c7O2tCQUNJLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFFB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Q0wsS0FBSzs7OztJQTFETix5Q0FBOEI7O0lBRTlCLHlDQUFpQzs7SUFFakMsK0NBQThEOztJQUU5RCwrQ0FBOEQ7O0lBRzlELDJDQUFpQzs7SUFFakMsK0NBQXdDOztJQUV4QywyQ0FBdUI7O0lBQ3ZCLHlDQUF1Qjs7SUFzSFgsOENBQW1DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyB0YWJMaXN0SXRlbSwgRXJyb3JMaXN0c0l0ZW0sIHZhbGlkYXRvckxpc3RJdGVtIH0gZnJvbSAnLi92ZXJpZnktZGV0YWlsLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdmYXJyaXMtdmVyaWZ5LWRldGFpbCcsXHJcbiAgdGVtcGxhdGVVcmw6Jy4vdmVyaWZ5LWRldGFpbC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdmVyaWZ5LWRldGFpbC5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBWZXJpZnlEZXRhaWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICAvL0BJbnB1dCgpIG1heEhlaWdodDpudW1iZXI7XHJcbiAgLy9ASW5wdXQoKSB2YWxpZGF0b3JMaXN0O1xyXG4gIC8v6KGo5Y2V6aqM6K+B5YiG57uE5L+h5oGvXHJcbiAgLy9ASW5wdXQoKSB0YWJMaXN0OnRhYkxpc3RJdGVtW107XHJcbiAgLy/ooajljZXpqozor4Hpu5jorqTmmL7npLrnmoTliIbnu4Tkv6Hmga9cclxuICBASW5wdXQoKSBzaG93VHlwZTpzdHJpbmcgPSAnJztcclxuICAvL+aYr+WQpum7mOiupOaYvuekuumqjOivgeS/oeaBr+WIl+ihqFxyXG4gIEBJbnB1dCgpIHNob3dMaXN0OmJvb2xlYW4gPSBmYWxzZVxyXG4gIC8v6aqM6K+B5L+h5oGv54K55Ye7XHJcbiAgQE91dHB1dCgndmFsaWRhdG9yQ2xpY2snKSB2YWxpZGF0b3JDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAvL+mqjOivgeivpuaDheaYvuekuumakOiXj+S6i+S7tlxyXG4gIEBPdXRwdXQoJ2xpc3RzaG93Q2hhbmdlJykgbGlzdHNob3dDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgLy9zaG93TGlzdCA9IGZhbHNlO1xyXG4gIC8v5aSE55CG5ZCO5bim5YiG57uE55qE6KGo5Y2V6aqM6K+B5L+h5oGvXHJcbiAgZXJyb3JMaXN0czpFcnJvckxpc3RzSXRlbVtdID0gW107XHJcbiAgLy/pu5jorqTkvKDlhaXnmoTooajljZXpqozor4Hkv6Hmga/mlbDnu4RcclxuICBfdmFsaWRhdG9yTGlzdDp2YWxpZGF0b3JMaXN0SXRlbVtdID0gW107XHJcbiAgLy/liJfooajpg6jliIbmnIDlpKfpq5jluqZcclxuICBfbWF4SGVpZ2h0Om51bWJlciA9IDYwO1xyXG4gIF90YWJsaXN0OnRhYkxpc3RJdGVtW107XHJcbiAgLy/mnIDlpKfpq5jluqZcclxuICBASW5wdXQoKVxyXG4gIHNldCBtYXhIZWlnaHQobnVtKXtcclxuICAgIGlmKG51bTw1MCkgcmV0dXJuO1xyXG4gICAgdGhpcy5fbWF4SGVpZ2h0ID0gbnVtLTUwO1xyXG4gIH1cclxuICBnZXQgbWF4SGVpZ2h0KCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4SGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgdGFiTGlzdChpdGVtKXtcclxuICAgIGlmKGl0ZW0pe1xyXG4gICAgICB0aGlzLl90YWJsaXN0ID0gaXRlbTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIGNvbnN0IGFsbFRpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCd2ZXJpZnlEZXRhaWwudmVydGlmeVR5cGVBbGwnKSxcclxuICAgICAgICBlcnJvclRpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCd2ZXJpZnlEZXRhaWwudmVydGlmeVR5cGVFcnJvcicpLFxyXG4gICAgICAgIGVtcHR5VGl0bGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ3ZlcmlmeURldGFpbC52ZXJ0aWZ5VHlwZUVtcHR5Jyk7XHJcbiAgICAgIHRoaXMuX3RhYmxpc3QgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6J3ZlcnRpZnlUeXBlMScsXHJcbiAgICAgICAgICB0eXBlOidhbGwnLFxyXG4gICAgICAgICAgdGl0bGU6YWxsVGl0bGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOid2ZXJ0aWZ5VHlwZTInLFxyXG4gICAgICAgICAgdHlwZTonZXJyb3InLFxyXG4gICAgICAgICAgdGl0bGU6ZXJyb3JUaXRsZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6J3ZlcnRpZnlUeXBlMycsXHJcbiAgICAgICAgICB0eXBlOidlbXB0eScsXHJcbiAgICAgICAgICB0aXRsZTplbXB0eVRpdGxlXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcbiAgZ2V0IHRhYkxpc3QoKXtcclxuICAgIHJldHVybiB0aGlzLl90YWJsaXN0O1xyXG4gIH1cclxuXHJcbiAgQElucHV0KCkgXHJcbiAgc2V0IHZhbGlkYXRvckxpc3Qob2JqKXtcclxuICAgIHRoaXMuX3ZhbGlkYXRvckxpc3QgPSBvYmo7XHJcbiAgICB0aGlzLmVycm9yTGlzdHMgPSBbXTtcclxuICAgIGlmKHRoaXMudGFiTGlzdCAmJiB0aGlzLnRhYkxpc3QubGVuZ3RoKXtcclxuICAgICAgXHJcbiAgICAgIHRoaXMudGFiTGlzdC5mb3JFYWNoKGl0ZW09PntcclxuICAgICAgICBpdGVtLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICB9KVxyXG4gICAgICAvL+WIpOaWrem7mOiupOWxleekuueahOexu+Wei1xyXG4gICAgICBsZXQgaGFzVGFiID0gdGhpcy50YWJMaXN0LmZpbmQoKHRhYik9PntcclxuICAgICAgICByZXR1cm4gdGFiLnR5cGUgPT09IHRoaXMuc2hvd1R5cGU7XHJcbiAgICAgIH0pXHJcbiAgICAgIGlmKHRoaXMuc2hvd1R5cGUgPT09ICcnIHx8ICFoYXNUYWIpe1xyXG4gICAgICAgIHRoaXMuc2hvd1R5cGUgPSB0aGlzLnRhYkxpc3RbMF0udHlwZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnRhYkxpc3QuZm9yRWFjaCh0YWIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhYlR5cGUgPSB0YWIudHlwZTtcclxuICAgICAgICBpZih0YWJUeXBlID09PSAnYWxsJyl7XHJcbiAgICAgICAgICBsZXQgbGlzdE9iaiA9IHtcclxuICAgICAgICAgICAgJ2xpc3QnOm9iaixcclxuICAgICAgICAgICAgJ3Nob3cnOmZhbHNlLFxyXG4gICAgICAgICAgICAndHlwZSc6dGFiVHlwZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHRhYi5sZW5ndGggPSBsaXN0T2JqLmxpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgdGhpcy5lcnJvckxpc3RzLnB1c2gobGlzdE9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICBsZXQgaGFzVHlwZSA9IHRoaXMuZXJyb3JMaXN0cy5maW5kKChpdGVtKT0+e1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS50eXBlID09PSB0YWJUeXBlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGlmKGhhc1R5cGUpe1xyXG4gICAgICAgICAgICBsZXQgdmFsTGlzdCA9IG9iai5maWx0ZXIoZXJyb3I9PntcclxuICAgICAgICAgICAgICByZXR1cm4gZXJyb3IudHlwZSA9PT0gdGFiVHlwZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgaWYodmFsTGlzdCAmJiB2YWxMaXN0Lmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgaGFzVHlwZS5saXN0ID0gdmFsTGlzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgbGV0IGxpc3RPYmogPSB7XHJcbiAgICAgICAgICAgICAgJ2xpc3QnOltdLFxyXG4gICAgICAgICAgICAgICdzaG93JzpmYWxzZSxcclxuICAgICAgICAgICAgICAndHlwZSc6dGFiVHlwZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB2YWxMaXN0ID0gb2JqLmZpbHRlcihlcnJvcj0+e1xyXG4gICAgICAgICAgICAgIHJldHVybiBlcnJvci50eXBlID09PSB0YWJUeXBlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZih2YWxMaXN0ICYmIHZhbExpc3QubGVuZ3RoKXtcclxuICAgICAgICAgICAgICBsaXN0T2JqLmxpc3QgPSB2YWxMaXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhYi5sZW5ndGggPSBsaXN0T2JqLmxpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yTGlzdHMucHVzaChsaXN0T2JqKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBsZXQgdGFiT2JqID0gdGhpcy50YWJMaXN0LmZpbmQoaXRlbT0+e1xyXG4gICAgICAgIHJldHVybiBpdGVtLnR5cGUgPT09IHRoaXMuc2hvd1R5cGU7XHJcbiAgICAgIH0pXHJcbiAgICAgIGlmKHRhYk9iail7XHJcbiAgICAgICAgdGFiT2JqLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBzaG93T2JqID0gdGhpcy5lcnJvckxpc3RzLmZpbmQoaXRlbT0+e1xyXG4gICAgICByZXR1cm4gaXRlbS50eXBlID09PSB0aGlzLnNob3dUeXBlO1xyXG4gICAgfSlcclxuICAgIGlmKHNob3dPYmope1xyXG4gICAgICBzaG93T2JqLnNob3cgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgZ2V0IHZhbGlkYXRvckxpc3QoKXtcclxuICAgIHJldHVybiB0aGlzLl92YWxpZGF0b3JMaXN0O1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2UpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHt9XHJcbiAgLy/mmL7npLror6bmg4VcclxuICBzaG93KCl7XHJcbiAgICB0aGlzLnNob3dMaXN0ID0gIXRoaXMuc2hvd0xpc3Q7XHJcbiAgICB0aGlzLmxpc3RzaG93Q2hhbmdlLmVtaXQodGhpcy5zaG93TGlzdCk7XHJcbiAgfVxyXG4gIC8qKueCueWHu+WIhue7hOWIh+aNolxyXG4gICAqIEBwYXJhbSB0YWLliIbnu4Tkv6Hmga9cclxuICAgKi9cclxuICBzaG93TGlzdENvbnRlbnQodGFiKXtcclxuICAgIGlmKHRhYi5sZW5ndGg8PTApe1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnRhYkxpc3QuZm9yRWFjaChpdGVtPT57XHJcbiAgICAgIGl0ZW0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9KVxyXG4gICAgdGFiLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB0aGlzLmVycm9yTGlzdHMuZm9yRWFjaCgoaXRlbSk9PntcclxuICAgICAgaWYoaXRlbS50eXBlID09PSB0YWIudHlwZSl7XHJcbiAgICAgICAgaXRlbS5zaG93ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpdGVtLnNob3cgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbiAgLyoq54K55Ye75YWz6Zet5oyJ6ZKuICovXHJcbiAgY2xvc2UoKXtcclxuICAgIHRoaXMuc2hvd0xpc3QgPSBmYWxzZTtcclxuICAgIHRoaXMubGlzdHNob3dDaGFuZ2UuZW1pdChmYWxzZSk7XHJcbiAgfVxyXG4gIC8qKueCueWHu+ihqOWNlemqjOivgeWIl+ihqOS6i+S7tiAqL1xyXG4gIGVycm9yQ2xpY2soaXRlbSl7XHJcbiAgICB0aGlzLnZhbGlkYXRvckNsaWNrLmVtaXQoaXRlbSk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=