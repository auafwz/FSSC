/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ElementRef, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, ViewChild, EventEmitter, Output, NgZone } from '@angular/core';
import { fromEvent, interval, Observable, of, BehaviorSubject, Subject } from 'rxjs';
import { takeUntil, map, scan, switchMap, takeWhile, concat, debounceTime } from 'rxjs/operators';
import { TabService } from '../tabs.config';
import ResizeObserver from 'resize-observer-polyfill';
import { NgbDropdownMenu } from '../dropdown/dropdown';
var FarrisTabsComponent = /** @class */ (function () {
    function FarrisTabsComponent(stService, elementRef, renderer, cdRef, ngZone) {
        this.stService = stService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        // 支持标签页填充
        this.fill = false;
        // 支持标签页标题自适应宽度-
        this.autoTitleWidth = false;
        // 标题长度大于等于多少字符，启用渐变样式——属性废弃
        this.titleLength = 7;
        // 搜索框是否显示
        this.searchBoxVisible = true;
        // 内容是否是flex 容器 用于内部子元素flex
        this.contentDirection = 'column';
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        // 左侧所有标签的宽度和,百分比
        this.titleWidth = 0;
        this.tabChange = new EventEmitter();
        this.tabRemove = new EventEmitter();
        // 内容填充状态
        this.contentFillStates = new BehaviorSubject(false);
        // 宽度状态
        this.widthStates = new BehaviorSubject(false);
        // 高度状态
        this.heightStates = new BehaviorSubject(false);
        this.positionStates = new BehaviorSubject('top');
        this.menuItemsWidth = 'auto';
        //maxDropdownH = 200;
        // 下拉列表最大宽度： 非正值表明是不限制宽度
        this.maxDropdownW = -1;
        this._customClass = '';
        // 标签存储列表
        this._tabs = [];
        // 工具条显示相关配置
        this.toolbarConf = {
            position: '',
            contents: []
        };
        // 工具条右侧小下拉框是否显示
        this.toolbarDpHidden = true;
        // 工具条“更多”里的按钮
        this.inMoreButtonContents = [];
        // 显示下拉数据
        this.dropdownTabs = [];
        // 隐藏左右滚动箭头按钮
        this.hideButtons = true;
        // 隐藏下拉
        this.hideDropDown = true;
        // 禁用左箭头
        this.disableLeft = false;
        // 禁用右箭头
        this.disableRight = false;
        // 记录事件流
        this.subscription = [];
        // 禁用右侧提示
        this.disableRTooltip = true;
        // 禁用左侧提示
        this.disableLTooltip = true;
        // 左侧提示数据
        this.leftTooltipTabs = [];
        // 右侧提示数据
        this.rightTooltipTabs = [];
        this.maxTooltipLen = 5;
        // 标记当前Tab标签
        this.activeId = '';
        this.ro = null;
        this._ddmHandler = null;
        this.el = this.elementRef.nativeElement;
        this.verifyConfig();
    }
    Object.defineProperty(FarrisTabsComponent.prototype, "position", {
        get: /**
         * @return {?}
         */
        function () {
            return this._position;
        },
        // tab页位置 上下左右
        set: 
        // tab页位置 上下左右
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._position = value;
            this.positionStates.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "width", {
        // tabs宽度和高度
        set: 
        // tabs宽度和高度
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._width = this.resolveSize(value);
            this.widthStates.next(this._width);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "height", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._height = this.resolveSize(value);
            this.heightStates.next(this._height);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "headerHeight", {
        get: /**
         * @return {?}
         */
        function () {
            return this._headerHeight;
        },
        set: /**
         * @param {?} headerHeight
         * @return {?}
         */
        function (headerHeight) {
            this._headerHeight = this.resolveSize(headerHeight);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "contentFill", {
        // 内容是否填充  默认是不填充
        set: 
        // 内容是否填充  默认是不填充
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._contentFill = value;
            this.contentFillStates.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "tabs", {
        // 所有标签数据
        get: 
        // 所有标签数据
        /**
         * @return {?}
         */
        function () {
            return this._tabs;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabs = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "customClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this._customClass;
        },
        set: /**
         * @param {?} customClass
         * @return {?}
         */
        function (customClass) {
            var _this = this;
            if (this.customClass) {
                this.customClass.split(' ').forEach((/**
                 * @param {?} cssClass
                 * @return {?}
                 */
                function (cssClass) {
                    _this.renderer.removeClass(_this.el, cssClass);
                }));
            }
            this._customClass = customClass ? customClass.trim() : null;
            if (this.customClass) {
                this.customClass.split(' ').forEach((/**
                 * @param {?} cssClass
                 * @return {?}
                 */
                function (cssClass) {
                    _this.renderer.addClass(_this.el, cssClass);
                }));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "direction", {
        get: /**
         * @return {?}
         */
        function () {
            switch (this.position) {
                case 'top':
                    return 'column';
                case 'bottom':
                    return 'column-reverse';
                case 'left':
                    return 'row';
                case 'right':
                    return 'row-reverse';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "tabDirection", {
        // 无用，兼容
        get: 
        // 无用，兼容
        /**
         * @return {?}
         */
        function () {
            if (this.position === 'top' || this.position === 'bottom') {
                return 'row';
            }
            else if (this.position === 'left' || this.position === 'right') {
                return 'column';
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    FarrisTabsComponent.prototype.trackByButton = /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    function (index, btn) { return btn.id; };
    /** 验证传递参数 */
    /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.verifyConfig = /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var config = this.stService.getConfig();
        Object.assign(this, config);
        this.scrollStep = parseInt(this.scrollStep + '', 10);
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        function (btnInfo) {
            if (btnInfo.click && typeof btnInfo.click == 'function') {
                btnInfo.click();
            }
        }));
        this._tabContainerEl = this.tabContainer.nativeElement;
        this._createStream();
        this.activeId = this.selectId;
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                if (_this.ro === null) {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} el
                     * @return {?}
                     */
                    function (el) {
                        _this._reCalculateAll();
                        _this._calculateToolbarDropdownIsShow();
                        _this._calculateButtonsShow();
                    }));
                    _this.ro.observe(_this.el.parentElement);
                }
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['selectId']) {
            this.selectTab(changes['selectId'].currentValue);
        }
    };
    /* 标签页内容初始化 */
    /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterContentInit = /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterContentChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 为了兼容弄旧表单，不兼容HostBinding, 通过追加class的方式实现
        this.renderer.addClass(this.el, 'farris-tabs');
        this.renderer.addClass(this.el, 'flex-column');
        this.contentFillStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.addClass(_this.el, 'f-tabs-content-fill');
            }
            else {
                _this.renderer.removeClass(_this.el, 'f-tabs-content-fill');
            }
        }));
        this.widthStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.setStyle(_this.el, 'width', data);
            }
        }));
        this.heightStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.setStyle(_this.el, 'height', data);
            }
        }));
        this.positionStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.renderer.removeClass(_this.el, 'flex-row');
            _this.renderer.removeClass(_this.el, 'flex-column');
            _this.renderer.removeClass(_this.el, 'flex-row-reverse');
            _this.renderer.removeClass(_this.el, 'flex-column-reverse');
            if (data === 'left') {
                _this.renderer.addClass(_this.el, 'flex-row');
            }
            if (data === 'top') {
                _this.renderer.addClass(_this.el, 'flex-column');
            }
            if (data === 'right') {
                _this.renderer.addClass(_this.el, 'flex-row-reverse');
            }
            if (data === 'bottom') {
                _this.renderer.addClass(_this.el, 'flex-column-reverse');
            }
        }));
        // 兼容结束
        this.getToolbarConf();
        this._reCalculateAll();
        this._setActive();
        this._changeTitleStyle();
        this._listenShowChanges();
        /** @type {?} */
        var self = this;
        // this.renderer.listen(document, 'keyup', function (e) {
        //     if (self.searchInputVisible) {
        //         console.log(e);
        //     }
        // });
        this._ddmHandler = this.renderer.listen(document, 'mousedown', (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (!e.target.closest('.farris-tabs-header')) {
                if (_this.el && _this.el.querySelector('.dropdown-menu')) {
                    if (_this.ddm && _this.ddm.dropdown) {
                        _this.ddm.dropdown.close();
                    }
                }
            }
        }));
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // 组件销毁时  取消所有事件订阅
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) {
            sub.unsubscribe();
        }));
        this.subscription = [];
        if (this.ro) {
            if (this.el.parentElement) {
                this.ro.unobserve(this.el.parentElement);
            }
            this.ro = null;
        }
        if (this._ddmHandler) {
            this._ddmHandler();
            this._ddmHandler = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
    };
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    FarrisTabsComponent.prototype.clickHandler = /**
     * @param {?} btnInfo
     * @return {?}
     */
    function (btnInfo) {
        if (!btnInfo) {
            return;
        }
        this.clickItems.next(btnInfo);
    };
    // 更多tab的显示隐藏
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.openChange = 
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.searchInputVisible = e;
        this.searchTabText = undefined;
        this._reCalculateAll();
        // 启用了搜索，需要判断下拉面板的值
        // 因为下拉面板可能存在遮挡的问题
        if (e) {
            this.menuItemsWidth = this.ddm.resetMenuElWidthOpen() + 'px';
        }
        else {
            this.menuItemsWidth = 'auto';
        }
    };
    // 搜索tab
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.searchTab = 
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this._reCalculateAll();
        this.stopBubble(e);
    };
    // 阻止冒泡
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.stopBubble = 
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    };
    /**
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarState = /**
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    function (id, state) {
        if (state === void 0) { state = this.btnStates; }
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n[id] === undefined) {
                    console.warn("\u672A\u627EID\u4E3A\uFF1A" + id + " \u76F8\u5173\u72B6\u6001\u8BBE\u7F6E\uFF01");
                    return false;
                }
                return n[id];
            })));
        }
        else {
            return of(true);
        }
    };
    // 监听子组件的隐藏显示属性
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._listenShowChanges = 
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 如果隐藏的组件是激活状态，先将其设置为常规
        this.tabs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.showStates.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                /** @type {?} */
                var activeIdToken;
                item._show = data;
                if (data === false && item.id === _this.activeId) {
                    item._active = false;
                    _this.activeId = '';
                    activeIdToken = false;
                }
                /** @type {?} */
                var tabs = _this.tabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item._show === true; }));
                /** @type {?} */
                var defaultTabId = tabs.length ? tabs[0].id : null;
                // 然后将显示状态下的第一个tab激活
                if (defaultTabId && activeIdToken === false) {
                    _this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    function (item, index) {
                        if (item.id === defaultTabId) {
                            _this.activeId = item.id;
                            _this.tabs[index]._active = true;
                        }
                    }));
                    _this.getToolbarConf();
                }
                _this.cdRef.detectChanges();
            }));
        }));
    };
    /**
     * 选中Tab
     * @param  tabId tab标识
     */
    /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    FarrisTabsComponent.prototype.selectTab = /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    function (tabId) {
        /** @type {?} */
        var selectedTab = this._getTabById(tabId);
        this._selectTab(selectedTab.tab, selectedTab.index);
    };
    /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    FarrisTabsComponent.prototype._cpSelectTabByIndex = /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    function (ev, id, ddm) {
        if (ddm === void 0) { ddm = null; }
        /** @type {?} */
        var targetEL = (/** @type {?} */ (ev.target));
        if (targetEL.className.indexOf('st-drop-close') > -1 ||
            targetEL.parentElement.className.indexOf('st-drop-close') > -1) {
            // 阻止冒泡和捕获事件 点击删除标记 则执行删除标签方法  而不是选中标签
            ev.stopPropagation();
            this.closeTab(id);
        }
        else {
            // 阻止冒泡
            ev.preventDefault();
            this.selectTab(id);
        }
        this.getToolbarConf();
        this.cdRef.markForCheck();
        this._reCalculateAll();
        this._calculateToolbarDropdownIsShow();
        this._calculateButtonsShow();
        if (ddm) {
            ddm.dropdown.close();
        }
        return false;
    };
    /**
     * 通过tabs的索引选择 tab
     * @param index tabs索引
     */
    /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    FarrisTabsComponent.prototype.selectTabByIndex = /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    function (index) {
        if (index >= 0 && index < this.tabs.length) {
            /** @type {?} */
            var selectTab = this.tabs[index];
            this._selectTab(selectTab, index);
        }
    };
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype._selectTab = /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    function (tab, index) {
        var _this = this;
        if (tab && !tab.disabled && this.activeId !== tab.id) {
            if (!this.beforeSelect) {
                this.beforeSelect = (/**
                 * @return {?}
                 */
                function () { return of(true); });
            }
            /** @type {?} */
            var tabsChangeEventParam_1 = {
                prevId: this.activeId,
                nextId: tab.id
            };
            this.beforeSelect(tabsChangeEventParam_1).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e) {
                    _this.activeId = tab.id;
                    // 首先不激活所有的tab页  然后激活当前tab页
                    // let index = -1;
                    _this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} i
                     * @return {?}
                     */
                    function (item, i) {
                        item._active = false;
                    }));
                    _this.tabs[index]._active = true;
                    _this.getToolbarConf();
                    // 滚动到可见区域内
                    _this.scrollTabIntoView(index);
                    _this.cdRef.detectChanges();
                    _this.tabChange.emit(tabsChangeEventParam_1);
                }
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._setActive = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.tabs.length) {
            /** @type {?} */
            var tabs = this.tabs.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item._show === true; }));
            /** @type {?} */
            var activeTab = this._getTabById(this.activeId).tab;
            this.activeId = activeTab ? activeTab.id : this.tabs.length ? this.tabs[0].id : null;
            // 过滤掉show=false（隐藏）的tab
            if (tabs.length) {
                if (this.activeId) {
                    /** @type {?} */
                    var targetTab = tabs.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) { return item.id === _this.activeId; }));
                    if (targetTab) {
                        this.activeId = targetTab.id;
                    }
                }
                else {
                    this.activeId = tabs[0].id;
                }
            }
            else {
                this.activeId = null;
            }
            this.tabs.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item._active = false;
                if (item.id === _this.activeId) {
                    item._active = true;
                }
            }));
        }
    };
    /**
     * @param activeId 显示某个tab
     */
    /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    FarrisTabsComponent.prototype.showTab = /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    function (tabId, selectable) {
        if (selectable === void 0) { selectable = true; }
        /** @type {?} */
        var len = this.tabs.length;
        for (var i = 0; i < len; i++) {
            if (this.tabs[i].id === tabId) {
                this.tabs[i]._show = true;
                if (selectable) {
                    this.selectTab(tabId);
                }
                return;
            }
        }
    };
    /**
     * @param activeId 隐藏某个tab
     */
    /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    FarrisTabsComponent.prototype.hideTab = /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    function (activeId) {
        /** @type {?} */
        var showTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._show === true;
        }));
        /** @type {?} */
        var len = showTabs.length - 1;
        if (len < 0) {
            return;
        }
        /** @type {?} */
        var index;
        for (var i = 0; i <= len; i++) {
            if (showTabs[i].id === activeId) {
                showTabs[i]._show = false;
                index = i;
                break;
            }
        }
        if (index === undefined) {
            return;
        }
        else if (index === len && len < 1) {
            this.selectTab('');
        }
        else if (index === len && len >= 1) {
            this.selectTab(showTabs[len - 1].id);
        }
        else {
            this.selectTab(showTabs[index + 1].id);
        }
    };
    /**
     * 添加标签
     * @param curTabs 数组或者对象
     * @param activeId 设置
     */
    /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    FarrisTabsComponent.prototype.addTabs = /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    function (curTabs, index, setActiveId) {
        var _a;
        if (curTabs.length > 0) {
            (_a = this.tabs).splice.apply(_a, tslib_1.__spread([index, 0], curTabs));
            // 去重
            this.tabs = this._unique(this.tabs);
        }
        if (setActiveId && this.activeId !== setActiveId) {
            /** @type {?} */
            var filterTab = this._getTabById(setActiveId);
            if (filterTab.index >= 0) {
                this.selectTab(setActiveId);
                this.activeId = setActiveId;
                this.scrollTabIntoView(filterTab.index);
            }
        }
        this.cdRef.detectChanges();
        this._reCalculateAll();
        this._changeTitleStyle();
    };
    /**
     * 添加标签时  去重
     *
     */
    /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    FarrisTabsComponent.prototype._unique = /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    function (objArray) {
        /** @type {?} */
        var hash = {};
        objArray = objArray.reduce((/**
         * @param {?} item
         * @param {?} next
         * @return {?}
         */
        function (item, next) {
            if (hash[next.id]) {
                hash[next.id] = '';
            }
            else {
                hash[next.id] = true && item.push(next);
            }
            return item;
        }), []);
        return objArray;
    };
    /* 通过tab列表的序列删除tab */
    /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype.removeTabByIndex = /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        /** @type {?} */
        var len = this.tabs.length - 1;
        if (index < 0 || index > len) {
            return;
        }
        /** @type {?} */
        var removeTab = this.tabs[index];
        removeTab._active = false;
        if (this.activeId === removeTab.id) {
            // 只有一个而且被删除
            if (len === 0) {
                // 如果所有标签均删除 激活id为空
                this.activeId = '';
            }
            else if (index === len) {
                // 如果删除的是最后一个标签 设置其前面的处于激活状态
                this.activeId = this.tabs[len - 1].id;
                this.tabs[index - 1]._active = true;
            }
            else {
                // 如果其他情况  设置其后面的处于激活状态
                this.activeId = this.tabs[index + 1].id;
                this.tabs[index + 1]._active = true;
            }
            this.tabs.splice(index, 1);
            this.scrollTabIntoView(index);
        }
        else {
            this.tabs.splice(index, 1);
        }
        this.tabRemove.emit({
            removeIndex: index,
            removeId: removeTab.id,
            activeId: this.activeId
        });
        this.cdRef.detectChanges();
    };
    /**
     * 关闭标签  跟删除标签不同
     * @param string
     */
    /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    FarrisTabsComponent.prototype.closeTab = /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    function (activeId) {
        /** @type {?} */
        var len = this.tabs.length;
        for (var i = 0; i < len; i++) {
            /** @type {?} */
            var tab = this.tabs[i];
            if (tab.id === activeId) {
                this.removeTabByIndex(i);
                return;
            }
        }
    };
    /**
     * 初始化
     */
    /**
     * 初始化
     * @return {?}
     */
    FarrisTabsComponent.prototype.load = /**
     * 初始化
     * @return {?}
     */
    function () {
        for (var i = 0; i < this.tabs.length; i++) {
            if (this.tabs[i].id === this.activeId) {
                this.tabs[i]._active = true;
                return;
            }
        }
    };
    /**
     * 截取tab中的title,超过6位，截断
     */
    /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._truncateTitle = /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    function () {
        this.tabs = this.tabs.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.title = item.title.length > 6 ? item.title.substr(0, 6) : item.title;
            return item;
        }));
    };
    /**
     * 替换tab中的title颜色
     */
    /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._changeTitleStyle = /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    function () {
        if (this.autoTitleWidth) {
            return;
        }
        /** @type {?} */
        var $textEls = this._tabContainerEl.querySelectorAll('.st-tab-text');
        for (var k = 0; k < $textEls.length; k++) {
            /** @type {?} */
            var parentEl = $textEls[k].parentNode;
            if ($textEls[k].scrollWidth > parentEl['offsetWidth']) {
                this.tabs[k].titleOverflow = true;
            }
            else {
                this.tabs[k].titleOverflow = false;
            }
        }
        //this.cdRef.detectChanges();
    };
    /**
     * 创建流
     */
    /**
     * 创建流
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._createStream = /**
     * 创建流
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        [this.rightNav, this.leftNav].forEach((/**
         * @param {?} curBtn
         * @param {?} index
         * @return {?}
         */
        function (curBtn, index) {
            /** @type {?} */
            var direction = index ? -1 : 1;
            /** @type {?} */
            var mousedown$ = fromEvent(curBtn.nativeElement, 'mousedown');
            /** @type {?} */
            var mouseup$ = fromEvent(curBtn.nativeElement, 'mouseup');
            /** @type {?} */
            var newMouseDown$ = mousedown$.pipe(switchMap((/**
             * @param {?} event
             * @return {?}
             */
            function (event) {
                event.preventDefault();
                /** @type {?} */
                var interval$ = of(0).pipe(concat(interval(80)), takeUntil(mouseup$), scan((/**
                 * @param {?} sum
                 * @param {?} num
                 * @return {?}
                 */
                function (sum, num) {
                    return sum + _this.scrollStep * direction;
                }), 0), takeWhile((/**
                 * @param {?} num
                 * @return {?}
                 */
                function (num) {
                    if (direction > 0) {
                        return !_this.disableRight;
                    }
                    return !_this.disableLeft;
                })), map((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) {
                    return { value: v, direction: direction };
                })));
                return interval$;
            })));
            /** @type {?} */
            var mousepressSub = newMouseDown$.subscribe((/**
             * @param {?} change
             * @return {?}
             */
            function (change) {
                _this._scrollTab(change.value, change.direction);
            }));
            _this.subscription.push(mousepressSub);
        }));
        // if (this.autoResize) {
        //     // 订阅windows resize事件
        //     this.subscription.push(
        //         fromEvent(window, 'resize')
        //             .pipe(throttleTime(80))
        //             .subscribe(e => {
        //                 this.cdRef.detectChanges();
        //             })
        //     );
        // }
    };
    /**
     * 按照方向，滚动到指定位置
     * @param dist_scroll 目标滚动
     * @param direction 方向
     */
    /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    FarrisTabsComponent.prototype._scrollTab = /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    function (move, direction) {
        /** @type {?} */
        var dist_scrollleft = this._tabContainerEl.scrollLeft + move;
        /** @type {?} */
        var max_scroll_left = this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        // 标签页左侧移动
        if (direction > 0) {
            this._tabContainerEl.scrollLeft = Math.min(dist_scrollleft, max_scroll_left);
        }
        else if (direction < 0) {
            // 标签页右侧移动
            this._tabContainerEl.scrollLeft = Math.max(dist_scrollleft, 0);
        }
        this._reCalculateSides();
        this.cdRef.detectChanges();
    };
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     */
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype.scrollTabIntoView = /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        var tabIndex = parseInt(index + '', 10);
        /** @type {?} */
        var tabToScroll;
        // first we find the tab element.
        if (tabIndex >= 0) {
            /** @type {?} */
            var allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
            if (allTabs.length > tabIndex) {
                tabToScroll = allTabs[tabIndex];
            }
        }
        else {
            // scroll selected tab into view
            /** @type {?} */
            var activeTab = this._tabContainerEl.querySelector('li.active');
            if (activeTab) {
                tabToScroll = activeTab;
            }
        }
        if (tabToScroll) {
            /** @type {?} */
            var tab_left = parseInt(tabToScroll.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            var tabs_left = parseInt(this._tabContainerEl.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            var rightPosition = tab_left +
                parseInt(tabToScroll.getBoundingClientRect().width + '', 10) -
                tabs_left;
            /** @type {?} */
            var leftPosition = tab_left - tabs_left - 10;
            if (leftPosition < 0) {
                this._scrollTab(leftPosition, -1);
            }
            else if (rightPosition > this._tabContainerEl.offsetWidth) {
                this._scrollTab(rightPosition - this._tabContainerEl.offsetWidth + 20, 1);
            }
        }
    };
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     */
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarConf = /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tabConfig = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._active === true;
        }))[0];
        if (!tabConfig || !tabConfig.hasOwnProperty('toolbar')) {
            this.toolbarConf = null;
        }
        else {
            this.toolbarConf = tabConfig.toolbar;
        }
        // 获取该tab下的头部扩展区域
        if (!tabConfig || !tabConfig.hasOwnProperty('farrisTabsExtendDirective')) {
            this.headerExtendConf = null;
        }
        else {
            this.headerExtendConf = tabConfig.farrisTabsExtendDirective;
        }
        // 隐藏更多按钮
        this.toolbarDpHidden = true;
        this.cdRef.detectChanges();
    };
    /**
     * 计算工具栏是否显示下拉按钮
     */
    /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._calculateToolbarDropdownIsShow = /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var headerExtendEl;
        /** @type {?} */
        var headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        var toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        if (!divEl) {
            return;
        }
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            this.renderer.removeStyle(headerExtendEl, 'overflow');
            headerExtendElWidth = headerExtendEl.offsetWidth;
        }
        // 按钮在内容区
        if (!this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else if (this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth - headerExtendElWidth) {
            // 按钮在头部工具栏
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
        this.cdRef.detectChanges();
    };
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     */
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._calculateButtonsShow = /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var headerExtendEl;
        /** @type {?} */
        var headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        var toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        /** @type {?} */
        var btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        var btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('button');
        if (!divEl || btnPlaceHolderBtns.length == 0) {
            return;
        }
        // 此处有个Bug，如果是inContent还是headerExtendConf的情况下，按钮的位置形如inHead
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            headerExtendElWidth = this.hasInHeadCl() ? headerExtendEl.offsetWidth : 0;
        }
        /** @type {?} */
        var moreButton = toolbarContainer.querySelector('.morebtn');
        // 计算按钮的宽度      
        /** @type {?} */
        var basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        var basicWidth = toolbarContainer.offsetWidth - moreButton.offsetWidth - 12 - headerExtendElWidth;
        /** @type {?} */
        var toolbarDropdownHidden = true;
        /** @type {?} */
        var k = 0
        // 只有一个按钮
        ;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        var showBtns = divEl.querySelectorAll('button');
        for (var i = 0; i < k; i++) {
            this.renderer.setStyle(showBtns[i], 'display', '');
        }
        for (var m = k; m < showBtns.length; m++) {
            this.renderer.setStyle(showBtns[m], 'display', 'none');
        }
        if (this.toolbarConf.contents && this.toolbarConf.contents.length) {
            this.inMoreButtonContents = this.toolbarConf.contents.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                return index >= k;
            }));
        }
    };
    /**
     * 重新计算是否显示按钮和下拉
     */
    /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalculateAll = /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this._tabContainerEl) {
            return;
        }
        /** @type {?} */
        var tabParentWidth = this.tabParent.nativeElement.offsetWidth;
        if (!this.hideButtons) {
            /** @type {?} */
            var tr = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-right"));
            /** @type {?} */
            var tl = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-left"));
            tabParentWidth += tr + tl;
        }
        this.hideButtons = this._tabContainerEl.scrollWidth <= tabParentWidth;
        this.hideDropDown = this.showDropDown ? this.hideButtons : true;
        if (!this.hideButtons) {
            if (!this.hideDropDown) {
                this.dropdownTabs = [].concat(this.tabs);
            }
            if (this.searchTabText) {
                this.dropdownTabs = this.dropdownTabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    return item['title'].indexOf(_this.searchTabText) !== -1;
                }));
            }
            this._reCalculateSides();
        }
        this.cdRef.detectChanges();
    };
    /**
     * 重新计算左右的提示文字
     */
    /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalulateTooltips = /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    function () {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        var t_right_tooltips = [];
        /** @type {?} */
        var t_left_tooltips = [];
        /** @type {?} */
        var allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
        /** @type {?} */
        var len = allTabs.length;
        /** @type {?} */
        var hiddenTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._show !== true;
        }));
        /** @type {?} */
        var hiddenTabsLength = hiddenTabs.length;
        for (var i = 0; i < len; i++) {
            /** @type {?} */
            var leftPosition = allTabs[i].getBoundingClientRect().left -
                this._tabContainerEl.getBoundingClientRect().left;
            /** @type {?} */
            var rightPosition = allTabs[i].getBoundingClientRect().width + leftPosition;
            if (rightPosition > this._tabContainerEl.offsetWidth) {
                t_right_tooltips.push(this.tabs[i]);
            }
            else if (leftPosition < 0) {
                t_left_tooltips.push(this.tabs[i]);
            }
        }
        this.leftTooltipTabs = []
            .concat(t_left_tooltips)
            .slice(Math.max(0, t_left_tooltips.length - this.maxTooltipLen));
        this.rightTooltipTabs = []
            .concat(t_right_tooltips)
            .slice(0, Math.min(this.maxTooltipLen, t_right_tooltips.length));
        this.disableRTooltip = this.rightTooltipTabs.length < 1;
        this.disableLTooltip = this.leftTooltipTabs.length - hiddenTabsLength < 1;
    };
    /**
     * 重新计算左右箭头状态
     */
    /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalculateSides = /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    function () {
        this.disableRight =
            this._tabContainerEl.scrollLeft >=
                this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        this.disableLeft = this._tabContainerEl.scrollLeft <= 0;
        this._reCalulateTooltips();
    };
    /**
     * 通过id寻找Tab
     * @param id ID
     */
    /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    FarrisTabsComponent.prototype._getTabById = /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var indexWidthId = [];
        /** @type {?} */
        var tabsWithId = this.tabs.filter((/**
         * @param {?} tab
         * @param {?} index
         * @return {?}
         */
        function (tab, index) {
            if (tab.id === id) {
                indexWidthId.push(index);
                return true;
            }
            else {
                return false;
            }
        }));
        return {
            tab: tabsWithId.length ? tabsWithId[0] : null,
            index: indexWidthId.length ? indexWidthId[0] : -1
        };
    };
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    FarrisTabsComponent.prototype.resolveSize = /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        /** @type {?} */
        var regex = /px|em|rem|pt|%/;
        // 说明是字符串
        return regex.test(size)
            ? "" + parseInt(size, 10) + size.match(regex)[0]
            : size + "px";
    };
    /*
      清空tab
       */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.hasInHeadCl = /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    function () {
        if (this.toolbarConf && this.toolbarConf.hasOwnProperty('position') && this.toolbarConf.hasOwnProperty('contents') && this.toolbarConf.position === 'inHead' && this.toolbarConf.contents.length > 0) {
            return true;
        }
        if (this.headerExtendConf && !(this.toolbarConf && this.toolbarConf.position === 'inContent' && this.toolbarConf.contents.length)) {
            return true;
        }
        return false;
    };
    FarrisTabsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-tabs',
                    template: "<div #tabHeader class=\"farris-tabs-header\"\r\n    [class.farris-tabs-inHead]=\"hasInHeadCl()\"\r\n    [class.farris-tabs-inContent]=\"!hasInHeadCl()\">\r\n    <div class=\"farris-tabs-title scroll-tabs\"\r\n        [ngStyle]=\"{'width': hasInHeadCl() ? (titleWidth?titleWidth + '%':null) : null}\">\r\n        <button type=\"button\" (disabled)=\"disableLeft\" class=\"btn sc-nav-btn px-1 sc-nav-lr\"\r\n            [ngClass]=\"{'d-none':hideButtons}\" #leftNav>\r\n        </button>\r\n        <div class=\"spacer f-utils-fill\" #tabParent\r\n            [ngClass]=\"{'spacer-sides':!hideButtons&& hideDropDown,'spacer-sides-dropdown':!hideButtons&&!hideDropDown}\"\r\n            style=\"width:100%;\">\r\n            <ul class=\"nav farris-nav-tabs flex-nowrap\" [class.nav-fill]=\"fill\"\r\n                [class.flex-row]=\"position==='top'||position==='bottom'\"\r\n                [class.flex-column]=\"position==='left'||position==='right'\" #tabContainer>\r\n                <li class=\"nav-item\" *ngFor=\"let tab of tabs;index as tabIndex\"\r\n                    [ngClass]=\"{'d-none': tab._show !== true, 'f-state-active': tab.id === activeId, 'f-state-disabled': tab.disabled === true}\"\r\n                    [ngStyle]=\"{'width':tab.tabWidth+'px'}\">\r\n                    <a class=\"nav-link tabs-text-truncate\" #anchor [class.active]=\"tab.id === activeId\"\r\n                        [class.disabled]=\"tab.disabled\" (click)=\"_cpSelectTabByIndex($event,tab.id)\">\r\n                        <span class=\"st-tab-text\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [ngClass]=\"tab.titleCustomCls\" [tabTransclude]=\"tab.headingRef\"\r\n                            *ngIf=\"tab.headingRef\"></span>\r\n                        <span class=\"st-tab-text\" [ngbTooltip]=\"tab.title\" [referElement]=\"tabContainer\"\r\n                            [disableTooltip]=\"!tab.titleOverflow\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [class.farris-title-text-custom]=\"tab.titleOverflow\"\r\n                            *ngIf=\"!tab.headingRef\">{{tab.title}}</span>\r\n                        <span class=\"st-drop-close\" *ngIf=\"tab.removeable\">\r\n                            <i class=\"f-icon f-icon-close\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown (openChange)=\"openChange($event)\">\r\n            <button type=\"button\" (disabled)=\"disableRight\" class=\"btn sc-nav-rg\" [ngClass]=\"{'d-none':hideButtons}\"\r\n                #rightNav></button>\r\n            <button #dropDownButton class=\"btn dropdown-toggle-split \" ngbDropdownToggle\r\n                [ngClass]=\"{'d-none':hideDropDown}\">\r\n            </button>\r\n            <div class=\"dropdown-menu\" [class.tabs-pt28]=\"searchBoxVisible\" ngbDropdownMenu #ddm=\"DropdownMenu\">\r\n                <div (click)=\"stopBubble($event)\" class='pb-1 tabs-li-absolute' *ngIf=\"searchBoxVisible\">\r\n                    <input type=\"text\" class=\"form-control k-textbox\" [(ngModel)]=\"searchTabText\"\r\n                        (keyup)=\"searchTab($event)\" />\r\n                    <span class=\"f-icon f-icon-page-title-query tabs-icon-search\"></span>\r\n                </div>\r\n                <ul class=\"tab-dropdown-menu--items\" [ngStyle]=\"{'width':menuItemsWidth}\">\r\n                    <li class=\"dropdown-item text-truncate px-2\" *ngFor=\"let tab of dropdownTabs;index as tabIndex\"\r\n                        [ngClass]=\"{'disabled': tab.disabled, 'active': tab.id === activeId, 'd-none': tab._show !==true}\"\r\n                        (click)=\"_cpSelectTabByIndex($event,tab.id, ddm)\">\r\n                        <!-- <span class=\"float-right st-drop-close\">\r\n                            <i class=\"material-icons align-middle\">close</i>\r\n                        </span> -->\r\n                        <a class=\"dropdown-title\">{{tab.title}}</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #toolbarContainer class=\"farris-tabs-toolbar\" *ngIf=\"toolbarConf || headerExtendConf\">\r\n        <div *ngIf=\"headerExtendConf && headerExtendConf.templateRef\" class=\"farris-tabs-header-extend\"\r\n            [class.margin-right-14]=\"toolbarConf && toolbarConf.contents.length\"\r\n            [ngClass]=\"headerExtendConf && headerExtendConf.extendCls\">\r\n            <template [ngTemplateOutlet]=\"headerExtendConf.templateRef\"></template>\r\n        </div>\r\n        <div class=\"farris-tabs-inline-flex\" *ngIf=\"toolbarConf\">\r\n            <ng-template ngFor let-btn [ngForOf]=\"toolbarConf.contents\" let-i=\"index\" [ngForTrackBy]=\"trackByButton\">\r\n                <button [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"\r\n                    *ngIf=\"getToolbarState(btn.id, btnVisible) | async\"\r\n                    [disabled]=\"getToolbarState(btn.id, btnStates) | async\"\r\n                    (click)=\"clickHandler(btn)\">{{btn.title}}</button>\r\n            </ng-template>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown [hidden]=\"toolbarDpHidden\">\r\n            <button class=\"btn btn-link morebtn\" ngbDropdownToggle>{{'tabs.more' | locale}}</button>\r\n            <ul class=\"dropdown-menu\" ngbDropdownMenu *ngIf=\"inMoreButtonContents.length\">\r\n                <ng-template ngFor let-content [ngForOf]=\"inMoreButtonContents\" let-i=\"index\">\r\n                    <li class=\"dropdown-item text-truncate px-2\"\r\n                        *ngIf=\"getToolbarState(content.id, btnVisible) | async\">\r\n                        <button style=\"width:100%;\" [attr.id]=\"content.id\" class=\"btn btn-link text-left\"\r\n                            [class.disabled]=\"getToolbarState(content.id, btnStates) | async\"\r\n                            (click)=\"clickHandler(content)\">{{content.title}}</button>\r\n                    </li>\r\n                </ng-template>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class=\"farris-tabs-btn-placeholder\" #btnPlaceholder *ngIf=\"toolbarConf\">\r\n        <ng-container *ngFor=\"let btn of toolbarConf.contents\">\r\n            <button [ngClass]=\"btn.appearance.class\"\r\n                *ngIf=\"getToolbarState(btn.id, btnVisible) | async\">{{btn.title}}</button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<ng-content></ng-content>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    encapsulation: ViewEncapsulation.None,
                    styles: [".farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-title{width:41.6666667%}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer.spacer-sides-dropdown{margin:0 60px 0 28px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .sc-nav-btn.dropdown{right:6px}.farris-tabs .margin-right-14{margin-right:14px}.farris-tabs .farris-tabs-header-extend{height:44px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer .farris-nav-tabs .nav-item .nav-link .farris-title-text{max-width:112px}.farris-tabs .tabs-pt28{padding:0}.farris-tabs .tab-dropdown-menu--items{max-height:200px;overflow:auto}.farris-tabs .tabs-li-absolute{padding:4px;margin:0;position:relative}.farris-tabs .tabs-icon-search{position:absolute;right:4px;top:50%;font-size:14px;padding:0 4px;width:auto;height:24px;color:rgba(0,0,0,.25);margin-top:-12px;line-height:20px}.farris-tabs .st-drop-close{line-height:1}.farris-tabs .dropdown-menu .dropdown-item .dropdown-title{overflow:hidden;display:inline-block;padding:0 5px}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-inline-flex{overflow:hidden}.farris-tabs .farris-tabs-btn-placeholder{position:absolute;display:-webkit-inline-box;display:inline-flex;top:-30px;left:0;opacity:0;z-index:-90}"]
                }] }
    ];
    /** @nocollapse */
    FarrisTabsComponent.ctorParameters = function () { return [
        { type: TabService },
        { type: ElementRef },
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    FarrisTabsComponent.propDecorators = {
        fill: [{ type: Input }],
        autoTitleWidth: [{ type: Input }],
        titleLength: [{ type: Input }],
        position: [{ type: Input }],
        showDropDown: [{ type: Input }],
        showTooltips: [{ type: Input }],
        scrollStep: [{ type: Input }],
        autoResize: [{ type: Input }],
        closeable: [{ type: Input }],
        selectId: [{ type: Input, args: ['value',] }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        searchBoxVisible: [{ type: Input }],
        headerHeight: [{ type: Input, args: ['header-height',] }],
        contentDirection: [{ type: Input }],
        contentFill: [{ type: Input }],
        clickThrottleTime: [{ type: Input }],
        btnStates: [{ type: Input }],
        btnVisible: [{ type: Input }],
        tabs: [{ type: Input }],
        customClass: [{ type: Input }],
        titleWidth: [{ type: Input }],
        leftNav: [{ type: ViewChild, args: ['leftNav',] }],
        rightNav: [{ type: ViewChild, args: ['rightNav',] }],
        tabContainer: [{ type: ViewChild, args: ['tabContainer',] }],
        toolbarContainer: [{ type: ViewChild, args: ['toolbarContainer',] }],
        dropDownButton: [{ type: ViewChild, args: ['dropDownButton',] }],
        tabParent: [{ type: ViewChild, args: ['tabParent',] }],
        btnPlaceHolder: [{ type: ViewChild, args: ['btnPlaceholder',] }],
        beforeSelect: [{ type: Input }],
        tabChange: [{ type: Output }],
        tabRemove: [{ type: Output }],
        ddm: [{ type: ViewChild, args: ['ddm',] }]
    };
    return FarrisTabsComponent;
}());
export { FarrisTabsComponent };
if (false) {
    /** @type {?} */
    FarrisTabsComponent.prototype.fill;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoTitleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleLength;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchInputVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.showDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.showTooltips;
    /** @type {?} */
    FarrisTabsComponent.prototype.scrollStep;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoResize;
    /** @type {?} */
    FarrisTabsComponent.prototype.closeable;
    /** @type {?} */
    FarrisTabsComponent.prototype.selectId;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchBoxVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype._headerHeight;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentDirection;
    /** @type {?} */
    FarrisTabsComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickSubscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropDownButton;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabParent;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnPlaceHolder;
    /**
     * 选中tab 前事件
     * @type {?}
     */
    FarrisTabsComponent.prototype.beforeSelect;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabChange;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabRemove;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentFillStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._contentFill;
    /** @type {?} */
    FarrisTabsComponent.prototype.widthStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._width;
    /** @type {?} */
    FarrisTabsComponent.prototype.heightStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._height;
    /** @type {?} */
    FarrisTabsComponent.prototype._position;
    /** @type {?} */
    FarrisTabsComponent.prototype.positionStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.menuItemsWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.maxDropdownW;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._customClass;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.headerExtendConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisTabsComponent.prototype.inMoreButtonContents;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropdownTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideButtons;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLeft;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRight;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.el;
    /** @type {?} */
    FarrisTabsComponent.prototype.subscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftTooltipTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightTooltipTabs;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabContainerEl;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.maxTooltipLen;
    /** @type {?} */
    FarrisTabsComponent.prototype.activeId;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ro;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchTabText;
    /** @type {?} */
    FarrisTabsComponent.prototype.ddm;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._ddmHandler;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.stService;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRhYnMvIiwic291cmNlcyI6WyJsaWIvdGFicy90YWJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFDSCxTQUFTLEVBQW9DLEtBQUssRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLHVCQUF1QixFQUNsRyxpQkFBaUIsRUFBRSxpQkFBaUIsRUFBaUIsU0FBUyxFQUM5RCxZQUFZLEVBQUUsTUFBTSxFQUFzQyxNQUFNLEVBQ25FLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBZ0IsU0FBUyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLGVBQWUsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbkcsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRWxHLE9BQU8sRUFBRSxVQUFVLEVBQWEsTUFBTSxnQkFBZ0IsQ0FBQztBQUl2RCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFdkQ7SUFpTkksNkJBQ1ksU0FBcUIsRUFDckIsVUFBc0IsRUFDdEIsUUFBbUIsRUFDbkIsS0FBd0IsRUFDeEIsTUFBYztRQUpkLGNBQVMsR0FBVCxTQUFTLENBQVk7UUFDckIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLFVBQUssR0FBTCxLQUFLLENBQW1CO1FBQ3hCLFdBQU0sR0FBTixNQUFNLENBQVE7O1FBM01qQixTQUFJLEdBQUcsS0FBSyxDQUFDOztRQUViLG1CQUFjLEdBQUcsS0FBSyxDQUFDOztRQUV2QixnQkFBVyxHQUFHLENBQUMsQ0FBQzs7UUFp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RSx5Q0FBd0I7O0lBQ3hCLHNDQUE4Qjs7SUFDOUIsdUNBQWdDOztJQUNoQywyQ0FBd0M7O0lBQ3hDLCtDQUFnRDs7SUFDaEQsNkNBQTRDOztJQUM1Qyx3Q0FBa0M7O0lBQ2xDLDZDQUEyQzs7Ozs7SUFHM0MsMkNBQW1FOztJQUNuRSx3Q0FBMEQ7O0lBQzFELHdDQUE2RDs7SUF3QjdELGdEQUF3RDs7SUFFeEQsMkNBQWtCOztJQUVsQiwwQ0FBOEM7O0lBRTlDLHFDQUFZOztJQUVaLDJDQUErQzs7SUFFL0Msc0NBQWE7O0lBRWIsd0NBQWU7O0lBQ2YsNkNBQW9EOztJQUNwRCw2Q0FBd0I7O0lBR3hCLDJDQUFrQjs7Ozs7SUFDbEIsMkNBQTBCOzs7OztJQUUxQixvQ0FBeUM7O0lBRXpDLCtDQUFzQjs7SUFFdEIsMENBR0U7O0lBRUYsOENBQXVCOztJQUV2QixtREFBaUM7O0lBRWpDLDJDQUFrQjs7SUFFbEIsMENBQW1COztJQUVuQix1Q0FBaUI7O0lBR2pCLDJDQUFvQjs7SUFFcEIsMENBQW9COztJQUVwQiwyQ0FBcUI7Ozs7O0lBRXJCLGlDQUF3Qjs7SUFFeEIsMkNBQWtDOztJQUVsQyw4Q0FBdUI7O0lBRXZCLDhDQUF1Qjs7SUFFdkIsOENBQXFCOztJQUVyQiwrQ0FBc0I7Ozs7O0lBRXRCLDhDQUFxQzs7Ozs7SUFDckMsNENBQTBCOztJQUUxQix1Q0FBYzs7Ozs7SUFDZCxpQ0FBa0M7O0lBRWxDLDRDQUFzQjs7SUFFdEIsa0NBQXVDOzs7OztJQUV2QywwQ0FBZ0M7Ozs7O0lBSTVCLHdDQUE2Qjs7Ozs7SUFDN0IseUNBQThCOzs7OztJQUM5Qix1Q0FBMkI7Ozs7O0lBQzNCLG9DQUFnQzs7Ozs7SUFDaEMscUNBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBJbnB1dCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICAgIENoYW5nZURldGVjdG9yUmVmLCBWaWV3RW5jYXBzdWxhdGlvbiwgQWZ0ZXJWaWV3SW5pdCwgVmlld0NoaWxkLCBPbkRlc3Ryb3ksIEFmdGVyQ29udGVudENoZWNrZWQsXHJcbiAgICBFdmVudEVtaXR0ZXIsIE91dHB1dCwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgTmdab25lXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgZnJvbUV2ZW50LCBpbnRlcnZhbCwgT2JzZXJ2YWJsZSwgb2YsIEJlaGF2aW9yU3ViamVjdCwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyB0YWtlVW50aWwsIG1hcCwgc2Nhbiwgc3dpdGNoTWFwLCB0YWtlV2hpbGUsIGNvbmNhdCwgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHsgVGFiU2VydmljZSwgVGFiQ29uZmlnIH0gZnJvbSAnLi4vdGFicy5jb25maWcnO1xyXG5pbXBvcnQgeyBUYWJzQ2hhbmdlRXZlbnQsIFRhYnNSZW1vdmVUYWJFdmVudCB9IGZyb20gJy4uL3RhYnMuZXZlbnRzJztcclxuaW1wb3J0IHsgRmFycmlzVGFiQ29tcG9uZW50IH0gZnJvbSAnLi4vdGFiL3RhYi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBUb29sYmFyQ29uZixUb29sYmFyQ29udGVudHNDb25mfSBmcm9tICcuLi90b29sYmFyLmNvbmZpZyc7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xyXG5pbXBvcnQgeyBOZ2JEcm9wZG93bk1lbnUgfSBmcm9tICcuLi9kcm9wZG93bi9kcm9wZG93bic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXRhYnMnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RhYnMuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFicy5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNUYWJzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsXHJcbiAgICBPbkRlc3Ryb3ksIEFmdGVyQ29udGVudEluaXQsIEFmdGVyQ29udGVudENoZWNrZWQsIEFmdGVyVmlld0NoZWNrZWQge1xyXG5cclxuICAgIC8vIOaUr+aMgeagh+etvumhteWhq+WFhVxyXG4gICAgQElucHV0KCkgZmlsbCA9IGZhbHNlO1xyXG4gICAgLy8g5pSv5oyB5qCH562+6aG15qCH6aKY6Ieq6YCC5bqU5a695bqmLVxyXG4gICAgQElucHV0KCkgYXV0b1RpdGxlV2lkdGggPSBmYWxzZTtcclxuICAgIC8vIOagh+mimOmVv+W6puWkp+S6juetieS6juWkmuWwkeWtl+espu+8jOWQr+eUqOa4kOWPmOagt+W8j+KAlOKAlOWxnuaAp+W6n+W8g1xyXG4gICAgQElucHV0KCkgdGl0bGVMZW5ndGggPSA3O1xyXG4gICAgc2VhcmNoSW5wdXRWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgLy8gdGFi6aG15L2N572uIOS4iuS4i+W3puWPs1xyXG4gICAgQElucHV0KCkgc2V0IHBvc2l0aW9uKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25TdGF0ZXMubmV4dCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgcG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgLy8g5piv5ZCm5ZCv55So5LiL5ouJ5qGGXHJcbiAgICBASW5wdXQoKSBzaG93RHJvcERvd247XHJcbiAgICAvLyDmmK/lkKblkK/nlKjmj5DnpLrkv6Hmga9cclxuICAgIEBJbnB1dCgpIHNob3dUb29sdGlwcztcclxuICAgIC8vIOeCueWHu+aXtua7muWKqOWAvFxyXG4gICAgQElucHV0KCkgc2Nyb2xsU3RlcDtcclxuICAgIC8vIOaYr+WQpuiHquWKqOmHjeaWsOWuveW6plxyXG4gICAgQElucHV0KCkgYXV0b1Jlc2l6ZTtcclxuICAgIC8vIOiuvue9ruWPr+WFs+mXreagh+etvumhtVxyXG4gICAgQElucHV0KCkgY2xvc2VhYmxlOiBib29sZWFuO1xyXG4gICAgLy8g6K6+572u5Y+v6YCJ5Lit5qCH562+6aG1XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW5wdXQtcmVuYW1lXHJcbiAgICBASW5wdXQoJ3ZhbHVlJykgc2VsZWN0SWQ6IHN0cmluZztcclxuICAgIC8vIHRhYnPlrr3luqblkozpq5jluqZcclxuICAgIEBJbnB1dCgpIHNldCB3aWR0aCh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB0aGlzLnJlc29sdmVTaXplKHZhbHVlKTtcclxuICAgICAgICB0aGlzLndpZHRoU3RhdGVzLm5leHQodGhpcy5fd2lkdGgpO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGhlaWdodCh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gdGhpcy5yZXNvbHZlU2l6ZSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRTdGF0ZXMubmV4dCh0aGlzLl9oZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgLy8g5pCc57Si5qGG5piv5ZCm5pi+56S6XHJcbiAgICBASW5wdXQoKSBzZWFyY2hCb3hWaXNpYmxlID0gdHJ1ZTtcclxuICAgIC8vIOagh+etvumhtemrmOW6plxyXG4gICAgX2hlYWRlckhlaWdodDogc3RyaW5nIHwgbnVtYmVyO1xyXG4gICAgQElucHV0KCdoZWFkZXItaGVpZ2h0JylcclxuICAgIGdldCBoZWFkZXJIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlYWRlckhlaWdodDtcclxuICAgIH1cclxuICAgIHNldCBoZWFkZXJIZWlnaHQoaGVhZGVySGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5faGVhZGVySGVpZ2h0ID0gdGhpcy5yZXNvbHZlU2l6ZShoZWFkZXJIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWGheWuueaYr+WQpuaYr2ZsZXgg5a655ZmoIOeUqOS6juWGhemDqOWtkOWFg+e0oGZsZXhcclxuICAgIEBJbnB1dCgpIGNvbnRlbnREaXJlY3Rpb24gPSAnY29sdW1uJztcclxuICAgIC8vIOWGheWuueaYr+WQpuWhq+WFhSAg6buY6K6k5piv5LiN5aGr5YWFXHJcbiAgICBASW5wdXQoKSBzZXQgY29udGVudEZpbGwodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9jb250ZW50RmlsbCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29udGVudEZpbGxTdGF0ZXMubmV4dCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBjbGlja1Rocm90dGxlVGltZSA9IDM1MDtcclxuICAgIHByaXZhdGUgY2xpY2tJdGVtcyA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIHByaXZhdGUgY2xpY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBASW5wdXQoKSBidG5TdGF0ZXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PjtcclxuICAgIEBJbnB1dCgpIGJ0blZpc2libGU6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PjtcclxuXHJcbiAgICAvLyDmiYDmnInmoIfnrb7mlbDmja5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgdGFicygpOiBhbnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhYnM7XHJcbiAgICB9XHJcbiAgICBzZXQgdGFicyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3RhYnMgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGN1c3RvbUNsYXNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUNsYXNzO1xyXG4gICAgfVxyXG4gICAgc2V0IGN1c3RvbUNsYXNzKGN1c3RvbUNsYXNzOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21DbGFzcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbUNsYXNzLnNwbGl0KCcgJykuZm9yRWFjaCgoY3NzQ2xhc3M6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLCBjc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY3VzdG9tQ2xhc3MgPSBjdXN0b21DbGFzcyA/IGN1c3RvbUNsYXNzLnRyaW0oKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsIGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5bem5L6n5omA5pyJ5qCH562+55qE5a695bqm5ZKMLOeZvuWIhuavlFxyXG4gICAgQElucHV0KCkgdGl0bGVXaWR0aCA9IDA7XHJcbiAgICBAVmlld0NoaWxkKCdsZWZ0TmF2JykgbGVmdE5hdjtcclxuICAgIEBWaWV3Q2hpbGQoJ3JpZ2h0TmF2JykgcmlnaHROYXY7XHJcbiAgICBAVmlld0NoaWxkKCd0YWJDb250YWluZXInKSB0YWJDb250YWluZXI7XHJcbiAgICBAVmlld0NoaWxkKCd0b29sYmFyQ29udGFpbmVyJykgdG9vbGJhckNvbnRhaW5lcjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Ryb3BEb3duQnV0dG9uJykgZHJvcERvd25CdXR0b247XHJcbiAgICBAVmlld0NoaWxkKCd0YWJQYXJlbnQnKSB0YWJQYXJlbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdidG5QbGFjZWhvbGRlcicpIGJ0blBsYWNlSG9sZGVyXHJcblxyXG4gICAgLyoqIOmAieS4rXRhYiDliY3kuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNlbGVjdDogKGU6IFRhYnNDaGFuZ2VFdmVudCkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBPdXRwdXQoKSB0YWJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFRhYnNDaGFuZ2VFdmVudD4oKTtcclxuICAgIEBPdXRwdXQoKSB0YWJSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyPFRhYnNSZW1vdmVUYWJFdmVudD4oKTtcclxuXHJcbiAgICBnZXQgZGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdjb2x1bW4nO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdjb2x1bW4tcmV2ZXJzZSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdyb3cnO1xyXG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Jvdy1yZXZlcnNlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5peg55So77yM5YW85a65XHJcbiAgICBnZXQgdGFiRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJyB8fCB0aGlzLnBvc2l0aW9uID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3Jvdyc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvc2l0aW9uID09PSAnbGVmdCcgfHwgdGhpcy5wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2NvbHVtbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5YaF5a655aGr5YWF54q25oCBXHJcbiAgICBjb250ZW50RmlsbFN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xyXG4gICAgLy8g5YaF5a655piv5ZCm5aGr5YWFLOm7mOiupOS4jeWhq+WFhVxyXG4gICAgX2NvbnRlbnRGaWxsOiBhbnk7XHJcbiAgICAvLyDlrr3luqbnirbmgIFcclxuICAgIHdpZHRoU3RhdGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KGZhbHNlKTtcclxuICAgIC8vIHRhYnPlrr3luqZcclxuICAgIF93aWR0aDogYW55O1xyXG4gICAgLy8g6auY5bqm54q25oCBXHJcbiAgICBoZWlnaHRTdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oZmFsc2UpO1xyXG4gICAgLy8gdGFic+WuveW6plxyXG4gICAgX2hlaWdodDogYW55O1xyXG4gICAgLy8gdGFic+agh+mimOS9jee9rlxyXG4gICAgX3Bvc2l0aW9uOiBhbnk7XHJcbiAgICBwb3NpdGlvblN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPigndG9wJyk7XHJcbiAgICBtZW51SXRlbXNXaWR0aCA9ICdhdXRvJztcclxuICAgIC8vbWF4RHJvcGRvd25IID0gMjAwO1xyXG4gICAgLy8g5LiL5ouJ5YiX6KGo5pyA5aSn5a695bqm77yaIOmdnuato+WAvOihqOaYjuaYr+S4jemZkOWItuWuveW6plxyXG4gICAgbWF4RHJvcGRvd25XID0gLTE7XHJcbiAgICBwcml2YXRlIF9jdXN0b21DbGFzcyA9ICcnO1xyXG4gICAgLy8g5qCH562+5a2Y5YKo5YiX6KGoXHJcbiAgICBwcml2YXRlIF90YWJzOiBGYXJyaXNUYWJDb21wb25lbnRbXSA9IFtdO1xyXG5cclxuICAgIGhlYWRlckV4dGVuZENvbmY6IGFueTtcclxuICAgIC8vIOW3peWFt+adoeaYvuekuuebuOWFs+mFjee9rlxyXG4gICAgdG9vbGJhckNvbmY6IFRvb2xiYXJDb25mID0ge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnJyxcclxuICAgICAgICBjb250ZW50czogW11cclxuICAgIH07XHJcbiAgICAvLyDlt6XlhbfmnaHlj7PkvqflsI/kuIvmi4nmoYbmmK/lkKbmmL7npLpcclxuICAgIHRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAvLyDlt6XlhbfmnaHigJzmm7TlpJrigJ3ph4znmoTmjInpkq5cclxuICAgIGluTW9yZUJ1dHRvbkNvbnRlbnRzOiBhbnlbXSA9IFtdO1xyXG4gICAgLy8g5pi+56S65LiL5ouJ5pWw5o2uXHJcbiAgICBkcm9wZG93blRhYnMgPSBbXTtcclxuICAgIC8vIOmakOiXj+W3puWPs+a7muWKqOeureWktOaMiemSrlxyXG4gICAgaGlkZUJ1dHRvbnMgPSB0cnVlO1xyXG4gICAgLy8g5Y2V5Liq5qCH562+6aG15qCH6aKY55qE5a695bqmXHJcbiAgICB0YWJXaWR0aDogbnVtYmVyO1xyXG5cclxuICAgIC8vIOmakOiXj+S4i+aLiVxyXG4gICAgaGlkZURyb3BEb3duID0gdHJ1ZTtcclxuICAgIC8vIOemgeeUqOW3pueureWktFxyXG4gICAgZGlzYWJsZUxlZnQgPSBmYWxzZTtcclxuICAgIC8vIOemgeeUqOWPs+eureWktFxyXG4gICAgZGlzYWJsZVJpZ2h0ID0gZmFsc2U7XHJcbiAgICAvLyDlvZPliY3moLflvI9cclxuICAgIHByaXZhdGUgZWw6IEhUTUxFbGVtZW50O1xyXG4gICAgLy8g6K6w5b2V5LqL5Lu25rWBXHJcbiAgICBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgICAvLyDnpoHnlKjlj7Pkvqfmj5DnpLpcclxuICAgIGRpc2FibGVSVG9vbHRpcCA9IHRydWU7XHJcbiAgICAvLyDnpoHnlKjlt6bkvqfmj5DnpLpcclxuICAgIGRpc2FibGVMVG9vbHRpcCA9IHRydWU7XHJcbiAgICAvLyDlt6bkvqfmj5DnpLrmlbDmja5cclxuICAgIGxlZnRUb29sdGlwVGFicyA9IFtdO1xyXG4gICAgLy8g5Y+z5L6n5o+Q56S65pWw5o2uXHJcbiAgICByaWdodFRvb2x0aXBUYWJzID0gW107XHJcbiAgICAvLyDlhoXpg6jlpITnkIbmoIforrBUYWLmoIfnrb5cclxuICAgIHByaXZhdGUgX3RhYkNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgbWF4VG9vbHRpcExlbiA9IDU7XHJcbiAgICAvLyDmoIforrDlvZPliY1UYWLmoIfnrb5cclxuICAgIGFjdGl2ZUlkID0gJyc7XHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciA9IG51bGw7XHJcbiAgICAvLyDmkJzntKJ0YWLmoYbnmoTlgLxcclxuICAgIHNlYXJjaFRhYlRleHQ6IHN0cmluZztcclxuXHJcbiAgICBAVmlld0NoaWxkKCdkZG0nKSBkZG06IE5nYkRyb3Bkb3duTWVudTtcclxuXHJcbiAgICBwcml2YXRlIF9kZG1IYW5kbGVyOiBhbnkgPSBudWxsO1xyXG5cclxuICAgIHRyYWNrQnlCdXR0b24oaW5kZXg6IG51bWJlciwgYnRuOiBhbnkpOiBudW1iZXIgeyByZXR1cm4gYnRuLmlkOyB9XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHN0U2VydmljZTogVGFiU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmVcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZWwgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLnZlcmlmeUNvbmZpZygpO1xyXG4gICAgfVxyXG4gICAgLyoqIOmqjOivgeS8oOmAkuWPguaVsCAqL1xyXG4gICAgcHJpdmF0ZSB2ZXJpZnlDb25maWcoKSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnOiBUYWJDb25maWcgPSB0aGlzLnN0U2VydmljZS5nZXRDb25maWcoKTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxTdGVwID0gcGFyc2VJbnQodGhpcy5zY3JvbGxTdGVwICsgJycsIDEwKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbiA9IHRoaXMuY2xpY2tJdGVtcy5waXBlKGRlYm91bmNlVGltZSh0aGlzLmNsaWNrVGhyb3R0bGVUaW1lKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoYnRuSW5mbzpUb29sYmFyQ29udGVudHNDb25mKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYnRuSW5mby5jbGljayYmdHlwZW9mIGJ0bkluZm8uY2xpY2s9PSdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5JbmZvLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsID0gdGhpcy50YWJDb250YWluZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jcmVhdGVTdHJlYW0oKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy5zZWxlY3RJZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubmdab25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLmVsLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlc1snc2VsZWN0SWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihjaGFuZ2VzWydzZWxlY3RJZCddLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qIOagh+etvumhteWGheWuueWIneWni+WMliAqL1xyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQgeyB9XHJcbiAgICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICAvLyDkuLrkuoblhbzlrrnlvITml6fooajljZXvvIzkuI3lhbzlrrlIb3N0QmluZGluZywg6YCa6L+H6L+95YqgY2xhc3PnmoTmlrnlvI/lrp7njrBcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmYXJyaXMtdGFicycpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsbFN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmLXRhYnMtY29udGVudC1maWxsJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmLXRhYnMtY29udGVudC1maWxsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLndpZHRoU3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbCwgJ3dpZHRoJywgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhlaWdodFN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWwsICdoZWlnaHQnLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25TdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LXJvdycpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LWNvbHVtbicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LXJvdy1yZXZlcnNlJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uLXJldmVyc2UnKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1yb3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93LXJldmVyc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uLXJldmVyc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOWFvOWuuee7k+adn1xyXG4gICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgIHRoaXMuX3NldEFjdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZVRpdGxlU3R5bGUoKTtcclxuICAgICAgICB0aGlzLl9saXN0ZW5TaG93Q2hhbmdlcygpO1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vICAgICBpZiAoc2VsZi5zZWFyY2hJbnB1dFZpc2libGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2RkbUhhbmRsZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgJ21vdXNlZG93bicsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuZmFycmlzLXRhYnMtaGVhZGVyJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRkbSAmJiB0aGlzLmRkbS5kcm9wZG93bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRkbS5kcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xyXG5cclxuICAgIH1cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIC8vIOe7hOS7tumUgOavgeaXtiAg5Y+W5raI5omA5pyJ5LqL5Lu26K6i6ZiFXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24uZm9yRWFjaChzdWIgPT4ge1xyXG4gICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLmVsLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2RkbUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGRtSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZG1IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsaWNrSGFuZGxlcihidG5JbmZvKSB7XHJcbiAgICAgICAgaWYgKCFidG5JbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGlja0l0ZW1zLm5leHQoYnRuSW5mbyk7XHJcblxyXG4gICAgfVxyXG4gICAgLy8g5pu05aSadGFi55qE5pi+56S66ZqQ6JePXHJcbiAgICBvcGVuQ2hhbmdlKGUpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaElucHV0VmlzaWJsZSA9IGU7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUYWJUZXh0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgLy8g5ZCv55So5LqG5pCc57Si77yM6ZyA6KaB5Yik5pat5LiL5ouJ6Z2i5p2/55qE5YC8XHJcbiAgICAgICAgLy8g5Zug5Li65LiL5ouJ6Z2i5p2/5Y+v6IO95a2Y5Zyo6YGu5oyh55qE6Zeu6aKYXHJcbiAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNXaWR0aCA9IHRoaXMuZGRtLnJlc2V0TWVudUVsV2lkdGhPcGVuKCkgKyAncHgnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zV2lkdGggPSAnYXV0byc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIC8vIOaQnOe0onRhYlxyXG4gICAgc2VhcmNoVGFiKGUpIHtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgIHRoaXMuc3RvcEJ1YmJsZShlKTtcclxuICAgIH1cclxuICAgIC8vIOmYu+atouWGkuazoVxyXG4gICAgc3RvcEJ1YmJsZShlKSB7XHJcbiAgICAgICAgaWYgKGUgJiYgZS5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRUb29sYmFyU3RhdGUoaWQ6IHN0cmluZywgc3RhdGU6IE9ic2VydmFibGU8YW55PiA9IHRoaXMuYnRuU3RhdGVzKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5waXBlKFxyXG4gICAgICAgICAgICAgICAgbWFwKChuOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobltpZF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYOacquaJvklE5Li677yaJHtpZH0g55u45YWz54q25oCB6K6+572u77yBYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5baWRdO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g55uR5ZCs5a2Q57uE5Lu255qE6ZqQ6JeP5pi+56S65bGe5oCnXHJcbiAgICBwcml2YXRlIF9saXN0ZW5TaG93Q2hhbmdlcygpIHtcclxuICAgICAgICAvLyDlpoLmnpzpmpDol4/nmoTnu4Tku7bmmK/mv4DmtLvnirbmgIHvvIzlhYjlsIblhbborr7nva7kuLrluLjop4RcclxuICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaXRlbS5zaG93U3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhY3RpdmVJZFRva2VuO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5fc2hvdyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gZmFsc2UgJiYgaXRlbS5pZCA9PT0gdGhpcy5hY3RpdmVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVJZFRva2VuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IGl0ZW0uX3Nob3cgPT09IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRhYklkID0gdGFicy5sZW5ndGggPyB0YWJzWzBdLmlkIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIC8vIOeEtuWQjuWwhuaYvuekuueKtuaAgeS4i+eahOesrOS4gOS4qnRhYua/gOa0u1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRUYWJJZCAmJiBhY3RpdmVJZFRva2VuID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFicy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gZGVmYXVsdFRhYklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gaXRlbS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFic1tpbmRleF0uX2FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRvb2xiYXJDb25mKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmAieS4rVRhYlxyXG4gICAgICogQHBhcmFtICB0YWJJZCB0YWLmoIfor4ZcclxuICAgICAqL1xyXG4gICAgc2VsZWN0VGFiKHRhYklkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFRhYiA9IHRoaXMuX2dldFRhYkJ5SWQodGFiSWQpO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdFRhYihzZWxlY3RlZFRhYi50YWIsIHNlbGVjdGVkVGFiLmluZGV4KTtcclxuICAgIH1cclxuICAgIF9jcFNlbGVjdFRhYkJ5SW5kZXgoZXY6IEV2ZW50LCBpZDogc3RyaW5nLCBkZG0gPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RUwgPSBldi50YXJnZXQgYXMgYW55O1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGFyZ2V0RUwuY2xhc3NOYW1lLmluZGV4T2YoJ3N0LWRyb3AtY2xvc2UnKSA+IC0xIHx8XHJcbiAgICAgICAgICAgIHRhcmdldEVMLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3N0LWRyb3AtY2xvc2UnKSA+IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIOmYu+atouWGkuazoeWSjOaNleiOt+S6i+S7tiDngrnlh7vliKDpmaTmoIforrAg5YiZ5omn6KGM5Yig6Zmk5qCH562+5pa55rOVICDogIzkuI3mmK/pgInkuK3moIfnrb5cclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VUYWIoaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOmYu+atouWGkuazoVxyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuXHJcbiAgICAgICAgaWYgKGRkbSkge1xyXG4gICAgICAgICAgICBkZG0uZHJvcGRvd24uY2xvc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCa6L+HdGFic+eahOe0ouW8lemAieaLqSB0YWJcclxuICAgICAqIEBwYXJhbSBpbmRleCB0YWJz57Si5byVXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFRhYkJ5SW5kZXgoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy50YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RUYWIgPSB0aGlzLnRhYnNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RUYWIoc2VsZWN0VGFiLCBpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyog6YCJ5LitdGFi5pe2ICDmmrTpnLLlh7rpgInkuK10YWLnmoRpZCDlkozlhbbkuYvlkI7nmoRpZCAqL1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0VGFiKHRhYiwgaW5kZXgpIHtcclxuICAgICAgICBpZiAodGFiICYmICF0YWIuZGlzYWJsZWQgJiYgdGhpcy5hY3RpdmVJZCAhPT0gdGFiLmlkKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYmVmb3JlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZVNlbGVjdCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YWJzQ2hhbmdlRXZlbnRQYXJhbSA9IHtcclxuICAgICAgICAgICAgICAgIHByZXZJZDogdGhpcy5hY3RpdmVJZCxcclxuICAgICAgICAgICAgICAgIG5leHRJZDogdGFiLmlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0KHRhYnNDaGFuZ2VFdmVudFBhcmFtKS5zdWJzY3JpYmUoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhYi5pZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyDpppblhYjkuI3mv4DmtLvmiYDmnInnmoR0YWLpobUgIOeEtuWQjua/gOa0u+W9k+WJjXRhYumhtVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBpbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFicy5mb3JFYWNoKChpdGVtOiBGYXJyaXNUYWJDb21wb25lbnQsIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXhdLl9hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRvb2xiYXJDb25mKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5rua5Yqo5Yiw5Y+v6KeB5Yy65Z+f5YaFXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFiQ2hhbmdlLmVtaXQodGFic0NoYW5nZUV2ZW50UGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9zZXRBY3RpdmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFicy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiBpdGVtLl9zaG93ID09PSB0cnVlKTtcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiID0gdGhpcy5fZ2V0VGFiQnlJZCh0aGlzLmFjdGl2ZUlkKS50YWI7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSBhY3RpdmVUYWIgPyBhY3RpdmVUYWIuaWQgOiB0aGlzLnRhYnMubGVuZ3RoID8gdGhpcy50YWJzWzBdLmlkIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vIOi/h+a7pOaOiXNob3c9ZmFsc2XvvIjpmpDol4/vvInnmoR0YWJcclxuICAgICAgICAgICAgaWYgKHRhYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IHRhYnMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhcmdldFRhYi5pZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0YWJzWzBdLmlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSB0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aXZlSWQg5pi+56S65p+Q5LiqdGFiXHJcbiAgICAgKi9cclxuICAgIHNob3dUYWIodGFiSWQ6IGFueSwgc2VsZWN0YWJsZSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnRhYnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFic1tpXS5pZCA9PT0gdGFiSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1tpXS5fc2hvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKHRhYklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFjdGl2ZUlkIOmakOiXj+afkOS4qnRhYlxyXG4gICAgICovXHJcbiAgICBoaWRlVGFiKGFjdGl2ZUlkOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBzaG93VGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLl9zaG93ID09PSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHNob3dUYWJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgaWYgKGxlbiA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXg6IG51bWJlcjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc2hvd1RhYnNbaV0uaWQgPT09IGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93VGFic1tpXS5fc2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxlbiAmJiBsZW4gPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKCcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW4gJiYgbGVuID49IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2hvd1RhYnNbbGVuIC0gMV0uaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKHNob3dUYWJzW2luZGV4ICsgMV0uaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg5qCH562+XHJcbiAgICAgKiBAcGFyYW0gY3VyVGFicyDmlbDnu4TmiJbogIXlr7nosaFcclxuICAgICAqIEBwYXJhbSBhY3RpdmVJZCDorr7nva5cclxuICAgICAqL1xyXG4gICAgYWRkVGFicyhjdXJUYWJzOiBhbnlbXSwgaW5kZXgsIHNldEFjdGl2ZUlkKSB7XHJcbiAgICAgICAgaWYgKGN1clRhYnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAwLCAuLi5jdXJUYWJzKTtcclxuICAgICAgICAgICAgLy8g5Y676YeNXHJcbiAgICAgICAgICAgIHRoaXMudGFicyA9IHRoaXMuX3VuaXF1ZSh0aGlzLnRhYnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2V0QWN0aXZlSWQgJiYgdGhpcy5hY3RpdmVJZCAhPT0gc2V0QWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyVGFiID0gdGhpcy5fZ2V0VGFiQnlJZChzZXRBY3RpdmVJZCk7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJUYWIuaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2V0QWN0aXZlSWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHNldEFjdGl2ZUlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhmaWx0ZXJUYWIuaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlVGl0bGVTdHlsZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDmoIfnrb7ml7YgIOWOu+mHjVxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfdW5pcXVlKG9iakFycmF5KSB7XHJcbiAgICAgICAgY29uc3QgaGFzaCA9IHt9O1xyXG4gICAgICAgIG9iakFycmF5ID0gb2JqQXJyYXkucmVkdWNlKGZ1bmN0aW9uIChpdGVtLCBuZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChoYXNoW25leHQuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICBoYXNoW25leHQuaWRdID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoYXNoW25leHQuaWRdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSwgW10pO1xyXG4gICAgICAgIHJldHVybiBvYmpBcnJheTtcclxuICAgIH1cclxuICAgIC8qIOmAmui/h3RhYuWIl+ihqOeahOW6j+WIl+WIoOmZpHRhYiAqL1xyXG4gICAgcmVtb3ZlVGFiQnlJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IGxlbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlbW92ZVRhYiA9IHRoaXMudGFic1tpbmRleF07XHJcbiAgICAgICAgcmVtb3ZlVGFiLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVJZCA9PT0gcmVtb3ZlVGFiLmlkKSB7XHJcbiAgICAgICAgICAgIC8vIOWPquacieS4gOS4quiAjOS4lOiiq+WIoOmZpFxyXG4gICAgICAgICAgICBpZiAobGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmiYDmnInmoIfnrb7lnYfliKDpmaQg5r+A5rS7aWTkuLrnqbpcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzliKDpmaTnmoTmmK/mnIDlkI7kuIDkuKrmoIfnrb4g6K6+572u5YW25YmN6Z2i55qE5aSE5LqO5r+A5rS754q25oCBXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy50YWJzW2xlbiAtIDFdLmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2luZGV4IC0gMV0uX2FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlhbbku5bmg4XlhrUgIOiuvue9ruWFtuWQjumdoueahOWkhOS6jua/gOa0u+eKtuaAgVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRoaXMudGFic1tpbmRleCArIDFdLmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2luZGV4ICsgMV0uX2FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFiSW50b1ZpZXcoaW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFicy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhYlJlbW92ZS5lbWl0KHtcclxuICAgICAgICAgICAgcmVtb3ZlSW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICByZW1vdmVJZDogcmVtb3ZlVGFiLmlkLFxyXG4gICAgICAgICAgICBhY3RpdmVJZDogdGhpcy5hY3RpdmVJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhbPpl63moIfnrb4gIOi3n+WIoOmZpOagh+etvuS4jeWQjFxyXG4gICAgICogQHBhcmFtIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBjbG9zZVRhYihhY3RpdmVJZCkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMudGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0YWIgPSB0aGlzLnRhYnNbaV07XHJcbiAgICAgICAgICAgIGlmICh0YWIuaWQgPT09IGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRhYkJ5SW5kZXgoaSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMllxyXG4gICAgICovXHJcbiAgICBsb2FkKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYnNbaV0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1tpXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaIquWPlnRhYuS4reeahHRpdGxlLOi2hei/hzbkvY3vvIzmiKrmlq1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfdHJ1bmNhdGVUaXRsZSgpIHtcclxuICAgICAgICB0aGlzLnRhYnMgPSB0aGlzLnRhYnMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnRpdGxlID0gaXRlbS50aXRsZS5sZW5ndGggPiA2ID8gaXRlbS50aXRsZS5zdWJzdHIoMCwgNikgOiBpdGVtLnRpdGxlO1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabv+aNonRhYuS4reeahHRpdGxl6aKc6ImyXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NoYW5nZVRpdGxlU3R5bGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1RpdGxlV2lkdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCAkdGV4dEVscyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdC10YWItdGV4dCcpO1xyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgJHRleHRFbHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudEVsID0gJHRleHRFbHNba10ucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgaWYgKCR0ZXh0RWxzW2tdLnNjcm9sbFdpZHRoID4gcGFyZW50RWxbJ29mZnNldFdpZHRoJ10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1trXS50aXRsZU92ZXJmbG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1trXS50aXRsZU92ZXJmbG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yib5bu65rWBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NyZWF0ZVN0cmVhbSgpIHtcclxuICAgICAgICBbdGhpcy5yaWdodE5hdiwgdGhpcy5sZWZ0TmF2XS5mb3JFYWNoKChjdXJCdG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGluZGV4ID8gLTEgOiAxO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW91c2Vkb3duJCA9IGZyb21FdmVudChjdXJCdG4ubmF0aXZlRWxlbWVudCwgJ21vdXNlZG93bicpO1xyXG4gICAgICAgICAgICBjb25zdCBtb3VzZXVwJCA9IGZyb21FdmVudChjdXJCdG4ubmF0aXZlRWxlbWVudCwgJ21vdXNldXAnKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3TW91c2VEb3duJCA9IG1vdXNlZG93biQucGlwZShcclxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcCgoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsJCA9IG9mKDApLnBpcGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmNhdChpbnRlcnZhbCg4MCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlVW50aWwobW91c2V1cCQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuKChzdW06IG51bWJlciwgbnVtOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyB0aGlzLnNjcm9sbFN0ZXAgKiBkaXJlY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlV2hpbGUobnVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVSaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5kaXNhYmxlTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcCh2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2LCBkaXJlY3Rpb246IGRpcmVjdGlvbiB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsJDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlcHJlc3NTdWIgPSBuZXdNb3VzZURvd24kLnN1YnNjcmliZShjaGFuZ2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVGFiKGNoYW5nZS52YWx1ZSwgY2hhbmdlLmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi5wdXNoKG1vdXNlcHJlc3NTdWIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy5hdXRvUmVzaXplKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIOiuoumYhXdpbmRvd3MgcmVzaXpl5LqL5Lu2XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc3Vic2NyaXB0aW9uLnB1c2goXHJcbiAgICAgICAgLy8gICAgICAgICBmcm9tRXZlbnQod2luZG93LCAncmVzaXplJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAucGlwZSh0aHJvdHRsZVRpbWUoODApKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5zdWJzY3JpYmUoZSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmjInnhafmlrnlkJHvvIzmu5rliqjliLDmjIflrprkvY3nva5cclxuICAgICAqIEBwYXJhbSBkaXN0X3Njcm9sbCDnm67moIfmu5rliqhcclxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24g5pa55ZCRXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3Njcm9sbFRhYihtb3ZlLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBkaXN0X3Njcm9sbGxlZnQgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ICsgbW92ZTtcclxuICAgICAgICBjb25zdCBtYXhfc2Nyb2xsX2xlZnQgPVxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOagh+etvumhteW3puS+p+enu+WKqFxyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIGRpc3Rfc2Nyb2xsbGVmdCxcclxuICAgICAgICAgICAgICAgIG1heF9zY3JvbGxfbGVmdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAvLyDmoIfnrb7pobXlj7Pkvqfnp7vliqhcclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA9IE1hdGgubWF4KGRpc3Rfc2Nyb2xsbGVmdCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlU2lkZXMoKTtcclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5oyH5a6a5b2T5YmN5ruR5Yqo5Yiw5Y+v6KeG5Yy65Z+f4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU5pyq5rWL6K+VXHJcbiAgICAgKiBpbmRleFxyXG4gICAgICovXHJcbiAgICBzY3JvbGxUYWJJbnRvVmlldyhpbmRleCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwgfHwgdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gcGFyc2VJbnQoaW5kZXggKyAnJywgMTApO1xyXG4gICAgICAgIGxldCB0YWJUb1Njcm9sbDtcclxuXHJcbiAgICAgICAgLy8gZmlyc3Qgd2UgZmluZCB0aGUgdGFiIGVsZW1lbnQuXHJcbiAgICAgICAgaWYgKHRhYkluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsVGFicyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAoYWxsVGFicy5sZW5ndGggPiB0YWJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGFiVG9TY3JvbGwgPSBhbGxUYWJzW3RhYkluZGV4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCBzZWxlY3RlZCB0YWIgaW50byB2aWV3XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2xpLmFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlVGFiKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbCA9IGFjdGl2ZVRhYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRhYlRvU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYl9sZWZ0ID0gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgJycsXHJcbiAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCB0YWJzX2xlZnQgPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAnJyxcclxuICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgdGFiX2xlZnQgK1xyXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQodGFiVG9TY3JvbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAnJywgMTApIC1cclxuICAgICAgICAgICAgICAgIHRhYnNfbGVmdDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHRhYl9sZWZ0IC0gdGFic19sZWZ0IC0gMTA7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0UG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIobGVmdFBvc2l0aW9uLCAtMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRQb3NpdGlvbiA+IHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIoXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRQb3NpdGlvbiAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoICsgMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIh+aNonRhYuWQju+8jOmHjeaWsOiOt+WPlumcgOimgeivpXRhYuS4i+W3peWFt+adoeaMiemSrueahOmFjee9ruS/oeaBr+S7peWPiumakOiXj+abtOWkmuaMiemSrlxyXG4gICAgICog5Lul5Y+K6I635Y+W6K+ldGFi5LiL55qE5aS06YOo5omp5bGV5Yy65Z+fXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VG9vbGJhckNvbmYoKSB7XHJcbiAgICAgICAgY29uc3QgdGFiQ29uZmlnID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX2FjdGl2ZSA9PT0gdHJ1ZTtcclxuICAgICAgICB9KVswXTtcclxuICAgICAgICBpZiAoIXRhYkNvbmZpZyB8fCAhdGFiQ29uZmlnLmhhc093blByb3BlcnR5KCd0b29sYmFyJykpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZiA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZiA9IHRhYkNvbmZpZy50b29sYmFyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDojrflj5bor6V0YWLkuIvnmoTlpLTpg6jmianlsZXljLrln59cclxuICAgICAgICBpZiAoIXRhYkNvbmZpZyB8fCAhdGFiQ29uZmlnLmhhc093blByb3BlcnR5KCdmYXJyaXNUYWJzRXh0ZW5kRGlyZWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJFeHRlbmRDb25mID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckV4dGVuZENvbmYgPSB0YWJDb25maWcuZmFycmlzVGFic0V4dGVuZERpcmVjdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6ZqQ6JeP5pu05aSa5oyJ6ZKuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5bel5YW35qCP5piv5ZCm5pi+56S65LiL5ouJ5oyJ6ZKuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpIHtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWw6IGFueTtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWxXaWR0aCA9IDA7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIgfHwgIXRoaXMudG9vbGJhckNvbmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b29sYmFyQ29udGFpbmVyID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQgOiB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGxldCBkaXZFbCA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJzLWlubGluZS1mbGV4Jyk7XHJcbiAgICAgICAgaWYgKCFkaXZFbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckV4dGVuZENvbmYpIHtcclxuICAgICAgICAgICAgaGVhZGVyRXh0ZW5kRWwgPSB0b29sYmFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdGFicy1oZWFkZXItZXh0ZW5kJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoaGVhZGVyRXh0ZW5kRWwsICdvdmVyZmxvdycpO1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbFdpZHRoID0gaGVhZGVyRXh0ZW5kRWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaMiemSruWcqOWGheWuueWMulxyXG4gICAgICAgIGlmICghdGhpcy5oYXNJbkhlYWRDbCgpICYmIHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCA+IHRvb2xiYXJDb250YWluZXIub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzSW5IZWFkQ2woKSAmJiB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggPiB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gaGVhZGVyRXh0ZW5kRWxXaWR0aCkge1xyXG4gICAgICAgICAgICAvLyDmjInpkq7lnKjlpLTpg6jlt6XlhbfmoI9cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5pi+56S655qE5oyJ6ZKu5Liq5pWw5Y+K5pu05aSa5Lit5pi+56S655qE5oyJ6ZKu5Liq5pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCkge1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbDogYW55O1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbFdpZHRoID0gMDtcclxuICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lciB8fCAhdGhpcy50b29sYmFyQ29uZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSB0aGlzLmhhc0luSGVhZENsKCkgPyB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudCA6IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGRpdkVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaW5saW5lLWZsZXgnKTtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJFbCA9IHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJCdG5zID0gYnRuUGxhY2VIb2xkZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICBpZiAoIWRpdkVsIHx8IGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOatpOWkhOacieS4qkJ1Z++8jOWmguaenOaYr2luQ29udGVudOi/mOaYr2hlYWRlckV4dGVuZENvbmbnmoTmg4XlhrXkuIvvvIzmjInpkq7nmoTkvY3nva7lvaLlpoJpbkhlYWRcclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFeHRlbmRDb25mKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckV4dGVuZEVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaGVhZGVyLWV4dGVuZCcpO1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbFdpZHRoID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gaGVhZGVyRXh0ZW5kRWwub2Zmc2V0V2lkdGggOiAwO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbW9yZUJ1dHRvbiA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1vcmVidG4nKTtcclxuICAgICAgICAvLyDorqHnrpfmjInpkq7nmoTlrr3luqYgICAgICBcclxuICAgICAgICBsZXQgYmFzaWNTdGFydCA9IHBhcnNlSW50KGJ0blBsYWNlSG9sZGVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCk7XHJcbiAgICAgICAgbGV0IGJhc2ljV2lkdGggPSB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gbW9yZUJ1dHRvbi5vZmZzZXRXaWR0aCAtIDEyIC0gaGVhZGVyRXh0ZW5kRWxXaWR0aDtcclxuICAgICAgICBsZXQgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICBsZXQgayA9IDBcclxuICAgICAgICAvLyDlj6rmnInkuIDkuKrmjInpkq5cclxuICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChidG5QbGFjZUhvbGRlckVsLm9mZnNldFdpZHRoID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBrID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoayA9IDE7IGsgPD0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5YaF5a656LaF5Ye6LOiAg+iZkeWIsOaMiemSruS5i+mXtOeahOmXtOi3nVxyXG4gICAgICAgICAgICAgICAgaWYgKGsgPT0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChidG5QbGFjZUhvbGRlckJ0bnNba10uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkgLSBiYXNpY1N0YXJ0ID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0b29sYmFyRHJvcGRvd25IaWRkZW47XHJcbiAgICAgICAgbGV0IHNob3dCdG5zID0gZGl2RWwucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1tpXSwgJ2Rpc3BsYXknLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IG0gPSBrOyBtIDwgc2hvd0J0bnMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1ttXSwgJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50b29sYmFyQ29uZi5jb250ZW50cyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzID0gdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPj0gaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjeaWsOiuoeeul+aYr+WQpuaYvuekuuaMiemSruWSjOS4i+aLiVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZUNhbGN1bGF0ZUFsbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3RhYkNvbnRhaW5lckVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0YWJQYXJlbnRXaWR0aCA9IHRoaXMudGFiUGFyZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1yaWdodFwiKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRsID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1sZWZ0XCIpKTtcclxuICAgICAgICAgICAgdGFiUGFyZW50V2lkdGggKz0gdHIgKyB0bDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZUJ1dHRvbnMgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCA8PSB0YWJQYXJlbnRXaWR0aDtcclxuXHJcbiAgICAgICAgdGhpcy5oaWRlRHJvcERvd24gPSB0aGlzLnNob3dEcm9wRG93biA/IHRoaXMuaGlkZUJ1dHRvbnMgOiB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGlkZURyb3BEb3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duVGFicyA9IFtdLmNvbmNhdCh0aGlzLnRhYnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaFRhYlRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25UYWJzID0gdGhpcy5kcm9wZG93blRhYnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWyd0aXRsZSddLmluZGV4T2YodGhpcy5zZWFyY2hUYWJUZXh0KSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZVNpZGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDph43mlrDorqHnrpflt6blj7PnmoTmj5DnpLrmloflrZdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcmVDYWx1bGF0ZVRvb2x0aXBzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwgfHwgdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRfcmlnaHRfdG9vbHRpcHMgPSBbXTtcclxuICAgICAgICBjb25zdCB0X2xlZnRfdG9vbHRpcHMgPSBbXTtcclxuICAgICAgICBjb25zdCBhbGxUYWJzID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLm5hdi1pdGVtJyk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gYWxsVGFicy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgaGlkZGVuVGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLl9zaG93ICE9PSB0cnVlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29uc3QgaGlkZGVuVGFic0xlbmd0aCA9IGhpZGRlblRhYnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGVmdFBvc2l0aW9uID1cclxuICAgICAgICAgICAgICAgIGFsbFRhYnNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gICAgICAgICAgICBjb25zdCByaWdodFBvc2l0aW9uID1cclxuICAgICAgICAgICAgICAgIGFsbFRhYnNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyBsZWZ0UG9zaXRpb247XHJcbiAgICAgICAgICAgIGlmIChyaWdodFBvc2l0aW9uID4gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRfcmlnaHRfdG9vbHRpcHMucHVzaCh0aGlzLnRhYnNbaV0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRfbGVmdF90b29sdGlwcy5wdXNoKHRoaXMudGFic1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubGVmdFRvb2x0aXBUYWJzID0gW11cclxuICAgICAgICAgICAgLmNvbmNhdCh0X2xlZnRfdG9vbHRpcHMpXHJcbiAgICAgICAgICAgIC5zbGljZShNYXRoLm1heCgwLCB0X2xlZnRfdG9vbHRpcHMubGVuZ3RoIC0gdGhpcy5tYXhUb29sdGlwTGVuKSk7XHJcbiAgICAgICAgdGhpcy5yaWdodFRvb2x0aXBUYWJzID0gW11cclxuICAgICAgICAgICAgLmNvbmNhdCh0X3JpZ2h0X3Rvb2x0aXBzKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgTWF0aC5taW4odGhpcy5tYXhUb29sdGlwTGVuLCB0X3JpZ2h0X3Rvb2x0aXBzLmxlbmd0aCkpO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZVJUb29sdGlwID0gdGhpcy5yaWdodFRvb2x0aXBUYWJzLmxlbmd0aCA8IDE7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlTFRvb2x0aXAgPSB0aGlzLmxlZnRUb29sdGlwVGFicy5sZW5ndGggLSBoaWRkZW5UYWJzTGVuZ3RoIDwgMTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YeN5paw6K6h566X5bem5Y+z566t5aS054q25oCBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlQ2FsY3VsYXRlU2lkZXMoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlUmlnaHQgPVxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ID49XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbFdpZHRoIC0gdGhpcy5fdGFiQ29udGFpbmVyRWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlTGVmdCA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPD0gMDtcclxuICAgICAgICB0aGlzLl9yZUNhbHVsYXRlVG9vbHRpcHMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCa6L+HaWTlr7vmib5UYWJcclxuICAgICAqIEBwYXJhbSBpZCBJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9nZXRUYWJCeUlkKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBpbmRleFdpZHRoSWQgPSBbXTtcclxuICAgICAgICBjb25zdCB0YWJzV2l0aElkOiBGYXJyaXNUYWJDb21wb25lbnRbXSA9IHRoaXMudGFicy5maWx0ZXIoXHJcbiAgICAgICAgICAgICh0YWIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFiLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4V2lkdGhJZC5wdXNoKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0YWI6IHRhYnNXaXRoSWQubGVuZ3RoID8gdGFic1dpdGhJZFswXSA6IG51bGwsXHJcbiAgICAgICAgICAgIGluZGV4OiBpbmRleFdpZHRoSWQubGVuZ3RoID8gaW5kZXhXaWR0aElkWzBdIDogLTFcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyrlrr3pq5jnsbvlnovmmK8gc3RyaW5n5oiW6ICFbnVtYmVyIOino+aekOWuvemrmCAg5bC65a+4ICovXHJcbiAgICByZXNvbHZlU2l6ZShzaXplKSB7XHJcbiAgICAgICAgY29uc3QgcmVnZXggPSAvcHh8ZW18cmVtfHB0fCUvO1xyXG4gICAgICAgIC8vIOivtOaYjuaYr+Wtl+espuS4slxyXG4gICAgICAgIHJldHVybiByZWdleC50ZXN0KHNpemUpXHJcbiAgICAgICAgICAgID8gYCR7cGFyc2VJbnQoc2l6ZSwgMTApfSR7c2l6ZS5tYXRjaChyZWdleClbMF19YFxyXG4gICAgICAgICAgICA6IGAke3NpemV9cHhgO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAg5riF56m6dGFiXHJcbiAgICAgICAqL1xyXG4gICAgLy8gcmVtb3ZlQWxsVGFiKCkge1xyXG4gICAgLy8gICAgIHRoaXMudGFicy5zcGxpY2UoMCwgdGhpcy50YWJzLmxlbmd0aCk7XHJcbiAgICAvLyB9XHJcbiAgICBoYXNJbkhlYWRDbCgpIHtcclxuICAgICAgICBpZiAodGhpcy50b29sYmFyQ29uZiAmJiB0aGlzLnRvb2xiYXJDb25mLmhhc093blByb3BlcnR5KCdwb3NpdGlvbicpICYmIHRoaXMudG9vbGJhckNvbmYuaGFzT3duUHJvcGVydHkoJ2NvbnRlbnRzJykgJiYgdGhpcy50b29sYmFyQ29uZi5wb3NpdGlvbiA9PT0gJ2luSGVhZCcgJiYgdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFeHRlbmRDb25mICYmICEodGhpcy50b29sYmFyQ29uZiAmJiB0aGlzLnRvb2xiYXJDb25mLnBvc2l0aW9uID09PSAnaW5Db250ZW50JyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iXX0=