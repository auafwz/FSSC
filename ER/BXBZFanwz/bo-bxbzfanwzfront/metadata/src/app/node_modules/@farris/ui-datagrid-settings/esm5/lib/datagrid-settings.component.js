/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewEncapsulation, ViewChild, ElementRef, Input, EventEmitter, ChangeDetectorRef, Injector, Output } from '@angular/core';
import { LocaleService } from '@farris/ui-locale';
import { MessagerService } from '@farris/ui-messager';
var DatagridSettingsComponent = /** @class */ (function () {
    function DatagridSettingsComponent(cd, inject) {
        this.cd = cd;
        this.inject = inject;
        this.activeTabIndex = 1;
        /**
         * 排序列数据
         */
        this.sortTreeData = [];
        this.sortNames = [];
        this.sortInfo = {};
        /**
         * 显示列数据
         */
        this.viewTreeData = [];
        this.viewColumns = [];
        this.columnFormat = [];
        this.groupFields = [];
        this.canSetColumnSort = true;
        this.canSetColumnVisible = true;
        this.enableReset = false;
        this.cancelHandle = new EventEmitter();
        this.submitHandle = new EventEmitter();
        this.reset = new EventEmitter();
        this.concise = new EventEmitter();
        this.searchItems = [];
        this.alignItems = [];
        this.summaryItems = [];
        this.summaryItems2 = [];
        this.messager = this.inject.get(MessagerService, null);
        this.localeSer = this.inject.get(LocaleService);
        this.searchItems = [
            { value: 'all', title: this.localeSer.getValue('datagrid.settings.allColumns') },
            { value: 'visible', title: this.localeSer.getValue('datagrid.settings.visibleColumns') },
            { value: 'hidden', title: this.localeSer.getValue('datagrid.settings.hiddenColumns') }
        ];
        this.alignItems = [
            { value: 'left', title: this.localeSer.getValue('datagrid.settings.alignLeft') },
            { value: 'center', title: this.localeSer.getValue('datagrid.settings.alignCenter') },
            { value: 'right', title: this.localeSer.getValue('datagrid.settings.alignRight') },
        ];
        this.summaryItems = [
            { value: -1, title: this.localeSer.getValue('datagrid.settings.summaryNone') },
            { value: 2, title: this.localeSer.getValue('datagrid.settings.summarySum') },
            { value: 0, title: this.localeSer.getValue('datagrid.settings.summaryMax') },
            { value: 1, title: this.localeSer.getValue('datagrid.settings.summaryMin') },
            { value: 3, title: this.localeSer.getValue('datagrid.settings.summaryAverage') },
            { value: 4, title: this.localeSer.getValue('datagrid.settings.summarCount') },
        ];
        this.summaryItems2 = [
            { value: -1, title: this.localeSer.getValue('datagrid.settings.summaryNone') },
            { value: 4, title: this.localeSer.getValue('datagrid.settings.summarCount') },
        ];
    }
    /**
     * @return {?}
     */
    DatagridSettingsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.sortNames = this.gridInstance.sortName ? this.gridInstance.sortName.split(',') : [];
        this.viewColumns = this.getViewColumns();
        this.sortInfo = this.gridInstance['__sortInfo'] || {};
        this.columnFormat = tslib_1.__spread(this.columns[0]);
        this.groupFields = this.gridInstance.groupField ? this.gridInstance.groupField.split(',') : [];
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    DatagridSettingsComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.columns && !changes.columns.isFirstChange()) {
            // console.log(this.columns);
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DatagridSettingsComponent.prototype.close = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        if (this.modalRef) {
            this.modalRef.close();
        }
    };
    /**
     * @param {?} idx
     * @return {?}
     */
    DatagridSettingsComponent.prototype.changeTabs = /**
     * @param {?} idx
     * @return {?}
     */
    function (idx) {
        this.activeTabIndex = idx;
    };
    /**
     * @param {?} sortInfo
     * @return {?}
     */
    DatagridSettingsComponent.prototype.onSortInfoChange = /**
     * @param {?} sortInfo
     * @return {?}
     */
    function (sortInfo) {
        this.sortInfo = sortInfo;
    };
    /**
     * @private
     * @return {?}
     */
    DatagridSettingsComponent.prototype.getViewColumns = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 多表头
        /** @type {?} */
        var visibleCls = [];
        if (this.columns.length > 1) {
            this.columns.forEach((/**
             * @param {?} cols
             * @return {?}
             */
            function (cols) {
                visibleCls = visibleCls.concat(_this._getViewColumns(cols));
            }));
        }
        else {
            visibleCls = this.columns[0].filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return (n.visible || n.visible === undefined); }));
        }
        return visibleCls.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.field; }));
    };
    /**
     * @private
     * @param {?} cols
     * @return {?}
     */
    DatagridSettingsComponent.prototype._getViewColumns = /**
     * @private
     * @param {?} cols
     * @return {?}
     */
    function (cols) {
        return cols.filter((/**
         * @param {?} c
         * @return {?}
         */
        function (c) { return !c.colspan && (c.visible || c.visible === undefined); }));
    };
    /**
     * @param {?} colFormatData
     * @return {?}
     */
    DatagridSettingsComponent.prototype.onColumnFormatChange = /**
     * @param {?} colFormatData
     * @return {?}
     */
    function (colFormatData) {
        this.columnFormat = colFormatData;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DatagridSettingsComponent.prototype.onSubmitClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.submitHandle.emit($event);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DatagridSettingsComponent.prototype.onCancelClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.cancelHandle.emit($event);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DatagridSettingsComponent.prototype.onSettingReset = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        // this.reset.emit($event);
        /** @type {?} */
        var restorDefaultText = this.localeSer.getValue('datagrid.settings.restoreDefaultSettingsText') || '确认要恢复默认设置吗？';
        this.messager.confirm(restorDefaultText).subscribe((/**
         * @param {?} t
         * @return {?}
         */
        function (t) {
            if (t) {
                _this.reset2Default();
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    DatagridSettingsComponent.prototype.reset2Default = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var options = this.gridInstance.dfs['_state'].initialOptions;
        if (options.columnFields && options.columnFields.length) {
            /** @type {?} */
            var newColumns_1 = [];
            options.columnFields.forEach((/**
             * @param {?} c
             * @return {?}
             */
            function (c) {
                if (c.field !== '_datagrid-setting-control_') {
                    /** @type {?} */
                    var col = _this.gridInstance.columns[0].find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.field === c.field; }));
                    if (col) {
                        col.visible = c.visible;
                        col.halign = c.halign;
                        col.align = c.align;
                        col.width = c.width;
                        col.footer = tslib_1.__assign({}, c.footer || {});
                        col.groupFooter = tslib_1.__assign({}, c.groupFooter || {});
                        newColumns_1.push(col);
                    }
                }
            }));
            this.columns = [newColumns_1];
        }
        this.viewColumns = this.getViewColumns();
        if (options.sort) {
            /** @type {?} */
            var sortOrders = options.sort.sortOrder ? options.sort.sortOrder.split(',') : [];
            this.sortNames = options.sort.sortName ? options.sort.sortName.split(',') : [];
            this.sortInfo = { sortName: this.sortNames, sortOrder: sortOrders };
        }
        else {
            this.sortNames = [];
            this.sortInfo = {};
        }
        this.columnFormat = tslib_1.__spread(this.columns[0]);
        this.groupFields = options.groupField ? options.groupField.split(',') : [];
    };
    /** 显示简洁模式窗口 */
    /**
     * 显示简洁模式窗口
     * @param {?} $event
     * @return {?}
     */
    DatagridSettingsComponent.prototype.showConcise = /**
     * 显示简洁模式窗口
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if ($event) {
            $event.stopPropagation();
        }
        this.concise.emit();
    };
    DatagridSettingsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'datagrid-settings',
                    template: "<div class=\"f-datagrid-settings d-flex flex-column\" style=\"height: 100%;\">\r\n\r\n    <div class=\"d-flex justify-content-between header\" #header>\r\n        <div class=\"title\">{{'datagrid.settings.title' | locale}}</div>\r\n\r\n        <div style=\"width: 100%;\" class=\"tabs\">\r\n            <div class=\"d-flex justify-content-center\">\r\n                <div class=\"d-flex tabs-labels\">\r\n                    <div class=\"navitem\" [class.active]=\"activeTabIndex === 1\" (click)=\"changeTabs(1)\"\r\n                        style=\"border: 0;\">\r\n                        <span style=\"padding: 0 14px;display: block;\">\r\n                            {{'datagrid.settings.visible' | locale}}\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"navitem\" *ngIf=\"canSetColumnSort\"\r\n                        [class.active]=\"activeTabIndex === 2 && canSetColumnSort\" (click)=\"changeTabs(2)\"\r\n                        style=\"border: 0;\">\r\n                        <span style=\"padding: 0 14px;display: block;\">\r\n                            {{'datagrid.settings.sortting' | locale}}\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"navitem\" [class.active]=\"activeTabIndex === 3\" *ngIf=\"gridInstance?.groupRows\"\r\n                        (click)=\"changeTabs(3)\" style=\"border: 0;\">\r\n                        <span style=\"padding: 0 14px; display: block;\">\r\n                            {{'datagrid.settings.groupping' | locale}}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"close\">\r\n            <span class=\"f-icon modal_close\" (click)=\"close($event)\"></span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"f-utils-fill tabs-container\" [ngSwitch]=\"activeTabIndex\" >\r\n        <ng-container *ngSwitchCase=\"1\">\r\n            <column-format-setting [(fields)]=\"viewColumns\" [columns]=\"columns\"\r\n                (formatChange)=\"onColumnFormatChange($event)\"></column-format-setting>\r\n        </ng-container>\r\n        <ng-container *ngSwitchCase=\"2\">\r\n            <sort-setting [treeData]=\"sortTreeData\" [selectedIds]=\"sortNames\"\r\n                (sortInfoChange)=\"onSortInfoChange($event)\"></sort-setting>\r\n        </ng-container>\r\n\r\n        <ng-container *ngSwitchCase=\"3\">\r\n            <column-group-setting [(groupFields)]=\"groupFields\" [fields]=\"viewColumns\" [columns]=\"columns\"\r\n                [(formatColumns)]=\"columnFormat\"></column-group-setting>\r\n        </ng-container>\r\n    </div>\r\n\r\n    <div class=\"buttons\">\r\n        <button class=\"btn btn-link\" (click)=\"showConcise($event)\" *ngIf=\"gridInstance.enableSimpleMode\"\r\n            style=\"width: 66px;height: 32px; float: left;\">{{ 'datagrid.settings.conciseMode' | locale: '\u7B80\u6D01\u6A21\u5F0F' }}</button>\r\n        <button class=\"btn btn-link reset\" (click)=\"onSettingReset($event)\"\r\n            *ngIf=\"enableReset\">{{ 'datagrid.settings.reset' | locale: '\u6062\u590D\u9ED8\u8BA4' }}</button>\r\n        <button class=\"btn btn-secondary cancel\"\r\n            (click)=\"onCancelClick($event)\">{{'datagrid.settings.cancel' | locale}}</button>\r\n        <button class=\"btn btn-primary ok\"\r\n            (click)=\"onSubmitClick($event)\">{{'datagrid.settings.ok' | locale}}</button>\r\n    </div>\r\n\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: ["\n\n        .f-datagrid-settings .header {\n            position:relative;width:100%; height: 56px;padding: 0 24px;border:0px\n        }\n\n        .f-datagrid-settings .header .title {\n            display: block; white-space: nowrap; font-size: 17px; line-height: 56px;\n        }\n        .f-datagrid-settings .header .tabs {\n            height: 32px;\n            top: 12px; font-size: 14px;\n            position: relative;\n            line-height: 32px;\n        }\n        .f-datagrid-settings .header .tabs .tabs-labels {\n            background: #EFF5FF;border-radius: 17px;color:#6080AD\n        }\n\n        .f-datagrid-settings .header .tabs .tabs-labels .navitem.active {\n            line-height: 28px;\n            margin: 2px;\n            height: 28px;\n            background: rgb(246 250 255);\n            border-radius: 15px;\n            box-shadow: 0 4px 18px 0 rgb(2 75 193 / 20%)\n        }\n        .f-datagrid-settings .header .close {\n            line-height: 56px;padding: 0;width: 20px\n        }\n        .f-datagrid-settings .tabs-container {\n            height: 100%;overflow: hidden; position: relative; margin: 0 24px; border: 1px solid #DEE1EA; border-radius: 8px;\n        }\n        .f-datagrid-settings .buttons\n        {\n            height: 66px;text-align: right;padding: 14px 24px 20px 24px;\n        }\n\n        .f-datagrid-settings .buttons button {\n            width: 66px;height: 32px;\n        }\n        .f-datagrid-settings .buttons .cancel {\n            margin-left: 12px;margin-right: 8px;\n        }\n        .f-datagrid-settings .buttons .ok {\n            width: 100px;\n        }\n\n        .f-datagrid-settings .dg-column-format-setting>div{\n            width: 360px; min-width:260px;overflow: hidden;background:#ffffff;padding: 10px 5px 10px 8px;border-right: 1px solid #DEE1EA\n        }\n\n        .f-datagrid-settings .dg-column-format-setting .checkbox, .format-setting-column .checkbox{\n            margin-right: 5px; font-size: 14px;color: #0089FF;\n        }\n\n        .f-datagrid-settings  .column-group-setting .title{\n            height: 36px; line-height: 36px; color: #59a1ff\n        }\n\n        .f-datagrid-settings  .column-group-setting .all-fields {\n            background-color:#fff;padding-top: 0px!important;\n        }\n\n        .f-datagrid-settings  .column-group-setting .group-sum-fields {\n            height: 36px; line-height: 36px; border-top: 1px solid #e4e7ef; color: #59a1ff\n        }\n\n\n        .smooth-dnd-ghost.format-setting-column {\n            border: 1px solid #2a87ff;\n            z-index: 999999999 !important;\n            background-color: #e7f1ff;;\n            padding: 4px 8px;\n            color: rgb(0 0 0);\n        }\n\n        .smooth-dnd-ghost.format-setting-column .field-drag-handle {\n            float: right;\n        }\n\n        .dg-column-format-setting  .smooth-dnd-drop-preview-constant-class {\n            background-color: #dee1ea;\n        }\n        .dg-column-format-setting .format-setting-column {\n            background: #fafbfd;\n            padding: 4px 8px;\n            margin-bottom: 5px;\n            border: 1px solid #f2f4f8;\n            border-radius: 5px;\n        }\n        .dg-column-format-setting .format-setting-column.active {\n            color: rgb(0 0 0);\n            border: 1px solid #2a87ff;\n            background: #e7f1ff;\n            border-top: 1px solid #2a87ff!important;\n            border-bottom: 1px solid #2a87ff!important;\n        }\n\n        .dg-column-format-setting .format-setting-column .field-drag-handle{\n            float: right;\n            cursor: grab;\n        }\n\n        .dg-column-format-setting .format-setting-column .field-drag-handle:active{\n            cursor: grabbing;\n        }\n\n        "]
                }] }
    ];
    /** @nocollapse */
    DatagridSettingsComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: Injector }
    ]; };
    DatagridSettingsComponent.propDecorators = {
        enableReset: [{ type: Input }],
        columns: [{ type: Input }],
        cancelHandle: [{ type: Output }],
        submitHandle: [{ type: Output }],
        reset: [{ type: Output }],
        concise: [{ type: Output }],
        header: [{ type: ViewChild, args: ['header',] }]
    };
    return DatagridSettingsComponent;
}());
export { DatagridSettingsComponent };
if (false) {
    /** @type {?} */
    DatagridSettingsComponent.prototype.modalRef;
    /** @type {?} */
    DatagridSettingsComponent.prototype.gridInstance;
    /** @type {?} */
    DatagridSettingsComponent.prototype.activeTabIndex;
    /**
     * 排序列数据
     * @type {?}
     */
    DatagridSettingsComponent.prototype.sortTreeData;
    /** @type {?} */
    DatagridSettingsComponent.prototype.sortNames;
    /** @type {?} */
    DatagridSettingsComponent.prototype.sortInfo;
    /**
     * 显示列数据
     * @type {?}
     */
    DatagridSettingsComponent.prototype.viewTreeData;
    /** @type {?} */
    DatagridSettingsComponent.prototype.viewColumns;
    /** @type {?} */
    DatagridSettingsComponent.prototype.columnFormat;
    /** @type {?} */
    DatagridSettingsComponent.prototype.groupFields;
    /** @type {?} */
    DatagridSettingsComponent.prototype.canSetColumnSort;
    /** @type {?} */
    DatagridSettingsComponent.prototype.canSetColumnVisible;
    /** @type {?} */
    DatagridSettingsComponent.prototype.enableReset;
    /** @type {?} */
    DatagridSettingsComponent.prototype.columns;
    /** @type {?} */
    DatagridSettingsComponent.prototype.cancelHandle;
    /** @type {?} */
    DatagridSettingsComponent.prototype.submitHandle;
    /** @type {?} */
    DatagridSettingsComponent.prototype.reset;
    /** @type {?} */
    DatagridSettingsComponent.prototype.concise;
    /** @type {?} */
    DatagridSettingsComponent.prototype.header;
    /** @type {?} */
    DatagridSettingsComponent.prototype.searchItems;
    /** @type {?} */
    DatagridSettingsComponent.prototype.alignItems;
    /** @type {?} */
    DatagridSettingsComponent.prototype.summaryItems;
    /** @type {?} */
    DatagridSettingsComponent.prototype.summaryItems2;
    /**
     * @type {?}
     * @private
     */
    DatagridSettingsComponent.prototype.localeSer;
    /**
     * @type {?}
     * @private
     */
    DatagridSettingsComponent.prototype.messager;
    /**
     * @type {?}
     * @private
     */
    DatagridSettingsComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DatagridSettingsComponent.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWdyaWQtc2V0dGluZ3MuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRhZ3JpZC1zZXR0aW5ncy8iLCJzb3VyY2VzIjpbImxpYi9kYXRhZ3JpZC1zZXR0aW5ncy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFDdEMsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFDeEUsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RDtJQXdKSSxtQ0FBb0IsRUFBcUIsRUFBVSxNQUFnQjtRQUEvQyxPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVU7UUFqQ25FLG1CQUFjLEdBQUcsQ0FBQyxDQUFDOzs7O1FBR25CLGlCQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLGNBQVMsR0FBRyxFQUFFLENBQUM7UUFDZixhQUFRLEdBQUcsRUFBRSxDQUFDOzs7O1FBR2QsaUJBQVksR0FBRyxFQUFFLENBQUM7UUFDbEIsZ0JBQVcsR0FBRyxFQUFFLENBQUM7UUFFakIsaUJBQVksR0FBRyxFQUFFLENBQUM7UUFFbEIsZ0JBQVcsR0FBRyxFQUFFLENBQUM7UUFFakIscUJBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLHdCQUFtQixHQUFHLElBQUksQ0FBQztRQUNsQixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUduQixpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDbEMsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2xDLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQzNCLFlB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Ozs7O0lBQ2pDLDZDQUFrQzs7Ozs7SUFDdEIsdUNBQTZCOzs7OztJQUFFLDJDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIElucHV0LCBFdmVudEVtaXR0ZXIsXHJcbiAgICBPbkluaXQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdG9yLCBPdXRwdXRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQnNNb2RhbFJlZiB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBEYXRhQ29sdW1uLCBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQnO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdkYXRhZ3JpZC1zZXR0aW5ncycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGF0YWdyaWQtc2V0dGluZ3MuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVzOiBbXHJcbiAgICAgICAgYFxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncyAuaGVhZGVyIHtcclxuICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MTAwJTsgaGVpZ2h0OiA1NnB4O3BhZGRpbmc6IDAgMjRweDtib3JkZXI6MHB4XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncyAuaGVhZGVyIC50aXRsZSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyBmb250LXNpemU6IDE3cHg7IGxpbmUtaGVpZ2h0OiA1NnB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncyAuaGVhZGVyIC50YWJzIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiAzMnB4O1xyXG4gICAgICAgICAgICB0b3A6IDEycHg7IGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMzJweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3MgLmhlYWRlciAudGFicyAudGFicy1sYWJlbHMge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRUZGNUZGO2JvcmRlci1yYWRpdXM6IDE3cHg7Y29sb3I6IzYwODBBRFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3MgLmhlYWRlciAudGFicyAudGFicy1sYWJlbHMgLm5hdml0ZW0uYWN0aXZlIHtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDI4cHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMnB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDI4cHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYigyNDYgMjUwIDI1NSk7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE4cHggMCByZ2IoMiA3NSAxOTMgLyAyMCUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzIC5oZWFkZXIgLmNsb3NlIHtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDU2cHg7cGFkZGluZzogMDt3aWR0aDogMjBweFxyXG4gICAgICAgIH1cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncyAudGFicy1jb250YWluZXIge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7b3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyBtYXJnaW46IDAgMjRweDsgYm9yZGVyOiAxcHggc29saWQgI0RFRTFFQTsgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncyAuYnV0dG9uc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiA2NnB4O3RleHQtYWxpZ246IHJpZ2h0O3BhZGRpbmc6IDE0cHggMjRweCAyMHB4IDI0cHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncyAuYnV0dG9ucyBidXR0b24ge1xyXG4gICAgICAgICAgICB3aWR0aDogNjZweDtoZWlnaHQ6IDMycHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzIC5idXR0b25zIC5jYW5jZWwge1xyXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMTJweDttYXJnaW4tcmlnaHQ6IDhweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3MgLmJ1dHRvbnMgLm9rIHtcclxuICAgICAgICAgICAgd2lkdGg6IDEwMHB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3MgLmRnLWNvbHVtbi1mb3JtYXQtc2V0dGluZz5kaXZ7XHJcbiAgICAgICAgICAgIHdpZHRoOiAzNjBweDsgbWluLXdpZHRoOjI2MHB4O292ZXJmbG93OiBoaWRkZW47YmFja2dyb3VuZDojZmZmZmZmO3BhZGRpbmc6IDEwcHggNXB4IDEwcHggOHB4O2JvcmRlci1yaWdodDogMXB4IHNvbGlkICNERUUxRUFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzIC5kZy1jb2x1bW4tZm9ybWF0LXNldHRpbmcgLmNoZWNrYm94LCAuZm9ybWF0LXNldHRpbmctY29sdW1uIC5jaGVja2JveHtcclxuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7IGZvbnQtc2l6ZTogMTRweDtjb2xvcjogIzAwODlGRjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzICAuY29sdW1uLWdyb3VwLXNldHRpbmcgLnRpdGxle1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDM2cHg7IGxpbmUtaGVpZ2h0OiAzNnB4OyBjb2xvcjogIzU5YTFmZlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3MgIC5jb2x1bW4tZ3JvdXAtc2V0dGluZyAuYWxsLWZpZWxkcyB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6I2ZmZjtwYWRkaW5nLXRvcDogMHB4IWltcG9ydGFudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzICAuY29sdW1uLWdyb3VwLXNldHRpbmcgLmdyb3VwLXN1bS1maWVsZHMge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDM2cHg7IGxpbmUtaGVpZ2h0OiAzNnB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI2U0ZTdlZjsgY29sb3I6ICM1OWExZmZcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAuc21vb3RoLWRuZC1naG9zdC5mb3JtYXQtc2V0dGluZy1jb2x1bW4ge1xyXG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMmE4N2ZmO1xyXG4gICAgICAgICAgICB6LWluZGV4OiA5OTk5OTk5OTkgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U3ZjFmZjs7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XHJcbiAgICAgICAgICAgIGNvbG9yOiByZ2IoMCAwIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnNtb290aC1kbmQtZ2hvc3QuZm9ybWF0LXNldHRpbmctY29sdW1uIC5maWVsZC1kcmFnLWhhbmRsZSB7XHJcbiAgICAgICAgICAgIGZsb2F0OiByaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5kZy1jb2x1bW4tZm9ybWF0LXNldHRpbmcgIC5zbW9vdGgtZG5kLWRyb3AtcHJldmlldy1jb25zdGFudC1jbGFzcyB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkZWUxZWE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5kZy1jb2x1bW4tZm9ybWF0LXNldHRpbmcgLmZvcm1hdC1zZXR0aW5nLWNvbHVtbiB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZiZmQ7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2YyZjRmODtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZGctY29sdW1uLWZvcm1hdC1zZXR0aW5nIC5mb3JtYXQtc2V0dGluZy1jb2x1bW4uYWN0aXZlIHtcclxuICAgICAgICAgICAgY29sb3I6IHJnYigwIDAgMCk7XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMyYTg3ZmY7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlN2YxZmY7XHJcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjMmE4N2ZmIWltcG9ydGFudDtcclxuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMyYTg3ZmYhaW1wb3J0YW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmRnLWNvbHVtbi1mb3JtYXQtc2V0dGluZyAuZm9ybWF0LXNldHRpbmctY29sdW1uIC5maWVsZC1kcmFnLWhhbmRsZXtcclxuICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgICAgICAgICBjdXJzb3I6IGdyYWI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZGctY29sdW1uLWZvcm1hdC1zZXR0aW5nIC5mb3JtYXQtc2V0dGluZy1jb2x1bW4gLmZpZWxkLWRyYWctaGFuZGxlOmFjdGl2ZXtcclxuICAgICAgICAgICAgY3Vyc29yOiBncmFiYmluZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGBcclxuICAgIF0sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYXRhZ3JpZFNldHRpbmdzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gICAgbW9kYWxSZWY6IEJzTW9kYWxSZWY7XHJcbiAgICBncmlkSW5zdGFuY2U6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gICAgYWN0aXZlVGFiSW5kZXggPSAxO1xyXG5cclxuICAgIC8qKiDmjpLluo/liJfmlbDmja4gKi9cclxuICAgIHNvcnRUcmVlRGF0YSA9IFtdO1xyXG4gICAgc29ydE5hbWVzID0gW107XHJcbiAgICBzb3J0SW5mbyA9IHt9O1xyXG5cclxuICAgIC8qKiDmmL7npLrliJfmlbDmja4gKi9cclxuICAgIHZpZXdUcmVlRGF0YSA9IFtdO1xyXG4gICAgdmlld0NvbHVtbnMgPSBbXTtcclxuXHJcbiAgICBjb2x1bW5Gb3JtYXQgPSBbXTtcclxuXHJcbiAgICBncm91cEZpZWxkcyA9IFtdO1xyXG5cclxuICAgIGNhblNldENvbHVtblNvcnQgPSB0cnVlO1xyXG4gICAgY2FuU2V0Q29sdW1uVmlzaWJsZSA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBlbmFibGVSZXNldCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgY29sdW1uczogRGF0YUNvbHVtbltdW107XHJcblxyXG4gICAgQE91dHB1dCgpIGNhbmNlbEhhbmRsZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzdWJtaXRIYW5kbGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcmVzZXQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY29uY2lzZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdoZWFkZXInKSBoZWFkZXI6IEVsZW1lbnRSZWY7XHJcbiAgICBzZWFyY2hJdGVtcyA9IFtdO1xyXG4gICAgYWxpZ25JdGVtcyA9IFtdO1xyXG4gICAgc3VtbWFyeUl0ZW1zID0gW107XHJcbiAgICBzdW1tYXJ5SXRlbXMyID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBsb2NhbGVTZXI6IExvY2FsZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIG1lc3NhZ2VyOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBpbmplY3Q6IEluamVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlciA9IHRoaXMuaW5qZWN0LmdldChNZXNzYWdlclNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIHRoaXMubG9jYWxlU2VyID0gdGhpcy5pbmplY3QuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSXRlbXMgPSBbXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdhbGwnLCB0aXRsZTogdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLmFsbENvbHVtbnMnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAndmlzaWJsZScsIHRpdGxlOiB0aGlzLmxvY2FsZVNlci5nZXRWYWx1ZSgnZGF0YWdyaWQuc2V0dGluZ3MudmlzaWJsZUNvbHVtbnMnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnaGlkZGVuJywgdGl0bGU6IHRoaXMubG9jYWxlU2VyLmdldFZhbHVlKCdkYXRhZ3JpZC5zZXR0aW5ncy5oaWRkZW5Db2x1bW5zJykgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMuYWxpZ25JdGVtcyA9IFtcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2xlZnQnLCB0aXRsZTogdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLmFsaWduTGVmdCcpfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2NlbnRlcicsIHRpdGxlOiB0aGlzLmxvY2FsZVNlci5nZXRWYWx1ZSgnZGF0YWdyaWQuc2V0dGluZ3MuYWxpZ25DZW50ZXInKX0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdyaWdodCcsIHRpdGxlOiB0aGlzLmxvY2FsZVNlci5nZXRWYWx1ZSgnZGF0YWdyaWQuc2V0dGluZ3MuYWxpZ25SaWdodCcpfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICB0aGlzLnN1bW1hcnlJdGVtcyA9IFtcclxuICAgICAgICAgICAgeyB2YWx1ZTogLTEsIHRpdGxlOiB0aGlzLmxvY2FsZVNlci5nZXRWYWx1ZSgnZGF0YWdyaWQuc2V0dGluZ3Muc3VtbWFyeU5vbmUnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAyLCB0aXRsZTogdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLnN1bW1hcnlTdW0nKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAwLCB0aXRsZTogdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLnN1bW1hcnlNYXgnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAxLCB0aXRsZTogdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLnN1bW1hcnlNaW4nKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAzLCB0aXRsZTogdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLnN1bW1hcnlBdmVyYWdlJykgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogNCwgdGl0bGU6IHRoaXMubG9jYWxlU2VyLmdldFZhbHVlKCdkYXRhZ3JpZC5zZXR0aW5ncy5zdW1tYXJDb3VudCcpIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdGhpcy5zdW1tYXJ5SXRlbXMyID0gW1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAtMSwgdGl0bGU6IHRoaXMubG9jYWxlU2VyLmdldFZhbHVlKCdkYXRhZ3JpZC5zZXR0aW5ncy5zdW1tYXJ5Tm9uZScpIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6IDQsIHRpdGxlOiB0aGlzLmxvY2FsZVNlci5nZXRWYWx1ZSgnZGF0YWdyaWQuc2V0dGluZ3Muc3VtbWFyQ291bnQnKSB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuc29ydE5hbWVzID0gdGhpcy5ncmlkSW5zdGFuY2Uuc29ydE5hbWUgPyB0aGlzLmdyaWRJbnN0YW5jZS5zb3J0TmFtZS5zcGxpdCgnLCcpIDogW107XHJcbiAgICAgICAgdGhpcy52aWV3Q29sdW1ucyA9IHRoaXMuZ2V0Vmlld0NvbHVtbnMoKTtcclxuICAgICAgICB0aGlzLnNvcnRJbmZvID0gdGhpcy5ncmlkSW5zdGFuY2VbJ19fc29ydEluZm8nXSB8fCB7fTtcclxuICAgICAgICB0aGlzLmNvbHVtbkZvcm1hdCA9IFsuLi50aGlzLmNvbHVtbnNbMF1dO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBGaWVsZHMgPSB0aGlzLmdyaWRJbnN0YW5jZS5ncm91cEZpZWxkID8gdGhpcy5ncmlkSW5zdGFuY2UuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpIDogW107XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNvbHVtbnMgJiYgIWNoYW5nZXMuY29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoJGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGFsUmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxSZWYuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlVGFicyhpZHgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ID0gaWR4O1xyXG4gICAgfVxyXG5cclxuICAgIG9uU29ydEluZm9DaGFuZ2Uoc29ydEluZm86IGFueSkge1xyXG4gICAgICAgIHRoaXMuc29ydEluZm8gPSBzb3J0SW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFZpZXdDb2x1bW5zKCkge1xyXG4gICAgICAgIC8vIOWkmuihqOWktFxyXG4gICAgICAgIGxldCB2aXNpYmxlQ2xzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucy5sZW5ndGggPiAxICkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChjb2xzID0+IHtcclxuICAgICAgICAgICAgICAgIHZpc2libGVDbHMgPSB2aXNpYmxlQ2xzLmNvbmNhdCh0aGlzLl9nZXRWaWV3Q29sdW1ucyhjb2xzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZpc2libGVDbHMgPSB0aGlzLmNvbHVtbnNbMF0uZmlsdGVyKG4gPT4gKG4udmlzaWJsZSB8fCBuLnZpc2libGUgPT09IHVuZGVmaW5lZCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc2libGVDbHMubWFwKG4gPT4gbi5maWVsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0Vmlld0NvbHVtbnMoY29sczogYW55W10pIHtcclxuICAgICAgICByZXR1cm4gY29scy5maWx0ZXIoYyA9PiAhYy5jb2xzcGFuICYmIChjLnZpc2libGUgfHwgYy52aXNpYmxlID09PSB1bmRlZmluZWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtbkZvcm1hdENoYW5nZShjb2xGb3JtYXREYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5Gb3JtYXQgPSBjb2xGb3JtYXREYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VibWl0Q2xpY2soJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRIYW5kbGUuZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2FuY2VsQ2xpY2soJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxIYW5kbGUuZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2V0dGluZ1Jlc2V0KCRldmVudCkge1xyXG4gICAgICAgIC8vIHRoaXMucmVzZXQuZW1pdCgkZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHJlc3RvckRlZmF1bHRUZXh0ID0gdGhpcy5sb2NhbGVTZXIuZ2V0VmFsdWUoJ2RhdGFncmlkLnNldHRpbmdzLnJlc3RvcmVEZWZhdWx0U2V0dGluZ3NUZXh0JykgfHwgJ+ehruiupOimgeaBouWkjem7mOiupOiuvue9ruWQl++8nyc7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlci5jb25maXJtKHJlc3RvckRlZmF1bHRUZXh0KS5zdWJzY3JpYmUoKHQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQyRGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNldDJEZWZhdWx0KCkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdyaWRJbnN0YW5jZS5kZnNbJ19zdGF0ZSddLmluaXRpYWxPcHRpb25zO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmNvbHVtbkZpZWxkcyAmJiBvcHRpb25zLmNvbHVtbkZpZWxkcy5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbHVtbnMgPSBbXTtcclxuICAgICAgICAgICAgb3B0aW9ucy5jb2x1bW5GaWVsZHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjLmZpZWxkICE9PSAnX2RhdGFncmlkLXNldHRpbmctY29udHJvbF8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5ncmlkSW5zdGFuY2UuY29sdW1uc1swXS5maW5kKChuOiBhbnkpID0+IG4uZmllbGQgPT09IGMuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLnZpc2libGUgPSBjLnZpc2libGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5oYWxpZ24gPSBjLmhhbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLmFsaWduID0gYy5hbGlnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLndpZHRoID0gYy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZvb3RlciA9IHsuLi5jLmZvb3RlciB8fCB7fX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5ncm91cEZvb3RlciA9IHsuLi5jLmdyb3VwRm9vdGVyIHx8IHt9fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sdW1ucy5wdXNoKGNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtuZXdDb2x1bW5zXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmlld0NvbHVtbnMgPSB0aGlzLmdldFZpZXdDb2x1bW5zKCk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLnNvcnQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc29ydE9yZGVycyA9IG9wdGlvbnMuc29ydC5zb3J0T3JkZXI/IG9wdGlvbnMuc29ydC5zb3J0T3JkZXIuc3BsaXQoJywnKSA6IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnNvcnROYW1lcyA9IG9wdGlvbnMuc29ydC5zb3J0TmFtZSA/IG9wdGlvbnMuc29ydC5zb3J0TmFtZS5zcGxpdCgnLCcpIDogW107XHJcbiAgICAgICAgICAgIHRoaXMuc29ydEluZm8gPSB7IHNvcnROYW1lOiB0aGlzLnNvcnROYW1lcywgc29ydE9yZGVyOiAgc29ydE9yZGVycyB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydE5hbWVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc29ydEluZm8gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2x1bW5Gb3JtYXQgPSBbLi4udGhpcy5jb2x1bW5zWzBdXTtcclxuICAgICAgICB0aGlzLmdyb3VwRmllbGRzID0gIG9wdGlvbnMuZ3JvdXBGaWVsZCA/IG9wdGlvbnMuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpIDogW107XHJcbiAgICB9XHJcbiAgICAvKiog5pi+56S6566A5rSB5qih5byP56qX5Y+jICovXHJcbiAgICBzaG93Q29uY2lzZSgkZXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKCRldmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbmNpc2UuZW1pdCgpO1xyXG5cclxuICAgIH1cclxufVxyXG4iXX0=