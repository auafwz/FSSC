/**
 * @fileoverview added by tsickle
 * Generated from: lib/unSelectDatagridRoleComponent.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild } from "@angular/core";
import { ApiLocalService } from "../utils/api-service";
import { DatagridComponent } from "@farris/ui-datagrid";
import { of } from 'rxjs';
// 兼容保留，该组件无用
export class unSelectDatagridRoleComponent {
    /**
     * @param {?} ApiLocalService
     */
    constructor(ApiLocalService) {
        this.ApiLocalService = ApiLocalService;
        this.isAllSelect = new EventEmitter();
        /**
         * 人员展示区的复选框取消勾选时触发逻辑
         * @param $event
         * @return
         */
        this.onBeforeUncheck = (/**
         * @param {?} $event
         * @return {?}
         */
        ($event) => {
            this.selections.forEach((/**
             * @param {?} selection
             * @param {?} index
             * @return {?}
             */
            (selection, index) => {
                if ($event.rowData["id"] === selection["id"]) {
                    this.selections.splice(index, 1);
                }
            }));
            /** @type {?} */
            let emitojb = {
                itemsRole: this.itemsRole,
                pageIndexRole: this.pageIndexRole,
                pageSizeRole: this.pageSizeRole,
                pageTotalRole: this.pageTotalRole,
                pageTotalAllRole: this.pageTotalAllRole,
                unSelectedListRole: this.unSelectedListRole
            };
            this.isAllSelect.emit(emitojb);
            return of(true);
        });
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.unSelectDatagridRole.loadData(this.itemsRole);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.pageChangeCheck();
    }
    /**
     * 下级组织展示区datagrid用于数据加载
     * @return {?}
     */
    unSelectedListRoleLoad() {
        this.itemsRole = [];
        this.unSelectedListRole.forEach((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            /** @type {?} */
            let name = res.nameChs;
            this.itemsRole.push({ "displayname": name, "id": res.id, "organizationName": res.remark, "userTotal": res.userTotal, "userInFo": res.userInfo, "userList": res.userList });
        }));
        this.unSelectDatagridRole.loadData(this.itemsRole);
        this.pageChangeCheck();
        /** @type {?} */
        let emitojb = {
            itemsRole: this.itemsRole,
            pageIndexRole: this.pageIndexRole,
            pageSizeRole: this.pageSizeRole,
            pageTotalRole: this.pageTotalRole,
            pageTotalAllRole: this.pageTotalAllRole,
            unSelectedListRole: this.unSelectedListRole
        };
        this.isAllSelect.emit(emitojb);
    }
    /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    selectLine(data) {
        if (this.isSingleCheck) {
            if (this.selections.length == 0) {
                this._insertOneIntoSelections(data.data);
            }
            else if (this.selections.length >= 1) {
                alert(this.noSelectToRight);
            }
        }
        else {
            this._insertOneIntoSelections(data.data);
        }
        /** @type {?} */
        let emitojb = {
            itemsRole: this.itemsRole,
            pageIndexRole: this.pageIndexRole,
            pageSizeRole: this.pageSizeRole,
            pageTotalRole: this.pageTotalRole,
            pageTotalAllRole: this.pageTotalAllRole,
            unSelectedListRole: this.unSelectedListRole
        };
        this.isAllSelect.emit(emitojb);
    }
    //人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    switchPage(size) {
        this.pageIndexRole = size.pageIndex;
        // if (this.searchPage) {
        //     let isChinese: number;
        //     if (/^[\u4e00-\u9fa5]+$/i.test(this.searchText)) {
        //         isChinese = 0;
        //     } else if (!(/^[\u4e00-\u9fa5]+$/i.test(this.searchText)) && !(escape(this.searchText).indexOf("%u") < 0)) {
        //         alert("输入框禁止同时输入汉字和拼音！")
        //     } else {
        //         isChinese = 1;
        //     }
        //     this.ApiLocalService.getPersonnelForUserName(this.pageSize, this.pageIndex, this.searchText, isChinese, this.isContain, this.path, this.isenabled).subscribe((res: any) => {
        //       this.unSelectedLists = res;
        //       var linshi: any = this.unSelectedLists;
        //       this.unSelectedList = linshi.data;
        //       this.pageTotalAll = linshi.total;
        //       this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);
        //       if (this.pageTotal == 0) {
        //         this.pageTotal = 1;
        //       }
        //       this.unSelectedListLoad();
        //     });
        // } else {
        if (this.isLoadOutData) {
            console.log("暂未开启");
        }
        else {
        }
        // }
    }
    /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    _insertOneIntoSelections(data) {
        /** @type {?} */
        let collection = [];
        // 如果当前数据已经移入右侧数据，则返回。
        if (this._isInArray(data["id"], "id", this.selections)) {
            return;
        }
        collection.push(data);
        this._insertSomeIntoSelections(collection);
    }
    /**
     * 判断是否在内
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    _isInArray(value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        item => value === item[field])) ? true : false;
    }
    /**
     * @param {?} userArray
     * @return {?}
     */
    _insertSomeIntoSelections(userArray) {
        userArray.forEach((/**
         * @param {?} user
         * @return {?}
         */
        user => {
            if (!this._isInArray(user["id"], "id", this.selections)) {
                this.selections.push(user);
            }
        }));
    }
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    pageChangeCheck() {
        if (this.unSelectedListRole) {
            this.unSelectedListRole.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (this._isInArray(item.id, "id", this.selections)) {
                    this.unSelectDatagridRole.checkRow(item.id);
                }
                else {
                    this.unSelectDatagridRole.unCheckRow(item.id);
                }
            }));
        }
    }
}
unSelectDatagridRoleComponent.decorators = [
    { type: Component, args: [{
                template: `<farris-datagrid #unSelectDatagridRole class="s-unSelectDatagrid" [pagerViewMode]="'simple'" [showCheckbox]="true" [checkOnSelect]="true"
[selectOnCheck]="true" [multiSelect]="true" [columns]="columnsRole" [data]="itemsRole"
[enableSelectRow]="true" [showHeader]="false" [fitColumns]="true" [height]="370"
[showBorder]="false" [striped]="false" [fit]="true" [showPageNumber]="false"
[pageIndex]="pageIndexRole" [pageSize]="pageSizeRole" [total]="pageTotalAllRole"
(checked)="selectLine($event)" (pageChanged)="switchPage($event)"
[beforeUncheck]="onBeforeUncheck">
</farris-datagrid>`
            }] }
];
/** @nocollapse */
unSelectDatagridRoleComponent.ctorParameters = () => [
    { type: ApiLocalService }
];
unSelectDatagridRoleComponent.propDecorators = {
    unSelectDatagridRole: [{ type: ViewChild, args: ['unSelectDatagridRole',] }],
    columnsRole: [{ type: Input }],
    itemsRole: [{ type: Input }],
    pageIndexRole: [{ type: Input }],
    pageSizeRole: [{ type: Input }],
    pageTotalAllRole: [{ type: Input }],
    pathRole: [{ type: Input }],
    orgIdRole: [{ type: Input }],
    isContainRole: [{ type: Input }],
    pageTotalRole: [{ type: Input }],
    isSingleCheck: [{ type: Input }],
    selections: [{ type: Input }],
    noSelectToRight: [{ type: Input }],
    searchText: [{ type: Input }],
    isLoadOutData: [{ type: Input }],
    unSelectedRoleLists: [{ type: Input }],
    unSelectedListRole: [{ type: Input }],
    organizationList: [{ type: Input }],
    type: [{ type: Input }],
    listIdField: [{ type: Input }],
    searchPage: [{ type: Input }],
    isenabled: [{ type: Input }],
    isExcludeMe: [{ type: Input }],
    isAllSelect: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.unSelectDatagridRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.columnsRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.itemsRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.pageIndexRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.pageSizeRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.pageTotalAllRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.pathRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.orgIdRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.isContainRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.pageTotalRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.isSingleCheck;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.selections;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.noSelectToRight;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.searchText;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.isLoadOutData;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.unSelectedRoleLists;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.unSelectedListRole;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.organizationList;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.type;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.listIdField;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.searchPage;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.isenabled;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.isExcludeMe;
    /** @type {?} */
    unSelectDatagridRoleComponent.prototype.isAllSelect;
    /**
     * 人员展示区的复选框取消勾选时触发逻辑
     * \@param $event
     * \@return
     * @type {?}
     */
    unSelectDatagridRoleComponent.prototype.onBeforeUncheck;
    /**
     * @type {?}
     * @private
     */
    unSelectDatagridRoleComponent.prototype.ApiLocalService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5TZWxlY3REYXRhZ3JpZFJvbGVDb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBlcnNvbm5lbC1zZWxlY3Rvci8iLCJzb3VyY2VzIjpbImxpYi91blNlbGVjdERhdGFncmlkUm9sZUNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDOztBQWMxQixNQUFNLE9BQU8sNkJBQTZCOzs7O0lBNkJ0QyxZQUNZLGVBQWdDO1FBQWhDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUpsQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7Ozs7OztRQW1HaEQsb0JBQWU7Ozs7UUFBRyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTzs7Ozs7WUFBQyxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsRUFBRTtnQkFDekMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDMUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUNwQztZQUNMLENBQUMsRUFBQyxDQUFBOztnQkFDRSxPQUFPLEdBQUc7Z0JBQ1YsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO2dCQUN6QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7Z0JBQ2pDLFlBQVksRUFBRSxJQUFJLENBQUMsWUFBWTtnQkFDL0Is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LEtBQUs7bUJBQ0wsS0FBSzswQkFDTCxLQUFLO3lCQUNMLEtBQUs7d0JBQ0wsS0FBSzswQkFDTCxLQUFLOzBCQUNMLE1BQU07Ozs7SUF4QlAsNkRBQTJFOztJQUUzRSxvREFBeUI7O0lBQ3pCLGtEQUF1Qjs7SUFDdkIsc0RBQTJCOztJQUMzQixxREFBMEI7O0lBQzFCLHlEQUE4Qjs7SUFDOUIsaURBQXNCOztJQUN0QixrREFBdUI7O0lBQ3ZCLHNEQUEyQjs7SUFDM0Isc0RBQTJCOztJQUMzQixzREFBMkI7O0lBQzNCLG1EQUF3Qjs7SUFDeEIsd0RBQTZCOztJQUM3QixtREFBd0I7O0lBQ3hCLHNEQUEyQjs7SUFDM0IsNERBQWlDOztJQUNqQywyREFBZ0M7O0lBQ2hDLHlEQUE4Qjs7SUFDOUIsNkNBQWtCOztJQUNsQixvREFBNEI7O0lBQzVCLG1EQUE2Qjs7SUFDN0Isa0RBQTJCOztJQUMzQixvREFBNkI7O0lBQzdCLG9EQUFnRDs7Ozs7OztJQW1HaEQsd0RBZ0JDOzs7OztJQS9HRyx3REFBd0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0NoaWxkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQXBpTG9jYWxTZXJ2aWNlIH0gZnJvbSBcIi4uL3V0aWxzL2FwaS1zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktZGF0YWdyaWRcIjtcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcclxuXHJcbi8vIOWFvOWuueS/neeVme+8jOivpee7hOS7tuaXoOeUqFxyXG5AQ29tcG9uZW50KHtcclxuICAgIHRlbXBsYXRlOiBgPGZhcnJpcy1kYXRhZ3JpZCAjdW5TZWxlY3REYXRhZ3JpZFJvbGUgY2xhc3M9XCJzLXVuU2VsZWN0RGF0YWdyaWRcIiBbcGFnZXJWaWV3TW9kZV09XCInc2ltcGxlJ1wiIFtzaG93Q2hlY2tib3hdPVwidHJ1ZVwiIFtjaGVja09uU2VsZWN0XT1cInRydWVcIlxyXG5bc2VsZWN0T25DaGVja109XCJ0cnVlXCIgW211bHRpU2VsZWN0XT1cInRydWVcIiBbY29sdW1uc109XCJjb2x1bW5zUm9sZVwiIFtkYXRhXT1cIml0ZW1zUm9sZVwiXHJcbltlbmFibGVTZWxlY3RSb3ddPVwidHJ1ZVwiIFtzaG93SGVhZGVyXT1cImZhbHNlXCIgW2ZpdENvbHVtbnNdPVwidHJ1ZVwiIFtoZWlnaHRdPVwiMzcwXCJcclxuW3Nob3dCb3JkZXJdPVwiZmFsc2VcIiBbc3RyaXBlZF09XCJmYWxzZVwiIFtmaXRdPVwidHJ1ZVwiIFtzaG93UGFnZU51bWJlcl09XCJmYWxzZVwiXHJcbltwYWdlSW5kZXhdPVwicGFnZUluZGV4Um9sZVwiIFtwYWdlU2l6ZV09XCJwYWdlU2l6ZVJvbGVcIiBbdG90YWxdPVwicGFnZVRvdGFsQWxsUm9sZVwiXHJcbihjaGVja2VkKT1cInNlbGVjdExpbmUoJGV2ZW50KVwiIChwYWdlQ2hhbmdlZCk9XCJzd2l0Y2hQYWdlKCRldmVudClcIlxyXG5bYmVmb3JlVW5jaGVja109XCJvbkJlZm9yZVVuY2hlY2tcIj5cclxuPC9mYXJyaXMtZGF0YWdyaWQ+YFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIHVuU2VsZWN0RGF0YWdyaWRSb2xlQ29tcG9uZW50IHtcclxuXHJcbiAgICBAVmlld0NoaWxkKCd1blNlbGVjdERhdGFncmlkUm9sZScpIHVuU2VsZWN0RGF0YWdyaWRSb2xlOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zUm9sZTogYW55XHJcbiAgICBASW5wdXQoKSBpdGVtc1JvbGU6IGFueVxyXG4gICAgQElucHV0KCkgcGFnZUluZGV4Um9sZTogYW55XHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZVJvbGU6IGFueVxyXG4gICAgQElucHV0KCkgcGFnZVRvdGFsQWxsUm9sZTogYW55XHJcbiAgICBASW5wdXQoKSBwYXRoUm9sZTogYW55XHJcbiAgICBASW5wdXQoKSBvcmdJZFJvbGU6IGFueVxyXG4gICAgQElucHV0KCkgaXNDb250YWluUm9sZTogYW55XHJcbiAgICBASW5wdXQoKSBwYWdlVG90YWxSb2xlOiBhbnlcclxuICAgIEBJbnB1dCgpIGlzU2luZ2xlQ2hlY2s6IGFueVxyXG4gICAgQElucHV0KCkgc2VsZWN0aW9uczogYW55XHJcbiAgICBASW5wdXQoKSBub1NlbGVjdFRvUmlnaHQ6IGFueVxyXG4gICAgQElucHV0KCkgc2VhcmNoVGV4dDogYW55XHJcbiAgICBASW5wdXQoKSBpc0xvYWRPdXREYXRhOiBhbnlcclxuICAgIEBJbnB1dCgpIHVuU2VsZWN0ZWRSb2xlTGlzdHM6IGFueVxyXG4gICAgQElucHV0KCkgdW5TZWxlY3RlZExpc3RSb2xlOiBhbnlcclxuICAgIEBJbnB1dCgpIG9yZ2FuaXphdGlvbkxpc3Q6IGFueVxyXG4gICAgQElucHV0KCkgdHlwZTogYW55XHJcbiAgICBASW5wdXQoKSBsaXN0SWRGaWVsZDogc3RyaW5nXHJcbiAgICBASW5wdXQoKSBzZWFyY2hQYWdlOiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgaXNlbmFibGVkOiBudW1iZXI7XHJcbiAgICBASW5wdXQoKSBpc0V4Y2x1ZGVNZTogbnVtYmVyO1xyXG4gICAgQE91dHB1dCgpIGlzQWxsU2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgQXBpTG9jYWxTZXJ2aWNlOiBBcGlMb2NhbFNlcnZpY2UsXHJcbiAgICApIHsgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudW5TZWxlY3REYXRhZ3JpZFJvbGUubG9hZERhdGEodGhpcy5pdGVtc1JvbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VDaGVjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiL57qn57uE57uH5bGV56S65Yy6ZGF0YWdyaWTnlKjkuo7mlbDmja7liqDovb1cclxuICAgICAqL1xyXG4gICAgdW5TZWxlY3RlZExpc3RSb2xlTG9hZCgpIHtcclxuICAgICAgICB0aGlzLml0ZW1zUm9sZSA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5TZWxlY3RlZExpc3RSb2xlLmZvckVhY2gocmVzID0+IHtcclxuICAgICAgICAgICAgbGV0IG5hbWUgPSByZXMubmFtZUNocztcclxuICAgICAgICAgICAgdGhpcy5pdGVtc1JvbGUucHVzaCh7IFwiZGlzcGxheW5hbWVcIjogbmFtZSwgXCJpZFwiOiByZXMuaWQsIFwib3JnYW5pemF0aW9uTmFtZVwiOiByZXMucmVtYXJrLCBcInVzZXJUb3RhbFwiOiByZXMudXNlclRvdGFsLCBcInVzZXJJbkZvXCI6IHJlcy51c2VySW5mbywgXCJ1c2VyTGlzdFwiOiByZXMudXNlckxpc3QgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMudW5TZWxlY3REYXRhZ3JpZFJvbGUubG9hZERhdGEodGhpcy5pdGVtc1JvbGUpO1xyXG4gICAgICAgIHRoaXMucGFnZUNoYW5nZUNoZWNrKCk7XHJcbiAgICAgICAgbGV0IGVtaXRvamIgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zUm9sZTogdGhpcy5pdGVtc1JvbGUsXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleFJvbGU6IHRoaXMucGFnZUluZGV4Um9sZSxcclxuICAgICAgICAgICAgcGFnZVNpemVSb2xlOiB0aGlzLnBhZ2VTaXplUm9sZSxcclxuICAgICAgICAgICAgcGFnZVRvdGFsUm9sZTogdGhpcy5wYWdlVG90YWxSb2xlLFxyXG4gICAgICAgICAgICBwYWdlVG90YWxBbGxSb2xlOiB0aGlzLnBhZ2VUb3RhbEFsbFJvbGUsXHJcbiAgICAgICAgICAgIHVuU2VsZWN0ZWRMaXN0Um9sZTogdGhpcy51blNlbGVjdGVkTGlzdFJvbGVcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc0FsbFNlbGVjdC5lbWl0KGVtaXRvamIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAgKiDlvZPliY3ooYzpgInkuK1cclxuICAgICAgICogQHBhcmFtIGRhdGEg5b2T5YmN6KGM55qE5pWw5o2u77yI77yJXHJcbiAgICAgICAqL1xyXG4gICAgc2VsZWN0TGluZShkYXRhOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1NpbmdsZUNoZWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3Rpb25zLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCh0aGlzLm5vU2VsZWN0VG9SaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9pbnNlcnRPbmVJbnRvU2VsZWN0aW9ucyhkYXRhLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZW1pdG9qYiA9IHtcclxuICAgICAgICAgICAgaXRlbXNSb2xlOiB0aGlzLml0ZW1zUm9sZSxcclxuICAgICAgICAgICAgcGFnZUluZGV4Um9sZTogdGhpcy5wYWdlSW5kZXhSb2xlLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZVJvbGU6IHRoaXMucGFnZVNpemVSb2xlLFxyXG4gICAgICAgICAgICBwYWdlVG90YWxSb2xlOiB0aGlzLnBhZ2VUb3RhbFJvbGUsXHJcbiAgICAgICAgICAgIHBhZ2VUb3RhbEFsbFJvbGU6IHRoaXMucGFnZVRvdGFsQWxsUm9sZSxcclxuICAgICAgICAgICAgdW5TZWxlY3RlZExpc3RSb2xlOiB0aGlzLnVuU2VsZWN0ZWRMaXN0Um9sZVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzQWxsU2VsZWN0LmVtaXQoZW1pdG9qYik7XHJcbiAgICB9XHJcblxyXG4gICAgLy/kurrlkZjlsZXnpLrnv7vpobXop6blj5Hmn6Xor6LvvIjvvIHvvIlcclxuICAgIHN3aXRjaFBhZ2Uoc2l6ZSkge1xyXG4gICAgICAgIHRoaXMucGFnZUluZGV4Um9sZSA9IHNpemUucGFnZUluZGV4O1xyXG4gICAgICAgIC8vIGlmICh0aGlzLnNlYXJjaFBhZ2UpIHtcclxuICAgICAgICAvLyAgICAgbGV0IGlzQ2hpbmVzZTogbnVtYmVyO1xyXG4gICAgICAgIC8vICAgICBpZiAoL15bXFx1NGUwMC1cXHU5ZmE1XSskL2kudGVzdCh0aGlzLnNlYXJjaFRleHQpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBpc0NoaW5lc2UgPSAwO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2UgaWYgKCEoL15bXFx1NGUwMC1cXHU5ZmE1XSskL2kudGVzdCh0aGlzLnNlYXJjaFRleHQpKSAmJiAhKGVzY2FwZSh0aGlzLnNlYXJjaFRleHQpLmluZGV4T2YoXCIldVwiKSA8IDApKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBhbGVydChcIui+k+WFpeahhuemgeatouWQjOaXtui+k+WFpeaxieWtl+WSjOaLvOmfs++8gVwiKVxyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgaXNDaGluZXNlID0gMTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICB0aGlzLkFwaUxvY2FsU2VydmljZS5nZXRQZXJzb25uZWxGb3JVc2VyTmFtZSh0aGlzLnBhZ2VTaXplLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5zZWFyY2hUZXh0LCBpc0NoaW5lc2UsIHRoaXMuaXNDb250YWluLCB0aGlzLnBhdGgsIHRoaXMuaXNlbmFibGVkKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgdGhpcy51blNlbGVjdGVkTGlzdHMgPSByZXM7XHJcbiAgICAgICAgLy8gICAgICAgdmFyIGxpbnNoaTogYW55ID0gdGhpcy51blNlbGVjdGVkTGlzdHM7XHJcbiAgICAgICAgLy8gICAgICAgdGhpcy51blNlbGVjdGVkTGlzdCA9IGxpbnNoaS5kYXRhO1xyXG4gICAgICAgIC8vICAgICAgIHRoaXMucGFnZVRvdGFsQWxsID0gbGluc2hpLnRvdGFsO1xyXG4gICAgICAgIC8vICAgICAgIHRoaXMucGFnZVRvdGFsID0gTWF0aC5jZWlsKHRoaXMucGFnZVRvdGFsQWxsIC8gdGhpcy5wYWdlU2l6ZSk7XHJcbiAgICAgICAgLy8gICAgICAgaWYgKHRoaXMucGFnZVRvdGFsID09IDApIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMucGFnZVRvdGFsID0gMTtcclxuICAgICAgICAvLyAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgdGhpcy51blNlbGVjdGVkTGlzdExvYWQoKTtcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkT3V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmmoLmnKrlvIDlkK9cIilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAqIOS6uuWRmOWxleekuuWMuueahOWkjemAieahhuWPlua2iOWLvumAieaXtuinpuWPkemAu+i+kVxyXG4gICAgICAgKiBAcGFyYW0gJGV2ZW50XHJcbiAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAqL1xyXG4gICAgb25CZWZvcmVVbmNoZWNrID0gKCRldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChzZWxlY3Rpb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgkZXZlbnQucm93RGF0YVtcImlkXCJdID09PSBzZWxlY3Rpb25bXCJpZFwiXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCBlbWl0b2piID0ge1xyXG4gICAgICAgICAgICBpdGVtc1JvbGU6IHRoaXMuaXRlbXNSb2xlLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXhSb2xlOiB0aGlzLnBhZ2VJbmRleFJvbGUsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplUm9sZTogdGhpcy5wYWdlU2l6ZVJvbGUsXHJcbiAgICAgICAgICAgIHBhZ2VUb3RhbFJvbGU6IHRoaXMucGFnZVRvdGFsUm9sZSxcclxuICAgICAgICAgICAgcGFnZVRvdGFsQWxsUm9sZTogdGhpcy5wYWdlVG90YWxBbGxSb2xlLFxyXG4gICAgICAgICAgICB1blNlbGVjdGVkTGlzdFJvbGU6IHRoaXMudW5TZWxlY3RlZExpc3RSb2xlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNBbGxTZWxlY3QuZW1pdChlbWl0b2piKTtcclxuICAgICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAqIOmAieS4reW5tuaPkuWFpeW9k+WJjeihjOaVsOaNruWIsOWPs+S+p1xyXG4gICAgICAgKiBAcGFyYW0gZGF0YSDlvZPliY3ooYznmoTmlbDmja5cclxuICAgICAgICogQHBhcmFtIGNvbGxlY3Rpb24g5pqC5a2Y5b2T5YmN5pWw5o2u55qE6ZuG5ZCIXHJcbiAgICAgICAqL1xyXG4gICAgX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGxldCBjb2xsZWN0aW9uOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIC8vIOWmguaenOW9k+WJjeaVsOaNruW3sue7j+enu+WFpeWPs+S+p+aVsOaNru+8jOWImei/lOWbnuOAglxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoZGF0YVtcImlkXCJdLCBcImlkXCIsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goZGF0YSlcclxuICAgICAgICB0aGlzLl9pbnNlcnRTb21lSW50b1NlbGVjdGlvbnMoY29sbGVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgICog5Yik5pat5piv5ZCm5Zyo5YaFXHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgICAgICogQHBhcmFtIGZpZWxkXHJcbiAgICAgICAgICogQHBhcmFtIGFycmF5XHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKi9cclxuICAgIF9pc0luQXJyYXkodmFsdWU6IHN0cmluZywgZmllbGQ6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliY0y5Liq5Y+C5pWw5b+F5aGrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5maW5kKGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRdKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfaW5zZXJ0U29tZUludG9TZWxlY3Rpb25zKHVzZXJBcnJheTogYW55W10pIHtcclxuICAgICAgICB1c2VyQXJyYXkuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0luQXJyYXkodXNlcltcImlkXCJdLCBcImlkXCIsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5wdXNoKHVzZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICAgKiDnv7vpobXmo4Dmn6XvvJrkurrlkZjlsZXnpLrljLrnmoTli77pgInnirbmgIHkuI7lt7LpgInkurrlkZjljLrmmK/lkKblr7nlupRcclxuICAgICAgICAgKi9cclxuICAgIHBhZ2VDaGFuZ2VDaGVjaygpIHtcclxuICAgICAgICBpZiAodGhpcy51blNlbGVjdGVkTGlzdFJvbGUpIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdFJvbGUuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoaXRlbS5pZCwgXCJpZFwiLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51blNlbGVjdERhdGFncmlkUm9sZS5jaGVja1JvdyhpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51blNlbGVjdERhdGFncmlkUm9sZS51bkNoZWNrUm93KGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG4iXX0=