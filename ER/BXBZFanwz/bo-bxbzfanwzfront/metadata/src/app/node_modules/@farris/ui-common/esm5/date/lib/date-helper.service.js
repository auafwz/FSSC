/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-09-02 17:55:57
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-10-23 16:57:28
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { format, isValid, parseISO } from 'date-fns';
import { Injectable } from '@angular/core';
import { MyDateConverter } from './myDateConverter';
import * as i0 from "@angular/core";
var DateTimeHelperService = /** @class */ (function () {
    function DateTimeHelperService() {
        this.$D = null;
        this.$D = new MyDateConverter();
    }
    /**
     * @param value 要转换格式的日期
     * @param fmt 格式化字符串
     *
     * 更多的格式化请参考
     * [点我点我](https://date-fns.org/v1.30.1/docs/format)
     */
    /**
     * @param {?} value 要转换格式的日期
     * @param {?=} fmt 格式化字符串
     *
     * 更多的格式化请参考
     * [点我点我](https://date-fns.org/v1.30.1/docs/format)
     * @return {?}
     */
    DateTimeHelperService.prototype.formatTo = /**
     * @param {?} value 要转换格式的日期
     * @param {?=} fmt 格式化字符串
     *
     * 更多的格式化请参考
     * [点我点我](https://date-fns.org/v1.30.1/docs/format)
     * @return {?}
     */
    function (value, fmt) {
        if (fmt === void 0) { fmt = 'yyyy-MM-dd'; }
        if (!value) {
            return '';
        }
        if (typeof value === 'string' && value.indexOf('0001') > -1) {
            return '';
        }
        if (value instanceof Date) {
            return format(value, fmt);
        }
        /** @type {?} */
        var _d = parseISO(value);
        if (_d == 'Invalid Date') {
            _d = this.createDate(value) || new Date(value);
        }
        // const d = parseISO(value);
        if (isValid(_d)) {
            /** @type {?} */
            var d = parseISO(format(_d, 'yyyy-MM-dd HH:mm:ss'));
            return format(d, fmt);
        }
        else {
            throw new Error('给定的值不能转换为日期');
        }
    };
    /**
     * @private
     * @param {?} val
     * @return {?}
     */
    DateTimeHelperService.prototype.createDate = /**
     * @private
     * @param {?} val
     * @return {?}
     */
    function (val) {
        return this.$D.create(val);
    };
    DateTimeHelperService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    DateTimeHelperService.ctorParameters = function () { return []; };
    /** @nocollapse */ DateTimeHelperService.ngInjectableDef = i0.defineInjectable({ factory: function DateTimeHelperService_Factory() { return new DateTimeHelperService(); }, token: DateTimeHelperService, providedIn: "root" });
    return DateTimeHelperService;
}());
export { DateTimeHelperService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    DateTimeHelperService.prototype.$D;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1oZWxwZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktY29tbW9uL2RhdGUvIiwic291cmNlcyI6WyJsaWIvZGF0ZS1oZWxwZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFRQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDckQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7O0FBRXBEO0lBT0k7UUFGUSxPQUFFLEdBQUcsSUFBSSxDQUFDO1FBR2QsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLGVBQWUsRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFDRDs7Ozs7O09BTUc7Ozs7Ozs7OztJQUNILHdDQUFROzs7Ozs7OztJQUFSLFVBQVMsS0FBVSxFQUFFLEdBQTBCO1FBQTFCLG9CQUFBLEVBQUEsa0JBQTBCO1FBQzNDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDUixPQUFPLEVBQUUsQ0FBQztTQUNiO1FBRUQsSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUN6RCxPQUFPLEVBQUUsQ0FBQztTQUNiO1FBRUQsSUFBSSxLQUFLLFlBQVksSUFBSSxFQUFFO1lBQ3ZCLE9BQU8sTUFBTSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztTQUM3Qjs7WUFFRyxFQUFFLEdBQVEsUUFBUSxDQUFDLEtBQUssQ0FBQztRQUU3QixJQUFJLEVBQUUsSUFBSSxjQUFjLEVBQUU7WUFDdEIsRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDbEQ7UUFFRCw2QkFBNkI7UUFDN0IsSUFBSSxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7O2dCQUNQLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1lBQ3JELE9BQU8sTUFBTSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUN6QjthQUFNO1lBQ0gsTUFBTSxJQUFJLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUNsQztJQUNMLENBQUM7Ozs7OztJQUVPLDBDQUFVOzs7OztJQUFsQixVQUFtQixHQUFHO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsQ0FBQzs7Z0JBL0NKLFVBQVUsU0FBQztvQkFDUixVQUFVLEVBQUUsTUFBTTtpQkFDckI7Ozs7O2dDQWREO0NBNkRDLEFBakRELElBaURDO1NBOUNZLHFCQUFxQjs7Ozs7O0lBRTlCLG1DQUFrQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQERhdGU6IDIwMTktMDktMDIgMTc6NTU6NTdcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMTAtMjMgMTY6NTc6MjhcclxuICogQFFROiAxMDU1ODE4MjM5XHJcbiAqIEBWZXJzaW9uOiB2MC4wLjFcclxuICovXHJcbmltcG9ydCB7IGZvcm1hdCwgaXNWYWxpZCwgcGFyc2VJU08gfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTXlEYXRlQ29udmVydGVyIH0gZnJvbSAnLi9teURhdGVDb252ZXJ0ZXInO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYXRlVGltZUhlbHBlclNlcnZpY2Uge1xyXG5cclxuICAgIHByaXZhdGUgJEQgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuJEQgPSBuZXcgTXlEYXRlQ29udmVydGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB2YWx1ZSDopoHovazmjaLmoLzlvI/nmoTml6XmnJ9cclxuICAgICAqIEBwYXJhbSBmbXQg5qC85byP5YyW5a2X56ym5LiyXHJcbiAgICAgKlxyXG4gICAgICog5pu05aSa55qE5qC85byP5YyW6K+35Y+C6ICDXHJcbiAgICAgKiBb54K55oiR54K55oiRXShodHRwczovL2RhdGUtZm5zLm9yZy92MS4zMC4xL2RvY3MvZm9ybWF0KVxyXG4gICAgICovXHJcbiAgICBmb3JtYXRUbyh2YWx1ZTogYW55LCBmbXQ6IHN0cmluZyA9ICd5eXl5LU1NLWRkJykge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuaW5kZXhPZignMDAwMScpID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0KHZhbHVlLCBmbXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9kOiBhbnkgPSBwYXJzZUlTTyh2YWx1ZSk7XHJcblxyXG4gICAgICAgIGlmIChfZCA9PSAnSW52YWxpZCBEYXRlJykge1xyXG4gICAgICAgICAgICBfZCA9IHRoaXMuY3JlYXRlRGF0ZSh2YWx1ZSkgfHwgbmV3IERhdGUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc3QgZCA9IHBhcnNlSVNPKHZhbHVlKTtcclxuICAgICAgICBpZiAoaXNWYWxpZChfZCkpIHtcclxuICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSVNPKGZvcm1hdChfZCwgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQoZCwgZm10KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+e7meWumueahOWAvOS4jeiDvei9rOaNouS4uuaXpeacnycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZURhdGUodmFsKSAgICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRELmNyZWF0ZSh2YWwpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=