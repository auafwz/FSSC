/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, Renderer2, Output, EventEmitter, ViewEncapsulation, ChangeDetectorRef, Injector } from '@angular/core';
import { NotifyService } from '@farris/ui-notify';
import { LocaleService } from '@farris/ui-locale';
import { MsgInfo } from './discussion-editor.interface';
import { HttpClient } from '@angular/common/http';
import { of } from 'rxjs';
export class DiscussionEditorComponent {
    /**
     * @param {?} renderer
     * @param {?} elementRef
     * @param {?} cd
     * @param {?} notifyService
     * @param {?} injector
     * @param {?} http
     */
    constructor(renderer, elementRef, cd, notifyService, injector, http) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.cd = cd;
        this.notifyService = notifyService;
        this.injector = injector;
        this.http = http;
        this.personnelsPrimaryKey = 'id';
        this.personnelsDisplayKey = 'name';
        this.replyPersonnelsDisplayKey = 'userName';
        // @Input() personnels: Array<any> = [];
        // @Input() permissionList: Array<any> = [
        //     { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },
        //     { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }
        // ];
        this.cancelVisible = true;
        this.editHeight = 130;
        this.type = 'user';
        // 人事弹窗列表数据
        this._personnels = [];
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        // 对外
        this.valueChange = new EventEmitter();
        /**
         * 附件预览
         */
        this.filePreview = new EventEmitter();
        /**
         * 附件删除
         */
        this.fileRemove = new EventEmitter();
        this.fileUploadDone = new EventEmitter();
        this.personnelSearch = new EventEmitter();
        this.getOugUsers = new EventEmitter();
        // @ViewChild('searchInput') searchInput;
        // 审批意见
        this.textValue = '';
        // 暂存人员信息
        this.tempPersonnelsValue = '';
        // 暂存部门
        this.tempSectionValue = '';
        // 搜索人事管理弹窗
        this.personModalVisible = false;
        // 选择要发送的人员列表
        this.selectedPersonnels = [];
        // 选择要发送的部门
        this.selectedSection = [];
        // 暂存人员信息，用于搜索
        this.copyPersonnels = [];
        this.innerPersonnels = [];
        this.relativeVisible = false;
        //上传附件是否显示
        this.attachFilesModalVisible = false;
        this.pageSize = 20;
        this.searchPersonnelList = {};
        this.showSearchList = false;
        this.permissionList = [];
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        this.localeService = this.injector.get(LocaleService);
    }
    /**
     * @return {?}
     */
    get personnels() {
        return this._personnels;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set personnels(val) {
        if (val) {
            this._personnels = val;
            this.innerPersonnels = this._personnels;
            this.copyPersonnels = this._personnels;
            // this.copyPersonnels = this._personnels;
        }
    }
    /**
     * @return {?}
     */
    get replyUser() {
        return this._replyUser;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set replyUser(val) {
        if (val) {
            this._replyUser = val;
            if (this._replyUser['id']) {
                this.editorFocus();
            }
        }
    }
    /**
     * @return {?}
     */
    get attachFiles() {
        return this._attachFiles;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set attachFiles(val) {
        if (val) {
            this._attachFiles = val;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const self = this;
        this.renderer.listen(document, 'click', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            self.personModalVisible = false;
            self.relativeVisible = false;
        }));
        // this.copyPersonnels = this.personnels;
        this.el = this.elementRef.nativeElement;
        this.permissionList = [
            { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },
            { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }
        ];
        this.permission = this.permissionList[0];
        this.options = { maxUploads: 3, maxFileSize: 10240, allowedContentTypes: ['.jpg', '.pdf'] };
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
    }
    /**
     * 单个附件上传完成
     * @param {?} ev
     * @return {?}
     */
    fUploadDoneHandler(ev) {
        this.fileUploadDone.emit(ev);
    }
    /**
     * 上传附件中单个附件删除完成
     * @param {?} ev
     * @return {?}
     */
    fUploadRemovedHandler(ev) {
        console.log('fUploadRemovedHandler');
        console.log(ev);
    }
    /**
     * 附件列表中预览
     * @param {?} info
     * @return {?}
     */
    filePreviewEventHandler(info) {
        this.filePreview.emit(info);
    }
    /**
     * 附件列表中删除
     * @param {?} file
     * @return {?}
     */
    fileRemoveEventHandler(file) {
        this.fileRemove.emit(file);
    }
    // 文本框失去焦点触发
    /**
     * @param {?=} e
     * @return {?}
     */
    setTextValue(e = null) {
        if (e) {
            // console.log(e.target.innerHTML);
            this.tempTextValue = e.target.innerHTML;
            this.textValue = this.tempTextValue;
        }
        // if (this.tempTextValue) {
        //     this.textValue = this.tempTextValue
        // }
        if (this.tempPersonnelsValue) {
            this.textValue += this.tempPersonnelsValue;
        }
        if (this.tempSectionValue) {
            this.textValue += this.tempSectionValue;
        }
        this.tempTextValue = '';
        this.tempPersonnelsValue = '';
        this.tempSectionValue = '';
    }
    // 监听键盘事件, 主要是用于删除@人
    /**
     * @param {?} e
     * @return {?}
     */
    listenEditorValueChange(e) {
        this.tempTextValue = e.target.innerHTML;
        /** @type {?} */
        const children = e.target.children;
        /** @type {?} */
        const childrenId = [];
        for (let i = 0; i < children.length; i++) {
            childrenId.push(children[i].id);
        }
        this.selectedPersonnels.forEach((/**
         * @param {?} personnel
         * @param {?} index
         * @return {?}
         */
        (personnel, index) => {
            if (!childrenId.includes(personnel[this.personnelsPrimaryKey])) {
                this.selectedPersonnels.splice(index, 1);
            }
        }));
        this.selectedSection.forEach((/**
         * @param {?} section
         * @param {?} index
         * @return {?}
         */
        (section, index) => {
            if (!childrenId.includes(section[this.personnelsPrimaryKey])) {
                this.selectedSection.splice(index, 1);
            }
        }));
        if (!this.tempTextValue) {
            this.tempTextValue = '';
        }
    }
    /**
     * 搜索人员
     * @return {?}
     */
    serachPersonnel() {
        // if (this.personnelText) {
        //     this.innerPersonnels = this.copyPersonnels.filter(item => {
        //         if(item[this.personnelsDisplayKey]){
        //             return item[this.personnelsDisplayKey].indexOf(this.personnelText) !== -1;
        //         }
        //     })
        // }
        // else {
        //     this.innerPersonnels = this.copyPersonnels;
        // }
        if (this.personnelText) {
            this.showSearchList = true;
            this.getSearchData(this.personnelText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            d => {
                if (d.hasOwnProperty("users")) {
                    this.searchPersonnelList = d;
                    this.setPersonModalPosition();
                }
            }));
        }
        else {
            this.showSearchList = false;
        }
        // this.searchInput.nativeElement.blur();
        //暂时注释掉服务器端查询
        // this.personnelSearch.emit(this.personnelText);
    }
    /**
     * 搜索下一页
     * @return {?}
     */
    getMoreSearchData() {
        this.getSearchData(this.personnelText, this.searchPersonnelList.pageIndex + 1).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        d => {
            if (d.hasOwnProperty("users")) {
                this.searchPersonnelList.pageIndex = d['pageIndex'];
                this.searchPersonnelList['users'] = [...this.searchPersonnelList['users'], ...d['users']];
            }
        }));
    }
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    getSearchData(text, pageIndex, pageSize = this.pageSize) {
        if (this.personSearchUrl) {
            /** @type {?} */
            const url = `${this.personSearchUrl}?param=${text}&pageSize=${pageSize}&pageIndex=${pageIndex}`;
            //console.log(url);
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    }
    /**
     * @param {?} item
     * @return {?}
     */
    personnelChecked(item) {
        item.active = !item.active;
        this.innerPersonnels = this.innerPersonnels.map((/**
         * @param {?} o
         * @return {?}
         */
        o => (Object.assign({}, o))));
        this.cd.markForCheck();
        this.appendPersonnels();
    }
    // 增加@人员
    /**
     * @return {?}
     */
    appendPersonnels() {
        /** @type {?} */
        let selectedList = [];
        if (!this.showSearchList) {
            selectedList = this.innerPersonnels.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => item.active === true));
        }
        else {
            selectedList = this.searchPersonnelList['users'].filter((/**
             * @param {?} item
             * @return {?}
             */
            item => item.active === true));
        }
        if (selectedList.length) {
            this.appendPersonnel(selectedList);
        }
        this.resetPersonnels();
        this.setTextValue();
        this.personModalVisible = false;
    }
    //高级搜索人员添加
    /**
     * @param {?} listData
     * @return {?}
     */
    appendPersonnelsList(listData) {
        if (listData.length) {
            this.appendPersonnel(listData, true);
        }
        this.setTextValue();
    }
    //循环增加人员
    /**
     * @param {?} listData
     * @param {?=} external
     * @return {?}
     */
    appendPersonnel(listData, external = false) {
        listData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (this.selectedPersonnels.length && this._isInArray(item[this.personnelsPrimaryKey], this.personnelsPrimaryKey, this.selectedPersonnels)) {
                return;
            }
            else {
                //if (!external) {
                this.tempPersonnelsValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[this.personnelsPrimaryKey] + '" userid="' + item[this.personnelsPrimaryKey] + '">@' + item[this.personnelsDisplayKey] + '</a>&nbsp;';
                // }
                // else {
                //     this.tempPersonnelsValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[this.personnelsPrimaryKey] + '" userid="' + item[this.personnelsPrimaryKey] + '">@' + item[this.replyPersonnelsDisplayKey] + '</a>';
                // }
                this.selectedPersonnels.push(item);
            }
        }));
    }
    /**
     * 添加部门
     * @param {?} listData
     * @return {?}
     */
    appendSectionList(listData) {
        if (listData.length) {
            this.appendSection(listData);
        }
        this.setTextValue();
    }
    /**
     * @param {?} listData
     * @return {?}
     */
    appendSection(listData) {
        listData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (this.selectedSection.length && this._isInArray(item[this.personnelsPrimaryKey], this.personnelsPrimaryKey, this.selectedSection)) {
                return;
            }
            else {
                this.tempSectionValue += '<a name="org" contenteditable="false" class="at-org" id="' + item[this.personnelsPrimaryKey] + '" orgid="' + item[this.personnelsPrimaryKey] + '">@' + item['name'] + '</a>&nbsp;';
                this.selectedSection.push(item);
            }
        }));
    }
    // 判断是否在数组
    /**
     * @private
     * @param {?} value
     * @param {?} fieldInArray
     * @param {?} array
     * @return {?}
     */
    _isInArray(value, fieldInArray, array) {
        if (!value || !fieldInArray) {
            return false;
        }
        return array.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        item => value === item[fieldInArray])) === -1 ? false : true;
    }
    /**
     * 关闭人事管理弹窗
     * @return {?}
     */
    resetPersonnels() {
        this.showSearchList = false;
        this.personModalVisible = false;
        this.innerPersonnels = this.copyPersonnels;
        if (this.innerPersonnels.length) {
            this.innerPersonnels.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => item.active = false));
        }
        this.personnelText = '';
        // this.stopBubble(e);
    }
    /**
     * 打开人员管理
     * @param {?} e 事件
     * @return {?}
     */
    openModalPerson(e) {
        this.personModalVisible = !this.personModalVisible;
        setTimeout((/**
         * @return {?}
         */
        () => {
            if (this.personModalVisible) {
                this.setPersonModalPosition();
            }
        }), 0);
        // this.getPersonnelList();
        this.stopBubble(e);
    }
    /**
     * @return {?}
     */
    setPersonModalPosition() {
        /** @type {?} */
        let winH = window.innerHeight;
        /** @type {?} */
        let ModalBottom = this.personModal.nativeElement.getBoundingClientRect().bottom;
        if (winH < ModalBottom) {
            this.personModal.nativeElement.scrollIntoView(false);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    openModalPermission(e) {
        this.relativeVisible = !this.relativeVisible;
        this.stopBubble(e);
    }
    /**
     * 打开上传附件
     * @param {?} e
     * @return {?}
     */
    openModalFile(e) {
        this.attachFilesModalVisible = !this.attachFilesModalVisible;
        this.stopBubble(e);
    }
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    stopBubble(e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    }
    /**
     * 提交评语
     * @return {?}
     */
    submitApproval() {
        if (!this.textValue) {
            /** @type {?} */
            let notEmptyText = this.localeService.getValue('discussionGroup.notEmpty');
            if (notEmptyText) {
                this.notifyService.error(notEmptyText);
            }
            return;
        }
        /** @type {?} */
        let editAttachFiles = [];
        if (this.attachFiles && this.attachFiles.length) {
            this.attachFiles.forEach((/**
             * @param {?} file
             * @return {?}
             */
            file => {
                /** @type {?} */
                let id = file['id'];
                /** @type {?} */
                let name = file['name'];
                /** @type {?} */
                let size = file['size'];
                /** @type {?} */
                let metadataId = file['extend']['metadataId'];
                /** @type {?} */
                let attachFile = {
                    id,
                    name,
                    size,
                    metadataId
                };
                editAttachFiles.push(attachFile);
            }));
        }
        this.valueChange.emit({
            msgInfo: MsgInfo.Confirm,
            text: this.textValue,
            mailTos: this.selectedPersonnels,
            mailToSections: this.selectedSection,
            visibility: this.permission.value,
            parentId: (this.replyUser && this.replyUser.hasOwnProperty('id')) ? this.replyUser.id : null,
            attachFiles: editAttachFiles.length ? editAttachFiles : null
        });
        this.textValue = '';
        this.selectedPersonnels = [];
        this.selectedSection = [];
        this.attachFiles = [];
        this.replyUser = {};
    }
    /**
     * @return {?}
     */
    cancel() {
        this.valueChange.emit({
            msgInfo: MsgInfo.Cancel,
            text: null,
            mailTos: [],
            mailToSections: [],
            visibility: null,
            parentId: null,
            attachFiles: null
        });
        this.textValue = '';
        this.selectedPersonnels = [];
        this.selectedSection = [];
        this.attachFiles = [];
        this.replyUser = {};
    }
    /**
     * 修改查看权限
     * @param {?} value
     * @return {?}
     */
    changePermission(value) {
        this.permission = this.permissionList.find((/**
         * @param {?} item
         * @return {?}
         */
        item => item.value === value));
        this.relativeVisible = false;
    }
    //获得焦点
    /**
     * @return {?}
     */
    editorFocus() {
        this.editor.nativeElement.focus();
    }
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     * @param {?} event
     * @return {?}
     */
    selectionsChangePar(event) {
        //this.resetPersonnels();
        if (event.data.users.length) {
            /** @type {?} */
            let userList = [];
            event.data.users.forEach((/**
             * @param {?} user
             * @return {?}
             */
            user => {
                userList.push(user.data);
            }));
            this.appendPersonnelsList(userList);
        }
        if (event.data.section.length) {
            /** @type {?} */
            let sectionList = [];
            event.data.section.forEach((/**
             * @param {?} sec
             * @return {?}
             */
            sec => {
                sectionList.push(sec.data);
            }));
            this.appendSectionList(sectionList);
        }
        this.selectionsChange.emit(event);
    }
    /**
     * 高级人员中选中某行
     * @param {?} event
     * @return {?}
     */
    lineDataChangePar(event) {
        this.lineDataChange.emit(event);
    }
    /**
     * 获得占位头像
     * @param {?} item
     * @return {?}
     */
    getAvatar(item) {
        if (item && item[this.personnelsDisplayKey]) {
            /** @type {?} */
            let str = item[this.personnelsDisplayKey];
            return str.substring(str.length - 2, str.length);
        }
        else {
            return '';
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    ougUsers(event) {
        this.getOugUsers.emit(event);
    }
}
DiscussionEditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-discussion-editor',
                template: "<div class=\"farris-discussion-group-reply-tip\" *ngIf=\"replyUser && replyUser.id\">\r\n    {{ 'discussionGroup.reply' | locale }} &nbsp;\r\n    <span class=\"farris-discussion-group-reply-tip-name\">\r\n        {{replyUser[replyPersonnelsDisplayKey]}}\r\n    </span>\r\n    \uFF1A\r\n</div>\r\n<div class=\"f-discussion-group-edit\">\r\n    <div class=\"f-discussion-group-edit-container\" [ngStyle]=\"{'height': editHeight + 'px'}\">\r\n        <div class=\"textarea-editor\" #editor (keyup)=\"listenEditorValueChange($event)\" (blur)=\"setTextValue($event)\"\r\n            contenteditable=\"true\" [innerHTML]=\"textValue | safeHtml\"></div>\r\n    </div>\r\n    <!-- \u9644\u4EF6\u90E8\u5206 <div class=\"f-discussion-group-edit-files\" *ngIf=\"attachFiles && attachFiles.length\">\r\n        <f-file-preview class=\"d-flex flex-wrap\" [itemCls]=\"'demo-view-item'\" [fileInfos]=\"attachFiles\"\r\n            (filePreviewEvent)=\"filePreviewEventHandler($event)\" (fileRemoveEvent)=\"fileRemoveEventHandler($event)\"\r\n            #filePreview>\r\n            <ng-template filePreviewListTypeTemplate let-data let-readonly=\"readonly\">\r\n                <div class=\"ffilepreview--item-detail\">\r\n                    <div class=\"ffilepreview--item-icon\">\r\n                        <span class=\"ffilepreview--filetype-icon\" [ngClass]=\"filePreview.getFileTypeClassName(data.name)\"></span>\r\n                    </div>\r\n                    <div class=\"ffilepreview--item-content\">\r\n                        <a class=\"item-content--title\" [title]=\"data.name\"\r\n                            (click)=\"filePreview.filePreviewHandler($event,data)\">{{data.name}}</a>\r\n                        <div class=\"item-content--toolbar f-text-light\">\r\n                            <button class=\"btn btn-link\" (click)=\"filePreview.filePreviewHandler($event,data)\">\r\n                                <span class=\"f-icon f-icon-preview\"></span>\u9884\u89C8\r\n                            </button>\r\n                            <button class=\"btn btn-link\" (click)=\"filePreview.fileRemoveHandler($event,data)\">\r\n                                <span class=\"f-icon f-icon-delete\"></span>\u5220\u9664\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n        </f-file-preview>\r\n    </div> -->\r\n    <div class=\"f-discussion-group-edit-footer\">\r\n        <div class=\"f-discussion-group-edit-toolbar\">\r\n            <!-- <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-file\" (click)=\"openModalFile($event)\">\r\n                <div class=\"toolbar-item-text\">\r\n                    <span class=\"toolbar-icon f-icon f-icon-attachment\"></span>\r\n                    <span class=\"toolbar-text\">\u9644\u4EF6</span>\r\n                </div>\r\n            </div> -->\r\n            <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-about\">\r\n                <div class=\"toolbar-item-text\" (click)=\"openModalPerson($event)\">\r\n                    <span class=\"toolbar-icon\">@</span>\r\n                    <span class=\"toolbar-text\">{{ 'discussionGroup.colleague' | locale }}</span>\r\n                </div>\r\n                <div class=\"f-discussion-group-about-dropdown\" *ngIf=\"personModalVisible\" (click)=\"stopBubble($event)\" #personModal>\r\n                    <div class=\"f-discussion-group-about-search\">\r\n                        <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"personnelText\" (enterHandle)=\"serachPersonnel()\" (clickHandle)=\"serachPersonnel()\" (valueChange)=\"serachPersonnel()\"></input-group>\r\n                    </div>\r\n                    <div class=\"f-discussion-group-about-content\">\r\n                        <div class=\"f-discussion-group-about-used\" [hidden]=\"showSearchList\">\r\n                            <ul class=\"f-discussion-group-about-dropdown-list\">\r\n                                <ng-template [ngIf]=\"innerPersonnels.length\">\r\n                                    <li *ngFor=\"let item of innerPersonnels\" (click)=\"item.active = !item.active\" class=\"d-flex f-discussion-group-about-dropdown-list-item\"\r\n                                        [class.active]=\"item.active\">\r\n                                        <span class=\"f-icon f-icon-check\"></span>\r\n                                        <img [src]=\"item.imgData\" class=\"about-list-item-avatar\" *ngIf=\"item.imgData\"/>\r\n                                        <div class=\"about-list-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n                                        <div class=\"f-discussion-group-about-dropdown-list-detail f-utils-fill\">\r\n                                            <div class=\"about-list-detail-text\">{{item[personnelsDisplayKey]}}</div>\r\n                                            <div class=\"about-list-detail-subtext\">{{item.email}}</div>\r\n                                        </div>\r\n                                    </li>\r\n                                </ng-template>\r\n                                <ng-template [ngIf]=\"!innerPersonnels.length\">\r\n                                    <li class=\"f-discussion-group-about-dropdown-list-item about-dropdown-list-item-empty\">{{ 'discussionGroup.emptyMessage' | locale }}</li>\r\n                                </ng-template>\r\n                            </ul>        \r\n                        </div>\r\n                        <div class=\"f-discussion-group-about-searchlist\" [hidden]=\"!showSearchList\">\r\n                            <ul class=\"f-discussion-group-about-dropdown-list\">\r\n                                <ng-template [ngIf]=\"searchPersonnelList && searchPersonnelList.users && searchPersonnelList.users.length\">\r\n                                    <li *ngFor=\"let item of searchPersonnelList['users']\" (click)=\"item.active = !item.active\" class=\"d-flex f-discussion-group-about-dropdown-list-item\"\r\n                                        [class.active]=\"item.active\">\r\n                                        <span class=\"f-icon f-icon-check\"></span>\r\n                                        <img [src]=\"item.imgData\" class=\"about-list-item-avatar\" *ngIf=\"item.imgData\"/>\r\n                                        <div class=\"about-list-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n                                        <div class=\"f-discussion-group-about-dropdown-list-detail f-utils-fill\">\r\n                                            <div class=\"about-list-detail-text\">{{item[personnelsDisplayKey]}}</div>\r\n                                            <!-- <div class=\"about-list-detail-subtext\">{{item.email}}</div> -->\r\n                                            <div class=\"about-list-detail-subtext\">\r\n                                                <span [innerHTML]=\"item | getOrgText:sectionData\"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"searchPersonnelList.pageIndex < searchPersonnelList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                    </div>\r\n                                </ng-template>\r\n                                <ng-template [ngIf]=\"searchPersonnelList && searchPersonnelList.users && !searchPersonnelList.users.length\">\r\n                                    <li class=\"f-discussion-group-about-dropdown-list-item\">{{ 'discussionGroup.emptyMessage' | locale }}</li>\r\n                                </ng-template>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-about-list-btns d-flex\">\r\n                        <div class=\"f-about-list-btns-left\">\r\n                            <farris-discussion-personnel \r\n                            [sectionData]=\"sectionData\"\r\n                            [orgUrl]=\"orgUrl\"\r\n                            [personSearchUrl]=\"personSearchUrl\"\r\n                            (selectionsChange)=\"selectionsChangePar($event)\"\r\n                            (lineDataChange)=\"lineDataChangePar($event)\"\r\n                            (ougUsers)=\"ougUsers($event)\"\r\n                            ></farris-discussion-personnel>\r\n                        </div>\r\n                        <div class=\"f-about-list-btns-right\">\r\n                            <button class=\"btn btn-secondary\" (click)=\"resetPersonnels()\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n                            <button class=\"btn btn-primary\" (click)=\"appendPersonnels()\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-dropdown\">\r\n                <div class=\"toolbar-dropdown-text\" (click)=\"openModalPermission($event)\">\r\n                    <span class=\"toolbar-text\">{{permission.text}}</span>\r\n                    <span class=\"f-icon f-icon-collapse toolbar-icon\"></span>\r\n                </div>\r\n                <div class=\"toolbar-dropdown-list dropdownlist\" *ngIf=\"relativeVisible\">\r\n                    <ul *ngIf=\"permissionList && permissionList.length\">\r\n                        <li *ngFor=\"let item of permissionList\" class=\"dropdown-item\" [class.active]=\"permission?.value === item.value\"\r\n                            (click)=\"changePermission(item.value)\">{{item.text}}</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-discussion-group-edit-btns\">\r\n            <button class=\"btn btn-link f-discussion-cancel\" *ngIf=\"cancelVisible\" (click)=\"cancel()\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n            <button class=\"btn btn-primary\" (click)=\"submitApproval()\">{{ 'discussionGroup.submit' | locale }}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- <div class=\"f-discussion-group-file-upload\" [hidden]=\"!attachFilesModalVisible\">\r\n    <f-file-upload\r\n        (fUploadDoneEvent)=\"fUploadDoneHandler($event)\"\r\n        (fUploadRemovedEvent)=\"fUploadRemovedHandler($event)\">\r\n    </f-file-upload>\r\n</div> -->",
                encapsulation: ViewEncapsulation.None,
                styles: [":host{display:block}.f-discussion-group-edit{border:1px solid #dcdcdc;background:#fff}.f-discussion-group-edit .f-discussion-group-edit-container{width:100%;position:relative}.f-discussion-group-edit .f-discussion-group-edit-container .textarea-editor{width:100%;height:100%;padding:8px;margin:0 auto;outline:0;overflow-y:auto;word-break:break-all;white-space:normal;resize:none}.f-discussion-group-edit .f-discussion-group-edit-container .textarea-editor a{color:#3487e3}.f-discussion-group-edit .f-discussion-group-edit-footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between;padding:10px 14px;background:#f7f7f7}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;flex-wrap:wrap}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item{cursor:pointer;color:rgba(0,0,0,.65)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-item-text{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;line-height:22px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-text{margin-left:2px;font-size:14px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-icon{color:#667580;font-size:16px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-file{margin-right:12px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about{position:relative;margin-right:32px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown{position:absolute;top:calc(100% + 6px);left:0;width:300px;padding-top:16px;z-index:999;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list{max-height:282px;margin-top:10px;overflow-y:auto}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar{width:7px;height:7px;background-color:#8e8e8e}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar-track{border-radius:0;background-color:#fff;border:0;background-clip:padding-box;border-right:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar-thumb{border-radius:3px;background-color:#dbdbdb;border:0;background-clip:content-box;opacity:.6;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item{padding:3px 14px;list-style:none;-webkit-box-align:center;align-items:center}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail{margin-left:6px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail .about-list-detail-text{line-height:20px;font-size:12px;color:#0a131a;margin:0 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail .about-list-detail-subtext{font-size:12px;color:#8f9ca6;line-height:20px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-icon-check{border:1px solid #d8d9d9;color:#fff;font-size:15px;border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-icon-check::before{content:''}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.active .f-icon-check{border:none;background:#4c91ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.active .f-icon-check::before{content:'\\e118'}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .about-list-item-avatar{display:block;width:30px;height:30px;margin-left:6px;border-radius:50%;overflow:hidden}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .about-list-item-avatar-tip{width:32px;height:32px;margin-left:6px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item:hover{background:#e6f7ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.about-dropdown-list-item-empty{cursor:default}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.about-dropdown-list-item-empty:hover{background:#fff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-search{padding:0 14px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns{-webkit-box-pack:justify;justify-content:space-between;background:#faf9f9;border-top:1px solid #efefef;padding:10px 15px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns .btn{margin-right:10px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns .btn:last-child{margin-right:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown{position:relative}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-text{cursor:pointer}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-icon{color:rgba(0,0,0,.25)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-text{margin-left:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list{position:absolute;left:0;top:calc(100% + 6px);z-index:999;padding:2px 0;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul{max-width:220px;overflow-y:auto}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul li{font:14px/28px Microsoft yahei;padding:0 15px 0 10px;word-break:keep-all}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul li:hover{background:#e6f7ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-btns{flex-shrink:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-btns .f-discussion-cancel{margin-right:12px;font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-edit .f-discussion-group-edit-files{padding:10px 14px 0}.f-discussion-group-edit .f-discussion-group-edit-files .ffilepreview--filetype-icon{width:32px;height:32px}.farris-discussion-group-reply-tip{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:10px;font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-file-upload{margin-top:10px}.f-discussion-dialog-content{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;height:100%;padding:14px;overflow:hidden}.f-discussion-dialog-content-left{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:600px;height:100%;padding:0}.f-discussion-dialog-content-left .f-discussion-personnel-search{flex-shrink:0;position:relative;margin-bottom:7px}.f-discussion-dialog-content-left .f-discussion-tab-content{border:1px solid #dcdcdc;border-radius:2px;padding:12px 0 7px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs{flex-shrink:0;position:relative;width:100%;height:32px;padding:0 12px;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list{width:100%;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item{display:-webkit-box;display:flex;flex-wrap:nowrap;flex-shrink:0;-webkit-box-align:center;align-items:center;line-height:20px;font-size:14px;color:rgba(0,0,0,.85);cursor:pointer}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item .crumbs-text{padding:0 2px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item:first-child .crumbs-text{padding-left:0}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item.crumbs-list-item-disabled{color:rgba(0,0,0,.55)}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-ellipsis{-webkit-box-align:center;align-items:center;position:absolute;left:12px;top:0;width:30px;height:32px;line-height:32px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-padding{padding-left:30px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content.f-discussion-personnel-content-hide{display:none!important}.f-discussion-dialog-content-right{height:100%;margin-left:14px;padding:0;border:1px solid #dcdcdc;border-radius:2px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;height:36px;padding:0 14px;background:#fafafa}.f-discussion-dialog-content-right .f-discussion-selected-personnel-header-text{font-size:14px;line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content{padding:8px 0}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;padding:6px 12px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-text{line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-text .f-discussion-selected-name{font-size:14px;color:rgba(0,0,0,.85)}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-tip{font-size:12px;color:rgba(0,0,0,.35);line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-remove{display:none;color:#388fff;cursor:pointer}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item:hover{background:#f3fbff}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item:hover .f-discussion-selected-item-remove{display:block}.f-discussion-dialog-content .f-discussion-personnel-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:3px 14px 3px 3px;cursor:pointer}.f-discussion-dialog-content .f-discussion-personnel-item-avatar{flex-shrink:0;width:36px;height:36px;margin-right:5px;border-radius:50%;overflow:hidden}.f-discussion-dialog-content .f-discussion-personnel-item-avatar img{display:block;width:100%}.f-discussion-dialog-content .f-discussion-personnel-item-text{flex-shrink:1;-webkit-box-flex:1;flex-grow:1;flex-basis:0;padding-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.f-discussion-dialog-content .f-discussion-personnel-item-text .f-discussion-personnel-name{line-height:20px;font-size:12px;color:#0a131a}.f-discussion-dialog-content .f-discussion-personnel-item-text .f-discussion-personnel-mail{line-height:20px;font-size:12px;color:#8f9ca6}.f-discussion-dialog-content .f-discussion-personnel-item-remove{display:none}.f-discussion-dialog-content .f-discussion-personnel-item:hover{background:#f3fbff}.f-discussion-dialog-content .f-discussion-personnel-item:hover .f-discussion-personnel-item-remove{display:block}.f-discussion-dialog-content .f-discussion-personnel-item.active{background:#def1ff}.f-discussion-dialog-content .f-discussion-personnel-item.selected{background:#fff;cursor:not-allowed}.f-discussion-dialog-content .f-discussion-personnel-item.selected .f-discussion-personnel-mail,.f-discussion-dialog-content .f-discussion-personnel-item.selected .f-discussion-personnel-name{color:#c1c1c1}.f-discussion-dialog-content .f-discussion-personnel-empty{padding:3px 14px;list-style:none;-webkit-box-align:center;align-items:center}.f-discussion-dialog-content .f-discussion-section-list-empty{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100%}.f-discussion-dialog-content .f-discussion-section-list-empty .f-icon{margin-bottom:8px;font-size:26px;color:#e2e6f0}.f-discussion-dialog-content .f-discussion-section-list-empty .section-list-empty-text{font-size:13px;color:rgba(0,0,0,.25)}.f-discussion-dialog-content .f-discussion-personnel-item-tip{width:36px;height:36px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-dialog-content .f-discussion-section-list .section-list-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;height:32px;padding:0 12px;cursor:pointer}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-name{font-size:14px;color:rgba(0,0,0,.85);line-height:32px}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-next{flex-shrink:0;position:relative;padding-left:20px;padding-right:10px;line-height:20px;font-size:12px;color:#388fff;cursor:pointer}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-next::before{position:absolute;left:0;top:50%;width:1px;height:12px;margin-top:-6px;background:#d9d9d9;content:''}.f-discussion-dialog-content .f-discussion-section-list .section-list-item:hover{background:#f3f8ff}.f-discussion-dialog-content .f-discussion-section-list .section-list-item .section-list-item-checkbox.custom-control.custom-checkbox{margin-right:0;padding:0;margin-bottom:0}.f-discussion-dialog-content .f-discussion-section-list .person-list-item{height:auto;padding-top:7px;padding-bottom:6px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-img{flex-shrink:0;width:36px;height:36px;border-radius:50%;overflow:hidden}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-img img{display:block;width:100%;height:100%}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content{padding-left:6px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content .section-list-item-name{font-size:14px;color:rgba(0,0,0,.85);line-height:20px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content .section-list-item-tip{font-size:12px;color:rgba(0,0,0,.35);line-height:20px}.f-discussion-person-list-page{padding:10px 0;text-align:center;cursor:pointer}.f-discussion-person-list-page .section-page-text{font-size:14px;color:rgba(0,0,0,.55)}.f-discussion-person-list-page:hover .section-page-text{color:rgba(0,0,0,.85)}"]
            }] }
];
/** @nocollapse */
DiscussionEditorComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: NotifyService },
    { type: Injector },
    { type: HttpClient }
];
DiscussionEditorComponent.propDecorators = {
    personnelsPrimaryKey: [{ type: Input }],
    personnelsDisplayKey: [{ type: Input }],
    replyPersonnelsDisplayKey: [{ type: Input }],
    cancelVisible: [{ type: Input }],
    editHeight: [{ type: Input }],
    type: [{ type: Input }],
    orgUrl: [{ type: Input }],
    personSearchUrl: [{ type: Input }],
    treeIdField: [{ type: Input }],
    treeDisplayText: [{ type: Input }],
    sectionData: [{ type: Input }],
    personnels: [{ type: Input }],
    replyUser: [{ type: Input }],
    attachFiles: [{ type: Input }],
    selectionsChange: [{ type: Output }],
    lineDataChange: [{ type: Output }],
    valueChange: [{ type: Output }],
    filePreview: [{ type: Output }],
    fileRemove: [{ type: Output }],
    fileUploadDone: [{ type: Output }],
    personnelSearch: [{ type: Output }],
    getOugUsers: [{ type: Output }],
    editor: [{ type: ViewChild, args: ['editor',] }],
    personModal: [{ type: ViewChild, args: ['personModal',] }]
};
if (false) {
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelsPrimaryKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelsDisplayKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.replyPersonnelsDisplayKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.cancelVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.editHeight;
    /** @type {?} */
    DiscussionEditorComponent.prototype.type;
    /** @type {?} */
    DiscussionEditorComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionEditorComponent.prototype.treeIdField;
    /** @type {?} */
    DiscussionEditorComponent.prototype.treeDisplayText;
    /** @type {?} */
    DiscussionEditorComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionEditorComponent.prototype.options;
    /** @type {?} */
    DiscussionEditorComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionEditorComponent.prototype.sectiontreeData;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype._personnels;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype._replyUser;
    /** @type {?} */
    DiscussionEditorComponent.prototype._attachFiles;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionEditorComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionEditorComponent.prototype.valueChange;
    /**
     * 附件预览
     * @type {?}
     */
    DiscussionEditorComponent.prototype.filePreview;
    /**
     * 附件删除
     * @type {?}
     */
    DiscussionEditorComponent.prototype.fileRemove;
    /** @type {?} */
    DiscussionEditorComponent.prototype.fileUploadDone;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelSearch;
    /** @type {?} */
    DiscussionEditorComponent.prototype.getOugUsers;
    /** @type {?} */
    DiscussionEditorComponent.prototype.editor;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personModal;
    /** @type {?} */
    DiscussionEditorComponent.prototype.textValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempTextValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempPersonnelsValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempSectionValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personModalVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectedPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectedSection;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelText;
    /** @type {?} */
    DiscussionEditorComponent.prototype.copyPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.innerPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.el;
    /** @type {?} */
    DiscussionEditorComponent.prototype.token;
    /** @type {?} */
    DiscussionEditorComponent.prototype.relativeVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.permission;
    /** @type {?} */
    DiscussionEditorComponent.prototype.attachFilesModalVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionEditorComponent.prototype.searchPersonnelList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.permissionList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.localeService;
    /** @type {?} */
    DiscussionEditorComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1lZGl0b3IuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tZWRpdG9yL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFakssT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQWUsT0FBTyxFQUFrQixNQUFNLCtCQUErQixDQUFDO0FBQ3JGLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBUTFCLE1BQU0sT0FBTyx5QkFBeUI7Ozs7Ozs7OztJQXFIbEMsWUFDWSxRQUFtQixFQUNuQixVQUFzQixFQUN0QixFQUFxQixFQUNyQixhQUE0QixFQUM1QixRQUFrQixFQUNsQixJQUFnQjtRQUxoQixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBMUhuQix5QkFBb0IsR0FBVyxJQUFJLENBQUM7UUFDcEMseUJBQW9CLEdBQVcsTUFBTSxDQUFDO1FBQ3RDLDhCQUF5QixHQUFXLFVBQVUsQ0FBQzs7Ozs7O1FB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Qjs7SUFDN0Isb0RBQWlDOztJQUNqQyxnREFBMkI7O0lBSTNCLDRDQUF5Qjs7SUFDekIsZ0RBQW1COztJQUNuQixvREFBMkI7Ozs7O0lBRTNCLGdEQUFxQzs7Ozs7SUFlckMsK0NBQW1COztJQWNuQixpREFBa0M7O0lBYWxDLHFEQUFxRDs7SUFFckQsbURBQW1EOztJQUVuRCxnREFBd0Q7Ozs7O0lBRXhELGdEQUEyQzs7Ozs7SUFFM0MsK0NBQTBDOztJQUMxQyxtREFBOEM7O0lBQzlDLG9EQUErQzs7SUFDL0MsZ0RBQTJDOztJQUMzQywyQ0FBNEI7O0lBQzVCLGdEQUFzQzs7SUFHdEMsOENBQXVCOztJQUV2QixrREFBc0I7O0lBRXRCLHdEQUFpQzs7SUFFakMscURBQThCOztJQUU5Qix1REFBMkI7O0lBRTNCLHVEQUFvQzs7SUFFcEMsb0RBQWlDOztJQUVqQyxrREFBYzs7SUFFZCxtREFBZ0M7O0lBQ2hDLG9EQUFpQzs7SUFDakMsdUNBQWU7O0lBRWYsMENBQWU7O0lBQ2Ysb0RBQWlDOztJQUNqQywrQ0FBZ0I7O0lBRWhCLDREQUFnQzs7SUFDaEMsNkNBQXFCOztJQUNyQix3REFBNkI7O0lBQzdCLG1EQUErQjs7SUFDL0IsbURBQWdDOztJQUNoQyxrREFBNkI7O0lBQzdCLDhDQUF5RDs7Ozs7SUFFckQsNkNBQTJCOzs7OztJQUMzQiwrQ0FBOEI7Ozs7O0lBQzlCLHVDQUE2Qjs7Ozs7SUFDN0Isa0RBQW9DOzs7OztJQUNwQyw2Q0FBMEI7Ozs7O0lBQzFCLHlDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFVwbG9hZGVyT3B0aW9ucywgRlVwbG9hZEZpbGVFeHRlbmQgfSBmcm9tICdAZmFycmlzL2V4dGVuZC1maWxlLXVwbG9hZCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IFZhbHVlQ29uZmlnLCBNc2dJbmZvLCBlZGl0QXR0YWNoRmlsZSB9IGZyb20gJy4vZGlzY3Vzc2lvbi1lZGl0b3IuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGlzY3Vzc2lvbi1lZGl0b3InLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEaXNjdXNzaW9uRWRpdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIEBJbnB1dCgpIHBlcnNvbm5lbHNQcmltYXJ5S2V5OiBzdHJpbmcgPSAnaWQnO1xyXG4gICAgQElucHV0KCkgcGVyc29ubmVsc0Rpc3BsYXlLZXk6IHN0cmluZyA9ICduYW1lJztcclxuICAgIEBJbnB1dCgpIHJlcGx5UGVyc29ubmVsc0Rpc3BsYXlLZXk6IHN0cmluZyA9ICd1c2VyTmFtZSc7XHJcbiAgICAvLyBASW5wdXQoKSBwZXJzb25uZWxzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICAvLyBASW5wdXQoKSBwZXJtaXNzaW9uTGlzdDogQXJyYXk8YW55PiA9IFtcclxuICAgIC8vICAgICB7IHZhbHVlOiAnQUxMJywgdGV4dDogdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAuYWxsJykgfSxcclxuICAgIC8vICAgICB7IHZhbHVlOiAnUkVMQVRFRCcsIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLnJlbGF0ZWQnKSB9XHJcbiAgICAvLyBdO1xyXG4gICAgQElucHV0KCkgY2FuY2VsVmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBlZGl0SGVpZ2h0OiBudW1iZXIgPSAxMzA7XHJcblxyXG4gICAgQElucHV0KCkgdHlwZTogc3RyaW5nID0gJ3VzZXInO1xyXG4gICAgQElucHV0KCkgb3JnVXJsOnN0cmluZztcclxuICAgIEBJbnB1dCgpIHBlcnNvblNlYXJjaFVybDpzdHJpbmc7XHJcbiAgICAvLyDpnIDopoHnmoTmoJHmlbDmja5cclxuICAgIC8vIEBJbnB1dCgpIHRyZWVEYXRhOiBhbnlbXTtcclxuICAgIC8vIOW3puS+p+agkeeahOS4u+mUruWtl+autVxyXG4gICAgQElucHV0KCkgdHJlZUlkRmllbGQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHRyZWVEaXNwbGF5VGV4dDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgc2VjdGlvbkRhdGE6YW55W107XHJcbiAgICAvLyDnlKjmiLfop5LoibJcclxuICAgIC8vIEBJbnB1dCgpIGdyb3VwTGlzdDogYW55W10gPSBbXTtcclxuXHJcbiAgICBvcHRpb25zOiBVcGxvYWRlck9wdGlvbnM7XHJcbiAgICBwbGFjZWhvbGRlcjpzdHJpbmc7XHJcbiAgICBzZWN0aW9udHJlZURhdGE6QXJyYXk8YW55PjtcclxuICAgIC8vIOS6uuS6i+W8ueeql+WIl+ihqOaVsOaNrlxyXG4gICAgcHJpdmF0ZSBfcGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG5cclxuICAgIGdldCBwZXJzb25uZWxzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzb25uZWxzO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IHBlcnNvbm5lbHModmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wZXJzb25uZWxzID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyUGVyc29ubmVscyA9IHRoaXMuX3BlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgIHRoaXMuY29weVBlcnNvbm5lbHMgPSB0aGlzLl9wZXJzb25uZWxzO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmNvcHlQZXJzb25uZWxzID0gdGhpcy5fcGVyc29ubmVscztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Lq65LqL5by556qX5YiX6KGo5pWw5o2uXHJcbiAgICBwcml2YXRlIF9yZXBseVVzZXI7XHJcblxyXG4gICAgZ2V0IHJlcGx5VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVwbHlVc2VyO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IHJlcGx5VXNlcih2YWwpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcGx5VXNlciA9IHZhbDtcclxuICAgICAgICAgICAgaWYodGhpcy5fcmVwbHlVc2VyWydpZCddKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yRm9jdXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfYXR0YWNoRmlsZXM6IEZVcGxvYWRGaWxlRXh0ZW5kW107XHJcbiAgICBnZXQgYXR0YWNoRmlsZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F0dGFjaEZpbGVzO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGF0dGFjaEZpbGVzKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoRmlsZXMgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaWsOW7uui/mOaYr+e7tOaKpOiHquWumuS5ieinkuiJslxyXG4gICAgLy8gQE91dHB1dCgpIGN1c3RvbUdyb3VwQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDlr7nlpJbmmrTpnLLmlbDmja5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3Rpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDpgInkuK3nmoTooYxcclxuICAgIEBPdXRwdXQoKSBsaW5lRGF0YUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLy8g5a+55aSWXHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFZhbHVlQ29uZmlnPigpO1xyXG4gICAgLyoqIOmZhOS7tumihOiniCAqL1xyXG4gICAgQE91dHB1dCgpIGZpbGVQcmV2aWV3ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOmZhOS7tuWIoOmZpCAqL1xyXG4gICAgQE91dHB1dCgpIGZpbGVSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgZmlsZVVwbG9hZERvbmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcGVyc29ubmVsU2VhcmNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGdldE91Z1VzZXJzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQFZpZXdDaGlsZCgnZWRpdG9yJykgZWRpdG9yO1xyXG4gICAgQFZpZXdDaGlsZCgncGVyc29uTW9kYWwnKSBwZXJzb25Nb2RhbDtcclxuICAgIC8vIEBWaWV3Q2hpbGQoJ3NlYXJjaElucHV0Jykgc2VhcmNoSW5wdXQ7XHJcbiAgICAvLyDlrqHmibnmhI/op4FcclxuICAgIHRleHRWYWx1ZTogc3RyaW5nID0gJyc7XHJcbiAgICAvLyDmmoLlrZjmlofmnKzmoYbnmoTovpPlhaXvvIzop6PlhrPnhKbngrnpl67pophcclxuICAgIHRlbXBUZXh0VmFsdWU6IHN0cmluZztcclxuICAgIC8vIOaaguWtmOS6uuWRmOS/oeaBr1xyXG4gICAgdGVtcFBlcnNvbm5lbHNWYWx1ZTogc3RyaW5nID0gJyc7XHJcbiAgICAvLyDmmoLlrZjpg6jpl6hcclxuICAgIHRlbXBTZWN0aW9uVmFsdWU6IHN0cmluZyA9ICcnO1xyXG4gICAgLy8g5pCc57Si5Lq65LqL566h55CG5by556qXXHJcbiAgICBwZXJzb25Nb2RhbFZpc2libGUgPSBmYWxzZTtcclxuICAgIC8vIOmAieaLqeimgeWPkemAgeeahOS6uuWRmOWIl+ihqFxyXG4gICAgc2VsZWN0ZWRQZXJzb25uZWxzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICAvLyDpgInmi6nopoHlj5HpgIHnmoTpg6jpl6hcclxuICAgIHNlbGVjdGVkU2VjdGlvbjogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgLy8g5pCc57Si5paH5pys5qGG5Lit57uR5a6a55qE5YC8XHJcbiAgICBwZXJzb25uZWxUZXh0O1xyXG4gICAgLy8g5pqC5a2Y5Lq65ZGY5L+h5oGv77yM55So5LqO5pCc57SiXHJcbiAgICBjb3B5UGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgaW5uZXJQZXJzb25uZWxzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICBlbDogRWxlbWVudFJlZjtcclxuICAgIC8vIOmBv+WFjemHjeWkjei+k+WFpeeahHRva2VuXHJcbiAgICB0b2tlbjogYm9vbGVhbjtcclxuICAgIHJlbGF0aXZlVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcGVybWlzc2lvbjogYW55O1xyXG4gICAgLy/kuIrkvKDpmYTku7bmmK/lkKbmmL7npLpcclxuICAgIGF0dGFjaEZpbGVzTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICBwYWdlU2l6ZTpudW1iZXIgPSAyMDtcclxuICAgIHNlYXJjaFBlcnNvbm5lbExpc3Q6YW55ID0ge307XHJcbiAgICBzaG93U2VhcmNoTGlzdDpib29sZWFuID0gZmFsc2U7XHJcbiAgICBwZXJtaXNzaW9uTGlzdDogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIGdyb3VwSWNvbiA9ICc8c3BhbiBjbGFzcz1cImYtaWNvbiBmLWljb24tc2VhcmNoXCI+PC9zcGFuPic7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXHJcbiAgICApIHsgXHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBzZWxmLnBlcnNvbk1vZGFsVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWxmLnJlbGF0aXZlVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHRoaXMuY29weVBlcnNvbm5lbHMgPSB0aGlzLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgdGhpcy5lbCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbkxpc3QgPSBbXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdBTEwnLCB0ZXh0OiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5hbGwnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnUkVMQVRFRCcsIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLnJlbGF0ZWQnKSB9XHJcbiAgICAgICAgXVxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbiA9IHRoaXMucGVybWlzc2lvbkxpc3RbMF07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyBtYXhVcGxvYWRzOiAzLCBtYXhGaWxlU2l6ZTogMTAyNDAsIGFsbG93ZWRDb250ZW50VHlwZXM6IFsnLmpwZycsICcucGRmJ10gfTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAucGxhY2Vob2xkZXInKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleS4qumZhOS7tuS4iuS8oOWujOaIkFxyXG4gICAgICogQHBhcmFtIGV2IFxyXG4gICAgICovXHJcbiAgICBmVXBsb2FkRG9uZUhhbmRsZXIoZXYpIHtcclxuICAgICAgICB0aGlzLmZpbGVVcGxvYWREb25lLmVtaXQoZXYpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkuIrkvKDpmYTku7bkuK3ljZXkuKrpmYTku7bliKDpmaTlrozmiJBcclxuICAgICAqIEBwYXJhbSBldiBcclxuICAgICAqL1xyXG4gICAgZlVwbG9hZFJlbW92ZWRIYW5kbGVyKGV2KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2ZVcGxvYWRSZW1vdmVkSGFuZGxlcicpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2KTtcclxuICAgIH1cclxuICAgIC8qKumZhOS7tuWIl+ihqOS4remihOiniCAqL1xyXG4gICAgZmlsZVByZXZpZXdFdmVudEhhbmRsZXIoaW5mbykge1xyXG4gICAgICAgIHRoaXMuZmlsZVByZXZpZXcuZW1pdChpbmZvKTtcclxuICAgIH1cclxuICAgIC8qKumZhOS7tuWIl+ihqOS4reWIoOmZpCAqL1xyXG4gICAgZmlsZVJlbW92ZUV2ZW50SGFuZGxlcihmaWxlKSB7XHJcbiAgICAgICAgdGhpcy5maWxlUmVtb3ZlLmVtaXQoZmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5paH5pys5qGG5aSx5Y6754Sm54K56Kem5Y+RXHJcbiAgICBzZXRUZXh0VmFsdWUoZSA9IG51bGwpIHtcclxuICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5pbm5lckhUTUwpO1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBUZXh0VmFsdWUgPSBlLnRhcmdldC5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFZhbHVlID0gdGhpcy50ZW1wVGV4dFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiAodGhpcy50ZW1wVGV4dFZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMudGV4dFZhbHVlID0gdGhpcy50ZW1wVGV4dFZhbHVlXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmICh0aGlzLnRlbXBQZXJzb25uZWxzVmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0VmFsdWUgKz0gdGhpcy50ZW1wUGVyc29ubmVsc1ZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLnRlbXBTZWN0aW9uVmFsdWUpe1xyXG4gICAgICAgICAgICB0aGlzLnRleHRWYWx1ZSArPSB0aGlzLnRlbXBTZWN0aW9uVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGVtcFRleHRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMudGVtcFBlcnNvbm5lbHNWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMudGVtcFNlY3Rpb25WYWx1ZSA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOebkeWQrOmUruebmOS6i+S7tiwg5Li76KaB5piv55So5LqO5Yig6ZmkQOS6ulxyXG4gICAgbGlzdGVuRWRpdG9yVmFsdWVDaGFuZ2UoZSkge1xyXG4gICAgICAgIHRoaXMudGVtcFRleHRWYWx1ZSA9IGUudGFyZ2V0LmlubmVySFRNTDtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGUudGFyZ2V0LmNoaWxkcmVuO1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuSWQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuSWQucHVzaChjaGlsZHJlbltpXS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzLmZvckVhY2goKHBlcnNvbm5lbCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbklkLmluY2x1ZGVzKHBlcnNvbm5lbFt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbi5mb3JFYWNoKChzZWN0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNoaWxkcmVuSWQuaW5jbHVkZXMoc2VjdGlvblt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9uLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIXRoaXMudGVtcFRleHRWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBUZXh0VmFsdWUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLkurrlkZhcclxuICAgICAqL1xyXG4gICAgc2VyYWNoUGVyc29ubmVsKCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLnBlcnNvbm5lbFRleHQpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLmNvcHlQZXJzb25uZWxzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGlmKGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV0pe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBpdGVtW3RoaXMucGVyc29ubmVsc0Rpc3BsYXlLZXldLmluZGV4T2YodGhpcy5wZXJzb25uZWxUZXh0KSAhPT0gLTE7XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGVsc2Uge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlubmVyUGVyc29ubmVscyA9IHRoaXMuY29weVBlcnNvbm5lbHM7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmKHRoaXMucGVyc29ubmVsVGV4dCl7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1NlYXJjaExpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmdldFNlYXJjaERhdGEodGhpcy5wZXJzb25uZWxUZXh0LDApLnN1YnNjcmliZShkPT57XHJcbiAgICAgICAgICAgICAgICBpZihkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUGVyc29ubmVsTGlzdCA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Nb2RhbFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRoaXMuc2VhcmNoSW5wdXQubmF0aXZlRWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgLy/mmoLml7bms6jph4rmjonmnI3liqHlmajnq6/mn6Xor6JcclxuICAgICAgICAvLyB0aGlzLnBlcnNvbm5lbFNlYXJjaC5lbWl0KHRoaXMucGVyc29ubmVsVGV4dCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0ouS4i+S4gOmhtVxyXG4gICAgICovXHJcbiAgICBnZXRNb3JlU2VhcmNoRGF0YSgpe1xyXG4gICAgICAgIHRoaXMuZ2V0U2VhcmNoRGF0YSh0aGlzLnBlcnNvbm5lbFRleHQsdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0LnBhZ2VJbmRleCArIDEpLnN1YnNjcmliZShkPT57XHJcbiAgICAgICAgICAgIGlmKGQuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFBlcnNvbm5lbExpc3QucGFnZUluZGV4ID0gZFsncGFnZUluZGV4J107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFBlcnNvbm5lbExpc3RbJ3VzZXJzJ10gPSBbLi4udGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0Wyd1c2VycyddLC4uLmRbJ3VzZXJzJ11dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VhcmNoRGF0YSh0ZXh0OnN0cmluZyxwYWdlSW5kZXg6bnVtYmVyLHBhZ2VTaXplOm51bWJlciA9IHRoaXMucGFnZVNpemUpe1xyXG4gICAgICAgIGlmKHRoaXMucGVyc29uU2VhcmNoVXJsKXtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5wZXJzb25TZWFyY2hVcmx9P3BhcmFtPSR7dGV4dH0mcGFnZVNpemU9JHtwYWdlU2l6ZX0mcGFnZUluZGV4PSR7cGFnZUluZGV4fWA7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2codXJsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gdGhpcy5odHRwLmdldCgnYXNzZXRzL2RhdGEvZGlzY3Vzc2lvblBlcnNvbjMuanNvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBlcnNvbm5lbENoZWNrZWQoaXRlbSl7XHJcbiAgICAgICAgaXRlbS5hY3RpdmUgPSAhaXRlbS5hY3RpdmU7XHJcbiAgICAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLmlubmVyUGVyc29ubmVscy5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuYXBwZW5kUGVyc29ubmVscygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWinuWKoEDkurrlkZhcclxuICAgIGFwcGVuZFBlcnNvbm5lbHMoKSB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmKCF0aGlzLnNob3dTZWFyY2hMaXN0KXtcclxuICAgICAgICAgICAgc2VsZWN0ZWRMaXN0ID0gdGhpcy5pbm5lclBlcnNvbm5lbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5hY3RpdmUgPT09IHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBzZWxlY3RlZExpc3QgPSB0aGlzLnNlYXJjaFBlcnNvbm5lbExpc3RbJ3VzZXJzJ10uZmlsdGVyKGl0ZW0gPT4gaXRlbS5hY3RpdmUgPT09IHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZWN0ZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFBlcnNvbm5lbChzZWxlY3RlZExpc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0UGVyc29ubmVscygpO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dFZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzb25Nb2RhbFZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8v6auY57qn5pCc57Si5Lq65ZGY5re75YqgXHJcbiAgICBhcHBlbmRQZXJzb25uZWxzTGlzdChsaXN0RGF0YSkge1xyXG4gICAgICAgIGlmIChsaXN0RGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRQZXJzb25uZWwobGlzdERhdGEsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRUZXh0VmFsdWUoKTtcclxuICAgIH1cclxuICAgIC8v5b6q546v5aKe5Yqg5Lq65ZGYXHJcbiAgICBhcHBlbmRQZXJzb25uZWwobGlzdERhdGEsIGV4dGVybmFsID0gZmFsc2UpIHtcclxuICAgICAgICBsaXN0RGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBlcnNvbm5lbHMubGVuZ3RoICYmIHRoaXMuX2lzSW5BcnJheShpdGVtW3RoaXMucGVyc29ubmVsc1ByaW1hcnlLZXldLCB0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5LCB0aGlzLnNlbGVjdGVkUGVyc29ubmVscykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vaWYgKCFleHRlcm5hbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wUGVyc29ubmVsc1ZhbHVlICs9ICc8YSBuYW1lPVwicGVyc29ubmVsXCIgY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIiBjbGFzcz1cImF0LXVzZXJcIiBpZD1cIicgKyBpdGVtW3RoaXMucGVyc29ubmVsc1ByaW1hcnlLZXldICsgJ1wiIHVzZXJpZD1cIicgKyBpdGVtW3RoaXMucGVyc29ubmVsc1ByaW1hcnlLZXldICsgJ1wiPkAnICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNEaXNwbGF5S2V5XSArICc8L2E+Jm5ic3A7JztcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIC8vIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMudGVtcFBlcnNvbm5lbHNWYWx1ZSArPSAnPGEgbmFtZT1cInBlcnNvbm5lbFwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCIgY2xhc3M9XCJhdC11c2VyXCIgaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIiB1c2VyaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIj5AJyArIGl0ZW1bdGhpcy5yZXBseVBlcnNvbm5lbHNEaXNwbGF5S2V5XSArICc8L2E+JztcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDpg6jpl6hcclxuICAgICAqIEBwYXJhbSBsaXN0RGF0YSBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kU2VjdGlvbkxpc3QobGlzdERhdGEpe1xyXG4gICAgICAgIGlmKGxpc3REYXRhLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kU2VjdGlvbihsaXN0RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0VGV4dFZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kU2VjdGlvbihsaXN0RGF0YSwpIHtcclxuICAgICAgICBsaXN0RGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNlY3Rpb24ubGVuZ3RoICYmIHRoaXMuX2lzSW5BcnJheShpdGVtW3RoaXMucGVyc29ubmVsc1ByaW1hcnlLZXldLCB0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5LCB0aGlzLnNlbGVjdGVkU2VjdGlvbikpIHtyZXR1cm47fSBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBTZWN0aW9uVmFsdWUgKz0gJzxhIG5hbWU9XCJvcmdcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiIGNsYXNzPVwiYXQtb3JnXCIgaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIiBvcmdpZD1cIicgKyBpdGVtW3RoaXMucGVyc29ubmVsc1ByaW1hcnlLZXldICsgJ1wiPkAnICsgaXRlbVsnbmFtZSddICsgJzwvYT4mbmJzcDsnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb24ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOWIpOaWreaYr+WQpuWcqOaVsOe7hFxyXG4gICAgcHJpdmF0ZSBfaXNJbkFycmF5KHZhbHVlOiBhbnksIGZpZWxkSW5BcnJheTogc3RyaW5nLCBhcnJheTogYW55W10pIHtcclxuICAgICAgICBpZiAoIXZhbHVlIHx8ICFmaWVsZEluQXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuZmluZEluZGV4KGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRJbkFycmF5XSkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWz6Zet5Lq65LqL566h55CG5by556qXXHJcbiAgICAgKi9cclxuICAgIHJlc2V0UGVyc29ubmVscygpIHtcclxuICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wZXJzb25Nb2RhbFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlubmVyUGVyc29ubmVscyA9IHRoaXMuY29weVBlcnNvbm5lbHM7XHJcbiAgICAgICAgaWYodGhpcy5pbm5lclBlcnNvbm5lbHMubGVuZ3RoKXtcclxuICAgICAgICAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMuZm9yRWFjaChpdGVtID0+IGl0ZW0uYWN0aXZlID0gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlcnNvbm5lbFRleHQgPSAnJztcclxuICAgICAgICAvLyB0aGlzLnN0b3BCdWJibGUoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiZPlvIDkurrlkZjnrqHnkIZcclxuICAgICAqIEBwYXJhbSBlIOS6i+S7tlxyXG4gICAgICovXHJcbiAgICBvcGVuTW9kYWxQZXJzb24oZSkge1xyXG4gICAgICAgIHRoaXMucGVyc29uTW9kYWxWaXNpYmxlID0gIXRoaXMucGVyc29uTW9kYWxWaXNpYmxlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZih0aGlzLnBlcnNvbk1vZGFsVmlzaWJsZSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNvbk1vZGFsUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICAgIC8vIHRoaXMuZ2V0UGVyc29ubmVsTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuc3RvcEJ1YmJsZShlKTtcclxuICAgIH1cclxuICAgIHNldFBlcnNvbk1vZGFsUG9zaXRpb24oKXtcclxuICAgICAgICBsZXQgd2luSCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICBsZXQgTW9kYWxCb3R0b20gPSB0aGlzLnBlcnNvbk1vZGFsLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xyXG4gICAgICAgIGlmKHdpbkggPCBNb2RhbEJvdHRvbSl7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uTW9kYWwubmF0aXZlRWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3Blbk1vZGFsUGVybWlzc2lvbihlKSB7XHJcbiAgICAgICAgdGhpcy5yZWxhdGl2ZVZpc2libGUgPSAhdGhpcy5yZWxhdGl2ZVZpc2libGU7XHJcbiAgICAgICAgdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omT5byA5LiK5Lyg6ZmE5Lu2XHJcbiAgICAgKi9cclxuICAgIG9wZW5Nb2RhbEZpbGUoZSkge1xyXG4gICAgICAgIHRoaXMuYXR0YWNoRmlsZXNNb2RhbFZpc2libGUgPSAhdGhpcy5hdHRhY2hGaWxlc01vZGFsVmlzaWJsZTtcclxuICAgICAgICB0aGlzLnN0b3BCdWJibGUoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Zi75q2i5YaS5rOhXHJcbiAgICBzdG9wQnViYmxlKGUpIHtcclxuICAgICAgICBpZiAoZSAmJiBlLnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5ldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaPkOS6pOivhOivrVxyXG4gICAgICovXHJcbiAgICBzdWJtaXRBcHByb3ZhbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMudGV4dFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGxldCBub3RFbXB0eVRleHQgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5ub3RFbXB0eScpO1xyXG4gICAgICAgICAgICBpZihub3RFbXB0eVRleHQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmVycm9yKG5vdEVtcHR5VGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZWRpdEF0dGFjaEZpbGVzOiBlZGl0QXR0YWNoRmlsZVtdID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuYXR0YWNoRmlsZXMgJiYgdGhpcy5hdHRhY2hGaWxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlkID0gZmlsZVsnaWQnXSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gZmlsZVsnbmFtZSddLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSBmaWxlWydzaXplJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFJZCA9IGZpbGVbJ2V4dGVuZCddWydtZXRhZGF0YUlkJ107XHJcbiAgICAgICAgICAgICAgICBsZXQgYXR0YWNoRmlsZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFJZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWRpdEF0dGFjaEZpbGVzLnB1c2goYXR0YWNoRmlsZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICAgIG1zZ0luZm86IE1zZ0luZm8uQ29uZmlybSxcclxuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0VmFsdWUsXHJcbiAgICAgICAgICAgIG1haWxUb3M6IHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzLFxyXG4gICAgICAgICAgICBtYWlsVG9TZWN0aW9uczogdGhpcy5zZWxlY3RlZFNlY3Rpb24sXHJcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IHRoaXMucGVybWlzc2lvbi52YWx1ZSxcclxuICAgICAgICAgICAgcGFyZW50SWQ6ICh0aGlzLnJlcGx5VXNlciAmJiB0aGlzLnJlcGx5VXNlci5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgPyB0aGlzLnJlcGx5VXNlci5pZCA6IG51bGwsXHJcbiAgICAgICAgICAgIGF0dGFjaEZpbGVzOiBlZGl0QXR0YWNoRmlsZXMubGVuZ3RoID8gZWRpdEF0dGFjaEZpbGVzIDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGV4dFZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBlcnNvbm5lbHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoRmlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlcGx5VXNlciA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbCgpIHtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgICBtc2dJbmZvOiBNc2dJbmZvLkNhbmNlbCxcclxuICAgICAgICAgICAgdGV4dDogbnVsbCxcclxuICAgICAgICAgICAgbWFpbFRvczogW10sXHJcbiAgICAgICAgICAgIG1haWxUb1NlY3Rpb25zOiBbXSxcclxuICAgICAgICAgICAgdmlzaWJpbGl0eTogbnVsbCxcclxuICAgICAgICAgICAgcGFyZW50SWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGF0dGFjaEZpbGVzOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50ZXh0VmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9uID0gW107XHJcbiAgICAgICAgdGhpcy5hdHRhY2hGaWxlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVwbHlVc2VyID0ge307XHJcbiAgICB9XHJcbiAgICAvKirkv67mlLnmn6XnnIvmnYPpmZAgKi9cclxuICAgIGNoYW5nZVBlcm1pc3Npb24odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbiA9IHRoaXMucGVybWlzc2lvbkxpc3QuZmluZChpdGVtID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlKTtcclxuICAgICAgICB0aGlzLnJlbGF0aXZlVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy/ojrflvpfnhKbngrlcclxuICAgIGVkaXRvckZvY3VzKCkge1xyXG4gICAgICAgIHRoaXMuZWRpdG9yLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgIH1cclxuICAgIC8vIGN1c3RvbUdyb3VwQ2hhbmdlUGFyKGV2ZW50KXtcclxuICAgIC8vICAgICB0aGlzLmN1c3RvbUdyb3VwQ2hhbmdlLmVtaXQoZXZlbnQpO1xyXG4gICAgLy8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpq5jnuqfkurrlkZjngrnnoa7orqRcclxuICAgICAqL1xyXG4gICAgc2VsZWN0aW9uc0NoYW5nZVBhcihldmVudCkge1xyXG4gICAgICAgIC8vdGhpcy5yZXNldFBlcnNvbm5lbHMoKTtcclxuICAgICAgICBpZihldmVudC5kYXRhLnVzZXJzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGxldCB1c2VyTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBldmVudC5kYXRhLnVzZXJzLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyTGlzdC5wdXNoKHVzZXIuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFBlcnNvbm5lbHNMaXN0KHVzZXJMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZXZlbnQuZGF0YS5zZWN0aW9uLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGxldCBzZWN0aW9uTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBldmVudC5kYXRhLnNlY3Rpb24uZm9yRWFjaChzZWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkxpc3QucHVzaChzZWMuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFNlY3Rpb25MaXN0KHNlY3Rpb25MaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlLmVtaXQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLyoq6auY57qn5Lq65ZGY5Lit6YCJ5Lit5p+Q6KGMICovXHJcbiAgICBsaW5lRGF0YUNoYW5nZVBhcihldmVudCkge1xyXG4gICAgICAgIHRoaXMubGluZURhdGFDaGFuZ2UuZW1pdChldmVudCk7XHJcbiAgICB9XHJcbiAgICAvKirojrflvpfljaDkvY3lpLTlg48gKi9cclxuICAgIGdldEF2YXRhcihpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbVt0aGlzLnBlcnNvbm5lbHNEaXNwbGF5S2V5XSkge1xyXG4gICAgICAgICAgICBsZXQgc3RyID0gaXRlbVt0aGlzLnBlcnNvbm5lbHNEaXNwbGF5S2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoc3RyLmxlbmd0aCAtIDIsIHN0ci5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvdWdVc2VycyhldmVudCl7XHJcbiAgICAgICAgdGhpcy5nZXRPdWdVc2Vycy5lbWl0KGV2ZW50KTtcclxuICAgIH1cclxufSJdfQ==