/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { PaginationControlsDirective } from './pagination-controls.directive';
import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy, ViewEncapsulation, ViewChild, ElementRef } from '@angular/core';
/**
 * @param {?} input
 * @return {?}
 */
function coerceToBoolean(input) {
    return !!input && input !== 'false';
}
// styleUrls: ['./pagination-controls.component.css'],
/**
 * The default pagination controls component. Actually just a default implementation of a custom template.
 */
//  #farris-gotopagenumber{ text-align: center;
//     -moz-appearance: textfield;
//     width: 40px;
// }
// #farris-gotopagenumber::-webkit-outer-spin-button,
// #farris-gotopagenumber::-webkit-inner-spin-button {
//     -webkit-appearance: none;
// }
export class PaginationControlsComponent {
    constructor() {
        this._directionLinks = true;
        this._autoHide = false;
        this._responsive = false;
        this.mouseInSelectedList = false;
        /**
         * 显示模式， default 默认；simple: 简洁
         */
        this.viewMode = 'default';
        this.maxSize = 7;
        this.previousLabel = 'Previous';
        this.nextLabel = 'Next';
        this.screenReaderPaginationLabel = 'Pagination';
        this.screenReaderPageLabel = 'page';
        this.screenReaderCurrentLabel = `You're on page`;
        this.showPageList = true;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showSelectedList = false;
        this.showGoToLast = false;
        this.showGoToFirst = false;
        /**
         * 显示跳转至指定页码输入框
         */
        this.showGotoInput = false;
        /**
         * @deprecated
         */
        this.message = '每页 {0} 条记录，共 {1} 条记录';
        /**
         * @deprecated
         */
        this.pageListFirstText = '显示';
        /**
         * @deprecated
         */
        this.pageListLastText = '条';
        this.pageChange = new EventEmitter();
        this.pageSizeChange = new EventEmitter();
        this.showPagesPanel = false;
    }
    /**
     * @return {?}
     */
    get directionLinks() {
        return this._directionLinks;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set directionLinks(value) {
        this._directionLinks = coerceToBoolean(value);
    }
    /**
     * @return {?}
     */
    get autoHide() {
        return this._autoHide;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set autoHide(value) {
        this._autoHide = coerceToBoolean(value);
    }
    /**
     * @return {?}
     */
    get responsive() {
        return this._responsive;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set responsive(value) {
        this._responsive = coerceToBoolean(value);
    }
    // constructor(@Optional() private pagerService: PaginationService) {
    //     if (!this.pagerService) {
    //         this.pagerService = new PaginationService();
    //     }
    // }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseLeave($event) {
        this.showPagesPanel = false;
        this.paginationDirective.changeDetectorRef.detectChanges();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseEnter($event) {
        if (this.paginationDirective.getTotalItems() === 0) {
            return;
        }
        this.showPagesPanel = true;
    }
    /**
     * @param {?} $event
     * @param {?} pagesize
     * @return {?}
     */
    changePageSizeHandler($event, pagesize) {
        $event.stopPropagation();
        // 当前页再次点击
        if (pagesize === this.paginationDirective.getPageSize()) {
            return;
        }
        this.showPagesPanel = false;
        // this.removeOverlay();
        this.pageSizeChange.emit(pagesize);
    }
    /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    onPageNumberChanged(inputEl, maxNumber) {
        /** @type {?} */
        const target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        const currentPageNumber = Number(target.value);
        if (currentPageNumber > maxNumber) {
            target.value = maxNumber;
        }
        else {
            if (currentPageNumber < 1) {
                target.value = 1;
            }
        }
    }
    /**
     * @param {?} newpageList
     * @return {?}
     */
    setPageList(newpageList) {
        this.paginationDirective.setPageList(newpageList);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    goto($event) {
        /** @type {?} */
        const newpager = Number($event.target.value);
        if (this.paginationDirective.getCurrent() !== newpager) {
            this.paginationDirective.goto(newpager);
        }
    }
}
PaginationControlsComponent.decorators = [
    { type: Component, args: [{
                selector: 'pagination-controls',
                template: "<pagination-template #p=\"paginationApi\" [id]=\"id\" [maxSize]=\"maxSize\" (pageChange)=\"pageChange.emit($event)\">\r\n    <div class=\"pagination-container\">\r\n        <ul class=\"ngx-pagination pagination\" role=\"navigation\" [attr.aria-label]=\"screenReaderPaginationLabel\"\r\n            style=\"position: relative;\" [class.responsive]=\"responsive\"\r\n            [class.pager-viewmode-default]=\"viewMode === 'default'\"\r\n            [class.pager-viewmode-simple]=\"viewMode === 'simple'\" *ngIf=\"!(autoHide && p.pages.length <= 1)\">\r\n            <ng-container *ngIf=\"viewMode === 'default'\">\r\n                <li class=\"pagination-message text-truncate ml-auto\" [class.d-flex]=\"showSelectedList\"\r\n                    [class.flex-fill]=\"showSelectedList\" *ngIf=\"showPageInfo\">\r\n                    <ng-content></ng-content>\r\n\r\n                    <div class=\"text-truncate \">\r\n                        <span class=\"pg-message-text\">{{ 'pagination.totalinfo.firstText' | locale}}</span>\r\n                        <b class=\"pg-message-total\">{{ p.getTotalItems()}}</b>\r\n                        <span class=\"pg-message-text\">{{ 'pagination.totalinfo.lastText' | locale}}</span>\r\n                    </div>\r\n                </li>\r\n                <!--\u6BCF\u9875\u8BB0\u5F55\u6570-->\r\n                <li class=\"pagination-pagelist\" *ngIf=\"showPageList\">\r\n                    <div class=\"dropup dropdown-right pg-pagelist\"\r\n                        [ngClass]=\"{'pagelist-disabled':p.getTotalItems()===0,'show': showPagesPanel}\"\r\n                        (mouseenter)=\"onMouseEnter($event)\" (mouseleave)=\"onMouseLeave($event)\">\r\n                        <div class=\"pg-pagelist-info\" #pglistinfo>\r\n                            <span class=\"pagelist-text\">{{'pagination.pagelist.firstText' | locale}}</span><b\r\n                                class=\"cur-pagesize\">{{p.getPageSize()}}</b><span\r\n                                class=\"pagelist-text\">{{'pagination.pagelist.lastText' | locale}}</span><i\r\n                                class=\"f-icon f-icon-dropdown\"></i>\r\n                        </div>\r\n                        <div class=\"dropdown-menu\" [ngClass]=\"{'show': showPagesPanel}\" style=\"margin-bottom: -1px;\">\r\n                            <li class=\"dropdown-item\" [ngClass]=\"{'active':pagesize==p.getPageSize()}\"\r\n                                *ngFor=\"let pagesize of p.getPageList()\" (click)=\"changePageSizeHandler($event, pagesize)\">\r\n                                <span>{{ pagesize }}</span>\r\n                            </li>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n\r\n    <!--\u9996\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n        <a tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.first($event)\" (click)=\"p.first($event)\"\r\n            [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-first\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-first\"></span>\r\n        </span>\r\n    </li>\r\n\r\n    <!--\u4E0A\u4E00\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.previous()\" (click)=\"p.previous()\"\r\n            [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-pre\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-pre\"></span>\r\n        </span>\r\n    </li>\r\n\r\n\r\n\r\n    <ng-container *ngIf=\"showPageNumber\">\r\n        <!--\u9875\u7801-->\r\n        <li class=\"page-item\" [class.current]=\"p.getCurrent() === page.value\" [class.ellipsis]=\"page.label === '...'\"\r\n            *ngFor=\"let page of p.pages\">\r\n            <a class=\"page-link\" tabindex=\"0\" (keyup.enter)=\"p.setCurrent(page.value)\"\r\n                (click)=\"p.setCurrent(page.value)\" *ngIf=\"p.getCurrent() !== page.value\">\r\n                <span>{{ page.label }}</span>\r\n            </a>\r\n            <span class=\"page-link\" *ngIf=\"p.getCurrent() === page.value\">{{page.label }}</span>\r\n        </li>\r\n    </ng-container>\r\n    <!--\u4E0B\u4E00\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.next()\" (click)=\"p.next()\"\r\n            [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-next\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-next\"></span>\r\n        </span>\r\n    </li>\r\n    <!--\u672B\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.last($event)\"\r\n            (click)=\"p.last($event)\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-last\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-last\"></span>\r\n        </span>\r\n    </li>\r\n\r\n\r\n    \r\n    <li class=\"page-goto-input\" *ngIf=\"showGotoInput\" style=\"padding-left: 10px; white-space: nowrap;\">\r\n        {{'pagination.goto.prefix' | locale}}\r\n        <input class=\"form-control farris-gotopagenumber\" value=\"1\"\r\n        type=\"number\" min=\"1\" max=\"{{p.getLastPage()}}\" style=\"display: inline-block;\"\r\n        (input)=\"onPageNumberChanged($event, p.getLastPage())\"\r\n        (keyup.enter)=\"goto($event)\">\r\n        {{'pagination.goto.suffix' | locale}}\r\n    </li>\r\n\r\n    </ng-container>\r\n    <ng-container *ngIf=\"viewMode === 'simple'\">\r\n\r\n\r\n        <li class=\"page-item d-flex flex-fill\"></li>\r\n        <!--\u9996\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks && showGoToFirst\">\r\n            <a tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.first($event)\" (click)=\"p.first($event)\"\r\n                [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-first\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-first\"></span>\r\n            </span>\r\n        </li>\r\n        <!--\u4E0A\u4E00\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n            <a class=\"page-link border-0\" tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.previous()\"\r\n                (click)=\"p.previous()\" [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-pre\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isFirstPage()\" class=\"page-link border-0\">\r\n                <span class=\"f-icon f-page-pre\"></span>\r\n            </span>\r\n        </li>\r\n\r\n        <li class=\"page-item\">\r\n            <input id=\"farris-gotopagenumber\" class=\"farris-gotopagenumber\" min=\"1\" max=\"{{p.getLastPage()}}\"\r\n                type=\"number\" [ngModel]=\"p.getCurrent()\" (input)=\"onPageNumberChanged($event, p.getLastPage())\"\r\n                (keyup.enter)=\"p.goto($event.target.value)\">\r\n        </li>\r\n        <li class=\"page-item page-separator\" style=\"margin-left: 10px\">\r\n            <span style=\"font-size: 15px; font-weight: 200;\"> /</span>\r\n        </li>\r\n        <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n            <span style=\"font-size: 16px; font-weight: 600;\"> {{ p.getLastPage() }}</span>\r\n        </li>\r\n\r\n        <!--\u4E0B\u4E00\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n            <a class=\"page-link border-0\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.next()\"\r\n                (click)=\"p.next()\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-next\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isLastPage()\" class=\"page-link border-0\">\r\n                <span class=\"f-icon f-page-next\"></span>\r\n            </span>\r\n        </li>\r\n        <!--\u672B\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks  && showGoToLast\">\r\n            <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.last($event)\"\r\n                (click)=\"p.last($event)\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-last\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-last\"></span>\r\n            </span>\r\n        </li>\r\n    </ng-container>\r\n\r\n    </ul>\r\n    </div>\r\n</pagination-template>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None
            }] }
];
PaginationControlsComponent.propDecorators = {
    viewMode: [{ type: Input }],
    id: [{ type: Input }],
    maxSize: [{ type: Input }],
    directionLinks: [{ type: Input }],
    autoHide: [{ type: Input }],
    responsive: [{ type: Input }],
    previousLabel: [{ type: Input }],
    nextLabel: [{ type: Input }],
    screenReaderPaginationLabel: [{ type: Input }],
    screenReaderPageLabel: [{ type: Input }],
    screenReaderCurrentLabel: [{ type: Input }],
    showPageList: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    showSelectedList: [{ type: Input }],
    showGoToLast: [{ type: Input }],
    showGoToFirst: [{ type: Input }],
    showGotoInput: [{ type: Input }],
    message: [{ type: Input }],
    pageListFirstText: [{ type: Input }],
    pageListLastText: [{ type: Input }],
    pageChange: [{ type: Output }],
    pageSizeChange: [{ type: Output }],
    paginationDirective: [{ type: ViewChild, args: ['p',] }],
    focusPageSizeRef: [{ type: ViewChild, args: ['focusPageSize',] }],
    pglistinfo: [{ type: ViewChild, args: ['pglistinfo',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._directionLinks;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._autoHide;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._responsive;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype.mouseInSelectedList;
    /**
     * 显示模式， default 默认；simple: 简洁
     * @type {?}
     */
    PaginationControlsComponent.prototype.viewMode;
    /** @type {?} */
    PaginationControlsComponent.prototype.id;
    /** @type {?} */
    PaginationControlsComponent.prototype.maxSize;
    /** @type {?} */
    PaginationControlsComponent.prototype.previousLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.nextLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderPaginationLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderPageLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderCurrentLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageList;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageInfo;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageNumber;
    /** @type {?} */
    PaginationControlsComponent.prototype.showSelectedList;
    /** @type {?} */
    PaginationControlsComponent.prototype.showGoToLast;
    /** @type {?} */
    PaginationControlsComponent.prototype.showGoToFirst;
    /**
     * 显示跳转至指定页码输入框
     * @type {?}
     */
    PaginationControlsComponent.prototype.showGotoInput;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.message;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.pageListFirstText;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.pageListLastText;
    /** @type {?} */
    PaginationControlsComponent.prototype.pageChange;
    /** @type {?} */
    PaginationControlsComponent.prototype.pageSizeChange;
    /** @type {?} */
    PaginationControlsComponent.prototype.paginationDirective;
    /** @type {?} */
    PaginationControlsComponent.prototype.focusPageSizeRef;
    /** @type {?} */
    PaginationControlsComponent.prototype.pglistinfo;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPagesPanel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBhZ2luYXRpb24vIiwic291cmNlcyI6WyJsaWIvcGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUNBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzlFLE9BQU8sRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBVyxNQUFNLGVBQWUsQ0FBQzs7Ozs7QUFFbEosU0FBUyxlQUFlLENBQUMsS0FBdUI7SUFDNUMsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssS0FBSyxPQUFPLENBQUM7QUFDeEMsQ0FBQzs7Ozs7Ozs7Ozs7OztBQXVCRCxNQUFNLE9BQU8sMkJBQTJCO0lBUHhDO1FBU1ksb0JBQWUsR0FBRyxJQUFJLENBQUM7UUFDdkIsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNsQixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUVwQix3QkFBbUIsR0FBRyxLQUFLLENBQUM7Ozs7UUFHM0IsYUFBUSxHQUFHLFNBQVMsQ0FBQztRQUdyQixZQUFPLEdBQUcsQ0FBQyxDQUFDO1FBc0JaLGtCQUFhLEdBQUcsVUFBVSxDQUFDO1FBQzNCLGNBQVMsR0FBRyxNQUFNLENBQUM7UUFDbkIsZ0NBQTJCLEdBQUcsWUFBWSxDQUFDO1FBQzNDLDBCQUFxQixHQUFHLE1BQU0sQ0FBQztRQUMvQiw2QkFBd0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUM1QyxpQkFBWSxHQUFHLElBQUksQ0FBQztRQUNwQixpQkFBWSxHQUFHLElBQUksQ0FBQztRQUNwQixtQkFBYyxHQUFHLElBQUksQ0FBQztRQUV0QixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFFekIsaUJBQVksR0FBRyxLQUFL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QUM5RCxpREFBcUQ7O0lBQ3JELHFEQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2luYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9wYWdpbmF0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uQ29udHJvbHNEaXJlY3RpdmUgfSBmcm9tICcuL3BhZ2luYXRpb24tY29udHJvbHMuZGlyZWN0aXZlJztcclxuaW1wb3J0IHtDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIE9wdGlvbmFsfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvQm9vbGVhbihpbnB1dDogc3RyaW5nIHwgYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICEhaW5wdXQgJiYgaW5wdXQgIT09ICdmYWxzZSc7XHJcbn1cclxuXHJcbi8vIHN0eWxlVXJsczogWycuL3BhZ2luYXRpb24tY29udHJvbHMuY29tcG9uZW50LmNzcyddLFxyXG5cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IHBhZ2luYXRpb24gY29udHJvbHMgY29tcG9uZW50LiBBY3R1YWxseSBqdXN0IGEgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBhIGN1c3RvbSB0ZW1wbGF0ZS5cclxuICovXHJcblxyXG4vLyAgI2ZhcnJpcy1nb3RvcGFnZW51bWJlcnsgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4vLyAgICAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XHJcbi8vICAgICB3aWR0aDogNDBweDtcclxuLy8gfVxyXG4vLyAjZmFycmlzLWdvdG9wYWdlbnVtYmVyOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uLFxyXG4vLyAjZmFycmlzLWdvdG9wYWdlbnVtYmVyOjotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uIHtcclxuLy8gICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcclxuLy8gfVxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAncGFnaW5hdGlvbi1jb250cm9scycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vcGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZXM6IFtdLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQYWdpbmF0aW9uQ29udHJvbHNDb21wb25lbnQge1xyXG5cclxuICAgIHByaXZhdGUgX2RpcmVjdGlvbkxpbmtzID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX2F1dG9IaWRlID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9yZXNwb25zaXZlID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBtb3VzZUluU2VsZWN0ZWRMaXN0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaYvuekuuaooeW8j++8jCBkZWZhdWx0IOm7mOiupO+8m3NpbXBsZTog566A5rSBICovXHJcbiAgICBASW5wdXQoKSB2aWV3TW9kZSA9ICdkZWZhdWx0JztcclxuXHJcbiAgICBASW5wdXQoKSBpZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgbWF4U2l6ZSA9IDc7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGRpcmVjdGlvbkxpbmtzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb25MaW5rcztcclxuICAgIH1cclxuICAgIHNldCBkaXJlY3Rpb25MaW5rcyh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbkxpbmtzID0gY29lcmNlVG9Cb29sZWFuKHZhbHVlKTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgYXV0b0hpZGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9IaWRlO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9IaWRlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fYXV0b0hpZGUgPSBjb2VyY2VUb0Jvb2xlYW4odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgQElucHV0KClcclxuICAgIGdldCByZXNwb25zaXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zaXZlO1xyXG4gICAgfVxyXG4gICAgc2V0IHJlc3BvbnNpdmUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9yZXNwb25zaXZlID0gY29lcmNlVG9Cb29sZWFuKHZhbHVlKTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHByZXZpb3VzTGFiZWwgPSAnUHJldmlvdXMnO1xyXG4gICAgQElucHV0KCkgbmV4dExhYmVsID0gJ05leHQnO1xyXG4gICAgQElucHV0KCkgc2NyZWVuUmVhZGVyUGFnaW5hdGlvbkxhYmVsID0gJ1BhZ2luYXRpb24nO1xyXG4gICAgQElucHV0KCkgc2NyZWVuUmVhZGVyUGFnZUxhYmVsID0gJ3BhZ2UnO1xyXG4gICAgQElucHV0KCkgc2NyZWVuUmVhZGVyQ3VycmVudExhYmVsID0gYFlvdSdyZSBvbiBwYWdlYDtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlTGlzdCA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUluZm8gPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VOdW1iZXIgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dTZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93R29Ub0xhc3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNob3dHb1RvRmlyc3QgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5pi+56S66Lez6L2s6Iez5oyH5a6a6aG156CB6L6T5YWl5qGGICovXHJcbiAgICBASW5wdXQoKSBzaG93R290b0lucHV0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBtZXNzYWdlID0gJ+avj+mhtSB7MH0g5p2h6K6w5b2V77yM5YWxIHsxfSDmnaHorrDlvZUnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdEZpcnN0VGV4dCA9ICfmmL7npLonO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdExhc3RUZXh0ID0gJ+adoSc7XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VDaGFuZ2U6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcbiAgICBAT3V0cHV0KCkgcGFnZVNpemVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcclxuICAgIEBWaWV3Q2hpbGQoJ3AnKSBwYWdpbmF0aW9uRGlyZWN0aXZlOiBQYWdpbmF0aW9uQ29udHJvbHNEaXJlY3RpdmU7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnZm9jdXNQYWdlU2l6ZScpIGZvY3VzUGFnZVNpemVSZWY6IEVsZW1lbnRSZWY8YW55PjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BnbGlzdGluZm8nKSBwZ2xpc3RpbmZvOiBFbGVtZW50UmVmPGFueT47XHJcbiAgICBzaG93UGFnZXNQYW5lbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgcGFnZXJTZXJ2aWNlOiBQYWdpbmF0aW9uU2VydmljZSkge1xyXG4gICAgLy8gICAgIGlmICghdGhpcy5wYWdlclNlcnZpY2UpIHtcclxuICAgIC8vICAgICAgICAgdGhpcy5wYWdlclNlcnZpY2UgPSBuZXcgUGFnaW5hdGlvblNlcnZpY2UoKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgb25Nb3VzZUxlYXZlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuc2hvd1BhZ2VzUGFuZWwgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25EaXJlY3RpdmUuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VFbnRlcigkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmdldFRvdGFsSXRlbXMoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvd1BhZ2VzUGFuZWwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVBhZ2VTaXplSGFuZGxlcigkZXZlbnQsIHBhZ2VzaXplKSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIC8vIOW9k+WJjemhteWGjeasoeeCueWHu1xyXG4gICAgICAgIGlmIChwYWdlc2l6ZSA9PT0gdGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmdldFBhZ2VTaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICAgICAgLy8gdGhpcy5yZW1vdmVPdmVybGF5KCk7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZUNoYW5nZS5lbWl0KHBhZ2VzaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VOdW1iZXJDaGFuZ2VkKGlucHV0RWw6IEtleWJvYXJkRXZlbnQsIG1heE51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGlucHV0RWwudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChjdXJyZW50UGFnZU51bWJlciA+IG1heE51bWJlcikge1xyXG4gICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBtYXhOdW1iZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlTnVtYmVyIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRQYWdlTGlzdChuZXdwYWdlTGlzdDogbnVtYmVyW10pIHtcclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25EaXJlY3RpdmUuc2V0UGFnZUxpc3QobmV3cGFnZUxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvdG8oJGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbmV3cGFnZXIgPSBOdW1iZXIoJGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5nZXRDdXJyZW50KCkgIT09IG5ld3BhZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5nb3RvKG5ld3BhZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==