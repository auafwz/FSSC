/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
* @Author: 疯狂秀才(lucas huang)
* @Date: 2018-11-23 11:23:12
* @LastEditors: 疯狂秀才(Lucas Huang)
* @LastEditTime: 2020-10-20 20:18:26
* @Company: Inspur
* @Version: v0.3.x
*/
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2 } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { of, Subject } from 'rxjs';
import { LocaleService } from '@farris/ui-locale';
import { MessagerService } from '@farris/ui-messager';
import { LoadingService } from '@farris/ui-loading';
import { DataTableComponent } from '@farris/ui-datatable';
import { TreeTableComponent } from '@farris/ui-treetable';
import { LayoutPanelComponent } from '@farris/ui-layout';
import { CommonUtils, FarrisComponentInstanceService } from '@farris/ui-common';
import { ShortcutsService } from '@farris/ui-shortcuts';
import { InputGroupComponent } from '@farris/ui-input-group';
import { NotifyService } from '@farris/ui-notify';
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType } from './lookup-displaytype';
import { LookupComponent } from './lookup.component';
import { lookupGridDefaults, displayInfoDefault } from './lookup-grid-options';
import { ServerSideToken } from './http/ILookupHttpService';
import { LookupDefaultMapping } from './lookup-defaut-mapping';
import { LookupUtils } from './utils';
import { PersonalConfigService } from './lookup-presonalConfig.service';
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService } from './services';
import { map } from 'rxjs/operators';
import { EventManager } from '@angular/platform-browser';
/** @type {?} */
export const LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => LookupGridComponent)),
    multi: true
};
export class LookupGridComponent extends LookupComponent {
    /**
     * @param {?} injector
     * @param {?} cfr
     * @param {?} el
     * @param {?} utils
     * @param {?} defaultMapping
     * @param {?} changeDetector
     * @param {?} shortcuts
     * @param {?} lookupUtils
     * @param {?} zone
     * @param {?} render2
     */
    constructor(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        super(injector, el, changeDetector);
        this.injector = injector;
        this.cfr = cfr;
        this.el = el;
        this.utils = utils;
        this.defaultMapping = defaultMapping;
        this.changeDetector = changeDetector;
        this.shortcuts = shortcuts;
        this.lookupUtils = lookupUtils;
        this.zone = zone;
        this.render2 = render2;
        this.groupIcon = INPUT_GROUP_ICON;
        this._displayType = '';
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        this.customDisplayType = false;
        this.viewType = 'text';
        /**
         * 启用清空按钮
         */
        this.enableClear = true;
        /**
         * 服务器端排序
         */
        this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        this.singleSelect = true;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ',';
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        this.beUri = '';
        /**
         * 显示过滤工具条
         */
        this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        this.pagination = true;
        /**
         * 当前页索引，从 0开始
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息
         */
        this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        this.nosearch = false;
        // 收藏列表
        this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        this.enableCascade = false;
        /**
         * 级联控制默认值： enable, up, down, disable
         */
        this.cascadeStatus = 'enable';
        this.placeholder = '';
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        this.showSelected = false;
        /**
         * 应用收藏夹
         */
        this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        this.favoriteDataFrom = 'remote';
        /**
         * 使用提示,快捷选择
         */
        this.useTip = false;
        /**
         * 记录窗口大小
         */
        this.isRecordSize = false;
        // 是否启用选中value值对应的行数据
        this.enableToSelect = true;
        this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        this.expandLevel = -1;
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        this.loadTreeDataType = 'default';
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        this.navSelectedIds = '';
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        this.displayFields = '';
        this.displayTextSeparator = '_';
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        this.helpId = '';
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        this.textAlign = 'left';
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        this.enableTitle = true;
        this.useExtendInfo = false;
        this.extInfoFields = '';
        this.extendInfo = '';
        /**
         * IDE 设计器自定义格式化 2103
         */
        this.customFormatter = null;
        this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        this.okHandler = null;
        /**
         * 自定义取消事件
         */
        this.cancelHandler = null;
        this.tagboxHeight = 'auto';
        /**
         * 启用获取所有子级数据的功能
         */
        this.enableGetAllChildNodes = true;
        this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: 'ArrowRight',
            /**
             * 确认选择数据
             */
            confirm: 'Enter',
            /**
             * 搜索框焦点
             */
            searchFocus: 'F3',
            /**
             * 选中上一条
             */
            moveUp: 'ArrowUp',
            /**
             * 选中下一条
             */
            moveDown: 'ArrowDown',
            /**
             * 展开节点
             */
            expand: 'ArrowRight',
            /**
             * 折叠节点
             */
            collapse: 'ArrowLeft',
            /**
             * 下一页
             */
            nextPager: 'PageDown',
            /**
             * 上一页
             */
            prevPager: 'PageUp'
        };
        this.selectedData = new EventEmitter();
        this.clear = new EventEmitter();
        this.search = new EventEmitter();
        // 帮助文本框中值变化事件
        this.valueChanged = new EventEmitter();
        this.loadSuccess = new EventEmitter();
        this.pagerChanged = new EventEmitter();
        this.expandTreeNode = new EventEmitter();
        this.textChanged = new EventEmitter();
        this.checkedChange = new EventEmitter();
        this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        this.containerMargin = { top: 0, bottom: 5, left: 10, right: 10 };
        this.containerStyle = {
            marginLeft: this.containerMargin.left + 'px',
            marginRight: this.containerMargin.right + 'px',
            marginTop: this.containerMargin.top + 'px',
            marginBottom: this.containerMargin.bottom + 'px'
        };
        this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        this.navLookupDialogMinWidth = 960;
        this.navigationFilter = null;
        this.subscriptions = [];
        this.isTextChange = false;
        this.isTabChanged = false;
        this.displayInfo = Object.assign({}, displayInfoDefault);
        this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        this.personalConf = {};
        this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        this._searchState = null;
        this.allData = [];
        this.allColumnsTitle = '所有列';
        this.mustWriteSomething = '请输入关键字后查询。';
        this.mustChoosAdatarow = '请选择一条记录！';
        this.addFavoriteSuccess = '收藏成功。';
        this.delFavoriteSuccess = '移除收藏成功。';
        this.searching = false;
        /**
         * 临时存储查询结果集
         */
        this._searchResult = null;
        this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        this.selectedColumns = [];
        this.activeTab = 'datalist';
        this.favHelper = null;
        this.ttEventMgr = null;
        this.multiSelMgr = null;
        this.httpMgr = null;
        this.lookupCmpMgr = null;
        this.dialogMgr = null;
        this.selectionMgr = null;
        this.dtEventMgr = null;
        this.lookupSelectionSer = null;
        this.controlId = '';
        this.savingFaoriteData = false;
        this.isReady = false;
        this.showTagboxClearButton = false;
        this.hasError = false;
        this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        this.selectedIds = [];
        this.farrisInstances = null;
        this.createInstance();
        this.currentSelectedItems = this.lookupSelectionSer.selected$;
        this.eventManager = this.injector.get(EventManager);
        this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
    }
    /**
     * @return {?}
     */
    get displayType() {
        return this._displayType;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set displayType(val) {
        if (val) {
            /** @type {?} */
            const types = Object.values(LookupGridDisplayType);
            /** @type {?} */
            const i = types.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n === val.toUpperCase()));
            if (i > -1) {
                /** @type {?} */
                const keys = Object.keys(LookupGridDisplayType);
                this._displayType = LookupGridDisplayType[keys[i]];
            }
        }
        else {
            this._displayType = val;
        }
    }
    /**
     * @return {?}
     */
    get gridOptions() {
        if (this.useFavorite && this.columns && this.columns.length > 0 && !this.columns.find((/**
         * @param {?} item
         * @return {?}
         */
        item => item.field === FAVORITE_FIELD_NAME))) {
            this.columns.push({
                field: FAVORITE_FIELD_NAME, title: '', width: 40, align: 'center',
                formatter: this.favHelper.favoriteColumnFormatter
            });
        }
        this._gridOptions = Object.assign(this._gridOptions, {
            singleSelect: this.singleSelect,
            idField: this.idField,
            uri: this.uri,
            showFilterBar: this.showFilterBar,
            pagination: this.pagination,
            pageIndex: this.pageIndex,
            pageSize: this.pageSize,
            pageList: this.pageList,
            total: this.total,
            items: this.items,
            columns: this.columns,
            resizableColumns: true,
            fixedHeader: true,
            hover: true,
            treeInfo: this.treeInfo
        });
        return this._gridOptions;
    }
    /**
     * @param {?} opts
     * @return {?}
     */
    set gridOptions(opts) {
        this._gridOptions = Object.assign({}, this._gridOptions, opts);
        this.selectedColumns = this.multiSelMgr.initSelectedColumns();
    }
    /**
     * @return {?}
     */
    get selections() {
        /** @type {?} */
        const selectItems = this.lookupSelectionSer.getSelections();
        if (this.singleSelect) {
            return selectItems[0];
        }
        else {
            return selectItems;
        }
    }
    /**
     * @return {?}
     */
    get usePersionalConf() {
        return this.useFavorite || this.useTip || this.isRecordSize;
    }
    /**
     * @return {?}
     */
    get displayTextList() {
        if (this.displayText) {
            return this.displayText.split(this.multipleChoiceSeparator);
        }
        return [];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue('lookup.allColumns');
        this.mustWriteSomething = this.localService.getValue('lookup.mustWriteSomething');
        this.mustChoosAdatarow = this.localService.getValue('lookup.mustChoosAdatarow');
        this.addFavoriteSuccess = this.localService.getValue('lookup.favoriteInfo.addFav') || this.addFavoriteSuccess;
        this.delFavoriteSuccess = this.localService.getValue('lookup.favoriteInfo.cancelFav') || this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            const jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) { }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        onTextChanged.bind(this)();
        if (this.viewType === 'text') {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, 'keydown.F2', this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                const el = this.tagbox.nativeElement.querySelector('.multi-more');
                /** @type {?} */
                let tbh = this.tagboxHeight;
                if (tbh !== 'auto') {
                    tbh += 'px';
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, 'maxHeight', `${this.maxTagboxHeight}px`);
                    }
                }
                this.render2.setStyle(el, 'height', tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    }
    /**
     * @private
     * @return {?}
     */
    createInstance() {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    }
    /**
     * @return {?}
     */
    showDialog() {
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        (pr) => {
            this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    }
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    isDoublleList() {
        return (this.displayType === LookupGridDisplayType.NavList || this.displayType === LookupGridDisplayType.NavTreeList);
    }
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    isTree() {
        return this.displayType.toUpperCase() === LookupGridDisplayType.TreeList;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onResized(e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onResizing(pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight()
            });
        }
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onMaxDialog(pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight()
            });
        }
        this.dialogMaxed.emit(pos.size);
    }
    /**
     * @param {?=} size
     * @return {?}
     */
    resizeCmp(size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        const _size = {
            width: size.width - this.containerMargin.left - this.containerMargin.right,
            height: this.dialogMgr.getHeight()
        };
        if (this.useFavorite && this.favoritesComponentRef) {
            this.favoritesComponentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({ size: this.dialog.size });
        }
        if (this.isDoublleList()) {
            _size.width = size.width - this.leftPanel.width - 27;
        }
        this.componentRef.instance.resize(_size);
    }
    /**
     * @private
     * @return {?}
     */
    checkGridOptions() {
        if (!this.gridOptions.idField) {
            console.warn('未设置主键字段 idField');
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            () => {
                return of(true);
            });
        }
    }
    /**
     * @return {?}
     */
    getComponentType() {
        if (!this.displayType) {
            this.displayType = 'LIST';
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
                return TreeTableComponent;
        }
    }
    /**
     * @param {?=} msg
     * @return {?}
     */
    showLoading(msg = '') {
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            const opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts['message'] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    }
    /**
     * @return {?}
     */
    closeLoading() {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    }
    /**
     * @param {?} resdata
     * @return {?}
     */
    getSearchColumns(resdata) {
        /** @type {?} */
        const cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            sf => {
                /** @type {?} */
                const c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => col.field.toLowerCase() === sf.value.toLowerCase()));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols.filter((/**
             * @param {?} c
             * @return {?}
             */
            c => c.searchField)).map((/**
             * @param {?} col
             * @return {?}
             */
            col => {
                return {
                    label: col.title,
                    value: col.field
                };
            }));
        }
        return [];
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    initOptions(resData) {
        /** @type {?} */
        let obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            if (resData.columns && resData.columns.length) {
                this.columns = resData.columns;
            }
            this.setLookupTitleText(resData);
            if (this.isDoublleList() && this.dialogWidth < this.navLookupDialogMinWidth && !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                this.displayType = resData.displayType || this.displayType || 'LIST';
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() && resData.navigation && !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    col => {
                        if (this.customNavFormatter[col.field]) {
                            col.formatter = this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions['rowStyler'] = this.customNavFormatter.rowStyler;
                    this.navigationOptions['cellStyler'] = this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    let _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== 'default') {
                        _nav_treeinfo_loadtype = this.loadTreeDataType === 'loadall' ? 'all' : 'async';
                    }
                    this.navigationOptions.treeInfo.loadDataType = _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            col => {
                if (this.customFormatter[col.field]) {
                    col.formatter = this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler = this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler = this.customFormatter.cellStyler;
            }
        }
        this.changeDetector.detectChanges();
        return obser;
    }
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    setLookupTitleText(resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== '此处显示帮助标题') {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    showGetAllChildrenCheckbox() {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes = this.treeInfo.loadDataType !== 'all' && this.treeInfo.layerType === 'pathcode';
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    }
    /**
     * @return {?}
     */
    initData() {
        /** @type {?} */
        const observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    this.isShow = false;
                    if (this.dialog) {
                        this.dialog.close();
                    }
                    return;
                }
                this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                () => {
                    this.selectedColumns = this.multiSelMgr.initSelectedColumns();
                    this.favoriteColumns = this.favHelper.getFavoriteColumns();
                    if (this.usePersionalConf) {
                        if (!this.personalConfigService.getPersonalData()) {
                            this.personalConfigService.savePersonalConfig(this.personalConf);
                        }
                    }
                    if (!this.isTabChanged) {
                        this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (this.navSelectedIds || this.selectFirstInNav) {
                            this.loadDataWhenOpen = false;
                        }
                    }
                    this.loadData(data);
                    if (this.isTree()) {
                        if (this.activeTab === 'datalist') {
                            /** @type {?} */
                            const tt = (/** @type {?} */ (this.componentRef.instance));
                            if (tt.loadDataType === 'all' && tt.searchData.value) {
                                if (this.items && this.items.length) {
                                    tt.toggleExpand(this.items[0], true);
                                }
                            }
                        }
                        this.showGetAllChildrenCheckbox();
                    }
                    this.isTextChange = false;
                    this._searchResult = null; // 清空临时查询 结果
                    this.closeLoading();
                    // this.isReady$.next(true);
                    this.isReady = true;
                    this.changeDetector.detectChanges();
                    this.lookupinitializationSubject.next();
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                // this.isReady$.next(true);
                this.closeLoading();
                this._searchResult = null; // 清空临时查询 结果
                this.isTextChange = false;
                this.hasError = true;
                this.changeDetector.detectChanges();
                if (typeof err === 'string') {
                    this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                this.messagerService.error(err.error.Message);
                            }
                            else {
                                this.messagerService.error('应用服务器错误,请联系系统管理员！');
                            }
                        }
                    }
                    console.log(err);
                }
            })
        };
        /** @type {?} */
        let p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1
            }
        };
        /** @type {?} */
        const t = 'all';
        if (this.isTextChange) {
            p = {
                search: {
                    field: '*',
                    value: this.displayText
                }
            };
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            const vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p['selectedInfo'] = {
                    selected: true,
                    selectedIds: vals
                };
            }
            else {
                if (this['selectedIds']) {
                    p['selectedInfo'] = {
                        selected: true,
                        selectedIds: this['selectedIds']
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        (restData) => {
            if (restData) {
                restData.selectedItems = restData['selectedData'] || [];
            }
            else {
                if (restData && typeof restData === 'object') {
                    restData.selectedItems = [];
                }
            }
            return restData;
        }))).subscribe(observer);
    }
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadData(resData, rebindEvent = true) {
        if (this.activeTab === 'datalist') {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === 'favorite') {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    }
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    loadFavData(result) {
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree) {
                this.setTreeInfo(result);
            }
            if (this.isTree()) {
                /** @type {?} */
                const treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                const treeData = this.treeNodeHelper.flatTreeNodes(treeNodes).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    n.data['_addtional_'] = n['addtional'];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    }
    /**
     * @param {?=} resData
     * @return {?}
     */
    loadDataTableData(resData) {
        if (resData) {
            if (this.gridOptions) {
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList && (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    }
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    updateDataTable(opts) {
        if (opts) {
            /** @type {?} */
            const dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    setTreeInfo(resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        let _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            const onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            let _osl = 'no';
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? 'yes' : 'no';
            }
            _treeInfo = Object.assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        if (this.gridOptions.treeInfo) {
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (treeInfo) {
                if (treeInfo.onlySelectLeaf === undefined || treeInfo.onlySelectLeaf === null) {
                    treeInfo.onlySelectLeaf = 'no';
                }
                if (typeof treeInfo.onlySelectLeaf === 'boolean') {
                    treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? 'yes' : 'no';
                }
                // 20210902
                if (this.loadTreeDataType === 'default') {
                    treeInfo.loadDataType = _treeInfo.loadDataType;
                }
                else {
                    treeInfo.loadDataType = this.loadTreeDataType === 'loadall' ? 'all' : 'async';
                }
                if (treeInfo.onlySelectLeaf !== 'default') {
                    _treeInfo = Object.assign(_treeInfo, treeInfo);
                }
            }
        }
        this.treeInfo = _treeInfo;
    }
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadTreeTableData(resData, rebindEvent = true) {
        /** @type {?} */
        const items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo['treeDataIsInit']) {
                if (treeInfo.layerType.toLowerCase() === 'pathcode') {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, '', `${treeInfo.dataField}.${treeInfo.parentField}`, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            const tt = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt.loadDataType = this.treeInfo.loadDataType;
            }
            /** @type {?} */
            const isLoadAllTreeData = (/**
             * @return {?}
             */
            () => {
                if (this.loadTreeDataType === 'default') {
                    return tt.loadDataType === 'all';
                }
                else {
                    return this.loadTreeDataType === 'loadall';
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            const isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt.loadData(this.items);
            }
            tt.resize();
        }
    }
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    checkNodeCanBeSelect(nodes, isAllTreeData = false) {
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            (node) => {
                if (node.hasOwnProperty('addtional')) {
                    node.selectable = !node['addtional'];
                }
                if (node.children && node.children.length) {
                    this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    onChanges(val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = true;
            if (this.nosearch) {
                this.setModelValue(val);
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    onClear(emit = true) {
        this.isTextChange = false;
        this.displayText = '';
        this.displayValue = '';
        this.originalText = '';
        this.extendInfo = '';
        this.setModelValue('');
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                const bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    clearValue(emit = true) {
        this.onClear(emit);
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    selectItem(rowData) {
        /** @type {?} */
        let selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        // 如果定义自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                const bsdResult = this.beforeSelectData({ instance: this, data: selectedRow });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    console.error('帮助数据选中前事件未返回值或返回类型非Observable, 请检查');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getParentPathCode(rows) {
        /** @type {?} */
        const maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        (arr, fn) => Math.max(...arr.map(typeof fn === 'function' ? fn : (/**
         * @param {?} val
         * @return {?}
         */
        val => val[fn]))));
        const { dataField, pathField, layerField } = this.treeInfo;
        /** @type {?} */
        const maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        x => x[dataField][layerField]));
        for (let i = 1; i <= maxLayer; i++) {
            /** @type {?} */
            const _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n[dataField][layerField] === i));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => {
                    /** @type {?} */
                    const patchCode = r[dataField][pathField];
                    /** @type {?} */
                    const _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n[dataField][pathField] !== patchCode && n[dataField][pathField].indexOf(patchCode) === 0));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n[dataField][pathField] !== patchCode));
                    }
                }));
            }
        }
        return rows;
    }
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    _beforeSelectDataCallBack(e, selectedRow) {
        /** @type {?} */
        let canSelect = e;
        /** @type {?} */
        let message = '';
        if (typeof e === 'boolean') {
            canSelect = e;
        }
        else {
            if (typeof e === 'object') {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            let selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree() &&
                this.treeInfo.loadDataType !== 'all' && this.treeInfo.layerType === 'pathcode' &&
                this.isGetAllChidlNodes) {
                // const parentsIds = selectedRow.map(n => n[this.treeInfo.dataField][this.treeInfo.pathField]);
                /** @type {?} */
                let parentsIds = this.getParentPathCode(selectedRow);
                if (parentsIds && parentsIds.length) {
                    parentsIds = parentsIds.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n[this.treeInfo.dataField][this.treeInfo.pathField]));
                    this.showLoading();
                    selectedRows$ = this.httpMgr.getData({ parentsIds }, 'allChildren').pipe(map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    (r) => {
                        /** @type {?} */
                        const items = r.items ? r.items.map((/**
                         * @param {?} d
                         * @return {?}
                         */
                        d => d.data)) : [];
                        /** @type {?} */
                        const allitems = [...selectedRow, ...items];
                        /** @type {?} */
                        let ids = allitems.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n[this.idField]));
                        ids = Array.from(new Set(ids));
                        return ids.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => allitems.find((/**
                         * @param {?} a
                         * @return {?}
                         */
                        a => a[this.idField] === n))));
                    })));
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            (rows) => {
                this.closeLoading();
                this.updateControlValue(rows);
                if (!this.useTip || !rows) {
                    return;
                }
                if (this.useTip) {
                    this.personalConfigService.updateQueckSelected(rows, this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, '', true, (/**
                     * @return {?}
                     */
                    () => {
                        this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateControlValue(selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this['inDatagrid'] && selectedRow) {
                /** @type {?} */
                const selectItems = Array.isArray(selectedRow) ? selectedRow : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateBindData(selectedRow) {
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField].split(',').forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = selectedRow.map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        r => {
                            return this.utils.getValue(helpField, r);
                        })).join(this.multipleChoiceSeparator);
                        this.utils.setValue(bindingData, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    }
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    getExtendInfoFields(isHelpData = true) {
        if (!this.extInfoFields) {
            console.warn(`未设置扩展字段。`);
            return [];
        }
        /** @type {?} */
        const tipFieldArr = this.extInfoFields.split(',');
        if (isHelpData) {
            /** @type {?} */
            let extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            tf => {
                /** @type {?} */
                const mapKey = Object.keys(this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                k => {
                    return this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    console.warn(`在帮助映射字段中未找到${tf}`);
                    return '';
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    }
    /**
     * @return {?}
     */
    onUpdateExtendInfo() {
        /** @type {?} */
        const jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    }
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    updateExtendInfo(data, isHelpData = true) {
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    const tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => {
                        return this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join('，');
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                const extendInfoFields = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields && extendInfoFields.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        const tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => {
                            return this.getExtendInfoText(n, extendInfoFields);
                        }));
                        this.extendInfo = tipString.join('，');
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields);
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    getExtendInfoText(itemData, fields = null) {
        if (typeof this.extInfoFormatter === 'function') {
            return this.extInfoFormatter({ bindingData: itemData, instance: this });
        }
        else {
            /** @type {?} */
            const tipString = [];
            /** @type {?} */
            const tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            t => {
                /** @type {?} */
                const tfv = this.utils.getValue(t, itemData);
                tipString.push(tfv);
                return { [t]: tfv };
            }));
            return tipString.join(' ');
        }
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getDisplayText(rows) {
        /** @type {?} */
        const df = this.displayFields ? this.displayFields.split(',') : [this.textField];
        /** @type {?} */
        const txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        r => {
            /** @type {?} */
            const t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                t.push(this.utils.getValue(n, r));
            }));
            return t.join(this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join('');
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                t => '[' + t + ']')).join(',');
            }
            else {
                return txtArr.join(',');
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    setDisplayText(selectedRow) {
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, datatable: (/** @type {?} */ (this.componentRef.instance)) });
                }
                else {
                    /** @type {?} */
                    const tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => {
                        return this.utils.getValue(this.textField, r);
                    })).join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, datatable: (/** @type {?} */ (this.componentRef.instance)) });
                    }
                    else {
                        /** @type {?} */
                        const tt = (/** @type {?} */ (this.componentRef.instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => {
                    return this.utils.getValue(this.valueField, r);
                })).join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    }
    /**
     * @param {?} rowData
     * @return {?}
     */
    runDictPickedEvent(rowData) {
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            (v) => {
                if (this.okButton) {
                    this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === 'boolean') {
                    if (v) {
                        this.closeDialog(rowData);
                    }
                }
                else if (typeof v === 'object' && v.closeDialog !== undefined && !v.closeDialog) {
                    if (v.message) {
                        this.messagerService.warning(v.message);
                    }
                    else {
                        this.closeDialog(rowData);
                    }
                }
                else {
                    this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    }
    /**
     * @private
     * @return {?}
     */
    focusToInput() {
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.inputGroup && this.inputGroup.textbox) {
                    this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    closeDialog(rowData = null) {
        this.isShow = false;
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        this.focusToInput();
    }
    /**
     * @return {?}
     */
    cancelSelect() {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    setModelValue(v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    }
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    onTabChange(e) {
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        const _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({ tabIndex: e.tabIndex });
        if (this.activeTab === 'datalist') {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if (!this.items || !this.items.length) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === 'favorite') {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems || !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.resizeCmp();
            if (this.isTree()) {
                /** @type {?} */
                const y = this.componentRef.instance.state.scrollY;
                this.componentRef.instance.scrollToY(y, 0);
                if (this.enableCascade) {
                    this.ttEventMgr.cascadeValueChanged(this.cascadeStatus);
                }
                this.selectionMgr.selectCurrentValue();
            }
        }));
    }
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    registerMouseEventForTagView() {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener('mouseenter', this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener('mouseleave', this.onTagboxMouseLeave.bind(this));
        }
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? '' : 'none';
        /** @type {?} */
        const clearIcon = event.target.querySelector('.input-group-clear');
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseEnter(event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseLeave(event) {
        this.toggleClearIcon(event);
    }
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    onRemoveSelectItem($event, txt) {
        // console.log($event, txt);
        $event.stopPropagation();
        /** @type {?} */
        const textArray = Array.from(this.displayTextList);
        /** @type {?} */
        const removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            const vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex, instance: this });
    }
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    updateOtherFieldDataWhenTagremoved(removedIndex) {
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        const textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                const bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                let pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split('/').filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n !== ''));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField].split(',').forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const fieldPaths = pathArr.concat(formField.split('.'));
                        /** @type {?} */
                        const val = bindingData.getValue(fieldPaths);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        bindingData.setValue(pathArr.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField].split(',').forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = this.utils.getValue(formField, this.bindingData);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        this.utils.setValue(this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    }
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    onAllChildNodesClick($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    }
}
LookupGridComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-lookup-grid',
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n></input-group>\r\n\r\n\r\n<div  #tagbox  class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\"  title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n>\r\n    <div [ngStyle]=\"containerStyle\" [style.height.px]=\"dialogHeight - 46 - 56\">\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\"\r\n            [enableSelected]=\"showSelected && !singleSelect\" [selectedTotal]=\"(currentSelectedItems | async)?.length\">\r\n            <div datalist style=\"position: relative;\" [style.height.px]=\"useFavorite ? dialogHeight - 46 - 56 - 40 : dialogHeight - 46 - 56\">\r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\">\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"10\" [showBorder]=\"false\" >\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\">\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                \r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites [style.height.px]=\"dialogHeight - 46 - 56 - 40\" style=\"position: relative; \"  *ngIf=\"useFavorite\" >\r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n            <div selected [style.height.px]=\"dialogHeight - 46 - 5 -40\" style=\"position: relative;\"  *ngIf=\"showSelected\" >\r\n                <farris-datatable #multiSelectDT\r\n                    [height]=\"gridOptions?.height\"\r\n                    [pagination]=\"false\" [fill]=\"true\"\r\n                    [columns]=\"selectedColumns\"\r\n                    [data]=\"currentSelectedItems | async\"\r\n                    [remoteSort]=\"false\"\r\n                    (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                >\r\n                </farris-datatable>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n    \r\n    <div class=\"flex-fill\" style=\"text-align: left;\" *ngIf=\"isReady && enableCascade && displayType==='TREELIST' && singleSelect === false\">\r\n        <select class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\">\r\n            <option value=\"enable\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n            <option value=\"up\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n            <option value=\"down\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n            <option value=\"disable\" >{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option>\r\n        </select>\r\n\r\n        <button class=\"btn btn-link\" style=\"display: inline-block;margin-left: 10px;padding-left: 0;\"\r\n            *ngIf=\"enableGetAllChildNodes\" (click)=\"onAllChildNodesClick($event)\">\r\n            <span class=\"f-icon f-icon-checkbox\"[class.f-icon-checkbox-checked]=\"isGetAllChidlNodes\"\r\n                style=\"margin-right: 5px; font-size: 14px;color: #0089FF;\"></span>{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</button>\r\n\r\n    </div>\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\"  class=\"btn btn-primary btn-lg\" (click)=\"selectItem()\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                providers: [LOOKUPGRID_VALUE_ACCESSOR, ShortcutsService, LookupDefaultMapping, LookupUtils, PersonalConfigService],
                encapsulation: ViewEncapsulation.None,
                exportAs: 'lookup',
                styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}"]
            }] }
];
/** @nocollapse */
LookupGridComponent.ctorParameters = () => [
    { type: Injector },
    { type: ComponentFactoryResolver },
    { type: ElementRef },
    { type: CommonUtils },
    { type: LookupDefaultMapping },
    { type: ChangeDetectorRef },
    { type: ShortcutsService },
    { type: LookupUtils },
    { type: NgZone },
    { type: Renderer2 }
];
LookupGridComponent.propDecorators = {
    customDisplayType: [{ type: Input }],
    viewType: [{ type: Input }],
    displayType: [{ type: Input }],
    enableClear: [{ type: Input }],
    remoteSort: [{ type: Input }],
    condition: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    singleSelect: [{ type: Input }],
    multipleChoiceSeparator: [{ type: Input }],
    idField: [{ type: Input }],
    uri: [{ type: Input }],
    beUri: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    pagination: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageList: [{ type: Input }],
    total: [{ type: Input }],
    columns: [{ type: Input }],
    remoteSearch: [{ type: Input }],
    searchOnServer: [{ type: Input }],
    nosearch: [{ type: Input }],
    maxLength: [{ type: Input }],
    mappingFn: [{ type: Input }],
    items: [{ type: Input }],
    favoriteItems: [{ type: Input }],
    customData: [{ type: Input }],
    bindingData: [{ type: Input }],
    treeInfo: [{ type: Input }],
    enableCascade: [{ type: Input }],
    cascadeStatus: [{ type: Input }],
    placeholder: [{ type: Input }],
    showSelected: [{ type: Input }],
    useFavorite: [{ type: Input }],
    favoriteDataFrom: [{ type: Input }],
    useTip: [{ type: Input }],
    isRecordSize: [{ type: Input }],
    userId: [{ type: Input }],
    enableToSelect: [{ type: Input }],
    enableFindText: [{ type: Input }],
    expandLevel: [{ type: Input }],
    loadTreeDataType: [{ type: Input }],
    loadDataWhenOpen: [{ type: Input }],
    navSelectedIds: [{ type: Input }],
    selectFirstInNav: [{ type: Input }],
    enableFullTree: [{ type: Input }],
    displayFormatter: [{ type: Input }],
    displayFields: [{ type: Input }],
    displayTextSeparator: [{ type: Input }],
    helpId: [{ type: Input }],
    textAlign: [{ type: Input }],
    enableTitle: [{ type: Input }],
    useExtendInfo: [{ type: Input }],
    extInfoFields: [{ type: Input }],
    extInfoFormatter: [{ type: Input }],
    extendInfo: [{ type: Input }],
    customFormatter: [{ type: Input }],
    customNavFormatter: [{ type: Input }],
    okHandler: [{ type: Input }],
    cancelHandler: [{ type: Input }],
    tagboxHeight: [{ type: Input }],
    maxTagboxHeight: [{ type: Input }],
    enableGetAllChildNodes: [{ type: Input }],
    shortcutKey: [{ type: Input }],
    beforeSelectData: [{ type: Input }],
    selectedData: [{ type: Output }],
    clear: [{ type: Output }],
    search: [{ type: Output }],
    valueChanged: [{ type: Output }],
    loadSuccess: [{ type: Output }],
    pagerChanged: [{ type: Output }],
    expandTreeNode: [{ type: Output }],
    textChanged: [{ type: Output }],
    checkedChange: [{ type: Output }],
    tagRemoved: [{ type: Output }],
    gridOptions: [{ type: Input }],
    contentContainer: [{ type: ViewChild, args: ['contentContainer', { read: ViewContainerRef },] }],
    favoritesContainer: [{ type: ViewChild, args: ['favoritesContainer', { read: ViewContainerRef },] }],
    leftContainer: [{ type: ViewChild, args: ['leftContainer', { read: ViewContainerRef },] }],
    centerContainer: [{ type: ViewChild, args: ['centerContainer', { read: ViewContainerRef },] }],
    multiSelectDT: [{ type: ViewChild, args: ['multiSelectDT',] }],
    inputGroup: [{ type: ViewChild, args: ['inputgroup',] }],
    leftPanel: [{ type: ViewChild, args: ['leftPanel',] }],
    tagbox: [{ type: ViewChild, args: ['tagbox',] }],
    okButton: [{ type: ViewChild, args: ['okbtn',] }]
};
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 0开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable, up, down, disable
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /** @type {?} */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /** @type {?} */
    LookupGridComponent.prototype.search;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelectDT;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.render2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVNBLE9BQU8sRUFDSCxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBNEIsWUFBWSxFQUFVLFFBQVEsRUFDckYsd0JBQXdCLEVBQUUsTUFBTSxFQUFFLGlCQUFpQixFQUFFLGlCQUFpQixFQUN0RSxnQkFBZ0IsRUFBRSxVQUFVLEVBQXNCLFVBQVUsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUNsRixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQTRCLEVBQUUsRUFBRSxPQUFPLEVBQW1CLE1BQU0sTUFBTSxDQUFDO0FBRTlFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBb0IsTUFBTSxvQkFBb0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQUUsa0JBQWtCLEVBQVksTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsV0FBVyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFaEYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FB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Q0FBd0M7O0lBQ3RGLHdDQUFrQzs7SUFBRSwwQ0FBK0I7Ozs7O0lBQ25FLG1DQUFvQjs7Ozs7SUFBRSxzQ0FBMEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4qIEBBdXRob3I6IOeWr+eLguengOaJjShsdWNhcyBodWFuZylcclxuKiBARGF0ZTogMjAxOC0xMS0yMyAxMToyMzoxMlxyXG4qIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4qIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMjAgMjA6MTg6MjZcclxuKiBAQ29tcGFueTogSW5zcHVyXHJcbiogQFZlcnNpb246IHYwLjMueFxyXG4qL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgSW5wdXQsIFZpZXdDaGlsZCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBFdmVudEVtaXR0ZXIsIE9uSW5pdCwgSW5qZWN0b3IsXHJcbiAgICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIE91dHB1dCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIFZpZXdFbmNhcHN1bGF0aW9uLCBBZnRlclZpZXdJbml0LFxyXG4gICAgVmlld0NvbnRhaW5lclJlZiwgZm9yd2FyZFJlZiwgQ29tcG9uZW50UmVmLCBUeXBlLCBFbGVtZW50UmVmLCBOZ1pvbmUsIFJlbmRlcmVyMiwgT25EZXN0cm95LCBIb3N0TGlzdGVuZXJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24sIG9mLCBTdWJqZWN0LCBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IElSZXNpemVFdmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZHJhZ2dhYmxlJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlLCBMb2FkaW5nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHsgRGF0YVRhYmxlQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhdGFibGUnO1xyXG5pbXBvcnQgeyBUcmVlVGFibGVDb21wb25lbnQsIFRyZWVOb2RlIH0gZnJvbSAnQGZhcnJpcy91aS10cmVldGFibGUnO1xyXG5pbXBvcnQgeyBMYXlvdXRQYW5lbENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktbGF5b3V0JztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbHMsIEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgRW50aXR5RmlsdGVyIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vdHlwZXMnO1xyXG5pbXBvcnQgeyBTaG9ydGN1dHNTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1zaG9ydGN1dHMnO1xyXG5pbXBvcnQgeyBJbnB1dEdyb3VwQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1pbnB1dC1ncm91cCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcblxyXG5pbXBvcnQgeyBGQVZPUklURV9GSUVMRF9OQU1FLCBJTlBVVF9HUk9VUF9JQ09OLCBMb29rdXBHcmlkRGlzcGxheVR5cGUsIEV4dEluZm9Gb3JtYXR0ZXIsIEN1c3RvbURhdGFGb3JtYXR0ZXIgfSBmcm9tICcuL2xvb2t1cC1kaXNwbGF5dHlwZSc7XHJcbmltcG9ydCB7IExvb2t1cENvbXBvbmVudCB9IGZyb20gJy4vbG9va3VwLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7XHJcbiAgICBMb29rdXBHcmlkT3B0aW9ucywgbG9va3VwR3JpZERlZmF1bHRzLCBMb29rdXBHcmlkUmVzdWx0LCBOYXZpZ2F0aW9uT3B0aW9ucywgRGlzcGxheUluZm8sXHJcbiAgICBkaXNwbGF5SW5mb0RlZmF1bHQsIFBpY2tpbmdSZXN1bHQsIFRyZWVJbmZvLCBMT0FEX0RBVEFfVFlQRSwgT05MWV9TRUxFQ1RfTEVBRiwgUGVyc29uYWxDb25maWdcclxufSBmcm9tICcuL2xvb2t1cC1ncmlkLW9wdGlvbnMnO1xyXG5pbXBvcnQgeyBJTG9va3VwSHR0cFNlcnZpY2UsIFNlcnZlclNpZGVUb2tlbiB9IGZyb20gJy4vaHR0cC9JTG9va3VwSHR0cFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBOYXZpZ2F0aW9uRmlsdGVyIH0gZnJvbSAnLi9odHRwL1JlbW90ZVBhcmFtcyc7XHJcbmltcG9ydCB7IExvb2t1cExlZnRDb21wb25lbnQgfSBmcm9tICcuL2xvb2t1cC1sZWZ0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IExvb2t1cERlZmF1bHRNYXBwaW5nIH0gZnJvbSAnLi9sb29rdXAtZGVmYXV0LW1hcHBpbmcnO1xyXG5pbXBvcnQgeyBMb29rdXBVdGlscyB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBQZXJzb25hbENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL2xvb2t1cC1wcmVzb25hbENvbmZpZy5zZXJ2aWNlJztcclxuaW1wb3J0IHtcclxuICAgIFV0aWxTZXJ2aWNlLCBUcmVlTm9kZUhlbHBlciwgRmF2b3JpdGVIZWxwZXIsIFNlbGVjdGlvbk1hbmFnZXIsIERhdGFUYWJsZUV2ZW50TWFuYWdlciwgVHJlZVRhYmxlRXZlbnRNYW5hZ2VyLFxyXG4gICAgTXVsdGlTZWxlY3Rpb25NYW5hZ2VyLCBMb29rdXBIdHRwTWFuYWdlciwgTG9va3VwQ29tcG9uZW50TWFuYWdlciwgTG9va3VwRGlhbG9nTWFuYWdlciwgb25UZXh0Q2hhbmdlZCwgTG9va3VwU2VsZWN0aW9uU2VydmljZVxyXG59IGZyb20gJy4vc2VydmljZXMnO1xyXG5pbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAsIHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmltcG9ydCB7IEV2ZW50TWFuYWdlciB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xyXG5cclxuZXhwb3J0IGNvbnN0IExPT0tVUEdSSURfVkFMVUVfQUNDRVNTT1I6IGFueSA9IHtcclxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTG9va3VwR3JpZENvbXBvbmVudCksXHJcbiAgICBtdWx0aTogdHJ1ZVxyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1sb29rdXAtZ3JpZCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vbG9va3VwLWdyaWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vbG9va3VwLWdyaWQuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIHByb3ZpZGVyczogW0xPT0tVUEdSSURfVkFMVUVfQUNDRVNTT1IsIFNob3J0Y3V0c1NlcnZpY2UsIExvb2t1cERlZmF1bHRNYXBwaW5nLCBMb29rdXBVdGlscywgUGVyc29uYWxDb25maWdTZXJ2aWNlXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBleHBvcnRBczogJ2xvb2t1cCdcclxufSlcclxuZXhwb3J0IGNsYXNzIExvb2t1cEdyaWRDb21wb25lbnQgZXh0ZW5kcyBMb29rdXBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuICAgIGdyb3VwSWNvbiA9IElOUFVUX0dST1VQX0lDT047XHJcbiAgICBfZGlzcGxheVR5cGUgPSAnJztcclxuXHJcbiAgICAvKiog5L2/55So6KGo5Y2V6K6+6K6h5Zmo5Lit55qE5pi+56S657G75Z6L44CC5ZCm5YiZ5L2/55So5YWD5pWw5o2u6K6+572u55qE5pi+56S657G75Z6L44CCIOm7mOiupO+8mmZhbHNlICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EaXNwbGF5VHlwZSA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgdmlld1R5cGU6ICd0ZXh0JyB8ICd0YWcnID0gJ3RleHQnO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkaXNwbGF5VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGxheVR5cGU7XHJcbiAgICB9XHJcbiAgICBzZXQgZGlzcGxheVR5cGUodmFsOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gT2JqZWN0LnZhbHVlcyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdHlwZXMuZmluZEluZGV4KG4gPT4gbiA9PT0gdmFsLnRvVXBwZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoTG9va3VwR3JpZERpc3BsYXlUeXBlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlUeXBlID0gTG9va3VwR3JpZERpc3BsYXlUeXBlW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlzcGxheVR5cGUgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWQr+eUqOa4heepuuaMiemSriAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlQ2xlYXIgPSB0cnVlO1xyXG4gICAgLyoqIOacjeWKoeWZqOerr+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgcmVtb3RlU29ydCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgY29uZGl0aW9uOiBFbnRpdHlGaWx0ZXI7XHJcblxyXG4gICAgLyoqIOagkeihqOaYvuekuuWFqOmAieWkjemAieahhuOAgiDpu5jorqTkuI3mmL7npLogKi9cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja0FsbCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDmmK/lkKblkK/nlKjlpJrpgIkgKi9cclxuICAgIEBJbnB1dCgpIHNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog5aSa6YCJ5YiG6ZqU56ymICovXHJcbiAgICBASW5wdXQoKSBtdWx0aXBsZUNob2ljZVNlcGFyYXRvciA9ICcsJztcclxuICAgIC8qKiDkuLvplK7lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIGlkRmllbGQ/OiBzdHJpbmc7XHJcbiAgICAvKiog5Y+v5Lul5Li65YWD5pWw5o2uSUTjgIF3ZWJhcGlVUkwgKi9cclxuICAgIEBJbnB1dCgpIHVyaT86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogQkUgUkVTVCBSVUlcclxuICAgICAqIC0g5q2k5aSE6K6+572u5ZCOIHVyaSDlpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYmVVcmkgPSAnJztcclxuICAgIC8qKlxyXG4gICAgICog5pi+56S66L+H5ruk5bel5YW35p2hXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNob3dGaWx0ZXJCYXIgPSB0cnVlO1xyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOWIhumhtSAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IHRydWU7XHJcbiAgICAvKiog5b2T5YmN6aG157Si5byV77yM5LuOIDDlvIDlp4sgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VJbmRleCA9IDE7XHJcbiAgICAvKiog5q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZSA9IDIwO1xyXG4gICAgLyoqIOWPr+eUqOWIhumhteiusOW9leaVsOWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5oC76K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgICAvKiog5Y+v5ouW5Yqo5YiXICovXHJcbiAgICAvLyBASW5wdXQoKSByZXNpemFibGVDb2x1bW5zID0gdHJ1ZTtcclxuICAgIC8qKiDmmL7npLrliJfkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIGNvbHVtbnM6IGFueVtdID0gW107XHJcblxyXG4gICAgLyoqIOW4ruWKqeafpeivouaYr+WQpuS4uui/nOerr+afpeivoiAqL1xyXG4gICAgQElucHV0KCkgcmVtb3RlU2VhcmNoID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5paH5pys5Y+Y5YyW5ZCO77yM6L+b6KGM5pyN5Yqh5Zmo56uv5p+l6K+iICovXHJcbiAgICBASW5wdXQoKSBzZWFyY2hPblNlcnZlciA9IHRydWU7XHJcbiAgICAvKiog5LiN6L+b6KGM5pyN5Yqh5Zmo5p+l6K+i77yM5pyJ5ZWl566X5ZWlICovXHJcbiAgICBASW5wdXQoKSBub3NlYXJjaCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWB6K646L6T5YWl55qE5a2X56ym5pyA5aSn6ZW/5bqm44CCXHJcbiAgICAgKiDku7vmhI/ovpPlhaXml7bvvIzmraTlsZ7mgKfmnInmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbWF4TGVuZ3RoO1xyXG5cclxuICAgIEBJbnB1dCgpIG1hcHBpbmdGbjogKHJvd0RhdGEsIG1hcEZpZWxkcywgYmluZGluZ0RhdGE/OiBhbnkpID0+IHZvaWQ7XHJcbiAgICAvKiog5pWw5o2u5YiX6KGoICovXHJcbiAgICBASW5wdXQoKSBpdGVtczogYW55O1xyXG4gICAgLy8g5pS26JeP5YiX6KGoXHJcbiAgICBASW5wdXQoKSBmYXZvcml0ZUl0ZW1zOiBhbnlbXSA9IFtdO1xyXG4gICAgLyoqIOiHquWumuS5ieaVsOaNriAqL1xyXG4gICAgQElucHV0KCkgY3VzdG9tRGF0YTogYW55O1xyXG5cclxuICAgIC8qKiDnu5HlrprlgLzmiYDlnKjnmoTlr7nosaEgKi9cclxuICAgIEBJbnB1dCgpIGJpbmRpbmdEYXRhOiB7fTtcclxuXHJcbiAgICBASW5wdXQoKSB0cmVlSW5mbzogVHJlZUluZm87XHJcbiAgICAvKiog5piv5ZCm5ZCv55So57qn6IGU6YCJ5oup5o6n5Yi26YCJ6aG5ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVDYXNjYWRlID0gZmFsc2U7XHJcbiAgICAvKiog57qn6IGU5o6n5Yi26buY6K6k5YC877yaIGVuYWJsZSwgdXAsIGRvd24sIGRpc2FibGUgKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVTdGF0dXM6ICdlbmFibGUnIHwgJ3VwJyB8ICdkb3duJyB8ICdkaXNhYmxlJyA9ICdlbmFibGUnO1xyXG5cclxuICAgIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XHJcblxyXG4gICAgLyoqIOaYvuekuuW3sumAieiusOW9leWIl+ihqOOAgiDpu5jorqTkuLogZmFsc2Ug5LiN5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93U2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5bqU55So5pS26JeP5aS5ICovXHJcbiAgICBASW5wdXQoKSB1c2VGYXZvcml0ZSA9IGZhbHNlO1xyXG4gICAgLyoqIOaUtuiXj+aVsOaNruadpeiHquS6ju+8miBsb2NhbGU6IOacrOWcsOWtmOWCqO+8jCByZW1vdGU6IOacjeWKoeWZqOerr+WtmOWCqCAqL1xyXG4gICAgQElucHV0KCkgZmF2b3JpdGVEYXRhRnJvbTogJ2xvY2FsZScgfCAncmVtb3RlJyA9ICdyZW1vdGUnO1xyXG4gICAgLyoqIOS9v+eUqOaPkOekuizlv6vmjbfpgInmi6kgKi9cclxuICAgIEBJbnB1dCgpIHVzZVRpcCA9IGZhbHNlO1xyXG4gICAgLyoqIOiusOW9leeql+WPo+Wkp+WwjyAqL1xyXG4gICAgQElucHV0KCkgaXNSZWNvcmRTaXplID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW/q+mAn+mAieaLqSAqL1xyXG4gICAgQElucHV0KCkgdXNlcklkOiBzdHJpbmc7XHJcblxyXG4gICAgLy8g5piv5ZCm5ZCv55So6YCJ5LitdmFsdWXlgLzlr7nlupTnmoTooYzmlbDmja5cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRvU2VsZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaW5kVGV4dCA9IGZhbHNlO1xyXG4gICAgLyoqIC0xOiDkuI3lsZXlvIDvvJsgMDog5YWo6YOo5bGV5byA77ybPjA6IOWxleW8gOWIsOaMh+Wumue6p+aVsCAqL1xyXG4gICAgQElucHV0KCkgZXhwYW5kTGV2ZWwgPSAtMTtcclxuICAgIC8qKiDmoJHlvaLluK7liqnmlbDmja7liqDovb3mlrnlvI/vvJogZGVmYXVsdDog5YaF572u5Y+W5pWw77ybIGxvYWRhbGw6IOWKoOi9veaJgOaciSBsYXllcmxvYWTvvJrliIblsYLliqDovb0gKi9cclxuICAgIEBJbnB1dCgpIGxvYWRUcmVlRGF0YVR5cGU6ICdkZWZhdWx0JyB8ICdsb2FkYWxsJyB8ICdsYXllcmxvYWQnID0gJ2RlZmF1bHQnO1xyXG5cclxuICAgIC8qKiDnqpflj6PmiZPlvIDlkI7nq4vljbPliqDovb3mlbDmja7vvIzpu5jorqTkuLogdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgbG9hZERhdGFXaGVuT3BlbiA9IHRydWU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7zoiKrliJfooajvvIzmoJHliJfooajlnKjluK7liqnmiZPlvIDlkI7pgInkuK3nmoTmlbDmja47XHJcbiAgICAgKiDorr7nva7lkI7vvIxgc2VsZWN0Rmlyc3RJbk5hdmAg5aSx5pWI77yBXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG5hdlNlbGVjdGVkSWRzID0gJyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7zoiKrluK7liqnvvIzpgInkuK3nrKwx5p2h5pWw5o2u77yM6buY6K6k5Li6IGZhbHNlO1xyXG4gICAgICog5rOo5oSP77ya5b2TYG5hdlNlbGVjdGVkSWRzYOS4jeS4uuepuuaXtu+8jOatpOWxnuaAp+WkseaViOOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RGaXJzdEluTmF2ID0gZmFsc2U7XHJcblxyXG5cclxuICAgIC8qKiDlkK/nlKjmnoTpgKDlrozmlbTmoJHov4fmu6QgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUZ1bGxUcmVlID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog5pi+56S65paH5pys6Ieq5a6a5LmJ5Ye95pWwICovXHJcbiAgICBASW5wdXQoKSBkaXNwbGF5Rm9ybWF0dGVyOiAodmFsdWU6IHN0cmluZywgZGF0YTogYW55LCBpbnN0YW5jZTogYW55KSA9PiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAvKiog5pi+56S65paH5pys5a2X5q616ZuG5ZCI77yM5LulIOiLseaWhyDpgJflj7fpmpTlvIAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGaWVsZHMgPSAnJztcclxuICAgIEBJbnB1dCgpIGRpc3BsYXlUZXh0U2VwYXJhdG9yID0gJ18nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5biu5Yqp5YWD5pWw5o2uSUTvvIzkuI3kuLrnqbrml7bosIPnlKjmjIflrprnmoRVUklcclxuICAgICAqIC9hcGkvcnVudGltZS9iY2MvdjEuMC9oZWxwL2RhdGEve2hlbHBJZH1cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaGVscElkID0gJyc7XHJcbiAgICAvKiog5paH5pys5a+56b2Q5pa55byP77ybIGxlZnQgfCBjZW50ZXIgfCByaWdodDsg6buY6K6kIGxlZnQgKi9cclxuICAgIEBJbnB1dCgpIHRleHRBbGlnbiA9ICdsZWZ0JztcclxuXHJcbiAgICAvKiog6byg5qCH5ruR6L+H6L6T5YWl5qGG5pe25pi+56S66L6T5YWl5qGG5YaF55qE5paH5pys5L+h5oGvICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVUaXRsZSA9IHRydWU7XHJcbiAgICBASW5wdXQoKSB1c2VFeHRlbmRJbmZvID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBleHRJbmZvRmllbGRzID0gJyc7XHJcbiAgICBASW5wdXQoKSBleHRJbmZvRm9ybWF0dGVyOiBFeHRJbmZvRm9ybWF0dGVyO1xyXG4gICAgQElucHV0KCkgZXh0ZW5kSW5mbyA9ICcnO1xyXG4gICAgLyoqIElERSDorr7orqHlmajoh6rlrprkuYnmoLzlvI/ljJYgMjEwMyAqL1xyXG4gICAgQElucHV0KCkgY3VzdG9tRm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuICAgIEBJbnB1dCgpIGN1c3RvbU5hdkZvcm1hdHRlcjogQ3VzdG9tRGF0YUZvcm1hdHRlciA9IG51bGw7XHJcblxyXG4gICAgLyoqIOiHquWumuS5ieehruWumuS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgb2tIYW5kbGVyID0gbnVsbDtcclxuICAgIC8qKiDoh6rlrprkuYnlj5bmtojkuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGNhbmNlbEhhbmRsZXIgPSBudWxsO1xyXG5cclxuICAgIEBJbnB1dCgpIHRhZ2JveEhlaWdodCA9ICdhdXRvJztcclxuICAgIEBJbnB1dCgpIG1heFRhZ2JveEhlaWdodDtcclxuXHJcbiAgICAvKiog5ZCv55So6I635Y+W5omA5pyJ5a2Q57qn5pWw5o2u55qE5Yqf6IO9ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVHZXRBbGxDaGlsZE5vZGVzID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzaG9ydGN1dEtleSA9IHtcclxuICAgICAgICAvKiog5omT5byA5biu5Yqp56qX5Y+jICovXHJcbiAgICAgICAgb3BlbjogJ0Fycm93UmlnaHQnLFxyXG4gICAgICAgIC8qKiDnoa7orqTpgInmi6nmlbDmja4gKi9cclxuICAgICAgICBjb25maXJtOiAnRW50ZXInLFxyXG4gICAgICAgIC8qKiDmkJzntKLmoYbnhKbngrkgKi9cclxuICAgICAgICBzZWFyY2hGb2N1czogJ0YzJyxcclxuICAgICAgICAvKiog6YCJ5Lit5LiK5LiA5p2hICovXHJcbiAgICAgICAgbW92ZVVwOiAnQXJyb3dVcCcsXHJcbiAgICAgICAgLyoqIOmAieS4reS4i+S4gOadoSAqL1xyXG4gICAgICAgIG1vdmVEb3duOiAnQXJyb3dEb3duJyxcclxuICAgICAgICAvKiog5bGV5byA6IqC54K5ICovXHJcbiAgICAgICAgZXhwYW5kOiAnQXJyb3dSaWdodCcsXHJcbiAgICAgICAgLyoqIOaKmOWPoOiKgueCuSAqL1xyXG4gICAgICAgIGNvbGxhcHNlOiAnQXJyb3dMZWZ0JyxcclxuICAgICAgICAvKiog5LiL5LiA6aG1ICovXHJcbiAgICAgICAgbmV4dFBhZ2VyOiAnUGFnZURvd24nLFxyXG4gICAgICAgIC8qKiDkuIrkuIDpobUgKi9cclxuICAgICAgICBwcmV2UGFnZXI6ICdQYWdlVXAnXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiDmlbDmja7pgInmi6nlkI7vvIzlgLzmmKDlsITliY3op6blj5FcclxuICAgICAqIOi/lOWbniBPYnNlcnZhYmxlXHJcbiAgICAgKiAgICAgIGNhblNlbGVjdDogPGJvb2xlYW4+ICDmmK/lkKblhYHorrjpgInmi6lcclxuICAgICAqICAgICAgbWVzc2FnZTogPHN0cmluZz4g5LiN5YWB6K646YCJ5oup5pe255qE5o+Q56S65L+h5oGvXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNlbGVjdERhdGE6IChwOiB7IGluc3RhbmNlOiBhbnk7IGRhdGE6IGFueSB9KSA9PiBPYnNlcnZhYmxlPHsgY2FuU2VsZWN0OiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcgfSB8IGJvb2xlYW4+O1xyXG5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3RlZERhdGEgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8g5biu5Yqp5paH5pys5qGG5Lit5YC85Y+Y5YyW5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGxvYWRTdWNjZXNzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBwYWdlckNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGV4cGFuZFRyZWVOb2RlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHRleHRDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBjaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjx7IGRhdGE6IGFueSwgaXNDaGVjazogYm9vbGVhbiB9PigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSB0YWdSZW1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDlhoXlrrnkuK3nlZnnmb3ovrnot50gKi9cclxuICAgIGNvbnRhaW5lck1hcmdpbiA9IHsgdG9wOiAwLCBib3R0b206IDUsIGxlZnQ6IDEwLCByaWdodDogMTAgfTtcclxuXHJcbiAgICBjb250YWluZXJTdHlsZSA9IHtcclxuICAgICAgICBtYXJnaW5MZWZ0OiB0aGlzLmNvbnRhaW5lck1hcmdpbi5sZWZ0ICsgJ3B4JyxcclxuICAgICAgICBtYXJnaW5SaWdodDogdGhpcy5jb250YWluZXJNYXJnaW4ucmlnaHQgKyAncHgnLFxyXG4gICAgICAgIG1hcmdpblRvcDogdGhpcy5jb250YWluZXJNYXJnaW4udG9wICsgJ3B4JyxcclxuICAgICAgICBtYXJnaW5Cb3R0b206IHRoaXMuY29udGFpbmVyTWFyZ2luLmJvdHRvbSArICdweCdcclxuICAgIH07XHJcblxyXG4gICAgX2dyaWRPcHRpb25zOiBMb29rdXBHcmlkT3B0aW9ucyA9IGxvb2t1cEdyaWREZWZhdWx0cztcclxuXHJcbiAgICBnZXQgZ3JpZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgdGhpcy5jb2x1bW5zICYmIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwICYmICF0aGlzLmNvbHVtbnMuZmluZChpdGVtID0+IGl0ZW0uZmllbGQgPT09IEZBVk9SSVRFX0ZJRUxEX05BTUUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBGQVZPUklURV9GSUVMRF9OQU1FLCB0aXRsZTogJycsIHdpZHRoOiA0MCwgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiB0aGlzLmZhdkhlbHBlci5mYXZvcml0ZUNvbHVtbkZvcm1hdHRlclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZ3JpZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuX2dyaWRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgIHNpbmdsZVNlbGVjdDogdGhpcy5zaW5nbGVTZWxlY3QsXHJcbiAgICAgICAgICAgIGlkRmllbGQ6IHRoaXMuaWRGaWVsZCxcclxuICAgICAgICAgICAgdXJpOiB0aGlzLnVyaSxcclxuICAgICAgICAgICAgc2hvd0ZpbHRlckJhcjogdGhpcy5zaG93RmlsdGVyQmFyLFxyXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiB0aGlzLnBhZ2luYXRpb24sXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgdG90YWw6IHRoaXMudG90YWwsXHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbnMsXHJcbiAgICAgICAgICAgIHJlc2l6YWJsZUNvbHVtbnM6IHRydWUsXHJcbiAgICAgICAgICAgIGZpeGVkSGVhZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICBob3ZlcjogdHJ1ZSxcclxuICAgICAgICAgICAgdHJlZUluZm86IHRoaXMudHJlZUluZm9cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGdyaWRPcHRpb25zKG9wdHMpIHtcclxuICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX2dyaWRPcHRpb25zLCBvcHRzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ29sdW1ucyA9IHRoaXMubXVsdGlTZWxNZ3IuaW5pdFNlbGVjdGVkQ29sdW1ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NvbnRlbnRDb250YWluZXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgY29udGVudENvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Zhdm9yaXRlc0NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSBmYXZvcml0ZXNDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdsZWZ0Q29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGxlZnRDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdjZW50ZXJDb250YWluZXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgY2VudGVyQ29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnbXVsdGlTZWxlY3REVCcpIG11bHRpU2VsZWN0RFQ6IERhdGFUYWJsZUNvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0Z3JvdXAnKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZCgnbGVmdFBhbmVsJykgbGVmdFBhbmVsOiBMYXlvdXRQYW5lbENvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhZ2JveCcpIHRhZ2JveDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdva2J0bicpIG9rQnV0dG9uOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcbiAgICBsZWZ0Q29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8TG9va3VwTGVmdENvbXBvbmVudD47XHJcbiAgICBmYXZvcml0ZXNDb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxhbnk+O1xyXG5cclxuICAgIHB1YmxpYyBodHRwOiBJTG9va3VwSHR0cFNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbWVzc2FnZXJTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlO1xyXG4gICAgbG9hZGluZzogTG9hZGluZ0NvbXBvbmVudDtcclxuICAgIC8vIGRhdGFGaWVsZE1hcHM6IGFueTtcclxuICAgIG5hdmlnYXRpb25PcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucztcclxuXHJcbiAgICAvLyDlr7zoiKrluK7liqnlt6bliJnlrr3luqZcclxuICAgIGxlZnRQYW5lbFdpZHRoID0gMzIwO1xyXG4gICAgLy8g5a+86Iiq5biu5Yqp56qX5Y+j5pyA5bCP5a695bqmXHJcbiAgICBuYXZMb29rdXBEaWFsb2dNaW5XaWR0aCA9IDk2MDtcclxuXHJcbiAgICBuYXZpZ2F0aW9uRmlsdGVyOiBOYXZpZ2F0aW9uRmlsdGVyID0gbnVsbDtcclxuXHJcbiAgICBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgZGlhbG9nT3BlbmVkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBkaWFsb2dDbG9zZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBpc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgIGlzVGFiQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpc3BsYXlJbmZvOiBEaXNwbGF5SW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIGRpc3BsYXlJbmZvRGVmYXVsdCk7XHJcblxyXG4gICAgdGFiQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIC8vIOaaguWtmOihjOeCueWHu+aVsOaNriAg55So5LqO5pS26JePXHJcbiAgICBwZXJzb25hbENvbmY6IFBlcnNvbmFsQ29uZmlnID0ge307XHJcbiAgICBmYXZvcml0ZUNvbHVtbnM6IGFueVtdID0gW107XHJcbiAgICAvKiog5Li05pe25p+l6K+i5Y+C5pWwICovXHJcbiAgICBfc2VhcmNoU3RhdGUgPSBudWxsO1xyXG4gICAgYWxsRGF0YTogYW55ID0gW107XHJcbiAgICBnZXQgc2VsZWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmdldFNlbGVjdGlvbnMoKTtcclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlUGVyc2lvbmFsQ29uZigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51c2VGYXZvcml0ZSB8fCB0aGlzLnVzZVRpcCB8fCB0aGlzLmlzUmVjb3JkU2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGlzcGxheVRleHRMaXN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlUZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlUZXh0LnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBwZXJzb25hbENvbmZpZ1NlcnZpY2U6IFBlcnNvbmFsQ29uZmlnU2VydmljZTtcclxuICAgIHB1YmxpYyB1dGlsU2VydmljZTogVXRpbFNlcnZpY2U7XHJcbiAgICBwdWJsaWMgdHJlZU5vZGVIZWxwZXI6IFRyZWVOb2RlSGVscGVyO1xyXG4gICAgcHVibGljIGxvY2FsU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIHB1YmxpYyBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlO1xyXG4gICAgYWxsQ29sdW1uc1RpdGxlID0gJ+aJgOacieWIlyc7XHJcbiAgICBtdXN0V3JpdGVTb21ldGhpbmcgPSAn6K+36L6T5YWl5YWz6ZSu5a2X5ZCO5p+l6K+i44CCJztcclxuICAgIG11c3RDaG9vc0FkYXRhcm93ID0gJ+ivt+mAieaLqeS4gOadoeiusOW9le+8gSc7XHJcbiAgICBhZGRGYXZvcml0ZVN1Y2Nlc3MgPSAn5pS26JeP5oiQ5Yqf44CCJztcclxuICAgIGRlbEZhdm9yaXRlU3VjY2VzcyA9ICfnp7vpmaTmlLbol4/miJDlip/jgIInO1xyXG5cclxuICAgIHNlYXJjaGluZyA9IGZhbHNlO1xyXG4gICAgLyoqIOS4tOaXtuWtmOWCqOafpeivoue7k+aenOmbhiAqL1xyXG4gICAgX3NlYXJjaFJlc3VsdCA9IG51bGw7XHJcblxyXG4gICAgbG9va3VwaW5pdGlhbGl6YXRpb25TdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuXHJcbiAgICAvKiog5aSa6YCJ5pe277yM6YCJ5Lit55qE5pWw5o2uICovXHJcbiAgICBjdXJyZW50U2VsZWN0ZWRJdGVtczogT2JzZXJ2YWJsZTxhbnk+ID0gb2YoW10pO1xyXG4gICAgLyoqIOW3sumAieaVsOaNruWIl+S/oeaBryAqL1xyXG4gICAgc2VsZWN0ZWRDb2x1bW5zID0gW107XHJcbiAgICBhY3RpdmVUYWI6IHN0cmluZyB8ICdkYXRhbGlzdCcgfCAnZmF2b3JpdGUnIHwgJ3NlbGVjdGVkJyA9ICdkYXRhbGlzdCc7XHJcblxyXG4gICAgZmF2SGVscGVyOiBGYXZvcml0ZUhlbHBlciA9IG51bGw7XHJcbiAgICB0dEV2ZW50TWdyOiBUcmVlVGFibGVFdmVudE1hbmFnZXIgPSBudWxsO1xyXG4gICAgbXVsdGlTZWxNZ3I6IE11bHRpU2VsZWN0aW9uTWFuYWdlciA9IG51bGw7XHJcbiAgICBodHRwTWdyOiBMb29rdXBIdHRwTWFuYWdlciA9IG51bGw7XHJcbiAgICBsb29rdXBDbXBNZ3I6IExvb2t1cENvbXBvbmVudE1hbmFnZXIgPSBudWxsO1xyXG4gICAgZGlhbG9nTWdyOiBMb29rdXBEaWFsb2dNYW5hZ2VyID0gbnVsbDtcclxuICAgIHNlbGVjdGlvbk1ncjogU2VsZWN0aW9uTWFuYWdlciA9IG51bGw7XHJcbiAgICBkdEV2ZW50TWdyOiBEYXRhVGFibGVFdmVudE1hbmFnZXIgPSBudWxsO1xyXG5cclxuICAgIGxvb2t1cFNlbGVjdGlvblNlcjogTG9va3VwU2VsZWN0aW9uU2VydmljZSA9IG51bGw7XHJcblxyXG4gICAgY29udHJvbElkID0gJyc7XHJcbiAgICBzYXZpbmdGYW9yaXRlRGF0YSA9IGZhbHNlO1xyXG4gICAgaXNSZWFkeSA9IGZhbHNlO1xyXG4gICAgc2hvd1RhZ2JveENsZWFyQnV0dG9uID0gZmFsc2U7XHJcbiAgICBoYXNFcnJvciA9IGZhbHNlO1xyXG5cclxuICAgIGlzR2V0QWxsQ2hpZGxOb2RlcyA9IGZhbHNlO1xyXG4gICAgZXZlbnRNYW5hZ2VyOiBFdmVudE1hbmFnZXI7XHJcbiAgICAvKiog6YCJ5Lit6K6w5b2VSUTvvIzoh6rlrprkuYnluK7liqnlj5bmlbDml7bkvb/nlKggKi9cclxuICAgIHNlbGVjdGVkSWRzID0gW107XHJcbiAgICBwcml2YXRlIGZhcnJpc0luc3RhbmNlczogRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3IsIHB1YmxpYyBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsXHJcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0TWFwcGluZzogTG9va3VwRGVmYXVsdE1hcHBpbmcsIHB1YmxpYyBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHVibGljIHNob3J0Y3V0czogU2hvcnRjdXRzU2VydmljZSwgcHVibGljIGxvb2t1cFV0aWxzOiBMb29rdXBVdGlscyxcclxuICAgICAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSwgcHJpdmF0ZSByZW5kZXIyOiBSZW5kZXJlcjJcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKGluamVjdG9yLCBlbCwgY2hhbmdlRGV0ZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZEl0ZW1zID0gdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuc2VsZWN0ZWQkO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gdGhpcy5pbmplY3Rvci5nZXQoRXZlbnRNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcyA9IHRoaXMuaW5qZWN0b3IuZ2V0KEZhcnJpc0NvbXBvbmVudEluc3RhbmNlU2VydmljZSwgbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICB0aGlzLmNoZWNrR3JpZE9wdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICAvKiog5Lyg6YCS5LiK5LiL5paHICovXHJcbiAgICAgICAgaWYgKHRoaXMuaHR0cCkge1xyXG4gICAgICAgICAgICB0aGlzLmh0dHAuY29udGV4dCA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWxsQ29sdW1uc1RpdGxlID0gdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cC5hbGxDb2x1bW5zJyk7XHJcbiAgICAgICAgdGhpcy5tdXN0V3JpdGVTb21ldGhpbmcgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwLm11c3RXcml0ZVNvbWV0aGluZycpO1xyXG4gICAgICAgIHRoaXMubXVzdENob29zQWRhdGFyb3cgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwLm11c3RDaG9vc0FkYXRhcm93Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRGYXZvcml0ZVN1Y2Nlc3MgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwLmZhdm9yaXRlSW5mby5hZGRGYXYnKSB8fCB0aGlzLmFkZEZhdm9yaXRlU3VjY2VzcztcclxuICAgICAgICB0aGlzLmRlbEZhdm9yaXRlU3VjY2VzcyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXAuZmF2b3JpdGVJbmZvLmNhbmNlbEZhdicpIHx8IHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzO1xyXG5cclxuICAgICAgICB0aGlzLmRpYWxvZ01nci5vbkRpYWxvZ0NyZWF0ZWQoKTtcclxuICAgICAgICAvLyDliJ3lp4vljJbkuKrmgKfljJbphY3nva5cclxuICAgICAgICBpZiAodGhpcy51c2VQZXJzaW9uYWxDb25mKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLmluaXRQZXJzb25hbEluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUV4dGVuZEluZm8pIHtcclxuICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dGVuZEluZm8oanNvbkRhdGEsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgaWYgKG4pIHtcclxuICAgICAgICAgICAgICAgIG4udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIG4gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1ncikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7IH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgb25UZXh0Q2hhbmdlZC5iaW5kKHRoaXMpKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5zaG9ydGN1dHMuYWRkKHtcclxuICAgICAgICAgICAgLy8gICAgIGtleTogJ0YyJyxcclxuICAgICAgICAgICAgLy8gICAgIHRhcmdldDogdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgLy8gICAgIGNvbW1hbmQ6ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnNob3dEaWFsb2coKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5saXN0ZW4odGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCwgJ2tleWRvd24uRjInLCB0aGlzLnNob3dEaWFsb2cuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck1vdXNlRXZlbnRGb3JUYWdWaWV3KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy50YWdib3hIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gdGhpcy50YWdib3gubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubXVsdGktbW9yZScpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRiaCA9IHRoaXMudGFnYm94SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRiaCAhPT0gJ2F1dG8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGJoICs9ICdweCc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heFRhZ2JveEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoZWwsICdtYXhIZWlnaHQnLCBgJHt0aGlzLm1heFRhZ2JveEhlaWdodH1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoZWwsICdoZWlnaHQnLCB0YmgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5lbCAmJiB0aGlzLmZhcnJpc0luc3RhbmNlcykge1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcy5hZGQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVJbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmh0dHAgPSB0aGlzLmluamVjdG9yLmdldChTZXJ2ZXJTaWRlVG9rZW4sIG51bGwpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9hZGluZ1NlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubm90aWZ5U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5vdGlmeVNlcnZpY2UsIG51bGwpO1xyXG5cclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KFBlcnNvbmFsQ29uZmlnU2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyID0gbmV3IExvb2t1cFNlbGVjdGlvblNlcnZpY2UodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMudXRpbFNlcnZpY2UgPSBuZXcgVXRpbFNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlSGVscGVyID0gbmV3IFRyZWVOb2RlSGVscGVyKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmZhdkhlbHBlciA9IG5ldyBGYXZvcml0ZUhlbHBlcih0aGlzKTtcclxuICAgICAgICB0aGlzLnR0RXZlbnRNZ3IgPSBuZXcgVHJlZVRhYmxlRXZlbnRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubXVsdGlTZWxNZ3IgPSBuZXcgTXVsdGlTZWxlY3Rpb25NYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaHR0cE1nciA9IG5ldyBMb29rdXBIdHRwTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmxvb2t1cENtcE1nciA9IG5ldyBMb29rdXBDb21wb25lbnRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nTWdyID0gbmV3IExvb2t1cERpYWxvZ01hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3IgPSBuZXcgU2VsZWN0aW9uTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmR0RXZlbnRNZ3IgPSBuZXcgRGF0YVRhYmxlRXZlbnRNYW5hZ2VyKHRoaXMpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzaG93RGlhbG9nKCk6IGFueSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5pbml0RGlzcGxheVZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5kaWN0UGlja2luZ1N1YnNjcmlwdGlvbiA9IHRoaXMuZGljdFBpY2tpbmcoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgIH0pLnN1YnNjcmliZSgocHI6IFBpY2tpbmdSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2dNZ3IuY2FuT3BlbkRpYWxvZyhwcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm5Li65Y+M5YiX6KGo5biu5YqpICovXHJcbiAgICBpc0RvdWJsbGVMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0IHx8IHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICAvKiog5Yik5pat5piv5ZCm5pi+56S65Li65qCR5biu5YqpICovXHJcbiAgICBpc1RyZWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheVR5cGUudG9VcHBlckNhc2UoKSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLlRyZWVMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXplZChlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNtcChlLnNpemUpO1xyXG4gICAgICAgIHRoaXMucmVzaXplZC5lbWl0KGUuc2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemluZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzaXppbmcuZW1pdChwb3Muc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAocG9zLnNpemUpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiB0aGlzLmxlZnRDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0Q29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZSh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5sZWZ0UGFuZWwud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1heERpYWxvZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ21wKHBvcy5zaXplKTtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0UGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0Q29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZSh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5sZWZ0UGFuZWwud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kaWFsb2dNYXhlZC5lbWl0KHBvcy5zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVDbXAoc2l6ZT86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5jb21wb25lbnRSZWYgfHwgIXRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2l6ZSkge1xyXG4gICAgICAgICAgICBzaXplID0gdGhpcy5kaWFsb2cuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgX3NpemUgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBzaXplLndpZHRoIC0gdGhpcy5jb250YWluZXJNYXJnaW4ubGVmdCAtIHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRTaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25mLnNpemUgPSB0aGlzLmRpYWxvZy5zaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS51cGRhdGVQZXJzb25hbENvbmZpZyh7IHNpemU6IHRoaXMuZGlhbG9nLnNpemUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSkge1xyXG4gICAgICAgICAgICBfc2l6ZS53aWR0aCA9IHNpemUud2lkdGggLSB0aGlzLmxlZnRQYW5lbC53aWR0aCAtIDI3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrR3JpZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRPcHRpb25zLmlkRmllbGQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCfmnKrorr7nva7kuLvplK7lrZfmrrUgaWRGaWVsZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVNlbGVjdERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3REYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRUeXBlKCk6IFR5cGU8YW55PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPSAnTElTVCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5VHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5MaXN0OlxyXG4gICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0OlxyXG4gICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0xvYWRpbmcobXNnID0gJycpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWFsb2cgJiYgdGhpcy5kaWFsb2cubW9kYWxDb250ZW50ICYmICF0aGlzLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5kaWFsb2cubW9kYWxDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IDIwMCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIG9wdHNbJ21lc3NhZ2UnXSA9IG1zZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KG9wdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZUxvYWRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWFyY2hDb2x1bW5zKHJlc2RhdGE6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGNvbHMgPSByZXNkYXRhLmNvbHVtbnMgfHwgdGhpcy5jb2x1bW5zO1xyXG4gICAgICAgIGlmIChyZXNkYXRhLnNlYXJjaEZpZWxkcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzZGF0YS5zZWFyY2hGaWVsZHMubWFwKHNmID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2xzLmZpbmQoY29sID0+IGNvbC5maWVsZC50b0xvd2VyQ2FzZSgpID09PSBzZi52YWx1ZS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YubGFiZWwgPSBjLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNmO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbHMuZmlsdGVyKGMgPT4gYy5zZWFyY2hGaWVsZCkubWFwKGNvbCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjb2wudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbC5maWVsZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBpbml0T3B0aW9ucyhyZXNEYXRhOiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgbGV0IG9ic2VyID0gb2YodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ncmlkT3B0aW9ucy5zZWFyY2hGaWVsZHMgPSB0aGlzLmdldFNlYXJjaENvbHVtbnMocmVzRGF0YSk7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHJlc0RhdGEuY29sdW1ucyAmJiByZXNEYXRhLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSByZXNEYXRhLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9va3VwVGl0bGVUZXh0KHJlc0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHRoaXMuZGlhbG9nV2lkdGggPCB0aGlzLm5hdkxvb2t1cERpYWxvZ01pbldpZHRoICYmICF0aGlzLmlzUmVjb3JkU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9IHRoaXMubmF2TG9va3VwRGlhbG9nTWluV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5yZVNpemUoeyB3aWR0aDogdGhpcy5kaWFsb2dXaWR0aCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbURpc3BsYXlUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUeXBlID0gcmVzRGF0YS5kaXNwbGF5VHlwZSB8fCB0aGlzLmRpc3BsYXlUeXBlIHx8ICdMSVNUJztcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlQ29tcG9uZW50V2l0aFNlcnZlckRhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiByZXNEYXRhLm5hdmlnYXRpb24gJiYgIXRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyA9IHJlc0RhdGEubmF2aWdhdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuaG92ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5zZWFyY2hGaWVsZHMgPSB0aGlzLmdldFNlYXJjaENvbHVtbnModGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY29sdW1ucyBmb3JtYXR0ZXJcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcltjb2wuZmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wuZm9ybWF0dGVyID0gdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXJbY29sLmZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zWydyb3dTdHlsZXInXSA9IHRoaXMuY3VzdG9tTmF2Rm9ybWF0dGVyLnJvd1N0eWxlcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zWydjZWxsU3R5bGVyJ10gPSB0aGlzLmN1c3RvbU5hdkZvcm1hdHRlci5jZWxsU3R5bGVyO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIDIwMjEwOTI2IOagkeWvvOiIquW4ruWKqeS4rSDlt6bkvqfmoJHmlK/mjIHliIblsYLliqDovb1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgX25hdl90cmVlaW5mb19sb2FkdHlwZSA9IHRoaXMubmF2aWdhdGlvbk9wdGlvbnMudHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRUcmVlRGF0YVR5cGUgIT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmF2X3RyZWVpbmZvX2xvYWR0eXBlID0gdGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSAnbG9hZGFsbCcgPyAnYWxsJyA6ICdhc3luYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMudHJlZUluZm8ubG9hZERhdGFUeXBlID0gX25hdl90cmVlaW5mb19sb2FkdHlwZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvYnNlciA9IHRoaXMubG9va3VwQ21wTWdyLmNyZWF0ZUxlZnRDb21wb25lbnQodGhpcy5uYXZpZ2F0aW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVDb250ZW50KHRoaXMuZ3JpZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVGYXZvcml0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNUZXh0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNlYXJjaERhdGEudmFsdWUgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGNvbHVtbnMgZm9ybWF0dGVyXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXJbY29sLmZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbC5mb3JtYXR0ZXIgPSB0aGlzLmN1c3RvbUZvcm1hdHRlcltjb2wuZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlci5yb3dTdHlsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnJvd1N0eWxlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyLnJvd1N0eWxlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyLmNlbGxTdHlsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNlbGxTdHlsZXIgPSB0aGlzLmN1c3RvbUZvcm1hdHRlci5jZWxsU3R5bGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICByZXR1cm4gb2JzZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7luK7liqnnqpflj6PmoIfpophcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRMb29rdXBUaXRsZVRleHQocmVzRGF0YTogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXNEYXRhLmRpc3BsYXlJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUluZm8gPSByZXNEYXRhLmRpc3BsYXlJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c6Ieq5a6a5LmJ5qCH6aKY77yM5bCG5Lul5q2k5qCH6aKY5Li65YeG44CC5ZCm5YiZ5Yqg6L295pyN5Yqh5Zmo56uv6L+U5Zue55qE5pWw5o2uXHJcbiAgICAgICAgaWYgKHRoaXMudGl0bGUgJiYgdGhpcy50aXRsZSAhPT0gJ+atpOWkhOaYvuekuuW4ruWKqeagh+mimCcpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5SW5mbyAmJiByZXNEYXRhLnRpdGxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNwbGF5SW5mby50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHJlc0RhdGEudGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSAmJiB0aGlzLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9IHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlICE9PSAnYWxsJyAmJiB0aGlzLnRyZWVJbmZvLmxheWVyVHlwZSA9PT0gJ3BhdGhjb2RlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUdldEFsbENoaWxkTm9kZXMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdERhdGEoKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IChkYXRhOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyDmnI3liqHlmajnq6/lj5HnlJ/plJnor6/vvIzov5Tlm55OVUxMIOaXtu+8jOebtOaOpeWFs+mXreeql+WPo1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRPcHRpb25zKGRhdGEpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENvbHVtbnMgPSB0aGlzLm11bHRpU2VsTWdyLmluaXRTZWxlY3RlZENvbHVtbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlQ29sdW1ucyA9IHRoaXMuZmF2SGVscGVyLmdldEZhdm9yaXRlQ29sdW1ucygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VQZXJzaW9uYWxDb25mKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2UuZ2V0UGVyc29uYWxEYXRhKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnNhdmVQZXJzb25hbENvbmZpZyh0aGlzLnBlcnNvbmFsQ29uZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5sb2FkU2VsZWN0aW9ucyhkYXRhLnNlbGVjdGVkSXRlbXMgfHwgW10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWvvOiIquW4ruWKqeaXtu+8jOiuvue9ruW3puS+p+mAieS4reaVsOaNruaXtu+8jOS4jeWKoOi9veS4u+aVsOaNruWIl+ihqOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uYXZTZWxlY3RlZElkcyB8fCB0aGlzLnNlbGVjdEZpcnN0SW5OYXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGFXaGVuT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAnZGF0YWxpc3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dC5sb2FkRGF0YVR5cGUgPT09ICdhbGwnICYmIHR0LnNlYXJjaERhdGEudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pdGVtcyAmJiB0aGlzLml0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dC50b2dnbGVFeHBhbmQodGhpcy5pdGVtc1swXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dHZXRBbGxDaGlsZHJlbkNoZWNrYm94KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUmVzdWx0ID0gbnVsbDsgLy8g5riF56m65Li05pe25p+l6K+iIOe7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5pc1JlYWR5JC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rdXBpbml0aWFsaXphdGlvblN1YmplY3QubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiAoZXJyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaXNSZWFkeSQubmV4dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXN1bHQgPSBudWxsOyAvLyDmuIXnqbrkuLTml7bmn6Xor6Ig57uT5p6cXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVyciA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvci5NZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoJ+W6lOeUqOacjeWKoeWZqOmUmeivryzor7fogZTns7vns7vnu5/nrqHnkIblkZjvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHA6IGFueSA9IHtcclxuICAgICAgICAgICAgcGFnZUluZm86IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplIHx8IDIwLFxyXG4gICAgICAgICAgICAgICAgcGFnZUluZGV4OiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHQ6IExPQURfREFUQV9UWVBFID0gJ2FsbCc7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUZXh0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHAgPSB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogJyonLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmRpc3BsYXlUZXh0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNUYWJDaGFuZ2VkICYmIHRoaXMuZW5hYmxlVG9TZWxlY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFscyA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldFNlbGVjdGVkSWRzKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxzICYmIHZhbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBwWydzZWxlY3RlZEluZm8nXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkczogdmFsc1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzWydzZWxlY3RlZElkcyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcFsnc2VsZWN0ZWRJbmZvJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkczogdGhpc1snc2VsZWN0ZWRJZHMnXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5odHRwTWdyLmxvb2t1cFJlcXVlc3QocCwgdCkucGlwZShcclxuICAgICAgICAgICAgbWFwKChyZXN0RGF0YTogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3REYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdERhdGEuc2VsZWN0ZWRJdGVtcyA9IHJlc3REYXRhWydzZWxlY3RlZERhdGEnXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3REYXRhICYmIHR5cGVvZiByZXN0RGF0YSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdERhdGEuc2VsZWN0ZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN0RGF0YTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLnN1YnNjcmliZShvYnNlcnZlcik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0LCByZWJpbmRFdmVudCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09ICdkYXRhbGlzdCcpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlICYmICF0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci51cGRhdGVGYXZvcml0ZXNTdGF0dXMocmVzRGF0YS5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTGlzdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhVGFibGVEYXRhKHJlc0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWJpbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR0RXZlbnRNZ3IuYmluZERhdGFUYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuVHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZVRhYmxlRGF0YShyZXNEYXRhLCByZWJpbmRFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAnZmF2b3JpdGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZhdkRhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDpgInkuK3mlbDmja5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRGYXZEYXRhKHJlc3VsdDogTG9va3VwR3JpZFJlc3VsdCkge1xyXG4gICAgICAgIC8vIOWKoOi9veaUtuiXj+aVsOaNrlxyXG4gICAgICAgIGlmICh0aGlzLnVzZUZhdm9yaXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUcmVlSW5mbyhyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZU5vZGVzID0gdGhpcy5mYXZIZWxwZXIuaW5pdEZhdm9yaXRlVHJlZURhdGEocmVzdWx0Lml0ZW1zKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVEYXRhID0gdGhpcy50cmVlTm9kZUhlbHBlci5mbGF0VHJlZU5vZGVzKHRyZWVOb2RlcykubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uZGF0YVsnX2FkZHRpb25hbF8nXSA9IG5bJ2FkZHRpb25hbCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmluaXRGYXZvcml0ZUl0ZW1zKHRyZWVEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZi5pbnN0YW5jZS5zY3JvbGxUb1koMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5pbml0RmF2b3JpdGVJdGVtcyhyZXN1bHQuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5sb2FkRmF2b3JpdGVzRGF0YShyZXN1bHQpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGFUYWJsZURhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc0RhdGEuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzRGF0YS50b3RhbCB8fCByZXNEYXRhLml0ZW1zLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzRGF0YS5wYWdlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNEYXRhLnBhZ2VJbmZvLnBhZ2VMaXN0ICYmICghdGhpcy5wYWdlTGlzdCB8fCAhdGhpcy5wYWdlTGlzdC5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUxpc3QgPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb24gPSByZXNEYXRhLnBhZ2VJbmZvLmVuYWJsZVBhZ2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHJlc0RhdGEucGFnZUluZm8ucGFnZVNpemU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkT3B0aW9ucyA9IHJlc0RhdGEgYXMgTG9va3VwR3JpZE9wdGlvbnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVRhYmxlKHRoaXMuZ3JpZE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlRGF0YVRhYmxlKG9wdHM6IGFueSkge1xyXG4gICAgICAgIGlmIChvcHRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkdC5jb2x1bW5zIHx8IGR0LmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkdC5jb2x1bW5zID0gdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkdC5hbGxDb2x1bW5zVGl0bGUgPSB0aGlzLmFsbENvbHVtbnNUaXRsZTtcclxuICAgICAgICAgICAgZHQuc2VhcmNoRmllbGRzID0gb3B0cy5zZWFyY2hGaWVsZHM7XHJcbiAgICAgICAgICAgIGR0LnBhZ2luYXRpb24gPSBvcHRzLnBhZ2luYXRpb247XHJcbiAgICAgICAgICAgIGR0LnBhZ2VMaXN0ID0gdGhpcy5wYWdlTGlzdDtcclxuICAgICAgICAgICAgZHQucmVtb3RlU29ydCA9IHRoaXMucmVtb3RlU29ydDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvYWREYXRhV2hlbk9wZW4pIHtcclxuICAgICAgICAgICAgICAgIGR0LmxvYWREYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogb3B0cy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMuZ3JpZE9wdGlvbnMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0aGlzLmdyaWRPcHRpb25zLnRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZ3JpZE9wdGlvbnMuaXRlbXNcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZHQuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkU3VjY2Vzcy5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0VHJlZUluZm8ocmVzRGF0YSkge1xyXG4gICAgICAgIGlmICghcmVzRGF0YSkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgICAgbGV0IF90cmVlSW5mbyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgY29uc3Qgb25seVNlbGVjdExlYWYgPSByZXNEYXRhLnRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmO1xyXG4gICAgICAgICAgICBsZXQgX29zbDogT05MWV9TRUxFQ1RfTEVBRiA9ICdubyc7XHJcbiAgICAgICAgICAgIGlmIChvbmx5U2VsZWN0TGVhZiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfb3NsID0gb25seVNlbGVjdExlYWYgPyAneWVzJyA6ICdubyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RyZWVJbmZvID0geyAuLi5yZXNEYXRhLnRyZWVJbmZvLCBvbmx5U2VsZWN0TGVhZjogX29zbCB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgY29uc3QgdHJlZUluZm8gPSB0aGlzLmdyaWRPcHRpb25zLnRyZWVJbmZvO1xyXG4gICAgICAgICAgICBpZiAodHJlZUluZm8pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ub25seVNlbGVjdExlYWYgPT09IHVuZGVmaW5lZCB8fCB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID0gJ25vJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9IHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID8gJ3llcycgOiAnbm8nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIDIwMjEwOTAyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPSBfdHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPSB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09ICdsb2FkYWxsJyA/ICdhbGwnIDogJ2FzeW5jJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ub25seVNlbGVjdExlYWYgIT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIF90cmVlSW5mbyA9IE9iamVjdC5hc3NpZ24oX3RyZWVJbmZvLCB0cmVlSW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRyZWVJbmZvID0gX3RyZWVJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZFRyZWVUYWJsZURhdGEocmVzRGF0YT86IExvb2t1cEdyaWRSZXN1bHQsIHJlYmluZEV2ZW50ID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gcmVzRGF0YSA/IHJlc0RhdGEuaXRlbXMgOiB0aGlzLmdyaWRPcHRpb25zLml0ZW1zO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRyZWVJbmZvKHJlc0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdHJlZUluZm8gPSB0aGlzLmdyaWRPcHRpb25zLnRyZWVJbmZvO1xyXG4gICAgICAgICAgICBpZiAoIXRyZWVJbmZvWyd0cmVlRGF0YUlzSW5pdCddKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZUluZm8ubGF5ZXJUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICdwYXRoY29kZScpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5sb29rdXBVdGlscy5tYWtlVHJlZSh0aGlzLml0ZW1zLCB0cmVlSW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmxvb2t1cFV0aWxzLm1ha2VUcmVlV2l0aFBhcmVudElEKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7dHJlZUluZm8uZGF0YUZpZWxkfS4ke3RyZWVJbmZvLnBhcmVudEZpZWxkfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBpbnN0YW5jZW9mIFRyZWVUYWJsZUNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCB0dCA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHJlZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHR0LmxvYWREYXRhVHlwZSA9IHRoaXMudHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTG9hZEFsbFRyZWVEYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR0LmxvYWREYXRhVHlwZSA9PT0gJ2FsbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09ICdsb2FkYWxsJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJpbmRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dEV2ZW50TWdyLmJpbmRUcmVldGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTG9hZEFsbCA9IGlzTG9hZEFsbFRyZWVEYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAvKiog5a6M5pW05qCR6IqC54K55qOA5p+lIEJ5IEx1Y2FzIDIwMjAwMzAyICovXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmNoZWNrTm9kZUNhbkJlU2VsZWN0KHRoaXMuaXRlbXMsIGlzTG9hZEFsbCk7XHJcbiAgICAgICAgICAgIHR0LmtlZXBTZWxlY3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLnVwZGF0ZUZhdm9yaXRlc1N0YXR1cyh0aGlzLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgdHQubG9hZERhdGEodGhpcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHQucmVzaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Zyo5p6E5a6M5pW05qCR5Lit77yM5pyJ6YOo5YiG6IqC54K55Zug5Li65p2h5Lu26KKr6L+H5ruk77yM5Li65pi+56S65a6M5pW05qCR77yMXHJcbiAgICAgKiDov5nkupvoioLngrnlnKjov5DooYzml7bmmK/kuI3lhYHorrjooqvpgInkuK3nmoQsIOi/lOWbnuaWsOeahOiKgueCueaVsOe7hFxyXG4gICAgICogQnkgTHVjYXMgMjAyMDAzMDJcclxuICAgICAqL1xyXG4gICAgY2hlY2tOb2RlQ2FuQmVTZWxlY3Qobm9kZXMsIGlzQWxsVHJlZURhdGEgPSBmYWxzZSk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmhhc093blByb3BlcnR5KCdhZGR0aW9uYWwnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9ICFub2RlWydhZGR0aW9uYWwnXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tOb2RlQ2FuQmVTZWxlY3Qobm9kZS5jaGlsZHJlbiwgaXNBbGxUcmVlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FsbFRyZWVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVhZiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlcyh2YWwpIHtcclxuICAgICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xlYXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodmFsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCh2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZC5lbWl0KHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dENoYW5nZWQuZW1pdCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9ICcnO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9ICcnO1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSgnJyk7XHJcbiAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwcGluZ0ZuKG51bGwsIHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1hcHBpbmcubG9va3VwRmllbGRNYXAobnVsbCwgdGhpcy5tYXBGaWVsZHMsIGJpbmRpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm11bHRpU2VsTWdyLmNsZWFyKCk7XHJcbiAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhci5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyVmFsdWUoZW1pdCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLm9uQ2xlYXIoZW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0SXRlbShyb3dEYXRhPzogYW55KSB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICBpZiAocm93RGF0YSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFJvdyA9IHJvd0RhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSB0aGlzLnNlbGVjdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RlZFJvdykgJiYgIXNlbGVjdGVkUm93Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5a6a5LmJ6Ieq5a6a5LmJ5aSE55CG56Gu5a6a5LqL5Lu277yM5YiZ55Sx6Ieq5a6a5LmJ5LqL5Lu25aSE55CG5ZCO6Z2i55qE6YC76L6RXHJcbiAgICAgICAgaWYgKHRoaXMub2tIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tIYW5kbGVyKHsgZGF0YTogc2VsZWN0ZWRSb3csIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5iZWZvcmVTZWxlY3REYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBic2RSZXN1bHQgPSB0aGlzLmJlZm9yZVNlbGVjdERhdGEoeyBpbnN0YW5jZTogdGhpcywgZGF0YTogc2VsZWN0ZWRSb3cgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnNkUmVzdWx0ICYmIGJzZFJlc3VsdC5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBic2RSZXN1bHQuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVTZWxlY3REYXRhQ2FsbEJhY2soZSwgc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5biu5Yqp5pWw5o2u6YCJ5Lit5YmN5LqL5Lu25pyq6L+U5Zue5YC85oiW6L+U5Zue57G75Z6L6Z2eT2JzZXJ2YWJsZSwg6K+35qOA5p+lJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVTZWxlY3REYXRhQ2FsbEJhY2sodHJ1ZSwgc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFBhcmVudFBhdGhDb2RlKHJvd3MpIHtcclxuICAgICAgICBjb25zdCBtYXhCeSA9IChhcnIsIGZuKSA9PiBNYXRoLm1heCguLi5hcnIubWFwKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyA/IGZuIDogdmFsID0+IHZhbFtmbl0pKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBkYXRhRmllbGQsIHBhdGhGaWVsZCwgbGF5ZXJGaWVsZCB9ID0gdGhpcy50cmVlSW5mbztcclxuICAgICAgICBjb25zdCBtYXhMYXllciA9IG1heEJ5KHJvd3MsIHggPT4geFtkYXRhRmllbGRdW2xheWVyRmllbGRdKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWF4TGF5ZXI7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBfcm93cyA9IHJvd3MuZmlsdGVyKG4gPT4gbltkYXRhRmllbGRdW2xheWVyRmllbGRdID09PSBpKTtcclxuICAgICAgICAgICAgaWYgKF9yb3dzICYmIF9yb3dzLmxlbmd0aCAmJiBfcm93cy5sZW5ndGggPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgX3Jvd3MuZm9yRWFjaChyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaENvZGUgPSByW2RhdGFGaWVsZF1bcGF0aEZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfcm93czIgPSByb3dzLmZpbHRlcihuID0+IG5bZGF0YUZpZWxkXVtwYXRoRmllbGRdICE9PSBwYXRjaENvZGUgJiYgbltkYXRhRmllbGRdW3BhdGhGaWVsZF0uaW5kZXhPZihwYXRjaENvZGUpID09PSAwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3Jvd3MyICYmIF9yb3dzMi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuZmlsdGVyKG4gPT4gbltkYXRhRmllbGRdW3BhdGhGaWVsZF0gIT09IHBhdGNoQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByb3dzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2JlZm9yZVNlbGVjdERhdGFDYWxsQmFjayhlLCBzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGxldCBjYW5TZWxlY3QgPSBlO1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0gJyc7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgY2FuU2VsZWN0ID0gZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TZWxlY3QgPSBlLmNhblNlbGVjdDtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5tdXN0Q2hvb3NBZGF0YXJvdztcclxuICAgICAgICAgICAgY2FuU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2FuU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZFJvd3MkID0gb2Yoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAvLyDlpJrpgIkg5qCR5biu5YqpIOW8guatpeWKoOi9vSDliIbnuqfnoIEg5byA5ZCv5ZCM5q2l6YCJ5oupIOaIluWMheWQq+S4i+e6p1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuZW5hYmxlQ2FzY2FkZSAmJiB0aGlzLmlzVHJlZSgpICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVJbmZvLmxvYWREYXRhVHlwZSAhPT0gJ2FsbCcgJiYgdGhpcy50cmVlSW5mby5sYXllclR5cGUgPT09ICdwYXRoY29kZScgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNHZXRBbGxDaGlkbE5vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBwYXJlbnRzSWRzID0gc2VsZWN0ZWRSb3cubWFwKG4gPT4gblt0aGlzLnRyZWVJbmZvLmRhdGFGaWVsZF1bdGhpcy50cmVlSW5mby5wYXRoRmllbGRdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50c0lkcyA9IHRoaXMuZ2V0UGFyZW50UGF0aENvZGUoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudHNJZHMgJiYgcGFyZW50c0lkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzSWRzID0gcGFyZW50c0lkcy5tYXAobiA9PiBuW3RoaXMudHJlZUluZm8uZGF0YUZpZWxkXVt0aGlzLnRyZWVJbmZvLnBhdGhGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd3MkID0gdGhpcy5odHRwTWdyLmdldERhdGEoeyBwYXJlbnRzSWRzIH0sICdhbGxDaGlsZHJlbicpLnBpcGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcCgocjogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSByLml0ZW1zID8gci5pdGVtcy5tYXAoZCA9PiBkLmRhdGEpIDogW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxpdGVtcyA9IFsuLi5zZWxlY3RlZFJvdywgLi4uaXRlbXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlkcyA9IGFsbGl0ZW1zLm1hcChuID0+IG5bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWRzLm1hcChuID0+IGFsbGl0ZW1zLmZpbmQoYSA9PiBhW3RoaXMuaWRGaWVsZF0gPT09IG4pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZFJvd3MkLnN1YnNjcmliZSgocm93cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFZhbHVlKHJvd3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVzZVRpcCB8fCAhcm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVRpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVF1ZWNrU2VsZWN0ZWQocm93cywgdGhpcy5sb2NhbFNlcnZpY2UubG9jYWxlSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubm90aWZ5U2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS53YXJuaW5nKG1lc3NhZ2UsICcnLCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmVsLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbnRyb2xWYWx1ZShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcHBpbmdGbihzZWxlY3RlZFJvdywgdGhpcy5tYXBGaWVsZHMsIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzICYmIHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXBwaW5nLmxvb2t1cEZpZWxkTWFwKHNlbGVjdGVkUm93LCB0aGlzLm1hcEZpZWxkcywgdGhpcy5iaW5kaW5nRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG4gICAgICAgICAgICBpZiAodGhpc1snaW5EYXRhZ3JpZCddICYmIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRSb3cpID8gc2VsZWN0ZWRSb3cgOiBbc2VsZWN0ZWRSb3ddO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCaW5kRGF0YShzZWxlY3RJdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEuZW1pdChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMucnVuRGljdFBpY2tlZEV2ZW50KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmJsdXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS53YXJuaW5nKHRoaXMubXVzdENob29zQWRhdGFyb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUJpbmREYXRhKHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoZWxwRmllbGRzID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0gJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdEYXRhID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGhlbHBGaWVsZCwgcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuc2V0VmFsdWUoYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgdmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAoYmluZGluZ0RhdGEuc2V0VmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IGJpbmRpbmdQYXRoID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHBhdGhBcnI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBwYXRoQXJyID0gYmluZGluZ1BhdGguc3BsaXQoJy8nKS5maWx0ZXIobiA9PiBuICE9PSAnJyk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF0uc3BsaXQoJywnKS5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCBmaWVsZFBhdGhzID0gcGF0aEFyci5jb25jYXQoZm9ybUZpZWxkLnNwbGl0KCcuJykpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBiaW5kaW5nRGF0YS5zZXRWYWx1ZShwYXRoQXJyLmNvbmNhdChmaWVsZFBhdGhzKSwgdmFsLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgLy8gICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLm1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QgdmFsID0gc2VsZWN0ZWRSb3cubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoZm9ybUZpZWxkLCByKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy51dGlscy5zZXRWYWx1ZSh0aGlzLmJpbmRpbmdEYXRhLCBmb3JtRmllbGQsIHZhbCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFeHRlbmRJbmZvRmllbGRzKGlzSGVscERhdGEgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV4dEluZm9GaWVsZHMpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGDmnKrorr7nva7mianlsZXlrZfmrrXjgIJgKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aXBGaWVsZEFyciA9IHRoaXMuZXh0SW5mb0ZpZWxkcy5zcGxpdCgnLCcpO1xyXG5cclxuICAgICAgICBpZiAoaXNIZWxwRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQgZXh0ZW5kSW5mb0ZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICBleHRlbmRJbmZvRmllbGRzID0gdGlwRmllbGRBcnIubWFwKHRmID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcEtleSA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKS5maW5kKGsgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcEZpZWxkc1trXSA9PT0gdGY7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcEtleTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDlnKjluK7liqnmmKDlsITlrZfmrrXkuK3mnKrmib7liLAke3RmfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmRJbmZvRmllbGRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRpcEZpZWxkQXJyO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlRXh0ZW5kSW5mbygpIHtcclxuICAgICAgICBjb25zdCBqc29uRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVFeHRlbmRJbmZvKGpzb25EYXRhLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6YCJ5Lit5biu5Yqp5pWw5o2u5ZCO77yM5pu05paw5omp5bGV5L+h5oGvXHJcbiAgICBwcml2YXRlIHVwZGF0ZUV4dGVuZEluZm8oZGF0YTogYW55LCBpc0hlbHBEYXRhID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dEluZm9Gb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gZGF0YS5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRpcFN0cmluZy5qb2luKCfvvIwnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVuZEluZm9GaWVsZHMgPSB0aGlzLmdldEV4dGVuZEluZm9GaWVsZHMoaXNIZWxwRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kSW5mb0ZpZWxkcyAmJiBleHRlbmRJbmZvRmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IGRhdGEubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXh0ZW5kSW5mb1RleHQobiwgZXh0ZW5kSW5mb0ZpZWxkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aXBTdHJpbmcuam9pbign77yMJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChkYXRhLCBleHRlbmRJbmZvRmllbGRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFeHRlbmRJbmZvVGV4dChpdGVtRGF0YSwgZmllbGRzID0gbnVsbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5leHRJbmZvRm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dEluZm9Gb3JtYXR0ZXIoeyBiaW5kaW5nRGF0YTogaXRlbURhdGEsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0aXBWYWx1ZXMgPSBmaWVsZHMubWFwKHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGZ2ID0gdGhpcy51dGlscy5nZXRWYWx1ZSh0LCBpdGVtRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aXBTdHJpbmcucHVzaCh0ZnYpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgW3RdOiB0ZnYgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aXBTdHJpbmcuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERpc3BsYXlUZXh0KHJvd3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGRmID0gdGhpcy5kaXNwbGF5RmllbGRzID8gdGhpcy5kaXNwbGF5RmllbGRzLnNwbGl0KCcsJykgOiBbdGhpcy50ZXh0RmllbGRdO1xyXG4gICAgICAgIGNvbnN0IHR4dEFyciA9IHJvd3MubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gW107XHJcbiAgICAgICAgICAgIGRmLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0LnB1c2godGhpcy51dGlscy5nZXRWYWx1ZShuLCByKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdC5qb2luKHRoaXMuZGlzcGxheVRleHRTZXBhcmF0b3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR4dEFyci5qb2luKCcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5RmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0QXJyLm1hcCh0ID0+ICdbJyArIHQgKyAnXScpLmpvaW4oJywnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eHRBcnIuam9pbignLCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0RGlzcGxheVRleHQoc2VsZWN0ZWRSb3c6IGFueSkge1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlGb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMudGV4dEZpZWxkLCBzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKHRoaXMuZGlzcGxheVRleHQsIFtzZWxlY3RlZFJvd10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbG9va3VwOiB0aGlzLCBkYXRhdGFibGU6IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudCB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZSBhcyBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcih0aGlzLmRpc3BsYXlUZXh0LCBbc2VsZWN0ZWRSb3ddLCB7IGxvb2t1cDogdGhpcywgdHJlZTogdHQgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5nZXREaXNwbGF5VGV4dChbc2VsZWN0ZWRSb3ddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHNlbGVjdGVkUm93W3RoaXMudmFsdWVGaWVsZF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkUm93Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMudGV4dEZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKHRoaXMuZGlzcGxheVRleHQsIHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBsb29rdXA6IHRoaXMsIGRhdGF0YWJsZTogdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKHRoaXMuZGlzcGxheVRleHQsIHNlbGVjdGVkUm93LCB7IGxvb2t1cDogdGhpcywgdHJlZTogdHQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5nZXREaXNwbGF5VGV4dChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy52YWx1ZUZpZWxkLCByKTtcclxuICAgICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bkRpY3RQaWNrZWRFdmVudChyb3dEYXRhOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWN0UGlja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9rQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9rQnV0dG9uLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGljdFBpY2tlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGljdFBpY2tlZChyb3dEYXRhKS5zdWJzY3JpYmUoKHY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2tCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9rQnV0dG9uLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiB2LmNsb3NlRGlhbG9nICE9PSB1bmRlZmluZWQgJiYgIXYuY2xvc2VEaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodi5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLndhcm5pbmcodi5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb2N1c1RvSW5wdXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dEdyb3VwICYmIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZURpYWxvZyhyb3dEYXRhID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocm93RGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLm11bHRpU2VsTWdyLnNhdmUocm93RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZvY3VzVG9JbnB1dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbFNlbGVjdCgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMubm9zZWFyY2gpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMub3JpZ2luYWxUZXh0O1xyXG4gICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodGhpcy5kaXNwbGF5VGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsSGFuZGxlcih0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kZWxWYWx1ZSh2KSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25Nb2RlbENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2Uodik7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkLmVtaXQodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaVsOaNruWIl+ihqO+8jOaUtuiXj++8jCDlt7LpgInmlbDmja4gdGFiIOmhteWIh+aNolxyXG4gICAgb25UYWJDaGFuZ2UoZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBlLnRhYkluZGV4O1xyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25mLnRhYkluZGV4ID0gdGhpcy5hY3RpdmVUYWI7XHJcbiAgICAgICAgY29uc3QgX2ZpcnN0Q2hhbmdlID0gdGhpcy5pc1RhYkNoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5pc1RhYkNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVBlcnNvbmFsQ29uZmlnKHsgdGFiSW5kZXg6IGUudGFiSW5kZXggfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2RhdGFsaXN0Jykge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmICF0aGlzLmxlZnRDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hdmlnYXRpb25PcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlTGVmdENvbXBvbmVudCh0aGlzLm5hdmlnYXRpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1zIHx8ICF0aGlzLml0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlVGFibGVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVRhYmxlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR0RXZlbnRNZ3IuYmluZERhdGFUYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2Zhdm9yaXRlJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5mYXZvcml0ZUl0ZW1zIHx8ICF0aGlzLmZhdm9yaXRlSXRlbXMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVJdGVtcy5sZW5ndGggIT09IHRoaXMuZmF2SGVscGVyLmdldEZhdm9yaXRJZHMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIV9maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5fbG9hZEZhdm9yaXRlRGF0YSh0aGlzLmZhdm9yaXRlSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNtcCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnN0YXRlLnNjcm9sbFk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zY3JvbGxUb1koeSwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHRFdmVudE1nci5jYXNjYWRlVmFsdWVDaGFuZ2VkKHRoaXMuY2FzY2FkZVN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uICBUYWcgVmlldyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyTW91c2VFdmVudEZvclRhZ1ZpZXcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ2xlYXIpIHtcclxuICAgICAgICAgICAgdGhpcy50YWdib3gubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgJ21vdXNlZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRhZ2JveE1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAnbW91c2VsZWF2ZScsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVGFnYm94TW91c2VMZWF2ZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9nZ2xlQ2xlYXJJY29uKGV2ZW50OiBhbnksIGlzU2hvdyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RyID0gaXNTaG93ID8gJycgOiAnbm9uZSc7XHJcbiAgICAgICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cC1jbGVhcicpO1xyXG4gICAgICAgIGlmIChjbGVhckljb24pIHtcclxuICAgICAgICAgICAgY2xlYXJJY29uLnN0eWxlLmRpc3BsYXkgPSBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWdib3hNb3VzZUVudGVyKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVRleHQgJiYgdGhpcy5lbmFibGVDbGVhcikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RhZ2JveENsZWFyQnV0dG9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zaG93VGFnYm94Q2xlYXJCdXR0b24pIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFnYm94TW91c2VMZWF2ZShldmVudCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQ2xlYXJJY29uKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlbW92ZVNlbGVjdEl0ZW0oJGV2ZW50LCB0eHQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygkZXZlbnQsIHR4dCk7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHRleHRBcnJheSA9IEFycmF5LmZyb20odGhpcy5kaXNwbGF5VGV4dExpc3QpO1xyXG4gICAgICAgIGNvbnN0IHJlbW92ZWRJbmRleCA9IHRoaXMuZGlzcGxheVRleHRMaXN0LmluZGV4T2YodHh0KTtcclxuICAgICAgICB0ZXh0QXJyYXkuc3BsaWNlKHJlbW92ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRleHRBcnJheS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLmRpc3BsYXlWYWx1ZS5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgdmFscy5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSB2YWxzLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhZ1JlbW92ZWQuZW1pdCh7IHJlbW92ZWRJbmRleCwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCkge1xyXG5cclxuICAgICAgICBjb25zdCBoZWxwRmllbGRzID0gT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpO1xyXG4gICAgICAgIGNvbnN0IHRleHRGaWVsZEluZGV4ID0gaGVscEZpZWxkcy5pbmRleE9mKHRoaXMudGV4dEZpZWxkKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbCAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybSAmJlxyXG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGFcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ1BhdGggPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ1BhdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChmb3JtRmllbGQuc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGJpbmRpbmdEYXRhLmdldFZhbHVlKGZpZWxkUGF0aHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsID0gdmFsQXJyLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmdEYXRhLnNldFZhbHVlKHBhdGhBcnIuY29uY2F0KGZpZWxkUGF0aHMpLCBuZXdWYWwsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRGaWVsZEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWxwRmllbGRzLnNwbGljZSh0ZXh0RmllbGRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoZm9ybUZpZWxkLCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsQXJyID0gdmFsLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxBcnIuc3BsaWNlKHJlbW92ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKHRoaXMuYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgbmV3VmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgb25BbGxDaGlsZE5vZGVzQ2xpY2soJGV2ZW50OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmlzR2V0QWxsQ2hpZGxOb2RlcyA9ICF0aGlzLmlzR2V0QWxsQ2hpZGxOb2RlcztcclxuICAgIH1cclxufVxyXG4iXX0=