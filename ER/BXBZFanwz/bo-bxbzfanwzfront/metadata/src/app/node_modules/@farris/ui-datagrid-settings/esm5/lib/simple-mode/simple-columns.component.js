/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, EventEmitter, HostBinding, Injector, Input, Output, ViewEncapsulation, HostListener, ViewChild, ElementRef } from '@angular/core';
import { LocaleService } from '@farris/ui-locale';
import { MessagerService } from '@farris/ui-messager';
var SimpleColumnsComponent = /** @class */ (function () {
    function SimpleColumnsComponent(injector, cd) {
        this.injector = injector;
        this.cd = cd;
        this.seartTypes = [];
        /**
         * 所有列
         */
        this.columns = [];
        /**
         * 显示的列
         */
        this.fields = [];
        /**
         * 点击侧边样式以外的区域隐藏面板。默认为 true
         */
        this.clickToHidden = true;
        this.top = 0;
        this.cls = 'f-datagrid-settings-simple-host';
        this.formatChange = new EventEmitter();
        this.fieldsChange = new EventEmitter();
        this.submit = new EventEmitter();
        this.closed = new EventEmitter();
        this.advanced = new EventEmitter();
        this.allCols = [];
        this.columnType = 'all';
        this.isEn = false;
        this.settings = {};
        this.localeSer = this.injector.get(LocaleService, null);
        this.messager = this.injector.get(MessagerService, null);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        // console.log($event);
        $event.stopPropagation();
        /** @type {?} */
        var clsname = $event.target['className'] || '';
        if (clsname.indexOf('f-datagrid-settings-simple-host') > -1) {
            // 隐藏侧边栏；
            if (this.clickToHidden) {
                this.close();
            }
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onEscKeydown = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        if (!document.querySelector('modal-container')) {
            this.close();
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onEnterKeydown = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        if (!document.querySelector('modal-container')) {
            this.onSubmitClick();
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onControlGKeydown = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if ($event.ctrlKey && !document.querySelector('modal-container')) {
            $event.preventDefault();
            $event.stopPropagation();
            if ($event.key.toLowerCase() === 'g') {
                this.showAdvanced($event);
            }
            else if ($event.key.toLowerCase() === 'r') {
                this.onSettingReset();
            }
            else if ($event.key.toLowerCase() === 's') {
                this.searchInput.nativeElement.focus();
            }
        }
    };
    /**
     * @return {?}
     */
    SimpleColumnsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.allCols = this.columns[0];
        this.fields = this.getViewColumns();
        this.container.nativeElement.focus();
    };
    /**
     * @private
     * @return {?}
     */
    SimpleColumnsComponent.prototype.getViewColumns = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 多表头
        /** @type {?} */
        var visibleCls = [];
        if (this.columns.length > 1) {
            this.columns.forEach((/**
             * @param {?} cols
             * @return {?}
             */
            function (cols) {
                visibleCls = visibleCls.concat(_this._getViewColumns(cols));
            }));
        }
        else {
            visibleCls = this.columns[0].filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return (n.visible || n.visible === undefined); }));
        }
        return visibleCls.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.field; }));
    };
    /**
     * @private
     * @param {?} cols
     * @return {?}
     */
    SimpleColumnsComponent.prototype._getViewColumns = /**
     * @private
     * @param {?} cols
     * @return {?}
     */
    function (cols) {
        return cols.filter((/**
         * @param {?} c
         * @return {?}
         */
        function (c) { return !c.colspan && (c.visible || c.visible === undefined); }));
    };
    // 根据列的类型进行筛选过滤，
    // all 所有列
    // visible 可见列
    // hidden 隐藏列
    // group 分组列
    // 根据列的类型进行筛选过滤，
    // all 所有列
    // visible 可见列
    // hidden 隐藏列
    // group 分组列
    /**
     * @param {?} ct
     * @param {?=} searchWords
     * @return {?}
     */
    SimpleColumnsComponent.prototype.filterColumns = 
    // 根据列的类型进行筛选过滤，
    // all 所有列
    // visible 可见列
    // hidden 隐藏列
    // group 分组列
    /**
     * @param {?} ct
     * @param {?=} searchWords
     * @return {?}
     */
    function (ct, searchWords) {
        var _this = this;
        if (searchWords === void 0) { searchWords = ''; }
        /** @type {?} */
        var cols = [];
        switch (ct) {
            case 'visible':
                cols = this.columns[0].filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return _this.fields.indexOf(n.field) > -1; }));
                break;
            case 'hidden':
                cols = this.columns[0].filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return _this.fields.indexOf(n.field) === -1; }));
                break;
            case 'all':
            default:
                cols = this.columns[0];
                break;
        }
        if (searchWords) {
            cols = cols.filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.title.toLowerCase().indexOf(searchWords) > -1; }));
        }
        this.allCols = cols;
    };
    /**
     * @private
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onFieldsChanged = /**
     * @private
     * @return {?}
     */
    function () {
        this.fieldsChange.emit(this.fields);
    };
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onDblClick = /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    function ($event, col) {
        // console.log('显示与隐藏切换事件', col);
        this.onCheckboxClick($event, col);
    };
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onCheckboxClick = /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    function ($event, col) {
        var _this = this;
        // console.log('显示与隐藏切换事件', col);
        $event.stopPropagation();
        /** @type {?} */
        var index = this.fields.indexOf(col.field);
        if (index === -1) {
            this.fields.push(col.field);
        }
        else {
            this.fields.splice(index, 1);
        }
        this.columns[0].forEach((/**
         * @param {?} f
         * @return {?}
         */
        function (f) {
            f.visible = _this.fields.indexOf(f.field) > -1;
        }));
        this.fields = this.columns[0].filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.visible; })).map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.field; }));
        this.onFieldsChanged();
    };
    /**
     * @param {?} $event
     * @param {?} ct
     * @return {?}
     */
    SimpleColumnsComponent.prototype.searchColumn = /**
     * @param {?} $event
     * @param {?} ct
     * @return {?}
     */
    function ($event, ct) {
        /** @type {?} */
        var txt = $event.target.value;
        this.filterColumns(ct, txt);
    };
    /**
     * @param {?} fieldInfo
     * @param {?} ct
     * @param {?} txt
     * @param {?} ulElRef
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onFieldDrop = /**
     * @param {?} fieldInfo
     * @param {?} ct
     * @param {?} txt
     * @param {?} ulElRef
     * @return {?}
     */
    function (fieldInfo, ct, txt, ulElRef) {
        var _a;
        // console.log('drop', fieldInfo);
        var removedIndex = fieldInfo.removedIndex, addedIndex = fieldInfo.addedIndex;
        /** @type {?} */
        var moveItem = this.allCols[removedIndex];
        /** @type {?} */
        var targetItem = this.allCols[addedIndex];
        /** @type {?} */
        var moveItemIndex = this.columns[0].findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.field === moveItem.field; }));
        /** @type {?} */
        var targetItemIndex = this.columns[0].findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.field === targetItem.field; }));
        /** @type {?} */
        var removedItem = this.columns[0].splice(moveItemIndex, 1);
        (_a = this.columns[0]).splice.apply(_a, tslib_1.__spread([targetItemIndex, 0], removedItem));
        this.fields = this.columns[0].filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.visible; })).map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.field; }));
        this.onFieldsChanged();
        this.filterColumns(ct, txt);
    };
    /**
     * 0: 1个也没有选中； 1: 全部选中； 2: 有选中的也有没选中的
     */
    /**
     * 0: 1个也没有选中； 1: 全部选中； 2: 有选中的也有没选中的
     * @private
     * @return {?}
     */
    SimpleColumnsComponent.prototype.getCheckAllState = /**
     * 0: 1个也没有选中； 1: 全部选中； 2: 有选中的也有没选中的
     * @private
     * @return {?}
     */
    function () {
        if (this.fields.length === 0) {
            return 0;
        }
        else {
            if (this.fields.length === this.columns[0].length) {
                return 1;
            }
            return 2;
        }
    };
    /**
     * @param {?} $event
     * @param {?} ct
     * @param {?} txt
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onCheckAllClick = /**
     * @param {?} $event
     * @param {?} ct
     * @param {?} txt
     * @return {?}
     */
    function ($event, ct, txt) {
        /** @type {?} */
        var state = this.getCheckAllState();
        if (state === 0 || state === 2) {
            // 执行全选
            this.columns[0].forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.visible = true; }));
            this.fields = this.columns[0].map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.field; }));
        }
        else {
            // 取消全选
            this.columns[0].forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.visible = false; }));
            this.fields = [];
        }
        this.onFieldsChanged();
        this.filterColumns(ct, txt);
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.close = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        if ($event) {
            $event.stopPropagation();
        }
        this.closed.emit();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.showAdvanced = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.close($event);
        this.advanced.emit();
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onSettingReset = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if ($event) {
            $event.stopPropagation();
        }
        /** @type {?} */
        var restorDefaultText = this.localeSer.getValue('datagrid.settings.restoreDefaultSettingsText') || '确认要恢复默认设置吗？';
        this.messager.confirm(restorDefaultText).subscribe((/**
         * @param {?} t
         * @return {?}
         */
        function (t) {
            if (t) {
                _this.reset2Default();
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    SimpleColumnsComponent.prototype.reset2Default = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var options = this.gridInstance.dfs['_state'].initialOptions;
        if (options.columnFields && options.columnFields.length) {
            /** @type {?} */
            var newColumns_1 = [];
            options.columnFields.forEach((/**
             * @param {?} c
             * @return {?}
             */
            function (c) {
                if (c.field !== '_datagrid-setting-control_') {
                    /** @type {?} */
                    var col = _this.gridInstance.columns[0].find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.field === c.field; }));
                    if (col) {
                        col.visible = c.visible;
                        col.halign = c.halign;
                        col.align = c.align;
                        col.width = c.width;
                        col.footer = tslib_1.__assign({}, c.footer || {});
                        col.groupFooter = tslib_1.__assign({}, c.groupFooter || {});
                        newColumns_1.push(col);
                    }
                }
            }));
            this.columns = [newColumns_1];
        }
        this.allCols = this.columns[0];
        this.fields = this.getViewColumns();
        this.settings.viewColumns = this.fields;
        this.settings.columnFormat = tslib_1.__spread(this.columns[0]);
        if (options.sort) {
            /** @type {?} */
            var sortOrders = options.sort.sortOrder ? options.sort.sortOrder.split(',') : [];
            /** @type {?} */
            var sortNames = options.sort.sortName ? options.sort.sortName.split(',') : [];
            this.settings.sortInfo = { sortName: sortNames, sortOrder: sortOrders };
        }
        else {
            this.settings.sortInfo = {};
        }
        this.settings.groupFields = options.groupField ? options.groupField.split(',') : [];
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    SimpleColumnsComponent.prototype.onSubmitClick = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        if ($event) {
            $event.stopPropagation();
        }
        this.settings.viewColumns = this.fields;
        this.settings.columnFormat = tslib_1.__spread(this.columns[0]);
        if (!this.settings.sortInfo) {
            this.settings.sortInfo = {
                sortName: this.gridInstance.sortName ? this.gridInstance.sortName.split(',') : [],
                sortOrder: this.gridInstance.sortOrder ? this.gridInstance.sortOrder.split(',') : []
            };
        }
        if (this.settings.groupFields === undefined) {
            this.settings.groupFields = this.gridInstance.groupField ? this.gridInstance.groupField.split(',') : [];
        }
        this.submit.emit({ content: this.settings, close: this.close.bind(this), target: this.btnOk.nativeElement });
    };
    SimpleColumnsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'datagrid-settings-simple',
                    template: "<div class=\"d-flex flex-column f-datagrid-settings-simple\" tabindex=\"0\" #colcontainer\r\n    [style.top.px]=\"top\" [style.height]=\"'calc(100vh - ' +  top + 'px)'\">\r\n\r\n    <div class=\"header d-flex\">\r\n        <div class=\"f-utils-fill title\"> {{ 'datagrid.settings.simple.title' | locale }} </div>\r\n        <div class=\"closed\" (click)=\"close($event)\">\r\n            <span class=\"f-icon f-icon-close\" style=\"font-size: 20px;\"></span>\r\n        </div>\r\n    </div>\r\n    <div class=\"f-utils-fill content d-flex flex-column\">\r\n        <div>\r\n            <h5 class=\"count\" [innerHTML]=\"'datagrid.settings.simple.count' | locale | replaceX: fields.length\">\r\n            </h5>\r\n\r\n            <div class=\"tip\">\r\n                {{ 'datagrid.settings.simple.tip' | locale }}\r\n            </div>\r\n\r\n            <input #inputWord type=\"text\" class=\"form-control\" placeholder=\"{{'datagrid.settings.searchPlaceholder' | locale}}\"\r\n                (input)=\"searchColumn($event, ct.selectedValues)\" style=\"height: 30px;margin-bottom: 16px;\">\r\n            <div style=\"padding: 5px 0px;background-color: #fff;\">\r\n                <button class=\"btn btn-link \" \r\n                    style=\"height: 32px;padding-left: 4px;\" (click)=\"onCheckAllClick($event, ct.selectedValues, inputWord.value)\">\r\n                    <span class=\"f-icon f-icon-minus-outline checkall\" [class.f-icon-checkbox]=\"!fields.length\"\r\n                        [class.f-icon-checkbox-checked]=\"fields.length === columns[0].length\"></span>\r\n                    {{ 'datagrid.settings.checkall' | locale }}\r\n                </button>\r\n\r\n                <farris-combo-list #ct \r\n                [data]=\"seartTypes\" \r\n                [editable]=\"false\"\r\n                [ngModel]=\"'all'\" [idField]=\"'value'\"\r\n                [textField]=\"'title'\"\r\n                [enableClear]=\"false\"\r\n                (valueChange)=\"filterColumns(ct.selectedValues, inputWord.value)\"\r\n                style=\"float: right;\" [style.width.px]=\"isEn ? 120: 80\"\r\n                class=\"format-setting-searchitem\"></farris-combo-list>\r\n            </div>\r\n        </div>\r\n        <div style=\"overflow: auto;padding-right:3px\" class=\"f-utils-fill\">\r\n            <ul class=\"list-group list-group-flush\" #ul column-visible-drag (drop)=\"onFieldDrop($event, ct.selectedValues, inputWord.value, ul)\">\r\n                <li class=\"list-group-item list-group-item-action smooth-dnd-draggable-wrapper format-setting-column\" *ngFor=\"let col of allCols\" \r\n                    (click)=\"onDblClick($event, col)\">\r\n                    <span class=\"f-icon checkbox\"\r\n                        [class.f-icon-checkbox-checked]=\"fields.indexOf(col.field) > -1\"\r\n                        [class.f-icon-checkbox]=\"fields.indexOf(col.field) == -1\"\r\n                        (click)=\"onCheckboxClick($event, col)\"></span>\r\n                    {{ col.title}} \r\n\r\n                    <span class=\"f-icon f-icon-drag-vertical field-drag-handle\"></span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"footer\">\r\n\r\n        <div class=\"buttons\">\r\n            <button class=\"btn btn-link advanced\" (click)=\"showAdvanced($event)\">{{ 'datagrid.settings.advancedMode' | locale: '\u9AD8\u7EA7\u6A21\u5F0F' }}</button>\r\n            <button class=\"btn btn-link reset\" (click)=\"onSettingReset($event)\">{{ 'datagrid.settings.reset' | locale: '\u6062\u590D\u9ED8\u8BA4' }}</button>\r\n            <button class=\"btn btn-secondary cancel\"\r\n                (click)=\"close($event)\">{{'datagrid.settings.cancel' | locale}}</button>\r\n            <button class=\"btn btn-primary ok\" #okbtn\r\n                (click)=\"onSubmitClick($event)\">{{'datagrid.settings.ok' | locale}}</button>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: ["\n        .f-datagrid-settings-simple {\n            position: absolute;\n            top: 100px;\n            right: 0px;\n            z-index: 10000;\n            height: calc(100vh - 100px);\n            width: 468px;\n            background: #FFFFFF;\n            border: 1px solid #E6E9F0;\n            border-radius: 10px 0 0 10px;\n        }\n\n        .f-datagrid-settings-simple:focus {\n            outline: none;\n        }\n\n        .f-datagrid-settings-simple .header {\n            height: 50px;\n            line-height: 50px;\n            border-bottom: 1px solid #EAEDF3;\n            font-size: 18px;\n            color: #2D2F33;\n        }\n        .f-datagrid-settings-simple .header .title {\n            padding-left: 21px;\n            font-weight:bold;\n        }\n        .f-datagrid-settings-simple .header .closed\n        {\n            width: 50px;\n            text-align: center;\n            cursor: pointer;\n        }\n\n        .f-datagrid-settings-simple .content .count{font-size: 14px; color: #2D2F33;}\n        .f-datagrid-settings-simple .content .tip {\n            background: #F7FAFF; border-radius: 6px;line-height: 42px; padding-left: 10px; margin-bottom: 10px;\n        }\n\n        .f-datagrid-settings-simple .content .checkall{\n            margin-left: 5px;\n            font-size: 14px;\n            color: #0089FF;\n            margin-right: 5px;\n        }\n\n        .f-datagrid-settings-simple .content {\n            margin: 20px 24px;\n        }\n\n        .f-datagrid-settings-simple .footer {\n            height: 32px;\n            margin: 20px;\n        }\n\n\n        .smooth-dnd-ghost.format-setting-column {\n            z-index: 999999999 !important;\n            padding: 4px 8px;\n            background-color: #e7f1ff;\n            border: 1px solid #2a87ff;\n        }\n        .smooth-dnd-ghost.format-setting-column .field-drag-handle {\n            float: right;\n        }\n        .f-datagrid-settings-simple  .smooth-dnd-drop-preview-constant-class {\n            background-color: #dee1ea;\n        }\n        .f-datagrid-settings-simple .format-setting-column {\n            background: #fafbfd;\n            padding: 4px 8px;\n            margin-bottom: 5px;\n            border: 1px solid #f2f4f8;\n            border-radius: 5px;\n            color: #000;\n        }\n        .f-datagrid-settings-simple .format-setting-column.active {\n            border: 1px solid #2a87ff;\n            background: #e7f1ff;\n            border-top: 1px solid #2a87ff!important;\n            border-bottom: 1px solid #2a87ff!important;\n        }\n\n        .format-setting-column .checkbox{\n            font-size: 14px;\n            color: #0089FF;\n            margin-right: 5px;\n            cursor:pointer;\n        }\n\n        .f-datagrid-settings-simple .format-setting-column .field-drag-handle{\n            float: right;\n            cursor: grab;\n        }\n\n        .f-datagrid-settings-simple .format-setting-column .field-drag-handle:active{\n            cursor: grabbing;\n        }\n\n        .f-datagrid-settings-simple .list-group-flush:last-child .list-group-item:last-child {\n            border-bottom: 1px solid #f2f4f8;\n        }\n\n        .f-datagrid-settings-simple .list-group-flush:first-child .list-group-item:first-child {\n            border-top: 1px solid #f2f4f8;\n        }\n\n        .f-datagrid-settings-simple .buttons\n        {\n            text-align: right;\n        }\n\n        .f-datagrid-settings-simple .buttons button {\n            width: 66px;height: 32px;\n        }\n        .f-datagrid-settings-simple .buttons .cancel {\n            margin-left: 12px;margin-right: 8px;\n        }\n        .f-datagrid-settings-simple .buttons .ok {\n            width: 100px;\n        }\n\n        .f-datagrid-settings-simple .buttons .advanced{ width: 66px;height: 32px; float: left; }\n\n        .f-datagrid-settings-simple-host {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 1000;\n        }\n\n        .f-datagrid-settings-simple .visible-cols-count {\n            font-size: 18px;\n            font-weight: 500;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    SimpleColumnsComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: ChangeDetectorRef }
    ]; };
    SimpleColumnsComponent.propDecorators = {
        seartTypes: [{ type: Input }],
        columns: [{ type: Input }],
        fields: [{ type: Input }],
        clickToHidden: [{ type: Input }],
        top: [{ type: Input }],
        cls: [{ type: HostBinding, args: ['class',] }],
        container: [{ type: ViewChild, args: ['colcontainer',] }],
        btnOk: [{ type: ViewChild, args: ['okbtn',] }],
        searchInput: [{ type: ViewChild, args: ['inputWord',] }],
        formatChange: [{ type: Output }],
        fieldsChange: [{ type: Output }],
        submit: [{ type: Output }],
        closed: [{ type: Output }],
        advanced: [{ type: Output }],
        onClick: [{ type: HostListener, args: ['click', ['$event'],] }],
        onEscKeydown: [{ type: HostListener, args: ['window:keydown.esc', ['$event'],] }],
        onEnterKeydown: [{ type: HostListener, args: ['window:keydown.enter', ['$event'],] }],
        onControlGKeydown: [{ type: HostListener, args: ['keydown', ['$event'],] }]
    };
    return SimpleColumnsComponent;
}());
export { SimpleColumnsComponent };
if (false) {
    /** @type {?} */
    SimpleColumnsComponent.prototype.seartTypes;
    /**
     * 所有列
     * @type {?}
     */
    SimpleColumnsComponent.prototype.columns;
    /**
     * 显示的列
     * @type {?}
     */
    SimpleColumnsComponent.prototype.fields;
    /**
     * 点击侧边样式以外的区域隐藏面板。默认为 true
     * @type {?}
     */
    SimpleColumnsComponent.prototype.clickToHidden;
    /** @type {?} */
    SimpleColumnsComponent.prototype.top;
    /** @type {?} */
    SimpleColumnsComponent.prototype.cls;
    /** @type {?} */
    SimpleColumnsComponent.prototype.container;
    /** @type {?} */
    SimpleColumnsComponent.prototype.btnOk;
    /** @type {?} */
    SimpleColumnsComponent.prototype.searchInput;
    /** @type {?} */
    SimpleColumnsComponent.prototype.formatChange;
    /** @type {?} */
    SimpleColumnsComponent.prototype.fieldsChange;
    /** @type {?} */
    SimpleColumnsComponent.prototype.submit;
    /** @type {?} */
    SimpleColumnsComponent.prototype.closed;
    /** @type {?} */
    SimpleColumnsComponent.prototype.advanced;
    /** @type {?} */
    SimpleColumnsComponent.prototype.allCols;
    /** @type {?} */
    SimpleColumnsComponent.prototype.columnType;
    /** @type {?} */
    SimpleColumnsComponent.prototype.gridInstance;
    /** @type {?} */
    SimpleColumnsComponent.prototype.localeSer;
    /** @type {?} */
    SimpleColumnsComponent.prototype.isEn;
    /**
     * @type {?}
     * @private
     */
    SimpleColumnsComponent.prototype.messager;
    /**
     * @type {?}
     * @private
     */
    SimpleColumnsComponent.prototype.settings;
    /**
     * @type {?}
     * @private
     */
    SimpleColumnsComponent.prototype.injector;
    /** @type {?} */
    SimpleColumnsComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlLWNvbHVtbnMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRhZ3JpZC1zZXR0aW5ncy8iLCJzb3VyY2VzIjpbImxpYi9zaW1wbGUtbW9kZS9zaW1wbGUtY29sdW1ucy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFDekUsTUFBTSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlGLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFHdEQ7SUFvTEksZ0NBQW9CLFFBQWtCLEVBQVMsRUFBcUI7UUFBaEQsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUFTLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBaEMzRCxlQUFVLEdBQVEsRUFBRSxDQUFDOzs7O1FBRXJCLFlBQU8sR0FBRyxFQUFFLENBQUM7Ozs7UUFFYixXQUFNLEdBQUcsRUFBRSxDQUFDOzs7O1FBRVosa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFFckIsUUFBRyxHQUFHLENBQUMsQ0FBQztRQUVLLFFBQUcsR0FBRyxpQ0FBaUMsQ0FBQztRQU1wRCxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDbEMsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2xDLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQzVCLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQzVCLGFBQVEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRXhDLFlBQU8sR0FBRyxFQUFFLENBQUM7UUFDYixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBSW5CLFNBQUksR0FBRyxLQUFLLENBQUM7UUFHTCxhQUFRLEdBQVEsRUFBRSxDQUFDO1FBR3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzdELENBQUM7Ozs7O0lBSUQsd0NBQU87Ozs7SUFEUCxVQUNRLE1BQWtCO1FBQ3RCLHVCQUF1QjtRQUN2QixNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7O1lBQ25CLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUU7UUFDaEQsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDekQsU0FBUztZQUNULElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtnQkFDcEIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ2hCO1NBQ0o7SUFDTCxDQUFDOzs7OztJQUdELDZDQUFZOzs7O0lBRFosVUFDYSxNQUFNO1FBQ2YsTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDNUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQzs7Ozs7SUFHRCwrQ0FBYzs7OztJQURkLFVBQ2UsTUFBTTtRQUNqQixNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDekIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDeEI7SUFDTCxDQUFDOzs7OztJQUdELGtEQUFpQjs7OztJQURqQixVQUNrQixNQUFxQjtRQUNuQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDOUQsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hCLE1BQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN6QixJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssR0FBRyxFQUFFO2dCQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzdCO2lCQUFNLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxHQUFHLEVBQUU7Z0JBQ3pDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN6QjtpQkFBTSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssR0FBRyxFQUFFO2dCQUN6QyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQzthQUMxQztTQUNKO0lBQ0wsQ0FBQzs7OztJQUVELHlDQUFROzs7SUFBUjtRQUNJLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUNwQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN6QyxDQUFDOzs7OztJQUVPLCtDQUFjOzs7O0lBQXRCO1FBQUEsaUJBWUM7OztZQVZPLFVBQVUsR0FBRyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFHO1lBQzFCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsSUFBSTtnQkFDckIsVUFBVSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQy9ELENBQUMsRUFBQyxDQUFDO1NBQ047YUFBTTtZQUNILFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLFNBQVMsQ0FBQyxFQUF0QyxDQUFzQyxFQUFDLENBQUM7U0FDcEY7UUFFRCxPQUFPLFVBQVUsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxDQUFDO0lBQ3hDLENBQUM7Ozs7OztJQUVPLGdEQUFlOzs7OztJQUF2QixVQUF3QixJQUFXO1FBQy9CLE9BQU8sSUFBSSxDQUFDLE1BQU07Ozs7UUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLE9BQU8sS0FBSyxTQUFTLENBQUMsRUFBcEQsQ0FBb0QsRUFBQyxDQUFDO0lBQ2xGLENBQUM7SUFHRCxnQkFBZ0I7SUFDaEIsVUFBVTtJQUNWLGNBQWM7SUFDZCxhQUFhO0lBQ2IsWUFBWTs7Ozs7Ozs7Ozs7SUFDWiw4Q0FBYTs7Ozs7Ozs7Ozs7SUFBYixVQUFjLEVBQVUsRUFBRSxXQUFnQjtRQUExQyxpQkFvQkM7UUFwQnlCLDRCQUFBLEVBQUEsZ0JBQWdCOztZQUNsQyxJQUFJLEdBQUcsRUFBRTtRQUNiLFFBQVEsRUFBRSxFQUFFO1lBQ1IsS0FBSyxTQUFTO2dCQUNWLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxLQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQWpDLENBQWlDLEVBQUMsQ0FBQztnQkFDdEUsTUFBTTtZQUNWLEtBQUssUUFBUTtnQkFDVCxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsS0FBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFuQyxDQUFtQyxFQUFDLENBQUM7Z0JBQ3hFLE1BQU07WUFDVixLQUFLLEtBQUssQ0FBQztZQUNYO2dCQUNJLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixNQUFNO1NBQ2I7UUFFRCxJQUFJLFdBQVcsRUFBRTtZQUNiLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTTs7OztZQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQS9DLENBQStDLEVBQUMsQ0FBQztTQUM1RTtRQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0lBQ3hCLENBQUM7Ozs7O0lBSU8sZ0RBQWU7Ozs7SUFBdkI7UUFDSSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDeEMsQ0FBQzs7Ozs7O0lBQ0QsMkNBQVU7Ozs7O0lBQVYsVUFBVyxNQUFNLEVBQUUsR0FBRztRQUNsQixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdEMsQ0FBQzs7Ozs7O0lBRUQsZ0RBQWU7Ozs7O0lBQWYsVUFBZ0IsTUFBTSxFQUFFLEdBQUc7UUFBM0IsaUJBaUJDO1FBaEJHLGlDQUFpQztRQUNqQyxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7O1lBQ25CLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQzVDLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQy9CO2FBQU07WUFDSCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDaEM7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU87Ozs7UUFBQyxVQUFBLENBQUM7WUFDckIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEQsQ0FBQyxFQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTTs7OztRQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLE9BQU8sRUFBVCxDQUFTLEVBQUMsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxDQUFDO1FBRXZFLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUMzQixDQUFDOzs7Ozs7SUFFRCw2Q0FBWTs7Ozs7SUFBWixVQUFhLE1BQU0sRUFBRSxFQUFFOztZQUNiLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUs7UUFDL0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDaEMsQ0FBQzs7Ozs7Ozs7SUFFRCw0Q0FBVzs7Ozs7OztJQUFYLFVBQVksU0FBUyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsT0FBWTs7O1FBRWhDLElBQUEscUNBQVksRUFBRSxpQ0FBVTs7WUFFMUIsUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDOztZQUNyQyxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUM7O1lBRXJDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Ozs7UUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEtBQUssUUFBUSxDQUFDLEtBQUssRUFBMUIsQ0FBMEIsRUFBQzs7WUFDMUUsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUzs7OztRQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssS0FBSyxVQUFVLENBQUMsS0FBSyxFQUE1QixDQUE0QixFQUFDOztZQUU5RSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztRQUM1RCxDQUFBLEtBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFDLE1BQU0sNkJBQUMsZUFBZSxFQUFFLENBQUMsR0FBSyxXQUFXLEdBQUU7UUFFM0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07Ozs7UUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxPQUFPLEVBQVQsQ0FBUyxFQUFDLENBQUMsR0FBRzs7OztRQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsQ0FBQztRQUN2RSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFdkIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7SUFDSyxpREFBZ0I7Ozs7O0lBQXhCO1FBQ0ksSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDMUIsT0FBTyxDQUFDLENBQUM7U0FDWjthQUFNO1lBQ0gsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRTtnQkFDL0MsT0FBTyxDQUFDLENBQUM7YUFDWjtZQUNELE9BQU8sQ0FBQyxDQUFDO1NBQ1o7SUFDTCxDQUFDOzs7Ozs7O0lBRUQsZ0RBQWU7Ozs7OztJQUFmLFVBQWdCLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRzs7WUFDckIsS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtRQUNyQyxJQUFJLEtBQUssS0FBSyxDQUFDLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtZQUM1QixPQUFPO1lBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksRUFBaEIsQ0FBZ0IsRUFBQyxDQUFDO1lBQy9DLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxDQUFDO1NBQ25EO2FBQU07WUFDSCxPQUFPO1lBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsT0FBTyxHQUFHLEtBQUssRUFBakIsQ0FBaUIsRUFBQyxDQUFDO1lBQ2hELElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1NBQ3BCO1FBRUQsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7Ozs7O0lBRUQsc0NBQUs7Ozs7SUFBTCxVQUFNLE1BQW1CO1FBQ3JCLElBQUksTUFBTSxFQUFFO1lBQ1IsTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQzVCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN2QixDQUFDOzs7OztJQUVELDZDQUFZOzs7O0lBQVosVUFBYSxNQUFNO1FBQ2YsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pCLENBQUM7Ozs7O0lBRUQsK0NBQWM7Ozs7SUFBZCxVQUFlLE1BQVk7UUFBM0IsaUJBVUM7UUFURyxJQUFJLE1BQU0sRUFBRTtZQUNSLE1BQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztTQUM1Qjs7WUFDSyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyw4Q0FBOEMsQ0FBQyxJQUFJLGFBQWE7UUFDbEgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxTQUFTOzs7O1FBQUMsVUFBQyxDQUFVO1lBQzFELElBQUksQ0FBQyxFQUFFO2dCQUNILEtBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQzthQUN4QjtRQUNMLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQzs7Ozs7SUFFTyw4Q0FBYTs7OztJQUFyQjtRQUFBLGlCQW9DQzs7WUFuQ1MsT0FBTyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGNBQWM7UUFDOUQsSUFBSSxPQUFPLENBQUMsWUFBWSxJQUFJLE9BQU8sQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFOztnQkFFL0MsWUFBVSxHQUFHLEVBQUU7WUFDckIsT0FBTyxDQUFDLFlBQVksQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxDQUFDO2dCQUMxQixJQUFJLENBQUMsQ0FBQyxLQUFLLEtBQUssNEJBQTRCLEVBQUU7O3dCQUNwQyxHQUFHLEdBQUcsS0FBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTs7OztvQkFBQyxVQUFDLENBQU0sSUFBSyxPQUFBLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBbkIsQ0FBbUIsRUFBQztvQkFDOUUsSUFBSSxHQUFHLEVBQUU7d0JBQ0wsR0FBRyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO3dCQUN4QixHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7d0JBQ3RCLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQzt3QkFDcEIsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO3dCQUNwQixHQUFHLENBQUMsTUFBTSx3QkFBTyxDQUFDLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDO3dCQUNqQyxHQUFHLENBQUMsV0FBVyx3QkFBTyxDQUFDLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQyxDQUFDO3dCQUMzQyxZQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUN4QjtpQkFDSjtZQUNMLENBQUMsRUFBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLFlBQVUsQ0FBQyxDQUFDO1NBQy9CO1FBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRS9CLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDeEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLG9CQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRCxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUU7O2dCQUNSLFVBQVUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFOztnQkFDM0UsU0FBUyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDL0UsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRyxVQUFVLEVBQUUsQ0FBQztTQUM1RTthQUFNO1lBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1NBQy9CO1FBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUksT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUN6RixDQUFDOzs7OztJQUVELDhDQUFhOzs7O0lBQWIsVUFBYyxNQUFZO1FBQ3RCLElBQUksTUFBTSxFQUFFO1lBQ1IsTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQzVCO1FBRUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUN4QyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksb0JBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWxELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRTtZQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRztnQkFDckIsUUFBUSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2pGLFNBQVMsRUFBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2FBQ3hGLENBQUM7U0FDTDtRQUVELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEtBQUssU0FBUyxFQUFFO1lBQ3pDLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUMzRztRQUVELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBQyxDQUFDLENBQUM7SUFDL0csQ0FBQzs7Z0JBL2JKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQywwNUhBQThDO29CQThJOUMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7NkJBNUlqQyw0cElBMElDO2lCQUdSOzs7O2dCQXZKaUUsUUFBUTtnQkFBakUsaUJBQWlCOzs7NkJBMEpyQixLQUFLOzBCQUVMLEtBQUs7eUJBRUwsS0FBSztnQ0FFTCxLQUFLO3NCQUVMLEtBQUs7c0JBRUwsV0FBVyxTQUFDLE9BQU87NEJBRW5CLFNBQVMsU0FBQyxjQUFjO3dCQUN4QixTQUFTLFNBQUMsT0FBTzs4QkFDakIsU0FBUyxTQUFDLFdBQVc7K0JBRXJCLE1BQU07K0JBQ04sTUFBTTt5QkFDTixNQUFNO3lCQUNOLE1BQU07MkJBQ04sTUFBTTswQkFrQk4sWUFBWSxTQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQzsrQkFhaEMsWUFBWSxTQUFDLG9CQUFvQixFQUFFLENBQUMsUUFBUSxDQUFDO2lDQVE3QyxZQUFZLFNBQUMsc0JBQXNCLEVBQUUsQ0FBQyxRQUFRLENBQUM7b0NBUS9DLFlBQVksU0FBQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUM7O0lBeU92Qyw2QkFBQztDQUFBLEFBaGNELElBZ2NDO1NBOVNZLHNCQUFzQjs7O0lBRS9CLDRDQUE4Qjs7Ozs7SUFFOUIseUNBQXNCOzs7OztJQUV0Qix3Q0FBcUI7Ozs7O0lBRXJCLCtDQUE4Qjs7SUFFOUIscUNBQWlCOztJQUVqQixxQ0FBOEQ7O0lBRTlELDJDQUFpRDs7SUFDakQsdUNBQXNDOztJQUN0Qyw2Q0FBZ0Q7O0lBRWhELDhDQUE0Qzs7SUFDNUMsOENBQTRDOztJQUM1Qyx3Q0FBc0M7O0lBQ3RDLHdDQUFzQzs7SUFDdEMsMENBQXdDOztJQUV4Qyx5Q0FBYTs7SUFDYiw0Q0FBbUI7O0lBRW5CLDhDQUFnQzs7SUFDaEMsMkNBQXlCOztJQUN6QixzQ0FBYTs7Ozs7SUFDYiwwQ0FBa0M7Ozs7O0lBRWxDLDBDQUEyQjs7Ozs7SUFFZiwwQ0FBMEI7O0lBQUUsb0NBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBIb3N0QmluZGluZywgSW5qZWN0b3IsIElucHV0LCBPbkluaXQsXHJcbiAgICAgICAgT3V0cHV0LCBWaWV3RW5jYXBzdWxhdGlvbiwgSG9zdExpc3RlbmVyLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9zaW1wbGUtY29sdW1ucy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZXM6IFtcclxuICAgICAgICBgXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIHtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICB0b3A6IDEwMHB4O1xyXG4gICAgICAgICAgICByaWdodDogMHB4O1xyXG4gICAgICAgICAgICB6LWluZGV4OiAxMDAwMDtcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTAwcHgpO1xyXG4gICAgICAgICAgICB3aWR0aDogNDY4cHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNFNkU5RjA7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHggMCAwIDEwcHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGU6Zm9jdXMge1xyXG4gICAgICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5oZWFkZXIge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4O1xyXG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0VBRURGMztcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgICAgICAgICBjb2xvcjogIzJEMkYzMztcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5oZWFkZXIgLnRpdGxlIHtcclxuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMXB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDpib2xkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUgLmhlYWRlciAuY2xvc2VkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aWR0aDogNTBweDtcclxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUgLmNvbnRlbnQgLmNvdW50e2ZvbnQtc2l6ZTogMTRweDsgY29sb3I6ICMyRDJGMzM7fVxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzLXNpbXBsZSAuY29udGVudCAudGlwIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogI0Y3RkFGRjsgYm9yZGVyLXJhZGl1czogNnB4O2xpbmUtaGVpZ2h0OiA0MnB4OyBwYWRkaW5nLWxlZnQ6IDEwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUgLmNvbnRlbnQgLmNoZWNrYWxse1xyXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjMDA4OUZGO1xyXG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzLXNpbXBsZSAuY29udGVudCB7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMjBweCAyNHB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5mb290ZXIge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDMycHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMjBweDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAuc21vb3RoLWRuZC1naG9zdC5mb3JtYXQtc2V0dGluZy1jb2x1bW4ge1xyXG4gICAgICAgICAgICB6LWluZGV4OiA5OTk5OTk5OTkgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U3ZjFmZjtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzJhODdmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnNtb290aC1kbmQtZ2hvc3QuZm9ybWF0LXNldHRpbmctY29sdW1uIC5maWVsZC1kcmFnLWhhbmRsZSB7XHJcbiAgICAgICAgICAgIGZsb2F0OiByaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlICAuc21vb3RoLWRuZC1kcm9wLXByZXZpZXctY29uc3RhbnQtY2xhc3Mge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGVlMWVhO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUgLmZvcm1hdC1zZXR0aW5nLWNvbHVtbiB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZiZmQ7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2YyZjRmODtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICBjb2xvcjogIzAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5mb3JtYXQtc2V0dGluZy1jb2x1bW4uYWN0aXZlIHtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzJhODdmZjtcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogI2U3ZjFmZjtcclxuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMyYTg3ZmYhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzJhODdmZiFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZm9ybWF0LXNldHRpbmctY29sdW1uIC5jaGVja2JveHtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgICBjb2xvcjogIzAwODlGRjtcclxuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbiAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5mb3JtYXQtc2V0dGluZy1jb2x1bW4gLmZpZWxkLWRyYWctaGFuZGxle1xyXG4gICAgICAgICAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICAgICAgICAgIGN1cnNvcjogZ3JhYjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzLXNpbXBsZSAuZm9ybWF0LXNldHRpbmctY29sdW1uIC5maWVsZC1kcmFnLWhhbmRsZTphY3RpdmV7XHJcbiAgICAgICAgICAgIGN1cnNvcjogZ3JhYmJpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUgLmxpc3QtZ3JvdXAtZmx1c2g6bGFzdC1jaGlsZCAubGlzdC1ncm91cC1pdGVtOmxhc3QtY2hpbGQge1xyXG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2YyZjRmODtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzLXNpbXBsZSAubGlzdC1ncm91cC1mbHVzaDpmaXJzdC1jaGlsZCAubGlzdC1ncm91cC1pdGVtOmZpcnN0LWNoaWxkIHtcclxuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNmMmY0Zjg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUgLmJ1dHRvbnNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5idXR0b25zIGJ1dHRvbiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2NnB4O2hlaWdodDogMzJweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5idXR0b25zIC5jYW5jZWwge1xyXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMTJweDttYXJnaW4tcmlnaHQ6IDhweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlIC5idXR0b25zIC5vayB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDBweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzLXNpbXBsZSAuYnV0dG9ucyAuYWR2YW5jZWR7IHdpZHRoOiA2NnB4O2hlaWdodDogMzJweDsgZmxvYXQ6IGxlZnQ7IH1cclxuXHJcbiAgICAgICAgLmYtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlLWhvc3Qge1xyXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHRvcDogMDtcclxuICAgICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgICAgei1pbmRleDogMTAwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mLWRhdGFncmlkLXNldHRpbmdzLXNpbXBsZSAudmlzaWJsZS1jb2xzLWNvdW50IHtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2ltcGxlQ29sdW1uc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgQElucHV0KCkgc2VhcnRUeXBlczogYW55ID0gW107XHJcbiAgICAvKiog5omA5pyJ5YiXICovXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zID0gW107XHJcbiAgICAvKiog5pi+56S655qE5YiXICovXHJcbiAgICBASW5wdXQoKSBmaWVsZHMgPSBbXTtcclxuICAgIC8qKiDngrnlh7vkvqfovrnmoLflvI/ku6XlpJbnmoTljLrln5/pmpDol4/pnaLmnb/jgILpu5jorqTkuLogdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgY2xpY2tUb0hpZGRlbiA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgdG9wID0gMDtcclxuXHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgY2xzID0gJ2YtZGF0YWdyaWQtc2V0dGluZ3Mtc2ltcGxlLWhvc3QnO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NvbGNvbnRhaW5lcicpIGNvbnRhaW5lcjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ29rYnRuJykgYnRuT2s6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dFdvcmQnKSBzZWFyY2hJbnB1dDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAT3V0cHV0KCkgZm9ybWF0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGZpZWxkc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzdWJtaXQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2xvc2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGFkdmFuY2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIGFsbENvbHMgPSBbXTtcclxuICAgIGNvbHVtblR5cGUgPSAnYWxsJztcclxuXHJcbiAgICBncmlkSW5zdGFuY2U6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gICAgbG9jYWxlU2VyOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgaXNFbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlcjogTWVzc2FnZXJTZXJ2aWNlO1xyXG5cclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IGFueSA9IHt9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLCBwdWJsaWMgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXIgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlLCBudWxsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudCddKVxyXG4gICAgb25DbGljaygkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygkZXZlbnQpO1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBjbHNuYW1lID0gJGV2ZW50LnRhcmdldFsnY2xhc3NOYW1lJ10gfHwgJyc7XHJcbiAgICAgICAgaWYgKGNsc25hbWUuaW5kZXhPZignZi1kYXRhZ3JpZC1zZXR0aW5ncy1zaW1wbGUtaG9zdCcpID4gLTEpIHtcclxuICAgICAgICAgICAgLy8g6ZqQ6JeP5L6n6L655qCP77ybXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNsaWNrVG9IaWRkZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCd3aW5kb3c6a2V5ZG93bi5lc2MnLCBbJyRldmVudCddKVxyXG4gICAgb25Fc2NLZXlkb3duKCRldmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21vZGFsLWNvbnRhaW5lcicpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignd2luZG93OmtleWRvd24uZW50ZXInLCBbJyRldmVudCddKVxyXG4gICAgb25FbnRlcktleWRvd24oJGV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbW9kYWwtY29udGFpbmVyJykpIHtcclxuICAgICAgICAgICAgdGhpcy5vblN1Ym1pdENsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKVxyXG4gICAgb25Db250cm9sR0tleWRvd24oJGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCRldmVudC5jdHJsS2V5ICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtb2RhbC1jb250YWluZXInKSkge1xyXG4gICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoJGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSAnZycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FkdmFuY2VkKCRldmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSAncicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZXR0aW5nUmVzZXQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09ICdzJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hJbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hbGxDb2xzID0gdGhpcy5jb2x1bW5zWzBdO1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0gdGhpcy5nZXRWaWV3Q29sdW1ucygpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFZpZXdDb2x1bW5zKCkge1xyXG4gICAgICAgIC8vIOWkmuihqOWktFxyXG4gICAgICAgIGxldCB2aXNpYmxlQ2xzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucy5sZW5ndGggPiAxICkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChjb2xzID0+IHtcclxuICAgICAgICAgICAgICAgIHZpc2libGVDbHMgPSB2aXNpYmxlQ2xzLmNvbmNhdCh0aGlzLl9nZXRWaWV3Q29sdW1ucyhjb2xzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZpc2libGVDbHMgPSB0aGlzLmNvbHVtbnNbMF0uZmlsdGVyKG4gPT4gKG4udmlzaWJsZSB8fCBuLnZpc2libGUgPT09IHVuZGVmaW5lZCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc2libGVDbHMubWFwKG4gPT4gbi5maWVsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0Vmlld0NvbHVtbnMoY29sczogYW55W10pIHtcclxuICAgICAgICByZXR1cm4gY29scy5maWx0ZXIoYyA9PiAhYy5jb2xzcGFuICYmIChjLnZpc2libGUgfHwgYy52aXNpYmxlID09PSB1bmRlZmluZWQpKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g5qC55o2u5YiX55qE57G75Z6L6L+b6KGM562b6YCJ6L+H5ruk77yMXHJcbiAgICAvLyBhbGwg5omA5pyJ5YiXXHJcbiAgICAvLyB2aXNpYmxlIOWPr+ingeWIl1xyXG4gICAgLy8gaGlkZGVuIOmakOiXj+WIl1xyXG4gICAgLy8gZ3JvdXAg5YiG57uE5YiXXHJcbiAgICBmaWx0ZXJDb2x1bW5zKGN0OiBzdHJpbmcsIHNlYXJjaFdvcmRzID0gJycpIHtcclxuICAgICAgICBsZXQgY29scyA9IFtdO1xyXG4gICAgICAgIHN3aXRjaCAoY3QpIHtcclxuICAgICAgICAgICAgY2FzZSAndmlzaWJsZSc6XHJcbiAgICAgICAgICAgICAgICBjb2xzID0gdGhpcy5jb2x1bW5zWzBdLmZpbHRlcihuID0+IHRoaXMuZmllbGRzLmluZGV4T2Yobi5maWVsZCkgPiAtMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnaGlkZGVuJzpcclxuICAgICAgICAgICAgICAgIGNvbHMgPSB0aGlzLmNvbHVtbnNbMF0uZmlsdGVyKG4gPT4gdGhpcy5maWVsZHMuaW5kZXhPZihuLmZpZWxkKSA9PT0gLTEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb2xzID0gdGhpcy5jb2x1bW5zWzBdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VhcmNoV29yZHMpIHtcclxuICAgICAgICAgICAgY29scyA9IGNvbHMuZmlsdGVyKGMgPT4gYy50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoV29yZHMpID4gLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hbGxDb2xzID0gY29scztcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHByaXZhdGUgb25GaWVsZHNDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMuZmllbGRzQ2hhbmdlLmVtaXQodGhpcy5maWVsZHMpO1xyXG4gICAgfVxyXG4gICAgb25EYmxDbGljaygkZXZlbnQsIGNvbCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfmmL7npLrkuI7pmpDol4/liIfmjaLkuovku7YnLCBjb2wpO1xyXG4gICAgICAgIHRoaXMub25DaGVja2JveENsaWNrKCRldmVudCwgY29sKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoZWNrYm94Q2xpY2soJGV2ZW50LCBjb2wpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygn5pi+56S65LiO6ZqQ6JeP5YiH5o2i5LqL5Lu2JywgY29sKTtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpZWxkcy5pbmRleE9mKGNvbC5maWVsZCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLmZpZWxkcy5wdXNoKGNvbC5maWVsZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5maWVsZHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29sdW1uc1swXS5mb3JFYWNoKGYgPT4ge1xyXG4gICAgICAgICAgICBmLnZpc2libGUgPSB0aGlzLmZpZWxkcy5pbmRleE9mKGYuZmllbGQpID4gLTE7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZmllbGRzID0gdGhpcy5jb2x1bW5zWzBdLmZpbHRlcihuID0+IG4udmlzaWJsZSkubWFwKG4gPT4gbi5maWVsZCk7XHJcblxyXG4gICAgICAgIHRoaXMub25GaWVsZHNDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VhcmNoQ29sdW1uKCRldmVudCwgY3QpIHtcclxuICAgICAgICBjb25zdCB0eHQgPSAkZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyQ29sdW1ucyhjdCwgdHh0KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkZpZWxkRHJvcChmaWVsZEluZm8sIGN0LCB0eHQsIHVsRWxSZWY6IGFueSkge1xyXG4gICAgICAgLy8gY29uc29sZS5sb2coJ2Ryb3AnLCBmaWVsZEluZm8pO1xyXG4gICAgICAgIGNvbnN0IHsgcmVtb3ZlZEluZGV4LCBhZGRlZEluZGV4IH0gPSBmaWVsZEluZm87XHJcblxyXG4gICAgICAgIGNvbnN0IG1vdmVJdGVtID0gdGhpcy5hbGxDb2xzW3JlbW92ZWRJbmRleF07XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRoaXMuYWxsQ29sc1thZGRlZEluZGV4XTtcclxuXHJcbiAgICAgICAgY29uc3QgbW92ZUl0ZW1JbmRleCA9IHRoaXMuY29sdW1uc1swXS5maW5kSW5kZXgobiA9PiBuLmZpZWxkID09PSBtb3ZlSXRlbS5maWVsZCk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbUluZGV4ID0gdGhpcy5jb2x1bW5zWzBdLmZpbmRJbmRleChuID0+IG4uZmllbGQgPT09IHRhcmdldEl0ZW0uZmllbGQpO1xyXG5cclxuICAgICAgICBjb25zdCByZW1vdmVkSXRlbSA9IHRoaXMuY29sdW1uc1swXS5zcGxpY2UobW92ZUl0ZW1JbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zWzBdLnNwbGljZSh0YXJnZXRJdGVtSW5kZXgsIDAsIC4uLnJlbW92ZWRJdGVtKTtcclxuXHJcbiAgICAgICAgdGhpcy5maWVsZHMgPSB0aGlzLmNvbHVtbnNbMF0uZmlsdGVyKG4gPT4gbi52aXNpYmxlKS5tYXAobiA9PiBuLmZpZWxkKTtcclxuICAgICAgICB0aGlzLm9uRmllbGRzQ2hhbmdlZCgpO1xyXG5cclxuICAgICAgICB0aGlzLmZpbHRlckNvbHVtbnMoY3QsIHR4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAwOiAx5Liq5Lmf5rKh5pyJ6YCJ5Lit77ybIDE6IOWFqOmDqOmAieS4re+8myAyOiDmnInpgInkuK3nmoTkuZ/mnInmsqHpgInkuK3nmoRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRDaGVja0FsbFN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZpZWxkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRzLmxlbmd0aCA9PT0gdGhpcy5jb2x1bW5zWzBdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hlY2tBbGxDbGljaygkZXZlbnQsIGN0LCB0eHQpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuZ2V0Q2hlY2tBbGxTdGF0ZSgpO1xyXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gMCB8fCBzdGF0ZSA9PT0gMikge1xyXG4gICAgICAgICAgICAvLyDmiafooYzlhajpgIlcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zWzBdLmZvckVhY2gobiA9PiBuLnZpc2libGUgPSB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5maWVsZHMgPSB0aGlzLmNvbHVtbnNbMF0ubWFwKG4gPT4gbi5maWVsZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5Y+W5raI5YWo6YCJXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc1swXS5mb3JFYWNoKG4gPT4gbi52aXNpYmxlID0gZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmZpZWxkcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vbkZpZWxkc0NoYW5nZWQoKTtcclxuICAgICAgICB0aGlzLmZpbHRlckNvbHVtbnMoY3QsIHR4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoJGV2ZW50PzogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGlmICgkZXZlbnQpIHtcclxuICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsb3NlZC5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0FkdmFuY2VkKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoJGV2ZW50KTtcclxuICAgICAgICB0aGlzLmFkdmFuY2VkLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNldHRpbmdSZXNldCgkZXZlbnQ/OiBhbnkpIHtcclxuICAgICAgICBpZiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdG9yRGVmYXVsdFRleHQgPSB0aGlzLmxvY2FsZVNlci5nZXRWYWx1ZSgnZGF0YWdyaWQuc2V0dGluZ3MucmVzdG9yZURlZmF1bHRTZXR0aW5nc1RleHQnKSB8fCAn56Gu6K6k6KaB5oGi5aSN6buY6K6k6K6+572u5ZCX77yfJztcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyLmNvbmZpcm0ocmVzdG9yRGVmYXVsdFRleHQpLnN1YnNjcmliZSgodDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldDJEZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0MkRlZmF1bHQoKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ3JpZEluc3RhbmNlLmRmc1snX3N0YXRlJ10uaW5pdGlhbE9wdGlvbnM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29sdW1uRmllbGRzICYmIG9wdGlvbnMuY29sdW1uRmllbGRzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV3Q29sdW1ucyA9IFtdO1xyXG4gICAgICAgICAgICBvcHRpb25zLmNvbHVtbkZpZWxkcy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGMuZmllbGQgIT09ICdfZGF0YWdyaWQtc2V0dGluZy1jb250cm9sXycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmdyaWRJbnN0YW5jZS5jb2x1bW5zWzBdLmZpbmQoKG46IGFueSkgPT4gbi5maWVsZCA9PT0gYy5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wudmlzaWJsZSA9IGMudmlzaWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLmhhbGlnbiA9IGMuaGFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuYWxpZ24gPSBjLmFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wud2lkdGggPSBjLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuZm9vdGVyID0gey4uLmMuZm9vdGVyIHx8IHt9fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLmdyb3VwRm9vdGVyID0gey4uLmMuZ3JvdXBGb290ZXIgfHwge319O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2x1bW5zLnB1c2goY29sKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW25ld0NvbHVtbnNdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hbGxDb2xzID0gdGhpcy5jb2x1bW5zWzBdO1xyXG5cclxuICAgICAgICB0aGlzLmZpZWxkcyA9IHRoaXMuZ2V0Vmlld0NvbHVtbnMoKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzLnZpZXdDb2x1bW5zID0gdGhpcy5maWVsZHM7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jb2x1bW5Gb3JtYXQgPSBbLi4udGhpcy5jb2x1bW5zWzBdXTtcclxuICAgICAgICBpZiAob3B0aW9ucy5zb3J0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRPcmRlcnMgPSBvcHRpb25zLnNvcnQuc29ydE9yZGVyPyBvcHRpb25zLnNvcnQuc29ydE9yZGVyLnNwbGl0KCcsJykgOiBbXTtcclxuICAgICAgICAgICAgY29uc3Qgc29ydE5hbWVzID0gb3B0aW9ucy5zb3J0LnNvcnROYW1lID8gb3B0aW9ucy5zb3J0LnNvcnROYW1lLnNwbGl0KCcsJykgOiBbXTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zb3J0SW5mbyA9IHsgc29ydE5hbWU6IHNvcnROYW1lcywgc29ydE9yZGVyOiAgc29ydE9yZGVycyB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc29ydEluZm8gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5ncm91cEZpZWxkcyA9ICBvcHRpb25zLmdyb3VwRmllbGQgPyBvcHRpb25zLmdyb3VwRmllbGQuc3BsaXQoJywnKSA6IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VibWl0Q2xpY2soJGV2ZW50PzogYW55KSB7XHJcbiAgICAgICAgaWYgKCRldmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldHRpbmdzLnZpZXdDb2x1bW5zID0gdGhpcy5maWVsZHM7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jb2x1bW5Gb3JtYXQgPSBbLi4udGhpcy5jb2x1bW5zWzBdXTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnNvcnRJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc29ydEluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0TmFtZTogdGhpcy5ncmlkSW5zdGFuY2Uuc29ydE5hbWUgPyB0aGlzLmdyaWRJbnN0YW5jZS5zb3J0TmFtZS5zcGxpdCgnLCcpIDogW10sXHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICB0aGlzLmdyaWRJbnN0YW5jZS5zb3J0T3JkZXIgPyB0aGlzLmdyaWRJbnN0YW5jZS5zb3J0T3JkZXIuc3BsaXQoJywnKSA6IFtdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5ncm91cEZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZ3JvdXBGaWVsZHMgPSB0aGlzLmdyaWRJbnN0YW5jZS5ncm91cEZpZWxkID8gdGhpcy5ncmlkSW5zdGFuY2UuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpIDogW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdC5lbWl0KHtjb250ZW50OiB0aGlzLnNldHRpbmdzLCBjbG9zZTogdGhpcy5jbG9zZS5iaW5kKHRoaXMpLCB0YXJnZXQ6IHRoaXMuYnRuT2submF0aXZlRWxlbWVudH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==