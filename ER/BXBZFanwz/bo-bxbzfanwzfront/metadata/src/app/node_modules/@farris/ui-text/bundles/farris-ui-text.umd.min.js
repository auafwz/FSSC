!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/forms"),require("@angular/core"),require("@angular/common"),require("@farris/ui-locale"),require("@farris/ui-common/number"),require("@farris/ui-common/date")):"function"==typeof define&&define.amd?define("@farris/ui-text",["exports","@angular/forms","@angular/core","@angular/common","@farris/ui-locale","@farris/ui-common/number","@farris/ui-common/date"],e):e((t.farris=t.farris||{},t.farris["ui-text"]={}),t.ng.forms,t.ng.core,t.ng.common,t.uiLocale,t.number,t.date)}(this,function(t,e,n,i,o,r,s){"use strict";var a=(u.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[]},u.ngInjectableDef=n.defineInjectable({factory:function(){return new u},token:u,providedIn:"root"}),u);function u(){}var p=(Object.defineProperty(h.prototype,"showType",{get:function(){return this._tshowType},set:function(t){4==(this._tshowType=t)&&(this.dateRange=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"value",{get:function(){return this.text},set:function(t){this.text=this.formatValue(t),this.textChange.emit(this.text)},enumerable:!0,configurable:!0}),h.prototype.changeTitle=function(t){this.isTextArea||this.isPassword||this.mouseEnterChangeTitle()},Object.defineProperty(h.prototype,"option",{get:function(){return this._option},set:function(t){this._option=t},enumerable:!0,configurable:!0}),h.prototype.ngOnInit=function(){},h.prototype.ngOnDestroy=function(){},h.prototype.ngAfterViewInit=function(){},h.prototype.mouseEnterChangeTitle=function(){this.textInnerEl.nativeElement.scrollHeight>this.textInnerEl.nativeElement.clientHeight?this.staticTitle=this.text&&0<this.text.length?this.text:this.control:this.staticTitle=""},h.prototype.formatLang=function(t){return t&&t[this.currentLanguage]?t[this.currentLanguage]:""},h.prototype.getFormatNumberValue=function(t){if(!this.format&&!this._option)return t.toString();if(this._option&&this._option.type&&"number"==this._option.type){if(this._option.formatter)return this._option.formatter(t);this._option.useThousands?this._option.precision!=undefined?this.format="n"+this._option.precision:this.format="n2":this._option.precision!=undefined?this.format="f"+this._option.precision:this.format="f2"}var e,i=this.currencyToUpperCase(this.format.substring(0,1)),r=Number(this.format.substring(1)),n={};if(/C|D|F|N|P/g.test(i)){switch(this.thousand&&Object.assign(n,{thousand:this.thousand}),this.decimal&&Object.assign(n,{decimal:this.decimal}),this.expression&&Object.assign(n,{format:this.expression}),i){case"C":Object.assign(n,{prefix:this.currencySymbol,precision:r}),e=this.numberHelper.formatMoney(t,n);break;case"D":e=this.toDecimal(t,r);break;case"F":Object.assign(n,{prefix:"",thousand:"",precision:r}),e=this.numberHelper.formatMoney(t,n);break;case"N":Object.assign(n,{prefix:"",precision:r}),e=this.numberHelper.formatMoney(t,n);break;case"P":e=this.toPercent(t,r)}return e}console.warn("不支持format为 "+this.format+" 类型的数字格式化")},h.prototype.toDecimal=function(t,e){if(!(-1<t.toString().indexOf(".")))return(Array(e).join(this.filledSymbol)+t).slice(-e);console.warn("十进制转换仅限整型类型")},h.prototype.toPercent=function(t,e){return Number(100*t).toFixed(Number(e))+"%"},h.prototype.currencyToUpperCase=function(t){return t.replace(/[a-z]+/g,function(t){return t.toUpperCase()})},h.prototype.dateToUpperCase=function(t){var e;return e=!0===/Y/g.test(t)?t.replace(/Y/g,"y"):t,!0===/D/g.test(e)&&(e=e.replace(/D/g,"d")),e},h.prototype.getFormatEnumValue=function(t){var i=this;if(t==undefined||null===t||""===t)return"";if(this.data&&this.data.length){for(var r=(""+t).split(this.enumDelimiter),n=[],e=function(e){var t=o.data.find(function(t){return t[i.valueField]==r[e]});t?n.push(t[o.textField]):n.push(r[e])},o=this,s=0;s<r.length;s++)e(s);return 0<n.length?n.join(this.enumDelimiter):""}return t},h.prototype.getFormatCheckBoxValue=function(t){return!0===t?this.localeService.getValue("text.yes"):!1===t||null==t||void 0===t?this.localeService.getValue("text.no"):t},h.prototype.timeFormatTo=function(t,e,i){void 0===i&&(i=12)},h.prototype.makeFormater=function(t){return t},h.prototype.dateformat=function(t){return this.format||(this.format="YYYY-MM-DD"),this.returnFormat&&"yyyy-MM-dd"!=this.returnFormat&&"string"==typeof t&&(t=this.getDateFromFormatedString(t,this.returnFormat)),"hh:mm:ss"===this.format||"HH:mm:ss"===this.format?t:this.dtHelper.formatTo(t,this.dateToUpperCase(this.format))},h.prototype.getDateFromFormatedString=function(n,t){var o={year:0,month:0,day:0,hour:0,minite:0,second:0};return n&&t.replace(/y+|Y+|M+|d+|D+|h+|H+|m+|s+/g,function(t,e,i,r){n.substring(e).replace(/\d+/,function(t){r=parseInt(t,10)}),/y+/i.test(t)&&!o.year&&(o.year=r),/M+/.test(t)&&!o.month&&(o.month=r),/d+/i.test(t)&&!o.day&&(o.day=r),/h+/i.test(t)&&!o.hour&&(o.hour=r),/m+/.test(t)&&!o.minite&&(o.minite=r),/s+/.test(t)&&!o.second&&(o.second=r)}),new Date(o.year+"/"+o.month+"/"+o.day+" "+o.hour+":"+o.minite+":"+o.second)},h.prototype.formatValue=function(t){var e,i=this;if(this.currentLanguage)return this.formatLang(t);if("boolean"!==this.type&&(null==t||void 0===t))return"";switch(this.type){case"string":e=t;break;case"date":case"datetime":if(this.dateRange){var r=t.split(this.dateRangeDelimiter),n=[];r&&r.length&&r.forEach(function(t){var e=i.dateformat(t);n.push(e)}),e=n.join(this.dateRangeDelimiter)}else e=this.dateformat(t);break;case"number":e=this.getFormatNumberValue(t);break;case"enum":e=this.getFormatEnumValue(t);break;case"boolean":e=this.getFormatCheckBoxValue(t)}return e},h.prototype.setText2Star=function(t){if(this.isPassword){var e=t?"******":"";return this.text=e,this.control=e,!0}return!1},h.prototype.writeValue=function(t){if(!this.setText2Star(t)){if(this.beforeWriteValue){var e={localizationType:this.localizationType,showTime:this.showTime,ref:this},i=this.beforeWriteValue(t,e);if(i!==undefined)return void(this.text=i)}this.control=this.formatValue(t),this.controlChange(t)}},h.prototype.registerOnChange=function(t){this.controlChange=t},h.prototype.registerOnTouched=function(t){this.controlTouch=t},h.decorators=[{type:n.Component,args:[{selector:"farris-text",template:"\n        <span #textInner\n            [ngClass]=\"{'f-form-control-text':!isTextArea,'f-form-control-textarea':isTextArea,'f-component-text-auto-size': this.autoSize}\"\n            [title]=\"staticTitle\" [style.text-align]=\"textAlign\"\n            [style.height]=\"!autoSize&&height>0?height+'px':null\" [style.minHeight]=\"autoSize&&height>0?height+'px':null\"\n            [style.maxHeight]=\"autoSize&&maxHeight>0?maxHeight+'px':null\">{{text && text.length > 0 ?  text : control}}</span>\n    ",providers:[{provide:e.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return h}),multi:!0}]}]}],h.ctorParameters=function(){return[{type:s.DateTimeHelperService},{type:r.NumberHelperService},{type:n.Injector},{type:n.NgZone}]},h.propDecorators={cls:[{type:n.HostBinding,args:["class.f-component-text"]}],textInnerEl:[{type:n.ViewChild,args:["textInner",{read:n.ElementRef}]}],textChange:[{type:n.Output}],isPassword:[{type:n.Input}],isTextArea:[{type:n.Input}],autoSize:[{type:n.Input}],maxHeight:[{type:n.Input}],height:[{type:n.Input}],type:[{type:n.Input}],dateRange:[{type:n.Input}],format:[{type:n.Input}],lang:[{type:n.Input}],data:[{type:n.Input}],thousand:[{type:n.Input}],decimal:[{type:n.Input}],expression:[{type:n.Input}],currentLanguage:[{type:n.Input}],showTime:[{type:n.Input}],textField:[{type:n.Input}],valueField:[{type:n.Input}],returnFormat:[{type:n.Input}],textAlign:[{type:n.Input}],dateRangeDelimiter:[{type:n.Input}],enumDelimiter:[{type:n.Input}],showType:[{type:n.Input}],localizationType:[{type:n.Input}],filledSymbol:[{type:n.Input}],value:[{type:n.Input}],changeTitle:[{type:n.HostListener,args:["mouseenter",["$event"]]}],showTitle:[{type:n.Input}],option:[{type:n.Input}]},h);function h(t,e,i,r){this.dtHelper=t,this.numberHelper=e,this.injector=i,this.ngzone=r,this.cls=!0,this.textChange=new n.EventEmitter,this.isPassword=!1,this.isTextArea=!1,this.autoSize=!1,this.height=0,this.dateRange=!1,this.thousand=",",this.decimal=".",this.expression="%s%v",this.textField="name",this.valueField="value",this.returnFormat="",this.dateRangeDelimiter="~",this.enumDelimiter=",",this._tshowType=0,this.currencySymbol="￥",this.filledSymbol="0",this.staticTitle="",this.showTitle=!1,this.beforeWriteValue=null,this.controlChange=function(t){},this.controlTouch=function(t){},this.localeService=this.injector.get(o.LocaleService)}var c=(l.decorators=[{type:n.NgModule,args:[{declarations:[p],imports:[i.CommonModule,o.LocaleModule,r.NumberHelperModule,s.DateHelperModule],exports:[p]}]}],l);function l(){}t.StaticTextControlService=a,t.TextComponent=p,t.TextModule=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-text.umd.min.js.map