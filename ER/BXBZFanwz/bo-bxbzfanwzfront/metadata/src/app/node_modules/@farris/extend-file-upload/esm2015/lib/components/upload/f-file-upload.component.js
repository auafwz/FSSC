/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/upload/f-file-upload.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, HostBinding, ViewChild, EventEmitter, Output, ContentChild, ElementRef } from '@angular/core';
import { FFileSelectDirective, FFileDropDirective, FFileUploadDirective } from '../../directive/index';
import { FFileUtils } from '../../utils/index';
import { FFileUploadAPIService, FFileUploaderService } from '../../service/index';
import { NotifyService } from '@farris/ui-notify';
import { Observable, Subject } from 'rxjs';
import { trigger, style, state, animate, transition } from '@angular/animations';
import { NgZone } from '@angular/core';
export class FFileUploadComponent {
    /**
     * @param {?} uploadAPISer
     * @param {?} fileUploaderSer
     * @param {?} notifyService
     * @param {?} ngZone
     */
    constructor(uploadAPISer, fileUploaderSer, notifyService, ngZone) {
        this.uploadAPISer = uploadAPISer;
        this.fileUploaderSer = fileUploaderSer;
        this.notifyService = notifyService;
        this.ngZone = ngZone;
        this.cls = true;
        // 启用图片预览
        this.enableImagePreview = true;
        // 启用立即上传
        this.uploadImmediately = false;
        // 上传完成后隐藏
        this.uploadedThenHide = true;
        // 禁用状态
        this.disabled = false;
        this.tVisible = true;
        // 需要重置,通过不断的赋值来改变
        this.needReset = new Subject();
        // 启用拖拽
        this.enableDrop = false;
        this.dropText = "可将文件拖拽此处";
        // 启用选择文件按钮
        this.enableSelect = true;
        this.selectText = "点击上传";
        // 启用多选
        this.multiple = true;
        // 已经上传文件
        this.uploadedCount = 0;
        // 宽度阈值，当宽度超过760时候，没有附件上传时，宽度是固定值，有附件上传时，有最大宽度值
        this.widthThreshold = 760;
        // 上传和删除对外抛出的事件
        this.fUploadDoneEvent = new EventEmitter();
        this.fUploadRemovedEvent = new EventEmitter();
        // 允许上传的文件类型
        this.allowedContentTypes = '*';
        // 默认不限制附件上传个数
        this.maxUploads = 0;
        // 单位KB，默认是12M
        this.maxFileSize = '12MB';
        this.selfUploadOpts = {};
        // 控制是否显示追加附件的面板
        this.showAppendPanel = false;
        // 显示loading
        this.showLoading = false;
        this.settings = {
            disabled: this.disabled,
            visible: this.visible
        };
        this.files = [];
        this.uploadSelectInput = new EventEmitter();
        this.uploadDragInput = new EventEmitter();
        // 重置
        this.needReset.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            this.reset();
        }));
    }
    // 不可见
    /**
     * @return {?}
     */
    get visibleState() {
        return !this.visible;
    }
    // 自定义样式
    /**
     * @return {?}
     */
    get selfDirectiveDefine() {
        if (this.fFileUploadDir) {
            return true;
        }
        return false;
    }
    /**
     * @return {?}
     */
    get uploading() {
        return this.files.length > 0;
    }
    // 是否可见
    /**
     * @param {?} value
     * @return {?}
     */
    set visible(value) {
        this.tVisible = value;
        if (!value) {
            this.reset();
        }
    }
    /**
     * @return {?}
     */
    get visible() {
        return this.tVisible;
    }
    ;
    // 上传配置项
    /**
     * @param {?} uploadOpts
     * @return {?}
     */
    set options(uploadOpts) {
        if (uploadOpts) {
            if (uploadOpts.hasOwnProperty('allowedContentTypes')) {
                this.allowedContentTypes = uploadOpts.allowedContentTypes.join(',');
                this.allowedContentTypes = this.allowedContentTypes == '' ? '*' : this.allowedContentTypes;
            }
            if (uploadOpts.hasOwnProperty('maxUploads')) {
                this.maxUploads = uploadOpts.maxUploads;
            }
            if (uploadOpts.hasOwnProperty('maxFileSize')) {
                this.maxFileSize = FFileUtils.humanizeBytes(1024 * 1024 * uploadOpts.maxFileSize);
            }
            this.selfUploadOpts = Object.assign(this.selfUploadOpts, uploadOpts);
        }
    }
    ;
    /**
     * @return {?}
     */
    get options() {
        return this.selfUploadOpts;
    }
    /**
     * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置
     * @param {?} config
     * @return {?}
     */
    set extendServerConfig(config) {
        if (config) {
            this.fileUploaderSer.setExtendServerConfig(config);
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // 模板的情况下只能是立即上传
        if (this.fFileUploadDir) {
            this.uploadImmediately = true;
        }
        this.computeWidthThreshold();
    }
    /**
     * 视图初始化后
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * 触发绑定
     * @param {?} ev
     * @return {?}
     */
    triggerFileSelect(ev) {
        ev && ev.stopPropagation();
        // 禁用时
        if (this.disabled) {
            return false;
        }
        this.fileUpload.elementRef.nativeElement.click();
    }
    /**
     * 选择附件按钮，处理抛出事件
     * @param {?} output
     * @return {?}
     */
    selectUploadOutput(output) {
        this.uploadOutputHandler(output);
    }
    /**
     * 拖拽区域处理抛出事件
     * @param {?} output
     * @return {?}
     */
    dropUploadOutput(output) {
        if (this.enableSelect) {
            return;
        }
        // 暂不处理拖拽的事件
        if (output.type !== 'dragOver' && output.type !== 'dragOut' && output.type !== 'drop') {
            this.uploadOutputHandler(output);
        }
    }
    /**
     * allAddedToQueue 选中文件追加到队列
     * @private
     * @param {?} output
     * @return {?}
     */
    uploadOutputHandler(output) {
        // 显示追加面板
        if (this.showAppendPanel) {
            this.showAppendPanel = false;
        }
        if (output.type === 'addedToQueue' && typeof output.file !== 'undefined') {
            this.files.push({ type: output.type, file: output.file });
            // 如果启用立即上传
            if (this.uploadImmediately) {
                this.showLoading = true;
                this.startUpload(output.file);
            }
        }
        else if (output.type === 'start') {
            // 开始上传
            this.updateFilesState(output, '');
        }
        else if (output.type == 'done') {
            // 上传完成
            this.updateFilesState(output, 'done');
            this.fUploadDoneEvent.emit(FFileUtils.changeUploadFileToFileExtend(output.files));
            this.hideAfterLoaded(output);
            // 隐藏正在加载
            if (this.uploadImmediately && this.showLoading && this.allFileUploaded()) {
                this.showLoading = false;
            }
        }
        else if (output.type === 'cancelled' || output.type === 'removed' || output.type == 'error') {
            // 删除或者移除文件
            this.files = this.files.filter((/**
             * @param {?} fileOutput
             * @return {?}
             */
            (fileOutput) => {
                return output.files.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => fileOutput.file.id == item.id)) < 0;
            }));
            // 隐藏正在加载
            if (this.uploadImmediately && this.showLoading && this.allFileUploaded()) {
                this.showLoading = false;
            }
            this.showNotify(output);
        }
        else if (output.type === 'rejected' && typeof output.file !== 'undefined') {
            // 上传被拒绝
            this.showNotify(output);
            // 隐藏正在加载
            if (this.uploadImmediately && this.showLoading && this.allFileUploaded()) {
                this.showLoading = false;
            }
        }
    }
    /**
     * @private
     * @param {?} output
     * @return {?}
     */
    showNotify(output) {
        /** @type {?} */
        let notifyType = 'warning';
        if (output.type == 'cancelled' || output.type == 'removed') {
            notifyType = 'success';
        }
        /** @type {?} */
        let message = output.hasOwnProperty('message') ? output['message'] : '';
        this.notifyService[notifyType]((/** @type {?} */ ({
            msg: message, timeout: 3000
        })));
    }
    // 判断是否所有文件都已上传
    /**
     * @private
     * @return {?}
     */
    allFileUploaded() {
        /** @type {?} */
        let findNotDoneIndex = this.files.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            /** @type {?} */
            let doneTypes = ['done', 'cancelled', 'removed'];
            /** @type {?} */
            let findTypeIndex = doneTypes.findIndex((/**
             * @param {?} type
             * @return {?}
             */
            type => {
                return type == item.type;
            }));
            return findTypeIndex == -1;
        }));
        return findNotDoneIndex == -1 ? true : false;
    }
    /**
     * 更新附件的状态
     * @private
     * @param {?} output
     * @param {?} eventType
     * @return {?}
     */
    updateFilesState(output, eventType) {
        /** @type {?} */
        let startFiles = [];
        if (output.hasOwnProperty('files') && output.files.length > 0) {
            // 此处更新界面可能有性能问题
            startFiles = output.files;
        }
        else if (typeof output.file !== 'undefined') {
            startFiles = [output.file];
        }
        eventType = eventType ? eventType : output.type;
        startFiles.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            /** @type {?} */
            const index = this.files.findIndex((/**
             * @param {?} fileOutput
             * @return {?}
             */
            fileOutput => typeof item !== 'undefined' && fileOutput.file.id === item.id));
            // 变更状态
            if (index > -1) {
                this.files[index] = { type: eventType, file: item };
            }
        }));
    }
    /**
     * 单个文件上传
     * @param {?} file
     * @return {?}
     */
    startUpload(file) {
        /**
         * Todo:后续可以从上传区块上取内容进行扩展
         * @type {?}
         */
        const event = this.uploadAPISer.getAssignAPI('upload', { file: file, type: 'upload', data: this.extendDatas });
        this.inputUploadEventEmit(event);
    }
    /**
     * 上传所有
     * @return {?}
     */
    startUploadAll() {
        /**
         *  Todo：后续，如果每个数据不一样，此处的数据得重新归集
         * @type {?}
         */
        const event = this.uploadAPISer.getAssignAPI('uploadAll', { type: 'uploadAll', files: [], data: this.extendDatas });
        this.inputUploadEventEmit(event);
    }
    /**
     * 已上传隐藏属性
     * @param {?} output
     * @return {?}
     */
    hideAfterLoaded(output) {
        //上传完成后删除
        if (this.uploadedThenHide) {
            // this.ngZone.runOutsideAngular(() => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                // 删除或者移除文件
                /** @type {?} */
                let ids = output.files.map((/**
                 * @param {?} fileItem
                 * @return {?}
                 */
                fileItem => fileItem.id));
                this.files = this.files.filter((/**
                 * @param {?} fileOutput
                 * @return {?}
                 */
                (fileOutput) => {
                    /** @type {?} */
                    let tIndex = ids.findIndex((/**
                     * @param {?} tId
                     * @return {?}
                     */
                    tId => tId == fileOutput.file.id));
                    return tIndex > -1 ? false : true;
                }));
                /** @type {?} */
                const event = this.uploadAPISer.getAssignAPI('hide', { type: 'hide', id: ids.join(',') });
                this.inputUploadEventEmit(event);
            }), 1000);
            // });
        }
    }
    /**
     * 取消上传
     * @param {?} id
     * @return {?}
     */
    cancelUpload(id) {
        /** @type {?} */
        const event = this.uploadAPISer.getAssignAPI('cancel', { id: id, type: 'cancel' });
        this.inputUploadEventEmit(event);
    }
    /**
     * 删除已上传文件
     * @return {?}
     */
    removelAllUpload() {
        /** @type {?} */
        const event = this.uploadAPISer.getAssignAPI('removeAll', { type: 'removeAll', files: [] });
        this.inputUploadEventEmit(event);
    }
    /**
     * 删除已上传文件
     * @param {?} id
     * @return {?}
     */
    removeFile(id) {
        /** @type {?} */
        const event = this.uploadAPISer.getAssignAPI('remove', { id: id, type: 'remove' });
        this.inputUploadEventEmit(event);
    }
    /** */
    /**
     *
     * @param {?} bytes
     * @return {?}
     */
    formateBytes(bytes) {
        return FFileUtils.humanizeBytes(bytes);
    }
    /**
     * 判断是图片
     * @param {?} type
     * @return {?}
     */
    isImage(type) {
        return type.indexOf('image') > -1;
    }
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     * @return {?}
     */
    judgeContentTypeLimit() {
        /** @type {?} */
        let tTypes = this.allowedContentTypes.split(',');
        /** @type {?} */
        let hasAllIndex = tTypes.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item == '*';
        }));
        return hasAllIndex == -1;
    }
    /**
     * 判断是否有文件大小的限制
     * @return {?}
     */
    judegeFileSizeLimit() {
        return this.maxFileSize != '0 Byte';
    }
    /**
     * 追加
     * @param {?} ev
     * @return {?}
     */
    appendNewFiles(ev) {
        //启用拖拽
        if (this.enableDrop) {
            this.showAppendPanel = true;
        }
        else {
            ev && ev.stopPropagation();
            this.triggerFileSelect(ev);
        }
    }
    /**
     * 关闭追加面板
     * @return {?}
     */
    closeAppendPanel() {
        this.showAppendPanel = false;
    }
    /**
     * 统一触发 附件选择和拖拽附件的事件
     * @private
     * @param {?} ev
     * @return {?}
     */
    inputUploadEventEmit(ev) {
        // 如果文件上传启用
        if (this.enableSelect) {
            this.uploadSelectInput.emit(ev);
        }
        else {
            this.uploadDragInput.emit(ev);
        }
    }
    // 重置方法
    /**
     * @return {?}
     */
    reset() {
        this.files = [];
        // 如果文件上传启用
        if (this.enableSelect) {
            this.fileUpload && this.fileUpload.reset();
        }
        else {
            this.fileDropUpload && this.fileDropUpload.reset();
        }
        this.computeWidthThreshold();
    }
    /**
     * 计算阈值
     * @private
     * @return {?}
     */
    computeWidthThreshold() {
        //
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            let self = this;
            setTimeout((/**
             * @return {?}
             */
            () => {
                /** @type {?} */
                let tNeedComputedCls = false;
                if (self.fFileUploadDir || !self.visible) {
                    tNeedComputedCls = false;
                }
                // 计算元素
                /** @type {?} */
                let assistEl = self.fFileUploadAssist ? self.fFileUploadAssist.nativeElement : null;
                // 超过阈值
                if (assistEl && assistEl.getBoundingClientRect().width > self.widthThreshold) {
                    tNeedComputedCls = true;
                }
                else {
                    tNeedComputedCls = false;
                }
                if (assistEl) {
                    /** @type {?} */
                    let actionFun = tNeedComputedCls ? 'add' : 'remove';
                    assistEl.parentElement.classList[actionFun]('ffileupload-default');
                }
            }), 0);
        }));
    }
}
FFileUploadComponent.decorators = [
    { type: Component, args: [{
                selector: 'f-file-upload',
                template: "<div class=\"ffileupload--assist\" #uploadAssist></div>\r\n<ng-container *ngIf=\"visible\">    \r\n    <ng-container *ngIf=\"enableSelect\">\r\n        <input type=\"file\" class=\"ffileupload--browser\" [disabled]=\"disabled\" FFileSelect [options]=\"options\"\r\n            (uploadOutput)=\"selectUploadOutput($event)\" [uploadInput]=\"uploadSelectInput\" [multiple]=\"multiple\"\r\n            [accept]=\"allowedContentTypes\"  [uploadedCount]=\"uploadedCount\">\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!fFileUploadDir\">\r\n        <ng-container *ngIf=\"enableDrop\">\r\n            <div class=\"ffileupload--drop-wrapper\"\r\n                [ngClass]=\"{'drop-wrapper--append':files.length>0,'drop-wrapper--append-show':showAppendPanel}\">\r\n                <div class=\"action-wrapper--is-upload drop-wrapper--header\" [ngClass]=\"showAppendPanel?'':'d-none'\">\r\n                    <div class=\"action-wrapper--header-left\">\r\n                        <button type=\"button\" class=\"btn btn-link mr-2\" (click)=\"closeAppendPanel()\">\u8FD4\u56DE</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"drop-wrapper--drop-area\" FFileDrop [options]=\"options\"\r\n                    (uploadOutput)=\"dropUploadOutput($event)\" [uploadInput]=\"uploadDragInput\" [disabled]=\"disabled\" [uploadedCount]=\"uploadedCount\">\r\n\r\n                    <button type=\"button\" class=\"btn-upload-icon\" [disabled]=\"disabled\" (click)=\"triggerFileSelect($event)\">\r\n                        <i class=\"f-icon f-icon-upload_big\"></i>\r\n                    </button>\r\n                    <div class=\"drop-wrapper--action\" *ngIf=\"!disabled\">\r\n                        <label class=\"drop-wrapper--action-label\">\r\n                            {{dropText}}\r\n                        </label> \u6216 <button type=\"button\" class=\"drop-wrapper--action-select\" [disabled]=\"disabled\"\r\n                            (click)=\"triggerFileSelect($event)\">{{selectText}}</button>\r\n                    </div>\r\n                    <ng-container *ngTemplateOutlet=\"beforeUploadSupportInfo\"></ng-container>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"files.length>0\">\r\n                <ng-container *ngTemplateOutlet=\"afterSelectHeader\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!enableDrop&&enableSelect\">\r\n            <div class=\"ffileupload--action-wrapper\" [ngClass]=\"{'select-wrapper--append':files.length>0}\">\r\n                <ng-container *ngIf=\"files.length==0;else afterSelectHeader\">\r\n                    <div class=\"action-wrapper--before-upload\">\r\n                        <button type=\"button\" class=\"btn-upload-icon\" [disabled]=\"disabled\"\r\n                            (click)=\"triggerFileSelect($event)\">\r\n                            <i class=\"f-icon f-icon-upload_big\"></i>\r\n                        </button>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n        </ng-container>\r\n    </ng-container>\r\n    <div *ngIf=\"fFileUploadDir&&fFileUploadDir.templateRef\" (click)=\"triggerFileSelect($event)\">\r\n        <ng-container [ngTemplateOutlet]=\"fFileUploadDir.templateRef\" [ngTemplateOutletContext]=\"{'disabled':disabled,'settings':settings,'uploadedCount':uploadedCount}\"></ng-container>\r\n    </div>\r\n    <!--\u5F53\u9009\u4E2D\u6587\u4EF6\u4E4B\u540E\u9690\u85CF-->\r\n    <ng-container *ngIf=\"!fFileUploadDir&&!enableDrop&&enableSelect&&files.length==0\">\r\n        <ng-container *ngTemplateOutlet=\"beforeUploadSupportInfo\"></ng-container>\r\n    </ng-container>\r\n    <!-- <div class=\"ffileupload--common-action\" *ngIf=\"files.length>0\">\r\n    <span class=\"common-action--info\">\u5171<span class=\"text-info mx-1\">{{files.length}}</span>\u4E2A\u6587\u4EF6</span>\r\n   <button type=\"button\" class=\"btn btn-link\" *ngIf=\"!uploadImmediately\">\u4E0A\u4F20\u6240\u6709</button>\r\n</div> -->\r\n    <ul class=\"ffileupload--list\" *ngIf=\"!uploadImmediately\">\r\n        <ng-container *ngFor=\"let fileItem of files\">\r\n            <!-- <ng-container *ngIf=\"!uploadImmediately||fileItem.type!='done'\"> -->\r\n            <li class=\"ffileupload--item\" [@hideUploaded]=\"uploadImmediately&&fileItem.type=='done'?'hide':''\">\r\n                <fieldset class=\"ffileupload--file-wrapper\">\r\n                    <legend>{{fileItem['file'].id}}</legend>\r\n                    <input type=\"hidden\" name=\"ffileupload\" [value]=\"fileItem['file'].nativeFile.name\" />\r\n                    <div class=\"ffileupload--file\"\r\n                        [ngClass]=\"isImage(fileItem['file'].type)?'ffileupload--file-imgpreview':'ffileupload--file-panel'\">\r\n                        <div class=\"ffileupload--action\">\r\n                            <div class=\"ffileupload--action-basic\">\r\n                                <div class=\"action-basic--info\">\r\n                                    <div class=\"action-basic--info-title\" [title]=\"fileItem['file'].nativeFile.name\">{{fileItem['file'].nativeFile.name}}</div>\r\n                                    <div class=\"action-basic--info-byte\">{{formateBytes(fileItem['file'].size)}}</div>\r\n                                </div>\r\n                                <ng-container [ngSwitch]=\"fileItem.type\">\r\n                                    <ng-container *ngSwitchCase=\"'done'\">\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>\u5DF2\u4E0A\u4F20</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn action-btn--done\" title=\"\u5DF2\u4E0A\u4F20\"><i\r\n                                                    class=\"f-icon f-icon-checkmark\"></i></span>\r\n                                            <span class=\"action-basic--action-btn\" title=\"\u5220\u9664\"\r\n                                                (click)=\"removeFile(fileItem['file'].id)\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_delete\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"'start'\">\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>\u4E0A\u4F20\u4E2D</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn uploadpreview-btn--primary\"><i\r\n                                                    class=\"ffile-spin f-icon f-icon-refresh\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>\u5F85\u4E0A\u4F20</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn uploadpreview-btn--primary\" title=\"\u4E0A\u4F20\"\r\n                                                (click)=\"startUpload(fileItem['file'])\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_upload\"></i></span>\r\n                                            <span class=\"action-basic--action-btn\" title=\"\u79FB\u9664\"\r\n                                                (click)=\"cancelUpload(fileItem['file'].id)\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_delete\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n                            </div>\r\n                        </div>\r\n                        <ng-container *ngIf=\"enableImagePreview&&isImage(fileItem['file'].type)\">\r\n                            <f-file-view-image [file]=\"fileItem['file'].nativeFile\"></f-file-view-image>\r\n                        </ng-container>\r\n                    </div>\r\n                </fieldset>\r\n            </li>\r\n            <!-- </ng-container> -->\r\n        </ng-container>\r\n    </ul>\r\n    <div class=\"ffile-load-wrapper\" *ngIf=\"showLoading\">\r\n        <div class=\"loader\"></div>\r\n    </div>\r\n</ng-container>\r\n<ng-template #afterSelectHeader>\r\n    <div class=\"action-wrapper--is-upload\">\r\n        <div class=\"action-wrapper--header-title\"><span class=\"common-action--info\">\u5F85\u4E0A\u4F20<span\r\n                    class=\"mx-1\">{{files.length}}</span>\u4E2A\u6587\u4EF6</span></div>\r\n        <div class=\"action-wrapper--header-right\">\r\n            <button type=\"button\" class=\"btn btn-secondary btn-icontext\" (click)=\"appendNewFiles($event)\">\r\n                <span class=\"f-icon f-icon-add\"></span>\u7EE7\u7EED\u6DFB\u52A0\r\n            </button>\r\n        </div>\r\n        <div class=\"action-wrapper--header-left\">\r\n            <button type=\"button\" class=\"btn btn-primary  mr-2\" (click)=\"startUploadAll()\">\u6279\u91CF\u4E0A\u4F20</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" (click)=\"removelAllUpload()\">\u53D6\u6D88\u4E0A\u4F20</button>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #beforeUploadSupportInfo>\r\n    <div class=\"ffileupload--support-info\">\r\n        <ul class=\"support-info--wrapper\">\r\n            <li *ngIf=\"judgeContentTypeLimit()\">\r\n                <span>\u652F\u6301\u7C7B\u578B\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{allowedContentTypes}}</span>\r\n            </li>\r\n            <li *ngIf=\"judegeFileSizeLimit()\">\r\n                <span>\u5355\u4E2A\u6587\u4EF6\u9650\u5236\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{maxFileSize}}</span>\r\n            </li>\r\n            <li *ngIf=\"maxUploads>0\">\r\n                <span>\u6587\u4EF6\u603B\u6570\u9650\u5236\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{maxUploads}}\u4E2A</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</ng-template>",
                providers: [FFileUploaderService],
                animations: [
                    trigger('hideUploaded', [
                        state('show', style({ opacity: 1, height: '*' })),
                        state('hide', style({ opacity: 0, height: 0 })),
                        // transition('* => void', [
                        //   style({ opacity: 1}),
                        //   animate(200, style({ opacity: 0}))
                        // ])
                        transition('* => hide', animate('0.5s'))
                    ])
                ],
                styles: [":host{position:relative;display:block;padding:10px;background:#fafcfd;max-width:100%;max-height:100%;outline:0;border:1px dashed #d8dfed;border-radius:3px;font-size:13px;-webkit-transition:height .2s linear;transition:height .2s linear}:host.ffileupload-unvisible{display:none!important}:host.ffileupload-selfdefine{background:0 0;border:none;padding:0}.ffileupload--browser{position:absolute;margin:0;padding:0;left:1em;top:1.75em;width:calc(100% - 2em);opacity:0;font-size:0}:host.ffileupload-default{width:435px}:host.ffileupload-uploading{width:654px}.ffileupload--assist{width:100%;height:0;opacity:0}.drop-wrapper--drop-area{text-align:center;padding:10px 0 0}.drop-wrapper--action{padding:10px 16px 6px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#6a6f79;-webkit-box-pack:center;justify-content:center}.drop-wrapper--drop-area .ffileupload--support-info{padding-top:0}.drop-wrapper--action-label{margin:0}.drop-wrapper--action-select{color:#1e5fb3;margin:0;padding:0 4px;box-shadow:none;outline:0;background:0 0;border:none}.ffileupload--action{cursor:pointer}.drop-wrapper--header{margin-bottom:.5rem!important}.drop-wrapper--append{position:absolute;top:0;left:0;right:0;z-index:100;height:0;background:rgba(250,250,250,.9);border-radius:1rem;overflow:hidden;-webkit-transition:height .2s linear;transition:height .2s linear}.drop-wrapper--append-show{padding:10px;height:210px}.action-wrapper--before-upload{padding:.5rem;text-align:center}.ffileupload--action-wrapper .btn-upload-icon,.ffileupload--drop-wrapper .btn-upload-icon{border:none;outline:0;box-shadow:none;color:#ccd5e1;background:0 0;margin:0 auto .5rem 0;cursor:pointer;padding:0}.ffileupload--action-wrapper .btn-upload-icon:disabled,.ffileupload--drop-wrapper .btn-upload-icon:disabled{cursor:default;opacity:.4}.ffileupload--action-wrapper .btn-upload-icon:hover,.ffileupload--drop-wrapper .btn-upload-icon:hover{color:#1e5fb3}.ffileupload--action-wrapper .btn-upload-icon:disabled:hover,.ffileupload--drop-wrapper .btn-upload-icon:disabled:hover{color:#ccd5e1}.btn-upload-icon .f-icon{font-size:36px;height:36px}.action-wrapper--is-upload{padding:4px 10px 16px;text-align:center;font-size:14px;margin:0 -10px;clear:both;overflow:hidden;position:relative}.action-wrapper--header-title{float:left}.action-wrapper--header-right{text-align:right;float:right;position:relative;z-index:100}.action-wrapper--header-left{float:left;position:relative;z-index:100}.ffileupload--item{margin:0 .625rem .625rem 0;list-style:none;width:100%;max-width:308px}.ffileupload--support-info{padding:0 .5rem .5rem;line-height:1.6;color:#b4bccc;text-align:center}.support-info--wrapper{padding:0;margin:0 auto}.support-info--wrapper li{padding:0;margin:0 4px 0 0;list-style:none;display:inline-block;word-break:break-all}.ffileupload--file-wrapper{border:none;margin:0;padding:0;min-width:0;height:100%;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;position:relative}.ffileupload--file-wrapper>legend{position:absolute;overflow:hidden;height:1px;width:1px;padding:0;border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);white-space:nowrap}.ffileupload--file{position:static;display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;color:#2d2f33;border-radius:3px;overflow:hidden;background:#fff;border:1px solid #e5e8ed;box-shadow:0 2px 4px 0 rgba(220,227,237,.53);max-height:200px;height:100%;box-sizing:content-box}.f-file-view-image{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:100%;width:100%;pointer-events:none;will-change:transform,opacity;border-radius:1rem;min-height:6rem}.ffileupload--action-basic{display:-webkit-box;display:flex;padding:6px 10px;-webkit-box-align:center;align-items:center;min-height:66px}.ffileupload--list{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap;margin-right:-.625rem}.action-basic--info{-webkit-box-flex:1;flex:1 1 auto;white-space:nowrap;overflow:hidden}.action-basic--state{background:#e6f8f9;position:absolute;right:0;top:0;font-size:12px;color:#62c8ca;height:28px;width:56px;border-radius:0 0 0 50px/0 0 0 28px;text-align:right;line-height:24px;padding:0 6px 0 0}.action-basic--info-title{margin:0 0 4px;text-overflow:ellipsis;overflow:hidden}.action-basic--info-byte{color:rgba(45,47,51,.45)}.action-basic--action-btn{text-align:center;background:#c7d4ee;height:18px;width:18px;border-radius:9px;display:inline-block;line-height:18px;-webkit-transition:box-shadow .25s ease-in;transition:box-shadow .25s ease-in}.action-basic--action-btn:hover{box-shadow:0 0 0 .125em rgba(43,135,255,.2);background:#2b87ff}.action-btn--done{background:#51bd78!important;color:#fff}.action-basic--action-btn .f-icon{color:#fff;font-size:12px}.ffileupload--file-panel .ffileupload--action{width:100%}.action-basic--action{position:absolute;right:12px;bottom:14px}.action-basic--action-btn+.action-basic--action-btn{margin-left:12px}.ffileupload--common-action{border-top:1px solid #eaeaea;text-align:center;font-size:14px;margin:0 -10px;padding:4px}.common-action--info{margin:0 16px 0 0;display:inline-block}.common-action--info span{font-size:17px;font-weight:600}.ffileupload--file-imgpreview .ffileupload--action-basic{width:100%;height:100%;position:absolute;z-index:80;background:rgba(255,255,255,.8)}.ffile-spin{-webkit-animation:2s linear infinite fa-spin;animation:2s linear infinite ffile-spin}@-webkit-keyframes ffile-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes ffile-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.ffile-load-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;background:rgba(255,255,255,.4)}.ffile-load-wrapper .loader,.ffile-load-wrapper .loader:after,.ffile-load-wrapper .loader:before{background:#2a87ff;-webkit-animation:1s ease-in-out infinite ffile-load-spin;animation:1s ease-in-out infinite ffile-load-spin;width:2px;height:6px}.ffile-load-wrapper .loader{color:#2a87ff;text-indent:-200em;margin:0 auto;position:relative;font-size:12px;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.ffile-load-wrapper .loader:after,.ffile-load-wrapper .loader:before{position:absolute;top:0;content:''}.ffile-load-wrapper .loader:before{left:-6px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.ffile-load-wrapper .loader:after{left:6px}.ffileupload-default-size{width:432px}@-webkit-keyframes ffile-load-spin{0%,100%,80%{box-shadow:0 0;height:10px}40%{box-shadow:0 -6px;height:18px}}@keyframes ffile-load-spin{0%,100%,80%{box-shadow:0 0;height:10px}40%{box-shadow:0 -6px;height:18px}}"]
            }] }
];
/** @nocollapse */
FFileUploadComponent.ctorParameters = () => [
    { type: FFileUploadAPIService },
    { type: FFileUploaderService },
    { type: NotifyService },
    { type: NgZone }
];
FFileUploadComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class.ffileupload',] }],
    visibleState: [{ type: HostBinding, args: ['class.ffileupload-unvisible',] }],
    selfDirectiveDefine: [{ type: HostBinding, args: ['class.ffileupload-selfdefine',] }],
    uploading: [{ type: HostBinding, args: ['class.ffileupload-uploading',] }],
    fFileUploadAssist: [{ type: ViewChild, args: ["uploadAssist",] }],
    fFileUploadDir: [{ type: ContentChild, args: [FFileUploadDirective,] }],
    fileUpload: [{ type: ViewChild, args: [FFileSelectDirective,] }],
    fileDropUpload: [{ type: ViewChild, args: [FFileDropDirective,] }],
    enableImagePreview: [{ type: Input }],
    uploadImmediately: [{ type: Input }],
    uploadedThenHide: [{ type: Input }],
    disabled: [{ type: Input }],
    visible: [{ type: Input }],
    needReset: [{ type: Input }],
    enableDrop: [{ type: Input }],
    dropText: [{ type: Input }],
    enableSelect: [{ type: Input }],
    selectText: [{ type: Input }],
    multiple: [{ type: Input }],
    uploadedCount: [{ type: Input }],
    extendDatas: [{ type: Input }],
    widthThreshold: [{ type: Input }],
    fUploadDoneEvent: [{ type: Output }],
    fUploadRemovedEvent: [{ type: Output }],
    options: [{ type: Input }],
    extendServerConfig: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    FFileUploadComponent.prototype.cls;
    /** @type {?} */
    FFileUploadComponent.prototype.fFileUploadAssist;
    /** @type {?} */
    FFileUploadComponent.prototype.fFileUploadDir;
    /** @type {?} */
    FFileUploadComponent.prototype.fileUpload;
    /** @type {?} */
    FFileUploadComponent.prototype.fileDropUpload;
    /** @type {?} */
    FFileUploadComponent.prototype.enableImagePreview;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadImmediately;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadedThenHide;
    /** @type {?} */
    FFileUploadComponent.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.tVisible;
    /** @type {?} */
    FFileUploadComponent.prototype.needReset;
    /** @type {?} */
    FFileUploadComponent.prototype.enableDrop;
    /** @type {?} */
    FFileUploadComponent.prototype.dropText;
    /** @type {?} */
    FFileUploadComponent.prototype.enableSelect;
    /** @type {?} */
    FFileUploadComponent.prototype.selectText;
    /** @type {?} */
    FFileUploadComponent.prototype.multiple;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadedCount;
    /** @type {?} */
    FFileUploadComponent.prototype.extendDatas;
    /** @type {?} */
    FFileUploadComponent.prototype.widthThreshold;
    /** @type {?} */
    FFileUploadComponent.prototype.fUploadDoneEvent;
    /** @type {?} */
    FFileUploadComponent.prototype.fUploadRemovedEvent;
    /** @type {?} */
    FFileUploadComponent.prototype.allowedContentTypes;
    /** @type {?} */
    FFileUploadComponent.prototype.maxUploads;
    /** @type {?} */
    FFileUploadComponent.prototype.maxFileSize;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.selfUploadOpts;
    /** @type {?} */
    FFileUploadComponent.prototype.files;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadSelectInput;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadDragInput;
    /** @type {?} */
    FFileUploadComponent.prototype.showAppendPanel;
    /** @type {?} */
    FFileUploadComponent.prototype.showLoading;
    /** @type {?} */
    FFileUploadComponent.prototype.settings;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.uploadAPISer;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.fileUploaderSer;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.ngZone;
    /* Skipping unhandled member: ;*/
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZi1maWxlLXVwbG9hZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2V4dGVuZC1maWxlLXVwbG9hZC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3VwbG9hZC9mLWZpbGUtdXBsb2FkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUNoSixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsa0JBQWtCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUV2RyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFFLHFCQUFxQixFQUFFLG9CQUFvQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbEYsT0FBTyxFQUFFLGFBQWEsRUFBaUIsTUFBTSxtQkFBbUIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUzQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFzQnZDLE1BQU0sT0FBTyxvQkFBb0I7Ozs7Ozs7SUF3SC9CLFlBQW9CLFlBQW1DLEVBQVUsZUFBcUMsRUFBVSxhQUE0QixFQUFVLE1BQWM7UUFBaEosaUJBQVksR0FBWixZQUFZLENBQXVCO1FBQVUsb0JBQWUsR0FBZixlQUFlLENBQXNCO1FBQVUsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBdkhsSSxRQUFHLEdBQUcsSUFBSSxDQUFD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SUFFakMsd0NBQTBCOzs7OztJQUMxQix3Q0FBd0I7O0lBYXhCLHlDQUFvRDs7SUFFcEQsMENBQTRCOztJQUM1Qix3Q0FBOEI7O0lBRTlCLDRDQUE2Qjs7SUFDN0IsMENBQTZCOztJQUU3Qix3Q0FBeUI7O0lBRXpCLDZDQUEyQjs7SUFFM0IsMkNBR0U7O0lBRUYsOENBQThCOztJQUU5QixnREFBcUU7O0lBQ3JFLG1EQUF3RTs7SUFHeEUsbURBQTBCOztJQUUxQiwwQ0FBZTs7SUFFZiwyQ0FBcUI7Ozs7O0lBRXJCLDhDQUE2Qzs7SUErQjdDLHFDQUFzQjs7SUFFdEIsaURBQTZDOztJQUU3QywrQ0FBMkM7O0lBRTNDLCtDQUF3Qjs7SUFFeEIsMkNBQW9COztJQUVwQix3Q0FHRTs7Ozs7SUFFVSw0Q0FBMkM7Ozs7O0lBQUUsK0NBQTZDOzs7OztJQUFFLDZDQUFvQzs7Ozs7SUFBRSxzQ0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEhvc3RCaW5kaW5nLCBWaWV3Q2hpbGQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBDb250ZW50Q2hpbGQsIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRkZpbGVTZWxlY3REaXJlY3RpdmUsIEZGaWxlRHJvcERpcmVjdGl2ZSwgRkZpbGVVcGxvYWREaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmUvaW5kZXgnO1xyXG5pbXBvcnQgeyBVcGxvYWRPdXRwdXQsIFVwbG9hZElucHV0LCBVcGxvYWRGaWxlLCBVcGxvYWRlck9wdGlvbnMsIEZVcGxvYWRGaWxlRXh0ZW5kLCBEb2NNZXRhUHJvcGVydHkgfSBmcm9tICcuLi8uLi9tb2RlbC9pbmRleCc7XHJcbmltcG9ydCB7IEZGaWxlVXRpbHMgfSBmcm9tICcuLi8uLi91dGlscy9pbmRleCc7XHJcbmltcG9ydCB7IEZGaWxlVXBsb2FkQVBJU2VydmljZSwgRkZpbGVVcGxvYWRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2luZGV4JztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSwgTm90aWZ5T3B0aW9ucyB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgdHJpZ2dlciwgc3R5bGUsIHN0YXRlLCBhbmltYXRlLCB0cmFuc2l0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XHJcbmltcG9ydCB7IE5nWm9uZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2YtZmlsZS11cGxvYWQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9mLWZpbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9mLWZpbGUtdXBsb2FkLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtGRmlsZVVwbG9hZGVyU2VydmljZV0sXHJcbiAgYW5pbWF0aW9uczogW1xyXG4gICAgdHJpZ2dlcignaGlkZVVwbG9hZGVkJywgW1xyXG4gICAgICBzdGF0ZSgnc2hvdycsIHN0eWxlKFxyXG4gICAgICAgIHsgb3BhY2l0eTogMSwgaGVpZ2h0OiAnKicgfVxyXG4gICAgICApKSxcclxuICAgICAgc3RhdGUoJ2hpZGUnLCBzdHlsZShcclxuICAgICAgICB7IG9wYWNpdHk6IDAsIGhlaWdodDogMCB9XHJcbiAgICAgICkpLFxyXG4gICAgICAvLyB0cmFuc2l0aW9uKCcqID0+IHZvaWQnLCBbXHJcbiAgICAgIC8vICAgc3R5bGUoeyBvcGFjaXR5OiAxfSksXHJcbiAgICAgIC8vICAgYW5pbWF0ZSgyMDAsIHN0eWxlKHsgb3BhY2l0eTogMH0pKVxyXG4gICAgICAvLyBdKVxyXG4gICAgICB0cmFuc2l0aW9uKCcqID0+IGhpZGUnLCBhbmltYXRlKCcwLjVzJykpXHJcbiAgICBdKVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEZGaWxlVXBsb2FkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZmaWxldXBsb2FkJykgY2xzID0gdHJ1ZTtcclxuICAvLyDkuI3lj6/op4FcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZmaWxldXBsb2FkLXVudmlzaWJsZScpIGdldCB2aXNpYmxlU3RhdGUoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMudmlzaWJsZTtcclxuICB9XHJcbiAgLy8g6Ieq5a6a5LmJ5qC35byPXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mZmlsZXVwbG9hZC1zZWxmZGVmaW5lJykgZ2V0IHNlbGZEaXJlY3RpdmVEZWZpbmUoKSB7XHJcbiAgICBpZiAodGhpcy5mRmlsZVVwbG9hZERpcikge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mZmlsZXVwbG9hZC11cGxvYWRpbmcnKSBnZXQgdXBsb2FkaW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZmlsZXMubGVuZ3RoID4gMDtcclxuICB9XHJcblxyXG4gIC8vIOS4jeiDveWcqENvbnN0cnVjdOmHjOi/veWKoGVsXHJcbiAgQFZpZXdDaGlsZChcInVwbG9hZEFzc2lzdFwiKSBmRmlsZVVwbG9hZEFzc2lzdDogRWxlbWVudFJlZjtcclxuICAvLyDoh6rlrprkuYnmjIfku6RcclxuICBAQ29udGVudENoaWxkKEZGaWxlVXBsb2FkRGlyZWN0aXZlKSBmRmlsZVVwbG9hZERpcjogYW55O1xyXG4gIC8vIFxyXG4gIEBWaWV3Q2hpbGQoRkZpbGVTZWxlY3REaXJlY3RpdmUpIGZpbGVVcGxvYWQ6IEZGaWxlU2VsZWN0RGlyZWN0aXZlO1xyXG4gIEBWaWV3Q2hpbGQoRkZpbGVEcm9wRGlyZWN0aXZlKSBmaWxlRHJvcFVwbG9hZDogRkZpbGVEcm9wRGlyZWN0aXZlO1xyXG4gIC8vIOWQr+eUqOWbvueJh+mihOiniFxyXG4gIEBJbnB1dCgpIGVuYWJsZUltYWdlUHJldmlldyA9IHRydWU7XHJcbiAgLy8g5ZCv55So56uL5Y2z5LiK5LygXHJcbiAgQElucHV0KCkgdXBsb2FkSW1tZWRpYXRlbHkgPSBmYWxzZTtcclxuICAvLyDkuIrkvKDlrozmiJDlkI7pmpDol49cclxuICBASW5wdXQoKSB1cGxvYWRlZFRoZW5IaWRlID0gdHJ1ZTtcclxuICAvLyDnpoHnlKjnirbmgIFcclxuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgdFZpc2libGUgPSB0cnVlO1xyXG4gIC8vIOaYr+WQpuWPr+ingVxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZpc2libGUodmFsdWUpIHtcclxuICAgIHRoaXMudFZpc2libGUgPSB2YWx1ZTtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgdmlzaWJsZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnRWaXNpYmxlO1xyXG4gIH1cclxuICAvLyDpnIDopoHph43nva4s6YCa6L+H5LiN5pat55qE6LWL5YC85p2l5pS55Y+YXHJcbiAgQElucHV0KCkgbmVlZFJlc2V0OiBPYnNlcnZhYmxlPGFueT4gPSBuZXcgU3ViamVjdCgpOztcclxuICAvLyDlkK/nlKjmi5bmi71cclxuICBASW5wdXQoKSBlbmFibGVEcm9wID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZHJvcFRleHQgPSBcIuWPr+WwhuaWh+S7tuaLluaLveatpOWkhFwiXHJcbiAgLy8g5ZCv55So6YCJ5oup5paH5Lu25oyJ6ZKuXHJcbiAgQElucHV0KCkgZW5hYmxlU2VsZWN0ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBzZWxlY3RUZXh0ID0gXCLngrnlh7vkuIrkvKBcIjtcclxuICAvLyDlkK/nlKjlpJrpgIlcclxuICBASW5wdXQoKSBtdWx0aXBsZSA9IHRydWU7XHJcbiAgLy8g5bey57uP5LiK5Lyg5paH5Lu2XHJcbiAgQElucHV0KCkgdXBsb2FkZWRDb3VudCA9IDA7XHJcbiAgLy8g5YWs5YWx55qE5omp5bGV5pWw5o2uXHJcbiAgQElucHV0KCkgZXh0ZW5kRGF0YXM6IHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueSxcclxuICAgIGV4dFByb3BlcnR5PzogRG9jTWV0YVByb3BlcnR5IHwgbnVsbCAvL1xyXG4gIH07XHJcbiAgLy8g5a695bqm6ZiI5YC877yM5b2T5a695bqm6LaF6L+HNzYw5pe25YCZ77yM5rKh5pyJ6ZmE5Lu25LiK5Lyg5pe277yM5a695bqm5piv5Zu65a6a5YC877yM5pyJ6ZmE5Lu25LiK5Lyg5pe277yM5pyJ5pyA5aSn5a695bqm5YC8XHJcbiAgQElucHV0KCkgd2lkdGhUaHJlc2hvbGQgPSA3NjA7XHJcbiAgLy8g5LiK5Lyg5ZKM5Yig6Zmk5a+55aSW5oqb5Ye655qE5LqL5Lu2XHJcbiAgQE91dHB1dCgpIGZVcGxvYWREb25lRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPEZVcGxvYWRGaWxlRXh0ZW5kW10+KCk7XHJcbiAgQE91dHB1dCgpIGZVcGxvYWRSZW1vdmVkRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPEZVcGxvYWRGaWxlRXh0ZW5kW10+KCk7XHJcblxyXG4gIC8vIOWFgeiuuOS4iuS8oOeahOaWh+S7tuexu+Wei1xyXG4gIGFsbG93ZWRDb250ZW50VHlwZXMgPSAnKic7XHJcbiAgLy8g6buY6K6k5LiN6ZmQ5Yi26ZmE5Lu25LiK5Lyg5Liq5pWwXHJcbiAgbWF4VXBsb2FkcyA9IDA7XHJcbiAgLy8g5Y2V5L2NS0LvvIzpu5jorqTmmK8xMk1cclxuICBtYXhGaWxlU2l6ZSA9ICcxMk1CJztcclxuXHJcbiAgcHJpdmF0ZSBzZWxmVXBsb2FkT3B0czogVXBsb2FkZXJPcHRpb25zID0ge307XHJcbiAgLy8g5LiK5Lyg6YWN572u6aG5XHJcbiAgQElucHV0KClcclxuICBzZXQgb3B0aW9ucyh1cGxvYWRPcHRzOiBVcGxvYWRlck9wdGlvbnMpIHtcclxuICAgIGlmICh1cGxvYWRPcHRzKSB7XHJcbiAgICAgIGlmICh1cGxvYWRPcHRzLmhhc093blByb3BlcnR5KCdhbGxvd2VkQ29udGVudFR5cGVzJykpIHtcclxuICAgICAgICB0aGlzLmFsbG93ZWRDb250ZW50VHlwZXMgPSB1cGxvYWRPcHRzLmFsbG93ZWRDb250ZW50VHlwZXMuam9pbignLCcpO1xyXG4gICAgICAgIHRoaXMuYWxsb3dlZENvbnRlbnRUeXBlcyA9IHRoaXMuYWxsb3dlZENvbnRlbnRUeXBlcyA9PSAnJyA/ICcqJyA6IHRoaXMuYWxsb3dlZENvbnRlbnRUeXBlcztcclxuICAgICAgfVxyXG4gICAgICBpZiAodXBsb2FkT3B0cy5oYXNPd25Qcm9wZXJ0eSgnbWF4VXBsb2FkcycpKSB7XHJcbiAgICAgICAgdGhpcy5tYXhVcGxvYWRzID0gdXBsb2FkT3B0cy5tYXhVcGxvYWRzO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh1cGxvYWRPcHRzLmhhc093blByb3BlcnR5KCdtYXhGaWxlU2l6ZScpKSB7XHJcbiAgICAgICAgdGhpcy5tYXhGaWxlU2l6ZSA9IEZGaWxlVXRpbHMuaHVtYW5pemVCeXRlcygxMDI0ICogMTAyNCAqIHVwbG9hZE9wdHMubWF4RmlsZVNpemUpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2VsZlVwbG9hZE9wdHMgPSBPYmplY3QuYXNzaWduKHRoaXMuc2VsZlVwbG9hZE9wdHMsIHVwbG9hZE9wdHMpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWxmVXBsb2FkT3B0cztcclxuICB9XHJcbiAgLyoqXHJcbiAgKiDmr4/kuKrnu4Tlj6/ku6Xorr7nva7nibnmrormnI3liqHlj4LmlbDvvIzmnaXopobnm5bpu5jorqTnmoTnu5/kuIDmqKHlnZfnuqfphY3nva5cclxuICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGV4dGVuZFNlcnZlckNvbmZpZyhjb25maWc6IGFueSkge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICB0aGlzLmZpbGVVcGxvYWRlclNlci5zZXRFeHRlbmRTZXJ2ZXJDb25maWcoY29uZmlnKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8g6K6w5b2V5paH5Lu25Liq5pWwXHJcbiAgZmlsZXM6IFVwbG9hZE91dHB1dFtdO1xyXG4gIC8vIOagh+iusOmAmui/h+mAieaLqeaMiemSruWkhOeQhueahOS6i+S7tlxyXG4gIHVwbG9hZFNlbGVjdElucHV0OiBFdmVudEVtaXR0ZXI8VXBsb2FkSW5wdXQ+O1xyXG4gIC8vIOagh+iusOmAmui/h+aLluaLveWkhOeQhueahOS6i+S7tlxyXG4gIHVwbG9hZERyYWdJbnB1dDogRXZlbnRFbWl0dGVyPFVwbG9hZElucHV0PjtcclxuICAvLyDmjqfliLbmmK/lkKbmmL7npLrov73liqDpmYTku7bnmoTpnaLmnb9cclxuICBzaG93QXBwZW5kUGFuZWwgPSBmYWxzZTtcclxuICAvLyDmmL7npLpsb2FkaW5nXHJcbiAgc2hvd0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgc2V0dGluZ3MgPSB7XHJcbiAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCxcclxuICAgIHZpc2libGU6IHRoaXMudmlzaWJsZVxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdXBsb2FkQVBJU2VyOiBGRmlsZVVwbG9hZEFQSVNlcnZpY2UsIHByaXZhdGUgZmlsZVVwbG9hZGVyU2VyOiBGRmlsZVVwbG9hZGVyU2VydmljZSwgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlLCBwcml2YXRlIG5nWm9uZTogTmdab25lKSB7XHJcbiAgICB0aGlzLmZpbGVzID0gW107XHJcbiAgICB0aGlzLnVwbG9hZFNlbGVjdElucHV0ID0gbmV3IEV2ZW50RW1pdHRlcjxVcGxvYWRJbnB1dD4oKTtcclxuICAgIHRoaXMudXBsb2FkRHJhZ0lucHV0ID0gbmV3IEV2ZW50RW1pdHRlcjxVcGxvYWRJbnB1dD4oKTtcclxuICAgIC8vIOmHjee9rlxyXG4gICAgdGhpcy5uZWVkUmVzZXQuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgLy8g5qih5p2/55qE5oOF5Ya15LiL5Y+q6IO95piv56uL5Y2z5LiK5LygXHJcbiAgICBpZiAodGhpcy5mRmlsZVVwbG9hZERpcikge1xyXG4gICAgICB0aGlzLnVwbG9hZEltbWVkaWF0ZWx5ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMuY29tcHV0ZVdpZHRoVGhyZXNob2xkKCk7XHJcblxyXG4gIH1cclxuICAvKipcclxuICAqIOinhuWbvuWIneWni+WMluWQjlxyXG4gICovXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG5cclxuICB9XHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R57uR5a6aXHJcbiAgICovXHJcbiAgdHJpZ2dlckZpbGVTZWxlY3QoZXYpIHtcclxuICAgIGV2ICYmIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgLy8g56aB55So5pe2XHJcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpbGVVcGxvYWQuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmAieaLqemZhOS7tuaMiemSru+8jOWkhOeQhuaKm+WHuuS6i+S7tlxyXG4gICAqIEBwYXJhbSBvdXRwdXQgXHJcbiAgICovXHJcbiAgc2VsZWN0VXBsb2FkT3V0cHV0KG91dHB1dDogVXBsb2FkT3V0cHV0KTogdm9pZCB7XHJcbiAgICB0aGlzLnVwbG9hZE91dHB1dEhhbmRsZXIob3V0cHV0KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5ouW5ou95Yy65Z+f5aSE55CG5oqb5Ye65LqL5Lu2XHJcbiAgICogQHBhcmFtIG91dHB1dCBcclxuICAgKi9cclxuICBkcm9wVXBsb2FkT3V0cHV0KG91dHB1dDogVXBsb2FkT3V0cHV0KTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5lbmFibGVTZWxlY3QpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8g5pqC5LiN5aSE55CG5ouW5ou955qE5LqL5Lu2XHJcbiAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdkcmFnT3ZlcicgJiYgb3V0cHV0LnR5cGUgIT09ICdkcmFnT3V0JyAmJiBvdXRwdXQudHlwZSAhPT0gJ2Ryb3AnKSB7XHJcbiAgICAgIHRoaXMudXBsb2FkT3V0cHV0SGFuZGxlcihvdXRwdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBhbGxBZGRlZFRvUXVldWUg6YCJ5Lit5paH5Lu26L+95Yqg5Yiw6Zif5YiXXHJcbiAgICogQHBhcmFtIG91dHB1dCBcclxuICAgKi9cclxuICBwcml2YXRlIHVwbG9hZE91dHB1dEhhbmRsZXIob3V0cHV0OiBVcGxvYWRPdXRwdXQpOiB2b2lkIHtcclxuXHJcbiAgICAvLyDmmL7npLrov73liqDpnaLmnb9cclxuICAgIGlmICh0aGlzLnNob3dBcHBlbmRQYW5lbCkge1xyXG4gICAgICB0aGlzLnNob3dBcHBlbmRQYW5lbCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ2FkZGVkVG9RdWV1ZScgJiYgdHlwZW9mIG91dHB1dC5maWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB0aGlzLmZpbGVzLnB1c2goeyB0eXBlOiBvdXRwdXQudHlwZSwgZmlsZTogb3V0cHV0LmZpbGUgfSk7XHJcbiAgICAgIC8vIOWmguaenOWQr+eUqOeri+WNs+S4iuS8oFxyXG4gICAgICBpZiAodGhpcy51cGxvYWRJbW1lZGlhdGVseSkge1xyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRVcGxvYWQob3V0cHV0LmZpbGUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnc3RhcnQnKSB7XHJcbiAgICAgIC8vIOW8gOWni+S4iuS8oFxyXG4gICAgICB0aGlzLnVwZGF0ZUZpbGVzU3RhdGUob3V0cHV0LCAnJyk7XHJcbiAgICB9IGVsc2UgaWYgKG91dHB1dC50eXBlID09ICdkb25lJykge1xyXG4gICAgICAvLyDkuIrkvKDlrozmiJBcclxuICAgICAgdGhpcy51cGRhdGVGaWxlc1N0YXRlKG91dHB1dCwgJ2RvbmUnKTtcclxuICAgICAgdGhpcy5mVXBsb2FkRG9uZUV2ZW50LmVtaXQoRkZpbGVVdGlscy5jaGFuZ2VVcGxvYWRGaWxlVG9GaWxlRXh0ZW5kKG91dHB1dC5maWxlcykpO1xyXG4gICAgICB0aGlzLmhpZGVBZnRlckxvYWRlZChvdXRwdXQpO1xyXG4gICAgICAvLyDpmpDol4/mraPlnKjliqDovb1cclxuICAgICAgaWYgKHRoaXMudXBsb2FkSW1tZWRpYXRlbHkgJiYgdGhpcy5zaG93TG9hZGluZyAmJiB0aGlzLmFsbEZpbGVVcGxvYWRlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NhbmNlbGxlZCcgfHwgb3V0cHV0LnR5cGUgPT09ICdyZW1vdmVkJyB8fCBvdXRwdXQudHlwZSA9PSAnZXJyb3InKSB7XHJcbiAgICAgIC8vIOWIoOmZpOaIluiAheenu+mZpOaWh+S7tlxyXG4gICAgICB0aGlzLmZpbGVzID0gdGhpcy5maWxlcy5maWx0ZXIoKGZpbGVPdXRwdXQ6IFVwbG9hZE91dHB1dCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQuZmlsZXMuZmluZEluZGV4KGl0ZW0gPT4gZmlsZU91dHB1dC5maWxlLmlkID09IGl0ZW0uaWQpIDwgMDtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIOmakOiXj+ato+WcqOWKoOi9vVxyXG4gICAgICBpZiAodGhpcy51cGxvYWRJbW1lZGlhdGVseSAmJiB0aGlzLnNob3dMb2FkaW5nICYmIHRoaXMuYWxsRmlsZVVwbG9hZGVkKCkpIHtcclxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zaG93Tm90aWZ5KG91dHB1dCk7XHJcbiAgICB9IGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAncmVqZWN0ZWQnICYmIHR5cGVvZiBvdXRwdXQuZmlsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgLy8g5LiK5Lyg6KKr5ouS57udXHJcbiAgICAgIHRoaXMuc2hvd05vdGlmeShvdXRwdXQpO1xyXG4gICAgICAvLyDpmpDol4/mraPlnKjliqDovb1cclxuICAgICAgaWYgKHRoaXMudXBsb2FkSW1tZWRpYXRlbHkgJiYgdGhpcy5zaG93TG9hZGluZyAmJiB0aGlzLmFsbEZpbGVVcGxvYWRlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgc2hvd05vdGlmeShvdXRwdXQpIHtcclxuICAgIGxldCBub3RpZnlUeXBlID0gJ3dhcm5pbmcnO1xyXG4gICAgaWYgKG91dHB1dC50eXBlID09ICdjYW5jZWxsZWQnIHx8IG91dHB1dC50eXBlID09ICdyZW1vdmVkJykge1xyXG4gICAgICBub3RpZnlUeXBlID0gJ3N1Y2Nlc3MnO1xyXG4gICAgfVxyXG4gICAgbGV0IG1lc3NhZ2UgPSBvdXRwdXQuaGFzT3duUHJvcGVydHkoJ21lc3NhZ2UnKSA/IG91dHB1dFsnbWVzc2FnZSddIDogJyc7XHJcbiAgICB0aGlzLm5vdGlmeVNlcnZpY2Vbbm90aWZ5VHlwZV0oPE5vdGlmeU9wdGlvbnM+e1xyXG4gICAgICBtc2c6IG1lc3NhZ2UsIHRpbWVvdXQ6IDMwMDBcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyDliKTmlq3mmK/lkKbmiYDmnInmlofku7bpg73lt7LkuIrkvKBcclxuICBwcml2YXRlIGFsbEZpbGVVcGxvYWRlZCgpIHtcclxuICAgIGxldCBmaW5kTm90RG9uZUluZGV4ID0gdGhpcy5maWxlcy5maW5kSW5kZXgoaXRlbSA9PiB7XHJcbiAgICAgIGxldCBkb25lVHlwZXMgPSBbJ2RvbmUnLCAnY2FuY2VsbGVkJywgJ3JlbW92ZWQnXTtcclxuICAgICAgbGV0IGZpbmRUeXBlSW5kZXggPSBkb25lVHlwZXMuZmluZEluZGV4KHR5cGUgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlID09IGl0ZW0udHlwZTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmaW5kVHlwZUluZGV4ID09IC0xO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmluZE5vdERvbmVJbmRleCA9PSAtMSA/IHRydWUgOiBmYWxzZTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5pu05paw6ZmE5Lu255qE54q25oCBXHJcbiAgICogQHBhcmFtIG91dHB1dCBcclxuICAgKiBAcGFyYW0gZXZlbnRUeXBlIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlRmlsZXNTdGF0ZShvdXRwdXQ6IFVwbG9hZE91dHB1dCwgZXZlbnRUeXBlKSB7XHJcbiAgICBsZXQgc3RhcnRGaWxlcyA9IFtdO1xyXG4gICAgaWYgKG91dHB1dC5oYXNPd25Qcm9wZXJ0eSgnZmlsZXMnKSAmJiBvdXRwdXQuZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyDmraTlpITmm7TmlrDnlYzpnaLlj6/og73mnInmgKfog73pl67pophcclxuICAgICAgc3RhcnRGaWxlcyA9IG91dHB1dC5maWxlcztcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG91dHB1dC5maWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBzdGFydEZpbGVzID0gW291dHB1dC5maWxlXVxyXG4gICAgfVxyXG4gICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlID8gZXZlbnRUeXBlIDogb3V0cHV0LnR5cGU7XHJcbiAgICBzdGFydEZpbGVzLm1hcChpdGVtID0+IHtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbGVzLmZpbmRJbmRleChmaWxlT3V0cHV0ID0+IHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJyAmJiBmaWxlT3V0cHV0LmZpbGUuaWQgPT09IGl0ZW0uaWQpO1xyXG4gICAgICAvLyDlj5jmm7TnirbmgIFcclxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICB0aGlzLmZpbGVzW2luZGV4XSA9IHsgdHlwZTogZXZlbnRUeXBlLCBmaWxlOiBpdGVtIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICAvKirljZXkuKrmlofku7bkuIrkvKAgKi9cclxuICBzdGFydFVwbG9hZChmaWxlOiBVcGxvYWRGaWxlKTogdm9pZCB7XHJcbiAgICAvKipcclxuICAgICogVG9kbzrlkI7nu63lj6/ku6Xku47kuIrkvKDljLrlnZfkuIrlj5blhoXlrrnov5vooYzmianlsZVcclxuICAgICovXHJcbiAgICBjb25zdCBldmVudDogVXBsb2FkSW5wdXQgPSB0aGlzLnVwbG9hZEFQSVNlci5nZXRBc3NpZ25BUEkoJ3VwbG9hZCcsIHsgZmlsZTogZmlsZSwgdHlwZTogJ3VwbG9hZCcsIGRhdGE6IHRoaXMuZXh0ZW5kRGF0YXMgfSk7XHJcbiAgICB0aGlzLmlucHV0VXBsb2FkRXZlbnRFbWl0KGV2ZW50KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5LiK5Lyg5omA5pyJXHJcbiAgICovXHJcbiAgc3RhcnRVcGxvYWRBbGwoKTogdm9pZCB7XHJcbiAgICAvKipcclxuICAgICAqICBUb2Rv77ya5ZCO57ut77yM5aaC5p6c5q+P5Liq5pWw5o2u5LiN5LiA5qC377yM5q2k5aSE55qE5pWw5o2u5b6X6YeN5paw5b2S6ZuGXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IGV2ZW50OiBVcGxvYWRJbnB1dCA9IHRoaXMudXBsb2FkQVBJU2VyLmdldEFzc2lnbkFQSSgndXBsb2FkQWxsJywgeyB0eXBlOiAndXBsb2FkQWxsJywgZmlsZXM6IFtdLCBkYXRhOiB0aGlzLmV4dGVuZERhdGFzIH0pO1xyXG4gICAgdGhpcy5pbnB1dFVwbG9hZEV2ZW50RW1pdChldmVudCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOW3suS4iuS8oOmakOiXj+WxnuaAp1xyXG4gICAqL1xyXG4gIGhpZGVBZnRlckxvYWRlZChvdXRwdXQ6IFVwbG9hZE91dHB1dCk6IHZvaWQge1xyXG4gICAgLy/kuIrkvKDlrozmiJDlkI7liKDpmaRcclxuICAgIGlmICh0aGlzLnVwbG9hZGVkVGhlbkhpZGUpIHtcclxuICAgICAgLy8gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAvLyDliKDpmaTmiJbogIXnp7vpmaTmlofku7ZcclxuICAgICAgICBsZXQgaWRzID0gb3V0cHV0LmZpbGVzLm1hcChmaWxlSXRlbSA9PiBmaWxlSXRlbS5pZCk7XHJcbiAgICAgICAgdGhpcy5maWxlcyA9IHRoaXMuZmlsZXMuZmlsdGVyKChmaWxlT3V0cHV0OiBVcGxvYWRPdXRwdXQpID0+IHtcclxuICAgICAgICAgIGxldCB0SW5kZXggPSBpZHMuZmluZEluZGV4KHRJZCA9PiB0SWQgPT0gZmlsZU91dHB1dC5maWxlLmlkKTtcclxuICAgICAgICAgIHJldHVybiB0SW5kZXggPiAtMSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKCdoaWRlJywgeyB0eXBlOiAnaGlkZScsIGlkOiBpZHMuam9pbignLCcpIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgICAgLy8gfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWPlua2iOS4iuS8oFxyXG4gICAqL1xyXG4gIGNhbmNlbFVwbG9hZChpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBldmVudDogVXBsb2FkSW5wdXQgPSB0aGlzLnVwbG9hZEFQSVNlci5nZXRBc3NpZ25BUEkoJ2NhbmNlbCcsIHsgaWQ6IGlkLCB0eXBlOiAnY2FuY2VsJyB9KTtcclxuICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDliKDpmaTlt7LkuIrkvKDmlofku7ZcclxuICAgKi9cclxuICByZW1vdmVsQWxsVXBsb2FkKCk6IHZvaWQge1xyXG4gICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKCdyZW1vdmVBbGwnLCB7IHR5cGU6ICdyZW1vdmVBbGwnLCBmaWxlczogW10gfSk7XHJcbiAgICB0aGlzLmlucHV0VXBsb2FkRXZlbnRFbWl0KGV2ZW50KTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWIoOmZpOW3suS4iuS8oOaWh+S7tlxyXG4gICovXHJcbiAgcmVtb3ZlRmlsZShpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBldmVudDogVXBsb2FkSW5wdXQgPSB0aGlzLnVwbG9hZEFQSVNlci5nZXRBc3NpZ25BUEkoJ3JlbW92ZScsIHsgaWQ6IGlkLCB0eXBlOiAncmVtb3ZlJyB9KTtcclxuICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG4gIH1cclxuICAvKiogKi9cclxuICAvKipcclxuICAgKiBcclxuICAgKiBAcGFyYW0gYnl0ZXMgXHJcbiAgICovXHJcbiAgZm9ybWF0ZUJ5dGVzKGJ5dGVzKSB7XHJcbiAgICByZXR1cm4gRkZpbGVVdGlscy5odW1hbml6ZUJ5dGVzKGJ5dGVzKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5Yik5pat5piv5Zu+54mHXHJcbiAgICogQHBhcmFtIHR5cGUgXHJcbiAgICovXHJcbiAgaXNJbWFnZSh0eXBlKSB7XHJcbiAgICByZXR1cm4gdHlwZS5pbmRleE9mKCdpbWFnZScpID4gLTE7XHJcbiAgfVxyXG4gIC8vIGluUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcclxuICAvLyAgIGNvbnNvbGUubG9nKCfov5vlhaVpblByb2dyZXNzJyk7XHJcbiAgLy8gICBpZiAocHJvZ3Jlc3MuZGF0YS5wZXJjZW50YWdlID09IDEwMCkge1xyXG4gIC8vICAgICByZXR1cm4gJ2RvbmUnXHJcbiAgLy8gICB9XHJcbiAgLy8gICBpZiAocHJvZ3Jlc3MuZGF0YS5wZXJjZW50YWdlID09IDApIHtcclxuICAvLyAgICAgcmV0dXJuICd1cGxvYWRpJztcclxuICAvLyAgIH1cclxuICAvLyAgIHJldHVybiAncHJvZ3Jlc3MnO1xyXG4gIC8vIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5piv5ZCm5Yik5pat5pyJ57G75Z6L6ZmQ5Yi2XHJcbiAgICovXHJcbiAganVkZ2VDb250ZW50VHlwZUxpbWl0KCkge1xyXG4gICAgbGV0IHRUeXBlcyA9IHRoaXMuYWxsb3dlZENvbnRlbnRUeXBlcy5zcGxpdCgnLCcpO1xyXG4gICAgbGV0IGhhc0FsbEluZGV4ID0gdFR5cGVzLmZpbmRJbmRleChpdGVtID0+IHtcclxuICAgICAgcmV0dXJuIGl0ZW0gPT0gJyonO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaGFzQWxsSW5kZXggPT0gLTE7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWIpOaWreaYr+WQpuacieaWh+S7tuWkp+Wwj+eahOmZkOWItlxyXG4gICAqL1xyXG4gIGp1ZGVnZUZpbGVTaXplTGltaXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tYXhGaWxlU2l6ZSAhPSAnMCBCeXRlJ1xyXG4gIH1cclxuICAvKipcclxuICAgKiDov73liqBcclxuICAgKi9cclxuICBhcHBlbmROZXdGaWxlcyhldikge1xyXG4gICAgLy/lkK/nlKjmi5bmi71cclxuICAgIGlmICh0aGlzLmVuYWJsZURyb3ApIHtcclxuICAgICAgdGhpcy5zaG93QXBwZW5kUGFuZWwgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXYgJiYgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMudHJpZ2dlckZpbGVTZWxlY3QoZXYpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiDlhbPpl63ov73liqDpnaLmnb9cclxuICAgKi9cclxuICBjbG9zZUFwcGVuZFBhbmVsKCkge1xyXG4gICAgdGhpcy5zaG93QXBwZW5kUGFuZWwgPSBmYWxzZTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog57uf5LiA6Kem5Y+RIOmZhOS7tumAieaLqeWSjOaLluaLvemZhOS7tueahOS6i+S7tlxyXG4gICAqIEBwYXJhbSBldiBcclxuICAgKi9cclxuICBwcml2YXRlIGlucHV0VXBsb2FkRXZlbnRFbWl0KGV2OiBVcGxvYWRJbnB1dCkge1xyXG4gICAgLy8g5aaC5p6c5paH5Lu25LiK5Lyg5ZCv55SoXHJcbiAgICBpZiAodGhpcy5lbmFibGVTZWxlY3QpIHtcclxuICAgICAgdGhpcy51cGxvYWRTZWxlY3RJbnB1dC5lbWl0KGV2KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudXBsb2FkRHJhZ0lucHV0LmVtaXQoZXYpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyDph43nva7mlrnms5VcclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuZmlsZXMgPSBbXTtcclxuICAgIC8vIOWmguaenOaWh+S7tuS4iuS8oOWQr+eUqFxyXG4gICAgaWYgKHRoaXMuZW5hYmxlU2VsZWN0KSB7XHJcbiAgICAgIHRoaXMuZmlsZVVwbG9hZCAmJiB0aGlzLmZpbGVVcGxvYWQucmVzZXQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmlsZURyb3BVcGxvYWQgJiYgdGhpcy5maWxlRHJvcFVwbG9hZC5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb21wdXRlV2lkdGhUaHJlc2hvbGQoKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6K6h566X6ZiI5YC8XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjb21wdXRlV2lkdGhUaHJlc2hvbGQoKSB7XHJcbiAgICAvL1xyXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGxldCB0TmVlZENvbXB1dGVkQ2xzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHNlbGYuZkZpbGVVcGxvYWREaXIgfHwgIXNlbGYudmlzaWJsZSkge1xyXG4gICAgICAgICAgdE5lZWRDb21wdXRlZENscyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDorqHnrpflhYPntKBcclxuICAgICAgICBsZXQgYXNzaXN0RWwgPSBzZWxmLmZGaWxlVXBsb2FkQXNzaXN0ID8gc2VsZi5mRmlsZVVwbG9hZEFzc2lzdC5uYXRpdmVFbGVtZW50IDogbnVsbDtcclxuICAgICAgICAvLyDotoXov4fpmIjlgLxcclxuICAgICAgICBpZiAoYXNzaXN0RWwgJiYgYXNzaXN0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggPiBzZWxmLndpZHRoVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICB0TmVlZENvbXB1dGVkQ2xzID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdE5lZWRDb21wdXRlZENscyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXNzaXN0RWwpIHtcclxuICAgICAgICAgIGxldCBhY3Rpb25GdW4gPSB0TmVlZENvbXB1dGVkQ2xzID8gJ2FkZCcgOiAncmVtb3ZlJztcclxuICAgICAgICAgIGFzc2lzdEVsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0W2FjdGlvbkZ1bl0oJ2ZmaWxldXBsb2FkLWRlZmF1bHQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIDApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==